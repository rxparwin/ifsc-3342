!function(e){function t(t){for(var r,i,a=t[0],u=t[1],c=t[2],l=0,p=[];l<a.length;l++)i=a[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(d&&d(t);p.length;)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={227:0,528:0},o={227:0,528:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[];i[e]?t.push(i[e]):0!==i[e]&&{0:1,1:1,2:1,4:1,5:1,7:1,8:1,10:1,13:1,16:1,18:1,19:1,20:1,23:1,24:1,25:1,27:1,28:1,30:1,32:1,33:1,35:1,36:1,37:1,38:1,39:1,40:1,41:1,42:1,43:1,45:1,46:1,47:1,49:1,52:1,53:1,54:1,55:1,56:1,57:1,58:1,60:1,61:1,63:1,64:1,65:1,66:1,68:1,69:1,71:1,72:1,109:1,110:1,111:1,112:1,113:1,114:1,115:1,116:1,117:1,118:1,119:1,120:1,121:1,123:1,124:1,125:1,126:1,127:1,128:1,129:1,130:1,131:1,132:1,134:1,135:1,136:1,137:1,139:1,526:1,532:1,533:1,534:1,535:1,536:1,537:1,538:1,539:1,540:1,541:1,542:1,543:1,544:1,545:1,546:1,547:1,548:1,549:1,550:1,551:1,552:1,553:1,554:1,555:1,556:1,557:1,558:1,559:1,560:1,561:1,562:1,563:1,564:1,565:1,566:1,567:1,568:1,569:1,570:1,571:1,573:1,574:1,575:1,576:1,577:1,578:1,580:1,581:1,585:1,586:1,587:1,588:1,589:1,590:1,591:1,593:1,594:1,595:1,596:1,597:1,598:1,599:1,600:1,601:1,602:1,603:1,604:1,605:1,606:1,608:1,609:1,610:1,611:1,612:1,613:1,614:1,615:1,617:1,618:1,619:1,620:1,621:1,622:1,623:1,624:1,625:1,626:1,627:1,628:1,629:1,630:1,631:1,632:1,633:1,634:1,636:1,637:1,638:1,639:1,640:1,641:1,642:1,643:1,646:1,647:1,648:1,649:1,650:1,651:1,652:1,655:1,656:1,658:1,659:1,660:1,661:1,662:1,664:1,667:1,668:1,669:1,670:1,671:1,672:1,673:1,674:1,675:1,676:1,678:1,685:1}[e]&&t.push(i[e]=new Promise((function(t,n){for(var r=e+"-60d20da0a0400d3535b8.css",o=a.p+r,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var c=(d=s[u]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(c===r||c===o))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){var d;if((c=(d=l[u]).getAttribute("data-href"))===r||c===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,delete i[e],p.parentNode.removeChild(p),n(s)},p.href=o,document.getElementsByTagName("head")[0].appendChild(p)})).then((function(){i[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.src=function(e){return a.p+""+({75:"locale-ar-sa",76:"locale-cs-cz",77:"locale-cy-gb",78:"locale-da-dk",79:"locale-de-de",80:"locale-en",81:"locale-en-au",82:"locale-en-cd",83:"locale-en-gb",84:"locale-en-sa",85:"locale-en-sb",86:"locale-en-sc",87:"locale-en-sm",88:"locale-en-us-k12",89:"locale-en-us-pro",90:"locale-en-za",91:"locale-es-es",92:"locale-fr-fr",93:"locale-it-it",94:"locale-ja-jp",95:"locale-ko-kr",96:"locale-ms-my",97:"locale-nb-no",98:"locale-nl-nl",99:"locale-nn-no",100:"locale-pl-pl",101:"locale-pt-br",102:"locale-ru-ru",103:"locale-sv-se",104:"locale-th-th",105:"locale-tr-tr",106:"locale-zh-cn",107:"locale-zh-tw",228:"app_develop",229:"cldrdata-ar",230:"cldrdata-ar-001",231:"cldrdata-ar-AE",232:"cldrdata-ar-BH",233:"cldrdata-ar-DJ",234:"cldrdata-ar-DZ",235:"cldrdata-ar-EG",236:"cldrdata-ar-EH",237:"cldrdata-ar-ER",238:"cldrdata-ar-IL",239:"cldrdata-ar-IQ",240:"cldrdata-ar-JO",241:"cldrdata-ar-KM",242:"cldrdata-ar-KW",243:"cldrdata-ar-LB",244:"cldrdata-ar-LY",245:"cldrdata-ar-MA",246:"cldrdata-ar-MR",247:"cldrdata-ar-OM",248:"cldrdata-ar-PS",249:"cldrdata-ar-QA",250:"cldrdata-ar-SA",251:"cldrdata-ar-SD",252:"cldrdata-ar-SO",253:"cldrdata-ar-SS",254:"cldrdata-ar-SY",255:"cldrdata-ar-TD",256:"cldrdata-ar-TN",257:"cldrdata-ar-YE",258:"cldrdata-bg",259:"cldrdata-bg-BG",260:"cldrdata-ca",261:"cldrdata-ca-AD",262:"cldrdata-ca-ES",263:"cldrdata-ca-ES-VALENCIA",264:"cldrdata-ca-FR",265:"cldrdata-ca-IT",266:"cldrdata-cs",267:"cldrdata-cs-CZ",268:"cldrdata-cy",269:"cldrdata-cy-GB",270:"cldrdata-da",271:"cldrdata-da-DK",272:"cldrdata-da-GL",273:"cldrdata-dav",274:"cldrdata-dav-KE",275:"cldrdata-de",276:"cldrdata-de-AT",277:"cldrdata-de-BE",278:"cldrdata-de-CH",279:"cldrdata-de-DE",280:"cldrdata-de-LI",281:"cldrdata-de-LU",282:"cldrdata-en",283:"cldrdata-en-001",284:"cldrdata-en-150",285:"cldrdata-en-AG",286:"cldrdata-en-AI",287:"cldrdata-en-AS",288:"cldrdata-en-AU",289:"cldrdata-en-BB",290:"cldrdata-en-BE",291:"cldrdata-en-BM",292:"cldrdata-en-BS",293:"cldrdata-en-BW",294:"cldrdata-en-BZ",295:"cldrdata-en-CA",296:"cldrdata-en-CC",297:"cldrdata-en-CK",298:"cldrdata-en-CM",299:"cldrdata-en-CX",300:"cldrdata-en-DG",301:"cldrdata-en-DM",302:"cldrdata-en-ER",303:"cldrdata-en-FJ",304:"cldrdata-en-FK",305:"cldrdata-en-FM",306:"cldrdata-en-GB",307:"cldrdata-en-GD",308:"cldrdata-en-GG",309:"cldrdata-en-GH",310:"cldrdata-en-GI",311:"cldrdata-en-GM",312:"cldrdata-en-GU",313:"cldrdata-en-GY",314:"cldrdata-en-HK",315:"cldrdata-en-IE",316:"cldrdata-en-IM",317:"cldrdata-en-IN",318:"cldrdata-en-IO",319:"cldrdata-en-JE",320:"cldrdata-en-JM",321:"cldrdata-en-KE",322:"cldrdata-en-KI",323:"cldrdata-en-KN",324:"cldrdata-en-KY",325:"cldrdata-en-LC",326:"cldrdata-en-LR",327:"cldrdata-en-LS",328:"cldrdata-en-MG",329:"cldrdata-en-MH",330:"cldrdata-en-MO",331:"cldrdata-en-MP",332:"cldrdata-en-MS",333:"cldrdata-en-MT",334:"cldrdata-en-MU",335:"cldrdata-en-MW",336:"cldrdata-en-MY",337:"cldrdata-en-NA",338:"cldrdata-en-NF",339:"cldrdata-en-NG",340:"cldrdata-en-NR",341:"cldrdata-en-NU",342:"cldrdata-en-NZ",343:"cldrdata-en-PG",344:"cldrdata-en-PH",345:"cldrdata-en-PK",346:"cldrdata-en-PN",347:"cldrdata-en-PR",348:"cldrdata-en-PW",349:"cldrdata-en-RW",350:"cldrdata-en-SB",351:"cldrdata-en-SC",352:"cldrdata-en-SD",353:"cldrdata-en-SG",354:"cldrdata-en-SH",355:"cldrdata-en-SL",356:"cldrdata-en-SS",357:"cldrdata-en-SX",358:"cldrdata-en-SZ",359:"cldrdata-en-TC",360:"cldrdata-en-TK",361:"cldrdata-en-TO",362:"cldrdata-en-TT",363:"cldrdata-en-TV",364:"cldrdata-en-TZ",365:"cldrdata-en-UG",366:"cldrdata-en-UM",367:"cldrdata-en-US",368:"cldrdata-en-US-POSIX",369:"cldrdata-en-VC",370:"cldrdata-en-VG",371:"cldrdata-en-VI",372:"cldrdata-en-VU",373:"cldrdata-en-WS",374:"cldrdata-en-ZA",375:"cldrdata-en-ZM",376:"cldrdata-en-ZW",377:"cldrdata-es",378:"cldrdata-es-419",379:"cldrdata-es-AR",380:"cldrdata-es-BO",381:"cldrdata-es-CL",382:"cldrdata-es-CO",383:"cldrdata-es-CR",384:"cldrdata-es-CU",385:"cldrdata-es-DO",386:"cldrdata-es-EA",387:"cldrdata-es-EC",388:"cldrdata-es-ES",389:"cldrdata-es-GQ",390:"cldrdata-es-GT",391:"cldrdata-es-HN",392:"cldrdata-es-IC",393:"cldrdata-es-MX",394:"cldrdata-es-NI",395:"cldrdata-es-PA",396:"cldrdata-es-PE",397:"cldrdata-es-PH",398:"cldrdata-es-PR",399:"cldrdata-es-PY",400:"cldrdata-es-SV",401:"cldrdata-es-US",402:"cldrdata-es-UY",403:"cldrdata-es-VE",404:"cldrdata-fi",405:"cldrdata-fi-FI",406:"cldrdata-fr",407:"cldrdata-fr-BE",408:"cldrdata-fr-BF",409:"cldrdata-fr-BI",410:"cldrdata-fr-BJ",411:"cldrdata-fr-BL",412:"cldrdata-fr-CA",413:"cldrdata-fr-CD",414:"cldrdata-fr-CF",415:"cldrdata-fr-CG",416:"cldrdata-fr-CH",417:"cldrdata-fr-CI",418:"cldrdata-fr-CM",419:"cldrdata-fr-DJ",420:"cldrdata-fr-DZ",421:"cldrdata-fr-FR",422:"cldrdata-fr-GA",423:"cldrdata-fr-GF",424:"cldrdata-fr-GN",425:"cldrdata-fr-GP",426:"cldrdata-fr-GQ",427:"cldrdata-fr-HT",428:"cldrdata-fr-KM",429:"cldrdata-fr-LU",430:"cldrdata-fr-MA",431:"cldrdata-fr-MC",432:"cldrdata-fr-MF",433:"cldrdata-fr-MG",434:"cldrdata-fr-ML",435:"cldrdata-fr-MQ",436:"cldrdata-fr-MR",437:"cldrdata-fr-MU",438:"cldrdata-fr-NC",439:"cldrdata-fr-NE",440:"cldrdata-fr-PF",441:"cldrdata-fr-PM",442:"cldrdata-fr-RE",443:"cldrdata-fr-RW",444:"cldrdata-fr-SC",445:"cldrdata-fr-SN",446:"cldrdata-fr-SY",447:"cldrdata-fr-TD",448:"cldrdata-fr-TG",449:"cldrdata-fr-TN",450:"cldrdata-fr-VU",451:"cldrdata-fr-WF",452:"cldrdata-fr-YT",453:"cldrdata-ga",454:"cldrdata-ga-IE",455:"cldrdata-he",456:"cldrdata-he-IL",457:"cldrdata-it",458:"cldrdata-it-CH",459:"cldrdata-it-IT",460:"cldrdata-it-SM",461:"cldrdata-ja",462:"cldrdata-ja-JP",463:"cldrdata-ko",464:"cldrdata-ko-KP",465:"cldrdata-ko-KR",466:"cldrdata-kok",467:"cldrdata-kok-IN",468:"cldrdata-ms",469:"cldrdata-ms-Latn",470:"cldrdata-ms-Latn-BN",471:"cldrdata-ms-Latn-MY",472:"cldrdata-ms-Latn-SG",473:"cldrdata-nb",474:"cldrdata-nb-NO",475:"cldrdata-nb-SJ",476:"cldrdata-nl",477:"cldrdata-nl-AW",478:"cldrdata-nl-BE",479:"cldrdata-nl-BQ",480:"cldrdata-nl-CW",481:"cldrdata-nl-NL",482:"cldrdata-nl-SR",483:"cldrdata-nl-SX",484:"cldrdata-nn",485:"cldrdata-nn-NO",486:"cldrdata-pl",487:"cldrdata-pl-PL",488:"cldrdata-pt",489:"cldrdata-pt-AO",490:"cldrdata-pt-BR",491:"cldrdata-pt-CV",492:"cldrdata-pt-GW",493:"cldrdata-pt-MO",494:"cldrdata-pt-MZ",495:"cldrdata-pt-PT",496:"cldrdata-pt-ST",497:"cldrdata-pt-TL",498:"cldrdata-ru",499:"cldrdata-ru-BY",500:"cldrdata-ru-KG",501:"cldrdata-ru-KZ",502:"cldrdata-ru-MD",503:"cldrdata-ru-RU",504:"cldrdata-ru-UA",505:"cldrdata-sv",506:"cldrdata-sv-AX",507:"cldrdata-sv-FI",508:"cldrdata-sv-SE",509:"cldrdata-th",510:"cldrdata-th-TH",511:"cldrdata-tr",512:"cldrdata-tr-CY",513:"cldrdata-tr-TR",514:"cldrdata-vi",515:"cldrdata-vi-VN",516:"cldrdata-zh",517:"cldrdata-zh-Hans",518:"cldrdata-zh-Hans-CN",519:"cldrdata-zh-Hans-HK",520:"cldrdata-zh-Hans-MO",521:"cldrdata-zh-Hans-SG",522:"cldrdata-zh-Hant",523:"cldrdata-zh-Hant-HK",524:"cldrdata-zh-Hant-MO",525:"cldrdata-zh-Hant-TW",526:"courses",527:"datepicker-locales",531:"vendors~app_develop"}[e]||e)+"-60d20da0a0400d3535b8.js"}(e);var c=new Error;s=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,n[1](c)}o[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:u})}),12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=c;s.push(["e6ZA",108,530]),n()}({"+3BC":function(e,t,n){},"+4Px":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return m})),n.d(t,"p",(function(){return f})),n.d(t,"q",(function(){return h})),n.d(t,"r",(function(){return g})),n.d(t,"s",(function(){return v})),n.d(t,"t",(function(){return b})),n.d(t,"u",(function(){return y})),n.d(t,"v",(function(){return S})),n.d(t,"w",(function(){return C})),n.d(t,"h",(function(){return w})),n.d(t,"k",(function(){return k})),n.d(t,"o",(function(){return I})),n.d(t,"n",(function(){return T})),n.d(t,"x",(function(){return E})),n.d(t,"y",(function(){return $})),n.d(t,"A",(function(){return P})),n.d(t,"z",(function(){return A}));var r=8,i=188,o=46,s=40,a=35,u=13,c=27,l=36,d=37,p=110,m=108,f=34,h=33,g=190,v=39,b=32,y=9,S=38,C=48,w=53,k=57,I=96,T=105;function E(e){var t=e.keyCode;return t===S||t===s||t===d||t===v}function $(e){return e.keyCode===u||e.keyCode===m}function P(e){return e.keyCode===y&&!e.shiftKey}function A(e){return e.keyCode===y&&e.shiftKey}},"+IM5":function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",(function(){return d})),n.d(t,"TrueFalseAnswerType",(function(){return p}));var r=n("D57K"),i=(n("QLzv"),n("wHJ2")),o=n("nbDY"),s=n.n(o),a=n("Sa5G");n.d(t,"QuestionType",(function(){return a.A})),n.d(t,"FIMBAnswerEvaluationType",(function(){return a.p}));var u=n("yCC5"),c=n("Rjd/"),l=n("nkTj"),d=u.Ub,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.TrueFalse=new t("true_false"),t.AgreeDisagree=new t("agree_disagree"),t.RightWrong=new t("right_wrong"),t.YesNo=new t("yes_no"),t.UserEnteredLabels=new t("user_entered_labels"),t}(s.a);c.a.factory(d,["restmod",l.d,function(e){return e.model().mix({ui:{init:function(){return{rendered:!1}}},$extend:{Record:{getContentIdForGoalAlignment:function(){return"blackboard.data.qti.asi.AsiObject;"+this.id},getContentTitleForGoalAlignment:function(){return this.title},isCurrentUserEligibleToAlignGoals:function(){return this.permissions&&!0===this.permissions.edit},saveAlignedGoals:function(e){var t=this;return e&&(this.alignedGoals=e.map((function(e){return{goalId:e.id,isVisibleToStudent:!0,goal:e}}))),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals,questionType:this.questionType}}).$then((function(){t.$getPreviousVersion()&&(t.$getPreviousVersion().alignedGoals=t.alignedGoals)}))},isPresentationOnly:function(){return a.A.PresentationOnly.isEqualTo(this.questionType)}},Collection:{getInsertIndex:function(e){var t=-1,n=e.positionBefore,r=e.positionAfter;return null!=n&&(t="start"===i.lowercase(n)?0:this.indexOfItemById(n)),t<0&&null!=r&&("end"===i.lowercase(r)?t=this.length:(t=this.indexOfItemById(r))>=0&&t++),t},indexOfItemById:function(e){return this.$indexOf((function(t){return t.id===e}))}}}})}])},"+O05":function(e,t,n){"use strict";n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return y})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return S}));var r,i,o=n("D57K"),s=n("nsO7"),a=n("wHJ2"),u=n("pjml"),c=n("12mu"),l=n("0JpG"),d=n("JfV0"),p=n("5Dl8"),m=n("aHpC"),f=n("klG7"),h="ultra.services.assessment",g="assessment",v="course.content.assessment.feedbackOption",b=[d.FeedbackOption.InstructorFeedback,d.FeedbackOption.Score,d.FeedbackOption.CorrectAnswers],y=((r={})[d.FeedbackOption.InstructorFeedback]="feedback",r[d.FeedbackOption.Score]="grade",r[d.FeedbackOption.CorrectAnswers]="check-circle",r);!function(e){e.FOLDER="folder",e.ASSESSMENT="assessment",e.BANK="bank"}(i||(i={}));var S=function(){function e(e,t,n,r){this.modal=e,this.$rootScope=t,this.$q=n,this.localizeService=r}return e.isAssessment=function(e){return u.r.ContentHandler.TestLink.isEqualTo(e.contentHandler)||u.r.ContentHandler.SurveyLink.isEqualTo(e.contentHandler)},e.isExternalSubmissionsAssessment=function(e){if(a.isUndefined(e)||null==e)return!1;if(u.r.ContentHandler.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail){var t=e.contentDetail[u.r.ContentHandler.TestLink.handle];return a.isDefined(t)&&a.isDefined(t.test)&&a.isDefined(t.test.deploymentSettings)&&t.test.deploymentSettings.isCollectExternalSubmissions}return!1},e.getQuestionsForAttempt=function(e,t){if(!e.getToolAttemptDetailItem(t))return[];var n=e.getToolAttemptDetailItem(t).questionAttempts;return n&&n.length>0?n.map((function(e){return e.question})):[]},e.studentCanViewAttemptGradeAndFeedback=function(e,t){return t?!!(e&&e.isSubmitted()&&t.isPosted()):this.studentCanViewAttemptResults(e)},e.studentCanViewAttemptResults=function(e){return!!(null==e?void 0:e.isCompleted())},e.attemptHasFeedback=function(e){var t=e&&e.getFeedbackToUser();return!!t&&!!t.rawText},e.groupAttemptHasIndividualFeedback=function(e){var t=e&&e.attempts&&e.attempts[0].getGroupIndividualFeedbackToUser();return!!t&&!!t.rawText},e.canViewAssessmentException=function(e,t,n,r){return!e&&!t&&n&&!r},e.getSubmissionListAllExceptions=function(e,t){return null==e||null==t?null:e.assessments.$buildRaw(t.getDeployedAssessment().assessment).exceptions.$resolve().$allow([404]).$asPromise()},e.initAssessmentExceptionsIndicators=function(e,t){var n=this;if(null==e||null==t)return null;var r={},i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return this.getSubmissionListAllExceptions(e,t).then((function(t){var o=n.setAssessmentExceptionStyleTag(i.id)();return t.length&&t.forEach((function(t){n.setAssessmentExceptionClass(o,e.id,t,!0,r)})),o}))},e.updateAssessmentExceptionIndicator=function(e,t,n,r){if(void 0===n&&(n=!0),null!=e&&null!=t){var i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),o=this.setAssessmentExceptionStyleTag(i.id)();this.setAssessmentExceptionClass(o,e.id,r,n)}},e.setAssessmentExceptionStyleTag=function(e){var t="css_assessment_exceptions"+e;return s.once((function(){var e=a.element(document).find("#"+t);return 0===e.length&&(e=a.element('<style id="'+t+'"></style>').appendTo("head")),e}))},e.setAssessmentExceptionClass=function(e,t,n,r,i){void 0===r&&(r=!0);var o,a=new p.a,c=r?"inline-block":"none",l=n.target.id,d=n.target.type;u.e.AssessmentExceptionType.User.isEqualTo(d)&&a.selector(".cc"+t+" .assessment-exception bb-username.course_user"+l+":before").rule("display",c),u.e.AssessmentExceptionType.Group.isEqualTo(d)&&(a.selector(".cc"+t+" .assessment-exception .show-exceptions.submission_row_group"+l+":before").rule("display",c),a.selector(".cc"+t+" .slick_title"+l+" .assessment-exception .show-exceptions:before").rule("display",c),a.selector(".cc"+t+" .assign_group"+l+".show-exceptions:before").rule("display",c)),i&&(i[l]=a.build(),o=s(i).sortBy().map((function(e,t){return e})).join("\n")),o&&o!==e.text()&&e.text(o),o||(o=e.text(),e.text([o,a.build()].join("\n")))},e.getSubmissionRowException=function(e,t,n,r){var i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return u.e.AssessmentExceptionType.Group.isEqualTo(n)?i.groupExceptions.$new(r).$resolve().$allow([404]).$asPromise():u.e.AssessmentExceptionType.User.isEqualTo(n)?i.userExceptions.$new(r).$resolve().$allow([404]).$asPromise():void 0},e.deleteException=function(e,t,n,r){var i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return u.e.AssessmentExceptionType.User.isEqualTo(n)?i.userExceptions.$new(r).deleteException():u.e.AssessmentExceptionType.Group.isEqualTo(n)?i.groupExceptions.$new(r).deleteException():void 0},e.setSubmissionRowException=function(e,t,n,r,i){var o=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),s={due:i.due,start:i.start,end:i.end,attempts:i.attempts};return u.e.AssessmentExceptionType.User.isEqualTo(n)?o.userExceptions.$new(r).saveException(s):u.e.AssessmentExceptionType.Group.isEqualTo(n)?o.groupExceptions.$new(r).saveException(s):void 0},e.isFeedbackOptionEnabled=function(e,t){return null!=d.FeedbackSettings.getFeedbackModeByOption(e,t).mode},e.prototype.getFeedbackModeLabelByOption=function(e,t){var n=this,r=d.FeedbackSettings.getFeedbackModeByOption(e,t),i=r.mode,o=r.associatedDate;return i?this.localizeService.loadBundle("components/services/assessment").then((function(){switch(i){case d.FeedbackMode.AfterAttemptGraded:return n.localizeService.translateSync({locale:n.localizeService.getLocale(n.$rootScope),key:"components.services.assessment.feedbackModeDisplay.afterPosted"});case d.FeedbackMode.AfterDueDate:return n.localizeService.translateSync({locale:n.localizeService.getLocale(n.$rootScope),key:"components.services.assessment.feedbackModeDisplay.afterDueDate"});case d.FeedbackMode.AfterSubmission:var t=e===d.FeedbackOption.Score||e===d.FeedbackOption.CorrectAnswers;return n.localizeService.translateSync({locale:n.localizeService.getLocale(n.$rootScope),key:t?"components.services.assessment.feedbackModeDisplay.afterSubmission.modified":"components.services.assessment.feedbackModeDisplay.afterSubmission"});case d.FeedbackMode.OnSpecifiedDate:return n.localizeService.translateSync({locale:n.localizeService.getLocale(n.$rootScope),key:"components.services.assessment.feedbackModeDisplay.onSpecificDate",params:{date:o},noWrap:!0});default:console.error("Feedback mode: "+i+" is not yet supported")}})):this.$q.resolve(null)},e.prototype.getFeedbackModeLabels=function(e,t){var n=this,r=e.map((function(e){return n.getFeedbackModeLabelByOption(e,t)}));return this.$q.all(r)},e.prototype.isExternallyRefQuestionsAPIError=function(e){return 409===e.status&&s.includes(e.code,d.ASSESSMENT_EXTERNALLY_REF_QUESTION_ERROR_CODE)},e.prototype.openHasExternallyRefQuestionsModal=function(e){var t=this.$rootScope.$new();t.translateOpts={title:{key:"components.services.assessment.modal.error-external-questions."+e.toString()+".title"}},t.descriptionKey="components.services.assessment.modal.error-external-questions."+e.toString()+".description";var n={scope:t,template:f,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/services/assessment")}]}};this.modal.open(n)},e=Object(o.__decorate)([Object(o.__param)(0,Object(m.b)(c.b)),Object(o.__param)(1,Object(m.b)("$rootScope")),Object(o.__param)(2,Object(m.b)("$q")),Object(o.__param)(3,Object(m.b)(l.serviceName))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(S);a.module(h,[c.a]).service(g,S)},"+brj":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return f}));var r=n("D57K"),i=(n("qY1S"),n("wHJ2")),o=n("nbDY"),s=n.n(o),a=n("dzwE"),u=n("Ymz8"),c=n("Fvsw"),l=n("TnpK"),d=n("fYJU"),p="ultra.components.services.browserStorage",m="browserStorage",f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.LocalStorage=new t("localStorage"),t.SessionStorage=new t("sessionStorage"),t}(s.a),h=function(){function e(e,t,n,r,i,o){var s=this;this.$rootScope=e,this.$q=t,this.DSCacheFactory=n,this.context=r,this.ultraState=i,this.contextUser=o,this.QUOTA_EXCEEDED_ERR=22,this.QUOTA_EXCEEDED_ERR_FIREFOX=22,this.BROWSER_STORAGE_PREFERENCE_KEY="ultraui.browserstorage.key",this.CACHE_PREFIX="ultraui.browserstorage",this.sjcl=u,this.crypto=window.crypto,this.BROWSER_STORAGE_RECORD_MAX_AGE=864e5,this.BROWSER_STORAGE_RECORD_MAX_COUNT=10,this._isEncryptNativeSupported=s.crypto&&s.crypto.subtle?s.crypto.subtle.digest({name:"SHA-256"},s._stringToArrayBuffer("x")).then((function(){return s.$q.when(!0)})).catch((function(){return s.$q.when(!1)})):s.$q.when(!1)}return e.prototype.serializeCurrentRouteScopes=function(e,t){return this.saveToStorage(this._getCurrentRouterStateObject(),t,e,(function(e,t){if(!(t&&t instanceof Array&&t.length>=1e9)&&(t&&t.$type&&t.$type===t.constructor&&"$pk"in t&&(t.ui.isRestModObject=!0),("_"!==e[0]||this.ui&&!0===this.ui.isRestModObject||t&&t.ui&&!0===t.ui.isRestModObject)&&("$"!==e[0]||-1!==["$viewValue","$modelValue"].indexOf(e))))return t}))},e.prototype.deserializeCurrentRouteScopes=function(e,t){return this.getFromStorage(this._getCurrentRouterStateObject(),e)},e.prototype.deleteCurrentRouteScopes=function(e){return this.deleteFromStorage(this._getCurrentRouterStateObject(),e)},e.prototype._getCurrentRouterStateObject=function(){return{componentState:this.ultraState.current.name.slice(this.ultraState.getBaseState().length+1),stateParams:this.ultraState.getCurrentUrlParams()}},e.prototype.saveToStorage=function(e,t,n,r){var i=this,o=this._getBrowserStorageCache(n);o.removeExpired();var s=a.stringify(t,r);return this._getUserEncryptionPassword().then((function(t){return i._encrypt(t,s).then((function(t){try{return o.put(i._toSortedKeyJSON(e),t)}catch(e){e.code&&e.code===i.QUOTA_EXCEEDED_ERR||e.code===i.QUOTA_EXCEEDED_ERR_FIREFOX?console.warn("Local storage is at capacity",e):console.warn("Local storage not permitted.",e),i.saveToStorage=function(e,t,n){return i.$q.when(void 0)}}}))}))},e.prototype.getFromStorage=function(e,t,n){var r=this,i=this._getBrowserStorageCache(t).get(this._toSortedKeyJSON(e));return null!=i?this._getUserEncryptionPassword().then((function(e){return r._decrypt(e,i).then((function(e){return a.parse(e,n)}))})):this.$q.when(void 0)},e.prototype.updateStorageKey=function(e,t,n,r){var i=this;return this.getFromStorage(e,n).then((function(o){i.deleteFromStorage(e,n);var s=r||o;if(s)return i.saveToStorage(t,s,n)}))},e.prototype.deleteFromStorage=function(e,t){var n=this._getBrowserStorageCache(t);return n.removeExpired(),!!n.remove(this._toSortedKeyJSON(e))},e.prototype._toSortedKeyJSON=function(e){return JSON.stringify(e,(function(e,t){return"object"!=typeof t?t:Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{})}))},e.prototype._getBrowserStorageCache=function(e){var t=this.CACHE_PREFIX+"."+e.toString()+"."+this.contextUser.userId,n=this.DSCacheFactory.get(t);if(!n)switch(e){case f.LocalStorage:n=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,maxAge:this.BROWSER_STORAGE_RECORD_MAX_AGE,storageMode:f.LocalStorage.toString()});break;case f.SessionStorage:n=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,storageMode:f.SessionStorage.toString()})}return n},e.prototype._getUserEncryptionPassword=function(){this._sjclForceReady();var e=this.sjcl.codec.base64.fromBits(this.sjcl.random.randomWords(6));return this.storageKeyPromise=this.storageKeyPromise||this.context.getPreference(this.BROWSER_STORAGE_PREFERENCE_KEY,e).then((function(e){return e.value&&!e.$resolved&&e.$save(),e.value}))},e.prototype._sjclForceReady=function(){if(!this.sjcl.random.isReady()){for(var e=[],t=0;t<32;t++)e.push(Math.floor(4294967296*Math.random()));this.sjcl.random.addEntropy(e,1024,"IE10 fallback entrophy")}},e.prototype._encrypt=function(e,t){var n=this;return this._isEncryptNativeSupported.then((function(r){return r?n._subtleCryptoEncrypt(e,t).then((function(e){return{SubtleCryptoEncrypted:e}})):n.$q.when(n.sjcl.encrypt(e,t)).then((function(e){return{SjclCipherEncrypted:e}}))}))},e.prototype._decrypt=function(e,t){var n=this;return this._isEncryptNativeSupported.then((function(r){return r?n._subtleCryptoDecrypt(e,t.SubtleCryptoEncrypted):n.$q.when(n.sjcl.decrypt(e,t.SjclCipherEncrypted))}))},e.prototype._subtleCryptoEncrypt=function(e,t){var n=this;return this._subtleCryptoGetPasswordKey(e).then((function(e){var r=n.crypto.getRandomValues(new Uint8Array(16));return n.crypto.subtle.encrypt({name:"AES-CBC",iv:r},e,n._stringToArrayBuffer(t)).then((function(e){return{vector:n._arrayBufferToBase64(r),encrypted:n._arrayBufferToBase64(e)}}))}))},e.prototype._subtleCryptoDecrypt=function(e,t){var n=this;return this._subtleCryptoGetPasswordKey(e).then((function(e){var r=n._base64ToArrayBuffer(t.vector);return n.crypto.subtle.decrypt({name:"AES-CBC",iv:r},e,n._base64ToArrayBuffer(t.encrypted)).then((function(e){return n._arrayBufferToString(e)}))}))},e.prototype._subtleCryptoGetPasswordKey=function(e){var t=this;return this.crypto.subtle.digest({name:"SHA-256"},this._stringToArrayBuffer(e)).then((function(e){return t.crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["encrypt","decrypt"])}))},e.prototype._arrayBufferToString=function(e,t){for(var n=t&&new Uint8Array(e)||new Uint16Array(e),r="",i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r},e.prototype._arrayBufferToBase64=function(e){return window.btoa(this._arrayBufferToString(e,!0))},e.prototype._stringToArrayBuffer=function(e,t){for(var n=t&&new ArrayBuffer(e.length)||new ArrayBuffer(2*e.length),r=t&&new Uint8Array(n)||new Uint16Array(n),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return n},e.prototype._base64ToArrayBuffer=function(e){return this._stringToArrayBuffer(window.atob(e),!0)},e.$inject=["$rootScope","$q","DSCacheFactory",c.b,l.d,d.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(h);i.module(p,["angular-data.DSCacheFactory",c.a,l.b]).service(m,h)},"+e2k":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=(n("DlnX"),n("yC9S")),o=["active","alert","success","warning"],s="ultra.components.directives.svgIcon";!function(){function e(e,t){this.$rootScope=e,this.$element=t}e.prototype.$onInit=function(){var e=this;this.windowHref=window.location.href,this.updateIconHref(),this.setStatusStyles(),this.destroyLocationChangeListener=this.$rootScope.$on("$locationChangeSuccess",(function(){e.windowHref=window.location.href,e.updateIconHref()}))},e.prototype.$onChanges=function(){this.updateIconHref()},e.prototype.$onDestroy=function(){this.destroyLocationChangeListener()},e.prototype.updateIconHref=function(){this.iconHref=this.windowHref+"#icon-"+this.size+"-"+this.icon},e.prototype.setStatusStyles=function(){var e=this;this.color?this.statusStyles="color":null!=o.find((function(t){return e.status}))?this.statusStyles=this.status:this.statusStyles="default"},e.$inject=["$rootScope","$element"],e=Object(r.__decorate)([Object(i.a)({moduleName:s,componentName:"bbSvgIcon",template:'\n    <svg class="svg-icon {{::$ctrl.size}}-icon {{::$ctrl.statusStyles}}"\n         focusable="false" aria-hidden="true" bb-cache-compilation="svg-icon">\n      <use xlink:href="" ng-href="{{$ctrl.iconHref}}"></use>\n    </svg>\n  ',bindings:{icon:"@",color:"<",size:"@",status:"@"}})],e)}()},"+g6d":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n("MFWY");var r=n("wHJ2"),i=n("lEL+"),o="ultra.components.directives.clickToInvokeChild",s="bbClickToInvokeChild",a=function(){function t(t,n,r,i){var o=this;if(this.scope=t,this.element=n,this.attrs=r,this.timeout=i,this.linkSelector=r[s],!this.linkSelector&&void 0!==this.linkSelector)throw new Error(s+" has no child selector specified.");this.setClickableStyle(),t.$on("click-to-invoke-child-directive-init",(function(){o.setClickableStyle()})),n.on("click",(function(t){if(!e(t.target).closest("a, button, [ng-click], .stop-click-propagation, [bb-click-to-invoke-child]",o.element.get(0)).length){var n=o.element.find(o.linkSelector).get(0);n&&(n.click(),r.stopPropagation&&"true"===r.stopPropagation&&t.stopPropagation())}}))}return t.prototype.setClickableStyle=function(){var e=this;this.timeout((function(){e.element.find(e.linkSelector).first().length?(void 0===e.element.attr("tabindex")&&e.element.attr("tabindex","-1"),e.element.addClass("child-is-invokable")):(e.element.removeAttr("tabindex"),e.element.removeClass("child-is-invokable"))}),this.scope,0,!1)},t.$inject=["scope","element","attrs",i.b],t}(),u=function(){function e(e){var t=this;this.$injector=e,this.scope=!1,this.restrict="A",this.link=function(e,n,r){t.$injector.instantiate(a,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();r.module(o,[i.a]).directive(s,["$injector",function(e){return e.instantiate(u)}])}).call(this,n("5iHu"))},"/J7e":function(e,t,n){"use strict";function r(e){if(null==e)return!1;if("boolean"==typeof e)return e;if("string"==typeof e){var t=e.trim();return"true"===t.toLowerCase()||"1"===t}if("number"==typeof e)return 0!==e;throw new Error('Cannot convert "'+e+'" to boolean')}n.d(t,"a",(function(){return r}))},"/KQw":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("wHJ2"),i="ultra.components.directives.cacheCompilation",o=function(){function e(e){this.$compile=e,this.compiled=Object.create(null),this.priority=2e3}return e.prototype.compile=function(e,t){var n=this,r=t.bbCacheCompilation;if(!r)throw new Error("Cache compilation key is required");var i=e.contents();return e.empty(),null==this.compiled[r]&&(this.compiled[r]=this.$compile(i)),function(e,t){n.compiled[r](e,(function(e,n){t.append(e)}))}},e.$inject=["$compile"],e}();r.module(i,[]).directive("bbCacheCompilation",["$injector",function(e){return e.instantiate(o)}])},"/jNt":function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));n("t04/"),n("kH1j"),n("ud/9");var r,i=n("wHJ2"),o=n("UP3t"),s=n("pjml"),a=n("z6Q5"),u=n("TnpK"),c=n("gkef"),l=n("ZzYr"),d="ultra.directives.courseCatalogLink",p="course",m="org",f="ultraui.coursecatalog.link",h="classic_course_catalog_link_ind",g="classic_course_catalog_link",v=((r={})[f]="Disabled",r[h]="N",r[g]="",r),b=function(){function e(e,t,n,r,i,s,a){var u=this;this.scope=e,this.attrs=t,this.$q=n,this.SystemPreferenceModel=r,this.batchService=i,this.ultraState=s,this.windowSizeService=a,this.template=o,i.performBatch((function(){n.all([r.$find(f).$allow([404]).$asPromise(),r.$find(h).$allow([404]).$asPromise(),r.$find(g).$allow([404]).$asPromise()]).then((function(e){u.handleSystemPreferencesResponse(e)}))}));var c=t.catalogType===m?"base.organization-catalog":"base.course-catalog";e.handleCatalogLink=function(){s.goToRoute(c)},e.windowSizeService=a}return e.prototype.handleSystemPreferencesResponse=function(e){var t=this.getPreferenceValueByKey(e,f)||v[f];this.scope.shouldDisplayCatalogLink="Enabled"===t;var n=this.getPreferenceValueByKey(e,h)||v[h];this.scope.isExternalCatalog="Y"===n,this.scope.externalCatalogUrl=this.getPreferenceValueByKey(e,g)||v[g]},e.prototype.getPreferenceValueByKey=function(e,t){var n=e.find((function(e){return e.key===t}));return n?n.value:null},e.$inject=["scope","attrs","$q",s.vb.serviceName,a.b,u.d,c.b],e}(),y=function(){function e(e){var t=this;this.$injector=e,this.template=o,this.link=function(e,n,r){e.courseCatalogLink=t.$injector.instantiate(b,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();i.module(d,[s.Q,a.a,u.b,c.a,l.a]).directive("bbCourseCatalogLink",["$injector",function(e){return e.instantiate(y)}])},"/mDi":function(e,t,n){},"/qpZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("+4Px"),o="ultra.directives.accessibility.keyboardEnter",s=function(){this.restrict="A",this.link=function(e,t,n){t.on("keydown keypress",(function(r){r.keyCode===i.f&&(n.bbBlurBeforeEnter&&t.blur(),e.$apply((function(){e.$eval(n.bbKeyboardEnter,{$event:r})})),r.preventDefault())}))}};r.module(o,[]).directive("bbKeyboardEnter",["$injector",function(e){return e.instantiate(s)}])},0:function(e,t){},"0+Qs":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("wHJ2"),i=n("5MwF"),o="ultra.services.interval",s="interval";r.module(o,[]).factory(s,["$interval",function(e){var t=function(t,n,r,o,s){if(!i.a.production&&r<5e3&&!o&&(null==s||s)){if(r<1e3)throw new Error("Short duration interval, repeating indefinitely, which invokes apply was registered!");console.warn("Short duration interval, repeating indefinitely, which invokes apply was registered!\n"+(new Error).stack)}var a=e(t,r,o,s);return a.__bb_unregister_scope_destroy__=n.$on("$destroy",(function(){e.cancel(a)})),a};return t.cancel=function(t){t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)},t}])},"07uq":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("wHJ2"),i="ultra.directives.bbMouseLeaveEnter",o=function(){function e(e){var t=this;this.$rootScope=e,this.restrict="A",this.link=function(e,n,r){var i=function(){e.$apply((function(){t.$rootScope.$broadcast(r.bbMouseLeaveEnter+"-mouse-enter")}))},o=function(){e.$apply((function(){t.$rootScope.$broadcast(r.bbMouseLeaveEnter+"-mouse-leave")}))};e.$on("$destroy",(function(){n.off("mouseenter",i),n.off("mouseleave",o)})),n.on("mouseenter",i),n.on("mouseleave",o)}}return e.$inject=["$rootScope"],e}();r.module(i,[]).directive("bbMouseLeaveEnter",["$injector",function(e){return e.instantiate(o)}])},"09tz":function(e,t,n){},"0JpG":function(e,t,n){"use strict";n.d(t,"moduleName",(function(){return d})),n.d(t,"serviceName",(function(){return p})),n.d(t,"providerName",(function(){return m})),n.d(t,"localeQuerystringRegex",(function(){return f})),n.d(t,"Service",(function(){return v}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("5MwF"),a=n("lAEu"),u=n("n7/H"),c=n("C3Ga"),l=n("tfZW");n.o(u,"ILocaleComposedDurationFormat")&&n.d(t,"ILocaleComposedDurationFormat",(function(){return u.ILocaleComposedDurationFormat})),n.o(u,"ILocaleDateFormat")&&n.d(t,"ILocaleDateFormat",(function(){return u.ILocaleDateFormat})),n.o(u,"ILocaleDatetimeFormat")&&n.d(t,"ILocaleDatetimeFormat",(function(){return u.ILocaleDatetimeFormat})),n.o(u,"ILocaleTimeFormat")&&n.d(t,"ILocaleTimeFormat",(function(){return u.ILocaleTimeFormat})),n.o(u,"ILocaleTimezoneFormat")&&n.d(t,"ILocaleTimezoneFormat",(function(){return u.ILocaleTimezoneFormat})),n.o(u,"LocaleCategory")&&n.d(t,"LocaleCategory",(function(){return u.LocaleCategory})),n.d(t,"ILocaleUsernameFormat",(function(){return u.ILocaleUsernameFormat}));var d="ultra.services.BbLocalize",p="bbLocalize",m=p+"Provider",f=/setLang=([^&]*)/,h=function(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$q.when(r.apply(this,e))}},g=function(){function e(t,n){this.$q=t,this.$rootScope=n,this.defaultLocale="en",this.percentageFormatters={},this.currencyFormatters={},this.bundlePromises={},this.intl=c.a.getInstance(),this.frmt=new a.a(this.intl,{production:e.production,urlRoot:e.urlRoot,defaultLocale:this.defaultLocale}),this.overrideLoader=l.a.getInstance()}return e.prototype.isRTL=function(e){if(!s.a.features.rightToLeftSupport)return!1;var t=this.getLocale(e).toLowerCase();return 0===t.indexOf("ar")||0===t.indexOf("he")||"en-sc"===t||"en-sa"===t},e.prototype.getDecimalStringForScope=function(e){var t=this.getLocale(e);return this.frmt.number.getDecimalStringSync(t)},e.prototype.getGroupingStringForScope=function(e){var t=this.getLocale(e);return this.frmt.number.getGroupingStringSync(t)},e.prototype.isValidNumber=function(e,t){var n=this.getLocale(t);return this.frmt.number.isValidSync(e,n)},e.prototype.loadBundle=function(e,t){null==t&&(t=this.getLocale(null));var n="locales/[locale]/"+e+".json";return this.intl.addBundles(n),this.intl.loadBundles(t)},e.prototype.loadAllBundles=function(e){return this.intl.loadBundles(e)},e.prototype.insertLocaleData=function(e,t){return this.intl.storeLocaleData(e,t)},e.prototype.resetLocaleData=function(){return this.intl.reset()},e.prototype.translateSync=function(e){var t=o.copy(e.params)||{};return Object.keys(t).forEach((function(e){void 0===t[e]&&(t[e]="")})),o.isObject(t)&&(t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape})),this.intl.translateSync(e.locale||this.getLocale(null),e.key,t)},e.prototype.translate=function(e){var t=o.copy(e.params)||{};return o.isObject(t)&&(t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape})),this.intl.translate(e.locale||this.getLocale(null),e.key,t)},e.prototype._getFormatter=function(e){return this.frmt.getFormatterSync(e)},e.prototype.getAppLocale=function(){return this.intl.normalizeLocale(this.getUserLocale()||this.defaultLocale)},e.prototype.getAppLocaleISO=function(){return this.getUserLocale()||this.defaultLocale},e.prototype.getLocale=function(e){if(!e)return this.getAppLocale();for(var t=e.locale;!t&&e.$parent;)t=(e=e.$parent).locale;return this.intl.normalizeLocale(t)||this.getAppLocale()},e.prototype.getUserLocale=function(){return this.userLocale},e.prototype.preProcessFormatterLocale=function(e){return this.frmt.preProcessFormatterLocale(e)},e.prototype.getPreferredLocales=function(e){return this.intl.normalizeLocales(this.frmt.getPreferredLocales(e))},e.prototype.validateLocale=function(e){try{this.intl.getMf("isLocaleExists",this.intl.normalizeLocale(e))}catch(e){return!1}return!0},e.prototype.setLocale=function(e,t){var n=this;return t||(t=this.getAppLocale()),e&&(e.locale=t),this.loadLocale(t).then((function(){n.$rootScope.$broadcast("$translateChangeSuccess",{language:t})}))},e.prototype.setUserLocale=function(e){this.userLocale=e},e.prototype.setSystemDefaultLocale=function(e){this.defaultLocale=e},e.prototype.addOverride=function(e,t){this.overrideLoader.addOverrideBundle(e,t)},e.prototype.loadLocale=function(e){return this.frmt.loadLocale(e)},e.prototype.formatNumber=function(e,t,n){var r=this.getLocale(t);return this.frmt.number.format(e,r,n)},e.prototype.formatNumberSync=function(e,t,n){var r=this.getLocale(t);return this.frmt.number.formatSync(e,r,n)},e.prototype.regroupNumber=function(e,t){var n=this.getLocale(t);return this.frmt.number.regroup(e,n)},e.prototype.regroupNumberSync=function(e,t){var n=this.getLocale(t);return this.frmt.number.regroupSync(e,n)},e.prototype.parseNumber=function(e,t){var n=this.getLocale(t);return this.frmt.number.parse(e,n)},e.prototype.parseNumberSync=function(e,t){var n=this.getLocale(t);return this.frmt.number.parseSync(e,n)},e.prototype.formatDate=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDate(e,t,r)},e.prototype.formatDateSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDateSync(e,t,r)},e.prototype.parseDate=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseDate(e,t,i,r)},e.prototype.parseDateSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseDateSync(e,t,i,r)},e.prototype.formatTime=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTime(e,t,r)},e.prototype.formatTimeSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTimeSync(e,t,r)},e.prototype.getDayPeriodsFormatSync=function(e){return this.frmt.getFormatterSync(e).cldr.main("dates").calendars.gregorian.dayPeriods.format.abbreviated},e.prototype.getTimePattern=function(e,t){var n=this.getLocale(t);return this.frmt.datetime.getTimePattern(e,n)},e.prototype.getTimePatternSync=function(e,t){var n=this.getLocale(t);return this.frmt.datetime.getTimePatternSync(e,n)},e.prototype.parseTime=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseTime(e,t,i,r)},e.prototype.parseTimeSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseTimeSync(e,t,i,r)},e.prototype.formatDatetime=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDatetime(e,t,r)},e.prototype.formatDatetimeSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDatetimeSync(e,t,r)},e.prototype.formatDurationBetweenSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.formatDurationBetweenSync(e,t,i,r)},e.prototype.formatDuration=function(e,t,n,r){var i=this.getLocale(t);return this.frmt.datetime.formatDuration(e,i,n,r)},e.prototype.formatComposedDurationSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatComposedDurationSync(e,t,r)},e.prototype.formatTimezone=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTimezone(e,t,r)},e.prototype.formatTimezoneSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTimezoneSync(e,t,r)},e.prototype.formatUsername=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.username.format(e,t,i,r)},e.prototype.formatUsernameSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.username.formatSync(e,t,i,r)},e.prototype.formatUsernameList=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.username.formatList(e,t,i,r)},e.prototype.formatItems=function(e,t,n,r,i){var o=this.getLocale(n);return this.frmt.items.format(e,e.length,t,o,r,i)},e.prototype.formatItemsSync=function(e,t,n,r,i,o){var s=this.getLocale(r);return this.frmt.items.formatSync(e,t,n,s,i,o)},e.prototype.getFormatEnum=function(e,t){if(!t)return null;var n=e[t=t.charAt(0).toUpperCase()+t.slice(1)];if(null==n)throw new Error("Invalid format `"+t+"` is used");return n},e.prototype.getFormatId=function(e,t){if(null==t)return 0;var n=e[t=t.charAt(0).toUpperCase()+t.toLowerCase().slice(1)];if(null==n)throw new Error("Invalid format `"+t+"` is used");return n},e.prototype.formatPercentage=function(e,t){var n=this.getLocale(t);return this.frmt.number.format(e,n,{style:"percent"})},e.prototype.formatPercentageSync=function(e,t){var n=this.getLocale(t);return this.frmt.number.formatSync(e,n,{style:"percent"})},e.prototype.formatCurrency=function(e,t,n,r){var i=this.getLocale(t);return this.frmt.currency.format(e,i,n,r)},e.prototype.formatCurrencySync=function(e,t,n,r){var i=this.getLocale(t);return this.frmt.currency.formatSync(e,i,n,r)},e.prototype.getReactBabelfishParams=function(){return{locale:this.getAppLocale(),babelfishInstance:this.intl,babelfishFormatter:this.frmt}},e.$inject=["$q","$rootScope"],e.production=!1,e.urlRoot=".",e.defaultDecimalPrecision=u.Number.defaultDecimalPrecision,e.minDecimalPrecision=1,e.maxDecimalPrecision=4,Object(r.__decorate)([h],e.prototype,"loadBundle",null),Object(r.__decorate)([h],e.prototype,"translate",null),Object(r.__decorate)([h],e.prototype,"formatNumber",null),Object(r.__decorate)([h],e.prototype,"regroupNumber",null),Object(r.__decorate)([h],e.prototype,"parseNumber",null),Object(r.__decorate)([h],e.prototype,"formatUsername",null),Object(r.__decorate)([h],e.prototype,"formatUsernameList",null),Object(r.__decorate)([h],e.prototype,"formatPercentage",null),e}(),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(g),b=function(){function e(){this.$get=["$injector",function(e){return e.instantiate(g)}]}return e.prototype.setOptions=function(e){void 0===e&&(e={}),i.forOwn(e,(function(e,t){g[t]=e}))},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(b);o.module(d,[]).provider(p,b)},"0Y4C":function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-collab",use:"icon-small-collab-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-collab"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3h10v3l4-1.974V12l-4-2v3H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 6l1 2-1 2M7.5 6l1 2-1 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},"0fB1":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("nsO7"),i=n("wHJ2"),o=n("5MwF"),s=n("w9Zy"),a="ultra.offcanvas-scope.offcanvas-scope-pausal-scope",u="bbOffcanvasPausalScope",c=function(){this.restrict="A",this.link=function(t,n,i){var a=function(e){return e.hasClass("bb-offcanvas-overlay")&&(t=e.next()).hasClass("bb-offcanvas-panel")&&(t.hasClass("full")||(n=t.css("max-width"),r.findIndex([void 0,"none"],(function(e){return e===n}))>=0));var t,n};t.$newOffcanvasScope=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.constructor.prototype.$new.apply(this,e);return n.$$__digestPaused=!1,n};var c=function(){var r;t.$$__digestPaused="true"===(r=n.is(".hide-in-background")?n:n.parents(".hide-in-background")).attr("aria-hidden")&&function(){for(var t=r.nextAll(),n=0;n<t.length;n+=2)if(a(e(t.get(n))))return!0;return!1}(),!1!==t.$$__digestPaused||t.$root.$$phase||t.$digest()};if(t.$on(s.c,c),t.$on(s.b,c),!o.a.production){var l=function(e){return e?l(e.$parent)+"."+e.$id+(e.$$digestPaused?"P":"A"):""},d=function(){i.$set(u,l(t))};t.$on(s.c,d),t.$on(s.b,d),d()}}},l=i.module(a,[]);o.a.features.offcanvasPausalScope&&l.directive(u,["$injector",function(e){return e.instantiate(c)}])}).call(this,n("5iHu"))},"0wat":function(e,t){e.exports='<div id="body-content" class="tools-frame" ng-controller="ultra.legacy.tool.controller">\n  <div id="side-panel" class="tools-overlay full bb-offcanvas-right side-panel">\n    <div class="panel-wrap">\n      <header class="panel-header">\n        <div class="columns" id="global-title">\n          <h1 class="panel-title ng-scope" bb-translate="{{tool.getToolTitleByKey(legacyTool.toolName)}}"></h1>\n          <button class="left-off-canvas-toggle menu-toggle" aria-expanded="true"\n                  analytics-id="base.tools.frame.menu.button">\n            <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n            <span class="sr-only" bb-translate>base.menu</span>\n          </button>\n        </div>\n      </header>\n      <div class="iframe-wrapper">\n        <iframe name="legacy-tool-iframe" bb-iframe-max-height seamless="seamless" ng-src="{{::legacyTool.getUrl()}}"\n                bb-iframe-event-repeater="keydown"\n                bb-translate-attrs="{\'title\': \'{{tool.getToolTitleByKey(legacyTool.toolName)}}\'}"></iframe>\n      </div>\n    </div>\n  </div>\n</div>\n'},1:function(e,t){},"1/43":function(e,t,n){"use strict";n.r(t),n.d(t,"EmailSettingGeneralSettingValue",(function(){return r})),n.d(t,"SmsSettingGeneralSettingValue",(function(){return i})),n.d(t,"PushNotificationGeneralSettingValue",(function(){return o})),n.d(t,"serviceName",(function(){return l}));n("QLzv");var r,i,o,s=n("5MwF"),a=n("yCC5"),u=n("Rjd/"),c=n("nkTj");!function(e){e.Digest="D",e.Immediate="I",e.None="N"}(r||(r={})),function(e){e.Enabled="A",e.Disabled="N"}(i||(i={})),function(e){e.Everyone="E",e.Instructor="I"}(o||(o={}));var l=a.sb;u.a.factory(l,["restmod",c.d,function(e){return e.model().mix({$url:function(){return s.a.apiBasePath+"/v1/notification/settings/generalSettings/course"}})}])},"12mu":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));n("imME");var r=n("wHJ2"),i=n("w9Zy"),o=n("9zo4"),s=n("H8CZ"),a=n("wWlP"),u=n("cQcs"),c=n("A4cK"),l=n("fmWv"),d="mm.foundation.modal",p="$modal";r.module(d,[i.d]).directive("modalBackdrop",["$modalStack","$timeout",function(e,t){return{restrict:"EA",replace:!0,template:u,link:function(n){n.animate=!1,t((function(){n.animate=!0})),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,template:c,link:function(e,n,r){e.windowClass=r.windowClass||"",t((function(){e.animate=!0,n[0].querySelectorAll("[autofocus]").length>0?n[0].querySelectorAll("[autofocus]")[0].focus():n[0].querySelector("div").focus()}))}}}]).factory("$modalStack",["$window","$timeout","$document","$compile","$rootScope",i.e,o.c,function(t,n,i,o,u,c,l){var d,p,m="modal-open",f=a.a,h={};function g(){for(var e=-1,t=f.keys(),n=0;n<t.length;n++)f.get(t[n]).value.backdrop&&(e=n);return e}function v(e,t){var n=i.find("body").eq(0),r=f.get(e).value;f.remove(e),b(r.modalDomEl,r.modalScope,300,(function(){r.modalScope.$destroy(),n.toggleClass(m,f.length()>0),function(e){if(d&&-1===g()){var t=p;b(d,p,150,(function(){t.$destroy(),t=null,e()})),d=void 0,p=void 0}else e()}(t),l.revertAccessibilityHandling()}))}function b(e,t,r,i){var o=n(a,r);function a(){a.done||(a.done=!0,e.remove(),i&&i())}s.a(e,(function(){n.cancel(o),a(),t.$apply()})),t.animate=!1}return u.$watch(g,(function(e){p&&(p.index=e)})),h.open=function(n,s){f.add(n,{deferred:s.deferred,modalScope:s.scope,backdrop:s.backdrop,keyboard:s.keyboard});var a=i.find("body").eq(0),v=g();v>=0&&!d&&((p=u.$new(!0)).index=v,d=o("<div modal-backdrop></div>")(p),a.append(d));var b=r.element('<div class="reveal-modal" style="z-index:-1""></div>');a.append(b[0]);var y=parseInt(getComputedStyle(b[0]).top,10)||0;b.remove();var S=(t.pageYOffset||0)+y;function C(e){var t;27===e.which&&(t=f.top())&&t.value.keyboard&&u.$apply((function(){h.dismiss(t.key)}))}return c.getTopElement().then((function(e){var t=r.element('<div modal-window style="visibility: visible; top:'+S+'px;"></div>');t.attr("window-class",s.windowClass),t.attr("index",f.length()-1),t.attr("animate","animate"),e&&e.name&&t.attr("data-base-state-name",e.name),t.append(s.content);var i=o(t)(s.scope);l.applyAccessibilityHandlingForPanel(i),f.top().value.modalDomEl=i,i&&!f.get(n).value.modalDomEl&&(f.get(n).value.modalDomEl=i),a.append(i),a.addClass(m)})),p&&(p.darkenBackdrop=s.darkenBackdrop),i.bind("keydown",C),s.scope.$on("$destroy",(function(){e(document).off("keydown",C)})),f},h.close=function(e,t){if(f.get(e)){var n=f.get(e).value;n&&v(e,(function(){n.deferred.resolve(t)}))}},h.dismiss=function(e,t){if(f.get(e)){var n=f.get(e).value;n&&v(e,(function(){n.deferred.reject(t)}))}},h.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},h.getTop=function(){return f.top()},h}]).provider(p,(function(){var e={options:{backdrop:!0,keyboard:!0,darkenBackdrop:!1},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,i,o,s,u,c){new l.a(a.a).start();var d={};return d.open=function(o){var s=i.defer(),a=i.defer(),l={result:s.promise,opened:a.promise,close:function(e){c.close(l,e)},dismiss:function(e){c.dismiss(l,e)}};if((o=r.extend({},e.options,o)).resolve=o.resolve||{},!o.template)throw new Error("Template is required. Use requireJs to load template string if needed.");var d,p,m=i.all([i.when(o.template)].concat((d=o.resolve,p=[],r.forEach(d,(function(e,n){(r.isFunction(e)||r.isArray(e))&&p.push(i.when(t.invoke(e)))})),p)));return m.then((function(e){var t=(o.scope||n).$new();t.$close=l.close,t.$dismiss=l.dismiss;var i={},a=1;o.controller&&(i.$scope=t,i.$modalInstance=l,r.forEach(o.resolve,(function(t,n){i[n]=e[a++]})),u(o.controller,i)),c.open(l,{scope:t,deferred:s,content:e[0],backdrop:o.backdrop,keyboard:o.keyboard,windowClass:o.windowClass,darkenBackdrop:o.darkenBackdrop})}),(function(e){s.reject(e)})),m.then((function(){a.resolve(!0)}),(function(){a.reject(!1)})),l},d}]};return e}))}).call(this,n("5iHu"))},"1I+h":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("JzsJ");var r=n("wHJ2"),i=n("5MwF"),o=n("0JpG"),s=n("TnpK"),a="ultra.course.collab.router";r.module(a,[o.moduleName,s.b]).config([s.c,function(e){i.a.features.collab&&e.peekState("collab",{url:"/collab/:launchType",require:function(){return n.e(692).then(n.bind(null,"6DVw"))},pageTitle:"course.outline.collab.ultraCollabTitle",panelClass:"full",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/collab/course-collab")}]},onExit:["$rootScope",function(e){e.$broadcast("collab-exit")}]})}])},"1ZbL":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("D57K"),i=n("5MwF"),o=n("nsO7"),s=n("ERkP"),a=n("7nmT"),u=n("0JpG"),c=n("8unJ"),l=n("jbsW"),d=n("uDfI"),p=n("A4Z1"),m=function(){function e(){this.__isFirstRender=!0,this.state={},this.props={}}return e.prototype.$onChanges=function(e){var t=this.props,n=Object(o.mapValues)(e,"currentValue"),r=Object(o.assign)({},this.props,n);if(this.__isFirstRender)Object(o.assign)(this,{props:r}),this.componentWillMount(),this.render(),this.__isFirstRender=!1;else{if(!this.didPropsChange(n,t))return;this.componentWillReceiveProps(r);var i=this.shouldComponentUpdate(r,this.state);if(Object(o.assign)(this,{props:r}),!i)return;this.componentWillUpdate(this.props,this.state),this.render(),this.componentDidUpdate(this.props,this.state)}},e.prototype.$postLink=function(){this.componentDidMount()},e.prototype.$onDestroy=function(){this.componentWillUnmount()},e.prototype.didPropsChange=function(e,t){return Object(o.some)(e,(function(e,n){return e!==t[n]}))},e.prototype.componentWillMount=function(){},e.prototype.componentDidMount=function(){},e.prototype.componentWillReceiveProps=function(e){},e.prototype.shouldComponentUpdate=function(e,t){return!0},e.prototype.componentWillUpdate=function(e,t){},e.prototype.componentDidUpdate=function(e,t){},e.prototype.componentWillUnmount=function(){},e.prototype.render=function(){},e}();function f(e){return function(t){function n(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=t.call(this)||this;return o.$element=n,o.injectedProps={},e.injectNames&&e.injectNames.forEach((function(e,t){o.injectedProps[e]=r[t]})),o}return Object(r.__extends)(n,t),n.prototype.render=function(){var t=s.createElement(e.Class,Object(r.__assign)(Object(r.__assign)({},this.injectedProps),this.props),null);e.renderLocalized&&(t=this.localizeComponent(t)),e.withProvider&&(t=this.providedComponent(t)),e.withThemeProvider&&(t=this.themeProviderComponent(t)),Object(a.render)(t,this.$element[0])},n.prototype.themeProviderComponent=function(e){return s.createElement(p.AnalyticsJssThemeProvider,null,e)},n.prototype.providedComponent=function(e){var t={store:this.injectedProps.$ngRedux};return s.createElement(d.Provider,t,e)},n.prototype.localizeComponent=function(e){var t=this.injectedProps[u.serviceName],n={locale:t.getLocale(this.injectedProps.$scope),babelfishInstance:t.intl,babelfishFormatInstance:t.frmt};return i.a.unitTesting&&(n.mockLocalize=Object(l.getLocalizeMock)()),s.createElement(c.Locale,n,e)},n.prototype.componentWillUnmount=function(){Object(a.unmountComponentAtNode)(this.$element[0])},n}(m)}function h(e){e.injectNames=e.injectNames||[];var t=e.bindingNames||e.Class.propTypes&&Object.keys(e.Class.propTypes)||[],n=e.attributes||[];return e.renderLocalized&&(-1===e.injectNames.indexOf("$scope")&&e.injectNames.push("$scope"),-1===e.injectNames.indexOf(u.serviceName)&&e.injectNames.push(u.serviceName)),e.withProvider&&-1===e.injectNames.indexOf("$ngRedux")&&e.injectNames.push("$ngRedux"),{bindings:Object(r.__assign)(Object(r.__assign)({},Object(o.fromPairs)(t.map((function(e){return[e,"<"]})))),Object(o.fromPairs)(n.map((function(e){return[e,"@"]})))),controller:Object(r.__spreadArrays)(["$element"],e.injectNames,[f(e)])}}},"1ZiP":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("D57K"),i=(n("JzsJ"),n("wHJ2")),o=n("pjml"),s=n("w9Zy"),a=n("0JpG"),u=n("Is+C"),c=n("Qbdf"),l=n("TnpK"),d=n("bF8R"),p=n("Fvsw"),m=n("gkef"),f=n("+O05"),h=n("nmzr"),g="ultra.course.content.scorm.routes",v={onEnter:["contentData","attempt",s.e,l.d,"$stateParams",m.b,function(e,t,n,r,i,o){if(i.forceOpenFeedbackPanel&&!i.skipTransitionEvents){r.isPeekPanelOpen()&&n.expandTopPanel();var s=f.a.attemptHasFeedback(t),a=f.a.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail),u=r.next.name.indexOf("assessment-submission-feedback")>=0,c=!r.prev.name,l=o.isSmallBreakpoint();!s||!a||l||u||c||r.goPeekState("assessment-submission-feedback",{attemptId:t.id})}}],onExit:["contentData",s.e,l.d,"$q","$stateParams",function(e,t,n,r,i){if(!i.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){var o=r.when();n.isPeekPanelOpen()&&(o=t.shrinkTopPanel()),o.then((function(){n.goPeekState("scorm-overview.student.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId})}))}}]};i.module(g,[a.moduleName,l.b,c.b]).config([l.c,c.c,function(e,t){var i,s,m;e.peekState("scorm",{abstract:!0,url:"/scorm"}).peekState("scorm.open",{url:"/open",params:{contentId:null,courseId:null},routingFunction:[l.d,u.c,function(e,t){t.scormLaunch({courseId:e.nextParams.courseId,contentId:e.nextParams.contentId,showPreLaunchPanel:!0})}]}).peekState("scorm-settings",{url:"/scorm/settings?parentId&positionBefore&positionAfter&contentId",pageTitle:"course.content.scorm.settings.panelTitle",require:[function(){return Promise.all([n.e(1),n.e(2),n.e(7),n.e(564)]).then(n.bind(null,"7Six"))}],resolve:(i={},i[c.d]=t.resolve,i.translations=[a.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}],i),peekViewName:"scorm-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release","content-collection-picker"]}).peekState("scorm-launch-frame",{url:"/scorm/launchFrame?toolHref&courseId&contentId",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}]},panelClass:"full",require:[function(){return n.e(602).then(n.bind(null,"26hv"))}],pageTitle:"course.content.scorm.launch.frameTitle"}).peekState("gradebook-item.scorm-submissions",{pageTitle:"course.content.scorm.settings.gradingTitle",url:"/scorm/:contentId/columns/:columnId/submissions?courseId&gradeitemView",panelClass:"full",resolve:{translations:["$q",a.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])}]},views:{"gradebook-item-scorm-slider@":{require:function(){return n.e(674).then(n.bind(null,"2eYu"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(38)]).then(n.bind(null,"hmMQ"))}}},onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],peekStates:["conversations",h.CourseRoutes.COURSE_MESSAGE,"conditional-release","scorm-settings","scorm-launch-frame",h.GradeRoutes.SUBMISSION_GRADING,h.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT],peekViewName:"gradebook-item-panel@"}).peekState("scorm-overview",{abstract:!0,resolve:(s={},s[c.d]=t.resolve,s.contentData=[c.d,d.b,l.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],s.translations=["$q",a.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])}],s),onEnter:["contentData",p.b,function(e,t){t.column=e.gradingColumn}],onExit:[p.b,function(e){e.column=null}],require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(11),n.e(14),n.e(1),n.e(532)]).then(n.bind(null,"HwBC"))}}).peekState("scorm-overview.student",{url:"/scorm/overview/{contentId:_[0-9]+_1}?courseId",peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations",h.CourseRoutes.COURSE_MESSAGE],views:{"scorm-grading-section@":{require:function(){return n.e(695).then(n.bind(null,"all8"))}}}}).peekState("scorm-overview.student.multiple-attempt",{url:"/scorm-attempts/:columnId/:gradeId",resolve:{scormContentData:[c.d,"contentData",u.c,d.b,l.d,function(e,t,n,r,i){var o=n.currentContentData||t&&t.gradingColumn.id===i.nextParams.columnId&&t;return o||r.loadContentAndGrades({course:e,contentId:i.nextParams.contentId,columnId:i.nextParams.columnId})}],translations:["$q",a.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment")])}]},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(544)]).then(n.bind(null,"x3h6"))}}).peekState("scorm-overview.student.attempt",Object(r.__assign)(Object(r.__assign)({url:"/column/{columnId:_[0-9]+_1}/attempt/{attemptId:_[0-9]+_1}",panelClass:"full",resolve:{contentData:["contentData",c.d,d.b,l.d,function(e,t,n,r){return e.gradeDetail.ui.groupAttempt?e:n.loadContentAndGrades({course:t,contentId:r.nextParams.contentId,columnId:r.nextParams.columnId})}],currentContent:["contentData",function(e){return e.courseContent}],currentColumn:["contentData",function(e){return e.gradingColumn}],attempt:["$q","contentData",o.o.serviceName,l.d,o.C.serviceName,o.H.serviceName,function(e,t,n,r){var i=r.nextParams.attemptId;return n.$buildRaw({id:t.courseContent.courseId}).gradebook.attempts.$find(i,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then((function(e){t.attempt=e})).$asPromise()}]},require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(109)]).then(n.bind(null,"H0q3"))}},v),{params:{commentPanelInitiallyOpen:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations",h.CourseRoutes.COURSE_MESSAGE]})).peekState("scorm-analytics-report",{url:"/scorm-report/{contentId:_[0-9]+_1}?courseId",resolve:(m={},m[c.d]=t.resolve,m.content=[c.d,l.d,o.o.serviceName,function(e,t,n){return n.$new(e.id).contents.$find(t.nextParams.contentId).$asPromise()}],m.translations=[a.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}],m),panelClass:"full",require:function(){return n.e(610).then(n.bind(null,"0rof"))},pageTitle:"course.content.scorm.report.pageTitle"})}])},"1y/X":function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.TEACHING=new t("TEACHING"),t.SUPPORTING=new t("SUPPORTING"),t.TAKING=new t("TAKING"),t.VISITING=new t("VISITING"),t}(n.n(i).a);t.a=o},2:function(e,t){},"2Tae":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("3bn4"),s=n("0JpG"),a=n("TnpK"),u="ultra.course.rubric.rubric-goal-alignment",c="rubric-goal-alignment",l=["course","goal-alignment","goal"],d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="/goalAlignment/:rowId",t.panelClass="peek rubric-goal-peek",t}return Object(r.__extends)(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentCourse","currentRubric",s.serviceName,a.d,function(t,n,r,i,o){return t.when(i.loadBundle("features/"+l.join("/"))).then((function(){return n.rubrics.$find(r.id,{expand:"rows.alignedGoals,permissions"}).$asPromise().then((function(t){t.rows.forEach((function(t){t.id&&o.nextParams&&o.nextParams.rowId&&t.id===o.nextParams.rowId&&(e.rubricRow=t)}))}))})).then((function(){return e.rubricRow?e.setupGoalAlignableContent(e.rubricRow,i):t.when([])}))}]},t.prototype.getPeekStateName=function(){return c},t.prototype.getOverrideSubTitle=function(){return["currentRubric",a.d,function(e,t){var n="";return e.rows.forEach((function(e){e.id&&t.nextParams&&t.nextParams.rowId&&e.id===t.nextParams.rowId&&(n=e.header)})),n}]},t.prototype.setupGoalAlignableContent=function(e,t){return[{getContentTitleForGoalAlignment:function(){return t.translateSync({locale:null,key:l.join(".")+".goalsAlignedWithRubricCriteria"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()},isCurrentUserEligibleToAlignGoals:function(){return e.isCurrentUserEligibleToAlignGoals()},alignedGoals:e.alignedGoals.map((function(t){return t.content=e,t}))}]},t.$inject=["$injector","$q"],t}(o.a);i.module(u,[a.b,s.moduleName]).config([a.c,function(e){var t=new d;e.peekState(t.getPeekStateName(),t)}])},"2qV7":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ae}));var r=n("D57K"),i=(n("JzsJ"),n("h3Te"),n("nsO7")),o=n("wHJ2"),s=n("TnpK"),a=n("pjml"),u=n("Fvsw"),c=n("fYJU"),l=n("0JpG"),d=n("neh4"),p=n("vWx0"),m=n("VfFK"),f=n("OMme"),h=n("jj6p"),g=n("cacA"),v=n("sb+l"),b=n("Nrpd"),y=n("rmtn"),S=n("iAaI"),C=n("qOsI"),w=n("qtHE"),k=n("Sjpn"),I=n("DDbI"),T=n("P43K"),E=n("YVo+"),$=n("iwI+"),P=n("yGso"),A=n("YfM7"),O=n("pUR+"),_=n("Hbkz"),D=n("CPqS"),x=n("GNXM"),R=n("3hz+"),M=n("FE+f"),N=n("fzj8"),j=n("yXB1"),L=n("1I+h"),U=n("JRp+"),G=n("gOJg"),F=n("y3by"),B=n("uNsL"),q=n("8HGT"),H=n("jnoB"),V=n("7oqQ"),z=n("RJ/U"),K=n("7QJo"),J=n("UiBk"),W=n("U8wS"),Q=n("sNuB"),Y=n("BrA8"),Z=n("IVtk"),X=n("hWgD"),ee=n("IVCC"),te=n("1ZiP"),ne=n("cwoR"),re=n("j2IR"),ie=n("Q/M7"),oe=n("tfZW"),se=n("5MwF"),ae="ultra.routes";function ue(e,t){return{systemInfo:[u.b,function(e){return e.getSystemInfo().$asPromise()}],currentUser:[c.b,function(e){return e.userModel.$asPromise()}],languages:["currentUser",a.M.serviceName,function(e,n){if(t&&e.locale)return n.$collection().$fetch({limit:1e4}).$asPromise()}],user:["currentUser","languages",function(e,n){return t&&e.locale&&!i.find(n,{locale:e.locale})&&(e.locale=null),e.$patch().$asPromise()}],localize:["$q","$rootScope","user","systemInfo",l.serviceName,"$cookies","$window",function(t,n,i,o,s,a,u){var c=i.locale||o.defaultLocaleIdentifier,d=a.get("guest.session.locale");i.isGuest()&&d&&(c=d);var p=oe.a.getInstance();if(o.siteId&&o.ultraCustomLocaleLocation&&p.setOverrideLocation(o.ultraCustomLocaleLocation,o.siteId),o.ultraLocaleData){var m=Object.keys(o.ultraLocaleData);m.forEach((function(e){var t=o.ultraLocaleData[e];t.ultraOverrideCode&&s.addOverride(e,t.ultraOverrideCode)})),m.indexOf(c)<0&&(c=o.defaultLocaleIdentifier)}var f=u.location.href.match(l.localeQuerystringRegex);f&&se.a.features.devtools_enableSetLangQuery&&(c=f[1]),s.setUserLocale(c),s.setSystemDefaultLocale(o.defaultLocaleIdentifier);var h=Object(r.__spreadArrays)([s.setLocale(n,c)],e.map((function(e){return s.loadBundle(e)})));return t.all(h)}]}}o.module(ae,[a.Q,u.a,c.a,l.moduleName,s.b,d.a,p.a,m.a,f.b,A.a,w.a,h.a,g.a,k.a,I.a,T.a,E.a,$.a,v.a,b.a,y.a,S.a,C.a,P.a,_.a,D.a,x.a,R.a,M.a,N.a,j.a,L.a,U.a,G.a,F.a,B.a,q.a,H.a,V.a,z.a,K.a,J.a,W.a,Q.a,O.a,Y.a,X.a,ee.a,te.a,ne.a,re.a,"ngCookies"]).config([s.c,function(t){t.state("base",{abstract:!0,resolve:ue(["features/base/base","global","common/grades-common","components/services/grade"]),require:function(){return Promise.all([n.e(0),n.e(20),n.e(582),n.e(9),n.e(28),n.e(31),n.e(70),n.e(567)]).then(n.bind(null,"03Un"))}}).state("welcome",{resolve:ue(["features/welcome"],!0),require:function(){return n.e(669).then(n.bind(null,"IYP1"))},pageTitle:"welcome.welcome.title"}).state("register-succeeded",{url:"/startLearn?registerStatusCode?courseId?enrollStatusCode",require:function(){return n.e(706).then(n.bind(null,"90MB"))}}).state("base.not-found",{resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/base/not-found/base-not-found")}]},require:function(){return n.e(671).then(n.bind(null,"A15Z"))},pageTitle:"base.not-found.pageNotFoundTitle"}).state("logout",{url:"^/logout",onEnter:function(){e("body").addClass("bb-logout"),window.location.href=ie.c("/webapps/login/?action=logout")}}).state("classicRedirect",{url:"/classicRedirect?legacyUrl",onEnter:[s.d,function(e){var t=e.nextParams.legacyUrl,n=t?ie.b(t).course_id:null;n&&e.goPeekState("course.classic.outline",{courseId:n,legacyUrl:t})}]}).state("mobileApiCall",{url:"^/mobileApiCall?action&courseId&contentId&attemptId&columnId",onEnter:[s.d,function(e){Z.b(e)}]})}])}).call(this,n("5iHu"))},3:function(e,t){},"36CG":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h}));var r=n("D57K"),i=n("pjml"),o=n("lVRt"),s=n("TnpK"),a=n("Qbdf"),u=n("JfV0"),c=n("aHpC"),l=n("yC9S"),d=n("ZzR9"),p="ultra.service.course-context.content",m="currentContentModel",f=m+"Provider",h=o.b,g=function(){function e(e,t){var n=this;this.$q=e,this.$rootScope=t,this.onStateHasContentInContextChanged=function(e,t,r){r&&!t&&n.clear()},l.b.OnRootScope(t,d.a.$stateHasContentInContextChanged,this.onStateHasContentInContextChanged)}return Object.defineProperty(e.prototype,"contentId",{get:function(){return this._contentId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),e.prototype.updateContent=function(e){this._contentId=e?e.id:null,this._content=e},e.prototype.clear=function(){this.updateContent(null)},e.prototype.load=function(e,t){var n=this;return e?this.contentId===t&&this.content?this.content.$asPromise():this.loadContent(e,t).then((function(e){return e.state===i.r.StateType.Completed||!e.isForcedSequenceItem()||e.isTest()||e.isAssignment()||n.markCompleted(e),n.updateContent(e),e.$asPromise()})).catch((function(e){return n.$q.reject(e)})):this.$q.when(null)},e.prototype.markCompleted=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.updateState(i.r.StateType.Completed,!0)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadContent=function(e,t){var n=this;return e.$find(t).$allow([404]).$asPromise().then((function(e){var r=e.$response;return r&&r.status===u.HttpStatus.NotFound?n.$q.reject(new Error("Content  "+t+" not found")):e.$asPromise()}))},e=Object(r.__decorate)([Object(r.__param)(0,Object(c.b)("$q")),Object(r.__param)(1,Object(c.b)("$rootScope"))],e)}(),v=function(){function e(e){var t=this;this.$injector=e,this.$get=["$injector",function(e){return e.instantiate(g)}],this.name=h,this.resolve=[s.d,a.d,"$q","$rootScope",function(e,n,r,o){var s=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(s&&s!==i.r.CREATE_CONTENT_ID)return t.$injector.instantiate(g,{$q:r,$rootScope:o}).load(n.contents,s)}]}return e=Object(r.__decorate)([Object(r.__param)(0,Object(c.b)("$injector"))],e)}(),b=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(g),[i.Q]);angular.module(p,b).provider(m,v)},"3FFP":function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return v}));var r=n("D57K"),i=(n("YQEa"),n("nsO7")),o=n("5iHu"),s=n("wHJ2"),a=n("nbDY"),u=n.n(a),c=n("rxY8"),l=n("lEL+"),d=n("0JpG"),p=n("yC9S"),m=n("LsF/"),f=n("DyQT"),h=n("yo/t"),g="ultra.components.directives.saveTray",v=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.template=n,o.msgKeysSuffix=r,o.eventName=i,o}return Object(r.__extends)(t,e),t.prototype.getTemplateHtml=function(){return this.template},t.getTrayType=function(e){switch(e){case"LoadMoreResults":return t.LoadMoreResults;case"Toast":return t.Toast;default:return t.Default}},t.Default=new t("Default",m,{inProgress:"saving",success:"success",error:"error"},"bb-save-tray-start"),t.LoadMoreResults=new t("LoadMoreResults",f,{inProgress:"loadingMoreItems",success:"itemsLoaded",error:"itemsFailedToLoad"},"bb-load-more-results-start"),t.Toast=new t("Toast",h),t}(u.a),b=function(){function e(t,n,r,s,a){var u=this;if(this.scope=t,this.spinner=r,this.timeout=s,this.bbLocalize=a,this.inProgress=!1,this.localizationKeysPrefix=t.trayLocalizationKeysPrefix||"components.directives.save-tray",this.footer=n.closest("footer"),t.toastMessage&&t.toastMessage()){if(n.find(".notification-container span.progress-status").html(t.toastMessage()),t.toastShortMessage&&t.toastShortMessage()){var c,l=!1,d=!1,m=!0,f=n.find(".notification-container span.progress-status"),h=function(){var e=o(window).width();f[0].offsetWidth<f[0].scrollWidth?(l||(c=e),l=!0,m&&(d=!0),f.html(t.toastShortMessage())):e>c&&!d&&(l=!1,f.html(t.toastMessage())),m=!1};this.timeout(h,t,0);var g=i.debounce(h,100);p.b.OnWindow("resize",g,t)}}else this.spinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5,successCallback:function(){u.status="success",u.inProgress=!1,u.sendStatusMessage(t,u.status),u.sendMessageToScreenReader(t,t.trayType.msgKeysSuffix.success),t.$apply()},errorCallback:function(){u.status="error",u.inProgress=!1,u.sendStatusMessage(t,u.status),u.sendMessageToScreenReader(t,t.trayType.msgKeysSuffix.error),t.$apply()}},t.$on("save-tray-spinner-status-update",(function(e,t){if(u.spinnerObject)return t?u.spinnerObject.complete():u.spinnerObject.error()})),t.$on(t.trayType.eventName,(function(r,i,o,s,a,c){t.trayId===i&&(u.status="",u.canvasElement||(u.canvasElement=n.find(".canvas")),s&&(u.spinnerArgs=s),u.footer.addClass("is-active"),u.spinnerObject||(u.spinnerObject=u.spinner.initInlineLoader(u.canvasElement,u.spinnerArgs)),u.inProgress||(u.spinnerObject.start(),u.inProgress=!0),u.timeoutComplete=!1,u.activeTimeout&&!u.timeoutComplete&&u.timeout.cancel(u.activeTimeout),u.sendMessageToScreenReader(t,t.trayType.msgKeysSuffix.inProgress,0),o.then((function(){a?(u.activeTimeout=u.timeout((function(){u.footer.removeClass("is-active"),u.timeoutComplete=!0,u.scope.$root.$broadcast("bbSaveTrayComplete")}),t,c||e.ACTIVE_TIMEOUT_LENGTH,!0),u.spinnerObject.complete()):u.spinnerObject.error()}),(function(e){e&&"canceled"===e.$status||u.spinnerObject.error()})))}))}return e.prototype.sendMessageToScreenReader=function(e,t,n){t&&e.$root.$emit("read-info-directive-alert",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.localizationKeysPrefix+"."+t}),n)},e.prototype.sendStatusMessage=function(e,t){"true"===e.emitStatusEvent&&e.$root.$emit("save-tray-status-event",t)},e.$inject=["scope","element",c.b,l.b,d.serviceName],e.ACTIVE_TIMEOUT_LENGTH=6e3,e}(),y=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="E",this.scope={trayId:"@?",trayLocalizationKeysPrefix:"@?",toastMessage:"&?",toastShortMessage:"&?",toastClass:"&?",toastIcon:"&?",toastStatus:"&?",emitStatusEvent:"@?"},this.link=function(e,t,r){r.trayType?e.trayType=v.getTrayType(r.trayType):e.trayType=e.toastMessage&&e.toastMessage()?v.Toast:v.Default,t.append(n.$compile(e.trayType.getTemplateHtml())(e)),e.saveTray=n.$injector.instantiate(b,{scope:e,element:t})}}return e.$inject=["$injector","$compile"],e}();s.module(g,[c.a,l.a,d.moduleName]).directive("bbSaveTray",["$injector",function(e){return e.instantiate(y)}])},"3PCF":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e.None="",e.SafeAssign="SafeAssign",e.Integration="Integration"}(r||(r={}));var i="mdb-sa"},"3Zit":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("zYa8"),i=n("dmkk"),o="ultra.components.directives.bbUiIcon.AvatarMultiple";Object(r.a)(i.a,o,"bbUiIconAvatarMultiple")},"3bn4":function(e,t,n){"use strict";var r=n("nsO7"),i=n("0JpG"),o=function(){function e(){var e,t,o=this;this.panelClass="peek",this.url="/goalAlignment",this.require=function(){return Promise.all([n.e(1),n.e(599)]).then(n.bind(null,"lQY5"))},this.pageTitle="course.goal-alignment.goal.header",this.allowChildPeekStates=!0,this.peekViewName="goal-alignment-peek",this.params={noAutoGo:!1},this.peekStates=["goal-picker-legacy"],this.resolve={translations:[i.serviceName,function(e){return e.loadBundle("features/course/goal-alignment/goal")}],goalAlignableContents:(e=o.resolveGoalAlignableContent(),t=e[e.length-1],e[e.length-1]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(null,e).then((function(e){return r.isArray(e)?e:[e]}))},e),overrideSubTitle:o.getOverrideSubTitle()}}return e.prototype.getOverrideSubTitle=function(){return[function(){return null}]},e}();t.a=o},"3hz+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.books-and-tools.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("books-and-tools",{url:"/booksAndTools?parentId",require:function(){return Promise.all([n.e(64),n.e(609)]).then(n.bind(null,"cFJh"))},resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/books-and-tools/books-and-tools")}]},panelClass:"peek",pageTitle:"course.booksAndTools.tab.title",peekStates:["content-market","partner-tools","proctoring-lti-tool"]})}])},"3uIF":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("QLzv");var r=n("5MwF"),i=n("yCC5"),o=n("Rjd/"),s=i.zb;o.a.factory(s,["restmod",function(e){var t=r.a.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{delete:function(e,t){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e+"/linkRefId/"+t},(function(e){})).$asPromise()}}}})}])},"3vti":function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n("D57K"),i=(n("4lO8"),n("my/J"),n("OAwL"),n("5iHu")),o=n("wHJ2"),s=n("yC9S"),a=n("nbDY"),u=n.n(a),c=n("+4Px"),l=n("0JpG"),d="ultra.components.directives.bbSortable",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Horizontal=new t("Horizontal"),t.Vertical=new t("Vertical"),t}(u.a),m={containerSelector:"[sortable-container]",itemSelector:"[sortable-item]",containerPath:"[sortable-parent]:first",placeholder:'<div class="placeholder">&nbsp;</div>',handle:"i.icon-reorder",onDragStart:function(e,t,n,r){t.rootGroup.placeholder=e.clone().addClass("placeholder").removeAttr("sortable-item"),t.rootGroup.placeholder.find("[sortable-container], [sortable-item]").removeAttr("sortable-container sortable-item"),n(e,t)},triggerKey:c.f,orientation:p.Vertical,placeholderClass:"placeholder",moveKeyHandler:function(e,t,n,r){var i=t.options;if(p.Horizontal.isEqualTo(i.orientation)){var o=i.isRTL?c.j:c.s,s=i.isRTL?c.s:c.j;r.keyCode===s?(r.stopPropagation(),e.insertBefore(e.prev(i.itemSelector)),e.find(i.handle).focus()):r.keyCode===o&&(e.insertAfter(e.next(i.itemSelector)),e.find(i.handle).focus(),r.stopPropagation())}else r.keyCode===c.v?(r.stopPropagation(),e.insertBefore(e.prev(i.itemSelector)),e.find(i.handle).focus()):r.keyCode===c.d&&(e.insertAfter(e.next(i.itemSelector)),e.find(i.handle).focus(),r.stopPropagation())},cancelHandler:function(e,t,n,r,i){var o=e.index();o>n?e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+n+")")):o<n&&e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+(n+1)+")"))},saveHandler:function(e,t,n,r){e.focus(),t.options.onDrop&&"function"==typeof t.options.onDrop&&t.options.onDrop(e,t,n,r)}},f=function(){function e(e){var t=this;this.localize=e,this.scope={sortableOptions:"=?"},this.restrict="A",this.link=function(e,n,r){var o=e.$watch("sortableOptions",(function(){e.sortableOptions=i.extend({},m,e.sortableOptions),e.sortableOptions.isRTL=t.localize.isRTL(e);var r=n.parents("[bb-sortable]");n.on("touchstart",e.sortableOptions.handle,(function(e){i(e.target).trigger("click")})),0!==r.length?(r.sortable("destroy"),r.last().sortable(e.sortableOptions)):n.sortable(e.sortableOptions),n.find(e.sortableOptions.itemSelector).each((function(n,r){t.keyboardDragAndDrop(i(r),e)})),s.b.OnRootScope(e,"sortable-item-inserted",(function(n,r){var i=t.keyboardDragAndDrop(r,e);r.hasClass(e.sortableOptions.placeholderClass)&&!r.data("axHandlersAdded")&&t.triggerAccessibilityMode(i,e)})),o()}))}}return e.prototype.keyboardDragAndDrop=function(e,t){var n=this,r=i(e).find(t.sortableOptions.handle);return r.on("keyup",(function(e){if(e.keyCode===t.sortableOptions.triggerKey){var r=i(e.target),o=r.closest(t.sortableOptions.itemSelector),s=o.parents(t.sortableOptions.containerSelector).last().data("sortable");if(o.hasClass(t.sortableOptions.placeholderClass))return;e.stopImmediatePropagation(),o.addClass(t.sortableOptions.placeholderClass),t.sortableOptions.onEnter&&t.sortableOptions.onEnter(o,s),n.triggerAccessibilityMode(r,t)}})),r},e.prototype.triggerAccessibilityMode=function(e,t){var n,r,o,s=e.closest(t.sortableOptions.itemSelector),a=s.parents(t.sortableOptions.containerSelector).last().data("sortable"),u=s.index(),c=function(){i(document).off("click focusin",r),e.off("keydown",n),e.off("keyup",o),s.data("axHandlersAdded",!1),s.removeClass(t.sortableOptions.placeholderClass),t.sortableOptions.onExit&&t.sortableOptions.onExit(s,a)};n=function(e){t.sortableOptions.moveKeyHandler(s,a,i.noop,e)},r=function(n){i(n.target).is(e)||(c(),t.sortableOptions.cancelHandler(s,a,u,i.noop,n))},o=function(e){e.keyCode===t.sortableOptions.triggerKey&&(c(),e.stopImmediatePropagation(),t.sortableOptions.saveHandler(s,a,i.noop,e))},e.on("keyup",o),e.on("keydown",n),i(document).on("click focusin",r),t.$on("$destroy",c),s.data("axHandlersAdded",!0)},e.$inject=[l.serviceName],e}();o.module(d,[l.moduleName]).directive("bbSortable",["$injector",function(e){return e.instantiate(f)}])},4:function(e,t){},"40MU":function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",(function(){return f})),n.d(t,"RandomizeAnswers",(function(){return h})),n.d(t,"TimerCompletion",(function(){return g}));var r=n("D57K"),i=(n("QLzv"),n("nbDY")),o=n.n(i),s=n("5MwF"),a=n("JfV0");n.d(t,"FeedbackMode",(function(){return a.FeedbackMode})),n.d(t,"FeedbackOption",(function(){return a.FeedbackOption}));var u=n("yCC5"),c=n("Rjd/"),l=n("nkTj"),d=n("a8V0");n.d(t,"DeliveryType",(function(){return d.a}));var p=n("r6n2");n.d(t,"DeployedAssessmentType",(function(){return p.a}));var m=n("817J");n.d(t,"AssessmentType",(function(){return m.a}));var f=u.f,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.A=new t("ALWAYS"),t.N=new t("NEVER"),t.P=new t("PER_QUESTION"),t}(o.a),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.C=new t("CONTINUAL"),t.H=new t("HARDSTOP"),t}(o.a);c.a.factory(f,["restmod",l.d,function(e,t){return e.model().mix({lastModifiedDate:{serialize:"date"},answers:{hasMany:u.Vb},gradedQuestionAttempts:{hasMany:u.bb,path:"answers/grades"},questions:{hasMany:u.Ub},ui:{mask:!0,init:function(){return{}}},exceptions:{hasMany:u.g,hooks:{"before-request":function(e){e.url=e.url.replace(s.a.apiBasePath,s.a.apiBasePath+"/public")}}},userExceptions:{hasMany:u.g,path:"exceptions/users"},groupExceptions:{hasMany:u.g,path:"exceptions/groups"}})}])},"41sU":function(e,t,n){},"43zP":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NoChanges=new t("noChanges"),t.NotSaved=new t("notSaved"),t.Saved=new t("saved"),t.Saving=new t("saving"),t.Cancelling=new t("cancelling"),t.Deleting=new t("deleting"),t}(n.n(i).a)},"4GL6":function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n("D57K"),i=(n("pGZF"),n("nsO7")),o=n("wHJ2"),s=n("0JpG"),a=n("lEL+"),u=n("gkef"),c=n("fGgA"),l=n("+4Px"),d="ultra.components.directives.tooltip.complexTooltip";function p(e){return void 0===e&&(e=""),'<ul class="complex-tooltip-list '+e+'"><li ng-repeat="item in items track by $index">{{item}}</li></ul>'}var m=function(t){function n(e,n,r,s,a,u,c){var l=t.call(this,e,n,r,a,u,c)||this;l.scope=e,l.element=n,l.attrs=r,l.$compile=s,l.localizeService=a,l.timeoutService=u,l.windowSizeService=c,l.scopeChanged=!1;var d=l.scope.$watch("tooltipScope()",(function(e){e&&(l.tooltipScope=l.scope.tooltipScope(),d())})),p=l.scope.$watch("tooltipScope().items",(function(e,t){e&&t&&i.difference(e,t).length&&(l.tooltipScope=l.scope.tooltipScope(),l.scopeChanged=!0,l.tooltipScope.$parent.$on("$destroy",(function(){l.tooltipScope.$destroy()})),(o.isUndefined(l.scope.tooltipAutoUpdate)||"false"===l.scope.tooltipAutoUpdate)&&p())}));return l}return Object(r.__extends)(n,t),n.prototype.showTooltip=function(){"true"===this.scope.tooltipAutoUpdate&&this.tooltipCreated&&this.scopeChanged&&(this.updateTooltipContent(t.prototype.getTooltip.call(this)),this.tooltipCreated=!1,this.scopeChanged=!1),t.prototype.showTooltip.call(this)},n.prototype.addTooltipContent=function(t){var r=this,i=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope);this.tooltipScope.$apply(),t.on("keydown",(function(e){e.which===l.g?(r.element.focus(),r.hideTooltip()):e.which!==l.u||e.shiftKey?e.which===l.u&&e.shiftKey&&o.element(e.target).closest(".tooltip-first-tabbable").length>0&&(r.getTooltip().find(".tooltip-last-tabbable").focus(),e.preventDefault(),e.stopPropagation()):o.element(e.target).closest(".tooltip-last-tabbable").length>0&&(r.getTooltip().find(".tooltip-first-tabbable").focus(),e.preventDefault(),e.stopPropagation())})),t.append(e('<div class="'+n.TOOLTIP_CONTENT_CLASS+'"></div>').append(i))},n.prototype.updateTooltipContent=function(e){var t=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope);e.find("."+n.TOOLTIP_CONTENT_CLASS).empty().append(t)},n.prototype.addTooltipStyles=function(e){e.removeClass("tooltip-center-content"),this.attrs.tooltipMaxWidth&&(e.removeClass("tooltip-max-width"),e.css({"max-width":this.attrs.tooltipMaxWidth})),"true"===this.attrs.tooltipDisablePadding&&e.addClass("tooltip-unpadded"),"true"===this.attrs.tooltipDarkTheme&&e.addClass("tooltip-dark-theme")},n.prototype.addTooltipEvents=function(e){var t=this;e.on("mouseleave",(function(e){t.timeoutMS>0?t.timeout=t.timeoutService((function(){t.hideTooltip()}),t.scope,t.timeoutMS):t.hideTooltip()})),e.on("mouseover",(function(e){t.timeout&&t.timeoutService.cancel(t.timeout)})),e.on("click",(function(e){e.stopPropagation()}))},n.prototype.postShowTooltip=function(){var e=this;o.isDefined(this.attrs.tooltipFocusSelector)&&this.timeoutService((function(){e.getTooltip().find(e.attrs.tooltipFocusSelector).eq(0).focus()}),this.scope,120)},n.$inject=["scope","element","attrs","$compile",s.serviceName,a.b,u.b],n.TOOLTIP_CONTENT_CLASS="complex-tooltip-content",n}(c.a),f=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.scope={tooltipScope:"&",tooltipTemplate:"@",tooltipAutoUpdate:"@?"},this.link=function(e,n,r){e.complexTooltip=t.$injector.instantiate(m,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();o.module(d,[s.moduleName,a.a,c.b,u.a]).directive("bbComplexTooltip",["$injector",function(e){return e.instantiate(f)}])}).call(this,n("5iHu"))},"4HBD":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));n("gSbt");var r=n("wHJ2"),i=n("0JpG"),o=n("oVrE"),s=n("gCXj"),a=n("pjml"),u="ultra.components.directives.bbUsername",c=function(){function t(e){var t=this;this.bbLocalize=e,this.scope={user:"="},this.restrict="AE",this.link=function(e,n,r){e.update=function(){return t.updateDom(e,n,r)},n.addClass("username");var i=e.$watchGroup(["user.id","user.familyName","user.givenName","user.title","user.email"],(function(){if(e.user){var t=e.user;t.$asPromise&&!t.$resolved?t.$asPromise().then(e.update):e.update(),null!=r.autoUpdate&&"false"!==r.autoUpdate||i()}else n.html("")}))}}return t.prototype.isAnonymousUser=function(e){return o.g(e)},t.prototype.cleanUpClassNames=function(e){return e.split(/\s+/).filter((function(e){return!/^course_user.+$/.test(e)})).join(" ")},t.prototype.updateName=function(e,t){e.html(t)},t.prototype.updateAttrs=function(t,n,r,i){var o;"true"===r.hasTitleAttr&&n.attr("title",i),"true"!==r.shouldAllowLabel&&n.children().attr("aria-hidden","true");var s=n.find(".sr-only");0===s.length&&(s=e('<span class="sr-only"></span>'),n.append(s));var a=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(t),key:"components.directives.username.msg-has-accommodations",params:{fullname:i},noWrap:!0});s.attr(((o={})["aria-label-if-no-accommodation"]=i,o["aria-label-if-has-accommodation"]=a,o))},t.prototype.updateDom=function(e,t,n){var r=this,o=e.user;this.isAnonymousUser(o)&&(o.givenName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:"anonymous.postedName"}),o.familyName=""),t[0].className=this.cleanUpClassNames(t[0].className),o.id&&t.addClass("course_user"+o.id);var s=this.bbLocalize.getFormatId(i.ILocaleUsernameFormat,n.format);if(n.formatSync)try{this.updateName(t,this.bbLocalize.formatUsernameSync(o,s,e)),this.updateAttrs(e,t,n,this.bbLocalize.formatUsernameSync(o,s,e,{noWrap:!0,noEscape:!0}))}catch(e){console.error(e)}else this.bbLocalize.formatUsername(o,s,e).then((function(e){r.updateName(t,e)})).catch((function(e){return console.error(e)})),this.bbLocalize.formatUsername(o,s,e,{noWrap:!0,noEscape:!0}).then((function(i){r.updateAttrs(e,t,n,i)})).catch((function(e){return console.error(e)}))},t.$inject=[i.serviceName],t}();r.module(u,[i.moduleName,s.a,a.Q]).config([s.b+"Provider",function(e){e.onStyleRefresh((function(e,t){var n,r,i,o,s=(null===(r=null===(n=t.course)||void 0===n?void 0:n.memberships)||void 0===r?void 0:r.permissions)&&(t.course.memberships.permissions.viewAccommodation||t.course.memberships.permissions.viewDueDateException||t.course.memberships.permissions.viewTimeLimitException)||t.permissions&&(t.permissions.viewAccommodation||t.permissions.viewDueDateException||t.permissions.viewTimeLimitException),a=(null===(o=null===(i=t.course)||void 0===i?void 0:i.memberships)||void 0===o?void 0:o.permissions)&&(t.course.memberships.permissions.editAccommodation||t.course.memberships.permissions.editDueDateException||t.course.memberships.permissions.editTimeLimitException)||t.permissions&&(t.permissions.editAccommodation||t.permissions.editDueDateException||t.permissions.editTimeLimitException),u=s||a;e.selector("bb-username.course_user"+t.userId+":before").rule("display",t.accommodation().hasAccommodation&&u?"inline-block":"none"),e.selector("bb-username.course_user"+t.userId).selector(".sr-only:before").rule("content",t.accommodation().hasAccommodation&&u?"attr(aria-label-if-has-accommodation)":"attr(aria-label-if-no-accommodation)")}))}]).directive("bbUsername",["$injector",function(e){return e.instantiate(c)}])}).call(this,n("5iHu"))},"4HXK":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u}));var r=n("D57K"),i=n("wHJ2"),o=n("5MwF"),s=n("w9mJ"),a="ultra.services.logger",u="logger",c=function(){function e(e,t){this.$http=e,this.promiseQueueService=t,this.$http=e,this.queue=t.getQueue("telemetry")}return e.prototype.logToServer=function(e,t,n){var r=this;if(e){var i="string"==typeof e?new Error(e):e,s={applicationId:o.a.telemetryAppId,component:"",message:i.message,data:n,cause:i.stack,level:t};s.cause||(s.cause="Stack trace is unavailable"),this.queue.enqueue((function(){return r.$http.post(o.a.telemetryApiBasePath+"/v1/browser/logs",s,{timeout:o.a.telemetryApiTimeoutMS}).error((function(e,t){console.error("Failed to send logs to server. \nResponse: "+e+"Status: "+t)}))}))}else console.error("Unable to send empty log entry to server")},e.prototype.debug=function(e,t){this.logToServer(e,"debug",t)},e.prototype.info=function(e,t){this.logToServer(e,"info",t)},e.prototype.error=function(e,t){this.logToServer(e,"error",t)},e.prototype.critical=function(e,t){this.logToServer(e,"critical",t)},e.prototype.warn=function(e,t){this.logToServer(e,"warn",t)},e.$inject=["$http",s.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);i.module(a,[s.a]).service(u,c)},"4nF1":function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return O}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("Y3OE"),u=n("nbDY"),c=n.n(u),l=n("g66W"),d=n("Q/M7"),p=n("nmzr"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.BbPage=new t("resource/x-bb-page"),t.LtiLaunch=new t("ltilaunch"),t.ScormLaunch=new t("scormlaunch"),t.ContentUrl=new t("contenturl"),t.None=new t("none"),t}(c.a),f=function(){function e(e,t){this.content=e,this.isFromCourseLink=t}return e.prototype.deleteKey=function(){return this.content.contentHandler.toString()},e.prototype.iconClass=function(){var e=a.a.parse(this.content.contentHandler.toString());return null!=e?e.iconClass:null},e.prototype.linkAction=function(){var e=this.content.contentHandler.toString();this.isFromCourseLink&&(e=a.a.CourseLink.toString());var t=m.parse(e);return t||(t=new m(e)),t},e.prototype.viewHandler=function(){return this.content.contentHandler.toString()},e.prototype.getTargetCourseContentDisplay=function(){return null},e.prototype.getEditSref=function(){return null},e.prototype.getEditState=function(){return null},e.prototype.getEditStateParams=function(){return null},e.prototype.usesEditButton=function(){return null!=this.getEditSref()},e.prototype.canUseEditButton=function(){return this.usesEditButton()&&!(!this.content.permissions||!this.content.permissions.edit&&!this.content.permissions.modifyAvailability)},e.prototype.isLtiLink=function(){return!1},e.prototype.contentUrl=function(){throw new Error("contentUrl() is not supported for "+this.content.contentHandler.toString())},e.prototype.supportsConversations=function(){return!1},e.prototype.isXplorLtiLink=function(){return!1},e}(),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"gradebook-item.assignment"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}},t.prototype.getEditSref=function(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'},t}(f),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"gradebook-item.assignment"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}},t.prototype.getEditSref=function(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'},t.prototype.supportsConversations=function(){return!0},t}(f),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.deleteKey=function(){if(this.content.getAssociatedGradingColumn){var e=this.content.getAssociatedGradingColumn();if(e&&e.gradebookCategory)switch(e.gradebookCategory.title){case s.E.GradeCategoryTitleEnum.Assignment.toString():return a.a.UltraAssignment.toString();default:return a.a.TestLink.toString()}}return this.content.contentHandler.toString()},t.prototype.getEditState=function(){return"gradebook-item.assessment"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details",assessmentType:"test"}},t.prototype.canUseEditButton=function(){var e=this.content.getDeployedAssessment().permissions;return!(!e||!e.modify&&!e.view)},t.prototype.getEditSref=function(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details",assessmentType: "test"})'},t.prototype.supportsConversations=function(){return!0},t}(f),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"discussion.view.with-grading"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"},t}(f),y=function(e){function t(t){var n=e.call(this,t)||this;return n.content=t,t.contentDetail&&(n.targetContent=t.getLinkContentSource()),n}return Object(r.__extends)(t,e),t.prototype.getTargetCourseContentDisplay=function(){if(!(this.targetContent&&this.targetContent.$resolved&&this.targetContent.contentHandler))return new f(this.content,!0);switch(O.normalize(this.targetContent.contentHandler.toString())){case a.a.Discussion.toString():return new b(this.targetContent,!0);default:return new f(this.targetContent,!0)}},t}(f),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"content-manage.edit.file"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.linkAction=function(){return m.ContentUrl},t.prototype.contentUrl=function(){return d.c(this.content.contentDetail[s.r.ContentHandler.File.toString()].file.permanentUrl)},t}(f),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"content-manage.edit.folder"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t}(f),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"content-manage.edit.learning-module"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t}(f),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),Object.defineProperty(t,"EDIT_STATE_SREF",{get:function(){return"content-manage.edit.document"},enumerable:!0,configurable:!0}),t.prototype.getEditState=function(){return t.EDIT_STATE_SREF},t.prototype.getIconClass=function(){return a.a.Document.iconClass},t.prototype.supportsConversations=function(){return!0},t.prototype.linkAction=function(){return m.BbPage},t.prototype.viewHandler=function(){return a.a.Page.toString()},t}(C),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"content-manage.edit.link"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.contentUrl=function(){var e=this.content.contentDetail&&this.content.contentDetail[s.r.ContentHandler.ExternalLink.toString()].url;return e&&(e=l.c(e)),t.PROTOCOL_CHECK.test(e)?e:"http://"+e},t.prototype.linkAction=function(){return m.ContentUrl},t.PROTOCOL_CHECK=/^\w+\:{1}/,t}(f),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"content-manage.edit.lti"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.linkAction=function(){return m.LtiLaunch},t.prototype.isLtiLink=function(){return!0},t.prototype.isXplorLtiLink=function(){var e,t,n,r,i,o=null===(i=null===(t=null===(e=this.content)||void 0===e?void 0:e.contentDetail)||void 0===t?void 0:t[null===(r=null===(n=this.content)||void 0===n?void 0:n.contentHandler)||void 0===r?void 0:r.toString()])||void 0===i?void 0:i.url;return o&&o.indexOf("://xplor")>-1},t.prototype.supportsConversations=function(){return!0},t}(f),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.deleteKey=function(){return a.a.LtiPlacement.toString()},t.prototype.getEditState=function(){return"content-manage.edit.placement"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.linkAction=function(){return m.LtiLaunch},t.prototype.isLtiLink=function(){return!0},t.prototype.supportsConversations=function(){return!0},t.prototype.canUseEditButton=function(){return e.prototype.canUseEditButton.call(this)&&o.isDefined(this.content.contentDetail)&&o.isDefined(this.content.contentDetail[this.content.contentHandler.toString()])&&o.isDefined(this.content.contentDetail[this.content.contentHandler.toString()].placement)},t}(f),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return"scorm-settings"},t.prototype.getEditStateParams=function(){return{contentId:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({contentId:content.id})"},t.prototype.linkAction=function(){return m.ScormLaunch},t.prototype.supportsConversations=function(){return!0},t}(f),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getEditState=function(){return p.Routes.Journal.JOURNAL_VIEW_WITH_PARTICIPATION},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"},t}(f),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.linkAction=function(){return m.LtiLaunch},t.prototype.isLtiLink=function(){return!0},t}(f),O=function(){function e(){}return e.normalize=function(e){return null!=e&&0===e.indexOf(a.a.LtiPlacement.toString())?a.a.LtiPlacement.toString():e},e.matchesHandlers=function(e,t){var n=this.normalize(e);return i.findIndex(t,(function(e){return n===e.toString()}))>=0},e.create=function(e){switch(this.normalize(e.contentHandler.toString())){case a.a.ClassicAssignment.toString():return new h(e);case a.a.File.toString():return new S(e);case a.a.Folder.toString():if(e.contentDetail){var t=e.contentDetail[a.a.Folder.toString()];if(t&&t.isBbPage)return new k(e)}return new C(e);case a.a.ExternalLink.toString():return new I(e);case a.a.LtiLink.toString():return new T(e);case a.a.LtiPlacement.toString():return new E(e);case a.a.Page.toString():return new k(e);case a.a.PartnerCloud.toString():return new A(e);case a.a.TestLink.toString():return new v(e);case a.a.RusticiScorm.toString():return new $(e);case a.a.UltraAssignment.toString():return new g(e);case a.a.Discussion.toString():return new b(e);case a.a.CourseLink.toString():return new y(e).getTargetCourseContentDisplay();case a.a.LearningModule.toString():return new w(e);case a.a.Journal.toString():return new P(e);default:return new f(e)}},e}()},"4vd5":function(e,t,n){"use strict";var r=n("D57K"),i=n("ERkP"),o=n("td+C"),s=n("gSji"),a=n("5LAh"),u=n("tN4z"),c=n("nmzr"),l=function(e){var t=Object(i.useState)("#"),n=t[0],r=t[1];return Object(i.useEffect)((function(){r(c.router.getHref(c.IntegrationRoutes.INTEGRATION_BASE,{routeName:e}))}),[e]),n},d=function(e){var t=l(e.to),n=e.analyticsId?"integration."+e.analyticsId:"integration.link";return i.createElement(u.AnalyticsJssThemeProvider,{theme:"light"},i.createElement(u.AnalyticsLink,Object(r.__assign)({},e,{className:"uef-link "+e.className,analyticsId:n,href:t}),e.children))},p=function(e){var t=l(e.to),n=e.analyticsId?"integration."+e.analyticsId:"integration.button.link";return i.createElement(u.AnalyticsJssThemeProvider,{theme:"light"},i.createElement(u.AnalyticsPrimaryButton,Object(r.__assign)({},e,{analyticsId:n,href:t,variant:"contained",color:"primary"}),e.children))},m=(n("GQNF"),/^[a-z0-9-]*$/i),f=new Map([["uef--base-nav-button","integration-navigation-button-content themed-background-primary-alt-fill-only theme-border-left-active"],["uef--button","button button--primary"],["uef--button--secondary","button button--secondary"]]),h=new Map([["classname",function(e){return Object(a.h)(e,f)}]]),g=function(){function e(e){var t=this;this.integrationService=e,this.onIntegrationRegistration=function(e,n){var r=t.validateBaseNavigationRequest(e);r.status===s.p.Success?(t.registeredRoutes.set(n.id,{integrationId:n.id,routes:[e.routeName],displayName:e.displayName,initialContents:e.initialContents}),t.listeners.forEach((function(e){try{e(t.registeredRoutes.get(n.id))}catch(e){console.error(e)}})),t.integrationService.sendMessage(r,n)):t.integrationService.sendMessage(r,n)},this.registeredRoutes=new Map,this.listeners=new Set}return e.prototype.init=function(){this.initializeWhitelist(),this.integrationService.addIntegrationMessageType(s.d,this.onIntegrationRegistration)},e.prototype.initializeWhitelist=function(){var e=this,t={props:{to:!0,className:!1},isValid:function(t,n){return!!e.isRouteRegistered(t.props.to,n)||(console.warn(t.props.to+" has not been registered"),!1)},render:function(e,t,n){return i.createElement(d,Object(r.__assign)({},t)," ",n," ")},transformers:h},n={props:{to:!0,className:!1},isValid:function(t,n){return!!e.isRouteRegistered(t.props.to,n)||(console.warn(t.props.to+" has not been registered"),!1)},render:function(e,t,n){return i.createElement(p,Object(r.__assign)({},t)," ",n," ")},transformers:h};a.b.addGlobalComponent(s.q.Link,t),a.b.addGlobalComponent(s.q.ButtonLink,n)},e.prototype.onIntegrationAdded=function(e){var t=this;return this.listeners.add(e),function(){t.removeIntegrationAdded(e)}},e.prototype.removeIntegrationAdded=function(e){this.listeners.delete(e)},e.prototype.getRegisteredRecords=function(){return Array.from(this.registeredRoutes.values())},e.prototype.getRecordForRoute=function(e){return Array.from(this.registeredRoutes.values()).find((function(t){return t.routes.indexOf(e)>=0}))},e.prototype.isValidRouteName=function(e){return m.test(e)},e.prototype.validateBaseNavigationRequest=function(e){return this.getRecordForRoute(e.routeName)?{type:s.d,status:s.p.Failure,error:s.t.ExistingRouteName,errorMessage:e.routeName+" as already been registered"}:this.isValidRouteName(e.routeName)?{type:s.d,status:s.p.Success}:{type:s.d,status:s.p.Failure,error:s.t.InvalidRouteName,errorMessage:e.routeName+" has invalid characters in it."}},e.prototype.isRouteRegistered=function(e,t){var n,r=null===(n=this.registeredRoutes.get(t))||void 0===n?void 0:n.routes;return!!r&&-1!==r.indexOf(e)},e}();t.a=new g(o.a)},"5Dl8":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n("nsO7");function i(e){return e&&e/16+"rem"||"0"}var o=function(){function e(e){this.parent=e,this.curSelector=null,this.pool=null==e?{}:null}return e.prototype.selector=function(t){var n=new e(this);return n.curSelector=t,n},e.prototype.rule=function(e,t){return this.subRule(null,e,t),this},e.prototype.build=function(){return r.map(this.pool,(function(e,t){var n=[];return e.forEach((function(e){return n.push(e)})),n.join(",")+"{"+t+"}"})).join("\n")},e.prototype.subRule=function(e,t,n){var i=r.compact([this.curSelector,e]).join(" ");if(null!=this.parent)this.parent.subRule(i,t,n);else{var o=t+":"+n;this.pool[o]=this.pool[o]||new Set,this.pool[o].add(i)}},e}()},"5KgE":function(e,t,n){"use strict";var r=n("D57K"),i=n("wHJ2"),o=n("w9Zy"),s=n("Fvsw"),a=n("Qbdf"),u=n("lEL+"),c=n("aHpC"),l=n("g66W"),d=n("5MwF"),p=n("wDWF"),m=d.a.features.devtools_disableFtue?-1:2,f=function(){function e(e,t,n,r){this.$q=e,this.context=t,this.offCanvas=n,this.contextCourse=r}return e.prototype.shouldShow=function(e,t,n){var r=this;return d.a.disableAllFtueGuidance?this.$q.when(!1):n?this.$q.when(this.isShownInCurrentSession(e)):this.$q.all([this.offCanvas.getElement(t),this.offCanvas.getTopElement(),this.getSessionNumber(e)]).then((function(t){var n=t[0],i=t[1],o=t[2];return i&&n!==i?r.$q.when(!1):r.shouldShowImpl(e,o)}))},e.prototype.shouldShowImpl=function(e,t){if(t>m)return this.$q.when(!1);if(this.isLastSessionCurrent(e))return this.$q.when(this.isShownInCurrentSession(e));var n=++t<=m;return sessionStorage.setItem(this.getSessionStorageKey(e),n?"show":"hide"),this.setSessionNumber(e,t).then((function(){return n})),this.$q.when(n)},e.prototype.hide=function(e,t){var n=this;sessionStorage.setItem(this.getSessionStorageKey(e),"hide"),t&&this.getSessionNumber(e).then((function(t){n.setSessionNumber(e,++t)}))},e.prototype.getSessionNumber=function(e){var t="ftue."+e+".visited";if(!this.isPredictComponent(e)){return this.context.getPreference(t,"0").then((function(e){var t=parseInt(e.value,10);return Number.isNaN(t)?0:t}))}return this.context.getPredictPreference(t,"0").then((function(e){var t=parseInt(e.value,10);return Number.isNaN(t)?m:t}))},e.prototype.isLastSessionCurrent=function(e){var t=sessionStorage.getItem(this.getSessionStorageKey(e));return"show"===t||"hide"===t},e.prototype.isShownInCurrentSession=function(e){return"hide"!==sessionStorage.getItem(this.getSessionStorageKey(e))},e.prototype.setSessionNumber=function(e,t){var n="ftue."+e+".visited";return this.isPredictComponent(e)?this.context.setPredictPreference(n,t.toString()):this.context.setPreference(n,t.toString())},e.prototype.getSessionStorageKey=function(e){return"ftue."+e+".show."+p.a(this.context.sessionId)},e.prototype.isPredictComponent=function(e){return!!e&&0===e.toLowerCase().indexOf("predict.")},e}(),h=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return Object(r.__extends)(t,e),t.prototype.shouldShowImpl=function(e,t){var n=this;return this.courseId=this.contextCourse.courseId&&this.contextCourse.courseId.replace(/_/g,"."),this.getSessionNumber(e+this.courseId).then((function(r){if(t>m&&r>1)return n.$q.when(!1);if(n.isLastSessionCurrent(e+n.courseId))return n.$q.when(n.isShownInCurrentSession(e)||n.isShownInCurrentSession(e+n.courseId));var i,o;r++,i=++t<=m,sessionStorage.setItem(n.getSessionStorageKey(e),i?"show":"hide"),o=r<=1,sessionStorage.setItem(n.getSessionStorageKey(e+n.courseId),o?"show":"hide");var s=[];return t<=m+1&&s.push(n.setSessionNumber(e,t)),r<=2&&s.push(n.setSessionNumber(e+n.courseId,r)),n.$q.all(s).then((function(){return i||o})),n.$q.when(i||o)}))},t.prototype.hide=function(e){sessionStorage.setItem(this.getSessionStorageKey(e),"hide"),this.courseId||(this.courseId=this.contextCourse.courseId&&this.contextCourse.courseId.replace(/_/g,".")),sessionStorage.setItem(this.getSessionStorageKey(e+this.courseId),"hide")},t}(f);n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return b}));var g,v="ultra.service.firstTimeHelper",b="firstTimeHelper",y=/[_-]/g,S=Symbol("default"),C=function(){function e(e){this.timeout=e,this.TIME_TO_SHOW_FIRST_BUTTON=5e3}return e.prototype.shouldShow=function(e,t,n){return this.convertAngularPromise((g.get(e)||g.get(S)).shouldShow(e,t,n))},e.prototype.hasBeenShown=function(e){return(g.get(e)||g.get(S)).getSessionNumber(e).then((function(e){return e>0}))},e.prototype.hide=function(e,t){(g.get(e)||g.get(S)).hide(e,t)},e.prototype.fadeAddContentButton=function(e,t,n){var r=this;this.shouldShow(t,n).then((function(t){var n=e.$on("add-content-button-ready",(function(){var i=t?r.TIME_TO_SHOW_FIRST_BUTTON:0;n(),r.timeout((function(){e.$broadcast("always-show-time-expires")}),e,i)}))}))},e.prototype.hasMultiTargetSupport=function(e){return!!e&&0===e.toLowerCase().indexOf("predict.")},e.prototype.convertAngularPromise=function(e){return new Promise((function(t,n){e.then(t).catch(n)}))},e=Object(r.__decorate)([Object(r.__param)(0,Object(c.b)(u.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(C);i.module(v,[s.a,a.b,o.d]).run(["$q",s.b,a.e,o.e,function(e,t,n,r){var i,o=new h(e,t,r,n),s=new f(e,t,r,n);g=(new Map).set((i="components.features.course.content.assessment.ftue.group-conversation",l.a(i,y)),o).set(S,s)}]).service(b,C)},"5MwF":function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"default",(function(){return o}));var i=n("nsO7"),o={},s=n("gm4d"),a={},u={apiBasePath:"/learn/api",basePath:"/ultra",buildInfo:"undefined"!=typeof window&&window.__buildInfo||{},chartsApiBasePath:"/charts/api",institutionApiBasePath:"/institution/api",partnerCloudBasePath:"/webapps/partner-cloud/app",defaultBasePage:"base.recentActivity",localeLoader:{fallbackLocales:["en-us","en"]},directivesPerf:!1,features:Object.assign(s.a,a),storageKeyForFeatureFlags:"bb_feature_flags",showFeaturePrototypes:!1,errorDetails:!1,infiniteScrollThrottleMS:500,production:!0,unitTesting:!1,showComingSoonScreens:!0,showDigestHud:!0,streamLoadingInterval:12e4,telemetryApiBasePath:"/telemetry/api",telemetryApiTimeoutMS:2e3,telemetryAppId:"ultra",trialSiteSuggestionsUrl:"https://community.blackboard.com/community/ideas",trialSiteContactSalesUrl:"http://bbbb.blackboard.com/EducatorPreviewcontact",trialSiteLiveChatUrl:"https://chat.edusupportcenter.com/chat/websiteChat?short_name=educatorpreview&key=educatorpreview1707",trialSiteSupportPhone:"1-844-435-2162",kloudlessServices:[],mockApiEndpoints:[],disableAllFtueGuidance:!1,allyAutoUpdateInterval:500,allyClearCacheInterval:1e4,allyInitializationTimeout:1e4,kloudlessInitializationTimeout:1e4},c=JSON.parse(sessionStorage.getItem(u.storageKeyForFeatureFlags)||"{}");i.isEmpty(c)||(console.warn("Attention! Feature flags are overridden by client setting!",c),console.warn("To clear, please logout and re-login"),Object.assign(u.features,c)),r&&Object.assign(u,r);t.a=u},"5RJJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("yC9S"),s=n("oVrE"),a=n("pjml"),u="ultra.service.courseMembership",c="courseMembership",l=function(){function e(e,t,n,r){var i=this;this.$q=e,this.$rootScope=t,this.CourseModel=n,this.CourseMembershipModel=r,this.userCourseAvailabilities={},this.msgToolAvailability={},this.fetchToolAvailabilityPromiseCache={},o.b.OnRootScope(this.$rootScope,"membership.update",(function(e,t,n,r,o,s,a,u){i.getUserCourseAvailabilities(u).then((function(){i.userCourseAvailabilities[u][a.id]=t.isAvailable}))})),o.b.OnRootScope(this.$rootScope,"deleteMembership",(function(e,t,n,r){i.getUserCourseAvailabilities(r).then((function(){i.userCourseAvailabilities[r][t.id]=!1}))})),o.b.OnRootScope(this.$rootScope,"roster.enroll.new.membership",(function(e,t,n,r){i.getUserCourseAvailabilities(n).then((function(){i.userCourseAvailabilities[n][r]=t.isAvailable}))}))}return e.prototype.getUserCourseAvailabilities=function(e){var t=this;if(this.userCourseAvailabilities[e])return this.$q.when(this.userCourseAvailabilities[e]);var n=this.$q.defer();return this.userCourseAvailabilities[e]={},this.CourseModel.$new(e).memberships.$refresh().$then((function(r){r.forEach((function(n){t.userCourseAvailabilities[e][n.userId]=n.isAvailable})),t.userCourseAvailabilities[e][s.c()]=!0,t.userCourseAvailabilities[e][s.e()]=!1,n.resolve(t.userCourseAvailabilities[e])})),n.promise},e.prototype.getMsgToolAvailability=function(e,t){var n=this;if(e){if(t||null==this.msgToolAvailability[e.id]){if(!e.isUltra()){var r=this.fetchToolAvailabilityPromiseCache[e.id];return r||(r=e.tools.$find("messages").$asPromise().then((function(t){return n.msgToolAvailability[e.id]=t.isVisible,t.isVisible}),(function(e){console.error("Fetch ToolAvailability error!")})).finally((function(){delete n.fetchToolAvailabilityPromiseCache[e.id]})),this.fetchToolAvailabilityPromiseCache[e.id]=r,r)}this.msgToolAvailability[e.id]=!0}var i=this.$q.defer();return i.resolve(this.msgToolAvailability[e.id]),i.promise}},e.prototype.isUserCourseAvailable=function(e,t){return this.userCourseAvailabilities[e][t]},e.prototype.createGuestMembership=function(e,t){return this.CourseMembershipModel.$build({userId:t.id,course:e,user:t,role:a.y.KnownCourseRoleIdentifier.Guest})},e.$inject=["$q","$rootScope",a.o.serviceName,a.v.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);i.module(u,[a.Q]).service(c,l)},"5uPl":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("0JpG"),u=n("Q/M7"),c=n("vJBG"),l=n("aHpC"),d=n("3PCF"),p="ultra.service.originalityReport",m="originalityReport",f=function(){function e(e,t){this.localize=e,this.$q=t,this.columnOriginalityAverageScoreDict={}}return e.prototype.setCourseContent=function(e,t){this.courseContent=e,this.isPrivileged=t},e.prototype.clearCourseContent=function(){this.courseContent=void 0,this.isPrivileged=void 0},e.prototype.updateReport=function(e,t,n){this.columnId=n,this.attempt=e,this.openOriginalityReport=!0,this.shouldFetchOriginality()&&(t&&(this.gradedQuestionAttempts=t.map((function(e){return i.pick(e,["questionAttempt.question.position","questionAttempt.visibleQuestionNumber"])}))),this.fetchOriginality())},e.prototype.clearReport=function(){this.gradedQuestionAttempts=void 0,this.attempt=void 0,this.originality=void 0,this.openOriginalityReport=void 0,this.columnId=void 0,this.reports=void 0,this.personalMaxScore=void 0,this.personalMaxScoreReportName=void 0,this.personalAverageScore=void 0,this.classAverageScore=void 0},e.prototype.isSafeAssignEnabled=function(e){var t;return!!(null===(t=null!=e?e:this.courseContent)||void 0===t?void 0:t.isSafeAssignEnabled())},e.prototype.retrieveOriginalityIntegration=function(e){var t,n=this,r=e||this.courseContent;return r?(this.setCourseContent(r,!0),this.$q.when(c.a.fetchDefaultOriginalityReportSubmissionService(r.courseId,null===(t=r.getAssociatedGradingColumn())||void 0===t?void 0:t.id)).then((function(e){return n.defaultOriginalityIntegrationService=e,n.portalIntegrationId=n.getOriginalityIntegrationByUniqueId(null==e?void 0:e.uniqueHandle),e}))):this.$q.resolve(void 0)},e.prototype.fetchIsOriginalityIntegrationEnabled=function(e){var t=this;return this.retrieveOriginalityIntegration(e).then((function(){return t.isOriginalityIntegrationEnabled()}))},e.prototype.fetchIsOriginalityEnabled=function(e){return this.isSafeAssignEnabled(e)?this.$q.when(!0):this.fetchIsOriginalityIntegrationEnabled(e).then((function(e){return e}))},e.prototype.isOriginalityIntegrationEnabled=function(){var e,t,n=this.defaultOriginalityIntegrationService;return!!(null===(t=null===(e=null==n?void 0:n.capabilities)||void 0===e?void 0:e.OriginalityReport)||void 0===t?void 0:t.enabled)},e.prototype.saveOriginalityConfiguration=function(e){return this.$q.when(c.a.saveOriginalityConfiguration(this.courseContent,e))},e.prototype.isOriginalityReportEnabled=function(){return this.defaultOriginalityIntegrationService&&this.defaultOriginalityIntegrationService.uniqueHandle!==d.b?this.isOriginalityIntegrationEnabled():this.isSafeAssignEnabled()},e.prototype.getCurrentOriginalityReportProviderType=function(e){return e?e.uniqueHandle===d.b?d.a.SafeAssign:d.a.Integration:d.a.None},e.prototype.getOriginalityDisplayName=function(){var e;return null===(e=this.defaultOriginalityIntegrationService)||void 0===e?void 0:e.displayName},e.prototype.isOriginalityReportProviderActive=function(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)!==d.a.None},e.prototype.isSafeAssignActiveOriginalityProvider=function(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)===d.a.SafeAssign},e.prototype.isIntegrationActiveOriginalityProvider=function(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)===d.a.Integration},e.prototype.getOriginalityReportLinkAnalyticsId=function(){var e,t=null===(e=this.defaultOriginalityIntegrationService)||void 0===e?void 0:e.uniqueHandle;return t?"course.content.originalityReport.settings."+t+".link":"course.content.originalityReport.settings.link"},e.prototype.getOriginalityReportLinkText=function(e){var t=this.defaultOriginalityIntegrationService,n=null==t?void 0:t.displayName;return n?this.isOriginalityReportEnabled()?this.localizeProviderLinkText("course.content.originalityReport.settings.providerEnabled",n):e?this.localizeProviderLinkText("course.content.originalityReport.settings.enableProvider",n):this.localizeProviderLinkText("course.content.originalityReport.settings.providerDisabled",n):this.localize.translateSync({locale:this.localize.getAppLocale(),key:"course.content.originalityReport.settings.originalityDisabled",noWrap:!0})},e.prototype.localizeProviderLinkText=function(e,t){return this.localize.translateSync({locale:this.localize.getAppLocale(),key:e,noWrap:!0,params:{originalityProvider:t},noEscape:!0})},e.prototype.canStudentViewReports=function(){return this.courseContent&&this.courseContent.canStudentViewReports()},e.prototype.isReportSectionOpen=function(){var e;return this.openOriginalityReport&&((null===(e=this.originality)||void 0===e?void 0:e.canShowReportPanel())||this.isOriginalityIntegrationEnabled())},e.prototype.shouldFetchOriginality=function(){return this.isPrivileged&&this.isSafeAssignEnabled()||!this.isPrivileged&&this.canStudentViewReports()},e.prototype.setOriginalityAverageScore=function(e,t){var n=0,r=0;e.forEach((function(e){e.originalityProcessed&&!i.isUndefined(e.originalityScore)&&(n+=1,r+=e.originalityScore)})),n&&(this.columnOriginalityAverageScoreDict[t]=r/n)},e.prototype.fetchOriginality=function(){var e=this,t=this.attempt;t.originality.$fetch().$then((function(n){e.attempt===t&&(e.originality=n,e.generateReport())}))},e.prototype.hasValidReports=function(){return this.reports&&this.reports.some((function(e){return!e.invalid}))},e.prototype.generateReport=function(){var e,t=this,n=this.originality.answerOriginalities;if(this.gradedQuestionAttempts){if(this.isPrivileged&&t.gradedQuestionAttempts.some((function(e,t){return e.questionAttempt.question.position!==t+1}))){var o=i.sortBy(this.gradedQuestionAttempts,(function(e){return e.questionAttempt.question.position})),s=[];i.map(o,"questionAttempt.visibleQuestionNumber").forEach((function(e,t){return s[e-1]=t})),n.forEach((function(e){return e.order=s[e.order-1]+1})),n.sort((function(e,t){return e.order-t.order}))}}this.reports=i.flatMap(n,(function(e){return e.attachments.map((function(t){return Object(r.__assign)(Object(r.__assign)({},t),{isQuestionAnswerContent:!0,visibleQuestionNumber:e.order})}))})),this.originality.attemptOriginality&&(e=this.reports).push.apply(e,this.originality.attemptOriginality.attachments),this.hasValidReports()&&this.calculateScore()},e.prototype.calculateScore=function(){var e=this,t=this.reports.filter((function(e){return!e.invalid})),n=0;this.personalMaxScore=t[0].score,this.personalMaxScoreReportName=t[0].name,t.forEach((function(t){t.reportLink=Object(u.c)(t.reportLink),e.personalMaxScore<t.score&&(e.personalMaxScore=t.score,e.personalMaxScoreReportName=t.name),n+=t.score})),this.personalAverageScore=Math.floor(n/t.length),i.isUndefined(this.columnOriginalityAverageScoreDict[this.columnId])||(this.classAverageScore=Math.floor(this.columnOriginalityAverageScoreDict[this.columnId]))},e.prototype.getOriginalityIntegrationByUniqueId=function(e){var t;return null===(t=c.a.getOriginalityIntegrationByUniqueId(e))||void 0===t?void 0:t.integrationId},e=Object(r.__decorate)([Object(r.__param)(0,Object(l.b)(a.serviceName)),Object(r.__param)(1,Object(l.b)("$q"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(f);o.module(p,[s.Q]).service(m,f)},"65PF":function(e,t){e.exports='<td class="table-cell"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</td>\n'},"67oV":function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-close",use:"icon-small-close-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-close"><path d="M15 1L1 15M1 1l14 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},"6BRP":function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-attention",use:"icon-small-attention-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attention"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 4v5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="12" r=".5" /></symbol>'});i.add(o);e.exports=o},"6Ksg":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("5iHu"),o=n("wHJ2"),s=n("nsO7"),a=n("0JpG"),u="ultra.directives.validate.bbmlmarkup",c={img:["id"]},l=function(){function e(e,t){var n=this;this.$q=e,this.$http=t,this.whitelist=null,this.whitelistInitializer=null,this.require="ngModel",this.restrict="A",this.initialWhitelist=function(){return null===n.whitelistInitializer&&(n.whitelistInitializer=n.$http.get("/learn/api/v1/utilities/bbml/whitelist").then((function(e){n.whitelist={};var t=(e.data[":all"]||[]).concat(c[":all"]||[]);s.forEach(e.data,(function(e,r){var i={};s.each(e.concat(t,c[r]||[]),(function(e){i[e]=e})),n.whitelist[r]=i}))}),(function(){n.whitelist=null}))),n.whitelistInitializer},this.validate=function(e){if(null===n.whitelist)return!0;if(1!==e[0].nodeType)return!0;var t=e[0].tagName.toLowerCase();if(!Object.prototype.hasOwnProperty.call(n.whitelist,t))return!1;var r=n.whitelist[t];return s.every(e[0].attributes,(function(e){return Object.prototype.hasOwnProperty.call(r,e.name.toLowerCase())}))&&s.every(e.children(),(function(e){return n.validate(i(e))}))},this.getValidator=function(e,t,r,o){return function(e){var r=n.$q.defer();return n.initialWhitelist().then((function(){s.every(t.children(),(function(e){return n.validate(i(e))}))?r.resolve():r.reject()})),r.promise}},this.link=function(e,t,r,i){i.$asyncValidators.bbmlMarkup=n.getValidator(e,t,r,i)}}return e.$inject=["$q","$http"],e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(l);o.module(u,[a.moduleName]).directive("bbValidateBbmlMarkup",["$injector",function(e){return e.instantiate(l)}])},"6fZB":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return new Promise((function(t,n){e.then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}},"6jv3":function(e,t){e.exports='<div class="save-buttons">\n  <footer class="panel-footer" ng-if="!(hideCancel() || hideSave() || hideDelete())">\n    \x3c!--footer tag is removed, and its children appended to parent if the directive is marked as \'isInline\'--\x3e\n    <div ng-class="{\'inline\':isInline(), \'panel-footer-right\':!isInline()}" class="buttons-2 equal-buttons">\n      <button ng-if="!(hideDelete() != null ? hideDelete() : true)"\n              class="button js-delete js-primary-button non-first-focus" ng-class="{\'small clear icon\':isInline}"\n              bb-confirmation-needed="{{ deleteConfirmationResourceType }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isDeleteDisabled()"\n              ng-click="saveButtons.deleteAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices()}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.delete.button">\n                <span ng-if="!isInline()">{{saveButtons.deleteButtonStatus}}</span>\n                <span ng-if="isInline()"><i class="icon-trash"></i></span>\n      </button>\n      <button ng-if="!hideCancel()"\n              class="button button--secondary js-cancel js-secondary-button non-first-focus"\n              bb-confirmation-needed="{{ saveButtons.isCancelNowADelete() ? deleteConfirmationResourceType : \'\' }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isCancelDisabled()"\n              ng-click="saveButtons.cancelAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.cancel.button">{{saveButtons.cancelButtonStatus}}</button>\n      <button ng-if="!hideSave()"\n              class="button js-save js-primary-button non-first-focus"\n              bb-confirmation-needed="{{ saveConfirmationResourceType }}"\n              show-type="{{mustShowSaveConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isSaveDisabled()"\n              ng-click="saveButtons.saveAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="submit"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.save.button">{{saveButtons.saveButtonStatus}}</button>\n    </div>\n  </footer>\n</div>'},"6vR2":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("nsO7"),i=n("JfV0");function o(e){var t=new Set;return JSON.parse(JSON.stringify(e,(function(e,n){if("object"!=typeof n||!t.has(n))return"object"!=typeof n?n:(t.add(n),n)})))}function s(e){var t=function(e,n){return Object(r.isPlainObject)(e)?Object(r.mapValues)(e,(function(e){return t(e,n)})):n(e)};return Object(r.mapValues)(e,(function(e){return t(e,i.deserializeISODateString)}))}},"6ynb":function(e,t,n){"use strict";var r=n("D57K"),i=function(e){function t(n){var r=this,i="string"==typeof n?n:"";n&&n.message&&(i=n.message),(r=e.call(this,i)||this).name="Exception",r.message=i,r.stack=(new Error).stack;var o=Error;return n&&n.stack?r.stack=n.stack:o.captureStackTrace&&o.captureStackTrace(r,t),r}return Object(r.__extends)(t,e),t}(Error);t.a=i},"7+Tq":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u}));var r=n("wHJ2"),i=n("0+Qs"),o=n("XGja"),s=n("+4Px"),a="ultra.services.dropdownInit",u="dropdownInitService";r.module(a,[i.a]).factory(u,[i.b,function(t){var n=function(e,t){t.focus()};return function(r,i){r.find("[data-dropdown]").each((function(r,a){var u=e(a),c=u.attr("data-dropdown"),l=e("#"+c);if(l.length){u.attr("aria-haspopup","true"),l.attr("role")||(l.attr("role","menu"),l.find("li a").each((function(){e(this).attr("role")||e(this).attr("role","menuitem")}))),l.off("keydown.fndtn.dropdown"),l.on("keydown.fndtn.dropdown",(function(e){if(l.hasClass("open")){var t=!0,r=l.find("li a:focus").closest("li");0===r.length&&(r=l.find(":focus"),t=!1);var i=void 0;if(e.keyCode===s.g&&!l.hasClass("bb-foundation-dropdown-close-esc-override")||e.keyCode===s.u&&!l.hasClass("bb-foundation-dropdown-tab-override"))u.click(),e.keyCode===s.g&&(n(0,u),e.stopPropagation());else if(e.keyCode===s.d||e.keyCode===s.v||e.keyCode===s.u)return t?(e.keyCode===s.d||e.keyCode===s.u&&!e.shiftKey?(i=r.nextAll().not(".scroll-control").find(":tabbable").first().closest("li"))&&0!==i.length||(i=l.find(":tabbable").closest("li").not(".scroll-control").first()):(e.keyCode===s.v||e.keyCode===s.u&&e.shiftKey)&&((i=r.prevAll().not(".scroll-control").find(":tabbable").last().closest("li"))&&0!==i.length||(i=l.find(":tabbable").closest("li").not(".scroll-control").last())),i.length>0&&i.find(":tabbable").focus()):e.keyCode===s.d||e.keyCode===s.u&&!e.shiftKey?o.b(l,r):(e.keyCode===s.v||e.keyCode===s.u&&e.shiftKey)&&o.c(l,r),!1}}));var d=!0;l.off("keyup.fndtn.dropdown"),l.on("keyup.fndtn.dropdown",(function(t){if((t.keyCode===s.f||t.keyCode===s.t)&&!l.hasClass("bb-foundation-dropdown-enter-override")){if(!d)return d=!0,!1;if(e(t.target).closest("input[type=checkbox]").length)return!0;if(e(t.target).closest("button").length)return!0;if("-1"===e(t.target).attr("tabindex"))return!0;if(l.hasClass("open")){var r=l.find("li a:focus").closest("li");return r.length>0?r.find("a").click():u.click(),n(0,u),!1}}})),u.off("keydown.fndtn.dropdown"),u.on("keydown.fndtn.dropdown",(function(e){if((e.keyCode===s.f||e.keyCode===s.t)&&!l.hasClass("open")){u.click(),d=!1;var t=l.find("li a:focus").closest("li");return 0===t.length&&(t=l.find("li").not(".scroll-control").find(":tabbable").first().closest("li")),t.find("a:visible").length?t.find("a:visible").focus():l.find(":tabbable").first().focus(),!1}})),u.off("click.fndtn.dropdown"),u.on("click.fndtn.dropdown",(function(e){var n=l.find("li a:focus").closest("li");0===n.length&&(n=l.find("li").not(".scroll-control").find(":tabbable").first().closest("li"));var r=t((function(){"false"===l.attr("aria-hidden")&&(n.find("a:visible").length?n.find("a:visible").focus():l.find("*:focus").length||l.find(":tabbable").first().focus(),t.cancel(r))}),i,50,100,!1)}))}}))}}])}).call(this,n("5iHu"))},"7/0s":function(e,t){e.exports='<a\n  href="javascript:void(0);"\n  class="skip-link"\n  bb-focus-next="{{ bbSkipLinkFocusNext }}"\n  bb-translate\n  bb-load-bundle="components/directives/skip-link"\n  analytics-id="components.directives.skip-link.message">\n  components.directives.skip-link.message\n</a>\n'},"7/CN":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return h}));var r,i=n("5iHu"),o=n("lUN/"),s=".bb-offcanvas-panel, #main-content-inner",a=".bb-close",u=".reveal-modal-bg, .wrs_modal_overlay";function c(e){for(var t=i(e),n=0;t.length;){if(t.is(a))n++;else if(t.is(s)){if(n<=0)return t[0];n--}t=t.parent()}return document.body}function l(){var e=i(u);return e&&e.length}function d(e){var t=(e||"0").split(" ");return{top:parseInt(t[0],10),right:parseInt(t[1]||t[0],10),bottom:parseInt(t[2]||t[0],10),left:parseInt(t[3]||t[1]||t[0],10)}}function p(e){var t=e.view,n=e.el;e.viewHeight=null==e.viewHeight?t.get(0).clientHeight:e.viewHeight,e.viewWidth=null==e.viewWidth?t.get(0).clientWidth:e.viewWidth,e.height=null==e.height?n.height():e.height,e.width=null==e.width?n.width():e.width;var r=t.offset(),i=n.offset(),o=t.scrollTop(),s=t.scrollLeft(),a=i.top-r.top-e.padding.top,u=i.left-r.left-e.padding.left,c=i.top+e.height+e.padding.bottom-r.top-e.viewHeight,l=i.left+e.width+e.padding.right-r.left-e.viewWidth;e.height<=e.viewHeight?a<0?t.scrollTop(o+a):c>0&&t.scrollTop(o+c):a>0?t.scrollTop(o+a):c<0&&t.scrollTop(o+c),e.width<=e.viewWidth?u<0?t.scrollLeft(s+u):l>0&&t.scrollLeft(s+l):u>0?t.scrollLeft(s+u):l<0&&t.scrollLeft(s+l)}function m(e){e.attr("aria-hidden","true"),function(e){o.a(),e.find(":tabbable").each((function(){var e=i(this);e.addClass("bb-element-inaccessible"),e.data("bb-element-inaccessible",{tabindex:e.attr("tabindex")}),e.attr("tabindex","-1")}))}(e)}function f(e){e.removeAttr("aria-hidden"),e.find(".bb-element-inaccessible").each((function(){var e=i(this);e.removeClass("bb-element-inaccessible"),e.data("bb-element-inaccessible")&&(null!=e.data("bb-element-inaccessible").tabindex?e.attr("tabindex",e.data("bb-element-inaccessible").tabindex):e.removeAttr("tabindex"))}))}!function(e){e.LeftToRight="ltr",e.RightToLeft="rtl"}(r||(r={}));var h=function(){function e(){var e=this;this._rtlCSSLoadedPromise=new Promise((function(t){e._rtlCSSLoadedResolve=t}))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getCSSLoadedPromise=function(){return this._rtlCSSLoadedPromise},e.prototype.initialize=function(e){var t=this,n=document.getElementsByTagName("html")[0],o=[];if(n.hasAttribute("has-applied-locale-text-direction"))this._rtlCSSLoadedResolve();else{if(n.setAttribute("dir",e),n.setAttribute("has-applied-locale-text-direction",""),e===r.RightToLeft){for(var s=Array.from(document.getElementsByClassName("initial-css-link")),a=function(e){var t=i(s[e]),n=t.attr("href");t.attr("href","");var r=i(t).clone();r.attr("href",n.replace(".css",".rtl.css")),t.removeClass("initial-css-link"),r.appendTo("head"),o.push(new Promise((function(e){r[0].onload=function(){return e()}})))},u=0;u<s.length;u++)a(u);Promise.all(o).then((function(){t._rtlCSSLoadedResolve()}))}else this._rtlCSSLoadedResolve();var c=new CustomEvent("initializePageDirection",{detail:{isRtl:e===r.RightToLeft}});document.dispatchEvent(c)}},e}().getInstance()},"7CA4":function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NothingToGrade=new t("NOTHING_TO_GRADE"),t.NeedsGrading=new t("NEEDS_GRADING"),t.NeedsPosting=new t("NEEDS_POSTING"),t.AllPosted=new t("ALL_POSTED"),t.AllGraded=new t("ALL_GRADED"),t.Restricted=new t("RESTRICTED"),t}(n.n(i).a);t.a=o},"7QJo":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("wHJ2"),i=n("0JpG"),o=n("pjml"),s=n("TnpK"),a=n("Qbdf"),u=n("X455"),c=n("OTLg"),l=n("nmzr"),d="ultra.course.roster.router";r.module(d,[i.moduleName,s.b,a.b,u.a]).config([s.c,a.c,u.b,function(e,t,r){var s;e.peekState("roster",{url:"/roster",resolve:(s={},s[a.d]=t.resolve,s[u.c]=r.resolve,s.translations=[i.serviceName,function(e){return e.loadBundle("features/course/roster/course-roster")}],s),peekStates:["edit-enrollment","enroll-users",l.CourseRoutes.COURSE_MESSAGE,"invite",l.CourseRoutes.ACCOMMODATION],panelClass:"full",peekViewName:"account-update-base@",require:function(){return Promise.all([n.e(1),n.e(74),n.e(596)]).then(n.bind(null,"DjKT"))},pageTitle:"course.roster.rosterName"}).peekState("edit-enrollment",{url:"/edit/:membershipId",require:function(){return Promise.all([n.e(74),n.e(72),n.e(666)]).then(n.bind(null,"VZ54"))}}).peekState("enroll-users",{url:"/enroll",require:function(){return Promise.all([n.e(74),n.e(653)]).then(n.bind(null,"30P8"))},pageTitle:"course.roster.enroll.enrollPeople"}).peekState(l.CourseRoutes.COURSE_MESSAGE,{url:"/message?courseId?recipientId",require:function(){return Promise.all([n.e(0),n.e(30),n.e(33),n.e(50)]).then(n.bind(null,"BrlV"))}}).peekState("invite",{url:"/invite",require:function(){return n.e(638).then(n.bind(null,"IgRM"))},pageTitle:"course.roster.invite.inviteStudents"}).peekState(l.CourseRoutes.ACCOMMODATION,{url:"/exception/:membershipId",require:function(){return n.e(634).then(n.bind(null,"0vas"))},pageTitle:"course.roster.dueDateException",resolve:{currentMembership:["$q","$stateParams",o.o.serviceName,function(e,t,n){var r={fields:c.b.join(",")};return n.$new(t.courseId).memberships.$find(t.membershipId,r).$asPromise()}]}})}])},"7n5u":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("EcEN"),o=n("td+C"),s=n("5LAh"),a=n("gSji"),u="course.outline.details",c={attributes:a.eb,classNameMappings:new Map(Object.entries({"uef--course-details--element":"element-details","uef--course-details--image":"element-image","uef--course-details--name":"name","uef--course-details--content":"content","uef--course-details--link":"blue-link","uef--course-details--container":"element-card-container"}))},l={attributes:Object(r.__spreadArrays)(a.eb,["disabled"]),classNameMappings:new Map(Object.entries({"uef--button":"button button--primary","uef--button--secondary":"button button--secondary","uef--button--course-details":"element-card","uef--button--disabled":"disabled"})),classNameDefault:"uef--button--classless"},d=function(){function e(e,t){var n=this;this.registrations=new Map,this.listeners=new Set,this.onIntegrationRegistration=function(e,t){var r=n.validateRegistrationRequest(e);r.status===a.h.Success?(n.registrations.set(r.registrationId,{integrationId:t.id,registrationId:r.registrationId,registrationName:r.registrationName}),n.notifyListeners(r.registrationId),n.integrationService.sendMessage(r,t)):n.integrationService.sendMessage(r,t)},this.integrationService=e,this.componentManager=t}return e.prototype.init=function(){this.integrationService.addIntegrationMessageType(a.e,this.onIntegrationRegistration),this.initializeWhitelist()},e.prototype.onIntegrationAdded=function(e){var t=this;return this.listeners.add(e),function(){t.removeIntegrationAdded(e)}},e.prototype.removeIntegrationAdded=function(e){this.listeners.delete(e)},e.prototype.getRegisteredRecords=function(){return Array.from(this.registrations.values()).map((function(e){return{selectorData:{},registrationRecord:e}}))},e.prototype.initializeWhitelist=function(){this.componentManager.setCustomWhiteList(u,"div",c),this.componentManager.setCustomWhiteList(u,"button",l)},e.prototype.notifyListeners=function(e){var t=this;this.listeners.forEach((function(n){try{n(t.registrations.get(e))}catch(e){console.error(e)}}))},e.prototype.hasRegistrationName=function(e){return Array.from(this.registrations.values()).some((function(t){return t.registrationName===e}))},e.prototype.validateRegistrationRequest=function(e){return this.hasRegistrationName(e.registrationName)?{type:a.e,registrationName:e.registrationName,error:a.g.ExistingRegistration,status:a.h.Failure}:{type:a.e,registrationName:e.registrationName,registrationId:Object(i.v4)(),status:a.h.Success}},e}();t.b=new d(o.a,s.b)},"7oqQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("JzsJ");var r=n("wHJ2"),i=n("Sa5G"),o=n("0JpG"),s=n("TnpK"),a="ultra.course.question-analysis.routes",u=function(){return{translations:[o.serviceName,function(e){return e.loadBundle("features/course/question-analysis/question-analysis")}]}};r.module(a,[s.b]).config([s.c,function(e){e.peekState("question-analysis",{url:"?qaContentId",abstract:!0,resolve:u(),courseEntitlement:[i.u.ViewGrades]}).peekState("question-analysis.report",{panelClass:"full",url:"/report",require:function(){return Promise.all([n.e(0),n.e(4),n.e(8),n.e(67),n.e(703)]).then(n.bind(null,"wD7k"))},pageTitle:"course.question-analysis.report.pageTitle",peekViewName:"question-analysis-report",peekStates:["gradebook-item","question-analysis-report"]}),e.peekState("question-analysis-report",{url:"?difficultyFilter&discriminationFilter",abstract:!0,resolve:u(),courseEntitlement:[i.u.ViewGrades]}).peekState("question-analysis-report.question-details",{panelClass:"full",url:"/questionDetails/:questionId",require:function(){return Promise.all([n.e(0),n.e(4),n.e(8),n.e(67),n.e(701)]).then(n.bind(null,"jvDI"))},pageTitle:"course.question-analysis.question-details.pageTitle",peekViewName:"question-analysis-question-details",peekStates:["gradebook-item"]})}])},"7sec":function(e,t,n){},"817J":function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=n.n(i),s=n("Y3OE"),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.handle=t,r.contentHandler=n,r}return Object(r.__extends)(t,e),t.parseByContentHandler=function(e){switch(e){case t.Assignment.contentHandler:return t.Assignment;case t.Test.contentHandler:return t.Test;case t.UltraAssignment.contentHandler:return t.UltraAssignment;case t.Survey.contentHandler:return t.Survey}},t.Test=new t("Test",s.a.TestLink.toString()),t.Quiz=new t("Quiz"),t.Survey=new t("Survey",s.a.SurveyLink.toString()),t.Assignment=new t("Assignment",s.a.ClassicAssignment.toString()),t.UltraAssignment=new t("UltraAssignment",s.a.UltraAssignment.toString()),t.Pool=new t("Pool"),t}(o.a);t.a=a},"8HGT":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("wHJ2"),i=n("nmzr"),o=n("Sa5G"),s=n("w9Zy"),a=n("Fvsw"),u=n("vdfi"),c=n("JXhc"),l=n("hlSw"),d=n("0JpG"),p=n("pjml"),m=n("TnpK"),f=n("Qbdf"),h="ultra.course.grades.router";r.module(h,[d.moduleName,m.b,u.c,c.c,f.b]).config([m.c,f.c,function(e,t){var r,h,g,v,b,y,S,C;e.peekState("gradebook-item",{abstract:!0,require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(547)]).then(n.bind(null,"AlUX"))},resolve:(r={translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/gradebook-item/gradebook-item")}]},r[f.d]=t.resolve,r.currentColumn=l.a.currentColumn,r.currentContent=l.a.currentContent,r)}).peekState("gradebook-item.assignment-create",{panelClass:"full",resolve:{translations:["$q",d.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])}]},onEnter:[s.e,m.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],url:"/assignment?id&parentId&positionBefore&positionAfter&gradeitemView",views:{"gradebook-item-details@":{require:[function(){return Promise.all([n.e(17),n.e(135)]).then(n.bind(null,"eePf"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}]},"gradebook-item-students@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(38)]).then(n.bind(null,"hmMQ"))}}},peekStates:["assignment-grading","assessment-settings","conversations",i.Routes.Course.COURSE_MESSAGE,"course-group","editAssignmentFileAttachment",u.a,"rubric","rubric-list","rubric-evaluation","view-exceptions"],peekViewName:"gradebook-item-panel@",pageTitle:"course.content.assignmentCreate"}).peekState("gradebook-item.assignment",{panelClass:"full",resolve:{translations:["$q",d.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])}]},onEnter:[s.e,m.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],url:"/assignment/:contentId?courseId&gradeitemView",views:{"gradebook-item-details@":{require:[function(){return Promise.all([n.e(17),n.e(135)]).then(n.bind(null,"eePf"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}]},"gradebook-item-students@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(38)]).then(n.bind(null,"hmMQ"))}}},peekStates:["assignment-grading","assessment-settings","conversations",i.Routes.Course.COURSE_MESSAGE,"course-group","editAssignmentFileAttachment",u.a,"rubric","rubric-list","rubric-evaluation","view-exceptions"],params:{},peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assignment.edit"}).peekState("editAssignmentFileAttachment",{require:function(){return n.e(136).then(n.bind(null,"TFHU"))},resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/content/media-widget/media-widget")}]},url:"/assignment/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&alternativeText&mediaType&bbmlEditorId"}).peekState(i.Routes.Course.COURSE_GRADES_MULTIPLE_ATTEMPT,{panelClass:"peek",resolve:(h={translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},h[f.d]=t.resolve,h.currentContent=l.a.nullContent,h.currentColumn=l.a.currentColumn,h),url:"/multiple-attempt-grading?columnId&gradeId&userId",params:{hasException:!1},require:[function(){return Promise.all([n.e(1),n.e(15),n.e(665)]).then(n.bind(null,"bhG9"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(543)]).then(n.bind(null,"0dEv"))}],pageTitle:"course.grades.multiple-attempt-grading.title",peekStates:[i.Routes.Grade.SUBMISSION_GRADING]}).peekState(i.Routes.Grade.RECONCILE_GRADE,{panelClass:"full",resolve:(g={translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},g[f.d]=t.resolve,g.currentContent=l.a.nullContent,g.currentColumn=l.a.currentColumn,g),url:"/reconcile-grade?columnId&gradeId&userId",require:[function(){return n.e(676).then(n.bind(null,"NNJe"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(545)]).then(n.bind(null,"e5ML"))}],pageTitle:"course.grades.reconcile-grade.title",peekStates:[i.Routes.Grade.SUBMISSION_GRADING],peekViewName:"reconcile-grade-peek"}).peekState("per-assessment-settings",{panelClass:"peek",courseEntitlement:o.u.ModifyGradebook,resolve:(v={translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}],currentContent:l.a.currentContent,currentColumn:l.a.currentColumn},v[f.d]=t.resolve,v),url:"/per-assessment-settings?userId&columnId",require:[function(){return Promise.all([n.e(51),n.e(699)]).then(n.bind(null,"1p7s"))},function(){return Promise.all([n.e(3),n.e(2),n.e(7),n.e(25),n.e(51),n.e(121)]).then(n.bind(null,"Wn37"))}],pageTitle:"course.grades.per-assessment-settings.title"}).peekState("per-assessment-group-settings",{panelClass:"peek",courseEntitlement:o.u.ModifyGradebook,resolve:(b={translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}],currentContent:l.a.currentContent,currentColumn:l.a.currentColumn},b[f.d]=t.resolve,b),url:"/per-assessment-group-settings?groupId&columnId",require:[function(){return Promise.all([n.e(51),n.e(698)]).then(n.bind(null,"bMue"))},function(){return Promise.all([n.e(3),n.e(2),n.e(7),n.e(25),n.e(51),n.e(121)]).then(n.bind(null,"Wn37"))}],pageTitle:"course.grades.per-assessment-settings.title"}).peekState("originality-report",{panelClass:"peek",url:"/originality-report",require:function(){return n.e(675).then(n.bind(null,"K7I1"))},peekViewName:"originality-report-peek"}).peekState(i.Routes.Grade.SUBMISSION_GRADING,{panelClass:"full",resolve:{translations:["$q",d.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])}],currentColumn:l.a.currentColumn,currentContent:l.a.currentContent},url:"/submission-grading?columnId&gradeId&userId&attemptId&contentId&membershipId",onExit:["currentColumn",s.e,m.d,function(e,t,n){var r=n.current.name.match(".peek.reconcile-grade");(e.isMultipleAttempts()&&!r||n.prevParams.hasException)&&(n.isPeekPanelOpen()&&t.shrinkTopPanel(),n.next.name.indexOf(i.Routes.Grade.SUBMISSION_GRADING)>=0||n.goPeekState("multiple-attempt-grading",{columnId:n.prevParams.columnId,gradeId:n.prevParams.gradeId,userId:n.prevParams.userId,membershipId:n.prevParams.membershipId,hasException:n.prevParams.hasException}))}],onEnter:[s.e,m.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],reloadOnSearch:!1,require:[function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(548)]).then(n.bind(null,"6S3j"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(10),n.e(1),n.e(2),n.e(37)]).then(n.bind(null,"fVgT"))}],pageTitle:"course.grades.submission-grading.title",params:{commentPanelInitiallyOpen:!1,hasException:!1},peekViewName:"submission-grading-peek",peekStates:[i.Routes.Assessment.ASSESSMENT_SETTINGS,"per-assessment-settings","assessment-submission-feedback","originality-report","content-market"]}).peekState(i.Routes.Grade.SUBMISSION_GRADING+".assessment-submission-feedback-tab",{url:"/inline-feedback?attemptId&userId&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/feedback-authoring/feedback-authoring")}]},views:{"slider-tab-navigation-view@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(39)]).then(n.bind(null,"15AK"))}}},peekStates:["per-assessment-settings","lti"]}).peekState(i.Routes.Grade.SUBMISSION_GRADING+".inline-rubric",{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{"slider-tab-navigation-view@":{require:function(){return Promise.all([n.e(11),n.e(14),n.e(62)]).then(n.bind(null,"5N8L"))}}},peekStates:["per-assessment-settings"]}).peekState(i.Routes.Grade.SUBMISSION_GRADING+".originality-tab",{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{"slider-tab-navigation-view@":{require:function(){return n.e(69).then(n.bind(null,"djtz"))}}},peekStates:["per-assessment-settings"]}).peekState(i.Routes.Grade.GROUP_SUBMISSION_GRADING,{panelClass:"full",resolve:{translations:["$q",d.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])}],currentColumn:l.a.currentColumn,currentContent:l.a.currentContent},url:"/group-submission-grading?columnId&gradeId&groupId&contentId&attemptId",reloadOnSearch:!1,require:[function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(551)]).then(n.bind(null,"rNv7"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(10),n.e(1),n.e(2),n.e(37)]).then(n.bind(null,"fVgT"))}],pageTitle:"course.grades.submission-grading.title",peekViewName:"submission-grading-peek",peekStates:[i.Routes.Assessment.ASSESSMENT_SETTINGS,"per-assessment-group-settings","originality-report","content-market"]}).peekState(i.Routes.Grade.GROUP_SUBMISSION_GRADING+".assessment-submission-feedback-tab",{url:"/inline-feedback?attemptId&userId&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/feedback-authoring/feedback-authoring")}]},views:{"slider-tab-navigation-view@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(39)]).then(n.bind(null,"15AK"))}}},peekStates:["per-assessment-group-settings","lti"]}).peekState(i.Routes.Grade.GROUP_SUBMISSION_GRADING+".inline-rubric",{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{"slider-tab-navigation-view@":{require:function(){return Promise.all([n.e(11),n.e(14),n.e(62)]).then(n.bind(null,"5N8L"))}}},peekStates:["per-assessment-group-settings"]}).peekState(i.Routes.Grade.GROUP_SUBMISSION_GRADING+".originality-tab",{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{"slider-tab-navigation-view@":{require:function(){return n.e(69).then(n.bind(null,"djtz"))}}},peekStates:["per-assessment-group-settings"]}).peekState("assignment-grading",{panelClass:"full",resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/submissions-grading")}],currentColumn:["currentColumn",p.o.serviceName,m.d,function(e,t,n){if(null!=e)return e.$asPromise();var r=n.nextParams.columnId,i=n.nextParams.courseId;return t.$find(i).gradebook.columns.$find(r,{expand:"associatedRubrics,externalGrade"}).$asPromise()}]},url:"/grading?columnId&gradeId&groupId",reloadOnSearch:!1,require:[function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(549)]).then(n.bind(null,"XGKH"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(10),n.e(1),n.e(2),n.e(37)]).then(n.bind(null,"fVgT"))}],pageTitle:"course.grades.submissions-grading.title",peekViewName:"assignment-grading-peek",peekStates:["rubric-evaluation"]}).peekState("gradebook-item.offline",{panelClass:"full",resolve:{translations:["$q",d.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/course-grades"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])}]},url:"/offline-grades/:columnId?courseId&gradeitemView",views:{"gradebook-item-students@":{require:function(){return Promise.all([n.e(16),n.e(46),n.e(58)]).then(n.bind(null,"qijm"))}}},pageTitle:"course.grades.instructorHeaderLabel"}).peekState("gradebook-item.calculation",{panelClass:"full",resolve:{translations:["$q",d.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/gradebook-item/calculation"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])}]},url:"/calculation/:columnId?courseId&gradeitemView&isOverallGrade&positionBefore&positionAfter",params:{columnId:p.F.CREATE_COLUMN_ID},views:{"gradebook-item-details@":{require:function(){return Promise.all([n.e(122),n.e(636)]).then(n.bind(null,"aUnP"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(16),n.e(46),n.e(58)]).then(n.bind(null,"qijm"))}}},courseEntitlement:o.u.ViewGradebookMetaData,pageTitle:"course.grades.gradebook-item.title.calculation"}).peekState("gradebook-item.assessment",{panelClass:"full",courseEntitlement:[o.j.ViewAssessment,o.u.ViewAttempts],resolve:{translations:["$q",d.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])}]},onEnter:[s.e,m.d,"currentColumn",a.b,function(e,t,n,r){r.column=n,t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",a.b,function(e,t){e.$broadcast("deadline-refresh"),t.column=null}],url:"/assessment/:assessmentType/{contentId:_[0-9]+_1|create}?courseId&gradeitemView&parentId&positionBefore&positionAfter&gradebookCategoryId",params:{contentId:p.r.CREATE_CONTENT_ID,isCreateState:!1},views:{"gradebook-item-details@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(110)]).then(n.bind(null,"EPkw"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(38)]).then(n.bind(null,"hmMQ"))}}},peekStates:[i.Routes.Grade.CREATE_OFFLINE_ATTEMPT,"assessment-settings","question-analysis",i.Routes.Grade.RECONCILE_GRADE,"multiple-attempt-grading",i.Routes.Grade.SUBMISSION_GRADING,"group-submission-grading","course-group","conditional-release",u.a,c.a,"conversations",i.Routes.Course.COURSE_MESSAGE,"edit-file-settings","rubric","rubric-list","rubric-evaluation","view-exceptions","content-market","lti","proctoring-lti-tool","per-assessment-settings","per-assessment-group-settings","grades-bulk-download"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assessment"}).peekState("grade-item",{abstract:!0,url:"/item"}).peekState("grade-item.create",{url:"/create?positionBefore&positionAfter",resolve:{translations:["$q",d.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/course-grades")])}]},require:function(){return Promise.all([n.e(3),n.e(124)]).then(n.bind(null,"kneA"))},pageTitle:"course.grades.gradeItem.addItem"}).peekState("grade-item.edit",{url:"/edit/:id",resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},require:function(){return Promise.all([n.e(3),n.e(124)]).then(n.bind(null,"kneA"))},pageTitle:"course.grades.gradeItem.editItem"}).peekState("gradebook-item.overall-grade",{panelClass:"full",resolve:{translations:["$q",d.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/overall-grade"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])}]},onEnter:[s.e,m.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],url:"/overallGrade?columnId&gradeitemView",views:{"gradebook-item-details@":{require:function(){return Promise.all([n.e(122),n.e(562)]).then(n.bind(null,"FOdA"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(16),n.e(46),n.e(58)]).then(n.bind(null,"qijm"))}}},peekStates:["overall-grade-settings"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.overallGrade.pageTitle"}).peekState("overall-grade-settings",{url:"/overallGradeSettings",resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/overall-grade")}]},panelClass:"peek",require:function(){return n.e(637).then(n.bind(null,"CW69"))},pageTitle:"course.grades.overallGrade.settings.pageTitle"}).peekState("overall-grade-student",{url:"/overallGradeStudent?courseId&courseName",resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/overall-grade")}]},panelClass:"peek",require:function(){return n.e(652).then(n.bind(null,"Fn0y"))},pageTitle:"course.grades.overallGrade.pageTitle"}).peekState("grade-download-setting",{resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/grades-download-settings/grades-download-settings")}]},url:"/grade-download-setting",require:function(){return n.e(651).then(n.bind(null,"+xg7"))},pageTitle:"course.grades.settings.title",peekViewName:"grade-download-setting-peek",courseEntitlement:o.u.ExportGradebookData,peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-upload-setting",{resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/grades-upload-settings/grades-upload-settings")}],contentCollectionAvailability:[p.wb.serviceName,function(e){return e.$new("bbcms").$resolve().$asPromise()}]},url:"/grade-upload-setting",require:function(){return n.e(604).then(n.bind(null,"nrqE"))},pageTitle:"course.grades.settings.title",peekViewName:"grade-upload-setting-peek",courseEntitlement:o.u.ModifyGradebook,peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-setting",{resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},url:"/grade-settings",require:function(){return Promise.all([n.e(1),n.e(127),n.e(560)]).then(n.bind(null,"NsLW"))},pageTitle:"course.grades.settings.title",peekViewName:"grade-setting-peek",peekStates:["rubric",i.Routes.Telemetry.INSTRUCTOR_CLASS],allowChildPeekStates:!0}).peekState(i.Routes.Grade.GRADE_AND_FEEDBACK,{resolve:(y={translations:[d.serviceName,function(e){return e.loadBundle("features/course/grades/grade-and-feedback")}]},y[f.d]=t.resolve,y.currentColumn=[f.d,m.d,function(e,t){var n=t.nextParams.columnId;return e.gradebook.columns.$find(n).$asPromise()}],y),url:"/grade-and-feedback?columnId?userId?courseId",require:function(){return Promise.all([n.e(1),n.e(2),n.e(7),n.e(15),n.e(36),n.e(46),n.e(581)]).then(n.bind(null,"SZKj"))},pageTitle:"course.grades.grade-and-feedback.title"}).peekState("course-group",{panelClass:"full",url:"/group?groupCourseId&groupContentId&groupColumnId",resolve:{translations:[d.serviceName,function(e){return e.loadBundle("features/course/content/group/course-group")}]},courseEntitlement:o.v.ViewGroupsAsAdmin,require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(542)]).then(n.bind(null,"OZRj"))},pageTitle:"course.content.courseGroup.title",peekStates:[i.Routes.Course.COURSE_MESSAGE],peekViewName:"group-message-peek"}).peekState("rubric-list",{url:"/rubricList?gradeColumnId",resolve:(S={translations:[d.serviceName,function(e){return e.loadBundle("features/course/content/assignment/rubric-list")}]},S[f.d]=t.resolve,S.currentContent=l.a.currentContent,S),panelClass:"peek",require:function(){return Promise.all([n.e(2),n.e(7),n.e(580)]).then(n.bind(null,"WtEJ"))},pageTitle:"course.content.assignmentSettings.rubricList.title",peekViewName:"rubric-list-peek",peekStates:["rubric"],allowChildPeekStates:!0}).peekState("view-exceptions",{panelClass:"peek",pageTitle:"course.content.exceptions.peekPanel.title",url:"/view-exceptions",require:function(){return n.e(664).then(n.bind(null,"MBGk"))},resolve:(C={},C[f.d]=t.resolve,C.currentContent=l.a.currentContent,C),allowChildPeekStates:!0,peekStates:["roster"],peekViewName:"exceptions-peek"}).peekState("grades-bulk-download",{url:"/grades-bulk-download?columnId",require:[function(){return n.e(718).then(n.bind(null,"sI1N"))}],pageTitle:"course.grades.grades-bulk-download.pageTitle",panelClass:"full"}).peekState(i.Routes.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,{url:"/individual-grades?userId&membershipId",require:[function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(7),n.e(16),n.e(45),n.e(60),n.e(563)]).then(n.bind(null,"HPfQ"))}],courseEntitlement:"course.gradebook-metadata.VIEW",peekStates:[i.Routes.Course.ACCOMMODATION,"assignment","assessment","gradebook-item","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview","multiple-attempt-grading","assignment-grading",i.Routes.Grade.SUBMISSION_GRADING,"group-submission-grading","grade-item","grade-setting","grade-download-setting","grade-upload-setting",i.Routes.Grade.GRADE_AND_FEEDBACK,i.Routes.Grade.CREATE_OFFLINE_ATTEMPT,"conversion-analysis","content-manage","lti","discussion","submission-list","rubric","overall-grade","overall-grade-student","attendance","attendance-student-records","attendance-student-view","question-analysis",i.Routes.Grade.RECONCILE_GRADE,"grades-bulk-download",i.Routes.Journal.JOURNAL_PARTICIPATION_DETAIL],panelClass:"full",pageTitle:"course.grades.instructorHeaderLabel"})}])},"8W6D":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NONE=new t("none"),t.CREATE=new t("create"),t.EDIT=new t("edit"),t.COPY=new t("copy"),t}(n.n(i).a)},"8jry":function(e,t){e.exports='<bb-modal class="notification js-disallowed-file-type"\n          modal-title-key="components.directives.fileUpload.disallowedFileTypeTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowedFileTypeFull</bb-translate>\n      <a href="{{::fileUpload.getMoreSupportURL()}}" target="_blank" rel="noopener noreferrer" analytics-id="components.directives.fileUpload.moreSupportedFiles"><bb-translate>components.directives.fileUpload.moreSupportedFiles</bb-translate></a>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.validFiles.length > 0">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadValidFiles.plural">\n          <bb-translate translate-values="{count:fileUpload.validFiles.length}">components.directives.fileUpload.uploadValidFiles.plural</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.forceReselectDisallowedFiles && fileUpload.forceReselectDisallowedFiles()">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModalAndChooseFiles()" analytics-id="components.directives.fileUpload.selectAnotherFile">\n          <bb-translate>components.directives.fileUpload.selectAnotherFile</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},"8jzW":function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return r}));var r,i=n("D57K"),o=n("wHJ2"),s=n("5MwF"),a=n("nmzr"),u=n("pjml"),c=n("A0nf"),l=n("TnpK"),d=n("X/qj"),p=n("fYJU"),m=n("aHpC"),f=n("+O05"),h="ultra.components.services.scoreProviderHelper",g="scoreProviderHelper";function v(e){return!e.getScore()||e.isOverrideGrade()}function b(e){var t,n;if(!(null==e?void 0:e.attempts)&&!(null==e?void 0:e.groupAttempts))return!1;var r=null===(t=null==e?void 0:e.attempts)||void 0===t?void 0:t.some((function(e){return null==e?void 0:e.isSubmitted()})),i=null===(n=null==e?void 0:e.groupAttempts)||void 0===n?void 0:n.some((function(e){return(null==e?void 0:e.id)&&(null==e?void 0:e.isSubmitted())}));return r||i}!function(e){e[e.GenerateStateParams=0]="GenerateStateParams",e[e.GenerateStateRef=1]="GenerateStateRef",e[e.GoToState=2]="GoToState"}(r||(r={}));var y=function(){function e(e){this.ultraState=e}return e.prototype.getScoreProviderHandle=function(){return null},e.prototype.openStateRef=function(e,t){return null},e.prototype.studentViewStateRef=function(e,t){return null},e.prototype.editStateRef=function(e,t){return null},e.prototype.gradingStateRef=function(e,t,n,r){return null},e.prototype.gradingWithRubricStateRef=function(e,t){return null},e.prototype.gradingWithFeedbackStateRef=function(e,t){return null},e.prototype.getSubmissionsListStateRef=function(e,t){return null},e.prototype.supportsOverall=function(){return!1},e.prototype.supportsEdit=function(){return!0},e.prototype.supportsViewItem=function(){return!1},e.prototype.supportsExternalEdit=function(){return!1},e.prototype.takeActionOnStateRef=function(e,t,n){switch(n){case r.GoToState:this.ultraState.goPeekState(e,t);break;case r.GenerateStateParams:return o.toJson({state:e,args:t});case r.GenerateStateRef:default:return this.generateStateRef(e,t)}},e.prototype.generateStateRef=function(e,t){return t?e+"("+o.toJson(t)+")":e},e.$inject=[l.d],e}(),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return c.a.Scorm},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("scorm-overview.student",e,t)},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("scorm.open",e,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("scorm-settings",e,t)},t.prototype.gradingStateRef=function(e,t,n,r){var i,o=a.GradeRoutes.SUBMISSION_GRADING,s=null==n?void 0:n.hasAttempts(),u=b(n),c=(null===(i=null==n?void 0:n.attempts)||void 0===i?void 0:i.length)>e.multipleAttempts;if(n&&(s&&!u||!s&&(!(null==n?void 0:n.isSubmitted())&&!u||v(n))))o=a.GradeRoutes.GRADE_AND_FEEDBACK;else if((e.isMultipleAttempts()||c)&&u){if(t.attemptId)return this.takeActionOnStateRef(o,null,r);o=a.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT}return this.takeActionOnStateRef(o,t,r)},t.prototype.gradingWithFeedbackStateRef=function(e,t){return this.takeActionOnStateRef("submission-grading.peek.assessment-submission-feedback",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.scorm-submissions",e,t)},t.prototype.supportsOverall=function(){return!0},t}(y),C=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.gradebookPermissionService=n,i.currentUser=r,i}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return[c.a.Test,c.a.PeerSubmissionsTest,c.a.PeerEvaluationTest]},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("assessment.open",e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef(e.state||"assessment.overview",e,t)},t.prototype.editStateRef=function(e,t){return e.assessmentType="test",e.gradeitemView="details",this.takeActionOnStateRef("gradebook-item.assessment",e,t)},t.prototype.gradingStateRef=function(e,t,n,r){var i,o,u,c=a.GradeRoutes.SUBMISSION_GRADING,l=t,d=null==n?void 0:n.hasAttempts(),p=b(n),m=f.a.isExternalSubmissionsAssessment(null===(i=null==e?void 0:e.ui)||void 0===i?void 0:i.content),h=null==e?void 0:e.isUserReconciler(this.currentUser.userId),g=(null===(o=null==n?void 0:n.attempts)||void 0===o?void 0:o.length)>e.multipleAttempts,y=(e.isMultipleAttempts()||g)&&p;if(y&&!t.attemptId)return this.takeActionOnStateRef(a.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT,t,r);y&&(l=null);var S=this.gradebookPermissionService.canExecute()&&!h;return m?p||!S?(c=(null==t?void 0:t.groupId)?a.GradeRoutes.GROUP_SUBMISSION_GRADING:a.GradeRoutes.SUBMISSION_GRADING,this.takeActionOnStateRef(c,l,r)):this.takeActionOnStateRef(a.GradeRoutes.CREATE_OFFLINE_ATTEMPT,t,r):(!h||!d||s.a.features.peerAssessmentFeatureFlag&&(null==e?void 0:e.peerGrading)||(null===(u=this.ultraState.current.peekViewName)||void 0===u?void 0:u.startsWith(a.GradeRoutes.RECONCILE_GRADE))?(null==t?void 0:t.groupId)&&p?c=a.GradeRoutes.GROUP_SUBMISSION_GRADING:!n||p||!d&&(d||(null==n?void 0:n.isSubmitted())&&!v(n))||(c=a.GradeRoutes.GRADE_AND_FEEDBACK):c=a.GradeRoutes.RECONCILE_GRADE,this.takeActionOnStateRef(c,l,r))},t.prototype.gradingWithFeedbackStateRef=function(e,t){var n=e&&e.groupId?a.GradeRoutes.GROUP_SUBMISSION_GRADING:a.GradeRoutes.SUBMISSION_GRADING;return this.takeActionOnStateRef(n+".assessment-submission-feedback-tab",e,t)},t.prototype.gradingWithRubricStateRef=function(e,t){return this.takeActionOnStateRef(a.GradeRoutes.SUBMISSION_GRADING+".inline-rubric",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.assessmentType="test",e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.assessment",e,t)},t.prototype.supportsOverall=function(){return!0},t.$inject=[],t=Object(i.__decorate)([Object(i.__param)(0,Object(m.b)(l.d)),Object(i.__param)(1,Object(m.b)(d.b)),Object(i.__param)(2,Object(m.b)(p.b))],t)}(y),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return c.a.UltraAssignment},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("assignment.router",{courseId:e.courseId,assignmentId:e.contentId},t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("assignment.view",{courseId:e.courseId,assignmentId:e.contentId},t)},t.prototype.editStateRef=function(e,t){return e.gradeitemView="details",this.takeActionOnStateRef("gradebook-item.assignment",e,t)},t.prototype.gradingStateRef=function(e,t,n,r){t.gradeitemView="students";var i="assignment-grading",o=null==n?void 0:n.hasAttempts(),s=b(n);return n&&(o&&!s||!o&&!(null==n?void 0:n.isSubmitted())&&!s)&&(i=a.GradeRoutes.GRADE_AND_FEEDBACK),this.takeActionOnStateRef(i,t,r)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.assignment",e,t)},t.prototype.supportsOverall=function(){return!0},t}(y),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return c.a.Attendance},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("attendance-student-view",e,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.gradingStateRef=function(e,t,n,r){return this.takeActionOnStateRef("attendance",t,r)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.supportsEdit=function(){return!1},t.prototype.supportsOverall=function(){return!0},t}(y),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return c.a.Discussion},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef(a.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef(a.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)},t.prototype.gradingStateRef=function(e,t,n,r){return this.takeActionOnStateRef(a.EngagementRoutes.SUBMISSION_LIST,t,r)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef(a.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.view="participants",this.takeActionOnStateRef(a.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)},t.prototype.supportsOverall=function(){return!0},t}(y),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return c.a.Journal},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef(a.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef(a.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,Object(i.__assign)(Object(i.__assign)({},e),{view:"journal"}),t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef(a.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef(a.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,Object(i.__assign)(Object(i.__assign)({},e),{view:"participants"}),t)},t.prototype.gradingStateRef=function(e,t,n,r){var o,s=n.memberId,u=e.contentId,c=(null==n?void 0:n.memberId)||t.membershipId,l=(null===(o=null==n?void 0:n.user)||void 0===o?void 0:o.$pk)||(null==n?void 0:n.userId)||t.userId;return this.takeActionOnStateRef(a.JournalRoutes.JOURNAL_PARTICIPATION_DETAIL,Object(i.__assign)(Object(i.__assign)({},t),{participantId:s,contentId:u,singleMembershipId:c,singleUserId:l}),r)},t.prototype.supportsOverall=function(){return!0},t}(y),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return c.a.LTILink},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.supportsOverall=function(){return!0},t.prototype.supportsExternalEdit=function(){return!0},t}(y),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getScoreProviderHandle=function(){return c.a.PartnerCloud},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.studentViewStateRef=function(e,t){var n;return n=e.linkRef?{courseId:e.courseId,linkRef:e.linkRef,linkType:c.a.PartnerCloud.toString()}:{courseId:e.courseId,contentId:e.contentId},this.takeActionOnStateRef("lti.launch",n,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("content-manage.edit.partnercloud",{courseId:e.courseId,id:e.contentId},t)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.supportsOverall=function(){return!0},t.prototype.supportsViewItem=function(){return!0},t.prototype.supportsEdit=function(){return!1},t.prototype.supportsExternalEdit=function(){return!0},t}(y),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(y),A=function(){function e(t,n){var r=this;this.$rootScope=t,this.$injector=n,this.delegates=Object.create(null),this.contentHandlerToDelegateMap=Object.create(null),e.SCORE_PROVIDER_DELEGATES.forEach((function(e){var t=r.$injector.instantiate(e),n=t.getScoreProviderHandle();Array.isArray(n)?n.forEach((function(e){r.buildDelegateMap(e,t)})):r.buildDelegateMap(n,t)}))}return e.prototype.buildDelegateMap=function(e,t){var n=this;if(this.delegates[e.toString()])throw new Error("There is already a registered delegate for "+e.toString());this.delegates[e.toString()]=t,e.contentHandlers.forEach((function(r){if(n.contentHandlerToDelegateMap[r]){if(n.contentHandlerToDelegateMap[r]!==t)throw new Error("There is already a registered delegate for "+e.toString())}else n.contentHandlerToDelegateMap[r]=t}))},e.prototype.getDelegate=function(e){return e&&this.delegates[e.toString()]||O.NULL_DELEGATE},e.prototype.getDelegateByContentHandler=function(e){return e&&this.contentHandlerToDelegateMap[e.toString()]||O.NULL_DELEGATE},e.prototype.isSupported=function(e){return e&&null!=this.getDelegate(e).getScoreProviderHandle()},e.prototype.getSupportedHandles=function(){return Object.keys(this.delegates).map((function(e){return c.a.parse(e)}))},e.prototype.openStateRef=function(e,t,n){return this.getDelegateByContentHandler(e).openStateRef(t,n)},e.prototype.getSubmissionListStateRef=function(e,t,n){return this.getDelegate(e).getSubmissionsListStateRef(t,n)},e.prototype.getSubmissionListStateRefByContentHandler=function(e,t,n){return this.getDelegateByContentHandler(e).getSubmissionsListStateRef(t,n)},e.prototype.studentViewStateRef=function(e,t,n){return this.getDelegate(e).studentViewStateRef(t,n)},e.prototype.editStateRef=function(e,t,n){return this.getDelegate(e).editStateRef(t,n)},e.prototype.gradingStateRef=function(e,t,n,r){return this.getDelegate(null==e?void 0:e.scoreProviderHandle).gradingStateRef(e,n,t,r)},e.prototype.gradingWithRubricStateRef=function(e,t,n){return this.getDelegate(e).gradingWithRubricStateRef(t,n)},e.prototype.gradingWithFeedbackStateRef=function(e,t,n){return this.getDelegate(e).gradingWithFeedbackStateRef(t,n)},e.prototype.getNeedsGradingIconByContentHandler=function(e){var t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?(Array.isArray(t)&&(t=t[0]),t.needsGradingIcon):null},e.prototype.getNeedsReconcilingIconByContentHandler=function(e){var t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?(Array.isArray(t)&&(t=t[0]),t.needsReconcilingIcon):null},e.prototype.supportsOverall=function(e){return this.getDelegate(e).supportsOverall()},e.prototype.supportsEdit=function(e){return this.getDelegate(e).supportsEdit()},e.prototype.supportsViewItem=function(e){return this.getDelegate(e).supportsViewItem()},e.prototype.supportsExternalEdit=function(e){if(u.r.ContentHandler.PartnerCloud.isEqualTo(e)||u.r.ContentHandler.LtiLink.isEqualTo(e))return this.getDelegate(e).supportsExternalEdit()},e.$inject=["$rootScope","$injector"],e.SCORE_PROVIDER_DELEGATES=[w,k,I,T,E,$,S,C],e.NULL_DELEGATE=new P(null),e}(),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(A);o.module(h,[l.b,d.a,p.a]).service(g,A)},"90v0":function(e,t){e.exports='<div class="preview-header"\n     ng-if="shouldShowHeader && !previewHeader.contextCourse.isInIframeOfPreviewMode()"\n     role="banner">\n  <div>\n    <h2 bb-translate course-org-token-resolver>course.outline.previewCourse.headerBar.title</h2>\n    <div ng-if="hasExceptionReport">\n      <bb-translate>course.outline.previewCourse.headerBar.description</bb-translate>\n      <a href="javascript:void(0);" bb-peek-sref="conversion-risk-analysis" bb-translate\n         analytics-id="course.outline.previewCourse.headerBar.exceptionsLink">course.outline.previewCourse.headerBar.exceptionsLink</a>\n    </div>\n  </div>\n</div>\n'},"94iD":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u}));var r=n("D57K"),i=n("nbDY"),o=n.n(i),s=n("40MU"),a=function(){function e(e){this.apiData=e}return Object.defineProperty(e.prototype,"testType",{get:function(){if(!this.apiData.timeLimitSec)return c.NotATimedTest;switch((this.apiData.timerCompletion||"").toString()){case s.TimerCompletion.C.toString():return c.UnlimitedExtraTime;case s.TimerCompletion.H.toString():return this.apiData.softLimitSec?c.LimitedExtraTime:c.NoExtraTime;default:return c.NotATimedTest}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adaptedTime",{get:function(){switch(this.testType){case c.NoExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};case c.UnlimitedExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:Number.POSITIVE_INFINITY};case c.LimitedExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.softLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};default:return{elapsedSeconds:NaN,softlimitSeconds:NaN,hardlimitSeconds:NaN}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"testStage",{get:function(){switch(this.testType){case c.NoExtraTime:return this.withinHardlimit?u.Stage0NoExtraTime:u.StageE;case c.UnlimitedExtraTime:return this.withinLimit?u.Stage0UnlimitedExtraTime:u.Stage1UnlimitedExtraTime;case c.LimitedExtraTime:return this.withinLimit?u.Stage0LimitedExtraTime:this.withinHardlimit?u.Stage1LimitedExtraTime:u.StageE;default:return}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTimeLimit",{get:function(){return this.testType!==c.NotATimedTest},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasExtraTime",{get:function(){return this.testType===c.LimitedExtraTime||this.testType===c.UnlimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasLimitedExtraTime",{get:function(){return this.testType===c.LimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUnlimitedExtraTime",{get:function(){return this.testType===c.UnlimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withinLimit",{get:function(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.softlimitSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withinHardlimit",{get:function(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.hardlimitSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"willAutoSubmit",{get:function(){return this.testType===c.NoExtraTime||this.testType===c.LimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedTimeLimitSeconds",{get:function(){return this.adaptedTime.softlimitSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedExtraTimeSeconds",{get:function(){return this.adaptedTime.hardlimitSeconds-this.adaptedTime.softlimitSeconds},enumerable:!0,configurable:!0}),e.prototype.getSubmissionRuleText=function(e,t){switch(this.testType){case c.NoExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.autoSubmission"});case c.UnlimitedExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.unlimitExtraTime"});case c.LimitedExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.extraTimeInfo.plural",params:{allowExtraTime:Math.floor(this.displayedExtraTimeSeconds/60)}});default:return""}},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Stage0NoExtraTime=new t("S0_NO_EXTRA"),t.Stage0UnlimitedExtraTime=new t("S0_UNLIMITED_EXTRA"),t.Stage1UnlimitedExtraTime=new t("S1_UNLIMITED_EXTRA"),t.Stage0LimitedExtraTime=new t("S0_LIMITED_EXTRA"),t.Stage1LimitedExtraTime=new t("S1_LIMITED_EXTRA"),t.StageE=new t("SE"),t}(o.a),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NoExtraTime=new t("NO_EXTRA"),t.UnlimitedExtraTime=new t("UNLIMITED_EXTRA"),t.LimitedExtraTime=new t("LIMITED_EXTRA"),t.NotATimedTest=new t("NOT_TIMED"),t}(o.a)},"9Ss5":function(e,t){e.exports='<div class="element-image avatar no-select" aria-hidden="true"\n     ng-class="avatarsClasses"\n     bb-load-bundle="components/directives/avatar" bb-cache-compilation="avatar">\n  <div class="avatar-inner" ng-if="isAvatarRender && (!autoUpdate || !autoUpdate())">\n    <div ng-if="::(!first && !second)" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      <div class="initials">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n    </div>\n\n    <div ng-if="::(first && first.avatarUrl)" class="first avatar-single image-avatar">\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && first.userInitials)"\n         class="first avatar-single {{::first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name Will still render default--\x3e\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && !first.userInitials)"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!first.isAllMembers)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="all-members" ng-if="::(first.isAllMembers)">\n        <bb-ui-icon-avatar-multiple></bb-ui-icon-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="::(second && second.avatarUrl && participants == 2)" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && second.userInitials)"\n         class="second avatar-single {{::second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name. Will still render default --\x3e\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && !second.userInitials)"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!second.isAllMembers)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="all-members" ng-if="::(second.isAllMembers)">\n        <bb-ui-icon-avatar-multiple></bb-ui-icon-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n\n  <div class="avatar-inner" ng-if="isAvatarRender && autoUpdate && autoUpdate()">\n\n    <div ng-if="!first && !second" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n\n    <div ng-if="first && first.avatarUrl" class="first avatar-single image-avatar">\n      <img ng-src="{{first.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && first.userInitials"\n         class="first avatar-single {{first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && !first.userInitials"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="!first.isAllMembers" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="all-members" ng-if="first.isAllMembers">\n        <bb-ui-icon-avatar-multiple></bb-ui-icon-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="second && second.avatarUrl && participants == 2" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && second.userInitials"\n         class="second avatar-single {{second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && !second.userInitials"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="!second.isAllMembers" src="./static/images/avatar-placeholder.svg"  bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="all-members" ng-if="second.isAllMembers">\n        <bb-ui-icon-avatar-multiple></bb-ui-icon-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar : null">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n</div>'},"9ZjI":function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-not-found-modal"\n          modal-title-key="components.services.error-modal.error-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-not-found">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>\n'},"9zo4":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return p}));var r=n("D57K"),i=(n("my/J"),n("wHJ2")),o=n("5iHu"),s=n("XGja"),a=n("+4Px"),u=n("lUN/"),c="ultra.services.accessibility",l="accessibility",d=function(){function e(e){var t=this;this.$rootScope=e,this.FOCUSED_ELEMENT="focusedElement",this.FOCUS_SELECTOR_OVERRIDE="focusSelectorOverride",this.isFocusDelayed=!1,this.panelInfoStack=[{panelElement:o(document.body)}],this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=this.currentPanelInfo.panelElement,this.isFocusedElementInFocusTrap=function(){return!!o(document.activeElement).closest(".ms-FocusTrapZone").length},this.focusCorrectElementOnPanel=function(e){void 0===e&&(e=this.activePanel),this.isFocusDelayed=!1;var t=o(".ms-Callout");if(!t||!t.length){var n=o(".ms-Modal");if(!n||!n.length){var r=o(".datepicker-dropdown");if(!r||!r.length){var i=o('div[class*="MuiDialogcontainer"]');if(!(i&&i.length||this.isFocusedElementInFocusTrap())){var a=e.find("[bb-focus]");if(a&&a.length){var u=a.first();if(u.trigger("focus"),this.elementHasFocus(u))return}var c=e.find("h1").filter(":visible");if(c&&c.length){var l=c.first();if(s.a(l),this.elementHasFocus(l))return}var d=e.find(":tabbable:not(.bb-close, .non-first-focus):first");d&&d.length&&(d.trigger("focus"),this.elementHasFocus(d))||s.a(e)}}}}},this.elementHasFocus=function(e){return e.is(o(document.activeElement))},this.isElementInActivePanel=function(e){return e.hasClass("pagehelp-directive-link")||!!e.closest(".focus-handling-disabled").size()||t.isElementInPanel(t.activePanel,e)},this.isElementInPanel=function(e,t){return e.is(t)||o.contains(e[0],o(t)[0])},this.applyFocusinHandler=function(){o("body").off("focusin.axService"),o("body").on("focusin.axService",(function(e){var n=o(e.target);t.isFocusDelayed||t.isElementInActivePanel(n)||t.focusCorrectElementOnPanel(t.activePanel)}))},this.removeFocusinHandler=function(){o("body").off("focusin.axService")},this.backgroundElementsStack=[],u.a(),this.applyFocusinHandler();var n=function(e){t.isElementInActivePanel(o(e.target))||t.removeFocusinHandler()};o("body").on("mousedown",n),e.$on("$destroy",(function(){o("body").off("mousedown",n)}))}return e.prototype.applyAccessibilityHandlingForPanel=function(e){this._storeFocusedElement(),this._setActivePanel(e),this._applyTabCapture(),this.ariaHideBackgroundElements()},e.prototype.revertAccessibilityHandling=function(){this.ariaShowBackgroundElements(),this._revertTabCapture(this.currentPanelInfo),this._restoreActivePanel(),this._restoreFocusedElement()},e.prototype._setActivePanel=function(e){this.activePanel=null,this.activePanel=e,this.currentPanelInfo={panelElement:e,overlayDisabled:e.hasClass("overlay-disabled"),panelFocusHandlingDisabled:e.hasClass("focus-handling-disabled")},this.panelInfoStack.push(this.currentPanelInfo),o(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()},e.prototype._restoreActivePanel=function(){this.panelInfoStack.length<2&&(this._setActivePanel(o(document.body)),this._setActivePanel(o(document.body))),this.panelInfoStack.pop().panelElement=null,this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=null,this.activePanel=this.currentPanelInfo.panelElement,o(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()},e.prototype.ariaHideBackgroundElements=function(e){void 0===e&&(e=!0);var t=o('.hide-in-background[aria-hidden!="true"]');t.attr("aria-hidden","true"),this.backgroundElementsStack.push(t),e&&this.activePanel.attr("aria-hidden","false")},e.prototype.ariaShowBackgroundElements=function(){if(this.backgroundElementsStack.length<1)throw o(".hide-in-background").attr("aria-hidden","false"),new Error("Tried to set aria-hidden=false for background elements, but there were no background elements in the stack.");this.backgroundElementsStack.pop().attr("aria-hidden","false")},e.prototype.setFocusOverrideOnPanel=function(e,t){if(!t)throw new Error("A panel selector is required to override focus on a panel");for(var n=this.panelInfoStack.length-1;n>=0;n--)if(this.panelInfoStack[n].panelElement.find(t).addBack(t).length){this.panelInfoStack[n].panelElement.data(this.FOCUS_SELECTOR_OVERRIDE,e);break}},e.prototype._storeFocusedElement=function(){var e=o(document.activeElement);!p.isLastNavigationByKeyboard&&p.lastClickedElement&&p.lastClickedElement.length&&(e=p.lastClickedElement),this.activePanel.data(this.FOCUSED_ELEMENT,e),e=null},e.prototype._restoreFocusedElement=function(){if(this.isFocusDelayed=!1,this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)){var e=this.activePanel.find(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).addBack(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).first();e.length&&this.activePanel.data(this.FOCUSED_ELEMENT,e),this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE,"")}var t=this.activePanel.data(this.FOCUSED_ELEMENT);t&&0!==t.length&&t.focus(),t&&t.length&&o(document.activeElement).is(t)||this.focusCorrectElementOnPanel(this.activePanel),this.activePanel.removeData(this.FOCUSED_ELEMENT),t=null},e.prototype._applyTabCapture=function(){var e=this;this.activePanel.on("keydown",(function(t){if(t.keyCode===a.u&&!e.currentPanelInfo.tabCalled){var n=e.activePanel.data("axMutationObserver");n||((n=new MutationObserver((function(){e.currentPanelInfo.tabCalled=!1}))).observe(e.activePanel[0],{childList:!0,attributes:!0,subtree:!0}),e.activePanel.data("axMutationObserver",n));var r=o(e.activePanel).find("*").addBack();e._conditionallyUpdateSkipLinkFocus(),o(":tabbable").not(".bb-ax-background-tabindex").add(o('a[tabindex!="-1"]').filter((function(){return 0===o(this).height()&&0===o(this).width()}))).filter((function(){return 0===o(this).closest(".focus-handling-disabled").size()})).add(o('div.editor-element[tabindex!="-1"]')).not(r).not(o(".pagehelp-directive-link")).add(o('div.panel-wrap[tabindex!="-1"]')).each((function(){o(this).data("originalTabindex",this.getAttribute("tabindex"))})).attr("tabindex","-1").addClass("bb-ax-background-tabindex"),e.currentPanelInfo.tabCalled=!0}}))},e.prototype._revertTabCapture=function(e,t){var n=t||o(document);n.find(".bb-ax-background-tabindex").each((function(){var e=o(this);null==e.data("originalTabindex")?e.removeAttr("tabindex"):e.attr("tabindex",e.data("originalTabindex")),e.removeAttr("originalTabindex")})).removeClass("bb-ax-background-tabindex"),n.data("axMutationObserver")&&n.data("axMutationObserver").disconnect()},e.prototype._revertTabCaptureForActivePanel=function(){this._revertTabCapture(this.currentPanelInfo)},e.prototype._conditionallyUpdateSkipLinkFocus=function(){this.currentPanelInfo.overlayDisabled&&!this.currentPanelInfo.panelFocusHandlingDisabled&&this.panelInfoStack.length>1&&this._revertTabCapture(this.panelInfoStack[this.panelInfoStack.length-2],this.activePanel)},e.isLastNavigationByKeyboard=!1,e.$inject=["$rootScope"],e}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(d);i.module(c,[]).service(l,d)},"A+IJ":function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"m",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"i",(function(){return h}));var r=1,i=2,o="#c575d2",s="#1874a4",a="#333333",u="#666666",c="#e5e5e5",l="#cdcdcd",d="#ffffff",p="#f0f0f0",m="Open Sans",f="600 12px "+m,h="700 12px "+m},A0nf:function(e,t,n){"use strict";var r=n("D57K"),i=n("nsO7"),o=n("nbDY"),s=n.n(o),a=n("Y3OE"),u=function(e){function t(t,n,r,i,o){void 0===i&&(i="grades"),void 0===o&&(o="grades");var s=e.call(this,t)||this;return s.iconClass=n,s.contentHandlers=r,s.needsGradingIcon=i,s.needsReconcilingIcon=o,s}return Object(r.__extends)(t,e),t.prototype.getContentHandlers=function(){return this.contentHandlers.map((function(e){return a.a.parse(e)}))},t.parse=function(e){return i.find(t.getValues(),(function(t){return e===t.toString()}))},t.parseByContentHandler=function(e){return e===t.Test.contentHandlers[0]?t.Test:i.find(t.getValues(),(function(t){return t.contentHandlers.some((function(t){return t===e}))}))},t.UltraAssignment=new t("resource/x-bb-assessment-ultraassignment","assignment",[a.a.UltraAssignment.toString()]),t.ClassicAssignment=new t("resource/x-bb-assignment","assignment",[a.a.ClassicAssignment.toString()]),t.Attendance=new t("resource/x-bb-attendance","attendance",[a.a.Attendance.toString()]),t.Blog=new t("resource/x-bb-bloglink","blog",[a.a.Blog.toString()]),t.Discussion=new t("resource/x-bb-forumlink","discussion",[a.a.Discussion.toString()]),t.Wiki=new t("resource/x-bb-wiki","wiki",[a.a.Wiki.toString()]),t.Survey=new t("resource/x-bb-assessment-survey","survey",[a.a.SurveyLink.toString()]),t.Test=new t("resource/x-bb-assessment","test",[a.a.TestLink.toString()]),t.PeerSubmissionsTest=new t("resource/x-bb-peer-submission","test",[a.a.TestLink.toString()]),t.PeerEvaluationTest=new t("resource/x-bb-peer-eval","test",[a.a.TestLink.toString()]),t.LTILink=new t("resource/x-bb-blti-link","link",[a.a.LtiLink.toString(),a.a.LtiPlacement.toString()]),t.PartnerCloud=new t("resource/x-bbgs-partner-cloud","link",[a.a.PartnerCloud.toString()]),t.Scorm=new t("resource/x-plugin-scormengine","scormengine",[a.a.RusticiScorm.toString()]),t.Journal=new t("resource/x-bb-journallink","journal",[a.a.Journal.toString()]),t}(s.a);t.a=u},A3SN:function(e,t,n){},A4cK:function(e,t){e.exports="<div ng-transclude></div>"},A4xO:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("+4Px"),o="ultra.directives.accessibility.focusNext";function s(e,t,n){e.on("keydown.focusNext",(function(o){if(o.keyCode===i.u&&!o.shiftKey&&t){var s=r.element(t);s.length>=1&&-1!==parseInt(s.attr("tabindex"),10)&&(s.first().focus(),o.preventDefault(),n&&e.off("keydown.focusNext"))}}))}var a=function(){this.restrict="A",this.link=function(e,t,n){var r="true"===n.bbFocusNextOneTimeOnly;s(t,n.bbFocusNext,r)}};r.module(o,[]).directive("bbFocusNext",["$injector",function(e){return e.instantiate(a)}])},BOxd:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Graded=new t("GRADED"),t.NeedsGrading=new t("NEEDS_GRADING"),t}(n.n(i).a);t.a=o},BXiQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n("H9Wo");var r,i,o=n("wHJ2"),s=n("5iHu"),a=n("nsO7"),u=n("Ymz8"),c=n("oVrE"),l=n("5Dl8"),d=n("pjml"),p=n("Q/M7"),m=n("DpvE"),f=n("gCXj"),h=n("yCJt"),g="ultra.directives.user-avatar",v=(e=o.module(g,[d.Q,f.a]),h.replace(/\s+id="[^\"]+"\s*/," ").replace(/<svg /,'<svg stroke-width="3" stroke="#fff" ').replace(/\s+viewBox="(\d+ \d+ \d+ \d+)"/,(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0].split(" ").map((function(e){return parseInt(e,10)})),i=r[0],o=r[1],s=r[2],a=r[3];return' viewBox="'+[i-s/2,o-a/2,2*s,2*a].join(" ")+'"'}))),b={avatar:{permanentUrl:"data:image/svg+xml;base64,"+u.codec.base64.fromBits(u.codec.utf8String.toBits(v))},lastModifiedAt:"",getInitials:a.noop},y=s('<style id="css-bb-user-avatar"></style>').appendTo("head"),S={},C=function(e){e.forEach((function(e){var t=e.id||e.$pk,n=S[t]=S[t]||{};if(!(null!=e.lastModifiedAt&&e.lastModifiedAt===n.lastModifiedAt)&&!e.isPlaceHolder){n.avatarURL=void 0,n.isAvailable=e.isAvailable,n.lastModifiedAt=e.lastModifiedAt;var r=e.avatar&&"default"!==e.avatar.permanentUrl;if(r){var i=e.avatar.permanentUrl;e.avatar.permanentUrl.startsWith("http")&&(i=Object(p.a)(e.avatar.permanentUrl,"ts",e.lastModifiedAt?encodeURIComponent(e.lastModifiedAt):(new Date).getTime())),n.avatarURL=i}var o=(e.getInitials||a.noop).apply(e);n.initials=!r&&o?o:void 0}})),r()};e.config([f.b+"Provider",function(e){e.onStyleRefresh((function(e,t){t.isAvailable||(e.selector("bb-user-avatar.u"+t.userId+":after").rule("display","block"),e.selector("bb-user-avatar.u"+t.userId+" > div").rule("opacity",".3"))}))}]).run(["$rootScope",d.Pb.serviceName,function(e,t){r=a.debounce((function(){var e=new l.a;a.forEach(S,(function(t,n){var r=e.selector("bb-user-avatar.u"+n);t.avatarURL?(r.selector(".image:after").rule("background-image",'url("'+t.avatarURL+'")').rule("display","block"),r.selector(".image:before").rule("display","none")):t.initials&&(r.selector(".image").rule("display","none"),r.selector(".initials").rule("display","block"),r.selector(".initials:after").rule("content",'"'+t.initials+'"')),!1===t.isAvailable&&e.selector("bb-user-avatar.u"+n+":after").rule("display","block")}));var t=e.build();y.text()!==t&&y.text(t)}),200),i=a.once((function(){t.$mixHook("after-feed",(function(){var e=Array.prototype.concat.call([],this);C(e)}))}))}]).directive("bbUserAvatar",(function(){return{restrict:"E",template:m,scope:{user:"=?"},link:function(e,t){i(),t.addClass("avatar element-image");e.$watch("user",(function(e,n){e&&(c.f(e)&&a.extend(e,b),t[0].className=t[0].className.split(/\s+/).filter((function(e){return!/^u\w+$/.test(e)})).join(" "),t.addClass("u"+(e.id||e.$pk)),C([e]))}))}}}))},BfLg:function(e,t,n){n.p=window.publicPath||n.p},BrA8:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("JzsJ");var r=n("wHJ2"),i=n("pjml"),o=n("0JpG"),s=n("Fvsw"),a=n("bF8R"),u=n("jhBu"),c=n("o5Lu"),l=n("TnpK"),d=n("Qbdf"),p=n("A0nf"),m="ultra.course.content.lti.routes";r.module(m,[o.moduleName,a.a,u.a,c.g,l.b,d.b]).config([l.c,d.c,function(e,t){var r;e.peekState("lti",{abstract:!0,url:"/lti"}).peekState("lti.launch",{url:"/launch?courseId&contentId&linkRef&linkType",resolve:(r={translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},r[d.d]=t.resolve,r.currentContent=["$q",l.d,i.V.serviceName,i.o.serviceName,function(e,t,n,r){var i=e.defer(),o=t.nextParams.courseId?t.nextParams.courseId:t.prevParams.courseId,s=t.nextParams.contentId?t.nextParams.contentId:t.prevParams.contentId,a=t.nextParams.linkRef?t.nextParams.linkRef:t.prevParams.linkRef,u=t.nextParams.linkType?t.nextParams.linkType:t.prevParams.linkType;return o&&s?r.$new(o).contents.$find(s).$asPromise().then((function(e){return i.resolve(e)})):o&&a&&p.a.PartnerCloud.isEqualTo(u)?n.getContentIds(o,a).then((function(e){e.contentIds&&e.contentIds.length>0?r.$new(o).contents.$find(e.contentIds[0]).$asPromise().then((function(e){return i.resolve(e)})):i.resolve(null)})):i.resolve(null),i.promise}],r.currentGradeColumn=["$q",d.d,"currentContent",s.b,function(e,t,n){if(t&&n){var r=n.contentDetail[n.contentHandler.toString()].gradingColumn.id;return t.gradebook.columns.$find(r).$asPromise()}return e.when(null)}],r.contentData=["$q",d.d,"currentContent","currentGradeColumn",a.b,function(e,t,n,r,i){if(t&&n&&r)return i.loadContentAndGrades({course:t,content:n,column:r});e.when(null)}],r),panelClass:"peek",require:function(){return Promise.all([n.e(2),n.e(7),n.e(586)]).then(n.bind(null,"7CZ/"))},pageTitle:" Launch"}).peekState("lti.launch-frame",{url:"/launchFrame?toolHref",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},panelClass:"full",require:function(){return Promise.all([n.e(2),n.e(7),n.e(593)]).then(n.bind(null,"I/hb"))},pageTitle:"course.content.ltiLaunchFrameTitle"})}])},Bu0u:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("D57K"),i=function(e){function t(t){var n=e.call(this,t)||this;return n.name="InvalidArgumentsError",n}return Object(r.__extends)(t,e),t}(n("6ynb").a)},ByeC:function(e,t){e.exports='<bb-modal id="disallow-folder-upload-modal" class="notification js-disallow-folder"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.disallowFolderUploadTitle\' : \'components.directives.fileUpload.disallowFolderUploadNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.disallowFolderUploadFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},"C/Ry":function(e,t){e.exports='<th class="table-cell"\n    scope="row"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</th>'},C3Ga:function(e,t,n){"use strict";var r,i=n("D57K"),o=n("WftU"),s=n("5MwF"),a=n("n7/H"),u=n("tfZW"),c=function(e){function t(t,n){void 0===n&&(n=u.a.getInstance());var r=e.call(this,t)||this;return r.preferredLocalesCache=new Map,r.overrideLoader=n,r.overrideLoader.onOverrideAdded(r.onOverrideAdded.bind(r)),r}return Object(i.__extends)(t,e),t.prototype.getBundlePath=function(e,t){if(s.a.unitTesting){if(!t.match(/^force\!/))return t.match(/^forcereset$/)?void this.reset():void 0;t=t.replace(/^force\!/,"")}return t.indexOf("://")>0?t:"locales/"+this.normalizeLocale(e)+"/_combined.json"},t.prototype.loadIncludedBundle=function(e){var t=this,r=function(e){var t=/locales\/([a-zA-Z0-9\-]+)\//.exec(e);if(!t||t.length<=0)throw new Error("Could not find locale in path "+e);return t[1]}(e);return new a.InstantPromise((function(i){n("spHl")("./"+e.replace("locales/","").replace(r,t.normalizeLocale(r))).then(i).catch((function(){return i(null)}))}))},t.prototype.loadPath=function(e){return e.indexOf("://")>=0?u.a.loadFromRemotePath(e):this.loadIncludedBundle(e)},t.prototype.load=function(e){return this.loadedBundles[e]||(this.loadedBundles[e]=this.loadPath(e)),this.loadedBundles[e]},t.prototype.onOverrideAdded=function(e){this.preferredLocalesCache=new Map},t.prototype.loadBundles=function(t){var n=this;"string"==typeof t&&(t=[t]);var r=[];return this.normalizeLocales(t).forEach((function(t){r.push(n.overrideLoader.getOverridePathForLocale(t).then((function(e){if(e&&e.path)return n.loadBundle(e.ultraLocale,e.path)})),e.prototype.loadBundles.call(n,t))})),a.InstantPromise.all(r)},t.prototype.getPreferredLocales=function(e){var t=this;"string"==typeof e&&(e=[e]);var n=e.join("|");if(!this.preferredLocalesCache.has(n)){var r=[];this.normalizeLocales(e).forEach((function(e){r=r.concat(t.overrideLoader.getPreferredLocales(e))})),this.preferredLocalesCache.set(n,Array.from(new Set(r)))}return this.preferredLocalesCache.get(n)},t.prototype.getLocaleForFormatting=function(e){return this.overrideLoader.getBaseLocale(e)||e},t}(o.Babelfish),l=function(){function e(){}return e.getInstance=function(){return null==r&&(r=new c({fallbackLocales:[]})),r},e.getTestInstance=function(e){if(!s.a.unitTesting)throw new Error("Use getInstance() instead");return new c({fallbackLocales:[]},e)},e}();t.a=l},CPVT:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("TnpK"),o=n("Qbdf"),s=n("aHpC"),a=n("wHJ2"),u="ultra.components.directives.confirmationCourseOrgTokenReplacementDirective",c=function(){function e(e,t,n,r,i){this.element=e,this.attributes=t,this.scope=n,this.ultraState=r,this.currentCourse=i;try{(r.includes("base.organizations.**")||i.course&&i.course.isOrganization)&&t.bbConfirmationNeeded&&(t.bbConfirmationNeeded=this.replaceToken(t.bbConfirmationNeeded),e.attr("bb-confirmation-needed",this.replaceToken(t.bbConfirmationNeeded)))}catch(e){}}return e.prototype.replaceToken=function(e){return e?e.replace("resource/x-bb-course-","resource/x-bb-organization-"):e},e}(),l=function(){function e(e,t){var n=this;this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=function(){return function(e,t,r){return new c(t,r,e,n.ultraState,n.currentCourse)}}}return e=Object(r.__decorate)([Object(r.__param)(0,Object(s.b)(i.d)),Object(r.__param)(1,Object(s.b)(o.e))],e)}();a.module(u,[i.b]).directive("confirmationCourseOrgTokenResolver",["$injector",function(e){return e.instantiate(l)}])},CPqS:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n("wHJ2"),i=n("Sa5G"),o=n("0JpG"),s=n("w9Zy"),a=n("nYZ0"),u=n("ZzN+"),c=n("hqh6"),l=n("5RJJ"),d=n("pjml"),p=n("TnpK"),m=n("Qbdf"),f=n("X455"),h=n("uC9d"),g=n("x+T+"),v=n("nmzr"),b=n("jhBu"),y=n("fYJU"),S="ultra.course.routes";r.module(S,[c.a,l.a,m.b,f.a]).config([p.c,m.c,f.b,function(t,r,c){var l,S,C;t.peekState(v.Routes.Course.COURSE,{abstract:!0,url:"^/{coursesOrOrganizations:(?:courses|organizations)}/:courseId",panelClass:"full",require:function(){return Promise.all([n.e(1),n.e(15),n.e(24),n.e(29)]).then(n.bind(null,"ogn+"))},resolve:(l={currentColumn:function(){return null}},l[m.d]=r.resolve,l[f.c]=c.resolve,l.currentCourseId=["$state",function(e){return e.nextParams.courseId}],l.courseEntitlementsLoader=["currentCourseId",g.c,function(e,t){return t.loadCourseEntitlements(e)}],l["?courseMembershipsLoader"]=["currentCourseId",d.o.serviceName,function(e,t){return t.$new(e).memberships.$fetch({limit:1e4}).$asPromise()}],l.isOrganization=[m.d,p.d,function(e,t){return t.nextParams.coursesOrOrganizations=e.isOrganization?"organizations":"courses",e.isOrganization}],l),onExit:["$rootScope","$stateParams","membership",o.serviceName,s.e,m.e,u.b,h.c,y.b,f.d,function(t,n,r,i,o,s,a,u,c,l){t.bbOffcanvasOpened=!1,o.close("course"),s.course.isClassic()&&t.$broadcast("reloadCourse",n.courseId);var d=r.isStudentMembership(),p=!c.userModel.isGuest();!d&&p&&l.courseMembership.$fetch().$allow([404]).$asPromise().then((function(e){e.isStudentMembership()&&u.clearCache("users/"+c.userId+"/memberships")})),a.showPreviewAlert=!0,e(window.parent.document).find("body").removeClass("has-footer-in-preview-mode")}]}).peekState(v.Routes.Course.COURSE_ANALYTICS,{url:"/analytics",views:{"course@":{require:[function(){return Promise.all([n.e(10),n.e(68)]).then(n.bind(null,"amHh"))},function(){return Promise.all([n.e(1),n.e(15),n.e(24),n.e(29)]).then(n.bind(null,"ogn+"))}],resolve:{"analytics-translations":[o.serviceName,function(e){return e.loadBundle("features/course/analytics/course-analytics")}]}}},panelClass:"full",pageTitle:"course.analytics.headerLabel"}).peekState(v.Routes.Course.COURSE_ANALYTICS_PREDICT_INSTRUCTOR,{url:"/predict?resetFTUE",views:{"analytics@":{require:function(){return Promise.all([n.e(21),n.e(22),n.e(116),n.e(667)]).then(n.bind(null,"x4MM"))},resolve:{"predict-translations":[o.serviceName,function(e){return e.loadBundle("features/predict/predict")}]}}},pageTitle:"predict.course.title",peekStates:["predictCourseStudentPanel"],panelClass:"full"}).peekState(v.Routes.Course.COURSE_ANALYTICS_PREDICT_STUDENT,{url:"/predict/:studentId",views:{"analytics@":{require:function(){return Promise.all([n.e(21),n.e(26),n.e(22),n.e(23),n.e(34),n.e(53),n.e(678)]).then(n.bind(null,"lanz"))},resolve:{"predict-translations":[o.serviceName,function(e){return e.loadBundle("features/predict/predict")}]}}},peekStates:["predictMessagingPanel"],pageTitle:"course.title.predictStudent",panelClass:"full"}).peekState(v.Routes.Course.COURSE_ANALYTICS_REPORTS,{url:"/reports",views:{"analytics@":{require:[function(){return Promise.all([n.e(10),n.e(620)]).then(n.bind(null,"Va14"))},function(){return Promise.all([n.e(10),n.e(68)]).then(n.bind(null,"amHh"))},function(){return Promise.all([n.e(1),n.e(15),n.e(24),n.e(29)]).then(n.bind(null,"ogn+"))}],resolve:{"analytics-translations":[o.serviceName,function(e){return e.loadBundle("features/course/analytics/course-analytics")}]}}},panelClass:"full",pageTitle:"course.analytics.headerLabel"}).peekState(v.Routes.Course.COURSE_ANALYTICS_SCORM_REPORTS,{url:"/scormReports",resolve:(S={},S[m.d]=r.resolve,S),views:{"analytics@":{require:[function(){return n.e(640).then(n.bind(null,"txuS"))},function(){return Promise.all([n.e(10),n.e(68)]).then(n.bind(null,"amHh"))}],resolve:{"scorm-report-analytics-translations":[o.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}]}}},peekStates:["scorm-analytics-report"],panelClass:"full",pageTitle:"course.analytics.title.scormReports"}).peekState(v.Routes.Course.COURSE_ANALYTICS_QUESTION_ANALYSIS,{url:"/questionAnalysis",views:{"analytics@":{require:function(){return Promise.all([n.e(0),n.e(4),n.e(8),n.e(67),n.e(702)]).then(n.bind(null,"ErSj"))},resolve:{"question-analysis-translations":[o.serviceName,function(e){return e.loadBundle("features/course/question-analysis")}]}}},peekViewName:"question-analysis-report-list",peekStates:["question-analysis"],panelClass:"full",pageTitle:"course.question-analysis.report-list.pageTitle"}).peekState(v.Routes.Course.COURSE_CALENDAR,{url:"/calendar",views:{"course@":{require:[function(){return Promise.all([n.e(63),n.e(1),n.e(12),n.e(15),n.e(57),n.e(24),n.e(615)]).then(n.bind(null,"bbBO"))},function(){return Promise.all([n.e(1),n.e(15),n.e(24),n.e(29)]).then(n.bind(null,"ogn+"))}],resolve:{"calendar-translations":[o.serviceName,function(e){return e.loadBundle("features/course/calendar/course-calendar")}]}}},courseEntitlement:i.e.ViewCalendar,peekStates:["event-create","event-edit","event-view","class-schedule","office-hours","conversion-analysis","content-manage","assignment","grade-item","assessment","scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview"],panelClass:"full",peekViewName:"calendar-panel-base",pageTitle:"course.calendar.headerLabel"}).peekState(v.Routes.Course.COURSE_ENGAGEMENT,{url:"/engagement",resolve:{"engagement-translations":[o.serviceName,function(e){return e.loadBundle("features/course/engagement/course-engagement")}]},views:{"course@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(538)]).then(n.bind(null,"QVC4"))}}},panelClass:"full",peekStates:["content-manage","conversion-analysis","discussion","conditional-release","content-group-enroll","discussion-settings",v.Routes.Telemetry.DISCUSSION_FORUM_INSIGHTS,"course-group","discussions-settings"],peekViewName:"engagement-panel-base",pageTitle:"course.engagement.headerLabel"}).peekState(v.Routes.Course.COURSE_GRADES,{url:"/grades?gradebookView&listViewType",views:{"course@":{require:[function(){return Promise.all([n.e(0),n.e(3),n.e(6),n.e(1),n.e(2),n.e(7),n.e(16),n.e(25),n.e(45),n.e(552)]).then(n.bind(null,"OFW5"))},function(){return Promise.all([n.e(1),n.e(15),n.e(24),n.e(29)]).then(n.bind(null,"ogn+"))}],resolve:{"grades-translations":[o.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]}}},resolve:{courseEntitlement:["$q","membership",b.b,function(e,t,n){return t.isStudentMembership()?e.resolve(!0):n.isEntitled("course.gradebook-metadata.VIEW")}]},peekStates:[v.Routes.Course.ACCOMMODATION,"assignment","assessment","gradebook-item","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview",v.Routes.Course.COURSE_GRADES_MULTIPLE_ATTEMPT,"assignment-grading",v.Routes.Grade.SUBMISSION_GRADING,"group-submission-grading","grade-item","grade-setting","grade-download-setting","grade-upload-setting",v.Routes.Grade.GRADE_AND_FEEDBACK,"conversion-analysis","content-manage","lti","discussion","submission-list","rubric","overall-grade","overall-grade-student","attendance","attendance-student-records","attendance-student-view","question-analysis",v.Routes.Grade.RECONCILE_GRADE,"grades-bulk-download",v.Routes.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,v.Routes.Journal.JOURNAL_PARTICIPATION_DETAIL],panelClass:"full",peekViewName:"grades-panel-base",pageTitle:"course.grades.instructorHeaderLabel"}).peekState(v.Routes.Course.COURSE_MESSAGES,{url:"/messages",views:{"course@":{require:[function(){return Promise.all([n.e(0),n.e(10),n.e(30),n.e(33),n.e(120),n.e(700)]).then(n.bind(null,"vjWz"))},function(){return Promise.all([n.e(1),n.e(15),n.e(24),n.e(29)]).then(n.bind(null,"ogn+"))}],resolve:{"messages-translations":[o.serviceName,function(e){return e.loadBundle("features/course/messages/course-messages")}]}}},panelClass:"full",peekStates:["create-message","edit-message","conversion-analysis"],pageTitle:"course.messages.headerLabel"}).peekState(v.Routes.Course.COURSE_OUTLINE,{url:"/outline?legacyUrl?enrollmentMessage?inPreviewMode",views:{"course@":{require:[function(){return Promise.all([n.e(0),n.e(3),n.e(6),n.e(20),n.e(1),n.e(2),n.e(9),n.e(12),n.e(25),n.e(112)]).then(n.bind(null,"Qile"))},function(){return Promise.all([n.e(1),n.e(15),n.e(24),n.e(29)]).then(n.bind(null,"ogn+"))}],resolve:{isClassicCourse:[m.d,p.d,function(e,t){e.isUltra()||t.goPeekState("course.classic.outline",{courseId:e.id,legacyUrl:t.nextParams.legacyUrl})}],"outline-translations":[o.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}},onExit:["$rootScope",p.d,function(e,t){"base.calendar"===t.getBaseState()&&e.$broadcast("deadline-refresh")}],peekStates:[v.Routes.Announcement.ANNOUNCEMENTS_LIST,v.Routes.Announcement.ANNOUNCEMENT_DETAIL,"assignment","assessment-settings","question-analysis","question-banks","assessment-safe-assign-settings","bulk-edit-content","class-schedule","content-group-enroll","content-manage","conversion-analysis","conversion-risk-analysis","description","event-view","exports","gradebook-item","import-report",v.Routes.Course.COURSE_MESSAGE,"roster","collab","stream-message","assessment","content-market","content-collection","document-settings","partner-tool","lti","discussion-settings","conversations","books-and-tools","rubric",v.Routes.Telemetry.CONTENT_ACTIVITY_IN_DETAIL,v.Routes.Telemetry.DISCUSSION_FORUM_INSIGHTS,"overall-grade","attendance","attendance-student-view","course-group-enroll","conditional-release","course-group","scorm-settings","gradebook-item.scorm-submissions","group-set-detail","group-set-list","scorm-launch-frame","scorm-overview","content-navigator-transition-peek","content-navigator-transition-full","content-navigator-placeholder","scorm-analytics-report"],peekViewName:"content-create-base",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("content-navigator-transition-peek",{url:"/content-navigator-transition-peek",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"peek"}).peekState("content-navigator-transition-full",{url:"/content-navigator-transition-full",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"full"}).peekState("content-navigator-placeholder",{url:"/link/{contentId:_[0-9]+_1}",require:function(){return Promise.all([n.e(2),n.e(7),n.e(587)]).then(n.bind(null,"1Uig"))},panelClass:"full",peekStates:["lti"],resolve:{currentContent:[p.d,m.d,"$q",function(e,t,n){var r=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(r&&r!==d.r.CREATE_CONTENT_ID)return t.contents.$find(r).$asPromise()}]}}).peekState("conditional-release",{url:"/conditionalRelease?id",pageTitle:"course.conditionalRelease.panelTitle",require:[function(){return Promise.all([n.e(3),n.e(579),n.e(2),n.e(7),n.e(25),n.e(576)]).then(n.bind(null,"gl4I"))},function(){return Promise.all([n.e(0),n.e(3),n.e(6),n.e(20),n.e(1),n.e(2),n.e(9),n.e(12),n.e(25),n.e(112)]).then(n.bind(null,"Qile"))}],resolve:(C={},C[m.d]=r.resolve,C.currentContent=[p.d,"currentCourse",a.f,function(e,t,n){var r=e.nextParams.id,i=n.findRootNode(t,d.r.ContentRootNode.ROOT);return n.getOrMakeContentInContentTree(i,t.id,r).then((function(e){return e.content.$fetch({expand:"hasProgressed"}).$asPromise()}))}],C.translations=[o.serviceName,function(e){return e.loadBundle("features/course/conditional-release/conditional-release")}],C)}).peekState(v.Routes.Course.COURSE_CLASSIC,{abstract:!0,url:"/cl"}).peekState("course.classic.outline",{url:"/outline?legacyUrl?enrollmentMessage",require:[function(){return Promise.all([n.e(1),n.e(15),n.e(24),n.e(29)]).then(n.bind(null,"ogn+"))}],resolve:{"outline-translations":[o.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]},peekStates:[v.Routes.Telemetry.CONTENT_ACTIVITY_IN_DETAIL],peekViewName:"course-classic-peek",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("edit-file-settings",{require:[function(){return n.e(136).then(n.bind(null,"TFHU"))}],resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/media-widget/media-widget")}]},url:"/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&isDecorative&alternativeText&mediaType&bbmlEditorId"}).peekState("bulk-edit-content",{url:"/bulkEditContent",require:[function(){return Promise.all([n.e(11),n.e(553),n.e(716)]).then(n.bind(null,"iGvw"))}],pageTitle:"course.outline.bulkEditHeaderLabel",panelClass:"full",courseEntitlement:i.f.ViewAsDesigner})}])}).call(this,n("5iHu"))},Cxi4:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("D57K"),i=n("wHJ2"),o=n("nYZ0"),s=n("Sa5G"),a=n("jhBu"),u=n("pjml"),c="ultra.components.services.discussionPermission",l="discussionPermission",d=function(){function e(e,t,n,r){this.$q=e,this.content=t,this.CourseModel=n,this.entitlement=r}return e.prototype.canCreateAllContent=function(e){if(e){var t,n=this.CourseModel.$new(e),r=this.content.findRootNode(n,u.r.ContentRootNode.INTERACTIVE);return r.$then((function(){(t=r.children)||(t=r.getChildren({limit:0}))})).$asPromise().then((function(){return t.$asPromise().then((function(){return t.permissions&&t.permissions.create}))}))}return this.$q.when(!1)},e.prototype.hasEditPermission=function(e){return this.entitlement.hasCourseEntitlement(s.f.ModifyContent,e)},e.prototype.hasEditAvailabilityPermission=function(e){return this.entitlement.hasCourseEntitlement(s.f.ModifyContentAvailability,e)},e.prototype.hasEditDueDatePermission=function(e){return this.entitlement.hasCourseEntitlement(s.u.ModifyItemDueDate,e)},e.prototype.hasGradingPermission=function(e){return this.entitlement.hasCourseEntitlement(s.u.ModifyGradebook,e)},e.prototype.canDeleteDiscussion=function(e,t){return t&&t.permissions?t.canDelete():e&&e.canDelete()},e.prototype.areAnyGroupEntitled=function(e){return this.entitlement.areAnyEntitled([s.v.CreateGroups,s.v.DeleteGroups,s.v.ManageGroupMembership,s.v.ModifyGroups,s.v.ViewGroups],e)},e.$inject=["$q",o.f,u.o.serviceName,a.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(d);i.module(c,[o.d,u.Q,a.a]).service(l,d)},DDbI:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("w9Zy"),o=n("TnpK"),s="profile.update-avatar.routes";r.module(s,[i.d,o.b]).config([o.c,function(e){e.peekState("update-avatar",{url:"/avatar/update",require:function(){return Promise.all([n.e(28),n.e(646)]).then(n.bind(null,"Jgl2"))},pageTitle:"base.profile.update-avatar.pageTitle"})}])},DlnX:function(e,t,n){},DpvE:function(e,t){e.exports='<div>\n  <div class="initials"></div>\n  <div class="image"></div>\n</div>'},DsaG:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u}));var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s=n("f4B+"),a="ultra.components.services.fileViewer",u="fileViewer",c="audio",l="image",d="video",p="gif",m="jpeg",f="png",h=function(){function t(t){var n=this;this.$sce=t,this.canFileBeRenderedInline=function(e){if(!e)return!1;var t=n.getMediaSubType(e),r=n.getMediaType(e);switch(r){case l:return[m,p,f].indexOf(t)>-1;case c:case d:var i=document.createElement(r);return i.canPlayType&&!!i.canPlayType(e)}return!1},this.getMediaSubType=function(e){var t;return null!==(t=null==e?void 0:e.substring(e.indexOf("/")+1))&&void 0!==t?t:null},this.getMediaType=function(e){var t;return null!==(t=null==e?void 0:e.substring(0,e.indexOf("/")))&&void 0!==t?t:null},this.isMediaFile=function(t){return e.inArray(t,[l,d,c])>=0},this.shouldRenderInlineByDefault=function(e){var t=!1,r=n.getMediaType(e.currentMimeType);return r&&(t=n.isMediaFile(r)),t},this.isAudioFile=function(e){return e===c},this.isImageFile=function(e){return e===l},this.isVideoFile=function(e){return e===d},this.initUiField=function(e){null==e.ui&&(e.ui={}),e.viewerData&&e.viewerData.viewerUrl&&(e.ui.trustedViewUrl=n.$sce.trustAsResourceUrl(e.viewerData.viewerUrl)),e.ui.iconClass=o.r.FileContentHandlerType.getIconClassByFileMIMEType(e.currentMimeType)||"img-icon-document-blank";var t=e.currentMimeType;e.ui.mediaType=n.getMediaType(t),e.ui.mediaSubtype=n.getMediaSubType(t),e.ui.canBeRenderedInline=n.canFileBeRenderedInline(t),e.ui.safeAltText=e.alternativeText?s.a.HTML(e.alternativeText):""}}return t.$inject=["$sce"],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(h);i.module(a,[]).service(u,h)}).call(this,n("5iHu"))},Dwp2:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("YOs/"),o=n("65PF"),s=n("C/Ry"),a="ultra.components.directives.table.tableCell",u=function(){function e(e,t,n){this.scope=e,this.element=t,this.ctrl=n,this.getColumn(),this.handleAlternateText()}return e.prototype.getColumn=function(){this.column=this.ctrl.getConfig().columns[this.scope.columnIndex()]},e.prototype.handleAlternateText=function(){if(this.column&&this.column.alternateTextFn){var e=this.column.alternateTextFn(this.scope.item);this.element.find(".alternate-contents").text(e),this.element.find(".transclude-container").attr("aria-hidden","true")}},e.$inject=["scope","element","ctrl"],e}(),c=function(){function e(e){var t=this;this.$injector=e,this.require="^bbTable",this.restrict="E",this.replace=!0,this.transclude=!0,this.template=function(e,t){return"true"===t.header?s:o},this.scope={columnIndex:"&",header:"@"},this.link=function(e,n,r,i,o){e.item=e.$parent.$parent.item,e.tableCell=t.$injector.instantiate(u,{scope:e,element:n,ctrl:i}),o((function(t,r){r.item=e.item,n.find(".transclude-container").append(t)}))}}return e.$inject=["$injector"],e}();r.module(a,[i.b]).directive("bbTableCell",["$injector",function(e){return e.instantiate(c)}])},DyQT:function(e,t){e.exports='<div bb-load-bundle="components/directives/save-tray">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.loadingMoreItems</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsLoaded</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsFailedToLoad</span>\n  </div>\n</div>\n'},E01l:function(e,t){e.exports='<bb-modal class="notification group-attempt-access-control-dialog {{additionalClass}}"\n  modal-translate-options="modalTranslateOptions"\n  analytics-id-tag-prefix="components.directives.groupAttemptAccessControlDialog">\n\n  <div name="modal-contents">\n\n    <div class="queue">\n      <div class="owner user-tile">\n        <div>\n          <bb-avatar user="owner"></bb-avatar>\n          <bb-username user="owner"></bb-username>\n        </div>\n      </div>\n      <div class="user-tile queuer" ng-repeat="user in queuedUsers track by user.id" ng-class="\'queuer-\' + $index">\n        <div>\n          <bb-avatar user="user"></bb-avatar>\n          <bb-username user="user"></bb-username>\n        </div>\n      </div>\n    </div>\n\n    <p ng-bind-html="::modalStrings.instructions"></p>\n  </div>\n  <span name="modal-footer-button-primary">\n    <button class="button confirm-ok js-primary-button" ng-click="okAction()" ng-if="!hideOK" analytics-id="primary.ok.action.button">{{::modalStrings.ok}}</button>\n    <button class="button confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n  <span name="modal-footer-button-secondary">\n    <button class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="!hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n</bb-modal>\n'},EN13:function(e,t){e.exports='<bb-modal class="notification js-non-file-error" \n          modal-title-key="components.directives.fileUpload.disallowNonFileUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowNonFileUploadError</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},Ediv:function(e,t){e.exports='\x3c!--\n  this #ftue-new div is copied from first-time-visit-directive.html.\n  it may need to move back up a level if/when the welcome template is made configurable.\n--\x3e\n<div id="ftue-new" class="base-ftue" ng-if="firstVisit">\n  <div id="ftue-new-1" class="ftue-new-slide current-view">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.welcome.title</h2>\n\n      <div>\n        <a href="javascript:void(0);" class="ftue-img ftue-1-button scroll-button" tabindex="0" analytics-id="welcome.welcome.welcomeIcon.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_Welcome.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.welcome.alt\'}"\n                                          ></a>\n      </div>\n      <p class="medium-up-padding" bb-translate>welcome.welcome.description</p>\n    </div>\n    <div class="slide-control">\n\n      <button class="button ftue-1-button icon round ftue-advance large scroll-button"\n                                                                  bb-translate-attrs="{\'aria-label\': \'welcome.welcome.alt\'}"\n                                                                  analytics-id="welcome.welcome.downIcon.button"><i\n                                                                  class="icon-chevron-down"\n\n                                                                  ></i>\n      </button>\n    </div>\n  </div>\n\n  <div class="ftue-new-slide" id="ftue-new-2">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.layers.title</h2>\n\n      <div>\n        <a id="ftue-new-2-img" href="javascript:void(0);" class="ftue-img ftue-2-button scroll-button" tabindex="0" analytics-id="welcome.welcome.neverLoseYourPlace.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_NeverLoseYourPlace.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.layers.alt\'}"></a>\n      </div>\n      <p bb-translate>welcome.layers.description</p>\n    </div>\n    <div class="slide-control">\n      <button class="button icon round ftue-advance large ftue-2-button scroll-button"\n                                                                  bb-translate-attrs="{\'aria-label\': \'welcome.layers.alt\'}"\n                                                                  analytics-id="welcome.welcome.downIcon.button"><i\n                                                                  class="icon-chevron-down"\n                                                                  ></i>\n      </button>\n    </div>\n  </div>\n\n  <div class="ftue-new-slide" id="ftue-new-3">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.safe.title</h2>\n\n      <div>\n        <a id="ftue-new-3-img" href="javascript:void(0);" class="ftue-img ftue-3-button" ng-click="welcome.goNextPage()" tabindex="0" analytics-id="welcome.welcome.goNextPage.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_FeelFree.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.safe.alt\'}"></a>\n      </div>\n      <p bb-translate>welcome.safe.description</p>\n\n    </div>\n    <div class="slide-control">\n      <button class="button round ftue-end large ftue-3-button" bb-translate ng-click="welcome.goNextPage()" analytics-id="welcome.safe.button">welcome.safe.button</button>\n    </div>\n  </div>\n</div>\n'},FBBZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"j",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"l",(function(){return f})),n.d(t,"k",(function(){return h})),n.d(t,"m",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"h",(function(){return b})),n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return S})),n.d(t,"o",(function(){return C})),n.d(t,"g",(function(){return w}));var r=n("nsO7"),i=n("Q/M7"),o=n("5MwF"),s=["xplor-connector"];function a(e){return i.c(o.a.partnerCloudBasePath+e)}function u(e){var t=e.baseUrl+"/ultra/features/course/partner-tool/partner-tool-return-page.html";return a("/launch/lti?returnUrl="+encodeURIComponent(t)+"&uri_uri="+encodeURIComponent("ACTION:cloudProvisioning")+"&content_id="+encodeURIComponent(e.parentId||"")+"&window=false&disclaimer=true&provider_id=CLOUD1&uri_scheme=ACTION&custom_error_url="+encodeURIComponent(t)+"&action=cloudProvisioning&uri_id="+(new Date).getTime().toString()+"&course_id="+encodeURIComponent(e.courseId||"")+"&public=true&ignore_partner_settings=false&target=_self")}function c(e){var t="/content"+(e.displayInIframe?"/ultra":"")+"?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId);return e.parentId&&(t+="&content_id="+encodeURIComponent(e.parentId)),e.position&&(t+="&position="+encodeURIComponent(e.position)),e.mode&&(t+="&mode="+encodeURIComponent(e.mode)),a(t)}function l(e){var t="/content/return?provider_id="+encodeURIComponent(e.providerId)+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.contentId)+"&parentId="+encodeURIComponent(e.parentId)+"&position="+encodeURIComponent(e.position);return a(t+=e.itemIds?"&itemIds="+encodeURIComponent(e.itemIds):"&root=true")}function d(e){var t=e.baseUrl+"/webapps/blackboard/execute/blti/launchReturn";return a("/launch/lti?window=false&action=provisioning&ignore_partner_settings=false&uri_scheme=ACTION&target=_self&uri_id="+(new Date).getTime().toString()+"&uri_uri="+encodeURIComponent("ACTION:provisioning")+"&b2Uri="+encodeURIComponent("/webapps/partner-cloud/")+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.parentId||"")+"&provider_id="+encodeURIComponent(e.partnerId)+"&returnUrl="+encodeURIComponent(t)+"&custom_error_url="+encodeURIComponent(t))}function p(e){return a("/course/tools?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId))}function m(e){return a("/gradeLink/grade?outcomeDefinitionId="+encodeURIComponent(e.gradableItemId)+"&linkRefId="+encodeURIComponent(e.linkId)+"&course_id="+encodeURIComponent(e.courseId)+"&attempt_id="+encodeURIComponent(e.attemptId)+"&courseMembershipId="+encodeURIComponent(e.membershipId)+"&cancelGradeUrl")}function f(e){return a("/diagnostics/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function h(e){return a("/contentRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function g(e){return a("/gradeRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function v(e){return a("/course/roster/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function b(e){return e?e&&e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.name?e.toolProvider.toolProviderProfile.name:e&&e.portfolio&&e.portfolio.name?e.portfolio.name:e.providerId:""}function y(e,t){if(!e)return"";var n=t?e.iconUrl:e.associatedIconUrl;return n?i.l(n):""}function S(e){return e?(e.toolProvider&&e.toolProvider.toolProviderProfile&&(t=e.toolProvider.toolProviderProfile.description),t||""):"";var t}function C(e){return e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor&&r.includes(s,e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor.handle)||!1}function w(e){var t=[];return Array.prototype.push.apply(t,e.premierList),Array.prototype.push.apply(t,e.signatureList),Array.prototype.push.apply(t,e.otherList),t.forEach((function(e){e.childProviders&&Array.prototype.push.apply(t,e.childProviders)})),r.keyBy(t,"providerId")}},"FE+f":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.description.router";r.module(s,[o.b,i.moduleName]).config([o.c,function(e){e.peekState("description",{url:"/description",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/description/course-description")}]},require:function(){return n.e(137).then(n.bind(null,"8WQs"))},pageTitle:"course.description.header"})}])},FHk9:function(e,t,n){"use strict";n.r(t),n.d(t,"EVENT_BBML_EDITOR_IS_UPDATED",(function(){return r})),n.d(t,"EVENT_BBML_EDITOR_FORCE_UPDATE",(function(){return i})),n.d(t,"EVENT_BBML_EDITOR_ID_GENERATED",(function(){return o})),n.d(t,"ReorderBlockEventInfo",(function(){return s}));var r="bbml-updated",i="bb-bbml-editor-force-bbml-update",o="bb-bbml-editor-id-generated",s=function(){}},FR7u:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));n("FwJ5");var r=n("wHJ2"),i="ultra.components.directives.clickScrollTo",o=function(){this.restrict="A",this.link=function(t,n,r){n.on("click",(function(){e(r.bbClickScrollTo).scrollintoview({duration:500})})),t.$on("$destroy",(function(){n.off()}))}};r.module(i,[]).directive("bbClickScrollTo",["$injector",function(e){return e.instantiate(o)}])}).call(this,n("5iHu"))},Fvsw:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("nbDY"),a=n.n(s),u=n("Sa5G"),c=n("jhBu"),l=n("fYJU"),d=n("Qbdf"),p=n("emI2"),m=n("X455"),f=n("pjml"),h=n("eUpQ"),g="ultra.service.context",v="context",b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Administrator=new t("administrator"),t.NonStudent=new t("nonstudent"),t.Student=new t("student"),t.ClassicNonStudent=new t("classicnonstudent"),t.ClassicStudent=new t("classicstudent"),t}(a.a),y=function(){function e(e,t,n,r,o,s,a,c,l,d,p,m){this.$rootScope=e,this.$q=t,this.currentUser=n,this.EntitlementService=r,this.currentCourse=o,this.currentCourseMembership=s,this.preferenceService=a,this.BrandModel=c,this.SystemInfoModel=l,this.PrivacyPolicyModel=d,this.PredictFtueModel=p,this.ThemeModel=m,this.helpVariantOverride=null,this.predictInitialDefer=null,this.getHelpVariantDependencies=i.memoize((function(){return this.$q.all([this.EntitlementService.hasSystemEntitlement(u.D.ViewAdminTop),this.currentUser.userModel.memberships.$fetch({fields:"role,courseId"})])})),this.registerCourseContextDetection();this._course=new(function(){function e(){}return Object.defineProperty(e.prototype,"model",{get:function(){return o.course},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"membership",{get:function(){return s.courseMembership},enumerable:!0,configurable:!0}),e}())}return Object.defineProperty(e.prototype,"course",{get:function(){return{model:this.currentCourse.course,membership:this.currentCourseMembership.courseMembership}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"courseId",{get:function(){return this.currentCourse.courseId},set:function(e){this.currentCourse.load(e)},enumerable:!0,configurable:!0}),e.prototype.registerCourseContextDetection=function(){var e=this;this.$rootScope.$on(d.a,(function(t,n){e.courseId=n.id}))},e.prototype.overrideHelpVariant=function(e){this.helpVariantOverride=e},e.prototype.guessHelpVariant=function(){var e=this,t=[];if(this.helpVariantOverride){var n=this.helpVariantOverride;return this.helpVariantOverride=null,this.$q.when([n])}return this.course&&this.course.membership&&!this.course.membership.isStudentOrGuestMembership()&&t.push(this.course.model.isClassic()?b.ClassicNonStudent:b.NonStudent),this.getHelpVariantDependencies().then((function(n){var r=n[0],o=n[1];if(r&&t.push(b.Administrator),e.course&&e.course.model)r&&t.push(e.course.model.isClassic()?b.ClassicNonStudent:b.NonStudent);else{var s=b.Student;o.some((function(e){return!e.isStudentOrGuestMembership()}))&&(s=b.NonStudent),t.push(s)}return 0===t.length&&t.push(e.course&&e.course.model&&e.course.model.isClassic()?b.ClassicStudent:b.Student),i.uniq(t)}))},e.prototype.getSystemInfo=function(){return this.systemInfo||(this.systemInfo=window.__initialContext&&window.__initialContext.systemInfo?this.SystemInfoModel.$buildRaw(window.__initialContext.systemInfo):this.SystemInfoModel.$new().$fetch().$suppressErrorDialog()),this.systemInfo},e.prototype.getTheme=function(){return this.theme||(this.theme=this.ThemeModel.$new({themeId:this.getBrand().themeId}).$fetch()),this.theme},e.prototype.getServerTime=function(){return h.a.getServerTime()},e.prototype.getPrivacyPolicyUrls=function(){return this.privacyPolicy||(this.privacyPolicy=this.PrivacyPolicyModel.$new().$fetch().$suppressErrorDialog()),this.privacyPolicy},e.prototype.getCourseId=function(){return this.currentCourse.courseId},e.prototype.userHasGradebookModificationEntitlement=function(){var e=this.getCourseId();return e?this.EntitlementService.hasCourseEntitlement(u.u.ModifyGradebook,e).then((function(e){return e})):this.$q.when(!1)},e.prototype.getBrand=function(){return this.brand||(this.brand=window.__initialContext&&window.__initialContext.brand?this.BrandModel.$buildRaw(window.__initialContext.brand):this.BrandModel.getCurrent()),this.brand},e.prototype.getUiVersion=function(){return window.__initialContext&&window.__initialContext.uiVersion||""},e.prototype.getPreference=function(e,t){return this.preferenceService.getPreference(e,t)},e.prototype.getPredictPreference=function(e,t){var n=this,r=this.$q.defer();if(!Object.keys(this.preferenceService.preferences).some((function(e){return e.indexOf(".predict.")>0}))){if(this.predictInitialDefer)return this.predictInitialDefer.promise.then((function(){r.resolve(n.preferenceService.preferences[e])})),r.promise;this.predictInitialDefer=r,this.PredictFtueModel.getFtues().then((function(i){if(i){var o=null;i.forEach((function(t){n.preferenceService.preferences[t.key]=t,e===t.key&&(o=t)})),o?r.resolve(o):(n.preferenceService._addPreferenceToCache(e,t),r.resolve(n.preferenceService.preferences[e]))}else{if(void 0===t)return void r.reject(i);n.preferenceService._addPreferenceToCache(e,t),r.resolve(n.preferenceService.preferences[e])}}),(function(e){r.reject(e)}))}else Object.prototype.hasOwnProperty.call(this.preferenceService.preferences,e)||this.preferenceService._addPreferenceToCache(e,t),r.resolve(this.preferenceService.preferences[e]);return r.promise},e.prototype.getUltraConversionReportId=function(){return this.course.model.ultraConversionReportId},e.prototype.setPreference=function(e,t,n){return this.preferenceService.setPreference(e,t,n)},e.prototype.setPredictPreference=function(e,t,n){if(e.length>p.a)throw new Error("Preference key is too long!");return this.preferenceService._addPreferenceToCache(e,t,n),this.PredictFtueModel.setFtue(e)},e.$inject=["$rootScope","$q",l.b,c.b,d.e,m.d,p.c,f.g.serviceName,f.ub.serviceName,f.mb.serviceName,f.eb.serviceName,f.Nb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(y);o.module(g,[f.Q,l.a,c.a,d.b,m.a,p.b]).service(v,y)},GGEJ:function(e,t){e.exports='<div bb-load-bundle="components/directives/collab-session-icon" class="icon-shadow" ng-class="{\'is-running\': $ctrl.runningSessionFlag}">\n    <bb-svg-icon size="small" icon="collab" role="presentation" aria-hidden="true" status="active"></bb-svg-icon>\n    <bb-svg-icon size="medium" icon="collab-session" role="presentation" aria-hidden="true"></bb-svg-icon>\n</div>'},GNXM:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s=n("nmzr"),a="ultra.course.announcement.router";r.module(a,[i.moduleName,o.b]).config([o.c,function(e){e.peekState(s.AnnouncementRoutes.ANNOUNCEMENTS_LIST,{url:"/announcement-list",require:function(){return Promise.all([n.e(0),n.e(20),n.e(705)]).then(n.bind(null,"pp2P"))},pageTitle:"course.outline.announcements.title",peekStates:[s.AnnouncementRoutes.ANNOUNCEMENT_DETAIL],panelClass:"full"}).peekState(s.AnnouncementRoutes.ANNOUNCEMENT_DETAIL,{url:"/announcement-detail?courseId&announcementId&mode",require:function(){return Promise.all([n.e(0),n.e(20),n.e(649)]).then(n.bind(null,"Zozd"))},pageTitle:"course.outline.announcements.title",panelClass:"full"})}])},GQNF:function(e,t,n){},GbAM:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return u}));var r=n("wHJ2"),i=n("yC9S"),o=n("hlUp"),s="ultra.components.directives.accessibility.liveRegion",a="aria_live_polite",u="aria_live_assertive",c=function(){function t(t,n,r){var o=this;this.scope=t,this.element=n,this.attrs=r;i.b.OnRootScope(t,a,(function(t,n){var r=e("#aria-live-polite-region-1"),i=e("#aria-live-polite-region-2");""===r.text()?o.switchRegion(i,r,n):o.switchRegion(r,i,n)})),i.b.OnRootScope(t,u,(function(t,n){var r=e("#aria-live-assertive-region-1"),i=e("#aria-live-assertive-region-2");""===r.text()?o.switchRegion(i,r,n):o.switchRegion(r,i,n)}))}return t.prototype.switchRegion=function(e,t,n){e.empty(),e.attr("aria-hidden","true"),t.text(n),t.attr("aria-hidden","false")},t.$inject=["scope","element","attrs"],t}(),l=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="A",this.link=function(e,t,r){t.append(n.$compile(o)(e)),e.liveRegion=n.$injector.instantiate(c,{scope:e,element:t,attrs:r})}}return e.$inject=["$injector","$compile"],e}();r.module(s,[]).directive("bbLiveRegion",["$injector",function(e){return e.instantiate(l)}])}).call(this,n("5iHu"))},GiEq:function(e,t,n){},"H+SH":function(e,t){e.exports='<bb-modal class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.outline.previewCourse.alert.modalTitle\'}"\n          modal-title-key="course.outline.previewCourse.alert.modalTitle"\n          analytics-id-tag-prefix="course.outline.previewCourse.alert">\n  <div name="modal-contents">\n    <bb-translate>course.conversion.statusBar.page-out-of-date</bb-translate>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(\'refresh\')" class="button js-primary-button" analytics-id="course.outline.previewCourse.alert.ok.button">\n    <span bb-translate="global.ok"></span>\n  </button>\n</bb-modal>'},H8CZ:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",i="webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend";function o(e,t){a(e,t,r)}function s(e,t){a(e,t,i)}function a(e,t,n){if(!window.Modernizr.csstransitions)return t({data:{noTransitions:!0}});var r=function(i){var o;i.data||(i.data={});try{o=t(i)}finally{void 0===o&&e.off(n,r)}};e.on(n,r)}},H9Wo:function(e,t,n){},HAJP:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n("D57K"),i="external.script.loader",o="externalScriptLoader",s=function(){function e(e){this.$q=e,this.scripts={}}return e.prototype._createScriptElement=function(){return document.createElement("script")},e.prototype._appendScriptElement=function(e){document.head.appendChild(e)},e.prototype._getWindowProperty=function(e){return window[e]},e.prototype.getScript=function(e,t){if(void 0===t&&(t={}),this.scripts[e])return this.scripts[e];var n=this.$q.defer();try{this.scripts[e]=n.promise;var r=(e.indexOf("?")>=0?"&":"?")+"_"+Date.now(),i=this._createScriptElement();if(i.type="text/javascript",i.src=e+r,t.attributes)for(var o=0,s=Object.keys(t.attributes);o<s.length;o++){var a=s[o];i.setAttribute(a,t.attributes[a])}var u=this;i.onload=function(){t.exports?n.resolve(u._getWindowProperty(t.exports)):n.resolve()},i.onerror=function(){n.reject(new Error("error loading script: "+e))},this._appendScriptElement(i)}catch(e){n.reject(e)}return n.promise},e.$inject=["$q"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(s);angular.module(i,[]).service(o,s)},HDxW:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("wHJ2"),i=n("5MwF"),o=n("k9iv"),s=n("Q/M7"),a=n("JfV0"),u="ultra.service.errorHandler",c="errorHandler",l=function(e){return function(){var t,n=e.connect((function(e){return{}}),a.actions.app)((function(e,n){e,t=n}));try{t&&t.clearError&&t.clearError()}finally{n()}}},d=function(e,t,n,r,o){return function(a){if(a&&a.$response){if(401===a.$response.status){var u=e.get("$location").url(),c=u?"/?new_loc="+encodeURIComponent(i.a.basePath+u):"/";t.location.href=s.c(c)}403===a.$response.status?o.handleApiError(a.$response,(function(){n.$broadcast("no-permission-course"),l(r)()})):o.handleApiError(a.$response,l(r))}}};r.module(u,[]).factory(c,["$injector",function(e){var t=function(t){return e.invoke(["$injector","$window","$rootScope","$ngRedux",o.c,d])(t)};return{handle:t,subscribe:function(){return e.invoke(["$ngRedux",function(e){return function(e){return function(t){var n;return e.subscribe((function(){var r=e.getState();if(r.app.error&&n!==r.app.error){var i={status:r.app.error.status,data:r.app.error.data||{}};t({$response:i})}n=r.app.error}))}}(e)(t)}])}}}])},Hbkz:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("JzsJ");var r=n("wHJ2"),i=n("0JpG"),o=n("bF8R"),s=n("g7Mf"),a=n("pjml"),u=n("TnpK"),c=n("Qbdf"),l=n("nmzr"),d="ultra.course.content.conversations.routes";r.module(d,[i.moduleName,u.b,c.b]).config([u.c,c.c,function(e,t){var r;e.peekState("conversations",{url:"/conversations/:contentId/:courseId?groupId",resolve:(r={},r[c.d]=t.resolve,r.content=[c.d,o.b,u.d,a.o.serviceName,function(e,t,n,r){return r.$new(e.id).contents.$find(n.nextParams.contentId,{expand:"assignedGroups"}).$asPromise()}],r.translations=["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("common/user-common")])}],r.currentCourseMemberships="^courseMembershipsLoader",r.discussionInit=[s.c,"currentCourseMemberships",function(e,t){return e.init(t).then((function(){return e.loadHardContent(!0)}))}],r),onExit:[s.c,function(e){e.destroy()}],require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(537)]).then(n.bind(null,"FFqm"))},pageTitle:"course.content.classConversations",peekViewName:"conversations-peek",panelClass:"full",allowChildPeekStates:!0,peekStates:[l.CourseRoutes.COURSE_MESSAGE,"discussion-participants"]})}])},HiQ9:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("zYa8"),i=n("TE6g"),o="ultra.components.directives.bbUiIcon.Zip";Object(r.a)(i.Zip,o,"bbUiIconZip")},HtY7:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("lEL+"),o="ultra.components.directives.click",s=0,a=function(){function e(e){var t=this;this.timeout=e,this.restrict="A",this.link=function(e,n,r){void 0===r.bbClickTimeout&&(r.bbClickTimeout=s);var i=0,o=function(){var n;"true"===r.bbClickOnceDisable?n=e.$eval(r.bbClick):(i+=1)<=1&&(n=e.$eval(r.bbClick)),null!=n&&void 0!==n&&n.finally((function(){t.timeout((function(){i=0}),e,r.bbClickTimeout)}))};e.$on("$destroy",(function(){n.off("click",o)})),n.on("click",o)}}return e.$inject=[i.b],e}();r.module(o,[i.a]).directive("bbClick",["$injector",function(e){return e.instantiate(a)}])},I22j:function(e,t,n){},IVCC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s=n("w9Zy"),a=n("pjml"),u=n("fYJU"),c=n("TnpK"),l=n("ZBYA"),d=n("aohr"),p="ultra.predict.routes";i.module(p,[o.moduleName,s.d,a.Q,u.a,c.b,l.a]).config([c.c,function(e){var t;e.baseState("predictBase",{abstract:!0,require:function(){return Promise.all([n.e(28),n.e(654)]).then(n.bind(null,"xID3"))},resolve:(t=["components/directives/telemetry/telemetry","components/services/telemetry-chart","features/predict/predict","features/locations","features/course/course","global"],{user:[u.b,function(e){return e.userModel.$asPromise()}],localize:["$q","$rootScope","user","$window",o.serviceName,l.b,function(e,n,i,s,a,u){u.getInstitutionPreference(d.a.OverrideLanguagePack).then((function(u){var c=u.value||i.locale||"en",l=s.location.href.match(o.localeQuerystringRegex);l&&(c=l[1]),c=a.validateLocale(c)?c:"en",a.setUserLocale(c);var d=Object(r.__spreadArrays)([a.setLocale(n,c)],t.map((function(e){return a.loadBundle(e)})));return e.all(d)}))}]})}).baseState("predictBase.predictAdvisorStudents",{url:"/predict/advisor/students?customFields&resetFTUE",require:function(){return Promise.all([n.e(73),n.e(22),n.e(34),n.e(71),n.e(66),n.e(117),n.e(556)]).then(n.bind(null,"NKO4"))},pageTitle:"predict.advisor.title",peekStates:["predictAdvisorStudentsFilter","predictMessagingPanel","predictAdvisorStudentProfilePanel","predictCourseStudentPanel"]}).baseState("predictBase.predictCourseBase",{url:"/predict/courses/:courseId",require:function(){return Promise.all([n.e(21),n.e(22),n.e(116),n.e(655)]).then(n.bind(null,"j0gv"))},pageTitle:"predict.course.title"}).baseState("predictBase.predictCourseStudentBase",{url:"/predict/instructor/students/:studentId/course/:courseId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(22),n.e(23),n.e(34),n.e(53),n.e(656)]).then(n.bind(null,"PPqB"))},peekStates:["predictMessagingPanel"],pageTitle:"predict.instructor.title"}).peekState("predictAdvisorStudentProfilePanel",{url:"/profile/:studentId",require:function(){return Promise.all([n.e(0),n.e(22),n.e(34),n.e(66),n.e(114),n.e(625)]).then(n.bind(null,"W7NY"))},panelClass:"full",peekStates:["predictMessagingPanel","predictCourseStudentPanel","predictFavoritesPanel","predictAdvisorStudentProfilePanel.course-performance","predictAdvisorStudentProfilePanel.advisor-notes","predictAdvisorStudentProfilePanel.interests"],pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.course-performance",{url:"/outline",views:{"student-details-tabs-content@":{require:function(){return Promise.all([n.e(22),n.e(603)]).then(n.bind(null,"fQnU"))}}},peekStates:["predictCourseStudentPanel","predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.advisor-notes",{url:"/notes-contributors",views:{"student-details-tabs-content@":{require:function(){return Promise.all([n.e(0),n.e(22),n.e(34),n.e(66),n.e(114),n.e(704)]).then(n.bind(null,"kgDa"))}}},peekStates:["predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.interests",{url:"/interests",views:{"student-details-tabs-content@":{require:function(){return n.e(601).then(n.bind(null,"clqd"))}}},peekStates:["predictFavoritesPanel","predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictCourseStudentPanel",{url:"/courses/:courseId/students/:studentId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(22),n.e(23),n.e(34),n.e(53),n.e(668)]).then(n.bind(null,"Wwzz"))},panelClass:"full",peekStates:["predictMessagingPanel"],pageTitle:"predict.instructor.title"}).peekState("predictAdvisorStudentsFilter",{url:"/filter",require:function(){return Promise.all([n.e(22),n.e(117),n.e(677)]).then(n.bind(null,"TRcT"))},panelClass:"peek",pageTitle:"predict.advisor.title"}).peekState("predictMessagingPanel",{url:"/messagingPanel?messageStudentId&messageCourseId&messageType&messageLaunchOrigin",require:function(){return Promise.all([n.e(22),n.e(577)]).then(n.bind(null,"G6j8"))},panelClass:"peek",pageTitle:"predict.messagingPanel.title"}).peekState("predictFavoritesPanel",{url:"/favorites/:favoriteId?favoriteCategory?city&state&region&country",require:function(){return n.e(624).then(n.bind(null,"pI+d"))},panelClass:"peek",pageTitle:"predict.favoritesPanel.title"})}])},IVtk:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c}));var r,i,o=n("Q/M7"),s=n("mxgC");function a(e){var t=e.nextParams,n=t.action,r=t.courseId,o=t.contentId,s=t.attemptId,a=t.columnId;switch(n){case i.OpenDocument:u("ultra/courses/"+r+"/outline/edit/document/"+o+"?courseId="+r);break;case i.OpenAttempt:u("ultra/courses/"+r+"/outline/assessment/"+o+"/overview/attempt/"+s+"?courseId="+r);break;case i.ReviewAttempt:u("ultra/courses/"+r+"/outline/assessment/"+o+"/overview/attempt/"+s+"/review?courseId="+r+"&columnId="+a+"&contentId="+o);break;case i.ReviewFeedback:u("ultra/courses/"+r+"/outline/assessment/"+o+"/overview/attempt/"+s+"/review/inline-feedback?attemptId="+s+"&mode=inline&courseId="+r+"&contentId="+o);break;case i.PreviewAssessment:u("/ultra/courses/"+r+"/outline/assessment/test/"+o+"?courseId="+r+"&gradeitemView=details");break;default:e.go("base.not-found")}}function u(e){var t=o.c(e);o.p(t)}function c(e,t){var n,i;if(Object(s.d)())try{var o=e.name&&e.name.split(".peek.").pop(),a=t.name&&t.name.split(".peek.").pop(),u=o&&l((n={},n[r.QuestionGoalAlignmentForStudent]=s.b.AttemptGoalAlignmentOpened,n[r.RubricEvaluation]=s.b.AttemptRubricOpened,n[r.RubricView]=s.b.AttemptRubricOpened,n[r.AssessmentSubmissionFeedbackTab]=s.b.AttemptFeedbackOpened,n[r.AssessmentSubmissionFeedback]=s.b.AttemptFeedbackOpened,n))[o]||a&&l((i={},i[r.QuestionGoalAlignmentForStudent]=s.b.AttemptGoalAlignmentClosed,i[r.RubricEvaluation]=s.b.AttemptRubricClosed,i[r.RubricView]=s.b.AttemptRubricClosed,i[r.AssessmentSubmissionFeedbackTab]=s.b.AttemptFeedbackClosed,i[r.AssessmentSubmissionFeedback]=s.b.AttemptFeedbackClosed,i))[a];u&&u()}catch(e){console.error(e)}}function l(e){return Object.keys(e).reduce((function(t,n){return t[n]=function(){Object(s.f)({type:e[n],status:s.a.Success})},t}),{})}!function(e){e.QuestionGoalAlignmentForStudent="question-goal-alignment-for-student",e.AssessmentSubmissionFeedback="assessment-submission-feedback",e.AssessmentSubmissionFeedbackTab="assessment-submission-feedback-tab",e.RubricEvaluation="rubric-evaluation",e.RubricView="rubric-view"}(r||(r={})),function(e){e.OpenAttempt="OPEN_ATTEMPT",e.OpenDocument="OPEN_DOCUMENT",e.ReviewAttempt="REVIEW_ATTEMPT",e.ReviewFeedback="REVIEW_FEEDBACK",e.PreviewAssessment="PREVIEW_ASSESSMENT"}(i||(i={}))},Iftj:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return c})),n.d(t,"serviceName",(function(){return l})),n.d(t,"ScaleType",(function(){return d}));var r=n("D57K"),i=(n("QLzv"),n("nbDY")),o=n.n(i),s=n("yCC5"),a=n("Rjd/"),u=n("nkTj"),c="ultra.components.models.grade.gradeSchema",l=s.jb,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Score=new t("SCORE"),t.Percent=new t("PERCENT"),t.Text=new t("TEXT"),t.Complete=new t("COMPLETE"),t.Tabular=new t("TABULAR"),t}(o.a);a.a.factory(l,["restmod",u.d,function(e,t){return e.model().mix({ui:{mask:!0,init:function(){return{}}},$extend:{Record:{getPossiblePoints:function(){if(d.Score.isEqualTo(this.scaleType))throw new Error("Possible points must be entered by the user for schemas with a scale type of Score");return 100}}}})}])},"Is+C":function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return b}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("4nF1"),u=n("X455"),c=n("12mu"),l=n("TnpK"),d=n("o5Lu"),p=n("8jzW"),m=n("Sa5G"),f=n("Q/M7"),h=n("fYJU"),g="ultra.components.services.scorm",v="scorm",b="geolocation *; microphone *; camera *; midi *; encrypted-media *",y=function(){function e(e,t,n,r,i,o,s,a,u,c,l){this.$q=e,this.$rootScope=t,this.$window=n,this.cacheFactory=r,this.contextCourseMembership=i,this.modalService=o,this.ultraState=s,this.gradeService=a,this.scoreProviderHelper=u,this.CourseModel=c,this.contextUser=l,this.scormAvailabilityCache={}}return e.prototype.isScormAvailable=function(e){var t=this,n=this.scormAvailabilityCache[e];return n?this.$q.when(n.toolEnabledSetting.isAvailable):this.CourseModel.$new(e).contentHandlers.$find(m.g.RusticiScorm.toString()).$allow([403]).$asPromise().then((function(n){return(t.scormAvailabilityCache[e]=n).toolEnabledSetting.isAvailable}))},e.prototype.scormLaunch=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,s,a,u;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return t=this.$q.defer(),[4,this.$q.all([this.getContent(e.courseId,e.content,e.contentId),e.showPreLaunchPanel?this.getMembership(e.courseId):null])];case 1:return n=r.sent(),s=n[0],a=n[1],e.showPreLaunchPanel&&this.isGradable(s)?s.canEdit()||this.isInstructorInCourse(a)?(u=o.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(m.B.Scorm,{courseId:e.courseId,contentId:e.contentId},p.a.GenerateStateParams)),this.ultraState.goPeekState(u.state,u.args).then((function(){t.resolve()})).catch((function(e){t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})}))):this.isStudentInCourse(a)&&this.ultraState.goPeekState("scorm-overview.student",{courseId:s.courseId,contentId:s.id}).then((function(){t.resolve()})).catch((function(e){t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})})):this.launchScormLink(i.merge(e,{content:s}),t),[2,t.promise]}}))}))},e.prototype.markCompleted=function(e){return e&&this.contextCourseMembership.isStudentMembership()?this.getContent(null,null,e).then((function(e){e.state!==s.r.StateType.Completed&&e.updateState(s.r.StateType.Completed,!0)})):this.$q.when()},e.prototype.launch=function(e,t,n,r){var i=this;void 0===r&&(r=!1),e=f.c(e),e=f.a(e,"from_ultra","true"),r?(this.$window.open(e),this.markCompleted(n)):this.ultraState.goPeekState("scorm-launch-frame",{toolHref:e,courseId:t,contentId:n}).then((function(){i.markCompleted(n)}))},e.prototype.launchScormLink=function(e,t){var n;e.content&&(n=this.getLaunchLinkFromContent(e.content)),n&&(this.determineLaunchTarget(i.merge(e,{launchLink:n})),t.resolve())},e.prototype.determineLaunchTarget=function(e){e.content&&e.content.isScorm()&&this.launch(e.launchLink,e.content.courseId,e.content.id,e.content.launchInNewWindow)},e.prototype.getLaunchLinkFromContent=function(e){var t=e.contentDetail&&e.contentDetail[e.contentHandler.toString()];return t&&t.launchUrl||null},e.prototype.scormEditColumn=function(e){var t=this;this.getContent(e.courseId,e.ui.content,e.contentId).then((function(n){e.ui.content=n;var r=a.a.create(n).getEditState();t.ultraState.goPeekState(r,{contentId:n.id})}))},e.prototype.isStudentInCourse=function(e){return e.isStudentMembership()},e.prototype.isInstructorInCourse=function(e){return e&&e.isActAsInstructorMembership()},e.prototype.isGradable=function(e){return!!e.getScormGradebookItems().length},e.prototype.getContent=function(e,t,n){return t?this.$q.when(t):n?this.CourseModel.$new(e).contents.$find(n).$asPromise():this.$q.when(null)},e.prototype.getMembership=function(e){return this.contextCourseMembership.courseMembership?this.$q.when(this.contextCourseMembership.courseMembership):this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()},e.prototype.loadScormGrade=function(e){var t=this,n=e.courseId,r=e.column,i=e.grade;return(i?i.$asPromise&&i.$asPromise()||this.$q.when(i):this.gradeService.loadGrade({gradeQueryParams:{},courseId:n,column:r,userId:this.contextUser.userId},!1)).then((function(e){return e&&e.attempts.$fetch({fields:"id,status,attemptDate"}).$asPromise().then((function(e){return e.length&&e.reduce((function(e,t){return e.attemptDate>t.attemptDate?e:t}))})).then((function(e){return e&&e.id})).then((function(r){if(!r)return e;var i=t.CourseModel.$new(n),o={expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",attemptId:r};return t.gradeService.loadAttempt(e,i,o)}))}))},e.$inject=["$q","$rootScope","$window","DSCacheFactory",u.d,c.b,l.d,d.h,p.c,s.o.serviceName,h.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(y);o.module(g,[u.a,l.b,p.b,d.g,s.Q]).service(v,y).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},IyP6:function(e,t,n){},J0Qq:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s="ultra.directives.bbDate",a=function(){function e(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}return e.prototype.compile=function(e){var t=this,n=e.html();return function(e,r,i){var s,a=function(n){var s=t.bbLocalize.getFormatEnum(o.ILocaleDateFormat,i.format)||o.ILocaleDateFormat.Full,a=function(e){"bb-date"===r.prop("tagName").toLowerCase()?r.replaceWith(e):r.html(e)};null==n?a(""):t.bbLocalize.formatDate(n,s,e).then(a)},u=function(n){return n?new Date(t.$parse(n)(e)):null};"true"===i.autoUpdate?i.$observe("bbDate",(function(){s=u(i.bbDate),a(s)})):(s=t.$parse(n)(e)||u(i.bbDate),a(s))}},e.$inject=["$parse",o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(a);i.module(s,[o.moduleName]).directive("bbDate",["$injector",function(e){return e.instantiate(a)}])},"JRp+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.conversion.router";r.module(s,[o.b,i.moduleName]).config([o.c,function(e){e.peekState("conversion-analysis",{url:"/conversionAnalysis",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},require:function(){return Promise.all([n.e(59),n.e(54),n.e(697)]).then(n.bind(null,"0y0M"))},pageTitle:"ultra.convert.analysis.pageTitle"}).peekState("conversion-risk-analysis",{url:"/conversionRiskAnalysis",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},require:[function(){return Promise.all([n.e(119),n.e(696)]).then(n.bind(null,"VtI1"))},function(){return Promise.all([n.e(119),n.e(684)]).then(n.bind(null,"ubcj"))}],pageTitle:"ultra.convert.analysis.pageTitle"})}])},JURN:function(e,t,n){},JXhc:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s=n("hlSw"),a=n("TnpK"),u=n("3bn4"),c="ultra.course.content.assessment.question-goal-alignment",l="question-goal-alignment",d="question-goal-alignment-for-student",p=["course","goal-alignment","goal"],m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="/goalAlignment/:questionId/:questionIndex",t.panelClass="peek assessment-question-goal-peek",t}return Object(r.__extends)(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentContent","currentCourse",o.serviceName,a.d,"$injector",function(t,n,r,i,o,a){return void 0!==n&&void 0===n.id?t.when([]):t.when(null).then((function(){if(void 0===n)return a.invoke(s.a.currentContent,null,{currentCourse:r,translations:{}}).then((function(e){n=e}))})).then((function(){return t.all([r.assessments.$buildRaw({id:n.getDeployedAssessment().assessment.id}).questions.$find(o.nextParams.questionId,{expand:"alignedGoals"}).$asPromise(),i.loadBundle("features/"+p.join("/"))]).then((function(t){var n=t[0];return e.setupGoalAlignableContent(n,i,o)}))}))}]},t.prototype.getPeekStateName=function(){return l},t.prototype.getOverrideSubTitle=function(){return[o.serviceName,a.d,function(e,t){return e.translateSync({locale:null,key:"components.directives.assessment-question.question-title",params:{index:t.nextParams.questionIndex},noWrap:!0})}]},t.prototype.setupGoalAlignableContent=function(e,t,n){return[{getContentTitleForGoalAlignment:function(){return t.translateSync({locale:null,key:p.join(".")+".goalsAlignedWithThisQuestion"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()},isCurrentUserEligibleToAlignGoals:function(){return e.isCurrentUserEligibleToAlignGoals()},alignedGoals:e.alignedGoals.map((function(t){return t.content=e,t}))}]},t.$inject=["$injector","$q"],t}(u.a),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentCourse","contentData",o.serviceName,a.d,function(t,n,r,o,s){var a=t.when(null);return r.courseContent.isGroupContent&&r.groupAttempt?a=n.gradebook.groupAttempts.$find(r.groupAttempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise():!r.courseContent.isGroupContent&&r.attempt&&(a=n.gradebook.attempts.$find(r.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),t.all([a,o.loadBundle("features/"+p.join("/")),o.loadBundle("components/directives/assessment/assessment-question")]).then((function(t){var n=t[0],a={};if(n){var u=n.getToolAttemptDetailItem(r.gradingColumn.scoreProviderHandle);(u&&u.questionAttempts||[]).forEach((function(e){e.question&&e.question.id===s.nextParams.questionId&&(a=i.extend(e.question,{getContentIdForGoalAlignment:function(){return"blackboard.data.qti.asi.AsiObject;"+e.question.id},isCurrentUserEligibleToAlignGoals:function(){return!1}}))}))}return e.setupGoalAlignableContent(a,o,s)}))}]},t.prototype.getPeekStateName=function(){return d},t}(m);i.module(c,[a.b,o.moduleName]).config([a.c,function(e){[new m,new f].forEach((function(t){e.peekState(t.getPeekStateName(),t)}))}])},JbSi:function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-medium-collab-session",use:"icon-medium-collab-session-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-collab-session"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 5h17v4l5-3.9583V19l-5-4v4H1V5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M18 8v8M6 8l2 4-2 4M11 8l2 4-2 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},JrDC:function(e,t,n){"use strict";function r(e,t){if(t instanceof e)return t.$pk;if(!t.$scope||"object"!=typeof t.$scope)throw new Error("model_utility.findModelPkInScope could not find $scope object on "+t);return r(e,t.$scope)}n.d(t,"a",(function(){return r}))},"K/D1":function(e,t,n){"use strict";var r=n("D57K"),i=n("nsO7"),o=n("uC9d"),s=["DELETE","PUT","POST","PATCH","JSONP"],a="_\\d+_\\d+",u=function(){this.cacheTimes={DO_NOT_CACHE:0,INSTANT:500,SHORT:15e3,MEDIUM:6e4,LONG:6e5,PERPETUAL:1/0},this.rules=[{url:"calendars",methods:["GET"],duration:this.cacheTimes.SHORT},{url:"cloudstorages",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:"courses/"+a,methods:["GET"],duration:this.cacheTimes.LONG},{url:"courses/"+a,methods:s,onUpdate:function(e,t){t(new RegExp("users/.*"))}},{url:"courses/"+a+"/contents/"+a,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/contents/ROOT/children",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/convertToUltra/conversionStatus",methods:["GET"],duration:this.cacheTimes.INSTANT,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/convertToUltra"),i=n.match(r);t(new RegExp("courses/"+i[1]))}},{url:"courses/"+a+"/tools",methods:["GET"],duration:this.cacheTimes.LONG},{url:"courses/"+a+"/assessments/"+a+"/questions",methods:["GET"],duration:this.cacheTimes.MEDIUM},{url:"courses/"+a+"/discussionboards/default/forums/"+a+"/messages/"+a,methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/discussionboards/default/forums/("+a+")"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/discussionboards/default/forums/"+i[2]+"/messages"))}},{url:"courses/"+a+"/gradebook/attempts/"+a,methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/.*"))}},{url:"courses/"+a+"/gradebook/attempts/"+a+"/assessment/answers/"+a+"/grades",methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/.*"))}},{url:"courses/"+a+"/gradebook/columns/"+a,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/columns/"+a+"/grades",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/columns/"+a+"/grades/"+a+"/attempts",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/columns/"+a+"/.+",methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook/columns/("+a+")"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/columns/"+i[2]+"/.*")),t(new RegExp("courses/"+i[1]+"/memberships.*"))}},{url:"courses/"+a+"/gradebook/columns/"+a+"/summary",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/grades/bulkView",methods:["GET"],duration:this.cacheTimes.DO_NOT_CACHE},{url:"courses/"+a+"/gradebook/groupAttempts/"+a+"/activities",methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook/groupAttempts/("+a+")"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/groupAttempts/"+i[2]+"/.*")),t(new RegExp("courses/"+i[1]+"/gradebook/columns/.*"))}},{url:"courses/"+a+"/memberships/"+a,methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/memberships"),i=n.match(r);t(new RegExp("courses/"+i[1]+".*")),t(new RegExp("users/"+a+"/memberships"))}},{url:"courses/"+a+"/memberships",methods:["GET"],duration:this.cacheTimes.SHORT},{url:"courses/"+a+"/users/"+a,methods:["GET"],duration:this.cacheTimes.LONG},{url:"users/"+a,methods:s,onUpdate:function(e,t){t(new RegExp("users/.*"))}},{url:"users/(?:me|"+a+")",methods:["GET"],duration:this.cacheTimes.LONG},{url:"users/"+a+"/memberships",methods:["GET"],duration:this.cacheTimes.LONG},{url:"terms",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:".+",methods:["GET"],duration:this.cacheTimes.INSTANT}]};function c(e){return void 0===e&&(e=""),Array.isArray(e)?e.sort().join(","):e.split(",").sort().join(",")}var l=function(){this.$get=[function(){return{}}]},d=function(){function e(e){var t=this;this.cacheRules=e,this.cachingEnabled=!0,this.cachedExpandedRequests=new Map,this.queuedRequests=new Map,this.requestCache=new Map,this.disableCaching=function(){t.cachingEnabled=!1},this.$get=["$q","$log",o.c,function(e,t,n){var r=this;n.listen((function(e){switch(e.type){case"clear":r.removeCacheEntries(e.pattern||".*")}}));return{request:function(n){if(!r.cachingEnabled||"GET"!==n.method||!r.isApiUrl(n.url)||n.cache)return n;var i=r.handleRequest(n);return i.url.match(/^blob/)?i:function(n){var i=r.makeKeyFromRequest(n);if(!r.queuedRequests.has(i)){var o=e.defer();return o.promise.finally((function(){r.queuedRequests.delete(i)})),r.queuedRequests.set(i,{pendingRequestConfig:o}),e.resolve(n)}return t.info("Easing "+i),r.queuedRequests.get(i).pendingRequestConfig.promise}(i).then((function(e){return e}))},requestError:function(n){return t.error("requestError: ",n),e.reject(n)},response:function(e){if(e.config.url.match(/^blob/)){var t=e.config.headers;return e.config.url=t.originalUrl,e.config.params=JSON.parse(t.originalParams),e}return r.cachingEnabled&&"GET"===e.config.method&&r.isApiUrl(e.config.url)&&!e.config.cache?r.handleResponse(e):e},responseError:function(t){if(!t||!t.config)return e.reject(t);var n=r.makeKeyFromResponse(t);return r.queuedRequests.has(n)&&r.queuedRequests.get(n).pendingRequestConfig.reject(t.data),e.reject(t)}}}],this.removeCacheEntries=function(e){t.requestCache.forEach((function(n,r){(e instanceof RegExp?e:new RegExp(e+"$")).test(n.baseUrl)&&(t.requestCache.delete(r),t.cachedExpandedRequests.delete(n.baseUrl),t.queuedRequests.has(r)&&(t.queuedRequests.get(r).pendingRequestConfig.reject("Canceled Easing: "+r),t.queuedRequests.delete(r)),URL.revokeObjectURL(n.documentUrl))}))},this.requestCachingRules=e.rules,setInterval((function(){var e=(new Date).getTime();t.requestCache.forEach((function(n){e>n.expires&&t.removeCacheEntries(n.baseUrl)}))}),this.cacheRules.cacheTimes.MEDIUM)}return e.prototype.getRule=function(e,t){return this.requestCachingRules.find((function(n){var r=n.urlRegex?n.urlRegex:new RegExp(n.url+"$","i");return n.methods.indexOf(t.toUpperCase())>-1&&r.test(e)}))},e.prototype.handleRequest=function(e){return this.resolveCachedEntry(e)||e},e.prototype.handleResponse=function(e){if(!this.isApiUrl(e.config.url)||e.config.url.match(/^blob/))return e;var t=e.config.method.toUpperCase(),n=e.config.url,i=this.getRule(n,t),o=this.makeKeyFromResponse(e);return i&&!this.requestCache.has(o)&&this.insertCacheEntry(Object(r.__assign)({},e),i.duration),this.resolveEasing(e),e},e.prototype.getCacheEntry=function(e){var t,n=this.makeKeyFromRequest(e),r=this.lookupExpandedCacheEntry(e);if(r?t=r:this.requestCache.has(n)&&(t=this.requestCache.get(n)),t){if((new Date).getTime()<t.expires)return t;this.removeCacheEntries(t.baseUrl)}return{}},e.prototype.getCleanUrl=function(e){return e.slice(e.indexOf("/learn/api/v1")+"/learn/api/v1".length+1)},e.prototype.insertCacheEntry=function(e,t){var n=this.makeKeyFromResponse(e),i=e.config.url,o={documentUrl:URL.createObjectURL(new Blob([JSON.stringify(e.data)],{type:"application/json"})),baseUrl:i,expires:t+(new Date).getTime()};if(this.requestCache.set(n,o),e.config.params&&e.config.params.expand){var s=e.config.params.expand;if(this.cachedExpandedRequests.has(i)){var a=this.cachedExpandedRequests.get(i);this.cachedExpandedRequests.set(i,Object(r.__spreadArrays)(a,[{cacheKey:n,expand:s}]))}else this.cachedExpandedRequests.set(i,[{cacheKey:n,expand:s}])}},e.prototype.isApiUrl=function(e){return e.indexOf("/learn/api/v1")>-1},e.prototype.lookupExpandedCacheEntry=function(e){var t=e.url,n=e.params;if(n&&n.expand&&this.cachedExpandedRequests.has(t)){var r=this.cachedExpandedRequests.get(t).find((function(e){var t=n.expand.split(","),r=e.expand.split(",");return!i.difference(t,r).length}));if(r)return this.requestCache.get(r.cacheKey)}},e.prototype.makeKeyFromRequest=function(e){var t=this.getCleanUrl(e.url);e.params=e.params||{};var n=e.params,i=n.fields,o=n.expand,s=Object(r.__rest)(n,["fields","expand"]),a=c(i),u={url:t,expand:c(o),fields:a,rest:s};return JSON.stringify(u)},e.prototype.makeKeyFromResponse=function(e){return this.makeKeyFromRequest(e.config)},e.prototype.resolveCachedEntry=function(e){if(e.url.match(/^blob/))return e;var t=this.getCacheEntry(e);return t&&t.documentUrl?Object(r.__assign)(Object(r.__assign)({},e),{url:t.documentUrl,params:{},headers:{originalUrl:e.url,originalParams:JSON.stringify(e.params)}}):e},e.prototype.resolveEasing=function(e){var t=this.makeKeyFromResponse(e),n=this.queuedRequests.get(t);if(n){var r=this.resolveCachedEntry(e.config);n.pendingRequestConfig.resolve(r)}},e}();var p="ultra-session-event-existing-window",m="ultra-session-event-new-window",f=function(e){if(e.newValue)if(e.key===p)null==window.sessionStorage.getItem("ultra-session-updating-storage")&&(window.sessionStorage.setItem("ultra-session-updating-storage","updating"),setTimeout((function(){window.localStorage.setItem(m,JSON.stringify(window.sessionStorage)),window.localStorage.removeItem(m),window.sessionStorage.removeItem("ultra-session-updating-storage")}))),window.localStorage.setItem(m,JSON.stringify(window.sessionStorage));else if(e.key===m&&!window.sessionStorage.length)for(var t=JSON.parse(e.newValue),n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];window.sessionStorage.setItem(i,t[i])}},h=n("5MwF");n.d(t,"a",(function(){return g}));var g="ultra.components.services.learn.api.cache";angular.module("ultra.components.services.learn.api.cacheRules",[]).constant("learnApiCache.CacheRules",new u);var v=angular.module(g,["ultra.components.services.learn.api.cacheRules"]);h.a.features.learnApiCaching?v.provider("learnApiCacheService",["learnApiCache.CacheRules",d]).service(o.c,o.a).config(["$provide","$httpProvider","learnApiCacheServiceProvider",function(e,t,n){window.addEventListener("storage",(function(e){(function(e){return[p,m].some((function(t){return t===e.key}))})(e)&&n.disableCaching()})),window.addEventListener("storage",f,!1),localStorage.setItem(p,p),localStorage.removeItem(p);e.decorator("$http",["$delegate",function(e){var t=function(t){if(null!=t.cache)return e(t);var r=n.getRule(t.url,t.method.toUpperCase());return r&&r.onUpdate&&"function"==typeof r.onUpdate&&r.onUpdate(t,n.removeCacheEntries),-1!==s.indexOf(t.method.toUpperCase())&&n.removeCacheEntries(t.url),e(t)};return function(e,t){!function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.each(e,(function(e){t[e]=function(n,r){return t(angular.extend({},r||{},{method:e,url:n}))}}))}("delete","get","head","jsonp"),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.each(e,(function(e){t[e]=function(n,r,i){return t(angular.extend({},i||{},{method:e,url:n,data:r}))}}))}("post","put","patch"),function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];i.each(n,(function(n){Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}))}("defaults","pendingRequests")}(e,t),t}]),URL&&Object.prototype.hasOwnProperty.call(URL,"createObjectURL")&&t.interceptors.push("learnApiCacheService")}]):v.provider("learnApiCacheService",[l]).service(o.c,o.b)},K3JI:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n("wHJ2"),i="ultra.components.directives.hoverMenuOpacity",o=function(){function t(){this.restrict="A",this.link=function(t,n){n.on("focus",".hover-menu a, .hover-menu button",(function(t){0===e("body.hide-focus-outline").length&&e(t.target).closest(".hover-menu").css({opacity:1})})).on("blur",".hover-menu a, .hover-menu button",(function(t){e(t.target).closest(".hover-menu").removeAttr("style")}))}}return t.$inject=["$injector"],t}();r.module(i,[]).directive("bbHoverMenuOpacity",["$injector",function(e){return e.instantiate(o)}])}).call(this,n("5iHu"))},KiLF:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Continuous=new t("CONTINUOUS"),t.DateRange=new t("DATE_RANGE"),t.FixedNumDays=new t("FIXED_NUM_DAYS"),t}(n.n(i).a);t.a=o},Kpdw:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return S})),n.d(t,"serviceName",(function(){return C})),n.d(t,"CREATE_COLUMN_ID",(function(){return w})),n.d(t,"CalculateType",(function(){return k})),n.d(t,"AttemptAggregationModel",(function(){return E})),n.d(t,"CalculationType",(function(){return $})),n.d(t,"parseForumId",(function(){return P}));var r=n("D57K"),i=(n("QLzv"),n("nsO7")),o=n("JfV0"),s=n("nbDY"),a=n.n(s),u=n("Sa5G"),c=n("vYaK"),l=n("KrjC"),d=n("3uIF"),p=n("yCC5"),m=n("Rjd/"),f=n("wgY5"),h=n("XfOu"),g=n("fm95"),v=n("eUpQ"),b=n("6vR2"),y=n("3PCF"),S="ultra.components.services.models.grade.gradeColumn",C=p.fb,w="create",k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Item=new t("ITEM"),t.Category=new t("CATEGORY"),t}(a.a),I=Symbol("forceFetchSummary"),T=[o.HttpStatus.Unauthorized,o.HttpStatus.Forbidden,o.HttpStatus.TooManyRequests],E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.parseModel=function(t){return e.parse.call(this,t)},t.getDefault=function(){return t.Average},t.prototype.getLabelKey=function(){return"components.services.grade.aggregation-model."+this.toString().toLowerCase()},t.prototype.getStudentLabelKey=function(){return"course.content.assessment.overview.gradeBasedOn."+this.toString().toLowerCase()},t.Average=new t("AVERAGE"),t.First=new t("FIRST"),t.Highest=new t("HIGHEST"),t.Last=new t("LAST"),t.Lowest=new t("LOWEST"),t}(a.a),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.NonCalculated=new t("NON_CALCULATED"),t.Total=new t("TOTAL"),t.Average=new t("AVERAGE"),t.WeightedTotal=new t("WEIGHTED_TOTAL"),t.MinMax=new t("MINMAX"),t.Custom=new t("CUSTOM"),t}(a.a);function P(e){var t=e.split("/");return t[t.length-1]}m.a.factory(C,["$http","$ngRedux","restmod","$rootScope","$q",c.serviceName,d.a,l.serviceName,function(e,t,n,s,a,c,l,d){return n.model().mix({grades:{hasMany:p.gb},summary:{hasOne:p.r,hooks:{"before-request":function(e){!this.$owner[I]&&this.$owner.isCalculated()&&(e.cache={get:function(){return{}}})}}},groupAssociations:{hasMany:p.L},anonymousGradingReleaseDate:{serialize:"date"},dueDate:{serialize:"date"},dateCreated:{serialize:"date"},dateModified:{serialize:"date"},peerReviewDueDate:{serialize:"date"},ui:{mask:!0,init:function(){return{}}},$hooks:{"before-request":function(e){if(this.$url()===e.url&&"DELETE"!==e.method){e.params&&e.params.expand?i.includes(e.params.expand,"gradebookCategory")||(e.params.expand+=",gradebookCategory"):e.params=Object(r.__assign)({expand:"gradebookCategory"},e.params)}},"before-save":function(e){e.params||(e.params={}),e.params.expand=["externalGrade","gradebookCategory","columnSummary"]},"after-request":function(e){if(e.data&&e.data.rubricAssociations&&e.data.rubricAssociations.forEach((function(e){h.sortRubricData(e.rubricDefinition)})),e.config&&e.config.params&&e.config.params.expand&&-1!==e.config.params.expand.indexOf("associatedRubrics")){var n=Object(b.a)(e.data);t.dispatch(o.actions.gradebookColumn.setGradebookColumnInStore(n))}},"after-feed":function(){Object.defineProperty(this,"columnName",{get:function(){return this.effectiveColumnName},set:function(e){return this.effectiveColumnName=e,this.effectiveColumnName}})},"after-create":function(e){var n=Object(b.a)(e.data);t.dispatch(o.actions.gradebookColumn.addGradebookColumnToStore(n))}},$extend:{Record:{isTest:function(){return u.B.Test.isEqualTo(this.scoreProviderHandle)},isAssignment:function(){return u.B.UltraAssignment.isEqualTo(this.scoreProviderHandle)},isCalculated:function(){return!$.NonCalculated.isEqualTo(this.calculationType)},isOffline:function(){return this.userCreatedColumn},seemsAttemptBased:function(){return!this.isCalculated()&&!this.isOffline()&&!this.isAttendance()},isDiscussion:function(){return u.B.Discussion.isEqualTo(this.scoreProviderHandle)},isJournal:function(){return u.B.Journal.isEqualTo(this.scoreProviderHandle)},isScorm:function(){return u.B.Scorm.isEqualTo(this.scoreProviderHandle)},isScormSCO:function(){var e=this;if(this.isScorm()){var t=this.ui&&this.ui.content||null,n=t&&!t.isConditionalReleaseLocked()&&t.getScormGradebookItems()||[],r=n&&n.find((function(t){return t.columnId===e.id}));return!(!r||r.root)}return!1},isAttendance:function(){return u.B.Attendance.isEqualTo(this.scoreProviderHandle)},isVisible:function(){return this.visible},isHidden:function(){return!this.visible},isVisibleToStudents:function(){return this.isVisible()},isHiddenFromStudents:function(){return this.isHidden()},isGroupContent:function(){return this.groupContent},isMultipleAttempts:function(){return this.multipleAttempts>1||this.isUnlimitedAttempts()},isSingleAttempt:function(){return 1===this.multipleAttempts},isUnlimitedAttempts:function(){return 0===this.multipleAttempts},isCollectExternalSubmissions:function(){return!!this.collectExternalSubmissions},getNumMissing:function(){return this.isOffline()?this.summary.numNeedsGrading:this.summary.numEligibleToBeGraded-this.summary.numStudentSubmissions()},getNumMissingIfLate:function(){return this.isCalculated()||!this.isLate()?NaN:this.getNumMissing()},getVisibilityAsStudent:function(){return this.isVisibleToStudents()?g.Visibility.Visible:g.Visibility.Hidden},setVisibility:function(e){switch(e){case g.Visibility.Visible:this.visible=!0;break;case g.Visibility.Hidden:this.visible=!1}},canEdit:function(){return this.permissions&&this.permissions.edit},postReadyGrades:function(){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},(function(e){this.ui.numOfGradesPosted=e.data.count})).$asPromise().then((function(e){return e.ui.numOfGradesPosted}))},postReadyGroupAttempts:function(e){var t=this;return this.$send({method:"POST",url:this.$url()+"/groupAssociations/"+e.groupAssociationId+"/postReadyGroupGrades",data:{}},(function(e){t.ui.numOfAttemptsPosted=e.data.count})).$asPromise().then((function(e){return e.ui.numOfAttemptsPosted}))},getGroupGrade:function(t,n){var r=this,i=n?{expand:"instructorFeedback,groupMembersGrades"}:null;return e.get(this.$url()+"/groupAssociations/"+t+"/grades",i&&{params:i}).then((function(e){var t=d.$buildRaw(e.data);return delete t.id,t.groupMembersGrades&&(t.groupMembersGrades=t.groupMembersGrades.map((function(e){return r.grades.$buildRaw(e)}))),t}))},getGroupAttemptByGroupAssociationId:function(e,t){void 0===t&&(t=!1);var n={expand:t?"attempts,toolAttemptDetail,viewUrl":"attempts,toolAttemptDetail",excludeUnavailableMembers:!0};return this.groupAssociations.$new(e).groupAttempts.$fetch(n).$asPromise().then((function(e){return e&&e[0]}))},getGradeIdToAttempt:function(e,t){var n;return this.withParams(e).$send({method:"GET",url:this.$url()+(t?"/groupAttempts":"/attempts")},(function(e){var r=this;Object.keys(e.data.lookup).forEach((function(n){e.data.lookup[n]=t?r.grades.$new(n).groupAttempts.$decode(e.data.lookup[n]):r.grades.$new(n).attempts.$decode(e.data.lookup[n])})),n=e.data})).$asPromise().then((function(){return n}))},loadReviewableAttempts:function(e){return e.reviewableAttemptsOnly=!0,this.getGradeIdToAttempt(e,!1)},getContentGroupIdToGroupAttempt:function(e){var t;return(e?this.withParams(e):this).$send({method:"GET",url:this.$url()+"/groupAttempts"},(function(e){var n=this;Object.keys(e.data.lookup).forEach((function(t){var r=e.data.lookup[t][0];r.submissionResults&&r.submissionResults.results[y.b]&&(r.originalityProcessed=r.submissionResults.results[y.b].originalityProcessed,r.originalityScore=r.submissionResults.results[y.b].originalityScore),e.data.lookup[t]=c.$new(n.courseId).gradebook.groupAttempts.$decode(e.data.lookup[t]),e.data.lookup[t][0].attempts&&(e.data.lookup[t][0].attempts=c.$new(n.courseId).gradebook.attempts.$decode(e.data.lookup[t][0].attempts))})),t=e.data})).$asPromise().then((function(){return t}))},hasEvaluations:function(){return this.getGradeIdToAttempt({}).then((function(e){var t=!1;return e&&e.lookup&&i.each(Object.keys(e.lookup),(function(n){return i.each(e.lookup[n],(function(e){return e&&e.rubricEvaluation&&(t=!0),!t})),!t})),t}))},launchAttempt:function(e,t,n,r){return n&&(e.groupId=r),this.$send({method:"POST",url:this.$url()+(n?"/groupAttempts":"/attempts"),data:e.$wrap&&e.$wrap()||e,params:t},(function(e){this.createdAttempt=n?c.$new(this.courseId).gradebook.groupAttempts.$buildRaw(e.data):c.$new(this.courseId).gradebook.attempts.$buildRaw(e.data)})).$allow(T).$asPromise().then((function(e){var t;return T.indexOf(null===(t=null==e?void 0:e.$response)||void 0===t?void 0:t.status)>-1||null==e||!e.createdAttempt?e:e.createdAttempt}))},countAttempts:function(){var e=a.defer();return this.$send({method:"GET",url:this.$url()+"/attempts/count"},(function(t){var n=null;return t.data&&(n=t.data.count),e.resolve(n)}),(function(t){return e.reject(t)})).$allow([403]),e.promise},timeUntilDueDate:function(e){if(this.dueDate){var t=f(this.dueDate),n=f(v.a.getServerTime());return t.diff(n,e)}return null},daysUntilDueDate:function(){return this.timeUntilDueDate("days")},isLate:function(){return!!this.dueDate&&this.dueDate<=v.a.getServerTime()},isUserReconciler:function(e){return!!(this.delegatedGrading&&this.delegatedGraders&&this.delegatedGraders.some((function(t){return t.userId===e&&t.canReconcile&&!t.isUnassigned})))},forceDelete:function(){var e=this;if(!this.contentId){return(u.B.PartnerCloud.isEqualTo(this.scoreProviderHandle)&&this.linkId?l.delete(this.courseId,this.linkId):this.withParams({onlyIfEmpty:!1}).$destroy().$asPromise()).then((function(){return t.dispatch(o.actions.gradebookColumn.removeGradebookColumnFromStore(e.id)),s.$broadcast("bb-delete-column",e),e}))}throw new Error("Content based column must be deleted by deleting associated content")},hasRubricAssociation:function(){return null!=this.rubricAssociations&&this.rubricAssociations.length>0},getRubricAssociation:function(){return this.hasRubricAssociation()?this.rubricAssociations[0]:null},getAssociatedRubricId:function(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricId:null},getAssociatedRubric:function(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricDefinition:null},setRubricAssociation:function(e){this.rubricAssociations=e?[{rubricId:e}]:[]},forceResolveSummary:function(){var e=this;return this[I]=!0,this.summary.$resolve().$then((function(){delete e[I]}))},forceFetchSummary:function(e){var t=this;return void 0===e&&(e={}),this[I]=!0,this.summary.$fetch(e).$then((function(){delete t[I]}))},alwaysOverride:function(){var e=this,t=!1;return[u.B.Test,u.B.UltraAssignment,u.B.Discussion,u.B.Scorm,u.B.PeerSubmissionsTest].forEach((function(n){n.isEqualTo(e.scoreProviderHandle)&&(t=!0)})),t},isQuestionAnalysisAvailable:function(){return this.isAssignment()||this.isTest()},canSeeFinalGrade:function(e){return this.delegatedGrading?!this.anonymousGrading&&this.isUserReconciler(e.id):!this.anonymousGrading}},Collection:{getOverallColumn:function(){return this.$send({method:"GET",url:this.$url()+"/overall"},(function(e){this.overallList=e.data.results})).$asPromise()},attachRelatedContentsByScoreProviderHandle:function(e){var t=this;if(!this.length)return a.when(this);var n=c.$new(this[0].courseId),r=this.filter((function(t){return e.isEqualTo(t.scoreProviderHandle)})),i=new Set(r.map((function(e){return e.contentId}))),o=Array.from(i.values()).map((function(e){return n.contents.$find(e).$suppressErrorDialog().$asPromise()}));return a.all(o).then((function(e){return r.forEach((function(t){t.ui.content=e.find((function(e){return e.id===t.contentId}))})),t}))},indexOfItemById:function(e){return this.$indexOf((function(t){return t.id===e}))}}}})}])},KrjC:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return p})),n.d(t,"serviceName",(function(){return m}));n("QLzv");var r=n("nsO7"),i=n("wHJ2"),o=n("wgY5"),s=n("Sa5G"),a=n("yCC5"),u=n("Rjd/"),c=n("eUpQ"),l=n("nkTj"),d=n("JfV0"),p="ultra.components.services.models.gradeDetail",m=a.gb;u.a.factory(m,["restmod",l.d,"$ngRedux",function(e,t,n){return e.model().mix({$hooks:{"after-request":function(){n.dispatch(d.actions.gradebookGrade.setInvalidatedGradesInStore(this.$response.data.results))}},attempts:{hasMany:a.cb,hooks:{"after-fetch-many":function(){var e=this;this.forEach((function(t){t.permissions=e.permissions}))}}},column:{ignore:"CU"},groupAttempts:{hasMany:a.hb},user:{belongsTo:a.Ac},ui:{mask:!0,init:function(){return{currentAttemptIndex:0,isCommentBoxShown:!1,areAllAttemptsDeleted:!1}}},lastOverrideDate:{serialize:"date"},$extend:{Record:{isMissing:function(e){return!(this.isGraded()||!(e||i.isUndefined(e)&&!this.isSubmitted())||!this.column||!this.column.dueDate)&&o(this.column.dueDate).isBefore(c.a.getServerTime())},isGraded:function(){return null!=this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade&&""!==this.displayGrade.grade)},isOverrideGrade:function(){return!s.r.NoOverride.isEqualTo(this.manualStatus)&&(null!=this.manualGrade||null!=this.manualScore)},isReadyToPost:function(){return s.r.NoOverride.isEqualTo(this.manualStatus)&&this.isGraded()&&!this.hasGradeBeenPosted||s.r.ReadyToPost.isEqualTo(this.manualStatus)},isPosted:function(){return!this.isCalculatedColumnGrade&&(s.r.NoOverride.isEqualTo(this.manualStatus)&&(this.hasGradeBeenPosted||!Object.prototype.hasOwnProperty.call(this,"hasGradeBeenPosted")&&this.isGraded())||s.r.IsPosted.isEqualTo(this.manualStatus))},isSubmitted:function(){return!(!this.column||!this.column.seemsAttemptBased())&&s.t.NeedsGrading.isEqualTo(this.status)},isUpcoming:function(){if(!this.isGraded()&&!this.isSubmitted()&&this.column){if(this.column.dueDate)return o(this.column.dueDate).isAfter(c.a.getServerTime());if(this.column.seemsAttemptBased())return!0}return!1},isInProgress:function(){return s.r.GradingInProgress.isEqualTo(this.manualStatus)},hasInstructorComments:function(){var e,t,n,r;return!!this.isPosted()&&(this.column.seemsAttemptBased()&&(n=this.ui&&this.ui.attempt,r=this.attempts),!(null===(e=null==n?void 0:n.feedbackToUser)||void 0===e||!e.displayText)||(!!((null==r?void 0:r.length)&&this.hasSomeFeedbackToUser(r))||!(null===(t=this.instructorFeedback)||void 0===t||!t.displayText)))},hasSomeFeedbackToUser:function(e){return e.some((function(e){var t;return!!(null===(t=e.feedbackToUser)||void 0===t?void 0:t.displayText)}))},saveComment:function(e,t,n,i){var o=t?{userId:t}:{};return n&&(o=r.merge(o,n)),r.isString(e)?this.instructorFeedback?this.instructorFeedback.rawText=e:this.instructorFeedback={rawText:e}:this.instructorFeedback=e,i?this.$send({method:"PATCH",url:this.$url(),data:{instructorFeedback:this.instructorFeedback},params:o},(function(e){this.instructorFeedback=e.data.instructorFeedback})):this.withParams(o).$save(["instructorFeedback"])},hasAttempts:function(){return!!this.firstAttemptId},postReadyGrades:function(e){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},(function(e){this.ui.numOfGradesPosted=e.data.count})).$asPromise().then((function(e){return e.ui.numOfGradesPosted}))},getScore:function(){return this.displayGrade&&null!=this.displayGrade.score?this.displayGrade.score.toString():""},isPastDueZero:function(){return null!=this.displayGrade&&!0===this.displayGrade.scoredByAutomaticZero}},Collection:{},Model:{unpack:function(e,t){return t=this.$super(e,t),e.$isCollection?t.forEach((function(t){n(t,e.permissions)})):n(t,e.permissions),t;function n(e,t){e.permissions=t}}}}})}])},"LsF/":function(e,t){e.exports='<div bb-load-bundle="components/directives/save-tray" role="status">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.saving</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.success</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.error</span>\n  </div>\n</div>\n'},LvpZ:function(e,t,n){},MFWY:function(e,t,n){},MISG:function(e,t,n){},MOka:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n("D57K"),i=n("pjml"),o=n("emI2"),s=n("fYJU"),a=n("zPsu"),u=n("aHpC"),c=n("yC9S"),l=n("go4a"),d=n("JfV0"),p="ultra.service.stream.settings",m="streamSettings",f={Calendar:"CAL",NewContentAdded:"CON",NewAssessmentsAdded:"CON",CourseAvailable:"CRS",BlogEntryPosted:"DIS",BlogEntryEdited:"DIS",BlogEntryComment:"DIS",DiscussionReply:"DIS",NewDiscussionForum:"DIS",NewMessages:"MES",NewGradeableItems:"SUB",StudentActivityAvailable:"GRB",StudentGradeDataAvailable:"GRB",StudentsFallingBehind:"GRB",StudentsFallingBehindAbsent:"GRB",StudentsFallingBehindFailing:"GRB",StudentsFallingBehindAbsentFailing:"GRB",NoRecentActivity:"TEL",LowActivity:"TEL",HighActivity:"TEL",GradeAtRisk:"TEL",LowGrade:"TEL",GradeLowered:"TEL",PerformanceIncreased:"TEL",HighGrade:"TEL"},h=function(){function e(e,t,n,r,i,o){var s=this;this.$rootScope=e,this.$q=t,this.preferenceService=n,this.UserModel=r,this.currentUserService=i,this.store=o,this.userSettings=null,c.b.OnRootScope(this.$rootScope,"membership-hidden-status-update",(function(e,t){s._updateMembership(t),s.$rootScope.$broadcast("stream-settings-updated")})),this.subscribeToRedux()}return e.prototype.initializeSettings=function(){var e=this;return this.$q.all([this._getUserMemberships(),this.loadAdminNotificationSettings()]).then((function(){return e._loadUserSettings()}))},e.prototype.subscribeToRedux=function(){var e=this,t=this.store.connect((function(t){var n=d.select.notificationMethodSetting.getAdminNotificationMethodSettings(t),r=d.select.systemPreference.getSystemPreferenceByKey(t,a.SYSTEM_REGISTRY_KEY),i=e._transformRegistrySettings(r);return{adminNotificationSettings:n.concat(i)}}),(function(t){return{loadAdminNotificationSettings:function(){return e.$q.all([t(d.actions.notificationMethodSetting.loadAdminNotificationMethodSettings()),t(d.actions.systemPreference.loadSystemPreference({key:a.SYSTEM_REGISTRY_KEY,shouldLoadWhilePending:!0}))])}}}))(this);this.$rootScope.$on("$destroy",t)},e.prototype._transformRegistrySettings=function(e){var t=a.defaultRegistrySettings;e&&e.value&&(t=JSON.parse(e.value));var n=[];return t.settings.forEach((function(e){n.push({context:d.ContextEnum.COURSE,source:a.NON_NAUTILUS_SOURCE,event:e.id,method:"DA",isEditable:e.isEditable,isEnabled:e.isEnabled})})),n},e.prototype._getUserMemberships=function(){var e=this;return this.userMemberships?this.$q.resolve(Object.values(this.userMemberships)):this.UserModel.$new(this.currentUserService.userId).memberships.$fetch({fields:"id,courseId,courseRole,role,courseCardColorIndex"}).$asPromise().then((function(t){return e.userMemberships=t.reduce((function(e,t){var n;return Object(r.__assign)(Object(r.__assign)({},e),((n={})[t.id]=t,n))}),{}),Object.values(e.userMemberships)}))},e.prototype.reloadStreamMemberships=function(){return this.userMemberships=null,this._getUserMemberships()},e.prototype.save=function(e){var t=this;if(!e)return this.$q.resolve();Object.keys(e).forEach((function(t){e[t].definition||(e[t].definition=a.allSettings.find((function(e){return e.id===t})))}));var n={version:3,settings:Object.keys(e).map((function(t){return{id:e[t].definition.id,isEnabled:e[t].isEnabled}}))};return this.preferenceService.setPreference("ultraui.stream.settings.v2",angular.toJson(n)).then((function(){return t._loadUserSettings()}))},e.prototype._loadLegacyUserSettings=function(){var e=this;return this.preferenceService.getPreference("ultraui.stream.settings",null).then((function(t){if(!t||!t.value)return!1;var n=angular.fromJson(t.value);return e.userSettings=a.allSettings.reduce((function(e,t){var i,o=f[t.id];return Object(r.__assign)(Object(r.__assign)({},e),((i={})[t.id]={definition:t,isEnabled:!!o&&"N"!==n[o]},i))}),{}),!0}))},e.prototype._loadUserSettings=function(){var e=this;return this.preferenceService.getPreference("ultraui.stream.settings.v2",null).then((function(t){if(!t||!t.value)return e._loadLegacyUserSettings().then((function(t){if(!t)return e._loadDefaultSettings()}));var n=angular.fromJson(t.value);e.userSettings={},n.settings.forEach((function(t){var n=a.allSettings.find((function(e){return e.id===t.id}));n&&(e.userSettings[t.id]={isEnabled:t.isEnabled,definition:n})}))}))},e.prototype._loadDefaultSettings=function(){var e=this;return this.loadAdminNotificationSettings().then((function(){e.userSettings=a.allSettings.reduce((function(t,n){var r=n.defaultSetting(e.adminNotificationSettings);return t[n.id]={isEnabled:r,definition:n},t}),{})}))},e.prototype.getUserSettings=function(){var e=this;return this._hasUserSettings()?this.$q.resolve(this.userSettings):this._loadUserSettings().then((function(){return e.userSettings}))},e.prototype._hasUserSettings=function(){return null!==this.userSettings},e.prototype._updateMembership=function(e){var t;this.userMemberships=Object(r.__assign)(Object(r.__assign)({},this.userMemberships),((t={})[e.id]=Object(r.__assign)(Object(r.__assign)({},this.userMemberships[e.id]),e),t))},e.prototype.hidden=function(e){if(!e)return!1;var t=!!this.userMemberships?Object.values(this.userMemberships).find((function(t){return t.course.$pk===e.courseId})):null;if(t&&t.userHasHidden)return!0;if(t&&(e.courseColorClass=Object(l.a)(t)),!this.userSettings||!this.adminNotificationSettings)return!1;for(var n=!1,r=0,i=Object.keys(this.userSettings);r<i.length;r++){var o=i[r],s=this.userSettings[o];if(s.definition.canHandle(e)&&(n=!0,s.definition.isStreamEntryVisible(s.isEnabled,this.adminNotificationSettings)))return!1}return n},e=Object(r.__decorate)([Object(r.__param)(0,Object(u.b)("$rootScope")),Object(r.__param)(1,Object(u.b)("$q")),Object(r.__param)(2,Object(u.b)(o.c)),Object(r.__param)(3,Object(u.b)(i.Pb.serviceName)),Object(r.__param)(4,Object(u.b)(s.b)),Object(r.__param)(5,Object(u.b)("$ngRedux"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(h);angular.module(p,[o.b]).service(m,h)},MROq:function(e,t,n){var r={"./af":"8GSH","./af.js":"8GSH","./ar":"NcOb","./ar-dz":"1ors","./ar-dz.js":"1ors","./ar-kw":"Sc1Y","./ar-kw.js":"Sc1Y","./ar-ly":"GzvP","./ar-ly.js":"GzvP","./ar-ma":"hH25","./ar-ma.js":"hH25","./ar-sa":"u2jB","./ar-sa.js":"u2jB","./ar-tn":"5Mza","./ar-tn.js":"5Mza","./ar.js":"NcOb","./az":"ZVVJ","./az.js":"ZVVJ","./be":"kQaN","./be.js":"kQaN","./bg":"+n5x","./bg.js":"+n5x","./bm":"TTiN","./bm.js":"TTiN","./bn":"aIF2","./bn.js":"aIF2","./bo":"QWb5","./bo.js":"QWb5","./br":"iQoZ","./br.js":"iQoZ","./bs":"EL7g","./bs.js":"EL7g","./ca":"vd/2","./ca.js":"vd/2","./cs":"K+3W","./cs.js":"K+3W","./cv":"Jt3X","./cv.js":"Jt3X","./cy":"sWi3","./cy.js":"sWi3","./da":"YcFX","./da.js":"YcFX","./de":"BKZ+","./de-at":"Oq9h","./de-at.js":"Oq9h","./de-ch":"hHY4","./de-ch.js":"hHY4","./de.js":"BKZ+","./dv":"w8Ej","./dv.js":"w8Ej","./el":"tSbB","./el.js":"tSbB","./en-au":"HgyJ","./en-au.js":"HgyJ","./en-ca":"ZyTy","./en-ca.js":"ZyTy","./en-gb":"exaB","./en-gb.js":"exaB","./en-ie":"yKzn","./en-ie.js":"yKzn","./en-il":"TB59","./en-il.js":"TB59","./en-in":"S70V","./en-in.js":"S70V","./en-nz":"iDxo","./en-nz.js":"iDxo","./en-sg":"zS0P","./en-sg.js":"zS0P","./eo":"4bvN","./eo.js":"4bvN","./es":"GNPT","./es-do":"R7mU","./es-do.js":"R7mU","./es-us":"Nstw","./es-us.js":"Nstw","./es.js":"GNPT","./et":"ZOjb","./et.js":"ZOjb","./eu":"kFC9","./eu.js":"kFC9","./fa":"8Cju","./fa.js":"8Cju","./fi":"vcN1","./fi.js":"vcN1","./fil":"3g1g","./fil.js":"3g1g","./fo":"8Ygf","./fo.js":"8Ygf","./fr":"Y8Ij","./fr-ca":"t+Zl","./fr-ca.js":"t+Zl","./fr-ch":"SPXN","./fr-ch.js":"SPXN","./fr.js":"Y8Ij","./fy":"T3MF","./fy.js":"T3MF","./ga":"NowM","./ga.js":"NowM","./gd":"GJYX","./gd.js":"GJYX","./gl":"MdC8","./gl.js":"MdC8","./gom-deva":"QJjq","./gom-deva.js":"QJjq","./gom-latn":"5j0y","./gom-latn.js":"5j0y","./gu":"fY0S","./gu.js":"fY0S","./he":"ACAV","./he.js":"ACAV","./hi":"3WqV","./hi.js":"3WqV","./hr":"OnNk","./hr.js":"OnNk","./hu":"EQmw","./hu.js":"EQmw","./hy-am":"MNf7","./hy-am.js":"MNf7","./id":"0yow","./id.js":"0yow","./is":"TmOJ","./is.js":"TmOJ","./it":"xD/0","./it-ch":"foQf","./it-ch.js":"foQf","./it.js":"xD/0","./ja":"jOnb","./ja.js":"jOnb","./jv":"lOtj","./jv.js":"lOtj","./ka":"BAN/","./ka.js":"BAN/","./kk":"iNiw","./kk.js":"iNiw","./km":"TUxt","./km.js":"TUxt","./kn":"hQzt","./kn.js":"hQzt","./ko":"ZNZT","./ko.js":"ZNZT","./ku":"S0Tg","./ku.js":"S0Tg","./ky":"JO+T","./ky.js":"JO+T","./lb":"vn/h","./lb.js":"vn/h","./lo":"gnIm","./lo.js":"gnIm","./lt":"6PD3","./lt.js":"6PD3","./lv":"YKe2","./lv.js":"YKe2","./me":"d3TR","./me.js":"d3TR","./mi":"hTlv","./mi.js":"hTlv","./mk":"ffVN","./mk.js":"ffVN","./ml":"ejL1","./ml.js":"ejL1","./mn":"RIsM","./mn.js":"RIsM","./mr":"CPJk","./mr.js":"CPJk","./ms":"d5Hy","./ms-my":"t4T9","./ms-my.js":"t4T9","./ms.js":"d5Hy","./mt":"1KVU","./mt.js":"1KVU","./my":"LsNb","./my.js":"LsNb","./nb":"h+U8","./nb.js":"h+U8","./ne":"2JSI","./ne.js":"2JSI","./nl":"jsZ8","./nl-be":"+h6j","./nl-be.js":"+h6j","./nl.js":"jsZ8","./nn":"mh29","./nn.js":"mh29","./oc-lnc":"zX+o","./oc-lnc.js":"zX+o","./pa-in":"O6bP","./pa-in.js":"O6bP","./pl":"8Bez","./pl.js":"8Bez","./pt":"DDip","./pt-br":"uHm5","./pt-br.js":"uHm5","./pt.js":"DDip","./ro":"baBi","./ro.js":"baBi","./ru":"ecsu","./ru.js":"ecsu","./sd":"e9KM","./sd.js":"e9KM","./se":"CZRU","./se.js":"CZRU","./si":"TO58","./si.js":"TO58","./sk":"K+Lk","./sk.js":"K+Lk","./sl":"QK6v","./sl.js":"QK6v","./sq":"v3Qg","./sq.js":"v3Qg","./sr":"Ndyf","./sr-cyrl":"PGvg","./sr-cyrl.js":"PGvg","./sr.js":"Ndyf","./ss":"2B8G","./ss.js":"2B8G","./sv":"WF5B","./sv.js":"WF5B","./sw":"4VvY","./sw.js":"4VvY","./ta":"dw3T","./ta.js":"dw3T","./te":"4MAb","./te.js":"4MAb","./tet":"/hi0","./tet.js":"/hi0","./tg":"PoVJ","./tg.js":"PoVJ","./th":"OY2w","./th.js":"OY2w","./tl-ph":"UC+K","./tl-ph.js":"UC+K","./tlh":"cWLW","./tlh.js":"cWLW","./tr":"EqYs","./tr.js":"EqYs","./tzl":"fN8o","./tzl.js":"fN8o","./tzm":"6cYq","./tzm-latn":"pdAN","./tzm-latn.js":"pdAN","./tzm.js":"6cYq","./ug-cn":"J+SV","./ug-cn.js":"J+SV","./uk":"6Olw","./uk.js":"6Olw","./ur":"QNGR","./ur.js":"QNGR","./uz":"hLzJ","./uz-latn":"KqOT","./uz-latn.js":"KqOT","./uz.js":"hLzJ","./vi":"EnIJ","./vi.js":"EnIJ","./x-pseudo":"W7dU","./x-pseudo.js":"W7dU","./yo":"QDhB","./yo.js":"QDhB","./zh-cn":"bjMe","./zh-cn.js":"bjMe","./zh-hk":"JFCg","./zh-hk.js":"JFCg","./zh-mo":"5BRa","./zh-mo.js":"5BRa","./zh-tw":"xBDH","./zh-tw.js":"xBDH"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="MROq"},Mc6f:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("yC9S"),a=n("pjml"),u="ultra.components.services.grade.gradeNotation.Service",c="gradeNotationService",l=function(){function e(e,t,n){var r=this;this.$q=e,this.$rootScope=t,this.CourseModel=n,this.courseGradeNotationMap={},s.b.OnRootScope(t,"grade-notation-update",(function(e,t){r.CourseModel.$new(t).gradebook.performancecodes.$fetch().$then((function(e){r.courseGradeNotationMap[t]=e,r.$rootScope.$broadcast("grade-notation-cache-update",t)}))}))}return e.prototype.getGradeNotationsMap=function(e,t){var n=this;if(t&&this.courseGradeNotationMap[e])return this.$q.when(this.courseGradeNotationMap[e]);var r=this.$q.defer();return this.CourseModel.$new(e).gradebook.performancecodes.$fetch().$then((function(t){n.courseGradeNotationMap[e]=t,r.resolve(t)})),r.promise},e.prototype.isValidPerformanceCodeGrade=function(e,t){return!(!t||i.isEmpty(e))&&!!i.find(e,(function(e){return e.code===t}))},e.$inject=["$q","$rootScope",a.o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);o.module(u,[]).service(c,l)},N7x3:function(e,t,n){"use strict";(function(e){var r=n("wHJ2"),i=n("5MwF"),o=n("td+C"),s=n("YzQO"),a=n("gSji"),u=n("myse"),c=function(){function t(e){var t=this;this.integrationService=e,this.integrationForceClick="integration-force-click",this.onClick=function(e){if(!e.originalEvent||!e.originalEvent.manualFireFlag){var n=r.element(e.target),i=Object(s.b)(n)||Object(s.c)(n.parent());t._sendEventMessage(i,a.cb.Click)}},this.onHover=function(e){var n=r.element(e.target),i=Object(s.b)(n);i!==t.lastHoverElementId&&(t.lastHoverElementId=i,t._sendEventMessage(i,a.cb.Hover))},Object(u.subscribeToFramework)("Ultra",(function(e,n){e===u.AnalyticsEventTypes.CLICK_EVENT?t._sendEventMessage(n.analyticsId,a.cb.Click):e===u.AnalyticsEventTypes.HOVER_EVENT&&t._sendEventMessage(n.analyticsId,a.cb.Hover)}))}return t.prototype.addClickListener=function(){i.a.unitTesting||(e(document).on("click",this.onClick),e(document).on(this.integrationForceClick,this.onClick))},t.prototype.addHoverListener=function(){i.a.unitTesting||e(document).on("mouseover",this.onHover)},t.prototype._sendEventMessage=function(e,t){e&&this.integrationService.sendEventMessage({type:a.i,eventType:t,analyticsId:e})},t}();t.a=new c(o.a)}).call(this,n("5iHu"))},NAsp:function(e,t,n){var r={"./color/custom/accommodations.svg":"OuRL","./color/custom/processing-loader.svg":"0FVF","./color/medium/close-2pt.svg":"Q8up","./color/medium/connection-issue.svg":"drRh","./color/medium/hang-up.svg":"6Vd0","./color/medium/onedrive.svg":"OEId","./color/medium/page-help-bubble-active.svg":"sw9H","./color/medium/page-help-bubble.svg":"lRKW","./color/small/add-circle-extended-press.svg":"yjY9","./color/small/add-circle-press.svg":"9/3O","./color/small/audio-on-c.svg":"fW4K","./color/small/away-c.svg":"ShyA","./color/small/chat-c.svg":"/O0j","./color/small/check-circle-c.svg":"pHyo","./color/small/close-circle-c.svg":"8iVT","./color/small/connection-issue-c.svg":"/c0Q","./color/small/connection-issue.svg":"J8OM","./color/small/favorite-selected.svg":"sVv2","./color/small/feedback-c.svg":"WKfH","./color/small/goal-c.svg":"wVo0","./color/small/mobile-issues.svg":"8TQc","./color/small/past-due-date.svg":"TsMv","./color/small/recording.svg":"pjWD","./color/small/square-checked-c.svg":"HSs1","./color/small/time-stop-watch-a.svg":"OIel","./color/small/time-stop-watch.svg":"ZCx8","./solid/custom/sort-arrow-ascending.svg":"/8qJ","./solid/custom/sort-arrow-descending.svg":"10SD","./solid/custom/triangle-down.svg":"c1xu","./solid/custom/triangle-left.svg":"z11z","./solid/custom/triangle-right.svg":"p6mT","./solid/custom/triangle-up.svg":"SdTQ","./solid/medium/ally-download.svg":"o53g","./solid/small/ally-download.svg":"13oI","./stroke/custom/arrow-down.svg":"WMGI","./stroke/custom/arrow-up.svg":"/tFL","./stroke/custom/checkmark.svg":"CR7+","./stroke/custom/helpful-links-layout-left-hc-light.svg":"Brrq","./stroke/custom/helpful-links-layout-right-hc-light.svg":"SjLj","./stroke/custom/helpful-links-layout-text-hc-light.svg":"Qyx0","./stroke/custom/sort-arrows.svg":"dnFJ","./stroke/custom/toggle-chart.svg":"FjE1","./stroke/custom/toggle-grid.svg":"dLuH","./stroke/custom/toggle-table.svg":"l0AI","./stroke/custom/zoom-in.svg":"pyOV","./stroke/custom/zoom-out.svg":"iPBR","./stroke/inline/arrow-down.svg":"gG10","./stroke/inline/arrow-up.svg":"SILo","./stroke/inline/check.svg":"he71","./stroke/inline/sort-arrow-ascending.svg":"0lj0","./stroke/inline/sort-arrow-descending.svg":"5OWO","./stroke/medium/accommodations.svg":"VGLC","./stroke/medium/account.svg":"8TR2","./stroke/medium/add-circle.svg":"ERW5","./stroke/medium/add-feedback.svg":"D40N","./stroke/medium/add-reminder.svg":"fOeM","./stroke/medium/admin-menu.svg":"fLgi","./stroke/medium/alert-error.svg":"Cgy4","./stroke/medium/app.svg":"1Jb1","./stroke/medium/arrow-left.svg":"0yuQ","./stroke/medium/arrow-right.svg":"cJXw","./stroke/medium/arrow.svg":"65zB","./stroke/medium/asl-interpreter.svg":"cKGK","./stroke/medium/assignment.svg":"RLoK","./stroke/medium/attempts.svg":"CmBn","./stroke/medium/attendance.svg":"g7vl","./stroke/medium/attention.svg":"mRyK","./stroke/medium/audio-on.svg":"0HCX","./stroke/medium/audio.svg":"IIWL","./stroke/medium/away.svg":"I4aR","./stroke/medium/back-arrow.svg":"YFue","./stroke/medium/back-to-session.svg":"kyvD","./stroke/medium/back.svg":"a647","./stroke/medium/beast-analytics.svg":"daAw","./stroke/medium/best-fit.svg":"L8sA","./stroke/medium/calculation.svg":"S29l","./stroke/medium/calendar.svg":"uAIC","./stroke/medium/call-on.svg":"GVn/","./stroke/medium/camera.svg":"HnIA","./stroke/medium/capture.svg":"PmZz","./stroke/medium/chat-transcript.svg":"4Yrn","./stroke/medium/chat.svg":"ZMge","./stroke/medium/check-circle.svg":"qK30","./stroke/medium/circle.svg":"bRfL","./stroke/medium/close-captioning.svg":"EtXv","./stroke/medium/close-circle.svg":"XzMV","./stroke/medium/close.svg":"sbbv","./stroke/medium/collab-session.svg":"MpNe","./stroke/medium/collab.svg":"bUel","./stroke/medium/connection-issue.svg":"KfuC","./stroke/medium/connection.svg":"n0lC","./stroke/medium/course-complete.svg":"XpGz","./stroke/medium/courses.svg":"JZHC","./stroke/medium/credit-card.svg":"0+o6","./stroke/medium/current.svg":"6s/a","./stroke/medium/curve-grade.svg":"HveL","./stroke/medium/discussion.svg":"VdwJ","./stroke/medium/documents.svg":"xFSc","./stroke/medium/down-arrow.svg":"Ri2K","./stroke/medium/download.svg":"UiGc","./stroke/medium/draw.svg":"JqCd","./stroke/medium/drop-pin.svg":"8YwD","./stroke/medium/duplicate.svg":"5C8M","./stroke/medium/edit-tool.svg":"9WoR","./stroke/medium/elective.svg":"s9RH","./stroke/medium/erase.svg":"b0fi","./stroke/medium/exam.svg":"H/3X","./stroke/medium/exempt.svg":"1Xl4","./stroke/medium/expand-app.svg":"2fku","./stroke/medium/export.svg":"NcT0","./stroke/medium/feedback.svg":"SdUk","./stroke/medium/filter-options.svg":"hpXv","./stroke/medium/focus.svg":"NbyP","./stroke/medium/folder-closed.svg":"0APo","./stroke/medium/forward-arrow.svg":"aAc7","./stroke/medium/full-screen.svg":"YMNP","./stroke/medium/goal.svg":"hoox","./stroke/medium/grade.svg":"9Z+X","./stroke/medium/grades.svg":"Bgua","./stroke/medium/grid-view.svg":"g7Bp","./stroke/medium/groups.svg":"/cjj","./stroke/medium/halloween.svg":"cAbK","./stroke/medium/hand-pointer.svg":"dtx/","./stroke/medium/hang-up.svg":"PSqB","./stroke/medium/help.svg":"yAc9","./stroke/medium/highlighter.svg":"KCO7","./stroke/medium/history.svg":"OhNG","./stroke/medium/image.svg":"n1Bw","./stroke/medium/import-export.svg":"TVur","./stroke/medium/import.svg":"pK6W","./stroke/medium/information.svg":"n8ST","./stroke/medium/institution.svg":"Xm/s","./stroke/medium/invisible.svg":"vPZ2","./stroke/medium/join-group-session.svg":"K+cJ","./stroke/medium/jump-to.svg":"skfG","./stroke/medium/language.svg":"Dq+u","./stroke/medium/leave-session.svg":"ztV+","./stroke/medium/lightbulb.svg":"ffqk","./stroke/medium/line.svg":"yVci","./stroke/medium/link.svg":"s+Fi","./stroke/medium/live-feedback.svg":"gUsr","./stroke/medium/location.svg":"MAFk","./stroke/medium/lock.svg":"NeZu","./stroke/medium/locked-view.svg":"HqKh","./stroke/medium/logout.svg":"+HDI","./stroke/medium/lower-hand.svg":"QjZS","./stroke/medium/main-menu.svg":"etGt","./stroke/medium/main-speaker.svg":"miOe","./stroke/medium/maximize.svg":"7muB","./stroke/medium/menu.svg":"3lUS","./stroke/medium/merge-windows.svg":"tLCE","./stroke/medium/messages.svg":"T2PE","./stroke/medium/minimize-app.svg":"23ax","./stroke/medium/minimize.svg":"yGeR","./stroke/medium/minus.svg":"xA3v","./stroke/medium/mobile-device.svg":"gdsn","./stroke/medium/mobile-issue.svg":"9YWV","./stroke/medium/mobile-issues.svg":"x91H","./stroke/medium/moderator.svg":"/Ghh","./stroke/medium/more.svg":"UoAW","./stroke/medium/move-item-up-down.svg":"gSSI","./stroke/medium/move-user.svg":"RdE8","./stroke/medium/multi-account.svg":"lhPh","./stroke/medium/mute-audio.svg":"0q/L","./stroke/medium/mute-phone.svg":"adLq","./stroke/medium/mute-video.svg":"FAVe","./stroke/medium/no-time-limit.svg":"mFhv","./stroke/medium/notes.svg":"AA9L","./stroke/medium/notification.svg":"hWS9","./stroke/medium/office-hours.svg":"AZRN","./stroke/medium/ok-connection.svg":"enbS","./stroke/medium/open-folder.svg":"YCIz","./stroke/medium/open-in-new-window.svg":"iX4Q","./stroke/medium/outline.svg":"4s+k","./stroke/medium/overall-grade.svg":"0UAW","./stroke/medium/paginate.svg":"bILe","./stroke/medium/paint-bucket.svg":"fRgH","./stroke/medium/panel-grip.svg":"Lx5L","./stroke/medium/partial-credit.svg":"dbat","./stroke/medium/password.svg":"Ig6M","./stroke/medium/pencil.svg":"9BJE","./stroke/medium/people.svg":"qssJ","./stroke/medium/play-start.svg":"5YT6","./stroke/medium/polling.svg":"oVMH","./stroke/medium/poor-connection.svg":"cn50","./stroke/medium/position-move.svg":"KCJs","./stroke/medium/post-first.svg":"3/ps","./stroke/medium/post.svg":"z84n","./stroke/medium/present.svg":"ogrl","./stroke/medium/presentation-menu.svg":"5awm","./stroke/medium/presenter.svg":"F4cD","./stroke/medium/print.svg":"gzx9","./stroke/medium/profile-user.svg":"tHxT","./stroke/medium/programs.svg":"rnhB","./stroke/medium/raise-hand.svg":"8Le8","./stroke/medium/record.svg":"Kw3I","./stroke/medium/rectangle.svg":"ryQW","./stroke/medium/redo.svg":"nXFp","./stroke/medium/refresh.svg":"c3te","./stroke/medium/reminder.svg":"ERht","./stroke/medium/report.svg":"9Qzo","./stroke/medium/reports.svg":"803s","./stroke/medium/return.svg":"FJfx","./stroke/medium/rubric.svg":"w+Yr","./stroke/medium/save.svg":"3FTl","./stroke/medium/search.svg":"c52B","./stroke/medium/select.svg":"BFbd","./stroke/medium/send.svg":"oiPd","./stroke/medium/settings.svg":"+hBK","./stroke/medium/shape-rectangle.svg":"Z4Uv","./stroke/medium/share-file.svg":"nwGu","./stroke/medium/share.svg":"A49z","./stroke/medium/speaker-view.svg":"AGo1","./stroke/medium/split-screen.svg":"4jkc","./stroke/medium/stop-action.svg":"Yobg","./stroke/medium/stop-recording.svg":"QV7s","./stroke/medium/stream.svg":"38lH","./stroke/medium/telephony.svg":"TAy2","./stroke/medium/test.svg":"ja10","./stroke/medium/text.svg":"6csa","./stroke/medium/three-bar-menu.svg":"zjGe","./stroke/medium/time-limit.svg":"0UiB","./stroke/medium/time.svg":"duWO","./stroke/medium/trash.svg":"Tziq","./stroke/medium/undo.svg":"2p1q","./stroke/medium/unlock.svg":"pLoT","./stroke/medium/up-arrow.svg":"ZxTA","./stroke/medium/upload-file.svg":"Wccl","./stroke/medium/upload.svg":"xBzL","./stroke/medium/user-focus.svg":"EZNX","./stroke/medium/vertical-menu.svg":"wzTk","./stroke/medium/video.svg":"3qpW","./stroke/medium/virtual-classroom.svg":"5TID","./stroke/medium/visible.svg":"yStb","./stroke/medium/visualization.svg":"MwiZ","./stroke/medium/whiteboard.svg":"UxWN","./stroke/small/accommodation.svg":"aM4X","./stroke/small/accommodations.svg":"SXCY","./stroke/small/account.svg":"KQP8","./stroke/small/activity-indicator.svg":"UnOk","./stroke/small/add-circle-extended.svg":"5KWE","./stroke/small/add-feedback.svg":"R3Nw","./stroke/small/add-plus.svg":"er+l","./stroke/small/add-reminder.svg":"drkH","./stroke/small/add.svg":"QSCl","./stroke/small/admin-menu.svg":"Ndma","./stroke/small/ally-score.svg":"joiD","./stroke/small/app.svg":"7nR5","./stroke/small/applause.svg":"ASdA","./stroke/small/approval.svg":"kr5Q","./stroke/small/arrow-down.svg":"UflX","./stroke/small/arrow-left.svg":"yJPd","./stroke/small/arrow-right.svg":"8/Uc","./stroke/small/arrow-up.svg":"3hVx","./stroke/small/arrow.svg":"ZOFS","./stroke/small/asl-interpreter.svg":"DIQu","./stroke/small/assessment-type.svg":"Vn7B","./stroke/small/assignment.svg":"3XtF","./stroke/small/attachment.svg":"E6UP","./stroke/small/attempts.svg":"rDgN","./stroke/small/attendance.svg":"+SO4","./stroke/small/attention.svg":"Gxl0","./stroke/small/audio-on.svg":"t6sY","./stroke/small/audio.svg":"JUdm","./stroke/small/away.svg":"07kN","./stroke/small/back-arrow.svg":"RWMf","./stroke/small/beast-analytics.svg":"lNwH","./stroke/small/best-fit.svg":"Gjzb","./stroke/small/bold.svg":"XNAZ","./stroke/small/bulleted_list.svg":"LEf/","./stroke/small/calculation.svg":"3YMJ","./stroke/small/calendar.svg":"Rhm1","./stroke/small/call-on.svg":"ZFnS","./stroke/small/camera.svg":"AmJs","./stroke/small/capture.svg":"DU9S","./stroke/small/chat-transcript.svg":"4ADj","./stroke/small/chat.svg":"I0ED","./stroke/small/check-circle.svg":"bOvB","./stroke/small/check.svg":"+9S6","./stroke/small/circle.svg":"SBOG","./stroke/small/clear-all.svg":"Hheh","./stroke/small/clear.svg":"yPWz","./stroke/small/close-captioning.svg":"RNsJ","./stroke/small/close-circle.svg":"0XGO","./stroke/small/close.svg":"UHrU","./stroke/small/code.svg":"RbBh","./stroke/small/collab-control.svg":"ZtRU","./stroke/small/collab.svg":"HItb","./stroke/small/complete.svg":"Bj7a","./stroke/small/confused.svg":"fGcJ","./stroke/small/connection-issue.svg":"1r22","./stroke/small/connection.svg":"Jo9U","./stroke/small/content-collection.svg":"Boxo","./stroke/small/content-market.svg":"0yhA","./stroke/small/course-complete.svg":"Qn8g","./stroke/small/courses.svg":"kmrc","./stroke/small/credit-card.svg":"s5Ft","./stroke/small/current.svg":"nOqf","./stroke/small/curve-grade.svg":"PPlD","./stroke/small/custom-content.svg":"BG7w","./stroke/small/disable.svg":"IkXK","./stroke/small/disapproval.svg":"KkWg","./stroke/small/discussion.svg":"PLde","./stroke/small/documents.svg":"LzZ4","./stroke/small/download.svg":"cJ/8","./stroke/small/draw.svg":"b85d","./stroke/small/drop-pin.svg":"xSRV","./stroke/small/duplicate.svg":"7VVB","./stroke/small/edit-tool.svg":"wYVw","./stroke/small/edit.svg":"EwXL","./stroke/small/elective.svg":"QNQD","./stroke/small/erase.svg":"InPb","./stroke/small/exam.svg":"xYAJ","./stroke/small/exclamation.svg":"H8Nq","./stroke/small/expand-app.svg":"vNWe","./stroke/small/expand.svg":"UW6p","./stroke/small/export.svg":"kJUd","./stroke/small/faster.svg":"Qkd3","./stroke/small/favorite-deselected.svg":"aaWY","./stroke/small/feedback.svg":"qgKe","./stroke/small/filter-options.svg":"ye9f","./stroke/small/flag.svg":"6Ico","./stroke/small/focus.svg":"t05C","./stroke/small/folder-closed.svg":"eapX","./stroke/small/format_paragraph.svg":"1LYb","./stroke/small/format_text.svg":"t/V7","./stroke/small/forward-arrow.svg":"mv2q","./stroke/small/full-screen.svg":"uHhh","./stroke/small/goal.svg":"plFP","./stroke/small/grade.svg":"ZhIA","./stroke/small/grades.svg":"s30y","./stroke/small/grid-view.svg":"9ibU","./stroke/small/grid.svg":"NL/t","./stroke/small/groups.svg":"XIzc","./stroke/small/halloween.svg":"RhaW","./stroke/small/hand-pointer.svg":"HdXP","./stroke/small/help.svg":"KTHN","./stroke/small/highlighter.svg":"YKZ9","./stroke/small/history.svg":"zCql","./stroke/small/image.svg":"LKXz","./stroke/small/import-export.svg":"na8z","./stroke/small/import.svg":"+3kY","./stroke/small/information.svg":"yXN4","./stroke/small/insert_formula.svg":"GSX/","./stroke/small/invisible.svg":"LRtU","./stroke/small/italicize.svg":"j8wH","./stroke/small/join-room.svg":"nr3I","./stroke/small/join-session.svg":"W8k6","./stroke/small/jump-to.svg":"taRR","./stroke/small/language.svg":"AxqY","./stroke/small/leave-session.svg":"7RDi","./stroke/small/lightbulb.svg":"7v6i","./stroke/small/line.svg":"Avap","./stroke/small/link.svg":"Chv6","./stroke/small/live-feedback.svg":"i6Dv","./stroke/small/location.svg":"DLAJ","./stroke/small/lock.svg":"gUiS","./stroke/small/locked-view.svg":"GSfB","./stroke/small/logout.svg":"2hRj","./stroke/small/lol.svg":"GatX","./stroke/small/lower-hand.svg":"4mUy","./stroke/small/main-menu.svg":"baJw","./stroke/small/main-speaker.svg":"g2Qi","./stroke/small/maximize.svg":"M109","./stroke/small/menu.svg":"1a/S","./stroke/small/merge-windows.svg":"qOkS","./stroke/small/messages.svg":"ecj2","./stroke/small/minimize-app.svg":"aR6k","./stroke/small/minimize.svg":"3pJM","./stroke/small/minus.svg":"sUq7","./stroke/small/mobile-device.svg":"ntmd","./stroke/small/mobile-issues.svg":"DyFM","./stroke/small/moderator.svg":"ed/e","./stroke/small/more.svg":"jfAU","./stroke/small/move-item-up-down.svg":"ahlU","./stroke/small/move-user.svg":"rvUR","./stroke/small/multi-account.svg":"N5Nh","./stroke/small/mute-audio.svg":"K9Oc","./stroke/small/mute-phone.svg":"wEmS","./stroke/small/mute-video.svg":"rEie","./stroke/small/no-time-limit.svg":"Hq9c","./stroke/small/notes.svg":"BtFV","./stroke/small/notifications.svg":"e22Y","./stroke/small/numbered_list.svg":"rvhq","./stroke/small/office-hours.svg":"XkDZ","./stroke/small/one-drive.svg":"gc0P","./stroke/small/open-folder.svg":"ialE","./stroke/small/open-in-new-window.svg":"Dug2","./stroke/small/outline.svg":"xMn1","./stroke/small/overall-grade.svg":"caHt","./stroke/small/paint-bucket.svg":"aHLu","./stroke/small/partial-credit.svg":"BapN","./stroke/small/password.svg":"BNEa","./stroke/small/people.svg":"4MuT","./stroke/small/personal-settings.svg":"6s6K","./stroke/small/play-start.svg":"tpAI","./stroke/small/play.svg":"wGVu","./stroke/small/polls.svg":"1iT/","./stroke/small/poor-connection.svg":"51h6","./stroke/small/position-move.svg":"qSBm","./stroke/small/post.svg":"nt+N","./stroke/small/presentation-menu.svg":"dJeZ","./stroke/small/presenter.svg":"4PPi","./stroke/small/print.svg":"e1Nv","./stroke/small/programs.svg":"Q6rj","./stroke/small/raise-hand.svg":"6auL","./stroke/small/record.svg":"SVUs","./stroke/small/rectangle.svg":"FcZT","./stroke/small/redo.svg":"0xSL","./stroke/small/refresh.svg":"64pZ","./stroke/small/reminder.svg":"tbZ/","./stroke/small/replies.svg":"g3cs","./stroke/small/reports.svg":"XKO7","./stroke/small/return.svg":"W+uP","./stroke/small/reuse.svg":"GM0s","./stroke/small/rubric.svg":"g7no","./stroke/small/save.svg":"EjcH","./stroke/small/search.svg":"Nlv2","./stroke/small/select.svg":"9irr","./stroke/small/send.svg":"+udw","./stroke/small/settings.svg":"wCOI","./stroke/small/share-file.svg":"vE1/","./stroke/small/share.svg":"gAzZ","./stroke/small/slower.svg":"u0ej","./stroke/small/smiley-face.svg":"Ku5/","./stroke/small/speaker-view.svg":"4dz/","./stroke/small/split-screen.svg":"nlpe","./stroke/small/square-checked.svg":"8cUy","./stroke/small/started.svg":"DiOL","./stroke/small/stop-action.svg":"91sB","./stroke/small/stop-recording.svg":"9Y+/","./stroke/small/stream.svg":"9peW","./stroke/small/streaming.svg":"yiD+","./stroke/small/strikethrough.svg":"Hnt6","./stroke/small/subscript.svg":"gCPt","./stroke/small/superscript.svg":"J/Tp","./stroke/small/telephony.svg":"9qUz","./stroke/small/test.svg":"62Vr","./stroke/small/text.svg":"he7v","./stroke/small/time-limit.svg":"4fdl","./stroke/small/time.svg":"c16V","./stroke/small/timer.svg":"5bSd","./stroke/small/trash.svg":"kycY","./stroke/small/type-size.svg":"as5R","./stroke/small/underline.svg":"kn/R","./stroke/small/undo.svg":"LiOJ","./stroke/small/unlinked.svg":"7tYg","./stroke/small/unlocked.svg":"8AVT","./stroke/small/upload-cloud.svg":"EVOf","./stroke/small/upload-file.svg":"zPwf","./stroke/small/upload.svg":"36KB","./stroke/small/user-focus.svg":"A0+f","./stroke/small/user.svg":"CCJi","./stroke/small/video.svg":"dm6y","./stroke/small/virtual-classroom.svg":"ih/T","./stroke/small/visible.svg":"HMmB","./stroke/small/volume.svg":"KQsT","./stroke/small/whiteboard.svg":"Sn/J"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="NAsp"},"NI+y":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("D57K"),i="ANALYTICS_HISTORY",o=function(){function e(){this.analytics=[],this.maxHistorySize=30,this.storageKey=i}return e.prototype.setStorage=function(e,t){var n=this;return this.browserStorage=e,this.storageType=t,this.getHistoryFromStorage().then((function(e){return e&&(n.analytics=e.concat(n.analytics),n.setMaxHistorySize(n.maxHistorySize)),e}))},e.prototype.addHistory=function(e){this.analytics.push({action:e.action,analyticsId:e.analyticsId,screenDimension:e.screenDimension,timestamp:(new Date).toUTCString()}),this.analytics.length>this.maxHistorySize&&this.analytics.shift(),this.browserStorage.saveToStorage(this.storageKey,this.analytics,this.storageType)},e.prototype.getHistoryFromStorage=function(){return this.historyRestoredPromise=Promise.resolve(this.browserStorage.getFromStorage(this.storageKey,this.storageType)),this.historyRestoredPromise},e.prototype.getHistory=function(){return Object(r.__awaiter)(this,void 0,Promise,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.historyRestoredPromise];case 1:return e.sent(),[2,this.analytics]}}))}))},e.prototype.clearHistory=function(){this.historyRestoredPromise=null,this.analytics=[],this.browserStorage.saveToStorage(this.storageKey,this.analytics,this.storageType)},e.prototype.setMaxHistorySize=function(e){e>0&&Number.isInteger(e)&&(this.maxHistorySize=e,this.analytics=this.analytics.slice(-this.maxHistorySize))},e}();t.b=new o},NMEb:function(e,t,n){"use strict";n("41sU");var r=n("wHJ2"),i=function(){function e(){}return e.convertToGrayscale=function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=e.naturalWidth,i=e.naturalHeight;t.width=r,t.height=i,n.drawImage(e,0,0);for(var o,s=n.getImageData(0,0,r,i),a=s.data.length,u=0;u<a;u+=4)o=(s.data[u]+s.data[u+1]+s.data[u+2])/3,s.data[u]=o,s.data[u+1]=o,s.data[u+2]=o;return n.putImageData(s,0,0,0,0,s.width,s.height),t.toDataURL()},e}();n.d(t,"a",(function(){return o}));var o="ultra.components.directives.imageGrayscale",s=function(){function e(e,t,n){this.scope=e,this.element=t,this.attributes=n,"true"===this.attributes.bbImageGrayscale&&u()&&t.one("load",this.onLoadCallback())}return e.prototype.onLoadCallback=function(){var e=this;return function(){var t=i.convertToGrayscale(e.element[0]);e.element[0].src=t}},e}(),a=function(){this.restrict="A",this.link=function(e,t,n){return new s(e,t,n)}};function u(){var e=document.documentMode;return 10===e||11===e}var c=r.module(o,[]);u()&&c.directive("bbImageGrayscale",["$injector",function(e){return e.instantiate(a)}])},NXdT:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n("D57K"),i=(n("LNcM"),n("nh++"),n("nsO7")),o=n("zFCC"),s="bbIntersectionObservableDirective";function a(e,t){return void 0===t&&(t=null),function(n,r,o,s,a){var u=this,c=s[s.length-1],l=Object(i.once)((function(){e.call(u,n,r,o,s,a)})),d=l;t&&t>0?d=Object(i.debounce)((function(){l(),n.$evalAsync(i.noop)}),t):d.cancel=i.noop,c?c.link(r[0],n,(function(e,t,n){n.isIntersecting?d():d.cancel()})):l()}}function u(e){return void 0===e&&(e=null),function(t){var n=t,r=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.apply(this,t),this.require=[].concat(this.require||[]).concat(["^^?"+o.a]),this.link=a(this.link||i.noop,e)};return r.prototype=n.prototype,Object.assign(r,t)}}!function(){function e(){}e.prototype.link=function(e,t,n,i){for(var o=[],s=4;s<arguments.length;s++)o[s-4]=arguments[s];return a(this.linkInView).apply(this,Object(r.__spreadArrays)([e,t,n,i],o))},e.prototype.getRequiredControllers=function(){return[]},Object.defineProperty(e.prototype,"require",{get:function(){return[].concat(this.getRequiredControllers()).concat(["^^?"+o.a])},set:function(e){},enumerable:!0,configurable:!0})}();angular.module(s,[]).directive("bbIntersectionObservable",["$compile",function(t){return{transclude:"element",priority:6e3,terminal:!0,require:"^^?"+o.a,restrict:"A",link:function(n,o,s,a,u){if(!a)return u((function(e,t){o.replaceWith(e)}));var c=Object(r.__assign)({placeholder:"div",debounce:0},n.$eval(s.bbIntersectionObservable||"{}")),l=e("<"+c.placeholder+' class="intersection-observable-placeholder"></'+c.placeholder+">");t(l)(n),o.replaceWith(l);var d=Object(i.debounce)(Object(i.once)((function(){u((function(e,t){a.unlink(l[0]),l.replaceWith(e)}))})),c.debounce);a.link(l[0],n,(function(e,t,n){n.isIntersecting?d():d.cancel()}))}}}])}).call(this,n("5iHu"))},Nrpd:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("wHJ2"),i=n("0JpG"),o=n("pjml"),s=n("TnpK"),a=n("MOka"),u=n("Sa5G"),c=n("5MwF"),l="ultra.base.notification-settings.routes";r.module(l,[i.moduleName,s.b]).config([s.c,function(e){e.peekState("notification-settings",{abstract:!0,require:function(){return n.e(608).then(n.bind(null,"gE0d"))},resolve:{mobileDistributorSettings:[o.T.serviceName,function(e){return e.$build().courseSettings.$new(u.x.Mobile).$fetch().$allow([400])}],isMobileDistributorActive:["$q","mobileDistributorSettings","memberships",function(e,t,n){var r=n.length>0,i=n.every((function(e){return e.isStudentMembership()}));return c.a.features.instructorPushNotifications||r&&i?t.$then((function(e){return!!e.settings})).$asPromise():e.resolve(!1)}],notificationGeneralSettings:[o.S.serviceName,function(e){return e.$build().$fetch().$asPromise()}],memberships:[a.b,function(e){return e.reloadStreamMemberships()}]}}).peekState("notification-settings.content",{url:"/notification/settings?tab",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/notifications-settings/base-notifications-settings")}],memberships:[a.b,function(e){return e.reloadStreamMemberships()}]},views:{"email-settings@":{require:function(){return n.e(680).then(n.bind(null,"IwlP"))}},"stream-settings@":{require:function(){return n.e(713).then(n.bind(null,"wgch"))},resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/stream/base-stream")}]}},"sms-settings@":{require:function(){return Promise.all([n.e(28),n.e(48),n.e(659)]).then(n.bind(null,"EKn0"))}},"mobile-settings@":{require:function(){return n.e(681).then(n.bind(null,"pVU+"))}}}})}])},OAwL:function(e,t,n){},OBf2:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u}));var r,i=n("5MwF"),o=n("Q/M7"),s="cloud.account.tokens";!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Failed=2]="Failed"}(r||(r={}));var a=function(){},u=function(){function e(e,t,n,o,s){this.$q=e,this.bbLocalize=t,this.$timeout=n,this.bbScriptLoader=o,this.preference=s,this.credentials={},this.status=r.Uninitialized,this.enabledServices=i.a.kloudlessServices}return Object.defineProperty(e.prototype,"isInitialized",{get:function(){return this.status===r.Initialized},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this,t=this.$q.defer(),n=this.loaderUrl||"https://kloudless.blackboardcdn.com/loader/js/loader.js",o=n.substring(0,n.indexOf("/loader"))+"/authenticator/js/kloudless-authenticator.js";if(this.status===r.Initialized)t.resolve();else if(this.status===r.Failed)t.resolve();else{var s,a=!1,u=r.Uninitialized,c=r.Uninitialized,l=function(){a||u!==r.Uninitialized&&c!==r.Uninitialized&&(u===r.Initialized?(e.status=r.Initialized,t.resolve()):(e.status=r.Failed,t.resolve()),a=!0,e.$timeout.cancel(s))};s=this.$timeout((function(){e.authenticator||(c=r.Failed,console.error("Authenticator initialization timed out. Disabling Authenticator Service.")),e.explorer||(u=r.Failed,console.error("Kloudless initialization timed out.  Disabling Kloudless Service.")),l()}),i.a.kloudlessInitializationTimeout||1e4),this.$q.all({Kloudless:this.bbScriptLoader.getScript(n,{exports:"Kloudless"}).then((function(t){e.explorer=t.explorer,u=r.Initialized,l()})),KloudlessAuth:this.bbScriptLoader.getScript(o,{exports:"Kloudless"}).then((function(t){e.authenticator=t.authenticator,c=r.Initialized,l()}))}).catch((function(){e.authenticator||(c=r.Failed,console.error("Failed to load kloudless authenticator. Disabling Authenticator Service.")),e.explorer||(u=r.Failed,console.error("Failed to load kloudless.  Disabling Kloudless Service.")),l()}))}return t.promise},e.prototype.getExplorer=function(e){var t=this,n=e?this.explorerInstance_multi:this.explorerInstance_single;if(!n){var r={app_id:this.clientId,retrieve_token:!0,multiselect:e,display_backdrop:!0,create_folder:!1,types:["files"]};(this.enabledServices||[]).length>0&&(r.services=this.enabledServices),this.apiUrl&&(r.base_url=o.i(this.apiUrl)),this.useLoaderExplorer&&(r.use_loader_explorer=this.useLoaderExplorer),r.inst_prov_type=this.instProvType,r.inst_domain=this.instDomain,r.persist="none",(n=this.explorer(r)).on("success",(function(e){t.currentChooserPromiseObject&&(t.currentChooserPromiseObject.resolve(e),t.currentChooserPromiseObject=null)})),n.on("cancel",(function(){t.currentChooserPromiseObject&&(t.currentChooserPromiseObject.resolve(),t.currentChooserPromiseObject=null)})),n.on("error",(function(e){t.currentChooserPromiseObject&&(t.currentChooserPromiseObject.reject(e),t.currentChooserPromiseObject=null)})),n.on("addAccount",(function(e){t.preference.getPreference(s).then((function(n){var r=t.deleteKloudlessAccount(JSON.parse(n.value),e.id);r.push(e),t.preference.setPreference(s,JSON.stringify(r))})).catch((function(){var n=[];n.push(e),t.preference.setPreference(s,JSON.stringify(n))}))})),n.on("deleteAccount",(function(e){t.preference.getPreference(s).then((function(n){var r=t.deleteKloudlessAccount(JSON.parse(n.value),e);t.preference.setPreference(s,JSON.stringify(r))}))})),e?this.explorerInstance_multi=n:this.explorerInstance_single=n}return n},e.prototype.openFilePicker=function(e,t){var n=this;if(this.currentChooserPromiseObject){var i=this.$q.defer();return i.reject(new Error("multiple explorer instances are not allowed")),i.promise}return this.currentChooserPromiseObject=this.$q.defer(),this.init().then((function(){if(n.status===r.Initialized){var i=n.getExplorer(t),o=n.bbLocalize.getLocale(e);return n.preference.getPreference(s,"[]",!0).then((function(e){var t=JSON.parse(e.value).map((function(e){return e.bearer_token.key}));i.update({locale:o,tokens:t}),i.choose()})).catch((function(e){console.error(e);i.update({locale:o,tokens:[]}),i.choose()}))}})),this.currentChooserPromiseObject.promise},e.prototype.getKloudlessInfo=function(){return{client_id:this.clientId,base_url:this.apiUrl}},e.prototype.deleteKloudlessAccount=function(e,t){return e.filter((function(e){return e.id!==t}))},e}()},OMme:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f}));var r=n("wHJ2"),i=n("pjml"),o=n("vdfi"),s=n("bF8R"),a=n("0JpG"),u=n("JXhc"),c=n("TnpK"),l=n("Qbdf"),d=n("Sa5G"),p=n("nmzr"),m="base.proctoring-attempt",f="ultra.base.proctoring.routes";r.module(f,[a.moduleName,c.b,l.b]).config([c.c,l.c,function(t,r){var f,h;t.baseState(m,{url:"^/proctoring/attempt?courseId&contentId&password",peekStates:["conversations",p.CourseRoutes.COURSE_MESSAGE,"assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-view",o.b,u.b],onEnter:function(){e("body").addClass("proctoring-attempt-open")},onExit:function(){e("body").removeClass("proctoring-attempt-open")},resolve:(f={},f[l.d]=r.resolve,f.contentData=[l.d,s.b,c.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],f.translations=[a.serviceName,function(e){return e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])}],f.currentContent=["contentData",function(e){return e.courseContent}],f.currentColumn=["contentData",function(e){return e.gradingColumn}],f.attempt=["$q",l.d,"contentData",i.C.serviceName,i.H.serviceName,c.d,function(e,t,n,r,o,s){var a=n.courseContent,u=(n.groupAttempt||n.attempt,e.defer()),c={scoreProviderHandle:d.B.Test,status:i.C.AttemptStatus.InProgress,toolAttemptDetail:{"resource/x-bb-assessment":{type:i.d.AssessmentType.Test,password:s.nextParams.password}}},l=a.isGroupContent?o.$build(c):r.$build(c);return n.gradingColumn.launchAttempt(l,{},a.isGroupContent,a.isGroupContent?a.assignedGroups[0].groupId:null).then((function(e){var n=e.id;a.isGroupContent?t.gradebook.groupAttempts.$find(n,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then((function(e){u.resolve(e)})):t.gradebook.attempts.$find(n,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then((function(e){u.resolve(e)}))})),u.promise}],f),require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(11),n.e(14),n.e(1),n.e(533)]).then(n.bind(null,"RTst"))},pageTitle:"components.services.proctoring.delivery.attempt.pageTitle",peekViewName:"proctored-assessment-peek"}).baseState("base.proctoring-review",{url:"^/proctoring/review?courseId&contentId&attemptId",peekStates:[],onEnter:function(){e("body").addClass("proctoring-attempt-open")},onExit:function(){e("body").removeClass("proctoring-attempt-open")},resolve:(h={translations:[a.serviceName,function(e){return e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])}]},h[l.d]=r.resolve,h.currentContent=[l.d,c.d,function(e,t){return e.contents.$find(t.nextParams.contentId).$asPromise()}],h.currentAttempt=[l.d,c.d,function(e,t){return e.gradebook.attempts.$find(t.nextParams.attemptId,{expand:"toolAttemptDetail,alignedGoals,viewUrl"}).$asPromise()}],h.currentGradedQuestionAttempts=["$q","currentAttempt",function(e,t){var n=e.defer();return t.assessment.gradedQuestionAttempts.$fetch({expand:"questionAttempt.question,questionAttempt.answerCorrectness"}).$asPromise().then((function(e){e.setPostStatusAndGroupAttemptId(t),n.resolve(e)})),n.promise}],h),require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(536)]).then(n.bind(null,"Mpwm"))},pageTitle:"components.services.proctoring.delivery.review.pageTitle"})}])}).call(this,n("5iHu"))},ORAk:function(e,t){e.exports='<div>\n    <div bb-dir>\n        <div ui-view="{0}" bb-offcanvas-pausal-scope></div>\n    </div>\n</div>'},OTLg:function(e,t,n){"use strict";var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s=n("vYaK"),a=n("f8ya"),u=function(){function e(e){this.content=e,this._groups=[],this._memberships=[],this.counts={count:0,withAccommodationCount:0,dueDateAccommodationCount:0,timeLimitAccommodationCount:0,maxLimit:0},this.refreshGroups()}return Object.defineProperty(e.prototype,"groups",{get:function(){return this._groups},set:function(e){var t=this;this.dueDateGroups=[],this.timeLimitGroups=[],this._groups=null!=e?e.filter((function(e){return e.accommodation=a.a.fromTypes(e.dueDateExceptionType,e.timeLimitExceptionType),e.accommodation.dueDate.hasAccommodation&&t.dueDateGroups.push(e),e.accommodation.timeLimit.hasAccommodation&&t.timeLimitGroups.push(e),e.accommodation.hasAccommodation})):[]},enumerable:!0,configurable:!0}),e.prototype.sortGroups=function(e){this._groups.sort(e),this.dueDateGroups.sort(e),this.timeLimitGroups.sort(e)},e.prototype.refreshGroups=function(){null!=this.content&&(this.groups=this.content.assignedGroups)},Object.defineProperty(e.prototype,"memberships",{get:function(){return this._memberships},set:function(e){var t=this;this.dueDateMembers=[],this.timeLimitMembers=[],this._memberships=null!=e?e.filter((function(e){var n=e.accommodation();return n.dueDate.hasAccommodation&&t.dueDateMembers.push(e),n.timeLimit.hasAccommodation&&t.timeLimitMembers.push(e),n.hasAccommodation})):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nGroups",{get:function(){return this.groups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nGroupsDueDate",{get:function(){return this.groups.filter((function(e){return e.accommodation.dueDate.hasAccommodation})).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nGroupsTimeLimit",{get:function(){return this.groups.filter((function(e){return e.accommodation.timeLimit.hasAccommodation})).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nUsers",{get:function(){return this.counts.withAccommodationCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nUsersDueDate",{get:function(){return this.counts.dueDateAccommodationCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nUsersTimeLimit",{get:function(){return this.counts.timeLimitAccommodationCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGroupContent",{get:function(){if(null==this.content)return!1;var e=this.content.assignedGroups&&0!==this.content.assignedGroups.length;return this.content.isGroupContent||e||0!==this.groups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstances",{get:function(){return this.isGroupContent?this.nGroups:this.nUsers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstancesDueDate",{get:function(){return this.isGroupContent?this.nGroupsDueDate:this.nUsersDueDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstancesTimeLimit",{get:function(){return this.isGroupContent?this.nGroupsTimeLimit:this.nUsersTimeLimit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstancesShown",{get:function(){if(this.isGroupContent){if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nGroups;if(this.showDueDateAccommodation)return this.nGroupsDueDate;if(this.showTimeLimitAccommodation)return this.nGroupsTimeLimit}else{if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nUsers;if(this.showDueDateAccommodation)return this.nUsersDueDate;if(this.showTimeLimitAccommodation)return this.nUsersTimeLimit}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAccommodation",{get:function(){return this.showDueDateAccommodation||this.showTimeLimitAccommodation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDueDateAccommodation",{get:function(){return null!=this.content&&(this.content.hasDueDate()&&this.content.getDueDate()&&this.hasDueDateAccommodation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTimeLimitAccommodation",{get:function(){return null!=this.content&&(this.content.getTimedTestDetail().hasTimeLimit&&this.hasTimeLimitAccommodation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAccommodation",{get:function(){return this.hasDueDateAccommodation||this.hasTimeLimitAccommodation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDueDateAccommodation",{get:function(){return this.nInstancesDueDate>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTimeLimitAccommodation",{get:function(){return this.nInstancesTimeLimit>0},enumerable:!0,configurable:!0}),e}();n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var c="ultra.services.accommodation.Service",l="accommodationService",d=["id","isAvailable","role","user.*","userId","courseRole","dueDateExceptionType","timeLimitExceptionType","permissions","user.rowStatus"],p=Object(r.__spreadArrays)(d,["displayOrder"]),m=["alignedGoals","assignedGroups","isGroupContent"],f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(function(){function e(e){this.courseModel=e,this._cache={},this._invalidCache={}}return e.prototype.createContentAccommodation=function(e){var t=new u(e);return null!=e&&e.id&&(e.assignedGroups&&!this._invalidCache[e.id]?t.refreshGroups():this.fetchGroupsOrCounts(t)),t},e.prototype.getContentAccommodation=function(e){return null==e?this.createContentAccommodation(e):((null==this._cache[e.id]||this._invalidCache[e.id])&&(this._cache[e.id]=this.createContentAccommodation(e),this._invalidCache[e.id]=!1),this._cache[e.id])},e.prototype.forceNewContentAccommodation=function(e){null!=e&&(this._invalidCache[e.id]=!0)},e.prototype.invalidateContentAccommodationOtherThan=function(e){var t=this;null!=e&&Object.keys(this._cache).forEach((function(n){n!==e.id&&(t._invalidCache[n]=!0)}))},e.prototype.refreshAccommodation=function(e){null!=e.content&&(e.isGroupContent?e.refreshGroups():this.fetchCount(e.content.courseId,e))},e.prototype.fetchGroupsOrCounts=function(e){var t=this;null!=e.content&&(null==e.content.isGroupContent||e.isGroupContent?e.content.$fetch({fields:m.join(","),expand:"selfEnrollmentGroups.group"}).$then((function(n){e.refreshGroups(),e.isGroupContent||t.fetchCount(n.courseId,e)})):this.fetchCount(e.content.courseId,e))},e.prototype.sortGroupsByTitle=function(e){e.sortGroups((function(e,t){return e.groupTitle.localeCompare(t.groupTitle)}))},e.prototype.fetchCount=function(e,t){this.courseModel.$new(e).memberships.getDetailsCount().then((function(e){t.counts=e}))},e.prototype.fetchMemberships=function(e,t){this.courseModel.$new(e).memberships.$refresh({fields:d.join(","),sort:"user.givenName"}).$then((function(e){return t.memberships=e}))},e.$inject=[s.serviceName],e}());i.module(c,[o.Q]).service(l,f)},ObAk:function(e,t,n){"use strict";var r=n("gSji"),i=function(){var e=this;this.subscribeToEvents=function(t,n){t.subscriptions.forEach((function(t){if(e.checkIfValidSubscription(t)){var r=e.subscriptions.get(t)||new Set;r.add(n),e.subscriptions.set(t,r);var i=e.subscribeCallbacks.get(t);i&&i.forEach((function(e){return e(n)}))}else console.warn("Received subscription to invalid event type "+t)}))},this.unsubscribeFromEvents=function(t,n){t.subscriptions.forEach((function(t){if(e.subscriptions.has(t)){var r=e.subscriptions.get(t);r.delete(n),e.subscriptions.set(t,r);var i=e.unsubscribeCallbacks.get(t);i&&i.forEach((function(e){return e(n)}))}else console.warn("Integration is not subscribed to "+t+", not unsubscribing")}))},this.onSubscriptionEventCallback=function(t,n){var r=e.subscribeCallbacks.get(t)||[];return r.push(n),e.subscribeCallbacks.set(t,r),function(){return e.removeCallback(t,n,e.subscribeCallbacks)}},this.onUnsubscriptionEventCallback=function(t,n){var r=e.unsubscribeCallbacks.get(t)||[];return r.push(n),e.unsubscribeCallbacks.set(t,r),function(){return e.removeCallback(t,n,e.unsubscribeCallbacks)}},this.getSubscribedIntegrations=function(t){return e.subscriptions.get(t)||new Set},this.checkIfValidSubscription=function(e){return Object.values(r.cb).some((function(t){return t===e}))},this.removeCallback=function(e,t,n){if(n.has(e)){var r=n.get(e);r.splice(r.indexOf(t),1),n.set(e,r)}},this.subscriptions=new Map,this.subscribeCallbacks=new Map,this.unsubscribeCallbacks=new Map};t.a=i},OcoR:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));n("3Yz5");var r=n("wHJ2"),i=n("Fvsw"),o=n("oQrK"),s=n("lEL+"),a=n("Ediv"),u=n("yC9S"),c="ultra.components.directives.firstVisit",l=function(){function t(e,t,n){var r=this;this.$q=e,this.bbContext=t,this.timeout=n,this.restrict="E",this.template=a,this.link=function(e,t,n){r.alterBodyStyles(e,"ftue-on");var i="ultraui.first.time."+n.path+"."+n.place+".visited";e.firstVisit=!1,e.loadImage=function(e,t,n,r){void 0===r&&(r=null);var i=n.inViewTarget;e&&"both"===t&&!i.src.match(new RegExp(r+"$"))&&(i.src=r)},r.bbContext.getPreference(i,"false").then((function(n){"false"===n.value?(e.firstVisit=!0,r.bbContext.setPreference(i,"true"),r.resizeWelcomeWindow(e,t)):"true"===n.value&&(e.firstVisit=!1)}))}}return t.prototype.alterBodyStyles=function(t,n){e("body").addClass(n),t.$on("$destroy",(function(){e("body").removeClass(n)}))},t.prototype.resizeWelcomeWindow=function(t,n){var r,i=this,s=function(){var e=n.find(".current-view"),t=e.offset().top,r=i.$q.defer(),o=i.$q.defer();n.closest("body").animate({scrollTop:t},{duration:500,always:function(){r.resolve()}}),n.closest("html").animate({scrollTop:t},{duration:500,always:function(){o.resolve()}}),i.$q.all([r.promise,o.promise]).then((function(){return e.find("a.ftue-img").focus()}))},a=function(t){var n=e(t.target).closest(".ftue-new-slide").next();e(n).addClass("current-view").siblings().removeClass("current-view"),s()};n.on("click",".scroll-button",a),o.a.detect().desktop()&&u.b.OnWindow("resize",(function(){i.timeout.cancel(r),r=i.timeout((function(){for(var t=n.find(".ftue-new-slide"),r=0;r<t.length;r++){var i=t.eq(r),o=i.find(".slide-content").height()+i.find(".slide-control").height()+parseInt(i.find(".slide-content").css("top"),10)+40;i.css("min-height",o);var a=e(window).height();a>o&&i.css("height",a)}s()}),t,250,!1)}),t),t.$on("$destroy",(function(){n.off("click",".scroll-button",a)}))},t.$inject=["$q",i.b,s.b],t}();r.module(c,[i.a,"angular-inview",s.a]).directive("bbFirstVisit",["$injector",function(e){return e.instantiate(l)}])}).call(this,n("5iHu"))},OmEq:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r="[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,24}\\s*",i=new RegExp("^"+r+",?$","i"),o=new RegExp("^"+r+"(,+\\s*\\n*"+r+")*,*\\s*$","i")},OvxF:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("T4UF"),n("67oV");var r=n("nsO7"),i=n("wHJ2"),o=n("0JpG"),s=n("XGja"),a=n("+4Px"),u=n("mkvA"),c="ultra.components.directives.modal",l=function(){function e(e,t,n,i,o){this.scope=e,this.element=t,this.attrs=n,this.transcludes=i,this.bbLocalize=o,this.ariaType="dialog",this.ariaType=e.modalAriaType?e.modalAriaType:this.ariaType,this.analyticsIdTagPrefix=e.analyticsIdTagPrefix||"";var s=e.modalTranslateOptions&&e.modalTranslateOptions();this.titleKey=e.modalTitleKey,this.titleString=o.translateSync(r.merge({key:e.modalTitleKey},s?s.title:{})),this.dismissKey=e.modalDismissKey,(e.modalDismissKey||s&&s.dismiss)&&(this.dismissString=o.translateSync(r.merge({key:e.modalDismissKey},s?s.dismiss:{})));var a=t.find("[name=modal-footer] button");t.find(".reveal-modal__footer").addClass("buttons-"+a.length+"-md")}return e.prototype.handleKeyDown=function(e){e.keyCode===a.u?(e.preventDefault(),e.shiftKey?s.c(this.element):s.b(this.element)):e.keyCode===a.g&&(e.stopPropagation(),this.dismiss())},e.prototype.dismiss=function(){this.scope.modalDismissCallback?this.scope.modalDismissCallback():this.scope.$parent.$dismiss()},e.$inject=["scope","element","attrs","transcludes",o.serviceName],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="E",this.template=u,this.transclude=!0,this.scope={modalDismissCallback:"&?",modalDismissKey:"@?",modalTitleKey:"@?",modalTranslateOptions:"&?",modalAriaType:"@?",analyticsIdTagPrefix:"@"},this.link=function(e,n,r,i,o){e.modal=t.$injector.instantiate(l,{scope:e,element:n,attrs:r,transcludes:o})}}return e.$inject=["$injector","$rootScope"],e}();i.module(c,["multi-transclude"]).directive("bbModal",["$injector",function(e){return e.instantiate(d)}])},"Oyr+":function(e,t,n){"use strict";var r=n("D57K"),i=(n("juDU"),n("9RbK"),n("1dyP"),n("lhpd"),n("nsO7")),o=n("5iHu"),s=n("wHJ2"),a=n("nbDY"),u=n.n(a),c=n("X455"),l=n("0JpG"),d=(n("67oV"),n("0+Qs")),p=n("rxY8"),m=n("HiQ9"),f=n("okL3"),h=function(){function e(e,t,n,r,i){var o=this;this.scope=e,this.bbLocalize=t,this.interval=n,this.$q=r,this.spinner=i,this.processingSpinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5},this.cancelUpload=function(e,t,n){e.stopImmediatePropagation(),e.preventDefault();var r=o.scope.inProgressFiles.filter((function(e){return e.id===t&&o.isIdentifierInProgressFile(e.inProgressFileId,n)}))[0];o.cancelUploadFile(r)},this.scope.$on("cancel-upload-all",(function(e){o.scope.inProgressFiles.forEach((function(e){o.cancelUploadFile(e)}))}))}return e.prototype.cancelUploadFile=function(e){e.content&&this.scope.$root.$broadcast(F,e.content,V.DeleteContent),e.interval&&this.interval.cancel(e.interval);var t=this.scope.inProgressFiles.splice(this.scope.inProgressFiles.indexOf(e),1)[0];this.scope.$root.$broadcast(F,e.id,t,V.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())},e.prototype.remove=function(e){var t=this;i.remove(this.scope.inProgressFiles,(function(n){return n.ui&&e.ui&&n.ui.fileId&&e.ui.fileId?n.ui.fileId===e.ui.fileId&&t.isIdentifierInProgressFile(n.inProgressFileId,e.inProgressFileId):!(!e.ui||!e.ui.id)&&(n.id===e.ui.id&&t.isIdentifierInProgressFile(n.inProgressFileId,e.inProgressFileId))})),this.scope.$root.$broadcast(F,this.scope.fileUploadDivId,0,e.id,V.Cancel,this.scope.primaryKey&&this.scope.primaryKey())},e.prototype.isIdentifierInProgressFile=function(e,t){return!e||!t||e===t},e.prototype.transformModelForDisplay=function(e){return{barId:e.file.id?e.file.id.replace(/\D/g,""):"",content:e.content,currentMimeType:e.currentMimeType,currentProgress:0,file:e.file,fileName:e.fileName,fileSize:e.file.size,id:e.id,inProgressFileId:e.inProgressFileId||"",interval:null,ui:e.ui}},e.prototype.getProgressIdAttr=function(e){return e.inProgressFileId?"file-progress-"+e.barId+"-"+e.inProgressFileId:"file-progress-"+e.barId},e.prototype.setProgress=function(e,t,n,r){var o,s,a,u,c,l=this;if(n){c=i.find(this.scope.inProgressFiles,(function(e){return e.file.id===n&&l.isIdentifierInProgressFile(e.inProgressFileId,r)}));var d=this.scope.targetDiv?"-"+r:"",p="#file-progress-"+n.replace(/\D/g,"")+d;u=this.scope.element.find(p+" .progress-circle .bar"),a=this.scope.element.find(p+" .processing-spinner .canvas")}else{c=this.scope.inProgressFiles.find((function(t){return t.id===e&&l.isIdentifierInProgressFile(t.inProgressFileId,r)}));var m=this.scope.inProgressFiles.indexOf(c);u=this.scope.element.find(".progress-circle-svg .bar").eq(m),a=this.scope.element.find(".processing-spinner .canvas").eq(m)}if(c&&!(c.currentProgress>=t)){null!=c.interval&&this.interval.cancel(c.interval);var f=c.currentProgress;c.interval=this.interval((function(){c&&(c.currentProgress++,o=u.attr("stroke-dashoffset"),s=o-o*(.01*c.currentProgress),u.css({strokeDashoffset:s+"px"}),100===c.currentProgress&&(c.isProcessing||(l.spinner.initInlineLoader(a,l.processingSpinnerArgs).start(),c.isProcessing=!0),n?l.scope.$root.$broadcast(F,n,V.UploadProgressComplete):l.scope.$root.$broadcast(F,l.scope.fileUploadDivId,l.scope.inProgressFiles.indexOf(c),e,V.UploadProgressComplete),l.interval.cancel(c.interval)))}),this.scope,20,t-f)}},e.$inject=["scope",l.serviceName,d.b,"$q",p.b],e}(),g=function(){function e(e,t,n){var r=this;this.$injector=e,this.interval=t,this.bbLocalize=n,this.template=f,this.restrict="E",this.scope={displayResults:"=",progressId:"=",targetDiv:"@",primaryKey:"&?"},this.link=function(e,t,n){e.element=t,e.progress=r.$injector.instantiate(h,{scope:e}),e.progress.progressId=n.id||"directive-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.inProgressFiles=[],e.$on(F,(function(n,i,o,s,a){if(null!=o&&(null!=o.content&&o.content.ui.fileUploadId===e.progress.progressId||e.progress.progressId===o.progressId||e.targetDiv&&e.targetDiv===a))if(s!==V.Uploading||o.content)if(s===V.Uploaded)e.progress.displayResults||e.progress.remove(o);else if(s===V.Error)e.progress.remove(o);else if(s===V.CommenceUpload)if(null!=o.content){if(e.fileUploadDivId=i,t.attr("id")===o.targetElement.attr("id")){e.inProgressFiles.push(e.progress.transformModelForDisplay(o));var u=r.interval((function(){t.find(".progress-circle").length>0&&(e.$root.$broadcast(F,i,o,V.ProgressRenderComplete),r.interval.cancel(u))}),e,100,10)}}else o.progressId===e.progress.progressId&&(e.inProgressFiles.push(e.progress.transformModelForDisplay(o)),e.$root.$broadcast(F,i,o,V.ProgressRenderComplete));else s===V.Cancel&&e.progress.remove(o);else if(e.fileUploadDivId=i,e.inProgressFiles.push(e.progress.transformModelForDisplay(o)),e.progress.displayResults){e.lastPiesRendered=0;var c=r.interval((function(){var n=t.find(".progress-circle").length;if(n>e.lastPiesRendered){for(var s=e.lastPiesRendered;s<e.lastPiesRendered+n;s++)e.$root.$broadcast(F,i,s,e.inProgressFiles[s].id,V.ProgressRenderComplete,o.inProgressFileId),r.interval.cancel(c);r.interval.cancel(c)}e.lastPiesRendered=n}),e,100,10)}else e.$root.$broadcast(F,i,e.inProgressFiles.length-1,e.inProgressFiles[e.inProgressFiles.length-1].id,V.ProgressRenderComplete,o.inProgressFileId,e.targetDiv)})),e.$on(F,(function(t,n,r,i,o,s,a,u){(a&&a===e.targetDiv||i&&i.attr&&i.attr("id")===e.element.attr("id")&&o===V.UpdateProgress)&&e.progress.setProgress(n,r,u,s)})),e.progress.displayResults=!0,e.$watch("::displayResults",(function(t){e.progress.displayResults=t}))}}return e.$inject=["$injector",d.b,l.serviceName],e}();s.module("ultra.directives.bbProgress",[m.a]).directive("bbProgress",["$injector",function(e){return e.instantiate(g)}]);var v=n("5MwF"),b=n("Vsv2"),y=n("k9iv"),S=n("b2lU"),C=n("A+IJ"),w=n("12mu"),k=n("pjml"),I=n("lEL+"),T=n("hkqm"),E=n("TnpK"),$=n("Q/M7"),P=n("GbAM"),A=n("fYJU"),O=n("RK4w"),_=n("8jry"),D=n("ByeC"),x=n("Za2G"),R=n("mhLG"),M=n("EN13"),N=n("YCUs"),j=n("ofgY"),L=n("W7eU"),U=n("Tfg2");n.d(t,"f",(function(){return G})),n.d(t,"e",(function(){return F})),n.d(t,"d",(function(){return B})),n.d(t,"b",(function(){return q})),n.d(t,"a",(function(){return H})),n.d(t,"c",(function(){return V}));var G="ultra.directives.bbFileUpload",F="bbFileUpload",B="thirdPartyFileSelectedEvent",q="fileSelected",H="dismissUploadModalEvent",V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.AllUploadsCompleted=new t("allUploadsCompleted"),t.AssignDropTarget=new t("assignDropTarget"),t.Cancel=new t("cancel"),t.CommenceUpload=new t("commenceUpload"),t.ContentCreated=new t("contentCreated"),t.Delete=new t("delete"),t.DeleteContent=new t("deleteContent"),t.Error=new t("error"),t.File=new t("file"),t.FileDrop=new t("fileDrop"),t.Folder=new t("folder"),t.LinkProgress=new t("linkProgress"),t.OutlineAddContentButtonFileSelected=new t("outlineAddContentButtonFileSelected"),t.ProgressRenderComplete=new t("progressRenderComplete"),t.UpdateFileTypes=new t("updateFileTypes"),t.UpdateProgress=new t("updateProgress"),t.Uploaded=new t("uploaded"),t.Uploading=new t("uploading"),t.UploadProgressComplete=new t("uploadProgressComplete"),t}(u.a),z=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorKey=n,r}return Object(r.__extends)(t,e),t.prototype.getErrorKey=function(){return this.errorKey},t.General=new t("generalFileUploadError","components.directives.fileUpload.errorFull"),t.Security=new t("securityFileUploadError","components.directives.fileUpload.errorSecurity"),t}(u.a),K=function(){function e(){}return e.generateTempFileId=function(){return Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random())},e}(),J=function(){function e(t,n,r,a,u,c,d,p,m,f,h,g,b,y,S,w,k,I){var T=this;if(this.scope=t,this.element=n,this.attrs=r,this.contextCourseMembership=a,this.bbLocalize=u,this.cloudDrive=c,this.interval=d,this.$modal=p,this.$http=m,this.timeout=f,this.$compile=h,this.Upload=g,this.ultraState=b,this.FileUtilityFactory=y,this.errorModal=S,this.toast=w,this.$q=k,this.contextUser=I,this.aborted=!1,this.alertedUserForFolderIncompatibility=!1,this.fileReviewVisible=!1,this.isMultipleUpload=!1,this.letMeChooseSelected=!1,this.progressVisible=!1,this.successVisible=!1,this.transcludeVisible=!0,this.uploadInProgress=!1,this.isUploadCompleteEventRegistered=!1,this.currentUploadCount=0,this.failedUploadCount=0,this.idCounter=0,this.originalUploadCount=0,this.successfulUploadCount=0,this.allowedFileTypes="",this.allowMultiple=!1,this.hideTranscludeDuringUpload=!0,this.id="",this.isContent=!1,this.monitorLeave=!1,this.useDefaultSuccessMethod=!1,this.isThirdPartyUpload=!1,this.model={fileLocation:null,files:[]},this.uploadingFiles=[],this.uploadsInProgress={},this.cancelUpload=function(e,t){var n=T.getUploadingFileIndexById(e,t);T.scope.isThirdPartyUpload&&n>=0?T.uploadingFiles.splice(n,1):T.uploadsInProgress[e]&&n>=0&&(T.abortUpload(e),T.aborted=!0,T.originalUploadCount--,T.resetFileInput(),n>=0&&T.uploadingFiles.splice(n,1),T.allowMultiple&&0!==T.model.files.length||T.hideTranscludeDuringUpload&&(T.fileReviewVisible=!1,T.transcludeVisible=!0)),T.uploadingFiles&&0!==T.uploadingFiles.length||(T.uploadInProgress=!1)},this.updateModel=function(e,t,n,r,i){var o=e.mimeType?e.mimeType:n,s=T.fileUtil.calculateSize(t.size),a={fileLocation:e.fileLocation,webLocation:e.webLocation,fileName:e.fileName,currentMimeType:o,fileSize:T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.sizeOutput",params:{label:s.sizeLabel,size:parseFloat(s.size.toFixed(2)).toString()}}),isMedia:e.isMedia,uploadDate:T.uploadDate,targetClass:r,ui:{position:i}};return T.allowMultiple?T.model.files.push(a):T.model.files[0]=a,T.model.fileLocation=e.fileLocation,T.currentFileName=a.fileName,a},this.success=function(e,t){T.currentUploadCount--,T.model.files=[],T.currentUploadCount<=0&&T.scope.$root.$broadcast(F,V.AllUploadsCompleted,null,null,null,T.scope.primaryKey&&T.scope.primaryKey()),"/v1/files"===T.attrs.url&&T.useDefaultSuccessMethod&&T.hideTranscludeDuringUpload&&(T.transcludeVisible=!0)},this.displayUploadError=function(e){T.scope.errorModalErrorKey=e?e.getErrorKey():z.General.getErrorKey(),T.modalInstance=T.$modal.open({template:L,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then((function(){}),(function(){T.resetFileInput(),T.hideTranscludeDuringUpload&&(T.transcludeVisible=!0)}))},this.getMoreSupportURL=function(){return T.contextCourseMembership.isActAsInstructorMembership()||T.contextUser.userModel.isInstructor()?"http://help.blackboard.com/001_562en_US":"http://help.blackboard.com/001_563en_US"},this.progress=function(e,t,n){T.scope.$root.$broadcast(F,e,t,n,V.UpdateProgress,void 0,T.scope.targetDiv)},this.conductUpload=function(e,t,n){var r,o,s=0;if(o=n?T.uploadingFiles.filter((function(e){return e.id===n}))[0]:T.uploadingFiles.filter((function(t){return t.ui.primaryKey===e.ui.primaryKey}))[0],r=e.targetElement?e.targetElement:T.scope.targetElement,T.scope.isThirdPartyUpload){if(e){var a=e;a.ui.index=t,a.ui.position=T.scope.position&&T.scope.position(),a.ui.targetDiv=T.getContentOutlineCloudKey(!0)||T.scope.targetDiv,T.scope.thirdPartyDownloadHandler(a)}}else{var u=$.j()+v.a.apiBasePath+"/v1/files?expand=mimeType,isMedia";T.scope.fileLocation&&(u=u+"&fileLocation="+T.scope.fileLocation),T.scope.webLocation&&(u=u+"&webLocation="+T.scope.webLocation),T.scope.extraParams&&(u=u+"&"+i.map(T.scope.extraParams(),(function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)})).join("&")),T.uploadsInProgress[o.id]=T.Upload.upload({url:u,method:"POST",headers:{"Content-Type":e.type},data:e.data,file:e.file,fileName:e.fileName}).progress((function(e){100!==(s=parseInt((100*e.loaded/e.total).toString(),10))?o.currentProgress=s:o.currentProgress<100&&(o.currentProgress=99),T.progress(o.id,s,r)})).success((function(n,r,i,s){var a=T.interval((function(){if(100===o.currentProgress||0===o.currentProgress){var r=T.updateModel(n,e.file,e.currentMimeType,e.targetClass,T.scope.position&&T.scope.position());if(r.ui.originFileName=e.fileName,T.success(r,t),T.successfulUploadCount++,T.removeUploadingFile(e),(!T.uploadingFiles||0===T.uploadingFiles.length)&&(T.uploadInProgress=!1,T.failedUploadCount+T.successfulUploadCount===T.originalUploadCount)){var i=void 0;i=T.originalUploadCount>1?0===T.failedUploadCount?T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadSuccessful.plural",params:{filesCount:T.originalUploadCount},noWrap:!0}):T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:T.originalUploadCount-T.failedUploadCount,filesCount:T.originalUploadCount},noWrap:!0})+" "+T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:T.failedUploadCount,filenameList:T.bbLocalize.formatItemsSync(T.failedUploadFilenames,T.failedUploadFilenames.length,null,T.scope,!1,{noWrap:!0})},noWrap:!0}):T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.singleFile.uploadSuccessful",noWrap:!0}),T.scope.$root.$broadcast(P.a,i)}r.ui.id=e.id,null!=e.content?T.scope.$root.$broadcast(F,T.scope.fileUploadDivId,e.content,r,V.Uploaded,T.scope.targetDiv,T.isMultipleUpload):T.scope.$root.$broadcast(F,T.scope.fileUploadDivId,r,V.Uploaded,T.scope.targetDiv,T.scope.primaryKey&&T.scope.primaryKey()),T.interval.cancel(a)}}),T.scope,100,5e3,!0)})).error((function(t){if(T.removeUploadingFile(e),T.failedUploadCount++,T.failedUploadFilenames.push(e.fileName),(!T.uploadingFiles||0===T.uploadingFiles.length)&&(T.uploadInProgress=!1,T.failedUploadCount+T.successfulUploadCount===T.originalUploadCount)){var n=void 0;n=T.originalUploadCount>1?T.failedUploadCount===T.originalUploadCount?T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFailed",noWrap:!0}):T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:T.originalUploadCount-T.failedUploadCount,filesCount:T.originalUploadCount},noWrap:!0})+" "+T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:T.failedUploadCount,filenameList:T.bbLocalize.formatItemsSync(T.failedUploadFilenames,T.failedUploadFilenames.length,null,T.scope,!1,{noWrap:!0})},noWrap:!0}):T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.singleFile.uploadFailed",noWrap:!0}),T.scope.$root.$broadcast(P.a,n)}if(T.scope.$root.$broadcast(F,T.scope.fileUploadDivId,e,V.Error,T.scope.targetDiv,T.scope.primaryKey&&T.scope.primaryKey()),T.aborted)T.aborted=!1;else{var r=t&&422===t.status?z.Security:z.General;T.displayUploadError(r)}}))}},this.prepareToUpload=function(e,t,n,r){T.resetFileInput();var o=JSON.stringify({fileLocation:T.model.fileLocation}),a=e.type;a||(a=T.unknownMimeType);var u,c=e.name||e.filename;if(T.scope.isThirdPartyUpload){(u={id:e.id,currentMimeType:a,currentProgress:0,data:o,file:e,fileName:c,inProgressFileId:K.generateTempFileId(),targetClass:"img-icon-document",type:e.type}).ui=s.copy(e.ui),u.ui?u.ui.primaryKey=T.scope.primaryKey&&T.scope.primaryKey():u.ui={primaryKey:T.scope.primaryKey&&T.scope.primaryKey()},t&&T.isZipFile(c)&&(u.ui.needUnzip=t),u.ui.fileId=e.id,T.uploadingFiles.push(u),T.isUploadCompleteEventRegistered||(T.scope.$on("uploadComplete",(function(e,t,n){if(i.findIndex(T.uploadingFiles,(function(e){return t.ui.fileId===e.ui.fileId}))>=0){var r=T.getContentOutlineCloudKey(!0,n)||T.scope.targetDiv,o=T.getContentOutlineCloudKey(!1,n)||T.scope.primaryKey&&T.scope.primaryKey();T.scope.$root.$broadcast(F,T.scope.fileUploadDivId,t,V.Uploaded,r,o),T.removeUploadingFile(t)}T.uploadingFiles&&0!==T.uploadingFiles.length||(T.uploadInProgress=!1)})),T.isUploadCompleteEventRegistered=!0);var l=T.getContentOutlineCloudKey(!0)||T.scope.targetDiv,d=T.getContentOutlineCloudKey(!1)||T.scope.primaryKey&&T.scope.primaryKey();T.scope.$root.$broadcast(F,T.scope.fileUploadDivId,u,V.Uploading,l,d)}else(u={content:r,currentMimeType:a,currentProgress:0,data:o,file:e,fileName:c,id:K.generateTempFileId(),progressId:null,targetClass:"img-icon-document",type:e.type}).ui={primaryKey:T.scope.primaryKey&&T.scope.primaryKey()},T.uploadingFiles.push(u),null!=r?T.scope.$root.$broadcast(F,T.scope.fileUploadDivId,u,V.FileDrop,T.scope.targetDiv):T.scope.$root.$broadcast(F,T.scope.fileUploadDivId,u,V.Uploading,T.scope.targetDiv,T.scope.primaryKey&&T.scope.primaryKey())},this.uploadFiles=function(e,t){T.isContent||(T.fileReviewVisible=!0),T.hideTranscludeDuringUpload&&(T.transcludeVisible=!1),e.forEach((function(n){T.isContent?T.isFolder(n).then((function(e){e?(T.scope.$root.$broadcast(F,T.scope.fileUploadDivId,n,V.Folder),T.scope.isChrome||T.alertedUserForFolderIncompatibility||(T.alertedUserForFolderIncompatibility=!0,T.errorModal.handleError(T.browserFolderWarning))):(T.uploadInProgress=!0,T.scope.$root.$broadcast(F,T.scope.fileUploadDivId,n,V.File),T.currentUploadCount++)})):(T.uploadInProgress=!0,T.prepareToUpload(n,t,e.indexOf(n),null))}))},this.continueCurrentUpload=function(e,t){e.length>0&&T.uploadFiles(e,t)},this.uploadEnabled=function(){return(T.allowMultiple||T.allowMultipleSelects||0===T.uploadingFiles.length&&0===T.model.files.length)&&!T.scope.isThirdPartyUpload},this.fileUploadClick=function(){T.uploadEnabled()&&T.element.find(".fileUploadInput").trigger("click",!0)},this.modalCancelUpload=function(){T.modalInstance.dismiss()},this.addContent=function(e){e&&T.modalInstance.close(e)},this.closeModal=function(e){if(null===e||s.isUndefined(e))return T.modalInstance.close();e?T.modalInstance.close(e):(T.modalInstance.close(e),T.resetFileInput())},this.closeModalAndChooseFiles=function(){T.closeModal(!0),T.resetFileInput(),T.element.find(".file-upload-container div:first-child").eq(0).click()},this.containsPackageFile=function(e,t){t?(T.modalInstance=T.$modal.open({template:N,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then((function(t){t&&T.continueCurrentUpload(e,t)}),(function(e){T.notifyUploadCancelled(),T.resetFileInput()}))):T.continueCurrentUpload(e)},this.containsZipFile=function(e){0!==e.filter((function(e){return T.isZipFile(e.name)})).length?(T.modalInstance=T.$modal.open({template:U,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then((function(t){T.continueCurrentUpload(e,t)}),(function(e){T.notifyUploadCancelled(),T.resetFileInput()}))):T.containsPackageFile(e)},this.checkAllowedFileTypes=function(e){var t=T.validateFiles(e);t.length!==e.length?(T.validFiles=t,T.modalInstance=T.$modal.open({template:T.disallowedFileTypeErrorTemplate||_,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then((function(e){T.scope.skipZipFileCheck&&T.scope.skipZipFileCheck()?T.continueCurrentUpload(t,!1):T.containsZipFile(t)}),(function(e){T.notifyUploadCancelled(),T.resetFileInput()}))):T.scope.skipZipFileCheck&&T.scope.skipZipFileCheck()?T.continueCurrentUpload(t,!1):T.containsZipFile(t)},this.removeFoldersIfBreaksDepthLimit=function(e){T.scope.depth&&T.scope.depth()>C.l?T.removeFolders(e,R):T.checkAllowedFileTypes(e)},this.removeFoldersIfDisallowed=function(e){T.scope.disallowFolderUploads&&T.scope.disallowFolderUploads()?T.removeFolders(e,D):T.removeFoldersIfBreaksDepthLimit(e)},this.removeFolders=function(e,t){var n={};T.$q.all(e.map((function(e){return T.isFolder(e).then((function(t){return t?n:e}))}))).then((function(r){var i=r.filter((function(e){return e!==n}));i.forEach((function(e){e.path=null})),i.length!==e.length?(T.scope.hasFiles=0!==i.length,T.modalInstance=T.$modal.open({template:t,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then((function(e){T.checkAllowedFileTypes(i)}),(function(e){T.notifyUploadCancelled(),T.resetFileInput()}))):T.checkAllowedFileTypes(i)}))},this.ensurePlurality=function(e){e.length>1&&!T.allowMultiple?(T.uploadedFiles=e,T.modalInstance=T.$modal.open({template:x,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then((function(t){var n=o('input[type="radio"][name="fileListing"]:checked').val();T.removeFoldersIfDisallowed([e[n]])}),(function(e){T.notifyUploadCancelled(),T.resetFileInput()}))):T.removeFoldersIfDisallowed(e)},this.onFileSelect=function(e,t,n,r,i,s){if(!(s&&(o(s.target).is(".js-no-file-drop")||o(s.target).is(".js-show-add-options"))||e&&e.length&&"Blob"===e[0].constructor.name))if(e.length){T.isMultipleUpload=e.length>1,T.scope.$root.$broadcast(F,T.scope.primaryKey&&T.scope.primaryKey(),V.AssignDropTarget),T.scope.$root.$broadcast(F,T.scope.primaryKey&&T.scope.primaryKey(),V.OutlineAddContentButtonFileSelected),T.setUploadDate(),T.ensurePlurality(e),T.originalUploadCount=e.length,T.failedUploadCount=T.successfulUploadCount=0,T.failedUploadFilenames=[];var a=void 0;a=T.originalUploadCount>1?T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadStarted.plural",params:{filesCount:T.originalUploadCount},noWrap:!0}):T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.singleFile.uploadStarted",noWrap:!0}),T.scope.$root.$broadcast(P.a,a)}else T.throwModalForNonFileUpload()},this.confirmLeaveDuringUpload=function(t,n,r){!T.uploadInProgress&&!T.cloudDrive.isGettingFilesInfo||e.isLeaveConfirmModalOpened||(t.preventDefault(),T.modalInstance=T.$modal.open({template:O,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),e.isLeaveConfirmModalOpened=!0,T.modalInstance.result.then((function(t){e.isLeaveConfirmModalOpened=!1,T.scope.isThirdPartyUpload||T.abortAllUploads(),T.aborted=!0,T.uploadInProgress=!1,T.uploadingFiles.forEach((function(e){T.scope.$root.$broadcast(F,T.scope.fileUploadDivId,e,V.Cancel,T.scope.targetDiv,T.scope.primaryKey&&T.scope.primaryKey())})),T.ultraState.go(n.name,r)}),(function(){e.isLeaveConfirmModalOpened=!1,T.scope.$root.$broadcast("$stateChangeAbort",{reason:"ABORTED_BY_FILE_UPLOAD"})})))},this.initialState=this.ultraState.current.name,this.allowMultipleSelects=t.$eval(t.allowMultipleSelects),this.scope.isChrome=/Chrome/.test(navigator.userAgent),this.disallowedFileTypeErrorTemplate=this.scope.disallowedFileTypeErrorTemplate,t.dragClass="drag",t.$on("bb-drag-start",(function(){t.dragClass=""})),t.$on("file-drag-restore",(function(){t.dragClass="drag"})),!t.isThirdPartyUpload){if(!r.url)throw new Error("'url' attribute required in file upload");if(this.url=r.url,!r.data)throw new Error("'data' attribute required in file upload")}this.element.find(".file-upload:first").on("click",(function(e,t){T.scope.clickEnabled&&!T.scope.clickEnabled()||t||T.fileUploadClick()})),["hideTranscludeDuringUpload","useDefaultSuccessMethod","allowedFileTypes","forceReselectDisallowedFiles","allowMultiple","isContent","fileUploadClick"].forEach((function(e){var t=T.scope.$watch(e,(function(n){null!=n&&(t(),T[e]=n)}))}));var E=this.scope.$watch("targetDiv",(function(e){if(null!=e)E(),T.scope.targetElement=n.find(e),0===T.scope.targetElement.length&&(T.scope.targetElement=o(e));else{T.progressVisible=!0;var r=T.interval((function(){var e=n.find(".file-upload-panel");e.length>0&&(T.scope.targetElement=e,T.interval.cancel(r))}),t,100,10)}})),A=this.scope.$watch("monitorLeave",(function(e){e&&(T.registerRouterStateChangeEventHandlers(),A())}));this.isThirdPartyUpload=t.isThirdPartyUpload,this.loadTranslations(),this.fileUtil=this.FileUtilityFactory()}return e.prototype.getContentOutlineCloudKey=function(e,t){var n=e?"#progress":"progress",r=t||this.scope.cloudUploadSelectedContentId;if(r)return""+n+r},e.prototype.throwModalForNonFileUpload=function(){var e=this;this.modalInstance=this.$modal.open({template:M,scope:this.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),this.modalInstance.result.catch((function(t){e.notifyUploadCancelled(),e.resetFileInput()}))},e.prototype.endsWith=function(e,t){return e.lastIndexOf(t),e.lastIndexOf(t)===e.length-t.length},e.prototype.getUploadingFileIndexById=function(e,t){var n=this,r=this.uploadingFiles.filter((function(r){return r.id===e&&n.validateIdentifier(r.inProgressFileId,t)}))[0];return this.uploadingFiles.indexOf(r)},e.prototype.isFolder=function(e){var t=this,n=this.$q.defer();if("directory"===e.type)n.resolve(!0);else if(e instanceof Blob){var r=new FileReader;r.onload=function(){1===r.readyState&&r.abort(),n.resolve(!1)},r.onerror=function(){t.isLikelyAFile(e)&&(t.displayUploadError(),t.scope.$root.$broadcast(F,t.scope.fileUploadDivId,e,V.Error,t.scope.targetDiv,t.scope.primaryKey&&t.scope.primaryKey()),n.reject()),n.resolve(!0)},r.readAsText(this.sliceFileHelper(e))}else n.resolve(!1);return n.promise},e.prototype.sliceFileHelper=function(e){return e.slice(0,1)},e.prototype.isZipFile=function(e){return".zip"===e.substring(e.lastIndexOf(".")).toLowerCase()},e.prototype.isLikelyAFile=function(e){return"directory"!==e.type&&(""!==e.type||e.size>4096)},e.prototype.loadTranslations=function(){var e=this;this.bbLocalize.loadBundle("components/directives/file-upload").then((function(){e.browserFolderWarning=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.browserFolderWarning"}),e.cancelUploadText=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.cancelUploadText"}),e.unknownMimeType=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.unknownMimeType"}),e.uploaded=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.uploaded"}),e.uploading=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.uploading"})}))},e.prototype.notifyUploadCancelled=function(){this.scope.$root.$broadcast(F,this.scope.fileUploadDivId,null,V.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())},e.prototype.removeUploadingFile=function(e){i.remove(this.uploadingFiles,(function(t){return t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.inProgressFileId&&e.inProgressFileId?t.ui.fileId===e.ui.fileId&&t.inProgressFileId===e.inProgressFileId:t.ui.fileId===e.ui.fileId:t.inProgressFileId&&e.inProgressFileId?e&&t.fileName===e.fileName&&t.inProgressFileId===e.inProgressFileId:e&&t.fileName===e.fileName})),delete this.uploadsInProgress[e.id]},e.prototype.resetFileInput=function(){for(var e=o(document.body).find(".fileUploadInput"),t=0;t<e.length;t++){e.eq(t)[0].value=""}},e.prototype.registerRouterStateChangeEventHandlers=function(){var e=this;this.scope.$on("$stateChangeStart",(function(t,n,r,i,o){i.name===n.name||n.name===e.initialState||e.isStateIgnored(i,n)||e.confirmLeaveDuringUpload(t,n,r)}))},e.prototype.isStateIgnored=function(e,t){if(this.scope.ignoredStates&&this.scope.ignoredStates())for(var n=0,r=this.scope.ignoredStates();n<r.length;n++){var i=r[n];if(e.name.indexOf(i)>=0||t.name.indexOf(i)>=0)return!0}return!1},e.prototype.setUploadDate=function(){var e=this;this.bbLocalize.formatDatetime(new Date,l.ILocaleDatetimeFormat.Short).then((function(t){e.uploadDate=t}))},e.prototype.validateFiles=function(e){if(""===this.allowedFileTypes)return e;var t=[],n=!1;this.allowedFileTypes.indexOf("/")>0?(n=!0,t[0]=this.allowedFileTypes.substr(0,this.allowedFileTypes.indexOf("/")),t[1]=this.allowedFileTypes.substr(this.allowedFileTypes.indexOf("/")+1)):t=this.allowedFileTypes.toLowerCase().split(",");for(var r=[],i=0;i<e.length;i++){var o=e[i];if(n){var s=[];s[0]=o.type.substr(0,this.allowedFileTypes.indexOf("/")),s[1]=o.type.substr(this.allowedFileTypes.indexOf("/")+1),t[0]!==s[0]||t[1]!==s[1]&&"*"!==t[1]||r.push(o)}else for(var a=0;a<t.length;a++)if("."!==t[a].charAt(0)&&(t[a]="."+t[a]),this.endsWith(o.name.toLowerCase(),t[a])){r.push(o);break}}return r},e.prototype.abortUpload=function(e){this.uploadsInProgress[e].abort(),delete this.uploadsInProgress[e]},e.prototype.abortAllUploads=function(){var e=this;Object.keys(this.uploadsInProgress).forEach((function(t){return e.abortUpload(t)}))},e.prototype.validateIdentifier=function(e,t){return!e||!t||e===t},e.isLeaveConfirmModalOpened=!1,e}(),W=function(){function e(e,t,n,r,i,o,s,a,u,c,l,d,p,m,f){var h=this;this.contextCourseMembership=e,this.bbLocalize=t,this.cloudDrive=n,this.$modal=r,this.$http=i,this.interval=o,this.timeout=s,this.$compile=a,this.Upload=u,this.ultraStateService=c,this.FileUtilityFactory=l,this.errorModal=d,this.toast=p,this.$q=m,this.contextUser=f,this.replace=!1,this.transclude=!0,this.restrict="E",this.template=j,this.scope={allowedFileTypes:"@",allowMultiple:"=",allowMultipleSelects:"@",cancelUpload:"=",clickEnabled:"&?",confirmLeaveDuringUpload:"=",closeModal:"=",closeModalAndChooseFiles:"@",delete:"=",disableDrag:"&?",disallowFolderUploads:"&?",extensions:"=",cloudUploadSelectedContentId:"<?",fileUploadClick:"=",forceReselectDisallowedFiles:"&?",hideTranscludeDuringUpload:"=",isContent:"=",improperAmountOfFilesUpload:"=",isThirdPartyUpload:"=?",primaryKey:"&?",modalCancelUpload:"=",monitorLeave:"=",onFileSelect:"=",position:"&?",showUnzippedSelection:"=",skipZipFileCheck:"&?",targetDiv:"@",thirdPartyDownloadHandler:"=",uploadUnzippedFiles:"=",unzippedFileSelection:"=",uploadEnabled:"=",useDefaultSuccessMethod:"=",fileLocation:"@?",webLocation:"@?",ignoredStates:"&?",extraParams:"&?",depth:"&?",initialUpload:"=?",disallowedFileTypeErrorTemplate:"@?"},this.link=function(e,t,n,r){e.fileUploadDivId="fileUploadDiv-"+K.generateTempFileId(),e.targetElement=t.find(".file-upload-panel"),e.fileUpload=new J(e,t,n,h.contextCourseMembership,h.bbLocalize,h.cloudDrive,h.interval,h.$modal,h.$http,h.timeout,h.$compile,h.Upload,h.ultraStateService,h.FileUtilityFactory,h.errorModal,h.toast,h.$q,h.contextUser),e.$on(B,(function(t,n,r){t.stopPropagation(),r&&r===(e.primaryKey&&e.primaryKey())&&e.fileUpload.onFileSelect(n),e.$emit(q,n,r)})),e.$on(H,(function(){e.fileUpload.modalInstance&&e.fileUpload.modalInstance.dismiss()})),e.$on(F,(function(t,n,r,i,o,s,a,u){if(n===e.fileUploadDivId)if(o===V.Cancel)e.fileUpload.cancelUpload(i,s);else if(o===V.ProgressRenderComplete)"number"==typeof r&&e.fileUpload.conductUpload(e.fileUpload.uploadingFiles.filter((function(t){return t.id===i&&e.fileUpload.validateIdentifier(t.inProgressFileId,s)}))[0],r,i);else if(o===V.UploadProgressComplete){var c=e.fileUpload.uploadingFiles.filter((function(t){return t.id===i&&e.fileUpload.validateIdentifier(t.inProgressFileId,s)}))[0];c&&(c.currentProgress=100)}})),e.$on(F,(function(n,r,i,o,s){r===(e.primaryKey&&e.primaryKey())&&s===V.UpdateFileTypes&&(e.fileUpload.allowedFileTypes=i,t.find("input").attr("accept",i),o())})),e.$on(F,(function(t,n,r,i){n===e.fileUploadDivId&&r&&r.fileName&&i===V.ProgressRenderComplete&&e.fileUpload.conductUpload(r,0,r.id)})),e.$on(F,(function(t,n,r,i){if(n===e.fileUploadDivId&&i===V.ContentCreated)var o=h.interval((function(){e.fileUpload.prepareToUpload(r.ui.file,!1,0,r),h.interval.cancel(o)}),e,100,20)})),e.$on(F,(function(t,n,r,i,o,s){if(n===e.fileUploadDivId&&s===V.LinkProgress)for(var a=0;a<e.fileUpload.uploadingFiles.length;a++)r.content?e.fileUpload.uploadingFiles[a].fileName===r.fileName&&e.fileUpload.uploadingFiles[a].file.path===r.file.path&&e.fileUpload.uploadingFiles[a].id===r.id&&(e.fileUpload.uploadingFiles[a].progressId=r.content.ui.fileUploadId,e.$root.$broadcast(F,e.fileUploadDivId,r,V.CommenceUpload)):e.fileUpload.uploadingFiles[a].fileName===r.fileName&&e.fileUpload.uploadingFiles[a].file.path===r.file.path&&e.fileUpload.uploadingFiles[a].id===r.id&&null==e.fileUpload.uploadingFiles[a].progressId&&(e.fileUpload.uploadingFiles[a].progressId=e.fileUpload.isContent?null:i,e.fileUpload.uploadingFiles[a].targetElement=o,e.$root.$broadcast(F,e.fileUploadDivId,r,V.CommenceUpload))})),e.initialUpload&&e.fileUpload.uploadFiles([e.initialUpload],!1)}}return e.$inject=[c.d,l.serviceName,b.c,w.b,"$http",d.b,I.b,"$compile","Upload",E.d,S.a,y.c,T.b,"$q",A.b],e}();s.module(G,["ngFileUpload",c.a,l.moduleName,b.b,d.a,w.a,k.Q,S.b,I.a,"ultra.directives.bbProgress",y.b,T.a,E.b]).directive(F,["$injector",function(e){return e.instantiate(W)}])},P2dS:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("aHpC"),u="ultra.components.services.gradebookColumnCategory.Service",c="gradeColumnCategoryService",l=function(){function e(e,t,n){this.$q=e,this.$rootScope=t,this.CourseModel=n,this.categoriesByCourse={}}return e.prototype.getIconByGradebookCategory=function(t,n){var r=null;if(null!=t){if(!1===n||s.E.GradeCategoryTitleEnum.Attendance.isEqualTo(t)){var i=s.E.GradeCategoryTitleEnum.parse(t);i&&(r=i.getIconName())}r||(r=e.DEFAULT_ICON_FOR_CATEGORY)}return r},e.prototype.getCategoryIcon=function(t){var n=e.DEFAULT_ICON_FOR_CATEGORY;return t&&t.title&&(n=this.getIconByGradebookCategory(t.title,t.isUserDefined)),n},e.prototype.loadGradeCategories=function(e){return this.CourseModel.$new(e).gradebook.categories.$fetch().$asPromise()},e.prototype.getOrLoadCategoriesForCourse=function(e,t){var n=this;if(t||!this.categoriesByCourse[e])return this.loadGradeCategories(e).then((function(t){return n.reorderCategories(t,0),n.categoriesByCourse[e]=t,t}));var r=this.$q.defer();return r.resolve(this.categoriesByCourse[e]),r.promise},e.prototype.getFilteredCategoriesForCourse=function(e,t){return this.getOrLoadCategoriesForCourse(e,!0).then((function(e){return i.filter(e,t)}))},e.prototype.updateCategoriesForCourse=function(e,t){if(this.categoriesByCourse[e]){var n=this.categoriesByCourse[e],r=i.findIndex(n,(function(e){return e.id===t.id}));-1===r?n.splice(0,0,t):n.splice(r,1,t)}},e.prototype.deleteCategoriesForCourse=function(e,t){if(this.categoriesByCourse[e]){var n=this.categoriesByCourse[e],r=i.findIndex(n,(function(e){return e.id===t.id}));r>-1&&n.splice(r,1)}},e.prototype.reorderCategories=function(e,t){for(var n=e.length,r=t;r<n;++r){var i=e[r];i.isUserDefined&&(e.splice(r,1),e.unshift(i))}},e.DEFAULT_ICON_FOR_CATEGORY="custom-item",e=Object(r.__decorate)([Object(r.__param)(0,Object(a.b)("$q")),Object(r.__param)(1,Object(a.b)("$rootScope")),Object(r.__param)(2,Object(a.b)(s.o.serviceName))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);o.module(u,[]).service(c,l)},P2rh:function(e,t,n){},P43K:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("wHJ2"),i=n("w9Zy"),o=n("fYJU"),s=n("pjml"),a=n("TnpK"),u=n("qhd3"),c="ultra.features.base.profile.update.basicProfile.routes";r.module(c,["ui.router",i.d,s.Q,a.b]).config([a.c,function(e){e.peekState("update-profile",{url:"/update?focusField",require:function(){return Promise.all([n.e(28),n.e(48),n.e(72),n.e(690)]).then(n.bind(null,"SqGJ"))},pageTitle:"base.profile.update.sectionTitle",resolve:{currentUser:[u.serviceName,o.b,function(e,t){return e.$find(t.userId).$asPromise()}]}}).peekState("update-language",{url:"/language",require:function(){return n.e(648).then(n.bind(null,"Upnn"))},pageTitle:"base.profile.updateLanguage.pageTitle",resolve:{currentUser:[u.serviceName,o.b,function(e,t){return e.$find(t.userId).$asPromise()}]}})}])},PCGa:function(e,t,n){},PIPc:function(e,t){e.exports='\x3c!-- this button is for screenreader users only and should be placed at the end of an infinite scroll list in the DOM so that they know that more items can be loaded --\x3e\n<button class="sr-only load-more-items"\n        ng-click="infiniteScroll.loadMoreItems()"\n        tabindex="-1"\n        ng-disabled="infiniteScroll.disabled || infiniteScroll.remainingCount <= 0"\n        bb-load-bundle="components/directives/infinite-scroll"\n        bb-translate translate-values="infiniteScroll.loadMoreLocalizationValues"\n        analytics-id="{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}">{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}</button>\n'},PSJS:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"MessageLifeCycleEnum",(function(){return l})),n.d(t,"MessageType",(function(){return d})),n.d(t,"serviceName",(function(){return p}));var r=n("D57K"),i=n("nbDY"),o=n.n(i),s=n("yCC5"),a=n("Rjd/"),u=n("nkTj"),c=n("z6Q5"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Published=new t("PUBLISHED"),t.Deleted=new t("DELETED"),t.Drafted=new t("DRAFT"),t}(o.a),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.next=function(){var e=parseInt(this.toString(),0)+1,n=t.getKeys();return n.length<e&&(e=n.length-1),t[n[e]]},t.Discussion=new t("0"),t.Comment=new t("1"),t.Reply=new t("2"),t.ClassConversation=new t("3"),t}(o.a),p=s.P;a.a.factory(p,["restmod","$q",u.d,c.b,function(t,n,r,i){return t.model().mix({replies:{mask:!0},parent:{mask:!0},states:{hasOne:s.F},discussion:{mask:!0},type:{mask:!0},isAvailable:{mask:!0},user:{mask:!0},lastUpdateUser:{mask:!0},ui:{mask:!0,init:function(){return{isEdit:!1}}},postDate:{serialize:"date"},editDate:{serialize:"date"},"gradedColumn.dueDate":{serialize:"date"},$hooks:{"after-fetch-many":function(){"messages"===this.$scope.$partial&&this.forEach((function(e){e.type=d.Discussion,e.parent=e,e.discussion=e,e.states.readStateInd=e.messageStatus.isRead}))},"after-destroy":function(e){e.data&&this.$unwrap(e.data)}},$extend:{Record:{getReplies:function(e,t){var r=this;if(t&&0===this.messageStatus.numberOfChildren)return this.replies=this.$scope.$collection(),this.replies.$asPromise=function(){return n((function(e){return e(r.replies)}))},this.replies;var i=this;return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/replies",params:{sort:e.sort,limit:e.limit,offset:e.offset,userId:e.userId,groupId:e.groupId,messageLifecycle:e.messageLifecycle}},(function(e){this.$unwrap(e.data),i.replies=this,i.ui.count=e.data.paging.count,this.forEach((function(e){e.type=i.type.next(),e.parent=i,e.discussion=i.discussion,e.states.readStateInd=e.messageStatus.isRead}))}))},saveReply:function(t,n){void 0===n&&(n={});var r=this.$scope.$url()+"/"+this.id+"/replies?"+e.param(n);return this.$scope.$build().$send({method:"POST",url:r,data:t.$wrap()},(function(e){this.$unwrap(e.data),this.replies=this.$scope.$collection()}))},getRepliesCount:function(t){void 0===t&&(t={});var n=this.$scope.$url()+"/"+this.id+"/replies/count?"+e.param(t),r=this;return this.$scope.$build().$send({method:"GET",url:n},(function(e){r.ui.count=e.data.count}),(function(){r.ui.count=0}))},updateMessageStatus:function(t,n){void 0===n&&(n={});var r=this.$scope.$url()+"/"+this.id+"/states?"+e.param(n);return this.$scope.$build().$send({method:"PATCH",url:r,data:t.$wrap()},(function(e){return this.states=this.$unwrap(e.data),this.states}),(function(e){400===e.status||e.$response&&e.$response.status}))},copy:function(e){var t=this;Object.getOwnPropertyNames(e).filter((function(e){return"$"!==e[0]})).forEach((function(n){t[n]=e[n]}))}},Collection:{batchGetReplies:function(e){e&&Object.keys(e).forEach((function(t){t,"="+e[t]+"&"}));var t=n.defer(),r=[],o=function(t){var o=n.defer();return i.performBatch((function(){n.all(t.map((function(t){return t.getReplies(e,!0).$asPromise()}))).then(o.resolve)})),o.promise.then((function(e){return e.forEach((function(e,n){var i=t[n];e.forEach((function(e){e.type=i.type.next(),e.parent=i,e.discussion=i.discussion,e.states.readStateInd=e.messageStatus.isRead,r.push(e)}))})),r}))};return o(this).then(o).then(t.resolve),t.promise}}}})}])}.call(this,n("5iHu"))},PZ5L:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-course-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss.button"\n  >\n    components.services.error-modal.dismiss\n  </button>\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n</bb-modal>'},PqsU:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-conflict.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-conflict.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},"Q/M7":function(e,t,n){"use strict";(function(e){var r;function i(){return r||void 0===window.location||(r=o(window.location.href)),r}function o(e){var t=/^[^\/]*\/\/[^\/]+/.exec(e);return t&&t[0]||e}function s(e){return 0===e.indexOf("https://")}function a(e){return/^[a-zA-Z]*:?\/\//.test(e)}function u(e,t){return e&&e.indexOf("//")<0&&("/"!==e[0]&&(e="/"+e),e=t?t+e:i()+e),e}function c(e){return e?/[^\?#]*/.exec(e)[0]:e}function l(e,t){var n="";return t&&e&&e.isClassic()&&(n=decodeURIComponent(t).trim()),n.length>0&&"/"===n[0]&&n||null}function d(e){e.match(/:\/\//)||(e="http://"+e),window.open(e,"_blank")}function p(e){window.location=e}function m(e){return e?e.replace(/^https?:/,""):""}function f(e){return e&&e.indexOf("://")>=0?e.substring(e.indexOf("://")+3):e}function h(e){return(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split("?")[0].split(":")[0]}function g(e){var t=e.indexOf("?");if(t<0)return e;var n=e.substring(t+1).split("&"),r={};return n.forEach((function(e){var t=e.split("=");r[t[0]]=decodeURIComponent(t[1])})),r}function v(e,t,n){return e.indexOf(t+"=")<0?e+(e.indexOf("?")<0?"?":"&")+t+"="+n:e}function b(t,n,r){return encodeURIComponent(t+"/"+n+"?"+e.param(r))}function y(e){return u("/webapps/blackboard/execute/ultraFramePassThrough?redirectTo="+encodeURIComponent(u(e)))}function S(e,t){var n=v(e,"isForcedDownload","true");return n=v(n,"downloadFileName",encodeURIComponent(t))}function C(e){var t=e.split("/");return t[t.length-1]}function w(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}n.d(t,"j",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"n",(function(){return s})),n.d(t,"s",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"r",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"o",(function(){return d})),n.d(t,"p",(function(){return p})),n.d(t,"l",(function(){return m})),n.d(t,"q",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return S})),n.d(t,"k",(function(){return C})),n.d(t,"m",(function(){return w}))}).call(this,n("5iHu"))},Q74M:function(e,t,n){"use strict";var r;!function(e){e.ViewAdmin="system.admin.VIEW",e.ViewAdminTop="system.administration.top.VIEW",e.ViewAdminSupportPanel="system.admin.support.panel.VIEW",e.ViewBrands="system.portaloptions.brand.VIEW",e.CreateBrand="system.portaloptions.brand.CREATE",e.ModifyBrand="system.portaloptions.brand.MODIFY",e.DeleteBrand="system.portaloptions.brand.DELETE"}(r||(r={})),t.a=r},QaOk:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("+4Px"),o="ultra.directives.accessibility.arrowKeyNavigation",s="bb-arrow-key-container",a="["+s+"]",u="[bb-arrow-key-destination]",c=function(){function t(t){var n=this;this.$parse=t,this.restrict="A",this.link=function(t,r,o){var s=n.$parse(o.bbArrowKeyNavigation)(null);if("rows"!==s.layout&&"columns"!==s.layout&&"both"!==s.layout)throw new Error("bb-arrow-key-navigation directive is missing or has an invalid layout specified");if(s.tabDirection&&"vertical"!==s.tabDirection&&"horizontal"!==s.tabDirection)throw new Error("bb-arrow-key-navigation directive has an invalid tabDirection specified");r.on("keydown",(function(t){var o=e(t.target),a=t.keyCode;s.tabDirection&&a===i.u&&("vertical"===s.tabDirection?a=t.shiftKey?i.v:i.d:"horizontal"===s.tabDirection&&(a=t.shiftKey?i.j:i.s)),"rows"===s.layout&&(a=n.rotateKeyCode(a)),s.upEqualsLeft&&(a=n.upEqualsLeftKeyCode(a)),n.navigate(o,r,a,s.wrap,s.explicit)&&(n.body.removeClass("hide-focus-outline"),t.preventDefault(),t.stopPropagation())})),t.$on("$destroy",(function(){r.off()}))},this.body=e("body")}return t.prototype.navigate=function(e,t,n,r,o){var c;switch(n){case i.v:if(o){var l=parseInt(e.closest(a).attr("bb-arrow-key-container"),10),d=(p=t.find(this.containerWithValue(l)).find(u).filter(":visible")).index(e.closest(u));"0"===e.attr("tabindex")||0===d&&!r||(c=p.eq(d-1))}else!(c=e.closest(u).prev(u)).length&&r&&(c=e.closest(a).find(u).last());break;case i.d:if(o){var p;l=e.closest(a).attr("bb-arrow-key-container"),d=(p=t.find(this.containerWithValue(l)).find(u).filter(":visible")).index(e.closest(u));!(c=p.eq(d+1)).length&&r&&(c=p.first())}else!(c=e.closest(u).next(u)).length&&r&&(c=e.closest(a).find(u).first());break;case i.j:if(o){l=parseInt(e.closest(a).attr(s),10);var m=e.closest(u).attr("bb-arrow-key-destination");c=t.find(this.containerWithValue(l-1)).find(this.destinationWithValue(m)).first()}else{var f=e.closest(u).prevAll(u).length;(h=this.getPreviousContainer(e).find(u)).length?c=h.eq(f).add(h.last()).first():r&&f>0&&(c=e.closest(a).nextAll(a).last().find(u).eq(f))}break;case i.s:if(o){l=parseInt(e.closest(a).attr(s),10),m=e.closest(u).attr("bb-arrow-key-destination");c=t.find(this.containerWithValue(l+1)).find(this.destinationWithValue(m)).first()}else{var h;f=e.closest(u).prevAll(u).length;(h=this.getNextContainer(e).find(u)).length?c=h.eq(f).add(h.last()).first():r&&(c=e.closest(a).prevAll(a).last().find(u).eq(f))}}return!(!c||!c.length)&&(c.focus(),!0)},t.prototype.containerWithValue=function(e){return"["+s+'="'+e+'"]'},t.prototype.destinationWithValue=function(e){return'[bb-arrow-key-destination="'+e+'"]'},t.prototype.getPreviousContainer=function(e){return e.closest(a).prevAll(a).first()},t.prototype.getNextContainer=function(e){return e.closest(a).nextAll(a).first()},t.prototype.rotateKeyCode=function(e){switch(e){case i.v:return i.j;case i.d:return i.s;case i.j:return i.v;case i.s:return i.d}},t.prototype.upEqualsLeftKeyCode=function(e){switch(e){case i.j:return i.v;case i.s:return i.d;default:return e}},t.$inject=["$parse"],t}();r.module(o,[]).directive("bbArrowKeyNavigation",["$injector",function(e){return e.instantiate(c)}])}).call(this,n("5iHu"))},Qbdf:function(e,t,n){"use strict";var r=n("D57K"),i=n("pjml"),o=n("yC9S"),s=n("ZzR9"),a=n("nsO7"),u=n("Qt5x"),c=function(e){function t(t){var n=e.call(this)||this;return n.courseId=t,n}return Object(r.__extends)(t,e),t}(function(){function e(){var e=this;this._cache={},this.hookUserModel=a.once((function(t){var n=e;return e.offHookUserModelFunc||(e.offHookUserModelFunc=t.$mixHook("after-feed",(function(){n.cache(this.id,this)}))),e.offHookUserModelFunc}))}return e.prototype.destroy=function(){this._cache={},this.offHookUserModel()},e.prototype.miss=function(e){var t=this;return e.filter((function(e){return!(e in t._cache)}))},e.prototype.hit=function(e){var t=[].concat(e),n=this.miss(t);return a.isEmpty(n)},e.prototype.get=function(e,t){var n=this._cache[e];return!n&&t?t:n},e.prototype.invalidate=function(e){delete this._cache[e]},e.prototype.cache=function(e,t){e&&t&&!t.isPlaceHolder&&(this._cache[e]=t)},e.prototype.fetchUsers=function(e,t,n){var r=this,i=n.defer(),o=this.miss([].concat(e));return a.isEmpty(o)?i.resolve(this):(this.offHookUserModelFunc||this.hookUserModel(t),t.findMany(o,{},[u.HttpStatus.NotFound]).$then((function(e){i.resolve(r)}))),i.promise},e.prototype.offHookUserModel=function(){this.offHookUserModelFunc&&(this.offHookUserModelFunc(),this.offHookUserModelFunc=void 0)},e}()),l=n("0JpG"),d=n("x+T+"),p=n("lVRt"),m=n("PZ5L");n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return b}));var f="ultra.service.course-context.course",h="currentCourseModel",g=h+"Provider",v=f+"."+h+".changed",b=p.c,y=function(){this.$get=["$injector",function(e){return e.instantiate(S)}],this.name=b,this.resolve=["$state",h,function(e,t){var n=e.nextParams.courseId;return t.load(n)}]},S=function(){function e(e,t,n,r,i,a){this.$q=e,this.$rootScope=t,this.bbLocalize=n,this.entitlementCache=r,this.CourseModel=i,this.UserModel=a;var u=this;o.b.OnRootScope(t,s.a.$stateHasCourseInContextChanged,(function(e,t,n){n&&!t&&u.clear()}))}return Object.defineProperty(e.prototype,"courseId",{get:function(){return this._courseId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"course",{get:function(){return this._courseModel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewStatus",{get:function(){return this._previewStatus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usersCache",{get:function(){return this._usersCache},enumerable:!0,configurable:!0}),e.prototype.isInIframeOfPreviewMode=function(){return this.previewStatus&&this.previewStatus.previewing&&window.top!==window},e.prototype.load=function(e){var t=this;return e?e&&this.courseId===e&&this.course?this.course.$asPromise():this.loadCourse(e).then((function(n){return t.$q.all([t.loadLocalizationBundle(n),t.entitlementCache.loadCourseEntitlements(e)]).then((function(){return t.update(e,n),t._courseModel.studentPreview.$resolve().$asPromise().then((function(e){return t._previewStatus=e,e.courseMembershipId?t.course.memberships.$new(e.courseMembershipId).$fetch().$asPromise().then((function(n){return e.user=t.UserModel.$buildRaw(e.user),e.user.memberships.push(t.course.memberships.$buildRaw(n)),t._courseModel})):t._courseModel}))}))}),(function(e){return t.$q.reject(Object.assign(e||{},{goToBasePage:!0}))})):this.$q.when(null)},e.prototype.loadCourse=function(e){var t=this;return this.CourseModel.$find(e,{expand:"instructorsMembership, instructorsMembership.courseRole, effectiveAvailability, isChild"}).$allow([404]).$asPromise().then((function(n){var r=n.$response;if(r&&404===r.status){var i=new Error("Course "+e+" not found");return Object.assign(i,{goToBasePage:!0,errorModalConfig:{response:r,template:m}}),t.$q.reject(i)}return n}))},e.prototype.loadLocalizationBundle=function(e){var t;return t=e.isClassic()||!e.locale?this.bbLocalize.getLocale(this.$rootScope):e.locale,this.$q.all([this.bbLocalize.loadLocale(t),this.bbLocalize.loadBundle("features/course/course",t)])},e.prototype.clear=function(){this.update(null,null)},e.prototype.update=function(e,t){var n=this.courseId,r=this.course;this._courseId=e,this._courseModel=t,this._usersCache&&this._usersCache.courseId!==e&&(this._usersCache.destroy(),this._usersCache=null),e&&(this._usersCache=new c(e),this._usersCache.hookUserModel(this.UserModel)),this.$rootScope.$broadcast(v,{id:e,model:t},{id:n,model:r})},e.prototype.refreshStudentPreviewStatus=function(){return this._courseModel.studentPreview.$fetch()},e.$inject=["$q","$rootScope",l.serviceName,d.c,i.o.serviceName,i.Pb.serviceName],e}(),C=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(S),[i.Q,l.moduleName,d.b]);angular.module(f,C).provider(h,y)},RDfZ:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));n("yDoS");var r=n("wHJ2"),i=n("Qbdf"),o=n("0JpG"),s=n("pjml"),a=n("lEL+"),u=n("TnpK"),c=n("oNH7"),l=n("H+SH"),d=n("CPVT"),p="ultra.directives.conversionStatusBar",m=function(){function t(t,n,r,i,o,s,a,u,c){var l=this;this.$scope=t,this.$rootScope=n,this.$q=r,this.$modal=i,this.CourseModel=o,this.ultraState=s,this.contextCourse=a,this.bbLocalize=u,this.timeout=c,this.displayGuidanceBackToClassic=!1,this.identifyCourse().then((function(e){l.course=e,l.courseId=l.course.id,l.showStatusBar=!1,l.course.canConvert()&&(l.showStatusBar=l.course.isUltraPreview())})),t.$on("confirmNewExperience",(function(){l.useTheNewExperience()})),t.$on("TOGGLE-PREVIEW",(function(e,t){l.inPreview=t,l.updateStatusClass(),l.showStatusBar=l.course.isUltraPreview()})),t.$on("$stateChangeSuccess",(function(){l.updateStatusClass()})),t.$on("$destroy",(function(){e("body").removeClass("has-conversion-status-bar")}))}return Object.defineProperty(t.prototype,"showStatusBar",{get:function(){return this._showStatusBar},set:function(e){var t=this._showStatusBar;this._showStatusBar=e,t!==e&&this.updateStatusClass()},enumerable:!0,configurable:!0}),t.prototype.updateStatusClass=function(){!this.showStatusBar||this.hideStatusBar()||this.inPreview?e("body").removeClass("has-conversion-status-bar"):e("body").addClass("has-conversion-status-bar")},t.prototype.identifyCourse=function(){return this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()},t.prototype.useTheNewExperience=function(){var e=this;this.course.setUltraStatusDecided().then((function(){e.showStatusBar=!1,e.$rootScope.$broadcast("reloadCourse",e.courseId)}))},t.prototype.backToClassic=function(){var e=this;this.course.undoCourseConversion().then((function(t){var n=t.$response;if(200===n.status)e.ultraState.transitionTo(e.course.getBaseRoute()),e.$rootScope.$broadcast("convertToClassicCourse",e.course.id);else if(400===n.status||404===n.status){e.$modal.open({template:l,scope:e.$scope,resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}).result.then((function(){e.ultraState.transitionTo(e.course.getBaseRoute())}))}}))},t.prototype.hideStatusBar=function(){return(this.ultraState.current.name.match(/\.peek\./g)||[]).length>1},t.$inject=["scope","$rootScope","$q","$modal",s.o.serviceName,u.d,i.e,o.serviceName,a.b],t}(),f=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=c,this.scope={courseId:"@?"},this.link=function(e){e.conversionStatusBarController=t.$injector.instantiate(m,{scope:e})}}return e.$inject=["$injector"],e}();r.module(p,[i.b,o.moduleName,s.Q,u.b,a.a,d.a]).directive("bbConversionStatusBar",["$injector",function(e){return e.instantiate(f)}])}).call(this,n("5iHu"))},"RJ/U":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s=n("Qbdf"),a="ultra.course.question-banks.routes";r.module(a,[i.moduleName,o.b,s.b]).config([o.c,s.c,function(e,t){var r;e.peekState("question-banks",{url:"/banks",resolve:(r={},r[s.d]=t.resolve,r.translations=[i.serviceName,function(e){return e.loadBundle("features/course/question-banks/question-banks")}],r),peekStates:["import-details"],peekViewName:"question-banks-peek",panelClass:"full",require:function(){return Promise.all([n.e(2),n.e(7),n.e(570)]).then(n.bind(null,"lXpl"))},pageTitle:"course.question-banks.pageTitle"}).peekState("import-details",{url:"/importDetails/{taskId:_[0-9]+_1}",require:function(){return n.e(639).then(n.bind(null,"zGGy"))},pageTitle:"course.question-banks.import-details.pageTitle"})}])},RK4w:function(e,t){e.exports='<bb-modal id="close-without-saving-modal" class="notification"\n          modal-title-key="components.directives.fileUpload.closeDuringUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.closeDuringUploadInstructions</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.closeDuringUploadClose">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadClose</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.closeDuringUploadGoBack">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadGoBack</bb-translate>\n  </button>\n</bb-modal>\n'},RNuw:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("nsO7"),i=n("wHJ2");function o(e,t,n,o){var s={};return e.$watch((function(){return t}),(function(t,a){var u=Object.keys(t).filter((function(e){return!Object.prototype.hasOwnProperty.call(s,e)&&t[e]&&Object.prototype.hasOwnProperty.call(t[e],"$viewValue")&&(!o||!(o.indexOf(e)>-1))}));i.forEach(u,(function(i){s[i]=e.$watch((function(){return t[i].$viewValue}),(function(e,o){!t[i].$dirty&&(null==o||Number.isNaN(Number(o)))||r.isEqual(e,o)||n(e,o)}))}));var c=Object.keys(a).filter((function(e){return!Object.prototype.hasOwnProperty.call(t,e)&&a[e]&&Object.prototype.hasOwnProperty.call(a[e],"$viewValue")}));i.forEach(c,(function(e){s[e](),delete s[e]}))}),!0),function(){i.forEach(s,(function(e){e()}))}}},RRs6:function(e,t,n){var r={"./ar-001/_combined.json":["bzSq",230],"./ar-AE/_combined.json":["kXUs",231],"./ar-BH/_combined.json":["uu8c",232],"./ar-DJ/_combined.json":["AXSJ",233],"./ar-DZ/_combined.json":["d2Tw",234],"./ar-EG/_combined.json":["HU5B",235],"./ar-EH/_combined.json":["Rf/8",236],"./ar-ER/_combined.json":["lMqs",237],"./ar-IL/_combined.json":["sCR2",238],"./ar-IQ/_combined.json":["s69u",239],"./ar-JO/_combined.json":["YeG1",240],"./ar-KM/_combined.json":["Nsqb",241],"./ar-KW/_combined.json":["v7VH",242],"./ar-LB/_combined.json":["4UZ5",243],"./ar-LY/_combined.json":["d5Iy",244],"./ar-MA/_combined.json":["dJ98",245],"./ar-MR/_combined.json":["kPIw",246],"./ar-OM/_combined.json":["QBE7",247],"./ar-PS/_combined.json":["oCQ2",248],"./ar-QA/_combined.json":["Hadl",249],"./ar-SA/_combined.json":["BWYe",250],"./ar-SD/_combined.json":["sZn0",251],"./ar-SO/_combined.json":["/pS2",252],"./ar-SS/_combined.json":["P5MV",253],"./ar-SY/_combined.json":["t6FV",254],"./ar-TD/_combined.json":["0dWw",255],"./ar-TN/_combined.json":["olD4",256],"./ar-YE/_combined.json":["cwri",257],"./ar/_combined.json":["Z7mm",229],"./bg-BG/_combined.json":["lhO/",259],"./bg/_combined.json":["XExx",258],"./ca-AD/_combined.json":["1TTF",261],"./ca-ES-VALENCIA/_combined.json":["x5id",263],"./ca-ES/_combined.json":["OeTV",262],"./ca-FR/_combined.json":["pD9U",264],"./ca-IT/_combined.json":["i92d",265],"./ca/_combined.json":["pXk6",260],"./cs-CZ/_combined.json":["/ACq",267],"./cs/_combined.json":["F5xB",266],"./cy-GB/_combined.json":["aQ0a",269],"./cy/_combined.json":["PtiR",268],"./da-DK/_combined.json":["06Qy",271],"./da-GL/_combined.json":["WpLh",272],"./da/_combined.json":["eYMN",270],"./dav-KE/_combined.json":["ZzyU",274],"./dav/_combined.json":["qiBt",273],"./de-AT/_combined.json":["ESfo",276],"./de-BE/_combined.json":["MZB8",277],"./de-CH/_combined.json":["RKx5",278],"./de-DE/_combined.json":["F/Ao",279],"./de-LI/_combined.json":["ZsKg",280],"./de-LU/_combined.json":["NQwb",281],"./de/_combined.json":["4uqP",275],"./en-001/_combined.json":["YHcT",283],"./en-150/_combined.json":["6nXF",284],"./en-AG/_combined.json":["Ma+m",285],"./en-AI/_combined.json":["Bb4Y",286],"./en-AS/_combined.json":["3DdZ",287],"./en-AU/_combined.json":["+YpM",288],"./en-BB/_combined.json":["0r6j",289],"./en-BE/_combined.json":["MYcT",290],"./en-BM/_combined.json":["Beag",291],"./en-BS/_combined.json":["4GKC",292],"./en-BW/_combined.json":["fyZ5",293],"./en-BZ/_combined.json":["KDbT",294],"./en-CA/_combined.json":["JPNH",295],"./en-CC/_combined.json":["wcBm",296],"./en-CK/_combined.json":["yKBd",297],"./en-CM/_combined.json":["wJ3H",298],"./en-CX/_combined.json":["nv2n",299],"./en-DG/_combined.json":["oaA8",300],"./en-DM/_combined.json":["PVF+",301],"./en-ER/_combined.json":["Ufgi",302],"./en-FJ/_combined.json":["xGrz",303],"./en-FK/_combined.json":["AVBD",304],"./en-FM/_combined.json":["GEpg",305],"./en-GB/_combined.json":["iETG",306],"./en-GD/_combined.json":["BwNK",307],"./en-GG/_combined.json":["m4mR",308],"./en-GH/_combined.json":["Ndt5",309],"./en-GI/_combined.json":["7qmt",310],"./en-GM/_combined.json":["LI3r",311],"./en-GU/_combined.json":["1mog",312],"./en-GY/_combined.json":["4oOp",313],"./en-HK/_combined.json":["kzZH",314],"./en-IE/_combined.json":["cZDf",315],"./en-IM/_combined.json":["FWGY",316],"./en-IN/_combined.json":["8QNH",317],"./en-IO/_combined.json":["Wk71",318],"./en-JE/_combined.json":["hL7Z",319],"./en-JM/_combined.json":["6RUH",320],"./en-KE/_combined.json":["imc3",321],"./en-KI/_combined.json":["ZLwJ",322],"./en-KN/_combined.json":["fY0N",323],"./en-KY/_combined.json":["2bN7",324],"./en-LC/_combined.json":["L5G8",325],"./en-LR/_combined.json":["uAu1",326],"./en-LS/_combined.json":["+9Km",327],"./en-MG/_combined.json":["pkMa",328],"./en-MH/_combined.json":["Pght",329],"./en-MO/_combined.json":["4brt",330],"./en-MP/_combined.json":["f3kU",331],"./en-MS/_combined.json":["Cner",332],"./en-MT/_combined.json":["CB9i",333],"./en-MU/_combined.json":["dcsm",334],"./en-MW/_combined.json":["vx0Y",335],"./en-MY/_combined.json":["4xdO",336],"./en-NA/_combined.json":["XOdH",337],"./en-NF/_combined.json":["3zUU",338],"./en-NG/_combined.json":["XcAH",339],"./en-NR/_combined.json":["1hF2",340],"./en-NU/_combined.json":["Rd4I",341],"./en-NZ/_combined.json":["Thfj",342],"./en-PG/_combined.json":["Pwz4",343],"./en-PH/_combined.json":["cBN5",344],"./en-PK/_combined.json":["Jp8X",345],"./en-PN/_combined.json":["kVcJ",346],"./en-PR/_combined.json":["C79j",347],"./en-PW/_combined.json":["IHQ7",348],"./en-RW/_combined.json":["3+fb",349],"./en-SB/_combined.json":["k36a",350],"./en-SC/_combined.json":["khir",351],"./en-SD/_combined.json":["ugPT",352],"./en-SG/_combined.json":["h5D0",353],"./en-SH/_combined.json":["kWBW",354],"./en-SL/_combined.json":["Dzhg",355],"./en-SS/_combined.json":["RUIe",356],"./en-SX/_combined.json":["wDR3",357],"./en-SZ/_combined.json":["3w4R",358],"./en-TC/_combined.json":["IcK3",359],"./en-TK/_combined.json":["FOhX",360],"./en-TO/_combined.json":["TCjz",361],"./en-TT/_combined.json":["fS+W",362],"./en-TV/_combined.json":["3onS",363],"./en-TZ/_combined.json":["5zt/",364],"./en-UG/_combined.json":["JPX0",365],"./en-UM/_combined.json":["Mb5E",366],"./en-US-POSIX/_combined.json":["jQAd",368],"./en-US/_combined.json":["yTKl",367],"./en-VC/_combined.json":["umMp",369],"./en-VG/_combined.json":["EDFe",370],"./en-VI/_combined.json":["Er4e",371],"./en-VU/_combined.json":["nrZT",372],"./en-WS/_combined.json":["4QLw",373],"./en-ZA/_combined.json":["wCbM",374],"./en-ZM/_combined.json":["/LDK",375],"./en-ZW/_combined.json":["Hw9p",376],"./en/_combined.json":["sNIU",282],"./es-419/_combined.json":["ZPZ1",378],"./es-AR/_combined.json":["Am5Z",379],"./es-BO/_combined.json":["tzf5",380],"./es-CL/_combined.json":["J0SI",381],"./es-CO/_combined.json":["UbmO",382],"./es-CR/_combined.json":["qt+y",383],"./es-CU/_combined.json":["QE7f",384],"./es-DO/_combined.json":["HYau",385],"./es-EA/_combined.json":["KcLf",386],"./es-EC/_combined.json":["S0/D",387],"./es-ES/_combined.json":["lVSm",388],"./es-GQ/_combined.json":["wsbn",389],"./es-GT/_combined.json":["OLUC",390],"./es-HN/_combined.json":["WoHz",391],"./es-IC/_combined.json":["n6S2",392],"./es-MX/_combined.json":["VjBw",393],"./es-NI/_combined.json":["gmAL",394],"./es-PA/_combined.json":["wD63",395],"./es-PE/_combined.json":["mjzo",396],"./es-PH/_combined.json":["QFbx",397],"./es-PR/_combined.json":["mQ8Z",398],"./es-PY/_combined.json":["1vOg",399],"./es-SV/_combined.json":["BCZi",400],"./es-US/_combined.json":["0mEl",401],"./es-UY/_combined.json":["AZ1f",402],"./es-VE/_combined.json":["Bfc6",403],"./es/_combined.json":["Iutf",377],"./fi-FI/_combined.json":["FkZD",405],"./fi/_combined.json":["JvJC",404],"./fr-BE/_combined.json":["Tkl0",407],"./fr-BF/_combined.json":["cxwg",408],"./fr-BI/_combined.json":["zeJq",409],"./fr-BJ/_combined.json":["al0q",410],"./fr-BL/_combined.json":["4cKm",411],"./fr-CA/_combined.json":["WBM3",412],"./fr-CD/_combined.json":["wmPG",413],"./fr-CF/_combined.json":["RhSx",414],"./fr-CG/_combined.json":["iqMf",415],"./fr-CH/_combined.json":["hUD0",416],"./fr-CI/_combined.json":["D+DA",417],"./fr-CM/_combined.json":["D5cn",418],"./fr-DJ/_combined.json":["a28n",419],"./fr-DZ/_combined.json":["0dq+",420],"./fr-FR/_combined.json":["6gRC",421],"./fr-GA/_combined.json":["7pVJ",422],"./fr-GF/_combined.json":["76IO",423],"./fr-GN/_combined.json":["FiR1",424],"./fr-GP/_combined.json":["j8tI",425],"./fr-GQ/_combined.json":["Kkty",426],"./fr-HT/_combined.json":["Celw",427],"./fr-KM/_combined.json":["VOt+",428],"./fr-LU/_combined.json":["d9qI",429],"./fr-MA/_combined.json":["fK3G",430],"./fr-MC/_combined.json":["PRyJ",431],"./fr-MF/_combined.json":["wbFQ",432],"./fr-MG/_combined.json":["VTW6",433],"./fr-ML/_combined.json":["fHIT",434],"./fr-MQ/_combined.json":["Fxzu",435],"./fr-MR/_combined.json":["bVZY",436],"./fr-MU/_combined.json":["uqex",437],"./fr-NC/_combined.json":["UU7a",438],"./fr-NE/_combined.json":["3i7k",439],"./fr-PF/_combined.json":["OujE",440],"./fr-PM/_combined.json":["HUZ+",441],"./fr-RE/_combined.json":["/OY7",442],"./fr-RW/_combined.json":["u1qL",443],"./fr-SC/_combined.json":["lkww",444],"./fr-SN/_combined.json":["5U+s",445],"./fr-SY/_combined.json":["lYx8",446],"./fr-TD/_combined.json":["wOiP",447],"./fr-TG/_combined.json":["F0gJ",448],"./fr-TN/_combined.json":["1qTE",449],"./fr-VU/_combined.json":["kGPb",450],"./fr-WF/_combined.json":["nN8O",451],"./fr-YT/_combined.json":["8MCW",452],"./fr/_combined.json":["foK4",406],"./ga-IE/_combined.json":["eG2/",454],"./ga/_combined.json":["s8KT",453],"./he-IL/_combined.json":["sMz+",456],"./he/_combined.json":["cQ2g",455],"./it-CH/_combined.json":["fzun",458],"./it-IT/_combined.json":["P9b0",459],"./it-SM/_combined.json":["NYQX",460],"./it/_combined.json":["/GVn",457],"./ja-JP/_combined.json":["/K1E",462],"./ja/_combined.json":["QmgJ",461],"./ko-KP/_combined.json":["IOaT",464],"./ko-KR/_combined.json":["7gcV",465],"./ko/_combined.json":["wQWN",463],"./kok-IN/_combined.json":["ICiQ",467],"./kok/_combined.json":["9ycP",466],"./ms-Latn-BN/_combined.json":["22hl",470],"./ms-Latn-MY/_combined.json":["ZuP2",471],"./ms-Latn-SG/_combined.json":["e91u",472],"./ms-Latn/_combined.json":["ukDk",469],"./ms/_combined.json":["s6EQ",468],"./nb-NO/_combined.json":["1R50",474],"./nb-SJ/_combined.json":["8W6M",475],"./nb/_combined.json":["9xWY",473],"./nl-AW/_combined.json":["O/ru",477],"./nl-BE/_combined.json":["i+Bd",478],"./nl-BQ/_combined.json":["T2Ti",479],"./nl-CW/_combined.json":["9yzq",480],"./nl-NL/_combined.json":["iCPS",481],"./nl-SR/_combined.json":["Zt0n",482],"./nl-SX/_combined.json":["kWFG",483],"./nl/_combined.json":["7I+W",476],"./nn-NO/_combined.json":["FQcW",485],"./nn/_combined.json":["B4Kb",484],"./pl-PL/_combined.json":["R1Tu",487],"./pl/_combined.json":["kVtb",486],"./pt-AO/_combined.json":["B3/k",489],"./pt-BR/_combined.json":["1X4n",490],"./pt-CV/_combined.json":["iEac",491],"./pt-GW/_combined.json":["/Ul8",492],"./pt-MO/_combined.json":["p9ZG",493],"./pt-MZ/_combined.json":["XskY",494],"./pt-PT/_combined.json":["MDaI",495],"./pt-ST/_combined.json":["OvaG",496],"./pt-TL/_combined.json":["wSWv",497],"./pt/_combined.json":["VMFA",488],"./ru-BY/_combined.json":["iiA/",499],"./ru-KG/_combined.json":["IZwx",500],"./ru-KZ/_combined.json":["YFdG",501],"./ru-MD/_combined.json":["UW08",502],"./ru-RU/_combined.json":["jUNN",503],"./ru-UA/_combined.json":["OYM5",504],"./ru/_combined.json":["rJfS",498],"./sv-AX/_combined.json":["BHCm",506],"./sv-FI/_combined.json":["oV3l",507],"./sv-SE/_combined.json":["9OhI",508],"./sv/_combined.json":["Q4W9",505],"./th-TH/_combined.json":["l+x3",510],"./th/_combined.json":["3Oph",509],"./tr-CY/_combined.json":["v8bW",512],"./tr-TR/_combined.json":["jg1M",513],"./tr/_combined.json":["C2yj",511],"./vi-VN/_combined.json":["5jb1",515],"./vi/_combined.json":["RzWr",514],"./zh-Hans-CN/_combined.json":["XLN1",518],"./zh-Hans-HK/_combined.json":["v9E7",519],"./zh-Hans-MO/_combined.json":["4fh/",520],"./zh-Hans-SG/_combined.json":["ZXIt",521],"./zh-Hans/_combined.json":["KSkj",517],"./zh-Hant-HK/_combined.json":["4hpr",523],"./zh-Hant-MO/_combined.json":["CAr/",524],"./zh-Hant-TW/_combined.json":["A9p9",525],"./zh-Hant/_combined.json":["eH5n",522],"./zh/_combined.json":["1qkM",516]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n.t(i,3)}))}i.keys=function(){return Object.keys(r)},i.id="RRs6",e.exports=i},ReOc:function(e,t,n){"use strict";var r=n("D57K"),i=n("nsO7"),o=n("NI+y"),s=n("Q/M7"),a=n("5MwF"),u=function(){function e(){}return e.prototype.getHistory=function(){return o.b.getHistory()},e.prototype.getSiteId=function(){return this.context?this.context.getSystemInfo().siteId:null},e.prototype.getUserAgent=function(){return navigator.userAgent},e.prototype.getUser=function(){return this.userService?this.userService.userModel:null},e.prototype.init=function(e,t,n,r){this.context=e,this.userService=t,o.b.setStorage(n,r)},e.prototype.getDebugInfoRaw=function(){return Object(r.__awaiter)(this,void 0,Promise,(function(){var e,t;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return e=this.getUser(),[4,this.getHistory()];case 1:return t=n.sent(),[2,{userAgent:this.getUserAgent(),siteId:this.getSiteId(),siteDomain:s.j(),buildNumber:a.a.buildInfo.buildNumber,ultraVersion:a.a.buildInfo.ultraVersion,learnVersion:a.a.buildInfo.learnVersion,userId:e?e.id:null,userName:e?e.userName:null,analyticsHistory:t,generatedTime:(new Date).toUTCString()}]}}))}))},e.prototype.getDebugInfoFriendly=function(){return Object(r.__awaiter)(this,void 0,Promise,(function(){var e,t,n,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.getDebugInfoRaw()];case 1:return e=r.sent(),n={innerHeight:null,innerWidth:null,outerHeight:null,outerWidth:null},o=!1,(t=[]).push("===== Basic Session Info ===="),t.push("Debug Exported at: "+e.generatedTime),t.push("User Agent: "+e.userAgent),t.push("Site Domain: "+e.siteDomain),t.push("Build Number: "+e.buildNumber),t.push("Ultra Version: "+e.ultraVersion),t.push("Learn Version: "+e.learnVersion),e.siteId?t.push("Learn Site ID: "+e.siteId):t.push("Learn Site ID: site id unavailable, no context provided"),e.userId?t.push("User: "+e.userName+" ("+e.userId+")"):t.push("User: user id unavailable, no context provided"),t.push("===== Recent Analytics History (oldest first) ====="),e.analyticsHistory.forEach((function(e){e.screenDimension&&!i.isEqual(n,e.screenDimension)&&(t.push(e.timestamp+": Screen Size "+(o?"changed to ":"is ")+" "+e.screenDimension.innerHeight+" x "+e.screenDimension.innerWidth),Object.assign(n,e.screenDimension),o=!0),"click"===e.action?t.push(e.timestamp+": clicked on "+e.analyticsId):"pageview"===e.action?t.push(e.timestamp+": navigated to "+e.analyticsId):"request error"===e.action&&t.push(e.timestamp+": Request error: "+e.analyticsId)})),[2,t]}}))}))},e}();t.a=new u},"Rjd/":function(e,t,n){"use strict";n("QLzv"),n("qY1S");var r=n("wHJ2"),i=n("nkTj"),o=n("z6Q5"),s=r.module("ultra.models",["restmod","angular-data.DSCacheFactory",i.e,o.a]);t.a=s},RphD:function(e,t){},SBFF:function(e,t){e.exports='<div ng-show="isShown" class="guidance-container stop-click-propagation" aria-hidden="true">\n  <p ng-show="title" ng-transclude="title" class="guidance-title"></p>\n  <p ng-transclude></p>\n</div>'},SSV0:function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-accommodation",use:"icon-small-accommodation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accommodation"><circle cx="8" cy="8" r="7" stroke-width="2" /><path d="M4 6l1 2 5-3M12 10l-1-2-5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},Sa5G:function(e,t,n){"use strict";var r,i=n("817J"),o=n("D57K"),s=n("nbDY"),a=n.n(s),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Text=new t("textBlock"),t.Html=new t("htmlBlock"),t.File=new t("fileBlock"),t.AttemptFile=new t("attemptFileBlock"),t}(a.a),c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e),t.stringToEnum=function(e){var n=null;switch(e){case t.SingleText.toString():n=t.SingleText;break;case t.SingleFile.toString():n=t.SingleFile;break;default:n=t.TextAndFiles}return n},t.SingleText=new t("SingleText"),t.SingleFile=new t("SingleFile"),t.TextAndFiles=new t("TextAndFiles")}(a.a),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e),t.prototype.getOptionValue=function(){switch(this){case t.Add:return"+";case t.Subtract:return"-";case t.Multiply:return"*";case t.Divide:return"/";case t.Open_Parenthesis:return"(";case t.Close_Parenthesis:return")";case t.Value:return"value"}},t.Add=new t("ADD"),t.Subtract=new t("SUBTRACT"),t.Multiply=new t("MULTIPLY"),t.Divide=new t("DIVIDE"),t.Open_Parenthesis=new t("OPEN_PARENTHESIS"),t.Close_Parenthesis=new t("CLOSE_PARENTHESIS"),t.Value=new t("VALUE")}(a.a),n("7CA4"),n("Y3OE")),l=n("pqmn"),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.keys=n,r.keys.buttonKey||(r.keys.buttonKey="base.courses.conversion.ok"),r}return Object(o.__extends)(t,e),t.ConversionInProgress=new t("ConversionInProgress",{titleKey:"base.courses.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.courses.conversion.beingConvertedAlert"}),t.ConversionComplete=new t("ConversionComplete",{titleKey:"base.courses.conversion.hasBeenConverted",bodyKey:"base.courses.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.courses.conversion.hasBeenConvertedAlert"}),t.OrgConversionInProgress=new t("OrgConversionInProgress",{titleKey:"base.organizations.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.organizations.conversion.beingConvertedAlert"}),t.OrgConversionComplete=new t("OrgConversionComplete",{titleKey:"base.organizations.conversion.hasBeenConverted",bodyKey:"base.organizations.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.organizations.conversion.hasBeenConvertedAlert"}),t.StudentTryAgain=new t("StudentTryAgain",{titleKey:"base.courses.noAccess.studentCurrentlyNoAccess",bodyKey:"base.courses.noAccess.studentTryAgain"}),t.StudentNoLongerAccessible=new t("StudentNoLongerAccessible",{titleKey:"base.courses.noAccess.studentCourseHasEnded",bodyKey:"base.courses.noAccess.studentNoLongerAccess"}),t.ParticipantTryAgain=new t("ParticipantTryAgain",{titleKey:"base.organizations.noAccess.studentCurrentlyNoAccess",bodyKey:"base.organizations.noAccess.studentTryAgain"}),t.ParticipantNoLongerAccessible=new t("ParitcipantNoLongerAccessible",{titleKey:"base.organizations.noAccess.studentCourseHasEnded",bodyKey:"base.organizations.noAccess.studentNoLongerAccess"}),t.None=new t("None",{titleKey:"",bodyKey:""}),t}(a.a),p=n("1y/X"),m=(n("a8V0"),n("lCpV")),f=n("r6n2"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Contains=new t("CONTAINS"),t.Exact=new t("EXACT"),t.Matches=new t("MATCHES"),t}(a.a);!function(e){e.CUSTOM="CUSTOM"}(r||(r={}));var g,v=r,b=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e),t.Assignment=new t("Assignment"),t.Test=new t("Test"),t.Exam=new t("Exam"),t.Homework=new t("Homework"),t.Presentation=new t("Presentation"),t.Quiz=new t("Quiz")}(a.a),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.ReadyToPost=new t("READY_TO_POST"),t.IsPosted=new t("IS_POSTED"),t.NoOverride=new t("NO_OVERRIDE"),t.GradingInProgress=new t("GRADING_IN_PROGRESS"),t}(a.a)),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.AttemptScore=new t("a"),t.None=new t("-"),t.OverrideScore=new t("m"),t}(a.a),S=n("BOxd"),C=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e),t.Letter=new t("Letter"),t.Percentage=new t("Percentage"),t.Points=new t("Points"),t.Text=new t("Text")}(a.a),n("dtd2")),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Email=new t("email"),t.Mobile=new t("mobile"),t.SMS=new t("sms"),t.Voice=new t("voice"),t.Dashboard=new t("dashboard"),t}(a.a),k=n("bzJv"),I=n("A0nf"),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Available=new t("AVAILABLE"),t.Opened=new t("OPENED"),t.Started=new t("STARTED"),t.Saved=new t("SAVED"),t.Submitted=new t("SUBMITTED"),t}(a.a);n("KiLF");!function(e){e.SingleOccurrence="S",e.PeriodicOccurrence="P"}(g||(g={}));var E,$=g;!function(e){e.ViewPostedCourseAnnouncement="course.announcements.VIEW",e.ViewUnpostedCourseAnnouncement="course.announcements.admin.VIEW",e.CreateCourseAnnouncement="course.announcements.CREATE",e.ModifyCourseAnnouncement="course.announcements.MODIFY",e.DeleteCourseAnnouncement="course.announcements.DELETE",e.ViewPostedSystemAnnouncement="system.announcements.VIEW",e.ViewUnpostedSystemAnnouncement="system.announcements.admin.VIEW",e.CreateSystemAnnouncement="system.announcements.CREATE",e.ModifySystemAnnouncement="system.announcements.MODIFY",e.DeleteSystemAnnouncement="system.announcements.DELETE"}(E||(E={}));var P,A=E,O=n("nawZ");!function(e){e.ViewCalendar="course.calendar.VIEW"}(P||(P={}));var _,D=P;!function(e){e.CreateContent="course.content.CREATE",e.DeleteContent="course.content.DELETE",e.ModifyContent="course.content.MODIFY",e.ViewContent="course.content.VIEW",e.ViewAsDesigner="course.content.designer.VIEW",e.DeployAssessment="course.content.assessment.deploy.EXECUTE",e.ModifyContentAvailability="course.content.availability.MODIFY"}(_||(_={}));var x,R=_;!function(e){e.DeleteAdaptiveRelease="course.adaptiverelease.DELETE",e.ModifyAdaptiveRelease="course.adaptiverelease.MODIFY",e.ViewAdaptiveRelease="course.adaptiverelease.VIEW",e.ModifyAdaptiveReleaseDates="course.adaptiverelease.dates.MODIFY",e.DeleteAssessment="course.assessment.DELETE",e.ModifyAssessment="course.assessment.MODIFY",e.ViewAssessment="course.assessment.VIEW",e.ModifyAttendance="course.attendance.MODIFY",e.ViewAttendance="course.attendance.VIEW",e.ViewChildCourse="course.children.VIEW",e.ModifyAllowConversationReplies="course.conversations.allow-replies.MODIFY",e.ModifyTimeLimitAccomodation="course.timelimit-exception.MODIFY",e.ModifyDueDateException="course.duedate-exception.MODIFY",e.ViewPreviewStudent="course.user-impersonate.EXECUTE"}(x||(x={}));var M,N=x;!function(e){e.ModifyRubrics="course.rubrics.MODIFY",e.ViewRubrics="course.rubrics.VIEW"}(M||(M={}));var j,L=M;!function(e){e.EmailAllUsers="course.email-all-users.EXECUTE"}(j||(j={}));var U,G=j,F=n("d2bc");!function(e){e.CreateGroups="course.groups.CREATE",e.DeleteGroups="course.groups.DELETE",e.ModifyGroups="course.groups.MODIFY",e.ViewGroups="course.groups.VIEW",e.ViewGroupsAsAdmin="course.groups.admin.VIEW",e.ManageGroupMembership="course.group-user.manage.EXECUTE"}(U||(U={}));var B,q=U;!function(e){e.Modify="content.embedded-iframe.MODIFY"}(B||(B={}));var H,V=B,z=n("Q74M");!function(e){e.CreatePortalOptionsModuleManagement="system.portaloptions.managemodules.CREATE",e.ModifyPortalOptionsModuleManagement="system.portaloptions.managemodules.MODIFY",e.ViewBrand="system.portaloptions.brand.VIEW",e.CreateBrand="system.portaloptions.brand.CREATE",e.ModifyBrand="system.portaloptions.brand.MODIFY",e.DeleteBrand="system.portaloptions.brand.DELETE",e.ModifyUltraThemeData="system.ultra.themedata.MODIFY"}(H||(H={}));var K,J=H;!function(e){e.ModifyContent="content.trustedcontent.MODIFY"}(K||(K={}));var W=K,Q=n("JfV0");n.d(t,"A",(function(){return Q.QuestionType})),n.d(t,"z",(function(){return Q.QuestionSubType})),n.d(t,"c",(function(){return i.a})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return c.a})),n.d(t,"h",(function(){return l.a})),n.d(t,"i",(function(){return d})),n.d(t,"k",(function(){return p.a})),n.d(t,"n",(function(){return m.a})),n.d(t,"m",(function(){return f.a})),n.d(t,"p",(function(){return h})),n.d(t,"q",(function(){return v})),n.d(t,"s",(function(){return y})),n.d(t,"r",(function(){return b})),n.d(t,"t",(function(){return S.a})),n.d(t,"w",(function(){return C.a})),n.d(t,"x",(function(){return w})),n.d(t,"y",(function(){return k.a})),n.d(t,"B",(function(){return I.a})),n.d(t,"F",(function(){return T})),n.d(t,"C",(function(){return $})),n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return O.a})),n.d(t,"e",(function(){return D})),n.d(t,"f",(function(){return R})),n.d(t,"j",(function(){return N})),n.d(t,"l",(function(){return L})),n.d(t,"o",(function(){return G})),n.d(t,"u",(function(){return F.a})),n.d(t,"v",(function(){return q})),n.d(t,"H",(function(){return V})),n.d(t,"D",(function(){return z.a})),n.d(t,"E",(function(){return J})),n.d(t,"G",(function(){return W}))},SeO5:function(e,t){e.exports='<bb-modal id="content-deleted-modal"\n          class="notification"\n          modal-title-key="base.stream.modal.accessDenied.title"\n          analytics-id-tag-prefix="base.stream.modal.accessDenied">\n  <div name="modal-contents">\n    <p bb-translate>base.stream.modal.accessDenied.body</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate analytics-id="global.ok">global.ok</button>\n</bb-modal>\n'},Si89:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n("D57K"),i=n("wHJ2"),o=n("5MwF"),s=n("aHpC"),a=n("fYJU"),u=n("emI2"),c=n("wQOJ"),l=n("TnpK"),d="ultra.service.context.landingPage",p="landingPageService",m=function(){function e(e,t,n,r,i,o){this.$q=e,this.$timeout=t,this.currentUser=n,this.preferences=r,this.institutionApi=i,this.ultraState=o}return e.prototype.navigateToLandingPage=function(){var e=this;return this.getLandingPage().then((function(t){return e.ultraState.go(t)}))},e.prototype.getLandingPage=function(){var e=this;return this.currentUser.userModel.$asPromise().then((function(t){return t.isGuest()?e.convertLandingPageToRoute():e.preferences.getPreference("ultraui.first.time.welcome.welcome.visited").then((function(){return e.convertLandingPageToRoute()}),(function(t){return 404===t.$response.status?o.a.features.devtools_disableFtue?e.convertLandingPageToRoute():"welcome":e.convertLandingPageToRoute()}))}))},e.prototype.convertLandingPageToRoute=function(){var e=this;return this.currentUser.userModel.$asPromise().then((function(t){switch(t.landingPage){case"ActivityStream":return"base.recentActivity";case"InstitutionPage":return e.getInstitutionPageRoute();case"CourseList":return"base.courses";default:return"base.recentActivity"}}))},e.prototype.getInstitutionPageRoute=function(){var e=this,t=this.$q.defer(),n=this.$timeout((function(){return t.resolve("base.recentActivity")}),6e3);return this.institutionApi.getHealth().then((function(){return e.institutionApi.getEffectiveVariantIdWithPermissions()})).then((function(e){var t=e.canEdit,n=e.canView;return t?"base.institution-page-admin":n?"base.institution-page":"base.recentActivity"})).catch((function(){return"base.recentActivity"})).then((function(r){e.$timeout.cancel(n),t.resolve(r)})),t.promise},e=Object(r.__decorate)([Object(r.__param)(0,Object(s.b)("$q")),Object(r.__param)(1,Object(s.b)("$timeout")),Object(r.__param)(2,Object(s.b)(a.b)),Object(r.__param)(3,Object(s.b)(u.c)),Object(r.__param)(4,Object(s.b)(c.b)),Object(r.__param)(5,Object(s.b)(l.d))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(m);i.module(d,[a.a,u.b,c.a,l.b]).service(p,m)},Sjpn:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("TnpK"),o="ultra.features.base.profile.privacy.routes";r.module(o,["ui.router",i.b]).config([i.c,function(e){e.peekState("privacy",{url:"/privacy",require:function(){return Promise.all([n.e(28),n.e(48),n.e(128)]).then(n.bind(null,"0OB5"))},pageTitle:"base.profile.updatePrivacySettings.pageTitle"})}])},TAnh:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("JURN");var r=n("wHJ2"),i=n("4GL6"),o=n("e6jQ"),s=n("usTV"),a="ultra.components.directives.squareToggle",u=function(){function e(e,t,n){this.scope=e,this.element=t,this.attrs=n,this.oneControlId=o.a(),this.twoControlId=o.a()}return e.prototype.handleKeyUp=function(e){13!==e.keyCode&&32!==e.keyCode||(this.scope.property=e.target.value)},e.prototype.handleClick=function(e){this.scope.property=e.target.value},e.$inject=["scope","element","attrs"],e}(),c=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=s,this.scope={oneIconClass:"@",oneAriaLabel:"@",oneAriaControls:"@?",oneViewValue:"@",oneTooltipTemplate:"@?",oneTooltipScope:"&?",property:"=",twoIconClass:"@",twoAriaLabel:"@",twoAriaControls:"@?",twoViewValue:"@",twoTooltipTemplate:"@?",twoTooltipScope:"&?",analyticsIdTagPrefix:"@?"},this.compile=function(e,n){return r.isDefined(n.oneTooltipTemplate)&&e.find("input.input-one").attr("bb-complex-tooltip",""),r.isDefined(n.twoTooltipTemplate)&&e.find("input.input-two").attr("bb-complex-tooltip",""),{post:function(e,n,r){e.squareToggle=t.$injector.instantiate(u,{scope:e,element:n,attrs:r})}}}}return e.$inject=["$injector"],e}();r.module(a,[i.b]).directive("bbSquareToggle",["$injector",function(e){return e.instantiate(c)}])},TB6y:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("D57K"),i=(n("9RbK"),n("cf0z"),n("KCTV"),n("aHpC")),o=n("5iHu"),s=n("nsO7"),a=n("wHJ2"),u=n("e6jQ"),c=n("lUN/"),l=n("lEL+"),d=n("+4Px"),p=n("7+Tq"),m=n("d7QB"),f="ultra.directives.bbFoundation";window.Foundation.libs.dropdown.dirs._base=function(e){var t,n=this.offsetParent().offset(),r=e.offset();r.top-=n.top,r.left-=n.left,r.missRight=!1,r.missTop=!1,r.missLeft=!1,r.leftRightFlag=!1,t=document.getElementsByClassName("row")[0]?document.getElementsByClassName("row")[0].clientWidth:window.innerWidth;var i=(window.innerWidth-t)/2;if(!this.hasClass("mega")){var o=this.outerWidth(),s=e.offset();s.top<=this.outerHeight()&&(r.missTop=!0,window.innerWidth-i,r.leftRightFlag=!0),s.left-i+o>t?(r.missRight=!0,r.missLeft=!1):s.left-i-o<=0&&(r.missLeft=!0,r.missRight=!1)}return this.toggleClass("miss-right",r.missRight),this.toggleClass("miss-left",r.missLeft),r};var h=window.Foundation.libs.dropdown.adjust_pip;window.Foundation.libs.dropdown.adjust_pip=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.hasClass("disable-pip-adjustment")||h.apply(this,Object(r.__spreadArrays)([e],t))};var g=function(e,t,n,r){e.$on("$destroy",(function(){window.Foundation.scope===t[0]&&(window.Foundation.scope=null),s.forEach(window.Foundation.libs,(function(e){e.scope===t[0]&&(e.scope=null),delete e.bindings,delete e.settings.callback}))}));["small","small-only","medium","medium-only","large","large-only","xlarge","xlarge-only","xxlarge"].forEach((function(e){window.Foundation.media_queries[e]=o(".foundation-mq-"+e).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")})),c.a();var i=function(e){e.each((function(t,r){var i=o(r),s=i.hasClass("active"),a=i.children("a").first(),u=i.children(".content").first(),c=o("body");u.attr("aria-hidden",!s+""),a.attr({"aria-selected":s,"aria-expanded":s});var l=i.find(':tabbable[role!="tab"]').add(i.find('[tabindex="-1"]')).add(i.find("input")).not(i.children("a").first());s?l.attr("tabindex",0):l.attr("tabindex","-1"),n||(a.on("keydown",(function(n){if(n.keyCode===d.v||n.keyCode===d.j){var r=0===t?e.length-1:t-1;o(e.get(r)).children("a").first().focus()}else if(n.keyCode===d.d||n.keyCode===d.s){var i=t===e.length-1?0:t+1;o(e.get(i)).children("a").first().focus()}else n.keyCode===d.i?o(e.get(0)).children("a").first().focus():n.keyCode===d.e&&o(e.get(e.length-1)).children("a").first().focus();c.removeClass("hide-focus-outline")})),u.on("keydown",(function(n){if(n.ctrlKey&&n.keyCode===d.v)a.focus();else if(n.ctrlKey&&n.keyCode===d.q){var r=0===t?e.length-1:t-1;o(e.get(r)).children("a").first().focus()}else if(n.ctrlKey&&n.keyCode===d.p){var i=t===e.length-1?0:t+1;o(e.get(i)).children("a").first().focus()}c.removeClass("hide-focus-outline")}))),i.addClass("accordion-complete")}))},a=t.find(".accordion");a.length>0&&a.each((function(e,t){var n=o(t),r=n.find(".accordion-navigation:not(.accordion-complete)");n.attr("role","tablist"),r.each((function(t,n){var r=o(n),i=r.children("a").first(),s=r.children(".content").first();i.attr("role","tab"),s.attr("role","tabpanel");var a=u.a(),c="accordion"+e+"-"+a+"-header"+t,l="accordion"+e+"-"+a+"-panel"+t;i.attr("id",c),s.attr("id",l),i.attr("href","#"+l),i.attr("aria-controls",l),s.attr("aria-labelledby",c)})),i(r)})),r(t,e),t.foundation({accordion:{multi_expand:!0,callback:function(e){e.closest(".accordion").removeAttr("aria-multiselectable");var t=e.closest(".accordion").children(".accordion-navigation");i(t)}},dropdown:{}})},v=function(){function e(e,t){var n=this;this.dropdownInit=e,this.integrationEventEmitterService=t,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,r){n.onDestroyHandler=n.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(r.rubricOverride);e.$on("$destroy",(function(){n.onDestroyHandler&&n.onDestroyHandler()})),g(e,t,i,n.dropdownInit)},this.onDestroyHandler=null}return e=Object(r.__decorate)([Object(r.__param)(0,Object(i.b)(p.b)),Object(r.__param)(1,Object(i.b)(m.serviceName))],e)}(),b=function(){function e(e,t,n){var r=this;this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,n){r.onDestroyHandler=r.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(n.rubricOverride);e.$on("$destroy",(function(){r.onDestroyHandler&&r.onDestroyHandler()})),r.timeout((function(){g(e,t,i,r.dropdownInit)}),e,0,!1)},this.onDestroyHandler=null}return e=Object(r.__decorate)([Object(r.__param)(0,Object(i.b)(l.b)),Object(r.__param)(1,Object(i.b)(p.b)),Object(r.__param)(2,Object(i.b)(m.serviceName))],e)}(),y=function(){function e(e,t,n){var r=this;this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,n){r.onDestroyHandler=r.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(n.rubricOverride);e.$on("$destroy",(function(){r.onDestroyHandler&&r.onDestroyHandler()}));var o=e.$watch(n.bbFoundationWait,(function(n){n&&(o(),r.timeout((function(){g(e,t,i,r.dropdownInit)}),e,0,!1))}))}}return e=Object(r.__decorate)([Object(r.__param)(0,Object(i.b)(l.b)),Object(r.__param)(1,Object(i.b)(p.b)),Object(r.__param)(2,Object(i.b)(m.serviceName))],e)}(),S=function(){function e(e,t,n){var r=this;this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,n){r.onDestroyHandler=r.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(n.rubricOverride);e.$on("$destroy",(function(){r.onDestroyHandler&&r.onDestroyHandler()})),e.$watch(n.bbFoundationWaitContinuous,(function(n){n&&r.timeout((function(){g(e,t,i,r.dropdownInit)}),e,0,!1)}),null!=n.bbDeepWatch&&n.bbDeepWatch)}}return e=Object(r.__decorate)([Object(r.__param)(0,Object(i.b)(l.b)),Object(r.__param)(1,Object(i.b)(p.b)),Object(r.__param)(2,Object(i.b)(m.serviceName))],e)}();a.module(f,[l.a,p.a,m.moduleName]).directive("bbFoundation",["$injector",function(e){return e.instantiate(v)}]).directive("bbFoundationDefer",["$injector",function(e){return e.instantiate(b)}]).directive("bbFoundationWait",["$injector",function(e){return e.instantiate(y)}]).directive("bbFoundationWaitContinuous",["$injector",function(e){return e.instantiate(S)}])},TFjq:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-something-broke-modal"\n          modal-title-key="components.services.error-modal.error-something-broke.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-something-broke">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-something-broke.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>\n'},TT9l:function(e,t,n){"use strict";var r=n("ERkP"),i=n("7nmT"),o=n("e6jQ"),s=n("5LAh"),a=(n("n88p"),function(){var e=r.useState(Object(o.b)())[0],t=r.useState(!1),n=t[0],i=t[1],a=r.useRef();return r.createElement("div",{ref:a,className:"course-banner-integration-container"+(n?"":" no-integration-content")},r.createElement(s.d,{portalId:e,selector:"course.banner.top",onContentsChanged:function(e){i(!!e),a.current.dispatchEvent(new CustomEvent("banner-resize",{bubbles:!0}))}}))});n.d(t,"a",(function(){return u}));var u=new(function(){function e(){var e=this;this.subscriptions=[],this.createBanner=function(){if(e.currentBanner)return e.currentBanner;var t=document.createElement("div");return i.render(r.createElement(a,null),t),e.currentBanner=t,e.notifySubscribers(),e.currentBanner},this.destroyBanner=function(){e.currentBanner?(i.unmountComponentAtNode(e.currentBanner),e.currentBanner=null,e.notifySubscribers()):console.warn("There is no integration banner present to unmount.")},this.currentPanelBanner=function(){if(e.bannerStack.length)return e.bannerStack[e.bannerStack.length-1].state},this.pushBanner=function(t){e.bannerStack.push(t),1!==e.bannerStack.length&&e.bannerStack[e.bannerStack.length-2].orphan()},this.popBanner=function(t){e.bannerStack=e.bannerStack.filter((function(e){return e.state.stateName!==t})),e.bannerStack.length?e.bannerStack[e.bannerStack.length-1].adopt(e.currentBanner):e.destroyBanner()},this.bannerStack=[]}return e.prototype.watchBanner=function(e){var t=this;return this.subscriptions.push(e),setTimeout((function(){return e(t.currentBanner)})),function(){return t.subscriptions=t.subscriptions.filter((function(t){return t!==e}))}},e.prototype.notifySubscribers=function(){var e=this;this.subscriptions.forEach((function(t){return t(e.currentBanner)}))},e}())},TWlR:function(e,t,n){"use strict";var r=n("D57K"),i=n("td+C"),o=n("EcEN"),s={includeProcessingEvent:!0},a=function(){function e(e,t,n,r){this.integrationService=e,this.generateId=t,this.activeMessages=new Map,this.integrationService.addIntegrationMessageType(n+":response",this.correlatedMessageResponseCallback.bind(this)),r.includeProcessingEvent&&this.integrationService.addIntegrationMessageType(n+":processing",this.correlatedMessageProcessingCallback.bind(this))}return e.prototype.sendMessage=function(e,t){var n=this;return new Promise((function(i,o){var s=n.generateId(),a=n.createMessageTimeout(s,o);n.integrationService.sendMessage(Object(r.__assign)(Object(r.__assign)({},e),{correlationId:s,timeout:5e3}),t),n.activeMessages.set(s,{integrationId:t,timeoutId:a,resolvePromise:i,rejectPromise:o})}))},e.prototype.correlatedMessageResponseCallback=function(e,t){var n=this.getCorrelatedMessage(e,t.id);n&&(this.activeMessages.delete(e.correlationId),window.clearTimeout(n.timeoutId),n.resolvePromise(e))},e.prototype.correlatedMessageProcessingCallback=function(e,t){var n=this.getCorrelatedMessage(e,t.id);n&&(window.clearTimeout(n.timeoutId),n.timeoutId=this.createMessageTimeout(e.correlationId,n.rejectPromise))},e.prototype.createMessageTimeout=function(e,t){var n=this;return window.setTimeout((function(){n.activeMessages.delete(e);var r="Correlated message '"+e+"' timed out";console.warn(r),t(new Error(r))}),5e3)},e.prototype.getCorrelatedMessage=function(e,t){var n=e.correlationId,r=this.activeMessages.get(n);return r?r.integrationId!==t?(console.error("Correlated message '"+n+"' does not belong to '"+t+"'"),null):r:(console.error("Couldn't find a correlated message with correlation id '"+n+"'"),null)},e}();t.a=function(e,t){return void 0===t&&(t={}),new a(i.a,o.v4,e,Object(r.__assign)(Object(r.__assign)({},s),t))}},Tfg2:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.zipTitle"\n          modal-dismiss-key="components.directives.fileUpload.takeMeBack"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.zipFull</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" ng-click="fileUpload.closeModal(true)" class="button js-primary-button" analytics-id="components.directives.fileUpload.unzipFile">\n    <bb-translate>components.directives.fileUpload.unzipFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" ng-click="fileUpload.closeModal(false)" class="button button--secondary js-secondary-button" analytics-id="components.directives.fileUpload.uploadAsZip">\n    <bb-translate>components.directives.fileUpload.uploadAsZip</bb-translate>\n  </button>\n</bb-modal>\n'},Thlp:function(e,t,n){},TnpK:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return I})),n.d(t,"d",(function(){return T})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return P}));var r=n("D57K"),i=(n("JzsJ"),n("KUD0"),n("nsO7")),o=n("wHJ2"),s=n("yC9S"),a=n("t6zR"),u=n("0JpG"),c=n("yA26"),l=n("w9Zy"),d=n("5MwF"),p=n("Fvsw"),m=n("lVRt"),f=n("jhBu"),h=n("lEL+"),g=n("k9iv"),v=n("ZzR9"),b=n("Q/M7"),y=n("IVtk"),S=n("ORAk"),C=n("TT9l"),w=n("nmzr"),k=n("6fZB"),I="ultra.router",T="ultraState",E=T+"Provider",$="DefaultBasePage",P=".peek.";function A(e){e&&Object.keys(e).forEach((function(t){var n=e[t];Array.isArray(n)&&(e[t]=Array.from(new Set(n)),1===e[t].length&&(e[t]=n[0]))}))}function O(e,t){var n=/^(\^)?(\??)(\w+)/.exec(e),r={searchParents:!1,optional:!1,name:t};return n&&(r.searchParents="^"===n[1],r.optional="?"===n[2],r.name=n[3]?n[3]:t),r}var _=function(){function t(t,n){var u,c,m=this;this.$stateProvider=t,this.addedStates={},this.initAllStates=!1,this.$get=["$rootScope","$state","$injector","$sce",l.e,p.b,$,h.b,g.c,function(t,n,r,i,o,u,c,l,p){m.$state=n,m.$rootScope=t,m.defaultBasePage=c,m.context=u,m.timeout=l;var f=m.baseStates.map((function(e){return e.name}));if(s.b.OnRootScope(t,v.a.$stateChangeSuccess,(function(e,t){-1!==f.indexOf(t.name)&&(u.basePage=t.name,sessionStorage.setItem(a.a.getBasePageStorageKey(),u.basePage))})),s.b.OnRootScope(t,v.a.$stateChangeSuccess,(function(e,t,n,r,i){if(!(r.name&&t.name&&r.name.split(P).length<t.name.split(P).length)){var s=""===r.name,a=r.panelClass||"peek",u=t.panelClass||"peek";m.timeout((function(){"peek"!==a||"full"!==u||s||o.expandTopPanel(),"full"===a&&"peek"===u&&o.shrinkTopPanel()}),m.$rootScope,0,!1)}})),s.b.OnRootScope(t,v.a.$stateChangeStart,(function(e,t,i,o,s){n.next=t,A(i),n.nextParams=i,o&&(n.prev={name:o.name}),A(s),n.prevParams=s,t.routingFunction&&(e.preventDefault(),r.invoke(t.routingFunction))})),s.b.OnRootScope(t,v.a.$stateChangeError,(function(t,r,o,s,a,u){if(u.errorModalConfig&&p.openModal(u.modalConfig),u&&u.userNotEntitled)n.go(c);else if(u.goToBasePage)n.goCurrentBasePage();else{if(b.m("inPreviewMode",window.location.href)){var l=i.trustAsResourceUrl(b.c("/ultra/courses/"+n.nextParams.courseId+"/outline/?inPreviewMode=true"));e(window.parent.document).find("#preview-iframe").attr("src",l)}if(!d.a.production)throw console.error("$stateChangeError when moving from "+s.name+" to "+r.name),u}})),m.initAllStates)m.createAllStates();else{m.registerPeekStates(n.get(m.defaultBasePage));var h=n.get(sessionStorage.getItem(a.a.getBasePageStorageKey())||m.defaultBasePage);h&&h.name!==m.defaultBasePage&&m.registerPeekStates(h)}return n}],this.baseStates=[],this.peekStates={},this.absoluteUrls=[],t.decorator("resolve",(function(e,t){var n=t?t(e):e.resolve;return n.childrenStates&&n.childrenStates.length>0&&n.childrenStates.push(i.once(n.childrenStates.pop())),n})),t.decorator("resolve",(function(e,t){for(var n=t?t(e):e.resolve,o=function(e){var t=n[e],o=O(e,e);o.optional&&(delete n[e],e=o.name,n[e]=t);var s=function(e){if(i.isString(e))return e;var t=e[e.length-1];return i.isString(t)?t:""}(t);if(s){var a=O(s,e);a.searchParents?n[e]=[a.name,function(e){return e&&e.isLazy?e():e}]:console.error("Illegal resolve format. Did you forget to prepend ^?")}if(o.optional){var u=n[e],c=u.slice?u.slice(0,u.length-1):[];n[e]=Object(r.__spreadArrays)(["$injector"],c,[function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=i.once((function(){for(var n={},r=0;r<c.length;r++)n[c[r]]=t[r];return e.invoke(u,void 0,n)}));return r.isLazy=!0,r}])}},s=0,a=Object.keys(n);s<a.length;s++){o(a[s])}return n})),t.decorator("url",(function(e,t){var r=t(e);return r&&(r.exec=function(t){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];var a=this.regexp.source;new RegExp(a.substr(0,a.length-1)+"/").test(t)&&n.invoke(e.resolve.childrenStates||[o.noop]);var u=i?[t].concat(i):[t];return r.constructor.prototype.exec.apply(this,u)}),r})),u=t.state,c=m,t.state=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.addedStates["string"==typeof e[0]?e[0]:e[0].name]=!0,u.apply(this,e)}}return t.prototype.baseState=function(e,t){var r=this;return window.top!==window&&b.m("inPreviewMode",window.location.href)&&(t.require=function(){return n.e(689).then(n.bind(null,"shLZ"))},t.peekViewName=void 0),t=this.getStateWithName(e,t),this.baseStates.push(t),(t.resolve=t.resolve||{}).childrenStates=[function(){r.registerPeekStates(t)}],this.$stateProvider.state(t),this},t.prototype.peekState=function(e,t){var n=(t=this.getStateWithName(e,t)).name.split(".")[0];return this.peekStates[n]=this.peekStates[n]&&this.peekStates[n].concat(t)||[t],this},t.prototype.state=function(e,t){return t=this.getStateWithName(e,t),this.$stateProvider.state(t),this},t.prototype.registerPeekStates=function(e){var r=this;if(e&&e.peekStates){var i,o={};if(o.name=e.name+".peek",!Object.prototype.hasOwnProperty.call(this.addedStates,o.name)&&null==this.$state.get(o.name))o.onExit=[l.e,T,function(e,t){i&&C.a.popBanner(o.name),e.close(o.name)}],o.resolve={offCanvasArgs:[T,function(n){var s=t.getPanelStateNameFromNextState(n.next.name,o.name),a=n.get(s),u=C.a.currentPanelBanner(),c=u&&"full"!==u.panelClass&&"full"===a.panelClass;return(2===s.split(P).length||c)&&(i=C.a.createBanner()),{banner:i,panelClass:a&&a.panelClass||"peek",pageTitle:a&&a.pageTitle,template:S.replace("{0}",r._getPanelName(e)),close:function(){return r.$rootScope.bbOffcanvasOpened&&n.go(e.name),!1},stateName:o.name,overlay:null==a||null==a.overlay||a.overlay}}]},e.peekViewName?(o.views={},o.views[e.peekViewName]={require:function(){return Promise.resolve().then(n.bind(null,"yA26"))}}):o.require=function(){return Promise.resolve().then(n.bind(null,"yA26"))},this.$stateProvider.state(o);this.createAllPeekStates(e,e.peekStates)}},t.prototype.createAllPeekStates=function(e,t){var n=this,r=e.name+P;t.forEach((function(t){(n.peekStates[t]||[]).forEach((function(t){n._checkAbsoluteUrl(t);var i=r+t.name;if(!Object.prototype.hasOwnProperty.call(n.addedStates,i)&&null==n.$state.get(i)){var s=o.copy(t);s.name=i,s.abstract||(s.urlHandler=["$location",T,"$match",function(t,r,o){var s=function(e){var t=e.split("."),n=i.split(".");return t.forEach((function(e,t){n[t]=e})),n.join(".")};if(null!=r.$current.navigable&&!r.includes(e.name))return!1;var u=void 0;u=n._isAbsoluteUrl(t.url())?s(sessionStorage.getItem(a.a.getBasePageStorageKey())||n.defaultBasePage):i,null==r.get(u)&&(u=s(n.defaultBasePage)),r.$current.name!==u&&r.transitionTo(u,o,{location:!1})}]),s.views||(s.views={},s.views[n._getPanelName(e)]={template:s.template,controller:s.controller,require:s.require}),delete s.template,delete s.controller,delete s.require,s.getPageTitle&&(s.pageTitle=s.getPageTitle());var u=function(){s.peekStates&&s.peekStates.length>0&&("full"===s.panelClass||s.allowChildPeekStates?n.registerPeekStates(s):n.createAllPeekStates(e,s.peekStates))};if(n.initAllStates)n.$stateProvider.state(s),u();else(s.resolve=s.resolve||{}).childrenStates=[u],n.$stateProvider.state(s),s.peekStates&&s.peekStates.length>0&&"full"!==s.panelClass&&!s.allowChildPeekStates&&n.createAllPeekStates(e,s.peekStates)}}))}))},t.getPanelStateNameFromNextState=function(e,t){var n=e.indexOf(P,t.length);return-1!==n?e.substr(0,n):e},t.prototype._getPanelName=function(e){return e.name.split(".").join("-").concat("-panel@")},t.prototype._checkAbsoluteUrl=function(e){var t=this;if(e.url&&0===e.url.indexOf("^")){var n=e.url.match(/\/:[a-zA-Z]+/),r=e.url;n&&(r=r.substring(0,n.index));var i=(r=r.substring(1)).match(/\(\?:([^\)]*)/);i?i[1].split("|").forEach((function(e){t.absoluteUrls.push("/"+e)})):-1===this.absoluteUrls.indexOf(r)&&this.absoluteUrls.push(r)}},t.prototype._isAbsoluteUrl=function(e){return i.find(this.absoluteUrls,(function(t){return 0===e.indexOf(t)}))},t.prototype.createAllStates=function(){var e=this;this.baseStates&&this.baseStates.length>0&&this.baseStates.forEach((function(t){e.registerPeekStates(t)}))},t.prototype.createAllStatesOnInit=function(){this.initAllStates=!0},t.prototype.getStateWithName=function(e,t){return o.isObject(e)?t=e:t.name=e,this._initStateEntitlements(t),t},t.prototype._initStateEntitlements=function(e){this._initSystemEntitlementChecks(e),this._initCourseEntitlementChecks(e)},t.prototype._initSystemEntitlementChecks=function(e){var t=this;e.systemEntitlement&&(e.resolve||(e.resolve={}),e.resolve.systemEntitlement=["$q",f.b,function(n,r){return r.hasSystemEntitlement(e.systemEntitlement).then(t._configureStateChangeCallback(n))}])},t.prototype._configureStateChangeCallback=function(e){return function(t){var n=e.defer();return t?n.resolve():n.reject({userNotEntitled:!0}),n.promise}},t.prototype._ensureCourseIdParam=function(e,t){return t.nextParams.courseId?e.resolve():e.reject("Cannot check course entitlements when the state does not have a courseId parameter.")},t.prototype._guardEntitlementInjectable=function(e){var t=this,n=Array.isArray(e)?e.slice(0,e.length-1):[];return Object(r.__spreadArrays)(["$q","$injector",T],n,[function(r,o,s){for(var a=[],u=3;u<arguments.length;u++)a[u-3]=arguments[u];var c=i.zipObject(n,a);return t._ensureCourseIdParam(r,s).then((function(){try{return o.invoke(e,void 0,c)}catch(e){return r.reject(e)}})).then(t._configureStateChangeCallback(r)).catch((function(){return r.reject({userNotEntitled:!0})}))}])},t.prototype._getDefaultEntitlementInjectable=function(e){return[f.b,T,function(t,n){return"string"==typeof e?t.hasCourseEntitlement(e,n.nextParams.courseId):t.hasAnyCourseEntitlement(e,n.nextParams.courseId)}]},t.prototype._initCourseEntitlementChecks=function(e){var t;e.courseEntitlement&&(t=this._getDefaultEntitlementInjectable(e.courseEntitlement)),e.resolve&&Object.prototype.hasOwnProperty.call(e.resolve,"courseEntitlement")&&(t=e.resolve.courseEntitlement),t&&(e.resolve||(e.resolve={}),e.resolve.courseEntitlement=this._guardEntitlementInjectable(t))},t.$inject=["$stateProvider","$injector"],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(_);o.module(I,["ui.router","oc.lazyLoad",p.a,l.d,c.moduleName,h.a]).provider(T,_).constant($,d.a.defaultBasePage).config(["$provide","$ocLazyLoadProvider",function(e,t){e.decorator("$state",["$injector","$delegate","$resolve","$q","$$animateJs","$ocLazyLoad",p.b,l.e,function(e,t,n,s,a,c,d,p){t.goPeekState=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return p.getTopElement().then((function(n){var r=n&&n.name||d.basePage;return t.getPeekStateName(e[0],r).then((function(n){return e[0]=n,t.go.apply(t,e)}))}))},t.leavePeekState=function(e){null==e&&(e=t.current.name);var n=e.lastIndexOf(P);return-1!==n?t.go(e.substring(0,n)):s.when()},t.peekHref=function(e,n,r){return(r?s.when(new l.a(null,null,r)):p.getTopElement()).then((function(i){return r=i&&i.name||d.basePage,t.getPeekStateName(e,r).then((function(e){return t.href(e,n)}))}))},t.isPeekPanelOpen=function(){return-1!==t.current.name.indexOf(".peek.")},t.getPeekStateName=function(n,r){return r===d.basePage?s.when(r+P+n):p.getElement(r).then((function(){var e=_.getPanelStateNameFromNextState(t.current.name,r),i=e.lastIndexOf(P),o=t.current.name.substring(i+P.length).split(".")[0],s=n.split(".")[0];if(o===s)return t.current.name.substring(0,i+P.length)+n;var a=n.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),u=new RegExp("(^|\\.)"+a+"(\\.|$)"),c=e.search(u);if(-1!==c){var l=new RegExp("(^|\\.)"+a+"(\\.)");return c=e.search(l)?c+1:c,e.substring(0,c+n.length)}var d=t.get(e);return"full"===d.panelClass||d.allowChildPeekStates&&-1!==d.peekStates.indexOf(s)?e+P+n:e.substring(0,i+P.length)+n})).then((function(n){var r=function(n){if(!t.get(n.join("."))){var i=n.pop();r(n),n.push(i)}e.invoke((t.get(n.join("."))&&t.get(n.join(".")).resolve||{}).childrenStates||[o.noop])};return r(n.replace(/\n/g,"").replace(/(^[^\(\)]*)\(.*\)$/,"$1").split(".")),n}))},t.goCurrentBasePage=function(){return t.go(t.getBaseState())},t.goToRoute=function(e){return t.go(e)},t.getBaseState=function(){return d.basePage},t.search=function(e,n,r){var i=t.params;if(o.isString(e)&&n?i[e]=n:Object.keys(e).forEach((function(t){i[t]=e[t]})),t.current.name)return t.go(t.current.name,i,r)},t.getCurrentUrlParams=function(){var e=t.$current.url.parameters(),n=Object.create(null);return e.forEach((function(e){t.params[e]&&(n[e]=t.params[e])})),n},t.requireAllStates=function(){var e=this,t=this.get(),n=[];return t.forEach((function(t){t&&null!=t.name&&n.push(e.requireState(t.name))})),s.all(n)},t.requireState=function(e){for(var t=this,n=e.split("."),r=[],a=0;a<n.length;a++)r.push(n.slice(0,a+1).join("."));var l=function(){var e=r.shift();if(null==e)return!0;var n=t.get(e);if(!n)return l();var a=[],d=[];if(n.require&&(o.isArray(n.require)||(n.require=[n.require]),a=a.concat(n.require),d.push(n)),n.views&&o.isObject(n.views)&&Object.keys(n.views).forEach((function(e){var t=n.views[e];t.require&&(o.isArray(t.require)||(t.require=[t.require]),a=a.concat(t.require),d.push(t))})),a.length<1)return l();var p=s.defer(),m=[],f=new Map,h=a.map((function(e){return e().then((function(t){return f.set(e,t),t}))}));return s.all(i.compact(h)).then((function(){d.forEach((function(e){o.isArray(e.require)&&(e.require.forEach((function(t){var r=f.get(t),i=r.panelDefinition||{},s=i&&i.moduleName||r.moduleName;s&&m.push(c.load({name:s}));var a=i&&i.template||r.template;a&&!e.template&&(e.template=a);var l=i&&i.templateProvider||r.templateProvider;l&&(e.templateProvider=l);var d=i&&i.controllerName||r.controllerName;d&&!e.controller&&(e.controller=d);var p=i&&i.resolve;p&&(e.resolve=o.extend(e.resolve||{},p));var h=i&&i.translations;h&&(e.resolve=o.extend(e.resolve||{},{loadedTranslations:["$q",u.serviceName,function(e,t){return e.all(h.map((function(e){return t.loadBundle(e)})))}]}));var g=i&&i.pageTitle;g&&!n.pageTitle&&(n.pageTitle=g)})),e.require=!1)})),s.all(i.compact(m)).then((function(){p.resolve(l())}),(function(e){p.reject(e)}))}),(function(e){p.reject(e)})),p.promise};return l()};var f=t.transitionTo;t.transitionTo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this,r=e[0];return o.isObject(r)&&(r=r.self.name),s.all([this.requireState(r)]).then((function(){return f.apply(n,e)}))};var h=t.href;t.href=function(e,t,n){return h(e,t,o.extend(n||{},{absolute:!0}))},t.getCurrentResolvedValues=function(){return t.$current&&t.$current.locals&&t.$current.locals.resolve?t.$current.locals.resolve.$$values:{}};var g,v=function(e,n){if(!n||!n.name)return!1;if(e===m.c&&"resolve"in n&&e in n.resolve)return!0;if(e===m.b&&"resolve"in n&&e in n.resolve)return!0;var r=t.get(i.dropRight(n.name.split(".")).join("."));return v(e,r)};return t.hasCourseInContext=function(e){return v(m.c,e)},t.hasContentInContext=function(e){return v(m.b,e)},w.router.setRouteHandler((g=t,{goPeekState:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Object(k.a)(g.goPeekState.apply(g,Object(r.__spreadArrays)([e],t)))},goToRoute:function(e){return Object(k.a)(g.goToRoute(e))},leavePeekState:function(e){return Object(k.a)(g.leavePeekState(e))},getPeekHref:function(e,t,n){return Object(k.a)(g.peekHref(e,t,n))},getHref:function(e,t,n){return g.href(e,t,n)},search:function(e,t){return Object(k.a)(g.search(e,null,t))}})),t}])}]),o.module(I).run(["$rootScope",T,p.b,$,function(e,t,n,r){var i=sessionStorage.getItem(a.a.getBasePageStorageKey());n.basePage=i||r,e.$on(v.a.$stateChangeSuccess,(function(n,r,i,o,s){var a=t.hasCourseInContext(o),u=t.hasCourseInContext(r);a!==u&&e.$broadcast(v.a.$stateHasCourseInContextChanged,u,a);var c=t.hasContentInContext(o),l=t.hasContentInContext(r);c!==l&&e.$broadcast(v.a.$stateHasContentInContextChanged,l,c),y.c(r,o)}))}])}).call(this,n("5iHu"))},U8wS:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("5MwF"),o=n("TnpK"),s="ultra.data-ui.routes";r.module(s,[o.b]).config([o.c,function(e){e.baseState("base.dataUi",{url:"^/data-ui",require:function(){return n.e(643).then(n.bind(null,"gNT0"))},onEnter:[o.d,function(e){i.a.production&&e.go("base.not-found")}]})}])},UC5D:function(e,t,n){},UD9g:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("0JpG"),a=n("pjml"),u=n("TnpK"),c=n("3bn4"),l="ultra.course.engagement.course-no-grade-content-goal-alignment",d="ultra.course.engagement.course-no-grade-content-goal-alignment.service",p="no-grade-content-goal-alignment",m=["course","goal-alignment","goal"],f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelClass="peek no-grade-content-goal-peek",t}return Object(r.__extends)(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q",s.serviceName,"$injector",u.d,a.o.serviceName,function(t,n,r,i,o){var s,a,u=null;return i.nextParams&&i.nextParams.contentId&&(u=i.nextParams.contentId),i.nextParams&&i.nextParams.id&&(u=i.nextParams.id),u&&"create"!==u?o.$find(i.nextParams.courseId).$asPromise().then((function(e){return s=e,e.contents.$find(u).$asPromise()})).then((function(e){a=e})).then((function(){return t.all([s.contents.$find(a.id,{expand:"alignedGoals,permissions"}).$asPromise(),n.loadBundle("features/"+m.join("/"))]).then((function(t){var r=t[0];return e.groupGoals(s.contents.$buildRaw(r),n)}))})):t.when([])}]},t.prototype.getPeekStateName=function(){return p},t.prototype.groupGoals=function(e,t){var n="alignedGoalsDefaultTitle";return e.isDiscussion()?n="goalsAlignedWithDiscussion":e.isDocument()?n="goalsAlignedWithDocument":e.isFile()?n="goalsAlignedWithFile":e.isLink()?n="goalsAlignedWithLink":e.isLtiLink()&&(n="goalsAlignedWithLtiLink"),[{getContentTitleForGoalAlignment:function(){return t.translateSync({locale:null,key:m.join(".")+"."+n})},getContentIdForGoalAlignment:o.bind(e,e.getContentIdForGoalAlignment),isCurrentUserEligibleToAlignGoals:o.bind(e,e.isCurrentUserEligibleToAlignGoals),alignedGoals:e.alignedGoals?e.alignedGoals.map((function(t){return t.content=e,t})):[],coreContent:e}]},t.prototype.getOverrideSubTitle=function(){return[u.d,a.o.serviceName,function(e,t){var n=null;return e.nextParams&&e.nextParams.contentId&&(n=e.nextParams.contentId),e.nextParams&&e.nextParams.id&&(n=e.nextParams.id),n?t.$find(e.nextParams.courseId).$asPromise().then((function(e){return e.contents.$find(n).$asPromise()})).then((function(e){return e.title})):""}]},t.$inject=["$injector","$q"],t}(c.a);o.module(l,[u.b,s.moduleName]).config([u.c,function(e){var t=new f;e.peekState(t.getPeekStateName(),t)}]).service(d,["$injector",s.serviceName,function(e){return{resolveGoalAlignableContents:function(){return e.invoke((new f).resolveGoalAlignableContent(),null,{}).then((function(e){return[e,i.flatten(i.compact(e.map((function(e){return e.alignedGoals})))).length]}))}}}])},UP3t:function(e,t){e.exports='<div class="bb-course-catalog-link" ng-if="shouldDisplayCatalogLink">\n  <a href="javascript:void(0);"\n     class="catalog-anchor-tag"\n     ng-if="!isExternalCatalog"\n     ng-click="handleCatalogLink()"\n     course-org-token-resolver\n     bb-translate-attrs="{\'aria-label\': \'base.baseCourses.aria-label.link\'}"\n     analytics-id="base.baseCourses.courseCatalog.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.link</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="medium" icon="programs" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_default" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n  <a class="catalog-anchor-tag"\n     ng-if="isExternalCatalog"\n     href="{{ ::externalCatalogUrl }}"\n     target="_blank"\n     rel="noopener noreferrer"\n     course-org-token-resolver\n     bb-translate-attrs="{\'aria-label\': \'base.baseCourses.aria-label.externalLink\'}"\n     analytics-id="base.baseCourses.courseCatalog.externalLink.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.externalLink</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="medium" icon="programs" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_default" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n</div>'},UiBk:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("wHJ2"),i=n("0JpG"),o=n("Qbdf"),s=n("36CG"),a=n("X455"),u=n("8W6D"),c=n("p7NW"),l=n("2Tae"),d=n("TnpK"),p=n("gkef"),m=n("nmzr"),f="ultra.course.rubrics.router";r.module(f,[i.moduleName,d.b,p.a,l.b,o.b,s.a,a.a]).config([d.c,o.c,a.b,s.b,function(e,t,r,s){var f,h;e.peekState(m.Routes.Rubric.RUBRIC,{abstract:!0,url:"/rubric",resolve:(f={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric"),t.loadBundle("features/course/goal-alignment/goal")])}]},f[o.d]=t.resolve,f.mode=function(){return u.a.NONE},f)}).peekState(m.Routes.Rubric.RUBRIC_MODE,{url:"?rubricId&mode",panelClass:"full",pageTitle:"course.rubric.title",peekStates:[l.a],peekViewName:"rubric-grid-peek@",require:function(){return Promise.all([n.e(73),n.e(1),n.e(2),n.e(7),n.e(71),n.e(565)]).then(n.bind(null,"gAA+"))},resolve:{currentRubric:[o.d,c.f,d.d,function(e,t,n){switch(n.nextParams&&n.nextParams.mode.toLowerCase()){case u.a.CREATE.toString():return t.generateDefaultRubric(e);case u.a.EDIT.toString():return n.nextParams.rubricId?e.rubrics.$find(n.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise():null;case u.a.COPY.toString():return e.rubrics.$find(n.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise().then((function(e){return t.createRubricCopy(e)}));default:return null}}],hasEvaluations:["currentColumn",d.d,function(e,t){return(t.nextParams&&t.nextParams.mode.toLowerCase())===u.a.EDIT.toString()&&(e?e.hasEvaluations():null)}],mode:[d.d,function(e){switch(e.nextParams&&e.nextParams.mode.toLowerCase()){case u.a.CREATE.toString():return u.a.CREATE;case u.a.EDIT.toString():return u.a.EDIT;case u.a.COPY.toString():return u.a.COPY;default:return u.a.NONE}}]}}).peekState(m.Routes.Rubric.RUBRIC_EVALUATION,{url:"/rubric-evaluation?userId&columnId",panelClass:"peek",pageTitle:"course.rubricEvaluation.title",params:{columnId:null,groupId:null,userId:{array:!1}},require:function(){return Promise.all([n.e(11),n.e(14),n.e(583)]).then(n.bind(null,"nWWf"))},resolve:(h={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric")])}]},h[a.c]=r.resolve,h.offCanvasArgs=["offCanvasArgs",p.b,function(e,t){return e.overlay=!t.isLargeBreakpoint(),e}],h)}).peekState(m.Routes.Rubric.RUBRIC_VIEW,{url:"/rubric-view?columnId",panelClass:"peek",pageTitle:"course.rubricView.title",params:{columnId:null},require:function(){return Promise.all([n.e(11),n.e(14),n.e(584)]).then(n.bind(null,"L8+l"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/directives/rubric/rubric-view"),t.loadBundle("components/services/rubric")])}],offCanvasArgs:["offCanvasArgs",p.b,function(e,t){return e.overlay=!t.isLargeBreakpoint(),e}]}})}])},UioO:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s="ultra.components.directives.bbDatetime",a=function(){function e(e,t,n){var r=this;this.$parse=e,this.$q=t,this.bbLocalize=n,this.restrict="E",this.scope={value:"&"},this.link=function(e,t,n){var s=n.format,a=n.timezoneFormat;e.$watch((function(){return e.value()}),(function(n){var u=o.ILocaleDatetimeFormat.Short,c=o.ILocaleTimezoneFormat.Short;if(!i.isDate(n))return t.html("");(s&&(u=r.bbLocalize.getFormatEnum(o.ILocaleDatetimeFormat,s)),a&&(c=r.bbLocalize.getFormatEnum(o.ILocaleTimezoneFormat,a)),s&&a)?r.bbLocalize.translate({locale:r.bbLocalize.getLocale(e),key:"components.directives.datetime.datetimeWithTimezone."+s.toUpperCase()+"_datetime_"+a.toUpperCase()+"_timezone",params:{datetime:n},noWrap:!0,noEscape:!0}).then((function(e){t.html(e)})):(a?r.bbLocalize.formatTimezone(n,c):r.bbLocalize.formatDatetime(n,u,e)).then((function(e){t.html(e)}))}),!0)}}return e.$inject=["$parse","$q",o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(a);i.module(s,[o.moduleName]).directive("bbDatetime",["$injector",function(e){return e.instantiate(a)}])},Us01:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("0JpG"),o="ultra.directives.bbTranslate",s=function(){function e(e,t,n,i,o,s,a,u,c){var l,d=this;(this.$parse=e,this.$rootScope=t,this.bbLocalize=n,this.$interpolate=i,this.scope=o,this.iElement=s,this.iAttr=a,this.rawKey=u,this.translateValuesExist=c,this.interpolateParams={},this.analyticsIdSet=!1,this.intSym="{{",a.bbTranslate=a.bbTranslate||s.text(),s.text(""),a.bbTranslate&&!a.bbTranslate.match(this.intSym)&&this.onAttrUpdate(a.bbTranslate),this.attrWatcher=a.$observe("bbTranslate",this.onAttrUpdate.bind(this)),this.translateValuesExist)&&a.$observe("translateValues",(function(e){if(e){l&&l();var t=d.$parse(e);l=o.$parent.$watch(t.bind(null,o.$parent),(function(e){r.extend(d.interpolateParams,e),d.updateTranslation()}),!0)}}));var p=this.$rootScope.$on("$translateChangeSuccess",(function(){return d.updateTranslation()}));o.$on("$destroy",(function(){return p()}))}return e.prototype.shouldUnwatch=function(e){return e.indexOf(this.intSym)<0&&this.rawKey.indexOf(this.intSym)<0||(e.indexOf("::")>=0&&this.rawKey.indexOf("::")>=0||void 0)},e.prototype.unwatch=function(){this.attrWatcher(),this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher()},e.prototype.onTranslationIdUpdate=function(e){e&&(e=e.replace(/^\s+|\s+$/g,""),this.updateTranslation(e))},e.prototype.onAttrUpdate=function(e){var t=this;if(e!==this.bbTranslateAttrValue)if(this.bbTranslateAttrValue=e,e.match(this.intSym)){this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher();var n=this.$interpolate(e);this.interpolatedAttrWatcher=this.scope.$watch((function(){return n(t.scope)}),this.onTranslationIdUpdate.bind(this))}else this.onTranslationIdUpdate(e)},e.prototype.updateTranslation=function(e){var t=this;void 0===e&&(e=this.translationId),e&&(this.translationId=e,this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.scope),key:e,params:this.interpolateParams}).then((function(n){n===e?t.iElement.text(n):t.iElement.html(n),t.shouldUnwatch(t.bbTranslateAttrValue)&&t.unwatch()}),(function(){t.iElement.text(e)})))},e.$inject=["$parse","$rootScope",i.serviceName,"$interpolate","scope","iElement","iAttr","rawKey","translateValuesExist"],e}(),a=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.scope=!0,this.compile=function(e,n){var r=n.bbTranslate=(n.bbTranslate||e.text()||"").replace(/^[\s\n]+|[\s\n]+$/g,"");if(r){var i=n.translateValues?n.translateValues:void 0;return function(e,n,o){return t.$injector.instantiate(s,{scope:e,iElement:n,iAttr:o,rawKey:r,translateValuesExist:i})}}}}return e.$inject=["$injector"],e}();r.module(o,[i.moduleName]).directive("bbTranslate",["$injector",function(e){return e.instantiate(a)}])},V17J:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("+4Px"),o="ultra.components.directives.accessibility.enterKeyUpFocus",s=function(){function t(t){this.injector=t,this.restrict="A",this.link=function(t,n,r){n.on("keydown",(function(e){e.keyCode!==i.f||r.bbTriggerEnterKeydown||e.preventDefault()})),n.on("keyup",(function(n){if(n.keyCode===i.f&&(n.preventDefault(),n.stopPropagation(),t.$apply((function(){t.$eval(r.ngClick||r.bbClick,{$event:n}),t.$eval(r.ngBlur,{$event:n})})),r.bbEnterKeyUpFocus)){var o=e(r.bbEnterKeyUpFocus);if(r.indexToFocus){var s=Number(r.indexToFocus);o.eq(s).focus()}else o.focus()}}))}}return t.$inject=["$injector"],t}();r.module(o,[]).directive("bbEnterKeyUpFocus",["$injector",function(e){return e.instantiate(s)}])}).call(this,n("5iHu"))},V6ed:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return p}));n("MISG");var r=n("9zo4"),i=n("wHJ2"),o=n("nsO7"),s=n("+4Px"),a=n("lUN/"),u=n("lEL+"),c="ultra.directives.accessibility.hideFocusOutline",l="hide-focus-outline",d="is-focusVisible",p=function(){function t(e){this.bbTimeout=e,this.restrict="A",this.link=function(e,n,r){a.a(),n.addClass(l),n.removeClass(d),t.instanceCount+=1,t.ensureEvents(n),e.$on("$destroy",(function(){t.instanceCount-=1,0===t.instanceCount&&t.unregisterEvents(),n.off()}))}}return t.enableFocusOutline=function(){e(document.body).removeClass(l),e(document.body).addClass(d)},t.ensureEvents=function(n){function i(e){e.keyCode===s.u&&(t.enableFocusOutline(),r.a.isLastNavigationByKeyboard=!0)}t.eventHandlers||(t.eventHandlers={keyup:i,keydown:i,mousedown:o.debounce((function(t){n.addClass(l),n.removeClass(d),r.a.isLastNavigationByKeyboard=!1,r.a.lastClickedElement=e(t.target).closest(":tabbable"),o.delay((function(){r.a.lastClickedElement&&0===r.a.lastClickedElement.parents("body").length&&(r.a.lastClickedElement=void 0)}),800)}),200)},Object.keys(t.eventHandlers).forEach((function(e){document.addEventListener(e,t.eventHandlers[e],!0)})))},t.unregisterEvents=function(){Object.keys(t.eventHandlers).forEach((function(e){document.removeEventListener(e,t.eventHandlers[e],!0)})),t.eventHandlers=null},t.$inject=[u.b],t.instanceCount=0,t.eventHandlers=null,t}();i.module(c,[u.a]).directive("bbFocusHelper",["$injector",function(e){return e.instantiate(p)}])}).call(this,n("5iHu"))},VdDF:function(e,t,n){"use strict";var r,i=n("RZND"),o=n("wgY5"),s=function(){function e(){}return e.isWithinDateRange=function(e,t,n){void 0===n&&(n=!0);var r=!0,i=!0;return t.start&&(r=n?t.start<=e:t.start<e),t.end&&(i=n?t.end>=e:t.end>e),r&&i},e.testWithinDateRange=function(t,n,r){void 0===r&&(r=!0);var i=function(e){var t=new Date(e.getTime());return t.setSeconds(0,0),t},s={when:t&&i(t),range:{start:n&&n.start&&i(n.start),end:n&&n.end&&i(n.end)}},a=!s.when||!s.range||e.isWithinDateRange(s.when,{end:s.range.end,start:s.range.start},r),u=!0;if(!a){var c=!0;s.range.start&&e.isSameDay(s.range.start,s.when)&&(c=r?o(s.when).isSameOrAfter(s.range.start,"minute"):o(s.when).isAfter(s.range.start,"minute"));var l=!0;s.range.end&&e.isSameDay(s.range.end,s.when)&&(l=r?o(s.when).isSameOrBefore(s.range.end,"minute"):o(s.when).isBefore(s.range.end,"minute")),u=c&&l}return{isValidDate:!u||a,isValidTime:u}},e.isSameDay=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},e.getCurrentTimeZoneId=function(){return r||(r=i.determine().name()),r},e.parseStringToDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)?e:null==e||""===e?null:new Date(e)},e.convertToLocalDate=function(t){var n=e.parseStringToDate(t);return null!==n&&n.setMinutes(n.getMinutes()+n.getTimezoneOffset()),n},e.parseDateToISOString=function(e){return null==e||Number.isNaN(Number(e.getDate()))?"":e.toISOString()},e.compareDates=function(e,t,n){return void 0===n&&(n=!0),e&&t?[e,t].sort((function(e,t){return e.getTime()-t.getTime()}))[n?0:1]:e||t},e.breakdownSeconds=function(e){var t=Math.floor(e%60),n=e/60,r=Math.floor(n%60),i=n/60,o=Math.floor(i%24);return{days:Math.floor(i/24),hours:o,minutes:r,seconds:t}},e}();t.a=s},VfFK:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.attendance.routes";r.module(s,[o.b]).config([o.c,function(e){e.peekState("attendance",{url:"/attendance?courseId&attendanceView&meetingId&memberId&isSingleUserView",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},reloadOnSearch:!1,require:function(){return Promise.all([n.e(40),n.e(715)]).then(n.bind(null,"kmhM"))},pageTitle:"course.attendance.pageTitle",panelClass:"full",peekStates:["attendance-settings","attendance-student-records"]}).peekState("attendance-settings",{url:"/settings",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},require:function(){return Promise.all([n.e(40),n.e(714)]).then(n.bind(null,"qT3r"))},pageTitle:"course.attendance.settings.pageTitle"}).peekState("attendance-student-records",{url:"/studentRecords/:membershipId?userId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},require:function(){return Promise.all([n.e(40),n.e(145)]).then(n.bind(null,"OYHs"))},pageTitle:"course.attendance.studentRecords.pageTitle"}).peekState("attendance-student-view",{url:"/attendanceGrade?courseId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},require:function(){return Promise.all([n.e(40),n.e(145)]).then(n.bind(null,"OYHs"))},pageTitle:"course.attendance.studentRecords.pageTitle"})}])},Vsv2:function(e,t,n){"use strict";var r=n("D57K"),i=n("wHJ2"),o=n("nbDY"),s=n.n(o),a=n("HAJP"),u=n("0JpG"),c=n("pjml"),l=n("gkef"),d=n("emI2"),p=function(){function e(e){this.$q=e,this.isInitialized=!1}return e.prototype.isConnected=function(){return!1},e.prototype.init=function(){return this.$q.reject()},e.prototype.logout=function(){return this.$q.reject()},e.prototype.login=function(){return this.$q.reject()},e.prototype.openFilePicker=function(e,t){return this.$q.reject()},e.prototype.getAccessToken=function(){return null},e}(),m=n("OBf2"),f=n("aHpC");n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return v}));var h="ultra.service.cloud.drive",g="cloudDrive",v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.ONE_DRIVE=new t("OneDrive"),t.KLOUDLESS=new t("Kloudless"),t}(s.a),b=function(){function e(e,t,n,r,i,o,s){this.$q=e,this.$timeout=t,this.bbLocalize=n,this.CloudDriveModel=r,this.windowSize=i,this.bbScriptLoader=o,this.preferences=s,this.cloudDriveStorage={},this.isGettingFilesInfo=!1,this.isShowOneDrive=!0,this.currentLocale=this.bbLocalize.getAppLocale(),this.isShowOneDrive=!window.Modernizr.touch||i.isLargeBreakpoint()}return e.prototype.cloudDriveStorageFactory=function(e){var t;switch(e.name){case v.ONE_DRIVE.toString():t=new p(this.$q);break;case v.KLOUDLESS.toString():t=new m.b(this.$q,this.bbLocalize,this.$timeout,this.bbScriptLoader,this.preferences)}return t&&(t.clientId=e.clientId,t.redirectUrl=e.redirectUrl,t.provider=e.name,t.apiUrl=e.apiUrl,t.loaderUrl=e.loaderUrl,t.useLoaderExplorer=e.useLoaderExplorer,t.persist=e.persist,t.tokens=e.tokens,t.instProvType=e.instProvType,t.instDomain=e.instDomain),t},e.prototype.getCloudDrivesInfo=function(){var e=this,t=this.$q.defer();return this.cloudDrivesInfo?t.resolve():this.CloudDriveModel.$collection().$fetch().$then((function(n){e.cloudDrivesInfo=n,i.forEach(e.cloudDrivesInfo,(function(t){e.cloudDriveStorage[t.name]=e.cloudDriveStorageFactory(t)})),t.resolve()}),(function(e){t.reject(e)})),t.promise},e.prototype.initializeCloudDrive=function(e){var t=this,n=this.$q.defer();return this.getCloudDrivesInfo().then((function(){t.cloudDriveStorage[e.toString()]?t.cloudDriveStorage[e.toString()].isInitialized&&t.currentLocale===t.bbLocalize.getAppLocale()?n.resolve(t.cloudDriveStorage[e.toString()]):(t.currentLocale=t.bbLocalize.getAppLocale(),t.cloudDriveStorage[e.toString()].init().then((function(){n.resolve(t.cloudDriveStorage[e.toString()])}))):n.reject("No such cloud drive!")})),n.promise},e.prototype.isCloudServiceAvailable=function(e){var t=this.$q.defer();return this.initializeCloudDrive(e).then((function(e){t.resolve(e.isInitialized)})).catch((function(){t.resolve(!1)})),t.promise},e.prototype.getDriveUserInfo=function(e){var t=this.$q.defer(),n=this.cloudDriveStorage[e.toString()].driveUserInfo,r=this.cloudDriveStorage[e.toString()].accessToken;return n?t.resolve(n):r?t.resolve(this.CloudDriveModel.$new(e.toString()).me.$fetch({accessToken:r}).$asPromise()):t.resolve(),t.promise},e=Object(r.__decorate)([Object(r.__param)(0,Object(f.b)("$q")),Object(r.__param)(1,Object(f.b)("$timeout")),Object(r.__param)(2,Object(f.b)(u.serviceName)),Object(r.__param)(3,Object(f.b)(c.j.serviceName)),Object(r.__param)(4,Object(f.b)(l.b)),Object(r.__param)(5,Object(f.b)(a.b)),Object(r.__param)(6,Object(f.b)(d.c))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(b);i.module(h,[c.Q,l.a,a.a,d.b]).service(g,b)},"W/rt":function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-persist-question.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-persist-question">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-persist-question.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-persist-question.alt"\n          bb-translate>components.services.error-modal.error-persist-question.alt</button>\n</bb-modal>\n'},W7eU:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.errorTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>{{::errorModalErrorKey}}</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},WShm:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s="ultra.directives.validate.date",a="bbValidateDate",u=function(){function e(e,t){var n=this;this.$parse=e,this.bbLocalize=t,this.require="ngModel",this.restrict="A",this.getISODate=function(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)},this.getDateParser=function(e,t,r,i){return function(s){if(i.$isEmpty(s))return i.$setValidity("date",!0),null;var a;try{a=n.bbLocalize.parseDateSync(s,o.ILocaleDateFormat.Short,e,i.$modelValue)}catch(e){return i.$setValidity("date",!1),i.$modelValue}return i.$setValidity("date",!0),"date"!==r.type&&(s=n.bbLocalize.formatDateSync(a,o.ILocaleDateFormat.Short,e))!==i.$viewValue&&(i.$setViewValue(s),t.is(":focus")||i.$render()),a}},this.getMinDateValidator=function(e,t,r,i){return function(t){var s=n.$parse(r.min)(e),a=i.$isEmpty(t)||t.getTime()>s.getTime();return a?delete i.$error.minDate:i.$error.minDate={dateMin:n.bbLocalize.formatDateSync(s,o.ILocaleDateFormat.Short)},a}},this.getMaxDateValidator=function(e,t,r,i){return function(t){var s=n.$parse(r.max)(e),a=i.$isEmpty(t)||t.getTime()<s.getTime();return a?delete i.$error.maxDate:i.$error.maxDate={dateMax:n.bbLocalize.formatDateSync(s,o.ILocaleDateFormat.Short)},a}},this.getDateFormatter=function(e,t,r,i){return function(){i.$setValidity("date",!0);var t=i.$modelValue;return i.$isEmpty(t)?"":"date"===r.type?n.getISODate(t):n.bbLocalize.formatDateSync(t,o.ILocaleDateFormat.Short,e)}},this.link=function(e,t,r,i){i.$parsers.push(n.getDateParser(e,t,r,i)),i.$formatters.push(n.getDateFormatter(e,t,r,i)),r.min&&(i.$validators.minDateValidator=n.getMinDateValidator(e,t,r,i)),r.max&&(i.$validators.maxDateValidator=n.getMaxDateValidator(e,t,r,i)),t.on("blur",(function(){i.$render()}))}}return e.$inject=["$parse",o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);i.module(s,[o.moduleName]).directive(a,["$parse",o.serviceName,function(e,t){return new u(e,t)}])},"X/qj":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n("D57K"),i=n("d2bc"),o=n("wHJ2"),s=n("Fvsw"),a=n("Qbdf"),u=n("fYJU"),c=n("jhBu"),l=n("Sa5G"),d=n("aHpC"),p="ultra.components.services.gradebookPermission",m="gradebookPermission",f=function(){function e(e,t,n,r){this.context=e,this.currentCourse=t,this.currentUser=n,this.entitlementService=r}return e.prototype.isEntitled=function(e,t){return this.entitlementService.isEntitled(e,t)},e.prototype.canDeanonymizeGrades=function(e){return this.isEntitled("course.gradebook-deanonymize.EXECUTE",e)},e.prototype.canEnterFeedback=function(e){return this.isEntitled("course.gradebook-grades.feedback.EXECUTE",e)},e.prototype.canEnterGrades=function(e){return this.canExecute(e)},e.prototype.canViewAssessmentException=function(e){return this.isEntitled(l.b.ViewException,e)},e.prototype.canDelegatedEnterAttemptFeedback=function(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterFeedback()},e.prototype.canDelegatedEnterAttemptGrades=function(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterGrades()},e.prototype.canDelegatedModifyAttempt=function(e,t){return!e.delegatedGrading||(!t||(!!e.isUserReconciler(this.currentUser.userId)||!t.isReconciled()))},e.prototype.canDelegatedReconcileAttempt=function(e){return e.delegatedGrading&&e.isUserReconciler(this.currentUser.userId)},e.prototype.canExecute=function(e){return this.isEntitled("course.gradebook-grades.EXECUTE",e)},e.prototype.canModify=function(e){return this.isEntitled(i.a.ModifyGradebook,e)},e.prototype.canModifyItemDueDate=function(e){return this.isEntitled("course.gradebook-item.duedate.MODIFY",e)},e.prototype.canObserve=function(e){return this.isEntitled(i.a.Observe,e)},e.prototype.canOverrideGrades=function(e){return this.canExecute(e)},e.prototype.canPostGrades=function(e,t){var n=t||this.context.column,r=e||this.currentCourse.courseId;return n&&n.delegatedGrading?n.isUserReconciler(this.currentUser.userId)&&this.isEntitled("course.gradebook-grades.publish.EXECUTE",r):this.isEntitled("course.gradebook-grades.publish.EXECUTE",r)},e.prototype.canView=function(e){return this.isEntitled(i.a.ViewGradebookMetaData,e)},e.prototype.canViewAttempts=function(e){return this.isEntitled(i.a.ViewAttempts,e)},e.prototype.canViewGrades=function(e){return this.isEntitled("course.gradebook-grades.VIEW",e)},e.prototype.canViewBulkDownload=function(e){return this.isEntitled(i.a.ViewGrades,e)},e=Object(r.__decorate)([Object(r.__param)(0,Object(d.b)(s.b)),Object(r.__param)(1,Object(d.b)(a.e)),Object(r.__param)(2,Object(d.b)(u.b)),Object(r.__param)(3,Object(d.b)(c.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(f);o.module(p,[c.a,a.b,s.a]).service(m,f)},X455:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m}));var r=n("D57K"),i=n("pjml"),o=n("JfV0"),s=n("yC9S"),a=n("fYJU"),u=n("Qbdf"),c=n("lVRt"),l="ultra.service.course-context.membership",d="currentCourseMembership",p=d+"Provider",m=c.a,f=function(){this.$get=["$injector",function(e){return e.instantiate(h)}],this.name=m,this.resolve=[c.c,d,function(e,t){return t.load(e)}]},h=function(){function e(e,t,n,r,i){this.$q=e,this.$rootScope=t,this.currentUser=n,this.CourseModel=r,this.contextCourse=i;var o=this;s.b.OnRootScope(t,u.a,(function(e,t,n){null!=t&&null!==t.id||o.clear()}))}return Object.defineProperty(e.prototype,"courseMembership",{get:function(){return this._courseMembership},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._courseMembership=null},e.prototype.load=function(e){var t=this;return e?this.currentUser.userId?this.courseMembership&&this.courseMembership.course?e.id!==this.courseMembership.course.id?this.$q.reject(new Error("Cannot resolve course membership because given course does not match the one for the current course membership")):this.courseMembership.$asPromise():e.users.$find(this.currentUser.userId,{expand:"courseRole"}).$allow(["400-499"]).$asPromise().then((function(e){return t._courseMembership=e,t._courseMembership.isInStudentPreview=function(){return t.contextCourse.isInIframeOfPreviewMode()},e})):this.$q.reject(new Error("Cannot resolve course membership because currentUser service has no userId")):this.$q.reject(new Error("Cannot load course membership because no course model was provided"))},e.prototype.hasCourseMembership=function(){return!(!this.courseMembership||this.courseMembership.$response.status===o.HttpStatus.NotFound)},e.prototype.availabilityHasBeenBypassed=function(){return this.courseMembership&&this.courseMembership.availabilityHasBeenBypassed()},e.prototype.courseIsAvailable=function(){return this.courseMembership&&this.courseMembership.courseIsAvailable()},e.prototype.courseIsOpen=function(){return this.courseMembership&&this.courseMembership.courseIsOpen()},e.prototype.courseIsPrivate=function(){return this.courseMembership&&this.courseMembership.courseIsPrivate()},e.prototype.isStudentMembership=function(){return this.courseMembership&&this.courseMembership.isStudentMembership()},e.prototype.isGuestMembership=function(){return this.courseMembership&&this.courseMembership.isGuestMembership()},e.prototype.isStudentOrGuestMembership=function(){return this.courseMembership&&this.courseMembership.isStudentOrGuestMembership()},e.prototype.isActAsInstructorMembership=function(){return this.courseMembership&&this.courseMembership.isActAsInstructorMembership()},e.prototype.isTeachingAssistantMembership=function(){return this.courseMembership&&this.courseMembership.isTeachingAssistantMembership()},e.prototype.isInRoleBucket=function(e){return this.courseMembership&&this.courseMembership.isInRoleBucket(e)},e.prototype.isDueDateExcepted=function(){return this.courseMembership&&this.courseMembership.isDueDateExcepted()},e.$inject=["$q","$rootScope",a.b,i.o.serviceName,u.e],e}(),g=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(h),[i.Q,a.a,u.b]);angular.module(l,g).provider(d,f)},XGja:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("5iHu"),i=n("lUN/");function o(e,t){i.a();var n=e?e.find(":tabbable"):r(":tabbable"),o=t||r(document.activeElement),s=0;if(1===o.length){var a=n.index(o);a+1<n.length&&(s=a+1)}n.eq(s).focus()}function s(e,t){i.a();var n=e?e.find(":tabbable"):r(":tabbable"),o=t||r(document.activeElement),s=n.length-1;if(1===o.length){var a=n.index(o);a>0&&(s=a-1)}n.eq(s).focus()}function a(e,t,n){i.a(),e.is(":tabbable")||null!=e.attr("tabindex")?e.is(":tabbable")&&"-1"===e.attr("tabindex")&&e.removeAttr("tabindex"):e.attr("tabindex","-1"),n&&e.closest(n).removeClass("ng-hide"),t?t(e):e.focus()}},XLiA:function(e,t,n){},XfOu:function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",(function(){return a})),n.d(t,"ILearnRubricType",(function(){return r})),n.d(t,"sortRubricData",(function(){return u}));n("QLzv");var r,i=n("yCC5"),o=n("Rjd/"),s=n("nkTj"),a=i.Xb;function u(e){e.columnHeaders&&e.columnHeaders.length>0&&e.columnHeaders.sort((function(e,t){return e.position-t.position})),e.rows&&e.rows.length>0&&(e.rows.sort((function(e,t){return e.position-t.position})),e.rows.forEach((function(e){e.cells&&e.cells.length>0&&e.cells.sort((function(e,t){return e.position-t.position}))})))}function c(e){e.rows&&e.rows.length>0&&e.rows.forEach((function(t){t.isCurrentUserEligibleToAlignGoals=function(){return!0===e.permissions.edit&&!e.readOnly},t.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+t.id},t.getContentTitleForGoalAlignment=function(){return t.header}}))}!function(e){e.PERCENTAGE="PERCENTAGE",e.PERCENTAGE_RANGE="PERCENTAGE_RANGE"}(r||(r={})),o.a.factory(a,["restmod",s.d,function(e,t){return e.model().mix({$extend:{Record:{canDelete:function(){return this.permissions&&this.permissions.delete},isCurrentUserEligibleToAlignGoals:function(){return this.permissions&&!0===this.permissions.edit},getContentIdForGoalAlignment:function(){return"blackboard.plugin.rubric.api.core.data.Rubric;"+this.id},getContentTitleForGoalAlignment:function(){return this.title},saveAlignedGoals:function(e,t){var n,r=this;return t&&(n=t.map((function(e){return{goalId:e.id,isVisibleToStudent:!0,goal:e}}))),e&&(this.rows=this.rows.map((function(t){return t.id===e&&(t.alignedGoals=n),t}))),this.$send({method:"PATCH",url:this.$url(),data:{rows:this.rows}}).$then((function(){r.$getPreviousVersion()&&(r.$getPreviousVersion().rows=r.rows)}))}}},$hooks:{"after-request":function(e){e&&e.data&&(e.data.rows&&e.data.columnHeaders?(u(e.data),c(e.data)):e.data.results&&e.data.results.length>0&&e.data.results.forEach((function(e){e.rows&&e.columnHeaders&&(u(e),c(e))})))},"before-save":function(e){e.data.columnHeaders&&e.data.columnHeaders.forEach((function(e,t){e.position=t})),e.data.rows&&e.data.rows.forEach((function(e,t){e.position=t,e.cells.forEach((function(e,t){e.position=t}))}))}}})}])},"Xq/A":function(e,t,n){"use strict";var r=n("D57K"),i=n("wHJ2"),o=n("Sa5G"),s=n("g66W");var a=n("DsaG"),u=n("Q/M7"),c=n("e6jQ");n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p}));var l="ultra.services.bbml-editor",d="bbMLEditorService",p=function(){function e(e,t,n){this.$q=e,this.DSCacheFactory=t,this.fileViewer=n}return Object.defineProperty(e,"VERSION_INDICATOR_PREFIX",{get:function(){return'\x3c!-- {"bbMLEditorVersion":'},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CURRENT_VERSION_INDICATOR",{get:function(){return e.VERSION_INDICATOR_PREFIX+"1} --\x3e"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"EMBEDDED_LINK_PREFIX",{get:function(){return"https://"},enumerable:!0,configurable:!0}),e.prototype.getBbMLFileType=function(e){var t=e.dataset;return(null==t?void 0:t.bbtype)||"file"},e.prototype.convertBbMLToContentBlocks=function(t){var n,r,i=new Set,a=[],u=!1;r=t,s.k(r,p.VERSION_INDICATOR_PREFIX)&&(u=!0);var c=document.createElement("div");c.innerHTML=t;for(var l=0;l<c.children.length;l++){var d=c.children[l],m=void 0;if("A"===d.tagName&&"file"===this.getBbMLFileType(d))(m=this.convertBbMLToFileBlock(d)).blockType=o.d.File;else if("DIV"===d.tagName){var f=d.innerHTML.trim();f&&(m={blockType:o.d.Text,textBlock:f,id:this.getBlockIdFromBbML(d)})}else if("A"===d.tagName&&"embedded-unsafe-html"===this.getBbMLFileType(d)){var h=d,g=h.dataset,v=h.href,b=void 0;if(null==g?void 0:g.bbfile)try{b=null===(n=JSON.parse(g.bbfile))||void 0===n?void 0:n.linkName}catch(e){}m={blockType:o.d.Html,textBlock:"",fileBlock:{downloadUrl:v,file:{fileName:b}},id:this.getBlockIdFromBbML(d)}}m&&!i.has(m.id)&&(i.add(m.id),a.push(m))}return u||0!==a.length||(this.contains(t,e.EMBEDDED_LINK_PREFIX)||(u=!0),a.push({blockType:o.d.Text,textBlock:t,id:this.generateBlockId()})),{contentBlocks:a,isBbmlEditorCompliant:u}},e.prototype.contains=function(e,t){return(e||"").indexOf(t)>-1},e.prototype.convertBbMLToFileBlock=function(e){var t,n=e.dataset,r={file:{}};if(null==n?void 0:n.bbfile)try{var i=JSON.parse(n.bbfile);r.isDecorative=i.isDecorative,r.alternativeText=i.alternativeText,r.linkName=i.linkName,r.currentMimeType=i.mimeType,i.render&&(r.ui={isRenderedInline:"inline"===i.render}),i.bbFileUuid&&(r.viewerData||(r.viewerData={bbFileUuid:i.bbFileUuid}),r.viewerData.bbFileUuid=i.bbFileUuid),i.viewerUuid&&(r.viewerData.viewerUuid=i.viewerUuid),i.viewerUrl&&(r.viewerData.viewerUrl=i.viewerUrl),i.viewerTimeToWait&&(r.viewerData.viewerTimeToWait=parseInt(i.viewerTimeToWait+"",10))}catch(e){}r.linkName||(r.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),r.currentMimeType||(r.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1)),r.ui||(r.ui={isRenderedInline:this.fileViewer.shouldRenderInlineByDefault(r)}),t=this.getBlockIdFromBbML(e);var o=e.href;return 0===o.indexOf("http://localhost")&&(o=Object(u.c)(o.substr("http://localhost".length))),r.downloadUrl=o,this.fileViewer.initUiField(r),{fileBlock:r,id:t}},e.prototype.getBlockIdFromBbML=function(e){var t=e.dataset;return(null==t?void 0:t.bbid)?t.bbid:e.id?e.id:this.generateBlockId()},e.prototype.convertContentBlocksToBbML=function(t,n){var r=document.createElement("div");if(t.forEach((function(e){var t;if(e.blockType===o.d.File){var n=document.createElement("a"),i=n.dataset;if(n.href=e.fileBlock.downloadUrl,i.bbid=e.id,e.fileBlock.ui){var s={};e.fileBlock.ui.isRenderedInline?s.render="inline":s.render="attachment",null!=e.fileBlock.isDecorative&&(s.isDecorative=e.fileBlock.isDecorative),e.fileBlock.alternativeText&&(s.alternativeText=e.fileBlock.alternativeText),e.fileBlock.linkName&&(s.linkName=e.fileBlock.linkName),e.fileBlock.currentMimeType&&(s.mimeType=e.fileBlock.currentMimeType),e.fileBlock.viewerData&&(e.fileBlock.viewerData.bbFileUuid&&(s.bbFileUuid=e.fileBlock.viewerData.bbFileUuid),e.fileBlock.viewerData.viewerUuid&&(s.viewerUuid=e.fileBlock.viewerData.viewerUuid)),i.bbfile=JSON.stringify(s)}n.innerHTML=e.fileBlock.linkName,r.appendChild(n)}else if(e.blockType===o.d.Text&&e.textBlock){var a=document.createElement("div");a.dataset.bbid=e.id,a.innerHTML=e.textBlock,r.appendChild(a)}else if(e.blockType===o.d.Html&&(null===(t=null==e?void 0:e.fileBlock)||void 0===t?void 0:t.downloadUrl)){var u=document.createElement("a"),c=e.fileBlock,l=c.downloadUrl,d=c.file.fileName;(i=u.dataset).bbid=e.id,i.bbfile=JSON.stringify({linkName:d}),i.bbtype="embedded-unsafe-html",u.href=l,r.appendChild(u)}e.isNewToBbML&&delete e.isNewToBbML})),r.innerHTML){var i="";return n&&t&&t.length&&(i=e.CURRENT_VERSION_INDICATOR),i+r.innerHTML}return r.innerHTML},e.prototype.generateBlockId=function(){return"bbml-editor-id_"+c.b()},e.prototype.writeBbMLLink=function(e,t,n){if(0!==n.length){n.length>1&&"<ul>",n.forEach((function(e){n.length>1&&"<li>","lti"===e.type?'<a data-bbfile="'+e.data+'" data-bbtype="lti" href="#">'+e.title+"</a>":'<a href="'+e.url+'" target="_blank">'+e.title+"</a>",n.length>1&&"</li>"})),n.length>1&&"</ul>"}},e.$inject=["$q","DSCacheFactory",a.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(p);i.module(l,["angular-data.DSCacheFactory",a.a]).service(d,p)},XseH:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));n("my/J");var r=n("nsO7"),i=n("wHJ2"),o=n("H8CZ"),s="ultra.components.directives.hasFooter",a=function(){function t(t,n,i){var s=this;this.scope=t,this.element=n,this.attrs=i,this.domChanged=function(){var t=s.element.find("footer:not(.notification)").filter(":visible").filter((function(){return e(this).height()>0})),n=s.element.find(".import-status-bar").filter(":visible").filter((function(){return e(this).height()>0}));t.length>0||n.length>0?(e(s.element).addClass("has-footer"),e(s.element).hasClass("in-preview-mode")&&e(window.parent.document).find("body").addClass("has-footer-in-preview-mode")):(e(s.element).removeClass("has-footer"),e(s.element).hasClass("in-preview-mode")&&e(window.parent.document).find("body").removeClass("has-footer-in-preview-mode"))};var a=r.debounce(this.domChanged,100,{leading:!0,trailing:!0});this.observer=new MutationObserver(a),this.observer.observe(n[0],{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),o.b(this.element,a),o.a(this.element,a),this.scope.$on("$destroy",(function(){s.observer.disconnect(),o.b(s.element,a),o.a(s.element,a)}))}return t.$inject=["scope","element","attrs"],t}(),u=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.link=function(e,n,r){e.hasfooter=t.$injector.instantiate(a,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();i.module(s,[]).directive("bbHasFooter",["$injector",function(e){return e.instantiate(u)}])}).call(this,n("5iHu"))},"Y/dt":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return a}));var r="EVENT_ATTEMPT_SAVING_START",i="EVENT_ATTEMPT_SAVING_DONE",o="EVENT_ATTEMPT_SUBMITTING_START",s="EVENT_ATTEMPT_SUBMITTING_DONE",a="EVENT_ATTEMPT_TRIGGER_SAVE"},Y3OE:function(e,t,n){"use strict";var r=n("JfV0");t.a=r.ContentHandler},Y88D:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n("wHJ2"),i="ultra.components.directives.accessibility.clickFocus",o=function(){function t(t,n){var r=this;this.injector=t,this.timeout=n,this.restrict="A",this.link=function(t,n,i){i.bbClickFocus.length&&n.on("click",(function(){r.timeout((function(){if(i.indexToFocus){var t=Number(i.indexToFocus);e(i.bbClickFocus).eq(t).focus()}else{e(i.bbClickFocus).focus()}}),120)}))}}return t.$inject=["$injector","$timeout"],t}();r.module(i,[]).directive("bbClickFocus",["$injector",function(e){return e.instantiate(o)}])}).call(this,n("5iHu"))},YCUs:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.packageTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.packageFull</bb-translate>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button button--secondary js-secondary-button dismiss-message expand" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.takeMeBack">\n          <bb-translate>components.directives.fileUpload.takeMeBack</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(true)" class="button button--secondary js-secondary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.addAllContent\'}" analytics-id="components.directives.fileUpload.addAllContent">\n          <bb-translate>components.directives.fileUpload.addAllContent</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(false)" class="button js-primary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.letMeChoose\'}" analytics-id="components.directives.fileUpload.letMeChoose">\n          <bb-translate>components.directives.fileUpload.letMeChoose</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},"YOs/":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));n("IyP6");var r=n("nsO7"),i=n("wHJ2"),o=n("e6jQ"),s=n("lr7J"),a=n("0JpG"),u=n("en1n"),c=n("o2qC"),l="ultra.components.directives.table";function d(e,t,n){var r=e+"("+t+")";return n&&(r+=","+n+"("+t+")"),r}var p=function(){function e(e,t,n,o){var a=this;this.scope=e,this.element=t,this.$q=n,this.localizeService=o,this.fetchingMoreRows=!1,this.initialDataLoaded=!1,this.throttledShowMore=r.throttle((function(){var e=a.scope.config();if(a.scope.tableData().length<e.totalCount&&!a.fetchingMoreRows){a.fetchingMoreRows=!0;var t=a.$q.defer();a.scope.$emit("table.showMore",{instanceId:e.instanceId,callback:function(e){t.resolve(e)}}),a.scope.$root.$broadcast(s.a,e.instanceId+"-scroll-tray",t.promise),t.promise.then((function(){a.fetchingMoreRows=!1}))}}),500);var u=this.scope.$watch("config()",(function(e){i.isDefined(e)&&(u(),a.init())}))}return e.prototype.init=function(){var e=this,t=this.scope.config();t.instanceId=t.instanceId||o.a(),t.currentSortDirection=t.currentSortDirection||"asc",t.currentSortColumnIndex=t.currentSortColumnIndex||0,t.columns.forEach((function(e){i.isUndefined(e.visible)&&(e.visible=!0)}));var n=this.scope.$watchCollection("tableData()",(function(t){i.isArray(t)&&(e.initialDataLoaded=!0,n())}));if(t.customBreakpointFn){var s=r.throttle((function(e){t.customBreakpointFn(e)}),500);this.scope.$watch((function(){return u.d()}),(function(e){s(e)}))}this.addEventListeners(),this.setCaption()},e.prototype.addEventListeners=function(){var e=this;this.element.on("click","tr th.sortable-header",(function(t){var n=i.element(t.currentTarget).attr("data-heading-index");if(i.isDefined(n)){var r=parseInt(n,10);e.sort(r)}}))},e.prototype.setCaption=function(){var e=this,t=this.scope.config();this.localizeService.loadBundle("components/directives/table").then((function(){var n=e.localizeService.translateSync({locale:e.localizeService.getLocale(e.scope),key:"components.directives.table.caption",params:{caption:t.title,column:t.columns[t.currentSortColumnIndex].heading,direction:e.localizeService.translateSync({locale:e.localizeService.getLocale(e.scope),key:"components.directives.table."+t.currentSortDirection})},noWrap:!0});e.element.find("caption").text(n)}))},e.prototype.sort=function(e){var t=this,n=this.scope.config();this.initialDataLoaded=!1,n.currentSortColumnIndex===e?n.currentSortDirection="asc"===n.currentSortDirection?"desc":"asc":n.currentSortDirection="asc",n.currentSortColumnIndex=e,this.scope.$emit("table.sorted",{instanceId:n.instanceId,columnIndex:n.currentSortColumnIndex,sortDirection:n.currentSortDirection,callback:function(){t.initialDataLoaded=!0,t.setCaption()}})},e.prototype.showMore=function(){this.throttledShowMore()},e.$inject=["scope","element","$q",a.serviceName],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=c,this.transclude=!0,this.scope={config:"&",tableData:"&"},this.controller=["$scope",function(e){this.getConfig=function(){return e.config()}}],this.link=function(e,n){e.table=t.$injector.instantiate(p,{scope:e,element:n})}}return e.$inject=["$injector"],e}();i.module(l,[s.b,a.moduleName]).directive("bbTable",["$injector",function(e){return e.instantiate(m)}])},YQEa:function(e,t,n){},"YVo+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("w9Zy"),o=n("TnpK"),s="profile.update-password.routes";r.module(s,[i.d,o.b]).config([o.c,function(e){e.peekState("update-password",{url:"/password/update",require:function(){return n.e(647).then(n.bind(null,"aJE6"))},pageTitle:"base.profile.update-password.pageTitle"})}])},YfM7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("5MwF"),o=n("TnpK"),s="ultra.base.demo.routes";r.module(s,[o.b]).config([o.c,function(e){i.a.features.componentDemos&&e.peekState("demoComponent",{url:"/component/:componentId",require:function(){return n.e(670).then(n.bind(null,"YZN4"))},panelClass:"full",pageTitle:"Sample Component"})}])},YzQO:function(e,t,n){"use strict";function r(e){return!(!e||!e.length)&&(e.hasClass("bb-editor")||!!e.attr("analytics-on")||r(e.parent()))}function i(e){if(e&&e.length)return e.attr("analytics-id")||e.find("[analytics-id]").attr("analytics-id")}function o(e){if(e&&e.length)switch((e.prop("tagName")||"").toLowerCase()){case"a":case"input":case"button":return i(e);default:return o(e.parent())}}function s(e){if(e&&e.length)return e.attr("analytics-context")||s(e.parent())}n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s}))},ZBYA:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s="ultraUi.components.services.predict.institutionPreference",a="predictInstitutionPreference",u=function(){function e(e,t){this.$rootScope=e,this.predictInstitutionPreferenceModel=t}return e.prototype.getInstitutionPreference=function(e){return this.predictInstitutionPreferenceModel.getInstitutionPreference(e)},e.$inject=["$rootScope",o.fb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);i.module(s,[o.Q]).service(a,u)},ZMjE:function(e,t){e.exports='<div class="import-status-bar import-course-error" ng-class="{\'below\': contentImportStatusBarController.hideStatusBar()}"\n     ng-if="display" bb-load-bundle="components/directives/import-status-bar">\n  <div class="row">\n      <div bb-first-time-container>\n        <div class="columns guidance-wrapper import-status-bar-message">\n          <span class="successful-import-message ellipsis" bb-focus bb-translate ng-if="contentImportStatusBarController.notCarriedForwardItemsCount === 0">\n            course.import.statusBar.success\n          </span>\n          <bb-guidance component-key="importAnalysis" page-container-selector=".course-outline"\n                       class="guidance-element-overlay push-right push-top" ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0">\n            <bb-translate>course.import.statusBar.tooltip.main</bb-translate>\n          </bb-guidance>\n          <a bb-focus \n             href="javascript:void(0);" \n             class="not-copied-details" \n             ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0"\n             ng-class="{\'not-carry-details-warn\': contentImportStatusBarController.notCarriedForwardItemsCount > 0}"\n             ng-click="contentImportStatusBarController.goToImportReport()"\n             analytics-id="course.import.statusBar.importReport.link">\n            <div class="status-bar-alarm" bb-guidance-target component-key="importAnalysis">\n                <bb-translate class="ellipsis" translate-values="{ count: contentImportStatusBarController.notCarriedForwardItemsCount }">\n                  course.import.statusBar.itemsCount.plural\n                </bb-translate>\n            </div>\n          </a>\n        </div>\n      </div>\n    <div class="columns confirm-column right">\n      <button class="button default js-import-confirm" \n              ng-click="contentImportStatusBarController.confirm()"\n              analytics-id="course.import.statusBar.confirm.button">\n        <span bb-translate="course.import.statusBar.confirm"></span>\n      </button>\n      \x3c!-- POST v1 --\x3e\n      \x3c!--<button tabindex="0" class="right inverse undo-import" ng-click="contentImportStatusBarController.undo()">--\x3e\n      \x3c!--<span>Undo Import</span>--\x3e\n      \x3c!--</button>--\x3e\n    </div>\n  </div>\n</div>'},ZQey:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("nbDY"),o=function(e){function t(t){var n=e.call(this,t)||this;return n.courseStatus=t,n}return Object(r.__extends)(t,e),t.Open=new t("OPEN"),t.Complete=new t("COMPLETE"),t.Private=new t("PRIVATE"),t.OpenTermClassic=new t("OPEN_CLASSIC"),t.PrivateTermClassic=new t("PRIVATE"),t.TermOpen=new t("OPEN"),t.TermComplete=new t("COMPLETE"),t.TermPrivate=new t("PRIVATE"),t.OpenClassic=new t("OPEN_CLASSIC"),t}(n.n(i).a)},Za2G:function(e,t){e.exports='<bb-modal class="notification" \n          modal-title-key="components.directives.fileUpload.improperAmountOfFilesTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.improperAmountOfFilesFull</bb-translate>\n    </p>\n    <div class="file-list">\n      <div ng-repeat="file in fileUpload.uploadedFiles">\n        <input ng-if="$index===0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" checked analytics-id="components.directives.checked.input.radio">\n        <input ng-if="$index!==0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" analytics-id="components.directives.not.checked.input.radio">\n        <label class="toggle-label" for="{{\'fileListing\' + $index}}" style="white-space: nowrap">{{file.name}}</label><br />\n      </div>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadSelectedFile">\n    <bb-translate>components.directives.fileUpload.uploadSelectedFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},"ZzN+":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("5MwF"),s=n("pjml"),a=n("0+Qs"),u="ultra.service.course.conversion",c="courseConversion",l=function(){function e(e,t,n,r,i,o){this.interval=e,this.CourseModel=t,this.$modal=n,this.$q=r,this.$rootScope=i,this.ScheduledTaskModel=o,this.showPreviewAlert=!0,this.taskCache={},this.queuedTaskCache={}}return e.prototype._getConversionTask=function(e){return this.ScheduledTaskModel.$find(e)},e.prototype.isPreview=function(e){return!e.isOpen()&&e.isUltraPreview()},e.prototype.isConversionComplete=function(e){return!e||(s.rb.QueueTaskStatus.Complete.isEqualTo(e)||s.rb.QueueTaskStatus.CompleteErrors.isEqualTo(e))},e.prototype.isConversionSuccess=function(e){return!e||s.rb.QueueTaskStatus.Complete.isEqualTo(e)},e.prototype.setCheckConversionIntervalIfNotExist=function(e,t){this.taskCache[e.courseId]||this.setCheckConversionInterval(e,t)},e.prototype.setCheckConversionInterval=function(e,t){var n=this,r=this.cancelConversionInterval(e);this.removeQueuedTaskFromCache(e),void 0===t&&r&&(t=r.onCompleteCallback),e.refreshConvertToUltraStatus().then((function(r){n.queuedTaskCache[e.courseId]=r.ui.convertToUltraTaskId,n._getConversionTask(n.queuedTaskCache[e.courseId]).$then((function(r){n.setUpIntervalToPollForConversionTaskCompletion(r,e,t)}))}))},e.prototype.setUpIntervalToPollForConversionTaskCompletion=function(e,t,n){var r=this,i=e.taskTitle;if(i&&(i.indexOf("ConvertTOUltraQueuedOperation")>=0||i.indexOf("UndoUltraQueuedOperation")>=0)){var s;if(s=function(){r._getConversionTask(e.taskId).$then((function(e){var n=e.taskStatus.toString(),i=r.isConversionComplete(n),o=r.isConversionSuccess(n);if(i){var s=r.cancelConversionInterval(t);r.removeQueuedTaskFromCache(t),s&&s.onCompleteCallback&&s.onCompleteCallback(n,{complete:i,success:o,taskId:e.taskId,taskTitle:e.taskTitle})}}))},!this.taskCache[t.courseId]){var a=o.a.production?6e4:6e3;this.taskCache[t.courseId]={interval:this.interval((function(){s()}),this.$rootScope,a),onCompleteCallback:n}}}},e.prototype.cancelConversionInterval=function(e){var t=this.taskCache[e.courseId];return t&&(this.interval.cancel(t.interval),this.taskCache[e.courseId]=null),t},e.prototype.removeQueuedTaskFromCache=function(e){delete this.queuedTaskCache[e.courseId]},e.$inject=[a.b,s.o.serviceName,"$modal","$q","$rootScope",s.rb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);i.module(u,[s.Q,a.a]).service(c,l)},ZzR9:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.$stateChangeError="$stateChangeError",e.$stateChangeStart="$stateChangeStart",e.$stateChangeSuccess="$stateChangeSuccess",e.$stateNotFound="$stateNotFound",e.$stateHasCourseInContextChanged="$stateHasCourseInContextChanged",e.$stateHasContentInContextChanged="$stateHasContentInContextChanged",e.$stateLocationChangeSuccess="$locationChangeSuccess"}(r||(r={}))},ZzYr:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("TnpK"),o=n("Qbdf"),s=n("aHpC"),a=n("wHJ2"),u="ultra.components.directives.courseOrgTokenReplacementDirective",c=[{coursePrefix:"base.baseCourses",orgPrefix:"base.baseOrganizations"},{coursePrefix:"base.courses",orgPrefix:"base.organizations"},{coursePrefix:"course",orgPrefix:"organization"},{coursePrefix:"components.directives.message",orgPrefix:"components.directives.message.organization"},{coursePrefix:"components.directives.learning-module.ghost-panel",orgPrefix:"components.directives.learning-module.orgs-ghost-panel"},{coursePrefix:"components.directives.calendar",orgPrefix:"components.directives.calendar.organization"},{coursePrefix:"components.directives.content-visibility",orgPrefix:"components.directives.content-visibility.organization"},{coursePrefix:"components.directives.grade",orgPrefix:"components.directives.grade.organization"}],l=function(){function e(e,t,n,r,i){var o=this;this.element=e,this.attributes=t,this.scope=n,this.ultraState=r,this.currentCourse=i;try{if((r.includes("base.organizations.**")||i.course&&i.course.isOrganization)&&(t.bbTranslate&&(t.bbTranslate=this.replaceToken(t.bbTranslate),e.attr("bb-translate",this.replaceToken(t.bbTranslate))),t.bbTranslateAttrs)){var s=t.bbTranslateAttrs;a.forEach(this.scope.$eval(s),(function(e){s=s.replace(e,o.replaceToken(e))})),t.bbTranslateAttrs=s,e.attr("bb-translate-attrs",s)}}catch(e){}}return e.prototype.replaceToken=function(e){if(e){var t=c.find((function(t){return e.startsWith(t.coursePrefix)}));if(t)return e.replace(t.coursePrefix,t.orgPrefix)}return e},e}(),d=function(){function e(e,t){var n=this;this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=function(){return function(e,t,r){return new l(t,r,e,n.ultraState,n.currentCourse)}}}return e=Object(r.__decorate)([Object(r.__param)(0,Object(s.b)(i.d)),Object(r.__param)(1,Object(s.b)(o.e))],e)}();a.module(u,[i.b]).directive("courseOrgTokenResolver",["$injector",function(e){return e.instantiate(d)}])},a8V0:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Assessment=new t("Assessment"),t.Section=new t("Section"),t.Item=new t("Item"),t}(n.n(i).a);t.a=o},aD4H:function(e,t){e.exports='<ng-form name="baseForm" bb-autosave save-func="saveForm.save()" validation-func="saveForm.validate()" delay-autosave="delayAutosave()"\n         debounce-save-destination="debounceSaveDestination()" novalidate>\n    <div ng-transclude />\n    <bb-save-buttons validate-save="saveForm.validate()"\n                     save-action="saveForm.saveClicked()"\n                     cancel-action="saveForm.cancelClicked()"\n                     delete-action="saveForm.deleteClicked()"\n                     hide-save="hideFooter"\n                     hide-cancel="hideFooter"\n                     mousedown-action="saveForm.mouseDown()"\n                     can-delete="canDelete"\n                     display-delete-after-saving="displayDeleteAfterSaving()"\n                     delete-confirmation-resource-type="{{deleteConfirmationResourceType}}"\n                     must-show-delete-confirmation="true"\n                     choices="choices"\n                     analytics-id-tag-prefix="{{::analyticsIdTagPrefix}}.saveForm">\n                          \x3c!-- TODO: will update the above “must-show-delete-confirmation” after PR #818 (update confirmation needed) is merged --\x3e\n    </bb-save-buttons>\n</ng-form>\n'},aHpC:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return u}));var r=n("nsO7");function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Symbol(e.name);return function(n,i,o){var s=o.value;o.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return this[r]=this[r]||e.apply(null,[s].concat(t||[])),this[r].apply(this,n)}}}var o=function(e){return i(r.debounce,e)},s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t,n,i){var o=i.value,s=Symbol("@ScopeOnce("+t.constructor.name+"."+n+")"),a=Symbol("@ScopeOnce("+t.constructor.name+"."+n+")");i.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this,u=i.$scope||i.scope;if(!u)throw new Error("NO_SCOPE_FOUND");return Object(r.isEmpty)(e)||(i[a]=i[a]||Object(r.once)((function(){u.$watchGroup(e,(function(){i[s]=null}))})),i[a]()),i[s]=i[s]||Object(r.once)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.apply(i,e)})),i[s].apply(i,t)}}},a=function(e){if(!e)throw new Error("Empty name is not accepted");return function(t,n,r){if("function"!=typeof t)throw new Error("@Inject only supports constructor arguments");t.$inject=t.$inject||[],t.$inject[r]=e}},u=function(){return function(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this,i=r.apply(this,e),o=n.$injector;if(!o)throw new Error("$injector NotFound, the decorator requires $injector to be injected into class.");o.invoke(["$rootScope","$q",function(e,t){t.when(i).then((function(){return e.$applyAsync()}))}])}}}},abE0:function(e,t){e.exports='<bb-modal class="notification" modal-translate-options="modalTranslateOptions"\n          modal-aria-type="{{modalAriaType}}"\n          analytics-id-tag-prefix="components.directives.confirmationNeeded">\n  <div name="modal-contents">\n    <p ng-bind-html="::modalStrings.instructions"></p>\n    <div ng-show="confirmationNeeded.choices && confirmationNeeded.choices.length > 0" ng-repeat="choice in confirmationNeeded.choices">\n      <input id="{{choice.key}}" ng-disabled="choice.isDisable" ng-model="choice.value" type="checkbox" analytics-id="components.directives.confirmationNeeded.input.checkbox"/>\n      <label for="{{choice.key}}" bb-translate="{{choice.localizedKey}}"></label>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="okAction()" analytics-id="primary.button.okAction.button">{{::modalStrings.ok}}</button>\n  <button name="modal-footer-button-secondary" class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" analytics-id="secondary.button.cancelAction.button">{{::modalStrings.cancel}}</button>\n</bb-modal>\n'},adx1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("nsO7"),o=function(){function e(){this.events=Object.create(null)}return e.prototype.$onEvent=function(e,t){var n=this;return this.events[e]=this.events[e]||[],this.events[e].push(t),i.once((function(){i.remove(n.events[e],(function(e){return e===t}))}))},e.prototype.$emitEvent=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o={type:e};(this.events[e]||[]).forEach((function(e){e.call.apply(e,Object(r.__spreadArrays)([t,o],n))}))},e}()},aohr:function(e,t,n){"use strict";var r;!function(e){e.CcAdvisors="CC_ADVISORS",e.DisableAdvisorViewAllStudents="DISABLE_ADVISOR_VIEW_ALL_STUDENTS",e.EmailBranding="EMAIL_BRANDING",e.EmailSender="EMAIL_SENDER",e.EnableLogOut="ENABLE_LOG_OUT",e.InstructorViewMajorDegreeColumn="INSTRUCTOR_VIEW_MAJOR_DEGREE_COLUMN",e.OverrideLanguagePack="OVERRIDE_LANGUAGE_PACK",e.TypeaheadCourseLimit="TYPEAHEAD_COURSE_LIMIT",e.TypeaheadStudentLimit="TYPEAHEAD_STUDENT_LIMIT"}(r||(r={})),t.a=r},b2lU:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n("0JpG"),i="fileUtility",o="FileUtilFactory",s=function(){function e(e,t){var n=this;this.bbLocalize=e,this.$q=t,this.bytes="components.directives.fileUpload.bytes",this.GB="components.directives.fileUpload.GB",this.KB="components.directives.fileUpload.KB",this.MB="components.directives.fileUpload.MB",this.calculateSize=function(e){var t=n.bytes;return e>1024&&(e/=1024,t=n.KB,e>1024&&(e/=1024,t=n.MB,e>1024&&(e/=1024,t=n.GB))),{size:e,sizeLabel:t}}}return e.$inject=[r.serviceName,"$q"],e}();angular.module(i,[r.moduleName]).factory(o,["$injector",function(e){return function(){return e.instantiate(s)}}])},bF8R:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("fYJU"),u=n("o5Lu"),c=n("Bu0u"),l=n("1y/X"),d=n("0JpG"),p="ultra.components.services.courseContent",m="courseContent",f=function(){function e(e,t,n,r,i,o,s){this.$q=e,this.$rootScope=t,this.$log=n,this.grade=r,this.contextUser=i,this.UserModel=o,this.bbLocalize=s,this.contentDataResult=new h}return e.prototype.loadContentAndGrades=function(e){var t,n=this;if(e.content)t=e.content.$asPromise&&e.content.$asPromise()||this.$q.when(e.content);else{if(!e.contentId)throw new c.a({message:"Content or contentId must be provided."});var r="assignedGroups,selfEnrollmentGroups.group"+(e.contentExtraExpand?","+e.contentExtraExpand:"");t=e.course.contents.$find(e.contentId,{expand:r}).$asPromise()}if(!this.contextUser.userId)throw new c.a({message:"There is no userId in the context."});return t.then((function(t){var r=new h;return r.courseContent=t,r.groupMembers=[],e.column?r.gradingColumn=e.column:r.gradingColumn=e.course.gradebook.columns.$buildRaw(t.getAssociatedGradingColumn(e.columnId)),r.gradingColumn.rubricAssociations||r.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise().then((function(e){r.gradingColumn.rubricAssociations=e.rubricAssociations})),n.grade.loadGrade({attemptQueryParams:{expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",overrideAggregationModel:s.F.AttemptAggregationModel.Last},gradeQueryParams:{expand:"attemptsLeft"},courseId:e.course.id,column:r.gradingColumn,content:r.courseContent,userId:n.contextUser.userId},!0).then((function(o){if(r.submitter=n.contextUser.userModel,o){if(r.gradeDetail=o,r.attempt=o.ui.attempt,r.groupAttempt=o.ui.groupAttempt,t.isGroupContent)return n.getGroupMembers(e.course,t,r.groupAttempt).then((function(e){return r.groupMembers=e,r.groupAttempt&&(r.submitter=i.find(e,(function(e){return e.id===r.groupAttempt.submittedBy})),!r.submitter&&(r.submitter=null,r.groupAttempt.submittedBy))?n.UserModel.$find(r.groupAttempt.submittedBy).$then((function(e){r.submitter=e||null}),(function(e){return n.$log.error(e.$response)})).$asPromise().then((function(){return r})):r}))}else if(t.isGroupContent)return n.getGroupMembers(e.course,t).then((function(e){return r.groupMembers=e,r}));return r}))}))},e.prototype.getGroupMembers=function(e,t,n){var r=this;return t.assignedGroups&&t.assignedGroups.length>0?e.groups.$find(t.assignedGroups[0].groupId,{expand:"memberships",excludeUnavailableMembers:!0}).$asPromise().then((function(t){return e.memberships.$refresh({fields:"id, user, courseRole",roleBucket:l.a.TAKING.toString()}).$asPromise().then((function(e){return r.sortGroupMembers(e,t)}))})):this.$q.when([])},e.prototype.sortGroupMembers=function(e,t){var n=this,r={},i=[],o=t.memberships||t.members;e.forEach((function(e){e.user&&(e.user.ui=e.user.ui||{},r[e.user.id]=e.user)}));var s=[];return o.forEach((function(e){var t=e.userId||e,i=r[t];if(i){var o=n.bbLocalize.formatUsername(i,d.ILocaleUsernameFormat.Short,n.$rootScope);s.push(o),o.then((function(e){i.ui.formatUserName=e}))}})),this.$q.all(s).then((function(){return(o=o.filter((function(e){return!!r[e.userId||e]}))).sort((function(e,t){var n=e.userId||e,i=t.userId||t;return r[n].ui.formatUserName.localeCompare(r[i].ui.formatUserName)})),o.forEach((function(e){var t=e.userId||e;r[t]&&(i.push(r[t]),delete r[t])})),i}))},e.$inject=["$q","$rootScope","$log",u.h,a.b,s.Pb.serviceName,d.serviceName],e}(),h=function(){};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(f);o.module(p,[s.Q,a.a]).service(m,f)},bMxM:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s=n("P2dS"),a=n("A0nf"),u="ultra.components.services.courseContentIconService",c="courseContentIconService",l=["-a","-c","-o","-hc"].join("|").replace(/-/g,""),d=new RegExp("-("+l+")$","g"),p=function(){function e(e,t){this.$q=e,this.gradeColumnCategoryService=t}return e.prototype.getIconClass=function(t){var n,r=this,i=o.r.ContentHandler,s="";if(t&&t.contentHandler){var a=i.parse(t.contentHandler.toString());s=a&&a.iconClass;var u=t.getAssociatedGradingColumn?t.getAssociatedGradingColumn():null;if(u&&u.gradebookCategory&&u.gradebookCategory.title)s=this.getColumnIconClassAsString(u);else if(t.contentDetail){if(i.File.isEqualTo(a)){var c=t.contentDetail[i.File.toString()]&&t.contentDetail[i.File.toString()].file&&t.contentDetail[i.File.toString()].file.mimeType||"";s=e.fileMIMETypeToIconClass[c]=e.fileMIMETypeToIconClass[c]||o.r.FileContentHandlerType.getIconClassByFileMIMEType(c)}i.CourseLink.isEqualTo(a)&&(n=t.getLinkContentSource().$then((function(e){var t=i.parse(e.contentHandler.toString());s=t&&t.iconClass})))}i.Folder.isEqualTo(a)&&(s=t.contentDetail&&t.contentDetail[i.Folder.toString()]&&t.contentDetail[i.Folder.toString()].isBbPage?i.Document.iconClass:t.ui&&t.ui.isOpen?o.r.FolderContentHandlerIcon.OpenFolder.toString():o.r.FolderContentHandlerIcon.ClosedFolder.toString())}return n?n.$asPromise().then((function(){return r.$q.when(s||e.DEFAULT_ICON_CLASS)})):this.$q.when(s||e.DEFAULT_ICON_CLASS)},e.prototype.getColumnIconClassAsString=function(t){var n="";if(t.externalGrade)n=e.GRADE_OVERALL_ICON_CLASS;else if(t.calculationType&&!o.F.CalculationType.NonCalculated.isEqualTo(t.calculationType))n=e.GRADE_CALCULATIONS_ICON_CLASS;else if(t.gradebookCategory&&t.gradebookCategory.title)n=this.gradeColumnCategoryService.getCategoryIcon(t.gradebookCategory);else if(t.scoreProviderHandle){var r=a.a.parse(t.scoreProviderHandle.toString());null!=r&&(n=r.iconClass,t.isScormSCO()&&(n+=e.SCORM_SCO_ICON_CLASS_SUFFIX))}return n},e.prototype.getColumnIconClass=function(t){var n=this.getColumnIconClassAsString(t);return this.$q.when(n||e.DEFAULT_ICON_CLASS)},e.prototype.getIconName=function(e){return e.replace("img-icon-","")},e.prototype.getIconNameForLocalization=function(e){return e.replace(d,"")},e.DEFAULT_ICON_CLASS="img-icon-document-blank",e.GRADE_OVERALL_ICON_CLASS="img-icon-overall-grade",e.GRADE_CALCULATIONS_ICON_CLASS="img-icon-calculation",e.SCORM_SCO_ICON_CLASS_SUFFIX="-sco",e.$inject=["$q",s.b],e.fileMIMETypeToIconClass=Object.create(null),e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(p);i.module(u,[s.a]).service(c,p)},bTsL:function(e,t){e.exports='<div class="dropdown-directive">\n  <select id="{{::listId}}" ng-if="::dropdown.useNativeSelect()" ng-model="dropdown.selectedItem"\n          ng-options="item.name disable when item.isHeader for item in itemList"\n          ng-class="{\'drowdown-group\': listKind === \'group\'}"\n          ng-change="dropdown.clickItem()" analytics-id="directives.dropdown.item.select">\n    \x3c!--for the listkind=group, ios mobile will show a blank option--\x3e\n    <option ng-if="dropdown.shouldHaveBlankOption(listKind)" class="default-option" value="" analytics-id="directive.dropdown.option"></option>\n  </select>\n\n  <ul ng-attr-role="{{dropdown.getRole()}}"\n      ng-class="{\'feature-filter\': listKind !== \'custom\', \'selection-full-width\': selectionFullWidth(), \'force-above\': forceAbove}"\n      id="{{::listId}}" ng-if="::!dropdown.useNativeSelect()" class="f-dropdown ignore-accordion" data-dropdown-content\n      aria-hidden="true" aria-autoclose="{{::!noAutoClose}}" tabindex="-1">\n    <li class="list-header" ng-if="listHeader">\n      <a href="javascript:void(0);"\n         analytics-id="{{::analyticsIdTagPrefix}}.listHeader.link"\n      >\n        {{listHeader}}\n      </a>\n    </li>\n    <li role="presentation" ng-repeat="item in itemList" ng-if="listKind === \'filter\'"\n        ng-class="{\'item-selected\': selectedItem === item}"\n        class="{{item.extraClass}}"\n    >\n      <a href="javascript:void(0);" \n         role="option" \n         aria-selected="{{selectedItem === item}}" \n         aria-setsize="{{itemList.length}}" \n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         class="js-filter-id-{{::item.index}}" \n         data-filter-id="{{::item.nature.toString()}}"\n         ng-click="dropdown.selectItem(item)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name.split(\' \').join(\'\')}}.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n        <i></i>\n      </a>\n    </li>\n    <li ng-repeat="item in itemList" ng-if="listKind === \'avatar-list\'">\n      <a href="javascript:void(0);" \n         class="item-container"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.avatar.link">\n        <div class="info-container">\n          <div class="avatar-container">\n            <bb-avatar user="item" inactive="!dropdown.isUserCourseAvailable(item.id)"></bb-avatar>\n          </div>\n          <div class="username-container">\n            <bb-username user="item" format="short"></bb-username>\n            <div ng-if="selectedItem === item" class="sub-text" ng-bind-html="selectedText"></div>\n          </div>\n        </div>\n      </a>\n    </li>\n    <li role="presentation" ng-if="listKind === \'group\'" ng-repeat="item in itemList"\n        ng-class="{\'group-header-li\': item.isHeader }">\n      <a href="javascript:void(0);" \n         role="option" \n         aria-setsize="{{itemList.length}}" \n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         ng-class="{\'group-header\': item.isHeader}" \n         ng-attr-tabindex="{{ item.isHeader ? -1 : 0 }}"\n         ng-click="dropdown.selectItem(item, $event)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.group.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n      </a>\n    </li>\n    <div bb-dropdown-transclude></div>\n  </ul>\n</div>\n'},bd3f:function(e,t){e.exports='<p class="sr-only read-info-polite" role="alert" aria-live="polite">{{readInfo.message}}</p>\n<p class="sr-only read-info-assertive" role="alert" aria-live="assertive">{{readInfo.alertMessage}}</p>'},bd9L:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n("D57K"),i=n("wHJ2"),o=n("nbDY"),s=n.n(o),a=n("+brj"),u=n("7/CN"),c=n("RNuw"),l=n("lEL+"),d="ultra.directives.autosave",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Change=new t("change"),t.Saving=new t("saving"),t.Saved=new t("saved"),t.SaveFailure=new t("saveFailure"),t.ValidationFailure=new t("validationFailure"),t}(s.a),m="bb-autosave-save-to-server-now",f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.BrowserLocalStorage=new t("browserLocalStorage"),t.BrowserSessionStorage=new t("browserSessionStorage"),t.Server=new t("server"),t}(s.a),h=function(){function e(e,t,n,r,i){switch(this.$q=e,this.scope=t,this.formController=n,this.browserStorage=r,this.timeout=i,this.timeoutMillis=2e3,this.startAutoSubmit=!1,this.saveTo=this.scope.debounceSaveDestination&&f.parse(this.scope.debounceSaveDestination())||f.Server,this.saveTo){case f.BrowserSessionStorage:this.browserStorageDestination=a.a.SessionStorage;break;case f.BrowserLocalStorage:this.browserStorageDestination=a.a.LocalStorage}this.checkForDirectiveConfigErrors(),t.timeoutMillis?this.timeoutMillis=t.timeoutMillis():this.browserStorageDestination&&(this.timeoutMillis=1e3),this.setupListeners(),this.browserStorageDestination&&this.restoreFromBrowser(),this.setupWatcher()}return e.prototype.setupListeners=function(){var e=this;this.scope.$on("bb-autosave-interrupt-timer",(function(){e.timeout.cancel(e.autoSaveTimeout)})),this.scope.$on("bb-autosave-save-trigger-debounce",(function(){e.scope.delayAutosave&&e.scope.delayAutosave()||e.debounceSave()})),this.scope.$on(m,(function(){e.scope.delayAutosave&&e.scope.delayAutosave()||(e.timeout.cancel(e.autoSaveTimeout),e.saveToServerNow())})),this.scope.$on("bb-autosave-save-to-browser-now",(function(){e.scope.delayAutosave&&e.scope.delayAutosave()||(e.scope.$emit("bb-autosave-form",p.Change),e.timeout.cancel(e.autoSaveTimeout),e.saveToBrowserNow())})),this.scope.$on("bb-autosave-browser-restore",(function(){e.restoreFromBrowser()})),this.scope.$on("bb-autosave-browser-delete",(function(){e.deleteFromBrowser()})),this.scope.$on("bb-start-auto-submission",(function(t,n){e.startAutoSubmit=!0,n.resolve()})),this.scope.$on("bb-cancel-auto-submission",(function(){e.startAutoSubmit=!1}))},e.prototype.setupWatcher=function(){var e=this,t=function(t,n){if(!e.scope.delayAutosave||!e.scope.delayAutosave()){if(null===t&&""===n)return;e.debounceSave()}};if(!this.scope.delayAutosave||!this.scope.delayAutosave())return c.a(this.scope,this.formController,t);var n=this.scope.$watch((function(){return e.scope.delayAutosave()}),(function(r){null==r||r||(c.a(e.scope,e.formController,t),n())}))},e.prototype.checkForDirectiveConfigErrors=function(){if(this.saveTo.isEqualTo(f.Server)&&(!this.scope.saveFunc||!this.scope.validationFunc))throw new Error("saving to the server requires save-func and validate to be defined")},e.prototype.isValid=function(){return this.formController.$valid&&this.scope.validationFunc()},e.prototype.debounceSave=function(){var e=this;this.startAutoSubmit||(this.scope.$emit("bb-autosave-form",p.Change),this.scope.$emit("bb-autosave-form-to-browser",p.Change),this.timeout.cancel(this.autoSaveTimeout),this.autoSaveTimeout=this.timeout((function(){e.saveTo.isEqualTo(f.Server)?e.saveToServerNow():e.browserStorageDestination&&e.saveToBrowserNow()}),this.scope,this.timeoutMillis))},e.prototype.saveToServerNow=function(){var e=this;if(this.startAutoSubmit||!u.b()){if(!this.scope.saveFunc||!this.scope.validationFunc)throw new Error("saving to the server requires save-func and validate to be defined");this.isValid()?(this.scope.$emit("bb-autosave-form",p.Saving),this.scope.saveFunc().then((function(t){e.scope.$emit("bb-autosave-form",p.Saved,t),e.browserStorageDestination&&e.deleteFromBrowser()}),(function(t){e.scope.$emit("bb-autosave-form",p.SaveFailure,t)}))):this.scope.$emit("bb-autosave-form",p.ValidationFailure)}},e.prototype.saveToBrowserNow=function(){var e=this;if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");this.scope.$emit("bb-autosave-form-to-browser",p.Saving),this.browserStorage.serializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then((function(t){e.scope.$emit("bb-autosave-form-to-browser",p.Saved,t)}))},e.prototype.restoreFromBrowser=function(){var e=this;if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deserializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then((function(t){if(t)return e.scope.$root.$broadcast("bb-autosave-browser-restore-data",t),t}))},e.prototype.deleteFromBrowser=function(){if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deleteCurrentRouteScopes(this.browserStorageDestination)},e.$inject=["$q","scope","formController",a.c,l.b],e}(),g=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.require="^form",this.scope={debounceSaveDestination:"&?",delayAutosave:"&?",saveFunc:"&?",timeoutMillis:"&?",validationFunc:"&?"},this.link=function(e,n,r,i){e.autoSave=t.$injector.instantiate(h,{scope:e,formController:i})}}return e.$inject=["$injector"],e}();i.module(d,[l.a,a.b]).directive("bbAutosave",["$injector",function(e){return e.instantiate(g)}])},bzJv:function(e,t,n){"use strict";var r;!function(e){e.NotStarted="NotStarted",e.Started="Started",e.Completed="Completed",e.PastDue="PastDue",e.Unavailable="Unavailable"}(r||(r={})),t.a=r},cFWd:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("LvpZ");var r=n("nsO7"),i=n("wHJ2"),o=n("oQrK"),s=n("lEL+"),a=n("bTsL"),u=n("yC9S"),c="ultra.components.directives.dropdown",l=function(){function e(e,t,n,s){var a,c=this;(this.scope=e,this.element=t,this.$window=n,this.timeout=s,this.RESIZE_DELAY=150,this.isMobile=!1,this.isIos=!1,this.setMaxHeight=function(){var e=c.element.offset().top,t=i.element(c.$window).height(),n=34;"avatar-list"===c.scope.listKind&&(n=57);var r=Math.max(Math.floor((c.scope.forceAbove?e:t-e)/n),2);c.scope.simplifiedMaxItemsPerPage&&c.scope.simplifiedMaxItemsPerPage()>0&&(r=Math.min(r,c.scope.simplifiedMaxItemsPerPage())),c.element.find(".dropdown-directive").css({maxHeight:n*r+2})},this.element.addClass("bb-dropdown"),this.isMobile=!o.a.detect().desktop(),this.isIos=o.a.detect().ios(),this.selectedItem=this.scope.selectedItem,e.$watch("::selectedItem",(function(e){c.selectedItem=e})),this.useNativeSelect())||(this.element.on("opened.fndtn.dropdown",(function(){c.setMaxHeight(),c.scope.$applyAsync(),a=u.b.OnWindow("resize",r.debounce(c.setMaxHeight,c.RESIZE_DELAY),e),(c.scope.onOpen||i.noop)()})),this.element.on("closed.fndtn.dropdown",(function(){a(),(c.scope.onClose||i.noop)()})))}return e.prototype.selectItem=function(e,t){e.isHeader?t.stopPropagation():this.scope.clickFunction({item:e})},e.prototype.getRole=function(){return"menu"===this.scope.listKind?"menu":"listbox"},e.prototype.clickItem=function(){this.selectedItem&&(this.scope.selectedItem=this.selectedItem,this.scope.clickFunction({item:this.selectedItem}))},e.prototype.useNativeSelect=function(){return!this.scope.forceCustomDropdown&&this.isMobile&&"avatar-list"!==this.scope.listKind&&"custom"!==this.scope.listKind&&"region"!==this.scope.listKind},e.prototype.isUserCourseAvailable=function(e){var t=this.scope.getUserCourseAvailabilities&&this.scope.getUserCourseAvailabilities();return!(t&&!t[e])},e.prototype.shouldHaveBlankOption=function(e){return this.isIos&&"group"===e},e.$inject=["scope","element","$window",s.b],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=a,this.transclude=!0,this.scope={listId:"@",itemList:"=",listKind:"@",selectedItem:"=?",selectedText:"@?",listHeader:"@?",clickFunction:"&?",onOpen:"&?",onClose:"&?",getUserCourseAvailabilities:"&?userCourseAvailabilities",selectionFullWidth:"&?",simplifiedMaxItemsPerPage:"&?",forceAbove:"=?",forceCustomDropdown:"=?",analyticsIdTagPrefix:"@?",noAutoClose:"=?"},this.link=function(e,n,r,i,o){e.dropdown=t.$injector.instantiate(l,{scope:e,element:n})}}return e.$inject=["$injector"],e}(),p=function(){function e(e){this.$injector=e,this.restrict="EA",this.link=function(e,t,n,r,i){"custom"===e.listKind||"region"===e.listKind?i((function(n,r){r.dropdown=e.dropdown,t.replaceWith(n)})):t.remove()}}return e.$inject=["$injector"],e}();i.module(c,[s.a]).directive("bbDropdown",["$injector",function(e){return e.instantiate(d)}]).directive("bbDropdownTransclude",["$injector",function(e){return e.instantiate(p)}])},cGmE:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},cMqb:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("9zo4"),i=n("wHJ2"),o=n("w9Zy"),s=n("XGja"),a="ultra.directives.accessibility.focus",u=function(){function e(e,t){var n=this;this.bbOffcanvas=e,this._accessibility=t,this.restrict="A",this.link=function(e,t,r){var o=r.keepTriggerFocus,a=e.$watch(r.bbFocus,(function(e){null!=e&&"true"!==i.lowercase(e.toString())||!n._accessibility.isElementInActivePanel(t)||(s.a(t,n.bbOffcanvas.safeFocus.bind(n.bbOffcanvas)),"true"!==o&&a())}))}}return e.$inject=[o.e,r.c],e}();i.module(a,[o.d]).directive("bbFocus",["$injector",function(e){return e.instantiate(u)}])},cQcs:function(e,t){e.exports='<div class="reveal-modal-bg fade"\n     ng-class="{in: animate, dark: darkenBackdrop}"\n     ng-click="close($event)"\n     style="display: block"\n     analytics-id="components.services.backdrop"\n></div>'},cYWG:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("nsO7"),o=n("5MwF"),s="ultra.components.services.angular.http.ease",a="shelfLifeInEase",u=function(){function e(e,t){this.$q=e,this.$log=t,this._queue={},this._queueSeq=0,this.delay=500}return e.prototype.enqueue=function(e){var t=this;e.shelfLifeInEase=(e.params||{})[a]||this.delay,(e.params||{})[a]=void 0;var n=this.$q.defer(),r=(new Date).getTime();if(!i.some(this._queue,(function(i,o){return!!i&&(i.completedAt&&r-i.completedAt>i.shelfLifeInEase?(t._queue[o]=void 0,!1):((i.originalUrl||i.url)===(e.originalUrl||e.url)&&(s=t.isServableBy(i,e)),!!s&&(i.httpEaseResponseQ.promise.then((function(e){t.$q.when(s(e)).then((function(e){n.resolve(e)}))})),!0)));var s}))){var o="x"+this._queueSeq++;e.originalUrl=e.url,e.httpEaseResponseQ=this.$q.defer(),e.httpEaseResponseQ.promise.finally((function(){e.completedAt=(new Date).getTime()})),this._queue[o]=e,n.resolve()}return n.promise},e.prototype.getHttpInterceptor=function(){var e=this,t=function(t){return function(n){var r=n.config||n;return e.isDebouncable(r)?t(r,n):e.$q.when(n)}};return{request:t((function(t){return t.cache?t:e.enqueue(t).then((function(e){return void 0===e?t:i.extend(t,{method:"JSONP",cache:{get:function(){return e}}})}))})),responseError:function(t){var n=t.config;return n.httpEaseResponseQ&&n.httpEaseResponseQ.resolve([t.status,JSON.parse(JSON.stringify(t.data)),{}]),e.$q.reject(t)},response:t((function(t,n){return t.httpEaseResponseQ&&t.httpEaseResponseQ.resolve([n.status,void 0===n.data?void 0:JSON.parse(JSON.stringify(n.data)),{}]),e.$q.when(n)}))}},e.prototype.isDebouncable=function(e){return o.a.features.httpEase&&"GET"===e.method&&new RegExp("^(http.+)?(/learn/api/.*)$").test(e.url)},e.prototype.isServableBy=function(e,t){if(!(e.method===t.method))return null;var n,r,o=(n=function(e){var t=[];return i(e).keys().sortBy().value().forEach((function(n){"expand"!==n&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))})),t.join("&")})(e.params)===n(t.params),s=(r={},((e.params||{}).expand||"").split(",").forEach((function(e){""!==e&&(r[e]=e)})),((t.params||{}).expand||"").split(",").every((function(e){return""===e||Object.prototype.hasOwnProperty.call(r,e)})));if(o&&s)return this.$log.debug("Eased "+t.url,e,t),function(e){return e};this.$log.warn('Concurrent Requests Captured - "'+t.method+" "+t.url+'" (with different parameters). Please consider to merge them for performance')},e.$inject=["$q","$log"],e}();e=r.module(s,["ng"]);o.a.features.learnApiCaching||e.config(["$httpProvider",function(e){e.interceptors.push(["$injector",function(e){return e.instantiate(u).getHttpInterceptor()}])}])},cacA:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("wHJ2"),i=n("Qbdf"),o=n("X455"),s=n("0JpG"),a=n("TnpK"),u=n("nmzr"),c="ultra.base.messages.routes";r.module(c,[i.b,o.a,a.b]).config([a.c,i.c,o.b,function(e,t,r){var a,c;e.peekState("create-message",{url:"/create?courseId&{allowReplies:bool}",resolve:(a={},a[i.d]=t.resolve,a[o.c]=r.resolve,a),require:function(){return Promise.all([n.e(0),n.e(30),n.e(33),n.e(50)]).then(n.bind(null,"BrlV"))},pageTitle:"components.directives.message.newMessage"}).peekState("edit-message",{url:"/edit/:conversationId?courseId&offset&count",require:function(){return Promise.all([n.e(0),n.e(30),n.e(33),n.e(50)]).then(n.bind(null,"BrlV"))},pageTitle:"components.directives.message.message"}).peekState(u.CourseRoutes.COURSE_MESSAGE,{url:"/message?courseId&recipientIds&conversationPerRecipient",onExit:["$rootScope","$stateParams",function(e,t){var n,r;n=e,r=t.courseId,n.$broadcast("bb-message-refresh",r)}],resolve:(c={},c[o.c]=r.resolve,c.translations=[s.serviceName,function(e){return e.loadBundle("features/base/messages/base-messages")}],c),require:function(){return Promise.all([n.e(0),n.e(30),n.e(33),n.e(50)]).then(n.bind(null,"BrlV"))},pageTitle:"base.messages.newMessage"})}])},cwoR:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.base.system-content-market.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("system-content-market",{url:"/systemcontentmarket",require:function(){return Promise.all([n.e(64),n.e(622)]).then(n.bind(null,"tcBX"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/system-content-market/system-content-market"),t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])}]},panelClass:"full",pageTitle:"base.systemContentMarket.title",params:{mode:null}})}])},d2bc:function(e,t,n){"use strict";var r;!function(e){e.ModifyGradebook="course.gradebook.MODIFY",e.ModifyItemDueDate="course.gradebook-item.duedate.MODIFY",e.ViewAttempts="course.gradebook.attempts.VIEW",e.ViewGradebookMetaData="course.gradebook-metadata.VIEW",e.ViewGrades="course.gradebook-grades.VIEW",e.ExportGradebookData="course.gradebook-data.export.EXECUTE",e.DeanonymizeGrades="course.gradebook-deanonymize.EXECUTE",e.EnterFeedback="course.gradebook-grades.feedback.EXECUTE",e.AllGrading="course.gradebook-grades.EXECUTE",e.Observe="observer.gradebook.VIEW"}(r||(r={})),t.a=r},d7QB:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return s})),n.d(t,"serviceName",(function(){return a})),n.d(t,"IntegrationEventEmitterService",(function(){return u})),n.d(t,"Service",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("N7x3"),s="ultra.components.services.event-emitter",a="integration-event-emitter",u=function(){function e(){var e=this;this.emitIntegrationEvent=function(t){t.originalEvent||(t.originalEvent=t.originalEvent||{}),t.originalEvent.manualFireFlag||(e._triggerForceClick(t.target),t.originalEvent.manualFireFlag=!0)},this.addIntegrationEventClickListener=function(t){return t.on("click",e.emitIntegrationEventOnClickHandler),function(){t.off("click",t.selector,e.emitIntegrationEventOnClickHandler)}},this.emitIntegrationEventOnClickHandler=function(t){return e.emitIntegrationEvent(t)}}return e.prototype._triggerForceClick=function(e){i.element(e).trigger(o.a.integrationForceClick)},e}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(u);i.module(s,[]).service(a,u)},d8yC:function(e,t,n){"use strict";function r(e){var t=[],n=0;e.forEach((function(e,r){n+=Math.floor(e),t.push({integer:Math.floor(e),remainder:e-Math.floor(e),index:r})}));var r=100-n;if(r>0){t.sort((function(e,t){return t.remainder-e.remainder}));for(var i=0;r>0;)t[i].integer>0||t[i].remainder>0?(t[i].integer+=1,i++,r-=1):i++,i===t.length&&(i=0);t.sort((function(e,t){return e.index-t.index}))}return t.map((function(e){return e.integer}))}function i(e,t){var n=e.toString(),r=n.indexOf(".");if(r>0&&n.length-r-1>t){var i=n.slice(0,r+t+1);return parseFloat(i)}return e}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},dtd2:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Outline=new t("outline"),t.Inline=new t("inline"),t}(n.n(i).a);t.a=o},e6ZA:function(e,t,n){"use strict";n.r(t);n("BfLg"),n("Ddvy"),n("OkIp"),n("dY8P"),n("r4fA"),n("juDU"),n("9RbK"),n("1dyP"),n("RB+a"),n("nsGK"),n("LNcM"),n("T4UF"),n("FNJT"),n("zhNR"),n("abLi"),n("1wt3"),n("rEGj"),n("7sec"),n("qY1S"),n("lGTS"),n("Jsos"),n("bZMm");var r=new Map,i=function(){function e(e){this.name=e,this.id="$BroadcastChannel$"+e+"$",r.has(this.id)||r.set(this.id,new Set),r.get(this.id).add(this),this.onStorage=this._onStorage.bind(this),window.addEventListener("storage",this.onStorage),this.messageChannel=new MessageChannel}return e.prototype.close=function(){window.removeEventListener("storage",this.onStorage);var e=r.get(this.id);e.delete(this),e.size||r.delete(this.id)},e.prototype._onStorage=function(e){var t=e.key,n=e.newValue;if(e.storageArea===window.localStorage&&null!==n&&t.substring(0,this.id.length)===this.id)try{var r=JSON.parse(n);this.dispatchEvent(new MessageEvent("message",{data:r}))}catch(e){this.dispatchEvent(new ErrorEvent("messageerror",{error:e,message:"Failed to deserialize incoming message."}))}},e.prototype.postMessage=function(e){var t=this;e=JSON.stringify(e);var n=""+this.id+Date.now()+"$"+Math.random();window.localStorage.setItem(n,e),setTimeout((function(){return window.localStorage.removeItem(n)}),500),r.get(this.id).forEach((function(n){n!==t&&n.dispatchEvent(new MessageEvent("message",{data:JSON.parse(e)}))}))},Object.defineProperty(e.prototype,"onmessage",{get:function(){return this.messageChannel.port1.onmessage},set:function(e){this.messageChannel.port1.onmessage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onmessageerror",{get:function(){return this.messageChannel.port1.onmessageerror},set:function(e){return this.messageChannel.port1.onmessageerror=e},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.messageChannel.port1.addEventListener.apply(this.messageChannel.port1,e)},e.prototype.removeEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.messageChannel.port1.removeEventListener.apply(this.messageChannel.port1,e)},e.prototype.dispatchEvent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.messageChannel.port1.dispatchEvent.apply(this.messageChannel.port1,e)},e}();"BroadcastChannel"in window||(window.BroadcastChannel=i);var o=n("5iHu"),s=n("wHJ2"),a=n("ssIi"),u=n("V8Kl"),c=n("In+A"),l=n("lEL+"),d="ultra.components.directives.animatedGif",p=function(){function e(e,t){var n=this;this.$injector=e,this.timeout=t,this.restrict="E",this.link=function(e,t,r){var i=s.element('<img role="presentation" alt="" style="width:0; height:0">');i.attr("src",t.attr("src")),t.append(i),n.timeout((function(){t.attr("alt")&&i.attr("alt",t.attr("alt"))}),e,0,!1);var o=function(){i.off("load",o),i.attr("src",""),i.addClass("animated-gif"),n.timeout((function(){i.removeAttr("style"),i.attr("src",t.attr("src"))}),e,250,!1)};i.on("load",o)}}return e.$inject=["$injector",l.b],e}();s.module(d,[l.a]).directive("bbAnimatedGif",["$injector",function(e){return e.instantiate(p)}]);var m=n("jciN"),f=(n("4MCF"),n("p95z"),n("NI+y")),h=n("5MwF"),g=n("Qbdf"),v=n("YzQO"),b=n("pjml"),y=n("w9mJ"),S=n("myse"),C="ultra.bb.angulartics",w=function(e){},k=function(e,t){};s.module(C,["angulartics","angulartics.scroll",b.Q,y.a,g.b]).config(["$analyticsProvider",function(e){e.registerPageTrack((function(e){w(e)})),e.registerEventTrack((function(e,t){k(e,t)})),o.fn.extend({waypoint:function(){return this.each((function(){o(this).triggerHandler("scrollby")}))}})}]).run(["$timeout",b.b.serviceName,y.b,g.e,function(e,t,n,r){var i=n.getQueue("telemetry"),a=1e3;function u(n){i.enqueue((function(){return e((function(){return f.b.addHistory(n),t.$create(n)}),a,!1)}))}function c(){return r.course?{id:r.course.id,uuid:r.course.uuid,batchUid:r.course.batchUid,ultraStatus:r.course.ultraStatus}:null}function l(e){if(e){if("{"===e[0])try{return JSON.parse(e)}catch(e){}return{value:e}}}Object(S.subscribeToFramework)("UltraTelemetry",(function(e,t){e===S.AnalyticsEventTypes.CLICK_EVENT&&u({action:"click",analyticsId:t.analyticsId,url:document.URL,applicationId:h.a.telemetryAppId,course:c()})})),w=function(e){u({action:"pageview",analyticsId:e,url:document.URL,applicationId:h.a.telemetryAppId,course:c(),screenDimension:{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}})},k=function(e,t){!t.id||"click"!==t.eventType&&"scrollby"!==t.eventType||u({action:t.eventType,analyticsId:t.id,url:document.URL,context:l(t.context),applicationId:h.a.telemetryAppId,course:c()})},o(document).on("click",(function(e){var t=s.element(e.target);if(!Object(v.d)(t)){var n=Object(v.b)(t)||Object(v.c)(t.parent());if(!n)return;var r=l(Object(v.a)(t));u({action:"click",analyticsId:n,url:document.URL,context:r,applicationId:h.a.telemetryAppId,course:c()})}}))}]);var I=n("/KQw"),T=n("lmMM"),E=n("0JpG"),$="ultra.components.directives.dir",P=function(){function e(e){var t=this;this.bbLocalize=e,this.restrict="A",this.link=function(e,n,r){e.$watch("locale",(function(){r.attr=r.attr||"dir",r.rtl=r.rtl||"rtl",r.ltr=r.ltr||"ltr",t.bbLocalize.isRTL(e)?n.attr(r.attr,r.rtl):n.attr(r.attr,r.ltr)}))}}return e.$inject=[E.serviceName],e}();s.module($,[]).directive("bbDir",["$injector",function(e){return e.instantiate(P)}]);var A=n("Xq/A"),O=n("07uq"),_=n("Us01"),D=n("t3AZ"),x=n("J0Qq"),R=n("D57K"),M="ultra.directives.bbTime",N=function(){function e(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}return e.prototype.compile=function(e){var t=this,n=e.html();return function(e,r,i){var o,s=function(n){var o=t.bbLocalize.getFormatEnum(E.ILocaleTimeFormat,i.format)||E.ILocaleTimeFormat.Short;if("true"===i.epoch){var s=new Date(0);s.setUTCSeconds(n),n=s}var a=function(e){"bb-time"===r.prop("tagName").toLowerCase()?r.replaceWith(e):r.html(e)};null==n?a(""):t.bbLocalize.formatTime(n,o,e).then(a)};"true"===i.autoUpdate?i.$observe("bbTime",(function(){o=new Date(t.$parse(i.bbTime)(e)),s(o)})):(o=t.$parse(n)(e)||new Date(t.$parse(i.bbTime)(e)),s(o))}},e.$inject=["$parse",E.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(R.__extends)(t,e)}(N);s.module(M,[E.moduleName]).directive("bbTime",["$injector",function(e){return e.instantiate(N)}]);var j=n("UioO"),L="ultra.directives.bbNumber",U=function(){function e(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}return e.prototype.compile=function(e){var t=this,n=e.html();return function(e,r,i){var o=t.$parse(n)(e);t.bbLocalize.formatNumber(o,e).then((function(e){"bb-number"===r.prop("tagName").toLowerCase()?r.replaceWith(e):r.html(e)}))}},e.$inject=["$parse",E.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(R.__extends)(t,e)}(U);s.module(L,[E.moduleName]).directive("bbNumber",["$injector",function(e){return e.instantiate(U)}]);var G=n("Oyr+"),F=n("bd9L"),B=n("pIXs"),q=n("43zP"),H=n("aD4H"),V="ultra.directives.saveForm",z=function(){function e(e,t){var n=this;this.scope=e,this.$q=t,this.queuedSave=!1,e.editMode?(e.$broadcast("bb-save-button",F.a.Saved),this.autoSaveState=q.a.Saved):this.autoSaveState=q.a.NotSaved,e.$on("bb-autosave-form",(function(t,r,i){switch(e.$broadcast("bb-save-button",r,i),r){case F.a.Change:n.autoSaveState=q.a.NotSaved;break;case F.a.Saving:n.autoSaveState=q.a.Saving;break;case F.a.Saved:n.autoSaveState=q.a.Saved;break;case F.a.SaveFailure:case F.a.ValidationFailure:}}))}return e.prototype.validate=function(){return this.scope.validate()&&this.scope.baseForm&&this.scope.baseForm.$valid},e.prototype.save=function(){var e=this;if(this.validate()){if(this.savePromise)this.queuedSave||(this.queuedSave=!0,this.savePromise=this.savePromise.finally((function(){return e.savePromise=null,e.queuedSave=!1,e.save()})));else{this.autoSaveState=q.a.Saving;var t=this.scope.save();this.savePromise=t.then((function(t){return e.autoSaveState=q.a.Saved,t}))}return this.savePromise}},e.prototype.saveClicked=function(){var e=this;if(this.autoSaveState===q.a.NotSaved)return this.save().then((function(){e.scope.$emit("autosave-button-click",{target:"save"}),e.scope.showAlertMessage&&e.scope.showAlertMessage()}));this.scope.$emit("autosave-button-click",{target:"save"})},e.prototype.cancelClicked=function(){var e=this;if(this.scope.cancel){var t=this.scope.cancel();t?t.then((function(){e.scope.$emit("autosave-button-click",{target:"cancel"})})):this.scope.$emit("autosave-button-click",{target:"cancel"})}},e.prototype.deleteClicked=function(){var e=this;if(this.scope.delete){var t=this.scope.delete();t?t.then((function(){e.scope.$emit("autosave-button-click",{target:"delete"})})):this.scope.$emit("autosave-button-click",{target:"delete"})}},e.prototype.mouseDown=function(){this.scope.$emit("bb-autosave-interrupt-timer"),this.scope.$emit("autosave-button-click",{target:"mouseDown"})},e}(),K=function(){function e(e){var t=this;this.$q=e,this.transclude=!0,this.restrict="E",this.scope={save:"&",cancel:"&?",validate:"&",delete:"&?",canDelete:"=",deleteConfirmationResourceType:"@?",choices:"=?",editMode:"=",hideFooter:"=",baseForm:"=?",delayAutosave:"&?",displayDeleteAfterSaving:"&?",debounceSaveDestination:"&?",showAlertMessage:"&?",analyticsIdTagPrefix:"@"},this.link=function(e,n){e.saveForm=new z(e,t.$q)},this.template=H}return e.$inject=["$q"],e}();s.module(V,[F.c,B.a]).directive("bbSaveForm",["$injector",function(e){return e.instantiate(K)}]);var J=n("gZo5"),W="ultra.services.security",Q="xsrf",Y="X-Blackboard-XSRF",Z="xsrf-token-changed",X=function(){function e(e,t){var n=this;this.$rootScope=e,this.crossWindowMessaging=t,this.xsrfCallbacks=new Set,e.$on(Z,(function(e,t){return n.updateToken(t)})),e.$on("$destroy",(function(){n.xsrfCallbacks.clear()}))}return e.prototype.registerXsrfCallback=function(e){this.xsrfCallbacks.add(e),this.token&&this.invokeXsrfCallback(e)},e.prototype.unregisterXsrfCallback=function(e){return this.xsrfCallbacks.delete(e)},e.prototype.getToken=function(){return this.token},e.prototype.updateToken=function(e){var t=this;return this.token===e?this.token:(this.token=e,this.xsrfCallbacks.forEach((function(e){return t.invokeXsrfCallback(e)})),this.crossWindowMessaging.postMessage(Z,this.token),this.token)},e.prototype.invokeXsrfCallback=function(e){try{e(this.token)}catch(e){}},e.$inject=["$rootScope",J.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(R.__extends)(t,e)}(X);s.module(W,[J.a]).service(Q,X);var ee=n("Fvsw"),te=n("fYJU"),ne=n("Si89"),re=n("t6zR"),ie=n("QaOk"),oe=n("Y88D"),se=n("FR7u"),ae=n("+g6d"),ue=n("RDfZ"),ce=n("V17J"),le=n("tcaZ"),de=n("V6ed"),pe=n("P2dS"),me=n("g66W"),fe=n("TnpK"),he=n("w9Zy"),ge=n("SBFF"),ve="ultra.components.directives.bbGuidance",be=/[_-]/g;Object(c.registerComponentType)({name:c.BB_GUIDANCE_FTUE_TYPE,priority:c.BB_GUIDANCE_PRIORITY_NUMBER});var ye=function(){function e(e,t,n,r){var i=this;this.ultraState=e,this.offCanvas=t,this.timeout=n,this.$document=r,this.require="^bbFirstTimeContainer",this.replace=!0,this.restrict="E",this.scope={componentKey:"@",pageContainerSelector:"@?",alwaysShow:"@",displayPriority:"&?",broadcastGuidanceHideEvent:"@?",onGuidanceEnabledEvent:"@?",disableHideInPanelState:"@?",forceShowInPanelState:"@?"},this.transclude={title:"?bbGuidanceTitle"},this.template=ge,this.link=function(e,t,n,r){if(!e.componentKey)throw new Error("'component-key' attribute required in bb-guidance");e.componentKey=me.a(e.componentKey,be);var s=t.closest(".bb-offcanvas-panel").attr("data-base-state-name"),a=!!e.onGuidanceEnabledEvent,u=new c.DefaultGuidanceComponent(t.get(0),c.BB_GUIDANCE_FTUE_TYPE,e.componentKey,r.manager,r.firstTimeHelper,c.guidanceConnector,e.displayPriority&&e.displayPriority(),a);u.setShouldShow((function(){var n=o(t).parent().is(":visible"),i=!!e.pageContainerSelector&&o(e.pageContainerSelector).is(":visible");return n||i?r.firstTimeHelper.shouldShow(u.componentKey,s,e.$eval(e.alwaysShow)):Promise.resolve(!1)})),e.isShown=u.shown,u.onShownChanged((function(t){e.$applyAsync((function(){e.isShown=t}))})),u.registerToManager();var l,d=function(t){o(t.target).parents().addBack();var n=!!e.disableHideInPanelState&&i.ultraState.includes(e.disableHideInPanelState);!e.isShown||i.ultraState.transition||n||(u.hide(),i.$document[0].removeEventListener("click",d,!0),e.broadcastGuidanceHideEvent&&e.$root.$broadcast(e.broadcastGuidanceHideEvent))},p=function(){u.showComponent(),i.$document[0].addEventListener("click",d,!0)};l=null,e.onGuidanceEnabledEvent?(l=e.$root.$on(e.onGuidanceEnabledEvent,(function(){p()})),l=e.$root.$on("show-guidance-component",(function(){i.timeout((function(){p()}),e,600)})),r.firstTimeHelper.shouldShow("predict.wizard").then((function(t){var n=!!e.forceShowInPanelState&&i.ultraState.includes(e.forceShowInPanelState);t&&!n||p()}))):i.$document[0].addEventListener("click",d,!0),e.$on("$destroy",(function(){u.deregisterFromManager(),i.$document[0].removeEventListener("click",d,!0),l&&l()}))},this.ultraState=e}return e.$inject=[fe.d,he.e,l.b,"$document"],e}();s.module(ve,[fe.b,le.a]).directive("bbGuidance",["$injector",function(e){return e.instantiate(ye)}]);var Se="ultra.components.directives.guidanceTarget",Ce=function(){function e(e,t,n){this.element=e,this.componentKey=t,this.containerController=n,this.manager=n.manager}return Object.defineProperty(e.prototype,"multiTargetSupport",{get:function(){return this.containerController.firstTimeHelper.hasMultiTargetSupport(this.componentKey)},enumerable:!0,configurable:!0}),e.prototype.registerToManager=function(){this.manager&&(this.hideImpl(),this.manager.registerTarget(this))},e.prototype.deregisterToManager=function(){this.manager&&this.manager.deregisterTarget(this)},e.prototype.onShown=function(){this.showImpl()},e.prototype.onHidden=function(){this.hideImpl()},e.prototype.showImpl=function(){this.element.addClass("is-guided")},e.prototype.hideImpl=function(){this.element.removeClass("is-guided")},e}(),we=function(){this.require="^bbFirstTimeContainer",this.restrict="A",this.link=function(e,t,n,r){if("false"!==n.showGuidanceTarget){var i=n.componentKey,o=n.componentKeyList,s=[],a=function(e,n){var r=new Ce(t,e,n);r.registerToManager(),s.push(r)};if(!i&&!o)throw new Error("'component-key' or 'component-key-list' attribute required in bb-guidance-target");if(o)var u=e.$watch(o,(function(e){e&&e.length>0&&(e.forEach((function(e){e=me.a(e,be),a(e,r)})),u())}));if(i&&(i=me.a(i,be),a(i,r)),"true"!==n.keepGuidanceWhenFocusout){var c=function(){e.$root.$broadcast("hide-ftue-component",i)};t.on("focusout",c),t.on("keypress",c),e.$on("$destroy",(function(){t.off("focusout",c),t.off("keypress",c)}))}e.$on("$destroy",(function(){s.forEach((function(e){return e.deregisterToManager()}))}))}}};s.module(Se,[le.a]).directive("bbGuidanceTarget",["$injector",function(e){return e.instantiate(we)}]);var ke=n("XseH"),Ie=n("iVgd"),Te=n("/qpZ"),Ee="ultra.components.directives.keyHideFtue",$e=function(){this.restrict="A",this.link=function(e,t,n){var r=n.bbKeyHideFtue;if(!r)throw new Error("'bb-key-hide-ftue' attribute should have value");var i=function(){e.$root.$broadcast("hide-ftue-component",r)};t.on("focusout",i),t.on("keypress",i),e.$on("$destroy",(function(){t.off("focusout",i),t.off("keypress",i)}))}};s.module(Ee,[]).directive("bbKeyHideFtue",["$injector",function(e){return e.instantiate($e)}]);var Pe=n("cMqb"),Ae=n("A4xO"),Oe=n("+4Px"),_e="ultra.directives.accessibility.focusPrev";var De=function(){this.restrict="A",this.link=function(e,t,n){var r="true"===n.bbFocusPrevOneTimeOnly;!function(e,t,n){e.on("keydown.focusPrev",(function(r){if(r.keyCode===Oe.u&&r.shiftKey&&t){var i=s.element(t);i.length>=1&&-1!==i.prop("tabindex")&&(i.first().focus(),r.preventDefault(),n&&e.off("keydown.focusPrev"))}}))}(t,n.bbFocusPrev,r)}};s.module(_e,[]).directive("bbFocusPrev",["$injector",function(e){return e.instantiate(De)}]);var xe=n("i8dz"),Re=n("K3JI"),Me=n("GbAM"),Ne=n("vhkR"),je=n("OvxF"),Le=n("TB6y"),Ue=(n("zJ62"),n("ZMjE")),Ge="ultra.directives.contentImportStatusBar",Fe=function(){function e(e,t,n,r,i,o,a,u,c){var l=this;this.$scope=e,this.$rootScope=t,this.element=n,this.$q=r,this.CourseModel=i,this.ultraState=o,this.context=a,this.bbLocalize=u,this.contextCourse=c,this.identifyCourse().then((function(t){l.course=t,l.baseState=o.current.name,n.detach().appendTo(s.element(".side-panel-content")),e.$on("$destroy",(function(){s.element(".side-panel-content > "+n.get(0).tagName).length>0&&s.element(".side-panel-content > "+n.get(0).tagName).remove()})),e.$watch("taskId",(function(){e.taskId&&l.getItemsCount().then((function(e){l.notCarriedForwardItemsCount=e}))}))}))}return e.prototype.identifyCourse=function(){return this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()},e.prototype.confirm=function(){var e=this,t="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(t,"false").then((function(){e.$scope.display=!1}))},e.prototype.undo=function(){var e=this,t="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(t,"true").then((function(){e.$scope.display=!1}))},e.prototype.goToImportReport=function(){this.ultraState.goPeekState("content-manage.import-report",{id:this.$scope.taskId})},e.prototype.hideStatusBar=function(){return-1!==this.ultraState.current.name.indexOf(this.baseState)&&this.ultraState.current.name.length>this.baseState.length},e.prototype.getItemsCount=function(){return this.course.getImportCopyTaskStatus(this.$scope.taskId).then((function(e){var t=e.$response.data.conversionReportTORest;return t?t.filter((function(e){return!b.n.ConversionReportStatus.Success.isEqualTo(e.ultraConversionStatus)})).length:0}))},e.$inject=["scope","$rootScope","element","$q",b.o.serviceName,fe.d,ee.b,E.serviceName,g.e],e}(),Be=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=Ue,this.scope={display:"=",taskId:"=",courseId:"@?"},this.link=function(e,n){e.contentImportStatusBarController=t.$injector.instantiate(Fe,{scope:e,element:n})}}return e.$inject=["$injector"],e}();s.module(Ge,[ee.a,E.moduleName,b.Q,fe.b]).directive("bbContentImportStatusBar",["$injector",function(e){return e.instantiate(Be)}]);var qe=n("yA26"),He="ultra.components.directives.ultraState.peekSref",Ve=function(){function e(e,t,n,r){var i=this;this.$parse=e,this.uiSrefDirective=t,this.ultraState=n,this.context=r,this.restrict=this.uiSrefDirective[0].restrict,this.scope=!0,this.require=this.uiSrefDirective[0].require,this.link=function(e,t,n,r){var o=i.$parse(n.bbPeekSref)(e)||n.bbPeekSref,s=t.closest("[data-base-state-name]").data("baseStateName")||i.context.basePage;i.ultraState.getPeekStateName(o,s).then((function(o){n.uiSref=o,i.uiSrefDirective[0].compile(t,n,void 0)(e,t,n,r)}))}}return e.$inject=["$parse","uiSrefDirective",fe.d,ee.b],e}();s.module(He,["ui.router",ee.a,fe.b]).directive("bbPeekSref",["$injector",function(e){return e.instantiate(Ve)}]);var ze="ultra.directives.preventClick",Ke=function(){function e(e,t){var n=this;this.$parse=e,this.$rootScope=t,this.priority=101,this.restrict="A",this.compile=function(e,t){var r=n.$parse(t.bbPreventClickIf);return{pre:function(e,t){t.on("click",(function(t){function i(){if(r(e,{$event:t}))return t.stopImmediatePropagation(),t.preventDefault(),!1}n.$rootScope.$$phase?e.$evalAsync(i):e.$apply(i)}))}}}}return e.$inject=["$parse","$rootScope"],e}();s.module(ze,[]).directive("bbPreventClickIf",["$injector",function(e){return e.instantiate(Ke)}]);var Je=n("yC9S"),We=n("bd3f"),Qe="ultra.components.directives.accessibility.readInfo",Ye=function(){function e(e,t,n,r){var i=this;this.scope=e,this.element=t,this.attrs=n,this.timeout=r,this.message="",this.alertMessage="",Je.b.OnRootScope(e,"read-info-directive",(function(t,n){i.message=n,r((function(){i.message=""}),e,1e3)})),Je.b.OnRootScope(e,"read-info-directive-alert",(function(t,n,o){void 0!==o?(i.alertMessage="",r((function(){i.alertMessage=n}),e,o)):(i.alertMessage=n,r((function(){i.alertMessage=""}),e,1e3))}))}return e.$inject=["scope","element","attrs",l.b],e}(),Ze=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="A",this.link=function(e,t,r){t.append(n.$compile(We)(e)),e.readInfo=n.$injector.instantiate(Ye,{scope:e,element:t,attrs:r})}}return e.$inject=["$injector","$compile"],e}();s.module(Qe,[l.a]).directive("bbReadInfo",["$injector",function(e){return e.instantiate(Ze)}]);n("P2rh");var Xe=n("7/0s"),et="ultra.components.directives.accessibility.skipLink",tt=function(){this.restrict="E",this.scope={bbSkipLinkTarget:"@",bbSkipLinkFocusNext:"@?"},this.template=Xe,this.link=function(e,t,n){t.find(".skip-link").on("click",(function(){var e=t.closest(".bb-offcanvas-panel");e.length||(e=t.closest("#site-wrap"));var r=e.find(n.bbSkipLinkTarget).first();r.focus(),r.is(document.activeElement)||null!=r.attr("tabindex")||(r.attr("tabindex","-1"),r.focus())}))}};s.module(et,[]).directive("bbSkipLink",["$injector",function(e){return e.instantiate(tt)}]);var nt,rt,it,ot,st=n("TAnh"),at=n("YOs/"),ut=n("Dwp2"),ct=n("fGgA"),lt=n("4HBD"),dt=n("3vti"),pt=n("cFWd"),mt=n("HDxW"),ft=n("zXZW"),ht=n("nsX6"),gt=n("OcoR"),vt=n("td+C"),bt=n("5LAh"),yt=n("gSji"),St=(n("J++8"),n("e6jQ")),Ct=new(function(){function e(e,t){var n=this;this.integrationService=e,this.portalManager=t,this.sendNewPortal=function(e){n.integrationService.sendEventMessage({type:yt.i,eventType:yt.cb.PortalNew,portalId:e.portalId,selector:e.selector,selectorData:e.selectorData},e.owningIntegrationId)},this.sendRemovedPortal=function(e){n.integrationService.sendEventMessage({type:yt.i,eventType:yt.cb.PortalRemove,portalId:e.portalId,selector:e.selector,selectorData:e.selectorData},e.owningIntegrationId)},this.sendCallbackPortal=function(e){n.integrationService.sendMessage({type:yt.f.PortalCallback,callbackId:e.callbackId,portalId:e.portalId,event:e.event},e.owningIntegrationId)},this.sendRenderFailure=function(e){e.requestingIntegrationId?n.integrationService.sendMessage({type:yt.F,portalId:e.portalId,status:yt.p.Failure,error:e.error,errorMessage:e.errorMessage},e.requestingIntegrationId):console.warn("Unable to send error to targetless portal")},this.onPortalEvent=function(e,t){switch(e){case yt.bb.NewPortal:n.sendNewPortal(t);break;case yt.bb.RemovedPortal:n.sendRemovedPortal(t);break;case yt.bb.CallbackPortal:n.sendCallbackPortal(t);break;case yt.bb.FailedValidationPortal:n.sendRenderFailure(t)}},this.updatePortal=function(e,t){if(e){var r=e.portalId,i=e.contents;n.portalManager.updatePortal({portalId:r,contents:i,requestingIntegrationId:t.id},(function(){var e=n.portalManager.getPortalData(r).getOwningIntegrationId();if(e&&e!==t.id)return{portalId:r,error:yt.I.Authorization,errorMessage:"Portal "+r+" is already owned by "+e+" -- not allowing render from "+t.id,requestingIntegrationId:t.id}}))&&(n.portalManager.setPortalOwnership(r,t.id),n.sendRenderSuccess(t.id,r))}},this.sendRenderSuccess=function(e,t){n.integrationService.sendMessage({type:yt.F,portalId:t,status:yt.p.Success},e)}}return e.prototype.init=function(){this.integrationContainer=document.querySelector(".integration-react-container"),this.portalManager.addPortalListener(this.onPortalEvent),this.integrationService.addIntegrationMessageType(yt.G,this.updatePortal)},e.prototype.generateUniqueDomElement=function(){var e=St.b(),t=document.createElement("div");return t.id=e,this.integrationContainer.appendChild(t),t},e.prototype.getIntegrationContainer=function(){return this.integrationContainer},e}())(vt.a,bt.e),wt=n("ERkP"),kt=n("7nmT"),It=n("MC1S"),Tt=n("wWlP"),Et=n("caKH"),$t=function(e){var t=e.integrationId,n=e.contents,r=e.portalId;return wt.createElement(bt.d,{portalType:At,initialOwningIntegrationId:t,initialContents:n,portalId:r})},Pt=n("8unJ"),At="modal",Ot=((nt={})[yt.V.Small]=It.DialogType.small,nt[yt.V.Large]=It.DialogType.large,nt[yt.V.Medium]=It.DialogType.normal,nt),_t=new(function(){function e(e,t,n,r){var i=this;this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.portalManager=r,this.modalWhitelist=new Map,this.isValidModalElement=function(e,t){if(!yt.M.has(e.props.width))return console.warn("Invalid prop `width` of value "+e.props.width+" supplied to "+e.tag+", expected one of ["+Object.values(yt.L)+"]."),!1;if(!e.children)return console.warn("Children are needed for "+yt.r.Modal+", but no value for `children` was given."),!1;if("string"==typeof e.children)return console.warn("Incorrect children value: expected `Array` but received `string`."),!1;var n=[yt.r.ModalHeader,yt.r.ModalBody,yt.r.ModalFooter];if(e.children.length!==n.length)return console.warn("Incorrect number of children elements: expected "+n.length+", but received "+e.children.length+"."),!1;for(var r=0;r<n.length;r++){var o=e.children[r];if(o.tag!==n[r])return console.warn("Incorrect order of children: position "+r+" expected "+n[r]+", but received "+o.tag+"."),!1;if(!i.componentManager.isValidComponent({componentContext:At,componentName:n[r],contents:o,integrationId:t}))return!1}return!0},this.onPortalModal=function(e,t){if(i.isValidRequestParameters(e,t)){var n=Tt.a.length()>0,r=Et.ModalManager.getInstance().isModalDisplaying();if(i.componentManager.overMaxComponents(At)||r||n)return console.error("A modal is already open; not opening another one."),void i.sendModalMessage(t,null,e.modalId,yt.p.Failure,yt.s.ModalAlreadyOpenError,"A modal is already open; not opening another one.");if(i.portalManager.validateContents({portalType:At,contents:e.contents,integrationId:t.id}).passed){i.modalId=e.modalId,i.owningIntegration=t;var o=St.b();i.currentModal=i.integrationPortalService.generateUniqueDomElement();var s={owningIntegrationId:t.id,portalId:o,element:i.currentModal};return i.render(s,e.contents).then((function(){i.sendModalMessage(t,s.portalId,i.modalId,yt.p.Success)}))}i.sendModalMessage(t,null,e.modalId,yt.p.Failure,yt.s.FailedComponentValidationError,"Component validation failed; not rendering "+yt.r.Modal+".")}},this.isValidRequestParameters=function(e,t){return e.type&&e.type===yt.K.ModalNew?e.modalId?!!e.contents||(console.warn("Not a valid new modal request, `contents` were not provided."),i.sendModalMessage(t,null,e.modalId,yt.p.Failure,yt.s.MissingContentsError,"Not a valid new modal request, `contents` were not provided."),!1):(console.warn("Not a valid new modal request, `modalId` must be a unique non-empty value."),i.sendModalMessage(t,null,e.modalId,yt.p.Failure,yt.s.InvalidIdError,"Not a valid new modal request, `modalId` must be a unique non-empty value."),!1):(console.warn("Not a valid new modal request, `type` must be "+yt.K.ModalNew+"."),i.sendModalMessage(t,null,e.modalId,yt.p.Failure,yt.s.InvalidRequestTypeError,"Not a valid new modal request, `type` must be "+yt.K.ModalNew+"."),!1)},this.render=function(e,t){return new Promise((function(n){kt.render(wt.createElement(Pt.Locale,{babelfishInstance:i.bbLocalize.intl,babelfishFormatInstance:i.bbLocalize.frmt,locale:i.bbLocalize.getLocale(null)},wt.createElement($t,{integrationId:e.owningIntegrationId,portalId:e.portalId,contents:t})),e.element,(function(){n()}))}))},this.onPortalModalClose=function(e,t){return i.owningIntegration&&i.owningIntegration.id!==t.id?(console.warn("The integration "+t.id+" does not own the modal of "+e.modalId+"; not closing modal"),void i.sendModalCloseResponseMessage(t,e.modalId,yt.p.Failure,yt.s.WrongOwnerError,"The integration "+t.id+" does not own the modal of "+e.modalId+"; not closing modal")):i.modalId!==e.modalId?(console.warn("No modal has an id of "+e.modalId),void i.sendModalCloseResponseMessage(t,e.modalId,yt.p.Failure,yt.s.ModalNotFoundError,"No modal has an id of "+e.modalId)):void i.closePortalModal(e.modalId,t)},this.closePortalModal=function(e,t){i.currentModal&&(kt.unmountComponentAtNode(i.currentModal),i.sendModalCloseResponseMessage(t||i.owningIntegration,e||i.modalId,yt.p.Success))},this.sendModalMessage=function(e,t,n,r,o,s){i.integrationService.sendMessage(Object(R.__assign)(Object(R.__assign)({type:yt.K.ModalResponse,status:r,portalId:t,modalId:n},o&&{error:o}),s&&{errorMessage:s}),e)},this.sendModalCloseResponseMessage=function(e,t,n,r,o){i.integrationService.sendMessage(Object(R.__assign)(Object(R.__assign)({type:yt.K.ModalCloseResponse,status:n,modalId:t},r&&{error:r}),o&&{errorMessage:o}),e)}}return e.prototype.init=function(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(yt.K.ModalNew,this.onPortalModal),this.integrationService.addIntegrationMessageType(yt.K.ModalClose,this.onPortalModalClose),this.initializeWhitelist()},e.prototype.initializeWhitelist=function(){var e=this;this.modalWhitelist.set(yt.r.Modal,{props:{width:!0},isValid:function(t,n){return e.isValidModalElement(t,n)},render:function(t,n,r){var i=n.width,o=Object(R.__rest)(n,["width"]),s=Ot[i];return wt.createElement(Et.UltraModalDialog,Object(R.__assign)({},o,{dialogContentProps:{type:s},hidden:!1,onDismiss:function(){return e.closePortalModal()}}),r)}}),this.modalWhitelist.set(yt.r.ModalHeader,{props:{title:!1},isValid:function(e){return e.props&&e.props.title&&"string"!=typeof e.props.title&&console.warn("Invalid prop `title` value: expected `string` but received `"+typeof e.props.title+"`, defaulting to no title."),!0},render:function(t,n,r){return wt.createElement(It.DialogHeader,Object(R.__assign)({},n,{analyticsId:"integration.modal.header",showCloseButton:!0,onDismiss:function(){return e.closePortalModal()},closeButtonAriaLabel:e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(null),key:"global.close"})}),r)}}),this.modalWhitelist.set(yt.r.ModalBody,{isValid:function(e){return!0},render:function(e,t,n){return wt.createElement("div",{key:t.key},n)}}),this.modalWhitelist.set(yt.r.ModalFooter,{isValid:function(e){return!0},render:function(e,t,n){return wt.createElement(It.DialogFooter,Object(R.__assign)({},t),n)}}),this.componentManager.addComponentType(At,1,this.modalWhitelist)},e}())(vt.a,Ct,bt.b,bt.e),Dt=n("q/wk"),xt=n("N7x3"),Rt=n("x9Ok"),Mt=n("Zwiy"),Nt=(n("09tz"),function(e){var t=e.panelType,n=e.panelTitle,r=e.integrationId,i=e.showPanel,o=e.portalId,s=e.onPanelClose,a=e.stackIndex,u=e.useCustomPadding;return wt.createElement(Mt.BbPanel,{isOpen:i,onDismiss:function(){return s(o,r)},type:t,stackIndex:a,analyticsId:"components.directives.integration.integrationPanel",excludeContentPadding:u},wt.createElement(Mt.BbPanelHeader,{title:n}),wt.createElement("div",{className:"integration-panel"},wt.createElement("div",{className:"integration-panel-contents"},wt.createElement(bt.d,{portalId:o,initialOwningIntegrationId:r,portalType:jt,skipCustomValidation:!0}))))}),jt="panel",Lt=function(e){switch(e){case yt.U.Full:return It.BbPanelType.full;case yt.U.Small:return It.BbPanelType.peek;default:return console.warn("Received unknown panel type "+e),null}},Ut=new(function(){function e(e,t,n,r){var i=this;this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.portalManager=r,this.onPortalPanel=function(e,t){var n=e.panelTitle,r=e.correlationId,o=e.useCustomPadding;if(i.componentManager.overMaxComponents(jt))return console.warn("Panel is already open; not opening another one"),void i.sendPanelMessage(t,null,yt.p.Failure,r);if(!n)return console.warn("Received a panel event without a panelTitle; not opening panel"),void i.sendPanelMessage(t,null,yt.p.Failure,r);if(null!==Lt(e.panelType)){var s=St.b();if(!i.updatePanelAttributes(e,s))return console.warn("Received a panel event without proper attributes or with a missing callback id."),void i.sendPanelMessage(t,null,yt.p.Failure,r);var a=i.integrationPortalService.generateUniqueDomElement();return a.className="integration-panel",i.currentPanelData={element:a,panelType:e.panelType,panelTitle:e.panelTitle,owningIntegrationId:t.id,portalId:s,useCustomPadding:o||!1},i.renderPanel(i.currentPanelData,!0).then((function(){i.sendPanelMessage(t,i.currentPanelData.portalId,yt.p.Success,r)}))}i.sendPanelMessage(t,null,yt.p.Failure,r)},this.updatePanelAttributes=function(e,t){var n=e.attributes;if(!n)return!0;var r={},o=Object.keys(n).filter((function(e){return!n[e]||!n[e].callbackId}));return o.length>0?(console.warn("Panel attributes ["+o.join(",")+"] are missing callbackId parameters"),!1):(Object.keys(n).forEach((function(e){var t,i=n[e];r=Object(R.__assign)(Object(R.__assign)({},r),((t={})[e]={callbackId:i.callbackId},t))})),i.panelAttributesEvents.set(t,{portalId:t,subscribedAttributes:r}),!0)},this.renderPanel=function(e,t){var n=document.getElementsByClassName("bb-offcanvas-panel").length+1,r=Lt(e.panelType);return new Promise((function(o){kt.render(wt.createElement(Pt.Locale,{locale:i.bbLocalize.getLocale(null),babelfishInstance:i.bbLocalize.intl,babelfishFormatInstance:i.bbLocalize.frmt},wt.createElement(Nt,{panelType:r,panelTitle:e.panelTitle,integrationId:e.owningIntegrationId,showPanel:t,portalId:e.portalId,onPanelClose:i.onPanelCloseAction,stackIndex:n,useCustomPadding:e.useCustomPadding})),e.element,(function(){o()}))}))},this.onPortalPanelClose=function(e,t){var n=t.id,r=i.portalManager.getPortalData(e.id);if(r){if(r.getOwningIntegrationId()===n)return i.renderPanel(i.currentPanelData,!1).then((function(){i.onPanelCloseAction(e.id,n)}));console.warn("The integration "+n+" does not own the portalId of "+e.id+"; not closing anything")}else console.warn("no panel has an id of "+e.id)},this.onPanelCloseAction=function(e,t){var n=i.portalManager.getPortalData(e);if(n){var r=yt.S.onClose,o=i.panelAttributesEvents.get(n.portalId),s=o&&o.subscribedAttributes[r],a=i.integrationService.findIntegration(t);if(i.portalManager.removePortal({portalId:e,owningIntegrationId:t}),i.removePanel(i.currentPanelData.element),i.currentPanelData=null,s&&a){var u={type:yt.f.PortalCallback,callbackId:o.subscribedAttributes[r].callbackId,portalId:n.portalId,event:r};i.integrationService.sendMessage(u,a)}}},this.sendPanelMessage=function(e,t,n,r){i.integrationService.sendMessage({type:yt.T.PanelResponse,status:n,portalId:t,correlationId:r},e)},this.panelAttributesEvents=new Map}return e.prototype.init=function(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(yt.T.PanelNew,this.onPortalPanel),this.integrationService.addIntegrationMessageType(yt.T.PanelClose,this.onPortalPanelClose),this.componentManager.addComponentType(jt,1)},e.prototype.removePanel=function(e){if(e){setTimeout((function(){kt.unmountComponentAtNode(e),e.remove()}),500)}},e}())(vt.a,Ct,bt.b,bt.e),Gt=function(e){var t=e.component,n=e.contents,r=wt.useState(t.shown),i=r[0],o=r[1];return wt.useEffect((function(){return o(t.shown),t.addListener(o),function(){t.removeListener(o)}}),[t]),i&&wt.createElement(bt.d,{portalType:Xt,initialOwningIntegrationId:t.integrationId,initialContents:n,portalId:t.portalId})},Ft=n("uFyr"),Bt=n("jGf1"),qt=n("xkx/"),Ht=((rt={})[yt.V.Small]=250,rt[yt.V.Medium]=300,rt[yt.V.Large]=500,rt),Vt=((it={})[yt.y.Light]=qt.DefaultPalette.white,it[yt.y.Dark]=qt.DefaultPalette.neutralDark,it),zt=((ot={})[yt.O.BottomLeft]=Bt.ScreenPosition.bottomLeft,ot[yt.O.BottomRight]=Bt.ScreenPosition.bottomRight,ot[yt.O.TopLeft]=Bt.ScreenPosition.topLeft,ot[yt.O.TopRight]=Bt.ScreenPosition.topRight,ot),Kt=function(e,t){var n=Ht[yt.V.Medium];return!e.isSmallBreakpoint()||Ht[t]<=n?Ht[t]:(console.warn("Requested prop `size` is greater than current breakpoint size: reducing `size` to medium breakpoint."),n)},Jt=function(e){if(e.isSmallBreakpoint())return It.DirectionalHint.bottomCenter},Wt=function(e,t){if(e.isSmallBreakpoint())return Object(Bt.getScreenPositionPoint)(Bt.ScreenPosition.bottomCenter);if(t.selector.type===yt.Q.Region){var n=zt[t.selector.value];return Object(Bt.getScreenPositionPoint)(n)}return t.targetElementFinder()},Qt=function(e){return e.isLargeBreakpoint()?yt.w.Large:e.isMediumBreakpoint()?yt.w.Medium:yt.w.Small},Yt=Object(Ft.windowResizingResponsiveComponentWrapper)((function(e){var t=e.children,n=e.hideBeak,r=e.key,i=e.notificationData,o=e.onDismiss,s=e.size,a=e.theme,u=e.UltraWindowSize,c=Wt(u,i),l=Qt(u),d=Kt(u,s),p=Vt[a],m=Jt(u);return wt.createElement(It.Callout,{key:r,target:c,onDismiss:o,calloutWidth:d,setInitialFocus:!0,isBeakVisible:!n,directionalHint:m,className:"integration-notification-"+a,backgroundColor:p,minPagePadding:l,allowDismissOnFocusTarget:!0},wt.createElement("div",{tabIndex:0},t))})),Zt=(n("Thlp"),function(){function e(e,t){var n=this;this.notificationData=e,this.guidanceManager=t,this.componentType="IntegrationNotification",this.priority=2*c.DEFAULT_PRIORITY,this.isInitialHide=!1,this._shown=!1,this.listeners=[],this.shouldShow=function(){return new Promise((function(e,t){e(!!n.notificationData.targetElementFinder())}))},this.addListener=function(e){n.listeners.push(e)},this.removeListener=function(e){var t=n.listeners.indexOf(e);-1!==t&&n.listeners.splice(t,1)},this.onShown=function(){n.setShown(!0)},this.onHidden=function(e){n.setShown(!1)},this.dispose=function(){n.listeners=[],n.guidanceManager.deregisterComponent(n)},this.componentKey="integration.notification."+e.portalId,this.notificationId=e.notificationId,this.portalId=e.portalId,this.integrationId=e.owningIntegrationId,this.data=e,this.guidanceManager.registerComponent(this),this.guidanceManager.startQueue()}return Object.defineProperty(e.prototype,"shown",{get:function(){return this._shown},enumerable:!0,configurable:!0}),e.prototype.setShown=function(e){this.shown!==e&&(this._shown=e,this.listeners.forEach((function(t){return t(e)})))},e}()),Xt="notification",en=new(function(){function e(e,t,n,r,i){var o=this;this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.ftueManager=r,this.portalManager=i,this.notificationWhitelist=new Map,this.isValidNotificationElement=function(e){return yt.W.has(e.props.size)?(e.props.theme&&!yt.z.has(e.props.theme)&&console.warn("Invalid prop `theme` of value "+e.props.theme+" supplied to "+e.tag+", expected one of ["+Object.values(yt.y)+"];\n        defaulting to "+yt.y.Light+" theme."),e.props.hideBeak&&"boolean"!=typeof e.props.hideBeak&&console.warn("Invalid prop `hideBeak` value: expected a `boolean` but received `"+typeof e.props.hideBeak+"`; defaulting to a visible beak."),!0):(console.warn("Invalid prop `size` of value "+e.props.size+" supplied to "+e.tag+", expected one of ["+Object.values(yt.V)+"]."),!1)},this.findElementByAnalyticsId=function(e){if(!e)return null;var t=document.querySelector('[data-analytics-id="'+e+'"]');return t||document.querySelector('[analytics-id="'+e+'"]')},this.createFTUEComponent=function(e,t){var n=new Zt(t,o.ftueManager),r={component:n,element:t.element};return n.addListener((function(n){if(n){if(!t.targetElementFinder())return o.closeNotification(t.portalId),void o.sendNotificationStatus(e,t.portalId,t.notificationId,yt.x.Failed);o.currentNotification=r,o.sendNotificationStatus(e,t.portalId,t.notificationId,yt.x.Visible)}else o.sendNotificationStatus(e,t.portalId,t.notificationId,yt.x.Removed)})),o.notificationMap.set(t.portalId,r),n},this.onPortalNotification=function(e,t){if(!e.selector||!yt.R.has(e.selector.type))return console.warn("Invalid selector type provided "+(e.selector&&e.selector.type)),void o.sendNotificationResponseMessage(t,null,yt.p.Failure,yt.v.InvalidSelectorError,"Invalid selector type provided "+(e.selector&&e.selector.type));if(e.selector.type===yt.Q.Region&&!yt.P.has(e.selector.value))return console.warn("Invalid selector value provided "+(e.selector&&e.selector.value)),void o.sendNotificationResponseMessage(t,null,yt.p.Failure,yt.v.InvalidSelectorError,"Invalid selector value provided "+(e.selector&&e.selector.value));if(o.portalManager.validateContents({portalType:Xt,contents:e.contents,integrationId:t.id}).passed){var n=o.getTargetElementFinder(e.selector,t);if(n){var r={element:o.integrationPortalService.generateUniqueDomElement(),portalId:St.b(),notificationId:St.b(),owningIntegrationId:t.id,targetElementFinder:n,selector:e.selector},i=o.createFTUEComponent(t,r);return o.render(i,r.element,e.contents).then((function(){o.sendNotificationResponseMessage(t,r.notificationId,yt.p.Success),o.sendNotificationStatus(t,r.portalId,r.notificationId,yt.x.Queued)}))}}else o.sendNotificationResponseMessage(t,null,yt.p.Failure,yt.v.FailedComponentValidationError,"Component validation failed; not rendering "+yt.u.Notification+".")},this.removeNotificationFromQueue=function(e){e.dispose(),o.notificationMap.delete(e.portalId)},this.onPortalNotificationClose=function(e,t){var n=o.findNotification(e.notificationId);return n?n.integrationId!==t.id?(console.warn(t.id+" does not have ownership of the current notification"),void o.sendCloseNotificationResponse(t,e.notificationId,yt.p.Failure,yt.v.NoOwnershipError,t.id+" does not have ownership of the current notification--not closing notification")):(o.currentNotification&&o.currentNotification.component.notificationId===e.notificationId?o.closeNotification():(o.removeNotificationFromQueue(n),o.sendNotificationStatus(t,n.portalId,n.notificationId,yt.x.Removed)),void o.sendCloseNotificationResponse(t,e.notificationId,yt.p.Success)):(console.warn("Notification not found"),void o.sendCloseNotificationResponse(t,e.notificationId,yt.p.Failure,yt.v.NotificationNotFoundError,"Notification not found"))},this.render=function(e,t,n){return new Promise((function(r){kt.render(wt.createElement(Pt.Locale,{babelfishInstance:o.bbLocalize.intl,babelfishFormatInstance:o.bbLocalize.frmt,locale:o.bbLocalize.getLocale(null)},wt.createElement(Gt,{component:e,contents:n})),t,(function(){r()}))}))},this.sendCloseNotificationResponse=function(e,t,n,r,i){o.integrationService.sendMessage(Object(R.__assign)(Object(R.__assign)({type:yt.N.NotificationCloseResponse,notificationId:t,status:n},r&&{error:r}),i&&{errorMessage:i}),e)},this.sendNotificationResponseMessage=function(e,t,n,r,i){o.integrationService.sendMessage(Object(R.__assign)(Object(R.__assign)({type:yt.N.NotificationResponse,status:n,notificationId:t},r&&{error:r}),i&&{errorMessage:i}),e)},this.sendNotificationStatus=function(e,t,n,r){o.integrationService.sendMessage({type:yt.N.NotificationStatus,status:r,notificationId:n,portalId:t},e)},this.closeNotification=function(e){if(o.currentNotification||e){var t=o.currentNotification;e&&(t=o.notificationMap.get(e)),t&&(kt.unmountComponentAtNode(t.element),setTimeout((function(){o.removeNotificationFromQueue(t.component),o.currentNotification=void 0}),500))}},this.notificationMap=new Map}return e.prototype.init=function(e){var t=this;this.bbLocalize=e,this.integrationService.addIntegrationMessageType(yt.N.NotificationNew,this.onPortalNotification),this.integrationService.addIntegrationMessageType(yt.N.NotificationClose,this.onPortalNotificationClose),this.notificationWhitelist.set(yt.u.Notification,{props:{size:!0,theme:!1,hideBeak:!1,directionalHint:!1},isValid:function(e){return t.isValidNotificationElement(e)},render:function(e,n,r){var i=n.key,o=n.size,s=n.theme,a=void 0===s?yt.y.Light:s,u=n.hideBeak,c=t.notificationMap.get(e);return wt.createElement(Yt,{size:o,hideBeak:u,key:i,notificationData:c.component.data,onDismiss:function(){t.closeNotification(e)},theme:a},r)}}),this.componentManager.addComponentType(Xt,0,this.notificationWhitelist)},e.prototype.getTargetElementFinder=function(e,t){var n=this;if(e.type===yt.Q.Region)return function(){return n.integrationPortalService.getIntegrationContainer()};var r=function(){return n.findElementByAnalyticsId(e.value)};if(r())return r;console.warn("Invalid notification target"),this.sendNotificationResponseMessage(t,null,yt.p.Failure,yt.v.InvalidTargetError,"Invalid notification target")},e.prototype.findNotification=function(e){var t=Array.from(this.notificationMap.values()).find((function(t){return t.component.notificationId===e}));if(t)return t.component},e}())(vt.a,Ct,bt.b,c.guidanceManager,bt.e),tn=n("vJBG"),nn=n("4vd5"),rn=n("CY5M"),on=n("JfV0"),sn=function(e){var t=e.handle,n=e.customParameters,r=e.style,i=function(e,t){var n=Object(wt.useState)(""),r=n[0],i=n[1];return Object(wt.useEffect)((function(){var n=Object(rn.configureLaunchArgs)({bbFileData:{linkType:on.ContentHandler.LtiPlacement.toString()},handle:e});n.customParameters=t,i(Object(rn.getLaunchLinkFromLinkRef)(n))}),[e,t]),r}(t,n);return wt.createElement("iframe",{src:i,style:r})},an=new(function(){function e(e){this.componentManager=e}return e.prototype.init=function(){this.componentManager.addGlobalComponent(yt.j.LtiLaunch,{props:{handle:!0,customParameters:!1,style:!1},isValid:function(e){return!e.children},render:function(e,t){return wt.createElement(sn,Object(R.__assign)({},t))}})},e}())(bt.b),un=n("Agfx"),cn=Object(un.makeStyles)({container:{maskImage:function(e){return"url("+e.url+")"},WebkitMaskImage:function(e){return"url("+e.url+")"},height:function(e){return""+e.height},width:function(e){return""+e.width},backgroundColor:"currentColor"}}),ln=new RegExp("(^[\\u0000-\\u001F ]*"+/d([\r\n\t])*a\1*t\1*a\1*:\1*i\1*m\1*a\1*g\1*e\1*\/\1*s\1*v\1*g\1*\+\1*x\1*m\1*l\1*;\1*/i.source+")|("+/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.source+")","i"),dn=function(e){var t=e.url,n=e.height,r=e.width,i=e.className,o=e.style,s=cn({url:t,height:n,width:r});return wt.createElement("div",{className:i+" "+s.container,style:o})},pn=new function(e){var t=this;this.componentManager=e,this.init=function(){t.componentManager.addGlobalComponent(yt.j.SvgIcon,{props:{url:!0,height:!0,width:!0,className:!1,style:!1},isValid:function(e,n){return t.isValidSvgUrl(e.props)},render:function(e,t,n){return wt.createElement(dn,Object(R.__assign)({},t))}})},this.isValidSvgUrl=function(e){return e.url?e.height||e.width?!!ln.test(e.url)||(console.warn("Unsupported URI received for "+yt.j.SvgIcon+": ["+e.url+"] Only HTTPS and data:image/svg+xml data URIs are supported."),!1):(console.warn("A height and/or width is required for "+yt.j.SvgIcon+", but no value for `height` and/or `width` was given."),!1):(console.warn("A url is required for "+yt.j.SvgIcon+", but no value for `url` was given."),!1)}}(bt.b),mn=n("7n5u"),fn=new(function(){function e(e){this.componentManager=e}return e.prototype.init=function(){var e=new Map;e.set("items",(function(e,t,n){return e?e.map((function(e){return Object(R.__assign)(Object(R.__assign)({},e),{callback:Object(bt.g)(e.callbackId,yt.J.onClick,t,n)})})):e})),this.componentManager.addGlobalComponent(yt.j.ActionMenu,{props:{items:!0},transformers:e,isValid:function(e){return!e.children},render:function(e,t){if(t.items){var n={items:t.items.map((function(e,t){return{key:t,name:e.name,onClick:e.callback}}))},r="components.services.integration."+(t.analyticsId||"unknown")+".actionMenu";return wt.createElement(It.ActionMenu,{ariaLabel:t.ariaLabel,menuProps:n,className:"action-menu-extension",analyticsId:r})}}})},e}())(bt.b),hn=function(e,t){Dt.a.init(),Ct.init(),tn.a.init(e,t),Ut.init(e),_t.init(e),en.init(e),xt.a.addHoverListener(),xt.a.addClickListener(),Rt.b.subscribe((function(e,t){vt.a.sendEventMessage({type:yt.i,eventType:yt.cb.Route,routeName:e,routeData:t})}),Rt.a.Changed),Rt.b.subscribe((function(e,t){vt.a.sendEventMessage({type:yt.i,eventType:yt.cb.RouteChanging,routeName:e,routeData:t})}),Rt.a.Changing),nn.a.init(),an.init(),pn.init(),fn.init(),mn.b.init()},gn=function(){function e(e,t){var n=this;this.routeListener=e,this._started=!0,this.handleRouteChanging=function(){n.started=!1},this.handleRouteChanged=function(){n.started=!0},this.onStateChanged=function(e){n.startedCallback=e},t.addWatcher(this)}return e.prototype.start=function(){this.routeListener.subscribe(this.handleRouteChanging,Rt.a.Changing),this.routeListener.subscribe(this.handleRouteChanged,Rt.a.Changed)},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},set:function(e){this._started=e,this.startedCallback&&this.startedCallback(e)},enumerable:!0,configurable:!0}),e}(),vn=n("0+Qs"),bn=n("4HXK"),yn=n("eUpQ"),Sn=n("6Ksg"),Cn=n("vT39"),wn=n("WShm"),kn=n("OmEq"),In=function(){this.require="ngModel",this.link=function(e,t,n,r){r.$validators.email=function(e){return kn.b.test(e)||!e}}};s.module("ultra.directives.validate.emailAddress",[]).directive("bbValidateEmailAddress",["$injector",function(e){return e.instantiate(In)}]);var Tn=function(){this.require="ngModel",this.link=function(e,t,n,r){r.$validators.email=function(e){return!e||kn.a.test(e)}}};s.module("ultra.directives.validate.emailAddresses",[]).directive("bbValidateEmailAddresses",["$injector",function(e){return e.instantiate(Tn)}]);var En=function(){this.require="?ngModel",this.link=function(e,t,n,r){r&&(t.on("focusin",(function(){r.$focused=!0,e.$root.$$phase||e.$$phase||e.$root.$digest()})),t.on("focusout",(function(){r.$focused=!1,e.$root.$$phase||e.$$phase||e.$root.$digest()})))}};s.module("ultra.directives.validate.input",[]).directive("input",["$injector",function(e){return e.instantiate(En)}]).directive("textarea",["$injector",function(e){return e.instantiate(En)}]);var $n=function(){function e(){var e=this;this.require="ngModel",this.restrict="A",this.link=function(t,n,r,i){i.$validators.kvp=e.getKVPValidator(t,n,r,i)}}return e.prototype.getKVPValidator=function(e,t,n,r){return function(e,t){var n=t+"";if(""===n)return!0;var r=!0;return n.split("\n").forEach((function(e){e.trim().length>0&&r&&(2!==e.split("=").length&&(r=!1))})),r}},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(R.__extends)(t,e)}($n);s.module("ultra.directives.validate.kvp",[]).directive("bbValidateKeyValuePair",["$injector",function(e){return e.instantiate($n)}]);var Pn=n("f4B+"),An="bbValidateMaxlength",On=function(e){var t=this;this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getMaxlengthValidator=function(e,t,n,r){return function(e){var t=o("<textarea/>").val(e).text()||e;if(null==t)return!0;var i=n[An];if(null==i||""===i)return!0;var s=t.length;"true"===(!!n.maxlengthAfterEscape&&n.maxlengthAfterEscape)&&(s=Pn.a.HTML(t).length);var a=n.maxlengthNotice?n.maxlengthNotice:Math.floor(.9*i).toString();return a.match(/\%$/)&&(a=a.replace(/\D/,""),a=Math.floor(i*(1-a/100)).toString()),s>i?(delete r.$warning.maxlengthWarning,r.$error.maxlength={maxlength:i,diff:s-i},r.$errorImmediate.maxlengthImmediate={maxlength:i,diff:s-i},!1):s>=a?(delete r.$error.maxlength,delete r.$errorImmediate.maxlengthImmediate,r.$warning.maxlengthWarning={maxlength:i,left:i-s},!0):(delete r.$error.maxlength,delete r.$errorImmediate.maxlengthImmediate,delete r.$warning.maxlengthWarning,!0)}},this.link=function(e,n,r,i){i.$validators.maxlengthValidator=t.getMaxlengthValidator(e,n,r,i),i.$warning||(i.$warning={}),i.$errorImmediate||(i.$errorImmediate={})}};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(R.__extends)(t,e)}(On);s.module("ultra.directives.validate.maxlength",[E.moduleName]).directive(An,[E.serviceName,function(e){return new On(e)}]);var _n=function(e){var t=this;this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.selectionStart=0,this.selectionEnd=0,this.oldViewValue="",this.getNumberParser=function(e,n,r,i){return function(n){if(i.$isEmpty(n))return i.$setValidity("numberInvalid",!0),n;var o=t.regroup(e,i),s=t.bbLocalize.parseNumberSync(o,e);if(Number.isNaN(s))return i.$setValidity("numberInvalid",!1),s;i.$setValidity("numberInvalid",!0);var a=t.bbLocalize.getDecimalStringForScope(e),u=s.toString(),c=u.split(String(a)),l=r&&r.maxDecimal?Number(r.maxDecimal):E.Service.defaultDecimalPrecision;return c.length>1&&c[1].length>l&&(u=c[0]+a+c[1].substring(0,l),s=parseFloat(u),t.reformatFromModel(i,s)),t.updateSelection(e,i,t.target,t.key),s}},this.getMinValidator=function(e,t,n,r){return function(e){var t=parseFloat(n.min),i=r.$isEmpty(e);if(!i&&Number.isNaN(Number(e)))return delete r.$error.numberSmall,!1;var o=i||e>=t;return o?delete r.$error.numberSmall:r.$error.numberSmall={min:t},o}},this.getMaxValidator=function(e,t,n,r){return function(e){var t=parseFloat(n.max),i=r.$isEmpty(e);if(!i&&Number.isNaN(Number(e)))return delete r.$error.numberLarge,!1;var o=i||e<=t;return o?delete r.$error.numberLarge:r.$error.numberLarge={max:t},o}},this.getNumberFormatter=function(e,n,r,i){return function(n){var o=n||i.$modelValue;if(i.$setValidity("numberInvalid",!0),o||0===o){var s=r&&r.maxDecimal?r.maxDecimal:E.Service.defaultDecimalPrecision;return t.bbLocalize.formatNumberSync(parseFloat(o),e,{maximumFractionDigits:s,useGrouping:!0})}return""}},this.regroup=function(e,n){var r=t.bbLocalize.regroupNumberSync(n.$viewValue,e);return n.$viewValue!==r&&(n.$viewValue=r,n.$render(),n.$validate()),r},this.reformatFromModel=function(e,t){t=t||e.$modelValue;for(var n=e.$formatters,r=n.length,i=t;r--;)i=n[r](i);e.$viewValue!==i&&(e.$viewValue=i,e.$render(),e.$validate())},this.allowInput=function(e,n,r,i){if(!n||!n.key)return!1;var o=i.$viewValue,s=n.target,a=s.selectionStart,u=s.selectionEnd,c=t.bbLocalize.getGroupingStringForScope(e),l=t.bbLocalize.getDecimalStringForScope(e),d=t.bbLocalize.parseNumberSync(o,e),p=r&&r.maxDecimal?Number(r.maxDecimal):E.Service.defaultDecimalPrecision,m=u-a>1,f=n.key===c,h=u-a==0&&"Backspace"===n.key&&o[a-1]===c,g=u-a==0&&"Delete"===n.key&&o[a]===c,v=u-a==1&&o[a]===c&&("Backspace"===n.key||"Delete"===n.key),b=u-a==0&&!Number.isNaN(Number(n.key))&&t.target.selectionStart>o.indexOf(l)&&o.split(l)[1]&&o.split(l)[1].length>=p;m||Number.isNaN(d)||!(h||g||f||v||b)||n.preventDefault()},this.updateSelection=function(e,n,r,i){if(i&&-1===["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Shift","Meta","Tab","End","Home","-"].indexOf(i)){var o=Math.max(0,t.selectionEnd+n.$viewValue.length-t.oldViewValue.length);r.selectionStart=o,r.selectionEnd=o}},this.link=function(e,n,r,i){n.on("blur",(function(){i.$valid&&t.reformatFromModel(i)})),n.on("focus",(function(){n.select()})),n.on("keydown",(function(n){t.target=n.target,t.key=n.key,t.selectionStart=t.target.selectionStart,t.selectionEnd=t.target.selectionEnd,t.oldViewValue=i.$viewValue,t.allowInput(e,n,r,i)})),i.$parsers.push(t.getNumberParser(e,n,r,i)),i.$formatters.push(t.getNumberFormatter(e,n,r,i)),r.min&&(i.$validators.minValidator=t.getMinValidator(e,n,r,i),r.$observe("min",(function(){i.$validate()}))),r.max&&(i.$validators.maxValidator=t.getMaxValidator(e,n,r,i),r.$observe("max",(function(){i.$validate()})))}};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(R.__extends)(t,e)}(_n);s.module("ultra.directives.validate.number",[E.moduleName]).directive("bbValidateNumber",[E.serviceName,function(e){return new _n(e)}]);var Dn=function(){this.require="ngModel",this.link=function(e,t,n,r){r.$validators.phoneNumber=function(e){return/^\+?\d+$/.test(e)||!e}}};s.module("ultra.directives.validate.phoneNumber",[]).directive("bbValidatePhoneNumber",["$injector",function(e){return e.instantiate(Dn)}]);var xn=n("xqn/"),Rn=new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i"),Mn=(new RegExp("^(http://|https://)"),function(){function e(){var e=this;this.require="ngModel",this.restrict="A",this.link=function(t,n,r,i){i.$validators.url=e.getUrlValidator(t,n,r,i),i.$warning||(i.$warning={}),i.$errorImmediate||(i.$errorImmediate={})}}return e.prototype.getUrlValidator=function(e,t,n,r){return function(e){if(!e)return r.$error.urlInvalid&&delete r.$error.urlInvalid,!0;var t=e+"";return Rn.test(t)?(delete r.$error.urlInvalid,!0):(r.$error.urlInvalid=!0,!1)}},e}());!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(R.__extends)(t,e)}(Mn);s.module("ultra.directives.validate.url",[]).directive("bbValidateUrl",["$injector",function(e){return e.instantiate(Mn)}]);var Nn=n("lDJ8"),jn=[Sn.b,Cn.a,wn.b,"ultra.directives.validate.emailAddress","ultra.directives.validate.emailAddresses","ultra.directives.validate.input","ultra.directives.validate.kvp","ultra.directives.validate.maxlength","ultra.directives.validate.number","ultra.directives.validate.phoneNumber",xn.b,"ultra.directives.validate.url",Nn.a],Ln=n("2qV7"),Un=n("Q/M7"),Gn=n("HtY7"),Fn=n("H8CZ"),Bn="ultra.components.directives.preventEventBubbling",qn=function(){function e(e,t,n){this.scope=e,this.element=t,this.attrs=n,n.bbPreventEventBubbling&&t.on(n.bbPreventEventBubbling,(function(e){e.stopPropagation()}))}return e.$inject=["scope","element","attrs"],e}(),Hn=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.link=function(e,n,r){e.bbPreventEventBubbling=t.$injector.instantiate(qn,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();s.module(Bn,[]).directive("bbPreventEventBubbling",["$injector",function(e){return e.instantiate(Hn)}]);n("/mDi");var Vn="ultra.components.directives.sizeToFitTextArea",zn=function(){function e(e,t,n,r){var i=this;if(this.scope=e,this.element=t,this.attrs=n,this.timeout=r,this.defaultHeight=null!=this.scope.defaultHeight?parseInt(this.scope.defaultHeight,10):37,"textarea"!==t[0].tagName.toLowerCase())throw new Error("This directive is only for use as an attribute on textareas");this.maxHeight=this.scope.maxHeight?parseInt(this.scope.maxHeight,10):null,t.addClass("size-to-fit-textarea"),null!=e.textareaModel?this.scope.$watch("textareaModel",(function(e,t){e!==t&&i.sizeToFit()})):t.keyup(this.sizeToFit.bind(this)),this.timeout((function(){i.minHeight="true"===i.scope.initialHeightLock?i.element.get(0).clientHeight:null,i.sizeToFit()}),this.scope,0,!1)}return e.prototype.sizeToFit=function(){var e=this.element.get(0);e.clientHeight===e.scrollHeight&&(e.style.height=this.defaultHeight+"px");var t=e.clientHeight;(!this.maxHeight||this.maxHeight>t)&&(t=Math.max(e.scrollHeight,t,this.minHeight),this.scope.maxHeight&&(t=Math.min(this.maxHeight,t)),t>e.clientHeight&&(e.style.height=t+"px"))},e.$inject=["scope","element","attrs",l.b],e}(),Kn=function(){function e(e){var t=this;this.$injector=e,this.replace=!1,this.restrict="A",this.priority=1,this.terminal=!1,this.scope={defaultHeight:"@",maxHeight:"@",initialHeightLock:"@",textareaModel:"=?"},this.link=function(e,n,r){e.sizetofittextarea=t.$injector.instantiate(zn,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();s.module(Vn,[l.a]).directive("bbSizeToFitTextarea",["$injector",function(e){return e.instantiate(Kn)}]);var Jn="ultra.components.directives.bbPreventDrag",Wn=function(){function e(e){this.$rootScope=e,this.restrict="A",this.link=function(e,t){t.attr("draggable","false"),t.on("dragstart",(function(e){var t=e.originalEvent.target;if(!(t.ownerDocument.activeElement.className.includes("bb-editor")||t.getAttribute&&"true"===t.getAttribute("draggable")))return!1}))}}return e.$inject=["$rootScope"],e}();s.module(Jn,[]).directive("bbPreventDrag",["$injector",function(e){return e.instantiate(Wn)}]);n("i2kg"),n("my/J");var Qn=n("nsO7"),Yn="ultra.components.directives.formlabel",Zn="bbFormLabelDecorator",Xn=function(){function e(t,n,r){var i=this;this.$q=t,this.$log=n,this.timeout=r,this.restrict="A",this.scope=!0,this.waitForElement=function(t,n){null==n.elementInspectStartAt&&(n.elementInspectStartAt=(new Date).getTime());var r=i.$q.defer();return i.timeout((function(){return s.element(document.getElementById(t))}),n,50).then((function(o){o.length>0?r.resolve(o):(new Date).getTime()-n.elementInspectStartAt>e.elementInspectTimeout?r.reject("Cannot find element #"+t+" in "+e.elementInspectTimeout+"ms"):i.waitForElement(t,n).then((function(e){r.resolve(e)})).catch((function(e){r.reject(e)}))})),r.promise},this.link=function(t,n,r){var o=t.$eval(r[Zn])||{},a=r.for;a&&i.waitForElement(a,t).then((function(e){var n=function(){t.attrsElement=Qn.mapValues(Qn.keyBy(e[0].attributes,"nodeName"),(function(e){return e.nodeValue}))};o.autoupdate&&(t.domObserver=new MutationObserver(n),t.domObserver.observe(e[0],{childList:!1,attributes:!0,subtree:!1})),n()})).catch((function(e){i.$log.warn(e)})),t.$watchGroup(Qn.compact(["attrsElement",r[Zn]]),(function(t){e.decorators.forEach((function(e){e(n,s.extend({},t[0],t[1]))}))})),t.$on("$destroy",(function(){void 0!==t.domObserver&&t.domObserver.disconnect()}))}}return e.elementInspectTimeout=1e4,e.$inject=["$q","$log","timeout"],e.decorators=[function(e,t){var n=t.required;!0===n||["true","required",""].indexOf(n)>=0?e.addClass("required"):e.removeClass("required")}],e}();s.module(Yn,[]).directive(Zn,["$injector",function(e){return e.instantiate(Xn)}]);var er=n("+e2k"),tr=(n("lhRd"),n("GGEJ")),nr=(n("JbSi"),n("0Y4C"),"ultra.components.directives.collabSessionIcon"),rr=(function(){function e(e,t,n){this.$scope=e,this.$element=t,this.bbLocalize=n}e.prototype.$onChanges=function(e){var t=this;this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.$scope),key:this.runningSessionFlag?"components.directives.collab-session-icon.aria-label.active-collab":"components.directives.collab-session-icon.aria-label.inactive-collab"}).then((function(e){t.$element.attr("aria-label",e)}))},e.$inject=["$scope","$element",E.serviceName],e=Object(R.__decorate)([Object(Je.a)({moduleName:nr,componentName:"bbCollabSessionIcon",template:tr,bindings:{runningSessionFlag:"<"},requireModules:[E.moduleName]})],e)}(),"ultra.directives.elementimage.accessibility"),ir="aria-label",or=["components","directives","element-image","element-image-accessibility"],sr=function(){function e(e,t){var n=this;this.$injector=e,this.bbLocalize=t,this.restrict="C",this.link=function(e,t,r){if(!t.attr(ir)){var i=t.attr("class"),o=function(r){var i=/\bimg-icon-[\w-]+\b/.exec(r);null===i?t.removeAttr(ir):(n.loadBundle.then((function(){t.attr(ir,n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(e),key:or.join(".")+"."+i[0].replace(/-[aco]$/,"")}))})),e.$digest())};requestAnimationFrame((function(){o(i)}));var s=new MutationObserver(Qn.debounce((function(){requestAnimationFrame((function(){var e=t.attr("class");i!==e&&o(i=e)}))}),100,{leading:!0}));s.observe(t[0],{attributes:!0,attributeFilter:["class"]}),e.$on("$destroy",(function(){s.disconnect()}))}},this.loadBundle=t.loadBundle(or.join("/"))}return e.$inject=["$injector",E.serviceName],e}();s.module(rr,[E.moduleName]).directive("elementImage",["$injector",function(e){return e.instantiate(sr)}]);var ar=n("cYWG"),ur=n("K/D1"),cr=["scheduledTasks","telemetry"],lr=null,dr=function(){function e(){this.pendingRequests=[],this.httpRequestLog=[],this.registerWebRequestListener()}return e.prototype.registerWebRequestListener=function(){var e=this;window.addEventListener("message",(function(t){t.source===window&&t.data&&t.data.type&&t.data.details&&e.handleWebRequestMessage(t.data.type,t.data.details)}))},e.prototype.handleWebRequestMessage=function(e,t){if(this.isMonitoredUrl(t.url))switch(e){case"onBeforeRequest":this.onRequestStarted(t);break;case"onCompleted":case"onErrorOccurred":this.onRequestCompleted(t)}},e.prototype.isMonitoredUrl=function(e){return e&&e.indexOf("/learn/api/v1")>=0&&0===cr.filter((function(t){return e.indexOf(t)>-1})).length},e.prototype.onRequestStarted=function(e){this.pendingRequests.push(e)},e.prototype.onRequestCompleted=function(e){var t=Qn.findIndex(this.pendingRequests,(function(t){return t.requestId===e.requestId}));if(t>-1){var n=this.pendingRequests[t],r={requestId:e.requestId,type:e.type,method:e.method,url:e.url,statusCode:e.statusCode,elapsedTime:e.timeStamp-n.timeStamp,requestBody:n.requestBody,error:e.error};this.httpRequestLog.push(r),this.pendingRequests.splice(t,1)}},e.prototype.dumpHttpRequestLog=function(){var e={};window.httpRequestLog.forEach((function(t){var n=t.method+" "+t.url;null==e[n]&&(e[n]=[]),e[n].push(t.params)}));for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];console.log(r+" ["+i.length+"]",i)}}},e.prototype.clearHttpRequestLog=function(){this.httpRequestLog.length=0},e}();var pr=n("oQrK"),mr="ultra.services.zoomUtility";s.module(mr,[]),pr.a.detect().mobile()&&o(document).on("mouseover","input, textarea, select, .editor-element",(function(){o(this).css("font-size","16px")}));n("rkMR");var fr=n("gkef"),hr=n("90v0"),gr="ultraUi.components.directives.conversion.previewHeader",vr=function(){function e(e,t,n,r,i){var o=this;this.scope=e,this.element=t,this.attrs=n,this.windowSize=r,this.contextCourse=i;var s=e.course,a=r.isMediumBreakpoint()||r.isLargeBreakpoint();this.scope.shouldShowHeader=a&&s.isUltraPreview(),this.scope.hasExceptionReport=!!s.ultraConversionReportId,e.$on("reloadCourse",(function(e,t){t===s.id&&(o.scope.shouldShowHeader=s.isUltraPreview())}))}return e.$inject=["scope","element","attrs",fr.b,g.e],e}(),br=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.template=hr,this.scope={course:"="},this.link=function(e,n,r){e.previewHeader=t.$injector.instantiate(vr,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();s.module(gr,[]).directive("bbPreviewHeader",["$injector",function(e){return e.instantiate(br)}]);var yr=[{symbol:"d",base:86400,label:"days"},{symbol:"h",base:3600,label:"hours"},{symbol:"m",base:60,label:"minutes"},{symbol:"s",base:1,label:"seconds"}];s.module("ultra.service.filters.timespan",[E.moduleName]).filter("timeSpan",["$log",E.serviceName,function(e,t){var n={};return yr.forEach((function(e){n[e.symbol]=e})),function(r,i,o){void 0===i&&(i="hm");var s={},a={};return Qn.forEach(i,(function(t){var r=t.toLowerCase();Object.prototype.hasOwnProperty.call(n,r)?a[r]=r!==t:e.error(r+" is not supported!")})),Qn(n).filter((function(e){return Object.prototype.hasOwnProperty.call(a,e.symbol)})).forEach((function(e){var i=e.symbol,u=1===Qn.size(a),c=Math.floor(r/n[i].base),l=n[i].label;(c>0||!0===a[i]||u&&0===Qn.size(s))&&(s[l]=t.translateSync({locale:t.getLocale(o),key:"global.timeSpan."+l+".plural",params:{v:c},noEscape:!0})),r%=n[i].base,delete a[i]})),Qn.defaults(s,{days:"",hours:"",minutes:"",seconds:""}),t.translateSync({locale:t.getLocale(o),key:"global.timeSpan.oneline",params:s,noWrap:!0,noEscape:!0}).trim().replace(/\s+/g," ")}}]);var Sr=["ultra.service.filters.timespan"],Cr=n("0fB1"),wr=n("z6Q5"),kr="ultra.service.batch-utility-rest-api.directive";s.module(kr,[wr.a,l.a]).directive("bbBatchScope",[wr.b,l.b,function(e,t){return{restrict:"A",link:function(n){var r,i;n.$on("BEFORE_REQUEST",(function(o,s){o.stopPropagation(),s.params=s.params||{},s.params[wr.c]||(r=r||e.newToken(),s.params[wr.c]=r),r&&(t.cancel(i),i=t((function(){r.send(),r=null}),n))}))}}}]);var Ir=n("gCXj"),Tr=n("BXiQ"),Er=(n("A3SN"),n("tb/u")),$r="ultra.directives.user-avatar-group";s.module($r,[Tr.a]).directive("bbUserAvatarGroup",(function(){return{restrict:"E",template:Er,scope:{users:"=?"},link:function(e,t){t.addClass("avatar element-image"),e.$watch("users",(function(t){t&&(e.displayUsers=Object(Qn.compact)([e.users[0],e.users.length>2?{id:"_groupedusers_"+(e.users.length-1),getInitials:function(){return"+"+(e.users.length-1)},avatar:{permanentUrl:"default"},lastModifiedAt:""}:e.users[1]]))}))}}}));var Pr,Ar=n("zFCC"),Or=n("NXdT"),_r=n("/jNt"),Dr=new(function(){function e(){}return e.prototype.init=function(){if(!this._isEventAlreadyWrapped){var e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.addEventListener("load",(function(){if(this.status>399){var e=new URL(this.responseURL).pathname.substring(1),n=e.substr(0,e.lastIndexOf("/"));if(!Qn.includes(["learn/api/v1/users/me/preferences","learn/api/v1/systemPreferences","telemetry/api/v1/browser"],n)){var r=this.responseText.replace(/(\r\n|\n|\r)/gm,"").substr(0,150),i=t[0]+" "+e+" "+this.status+" - "+this.statusText+' "'+r+'"';f.b.addHistory({applicationId:"",analyticsId:i,action:"request error",url:e})}}})),e.apply(this,[].slice.call(t))},this._isEventAlreadyWrapped=!0}},e}()),xr=n("ZzR9");n.d(t,"userId",(function(){return Pr})),n.d(t,"moduleName",(function(){return Mr})),n.d(t,"useAbsoluteUrl",(function(){return Ur})),n.d(t,"appInjector",(function(){return Nr})),n.d(t,"init",(function(){return Br}));var Rr,Mr="ultra";window.Foundation.libs.reveal.settings.dismiss_modal_class="close-reveal-modal, .reveal-close",!lr&&(Rr=Un.j(),!h.a.production||Rr.indexOf("perf-ultra")>-1||Rr.indexOf("mylearn.int.bbpd.io")>-1)&&(lr=new dr,window.httpRequestLog=lr.httpRequestLog,window.pendingRequests=lr.pendingRequests,window.dumpHttpRequestLog=lr.dumpHttpRequestLog,window.clearHttpRequestLog=lr.clearHttpRequestLog,window.disableFtueGuidance=function(){h.a.disableAllFtueGuidance=!0});var Nr,jr=["angulartics","angulartics.scroll","ngAnimate","ngAria","ngMessages","ngSanitize","ui.router","angular-data.DSCacheFactory","fng","ngRedux",d,m.a,C,ie.a,kr,I.a,Gn.a,oe.a,se.a,ae.a,T.d,ue.a,x.a,j.a,$,pt.a,ce.a,G.f,le.a,Pe.a,de.b,Ae.b,_e,Yn,Le.a,xe.a,pe.a,ve,Se,ke.a,Re.a,Ge,Ee,Ie.a,Te.a,Me.c,Ne.b,A.b,je.a,O.a,L,qe.moduleName,He,ze,Qe,V,et,dt.b,st.a,at.b,ut.a,M,ct.b,D.a,_.a,lt.a,W,ee.a,ne.a,mt.a,ft.a,ht.a,gt.a,Bn,Jn,Rt.c,vn.a,bn.a,l.a,b.Q,Vn,er.a,nr,rr,Ln.a,fe.b,ur.a,ar.b,mr,gr,Cr.a,Ir.a,Tr.a,$r,_r.c,Ar.b,Or.b].concat(jn).concat(Sr);function Lr(){return s.module(Mr,jr).config([E.providerName,function(e){e.setOptions({production:h.a.production})}]).config(["$locationProvider",fe.c,"$urlRouterProvider",function(e,t,n){e.html5Mode(!0),n.rule((function(e,t){var n=t.url();if(n){var r=Un.r(n);return"/"===r[r.length-1]?r.substring(0,r.length-1):void 0}})),n.otherwise((function(e,t){var n=t.url(),r=e.get(fe.d);"/"===Un.r(n)?e.get(ne.b).navigateToLandingPage():r.go("base.not-found")}))}]).config(["$ocLazyLoadProvider",function(e){e.config({loadedModules:[Mr]})}]).config(["$animateProvider",function(e){e.classNameFilter(/angular-animate/)}]).config(["$compileProvider",function(e){e.debugInfoEnabled(!h.a.production),e.preAssignBindingsEnabled(!1)}]).config(["$httpProvider",function(e){e.useApplyAsync(!0),Gr(e)}]).config(["DSCacheFactoryProvider",function(e){e.setCacheDefaults({capacity:1e3,maxAge:18e5,deleteOnExpire:"passive"})}]).config(["$ariaProvider",function(e){e.config({bindRoleForClick:!1,bindKeypress:!1,ariaRequired:!1,ariaInvalid:!1,tabindex:!1})}]).config(["$logProvider",function(e){e.debugEnabled(!h.a.production)}]).config(["$provide",function(e){e.decorator("$rootScope",["$delegate",function(e){return Object.defineProperty(e.constructor.prototype,"$$digestPaused",{get:function(){return Object.prototype.hasOwnProperty.call(this,"$$__digestPaused")&&null!=this.$$__digestPaused?this.$$__digestPaused:(this.$parent||{}).$$digestPaused}}),e}])}]).config(["$ngReduxProvider",function(e){var t=window,n=[u.default],r=[];if(!h.a.production){var i=Object(a.createLogger)({level:"info",collapsed:!0});n.push(i),t.__REDUX_DEVTOOLS_EXTENSION__&&r.push(t.__REDUX_DEVTOOLS_EXTENSION__&&t.__REDUX_DEVTOOLS_EXTENSION__())}e.createStoreWith(on.rootReducer,n,r)}])}function Ur(e){return e&&e.url&&(e.url.indexOf("/api/")>=0||e.url.indexOf("/partner-cloud/app/")>=0)}function Gr(e){e.interceptors.push((function(){return{request:function(e){return Ur(e)&&(e.url=Un.c(e.url)),e}}}))}function Fr(e){e.run(["$rootScope","$ngRedux",E.serviceName,mt.b,Q,function(e,t,n,r,i){var o;i.registerXsrfCallback((function(e){Object(on.configure)({apiBasePath:h.a.apiBasePath,xsrf:e,partnerCloudBasePath:h.a.partnerCloudBasePath})}));var s=t.connect((function(e){return{}}),on.actions.app)((function(e,t){o=t}));e.$on("destroy",s),e.$on(xr.a.$stateChangeSuccess,(function(t,r,i,s,a){o&&o.handleStateChangeSuccess({toState:r,toParams:i});var u="base.recentActivity";s.name&&(u=s.name),e.previousState=u,e.previousStateSref=u+(a?"("+JSON.stringify(a)+")":""),e.index=Object.create(null),e.index.locale=(n.getLocale(e)||"").replace("_","-");var c=r.pageTitle||"base.ultra";n.translate({locale:e.index.locale,key:c}).then((function(t){e.index.title=t}))})),e.$on(xr.a.$stateLocationChangeSuccess,(function(e,t){if(o){var n=t.split("?")[1],r={};if(n)for(var i=new URLSearchParams(n),s=0,a=Array.from(i.entries());s<a.length;s++){var u=a[s],c=u[0],l=u[1];r[c]=l}o.handleStateLocationChangeSuccess(r)}}));var a=r.subscribe();e.$on("destroy",a)}]).run(["$http",ee.b,Q,function(e,t,n){n.registerXsrfCallback((function(t){var n;e.defaults.headers.common[Y]=t,s.element.ajaxSetup({headers:(n={},n[Y]=t,n)})})),s.element.ajaxPrefilter((function(e){Ur(e)&&(e.url=Un.c(e.url))}))}]).run(["$rootScope",ee.b,te.b,function(e,t,n){e.context=t,e.$on("bbCurrentUserModified",(function(){n.userModel.$fetch()}))}]).run(["$rootScope",function(e){e.Modernizr=window.Modernizr}])}function Br(){var e=this;Un.m("inPreviewMode",window.location.href)&&o("body").addClass("in-preview-mode"),s.element(document).ready((function(){s.module("pre-bootstrap-ultra",["ng",ee.a]).config(["$httpProvider",function(e){Gr(e)}]);var t=s.injector(["pre-bootstrap-ultra"]),n=t.get(ee.b),r=t.get(te.b),i=t.get("$http"),a=t.get(l.b),u=t.get("$q");o(document).foundation(),/Android/.test(navigator.appVersion)&&"function"==typeof document.activeElement.scrollIntoViewIfNeeded&&window.addEventListener("resize",(function(){"INPUT"===document.activeElement.tagName&&a((function(){document.activeElement.scrollIntoViewIfNeeded()}),e.scope,0,!1)}));var d=Un.j(),p=window.__initialContext.xsrf?u.when({data:{xsrfToken:window.__initialContext.xsrf}}):i.get(d+h.a.apiBasePath+"/v1/utilities/xsrfToken");u.all([r.userModel.$asPromise(),p,n.getSystemInfo().$asPromise()]).then((function(e){var t=e[0];Pr=t.id;var n=e[2];re.a.userId=Pr,yn.a.setClientOffset(n.now.getTime()-(new Date).getTime());var i=o("base"),a=i.attr("href");i.attr("href",h.a.basePath+"/");var u=(Nr=s.bootstrap(document.documentElement,[Mr],{strictDi:!0})).get(ee.b),l=Nr.get(Q);Nr.get(Rt.d).addRouteListener(),new gn(Rt.b,c.guidanceConnector).start(),l.updateToken(e[1].data.xsrfToken),r._setUserId(Pr),l.registerXsrfCallback((function(e){u.sessionId=e,u.xsrfToken=e})),vt.a.init(window),hn(Nr.get(E.serviceName),Nr.get("$ngRedux")),Dr.init(),i.attr("href",a)})).catch((function(e){401===e.status&&(window.location.href="/?new_loc="+encodeURIComponent(window.location.pathname+(window.location.search||"")+(window.location.hash||"")))})).finally((function(){var e=function(){var e=o("#initial-load-area");if(e&&e.length>0){if(window.__e2eTestingEnabled)return void e.remove();e.addClass("fade-out"),Fn.b(e,(function(t){if(!t.data.noTransitions&&"opacity"!==t.originalEvent.propertyName)return!1;e.remove()}))}};if(window.__e2eTestingEnabled)e();else if(Nr){var t,n=Nr.get("$rootScope"),r=n.$on("$stateChangeSuccess",(function(){e(),r(),t()}));t=n.$on("$stateChangeError",(function(){e(),t(),r()})),n.$on("hideInitialLoadingArea",(function(){e()}))}else e()}))}))}h.a.production?(Fr(Lr()),Br()):Promise.all([n.e(531),n.e(228)]).then(function(){Promise.resolve().then(n.bind(null,"tWb8")).then((function(e){jr=jr.concat(e.modules);var t=Lr();Fr(t),e.init(t),Br()}))}.bind(null,n)).catch((function(){}))},e6jQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=0;function i(){return"id_"+ ++r}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},eUpQ:function(e,t,n){"use strict";var r=function(){function e(){}return e.getServerTime=function(){return new Date((new Date).getTime()+e.clientTimeDifferenceMS)},e.setClientOffset=function(t){e.clientTimeDifferenceMS=t},e.clientTimeDifferenceMS=0,e}();t.a=r},emI2:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("pjml"),o=n("aHpC"),s="ultra.service.preference",a="preferenceService",u=250,c=function(){function e(e,t){this.$q=e,this.MyPreferenceModel=t,this.preferences={}}return e.prototype.getPreference=function(e,t,n){var r=this,i=this.$q.defer();return n||!Object.prototype.hasOwnProperty.call(this.preferences,e)?this.MyPreferenceModel.$find(e).$allow([404]).$asPromise().then((function(n){if(n.$response&&404===n.$response.status){if(void 0===t)return void i.reject(n);r._addPreferenceToCache(e,t),i.resolve(r.preferences[e])}else r.preferences[n.key]=n,i.resolve(n)}),(function(e){i.reject(e)})):i.resolve(this.preferences[e]),i.promise},e.prototype._addPreferenceToCache=function(e,t,n){var r=this.MyPreferenceModel.$new(e);r.key=e,r.value=t,r.isRequired=!n,this.preferences[e]=r},e.prototype.setPreference=function(e,t,n){if(e.length>u)throw new Error("Preference key is too long!");return this._addPreferenceToCache(e,t,n),this.preferences[e].$save().$asPromise()},e=Object(r.__decorate)([Object(r.__param)(0,Object(o.b)("$q")),Object(r.__param)(1,Object(o.b)(i.R.serviceName))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);angular.module(s,[i.Q]).service(a,c)},en1n:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"i",(function(){return y})),n.d(t,"j",(function(){return S})),n.d(t,"f",(function(){return C})),n.d(t,"k",(function(){return I}));var r,i=n("D57K"),o=(n("9RbK"),n("5iHu")),s=n("nbDY"),a=n.n(s),u=n("xkx/"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Small=new t("small"),t.Medium=new t("medium"),t.Large=new t("large"),t.Xlarge=new t("xlarge"),t.Xxlarge=new t("xxlarge"),t}(a.a),l=function(){if(!r){var e=o(".foundation-mq-small").width(),t=o(".foundation-mq-medium").width(),n=o(".foundation-mq-large").width(),i=o(".foundation-mq-xlarge").width(),s=o(".foundation-mq-xxlarge").width();r={small:{start:e,end:t},medium:{start:t,end:n},large:{start:n,end:i},xlarge:{start:i,end:s},xxlarge:{start:s,end:999999999}}}return r},d=l,p=null;o(window).resize((function(){p=null}));var m=function(){return null==p&&(p=o(window).width()),p},f=m;function h(){var e=d(),t=f();return t>=e.small.start&&t<e.small.end?c.Small:t>=e.medium.start&&t<e.medium.end?c.Medium:t>=e.large.start&&t<e.large.end?c.Large:t>=e.xlarge.start&&t<e.xlarge.end?c.Xlarge:c.Xxlarge}function g(){return h().isEqualTo(c.Small)}function v(){return h().isEqualTo(c.Medium)}function b(){return h().isEqualTo(c.Large)}function y(){return h().isEqualTo(c.Xlarge)}function S(){return h().isEqualTo(c.Xxlarge)}function C(){return b()||y()||S()}function w(e){return e.replace("@media","").trim()}var k={smallUp:window.matchMedia(w(u.BbMediaQueries.smallUp)),smallOnly:window.matchMedia(w(u.BbMediaQueries.smallOnly)),mediumUp:window.matchMedia(w(u.BbMediaQueries.mediumUp)),mediumOnly:window.matchMedia(w(u.BbMediaQueries.mediumOnly)),largeUp:window.matchMedia(w(u.BbMediaQueries.largeUp)),largeOnly:window.matchMedia(w(u.BbMediaQueries.largeOnly)),xlargeUp:window.matchMedia(w(u.BbMediaQueries.xLargeUp)),xlargeOnly:window.matchMedia(w(u.BbMediaQueries.xLargeOnly)),xxlargeUp:window.matchMedia(w(u.BbMediaQueries.xXLargeUp))},I={smallUp:k.smallUp,smallOnly:k.smallOnly,mediumUp:k.mediumUp,mediumOnly:k.mediumOnly,largeUp:k.largeUp,largeOnly:k.largeOnly,xlargeUp:k.xlargeUp,xlargeOnly:k.xlargeOnly,xxlargeUp:k.xxlargeUp,"small-up":k.smallUp,"small-only":k.smallOnly,"medium-up":k.mediumUp,"medium-only":k.mediumOnly,"large-up":k.largeUp,"large-only":k.largeOnly,"xlarge-up":k.xlargeUp,"xlarge-only":k.xlargeOnly,"xxlarge-up":k.xxlargeUp}},"f4B+":function(e,t,n){"use strict";var r=n("D57K"),i=n("5iHu"),o=n("BqZm"),s=n.n(o),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.text=function(e){return i("<div></div>").html(e).text()},t}(s.a);Object.setPrototypeOf(a,s.a),t.a=a},f8ya:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return p}));var r,i,o,s=n("D57K");!function(e){e.Add="Add",e.Delete="Delete",e.ValueChange="ValueChange",e.NoChange="NoChange"}(r||(r={})),function(e){e.NoAccommodation="Normal",e.Limited="Limited",e.Unlimited="Unlimited"}(i||(i={})),function(e){e.Unlimited="Unlimited",e.OneAndAHalf="150",e.Two="200",e.NoAccommodation="Default"}(o||(o={}));var a=function(){function e(e){this.type=e}return e.prototype.equals=function(e){return null==e?this.hasNoAccommodation():this===e||this.type===e.type},e.prototype.hasNoAccommodation=function(){return!1},Object.defineProperty(e.prototype,"hasAccommodation",{get:function(){return!this.hasNoAccommodation()},enumerable:!0,configurable:!0}),e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.compare=function(e){return this.equals(e)?r.NoChange:this.hasAccommodation?r.Add:r.Delete},t}(a),c=function(e){function t(){return e.call(this,i.NoAccommodation)||this}return Object(s.__extends)(t,e),t.prototype.hasNoAccommodation=function(){return!0},t}(u);var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.prototype.compare=function(e){return this.equals(e)?r.NoChange:this.hasAccommodation?e.hasAccommodation?r.ValueChange:r.Add:r.Delete},t.prototype.toKey=function(){switch(this.type){case o.OneAndAHalf:return"150Percent";case o.Two:return"200Percent";case o.Unlimited:return"Unlimited";default:return"NoAccommodation"}},t}(a),d=function(e){function t(){return e.call(this,o.NoAccommodation)||this}return Object(s.__extends)(t,e),t.prototype.hasNoAccommodation=function(){return!0},t}(l);var p=function(){function e(e,t){null!=e&&(this.dueDate=e),null!=t&&(this.timeLimit=t)}return e.fromTypes=function(t,n){var r,s=new e;return s.dueDate=null==(r=t)||r===i.NoAccommodation?new c:new u(r),s.timeLimit=function(e){return null==e||e===o.NoAccommodation?new d:new l(e)}(n),s},e.prototype.clone=function(){return e.fromTypes(this.dueDate.type,this.timeLimit.type)},e.prototype.equals=function(e){return e.dueDate.equals(this.dueDate)&&e.timeLimit.equals(this.timeLimit)},e.prototype.compare=function(e){return{dueDate:this.dueDate.compare(e.dueDate),timeLimit:this.timeLimit.compare(e.timeLimit)}},Object.defineProperty(e.prototype,"hasAccommodation",{get:function(){return this.dueDate.hasAccommodation||this.timeLimit.hasAccommodation},enumerable:!0,configurable:!0}),e}()},fGgA:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h}));n("zAxy"),n("saCP");var r=n("O94r"),i=n.n(r),o=n("nsO7"),s=n("5iHu"),a=n("wHJ2"),u=n("0JpG"),c=n("lEL+"),l=n("gkef"),d=n("/J7e"),p=n("+4Px"),m=n("e6jQ"),f="ultra.components.directives.tooltip",h=function(){function e(t,n,r,i,o,a){var u=this;this.scope=t,this.element=n,this.attrs=r,this.localizeService=i,this.timeoutService=o,this.windowSizeService=a,this.tooltipCreated=!1,this.tooltip=null,this.pip=null,this.timeout=null,this.timeoutMS=500,e.initEnhancedTooltipEvents(),this.controlId=this.attrs.tooltipId||"tooltip-"+m.a(),this.tooltipPosition=this.attrs.tooltipPosition||"top","true"===this.attrs.tooltipAlwaysUnderline&&this.getTriggerElement().addClass("tooltip-always-underline"),this.$body=s("body"),this.attrs.$observe("title",(function(e){e&&u.updateTooltip(e)})),this.scope.$on("$destroy",(function(){u.getTooltip()&&u.getTooltip().remove(),u.$body=null,u.tooltip=null,u.pip=null})),"true"!==this.attrs.tooltipDisableOnMouseLeave&&n.on("mouseleave",(function(){(u.windowSizeService.isLargeBreakpoint()||"true"===u.attrs.tooltipEnableOnMouseLeaveForAllBreakpoints)&&(u.timeoutMS>0?u.timeout=u.timeoutService((function(){u.hideTooltip()}),u.scope,u.timeoutMS):u.hideTooltip())})),"true"!==this.attrs.tooltipDisableOnMouseOver&&n.on("mouseover",(function(){(u.windowSizeService.isLargeBreakpoint()||"true"===u.attrs.tooltipEnableOnMouseOverForAllBreakpoints)&&u.showTooltip()})),"true"!==this.attrs.tooltipDisableOnFocus&&(n.on("focus",(function(){s("body").hasClass("hide-focus-outline")||u.showTooltip()})),n.on("blur",(function(){u.hideTooltip()}))),n.on("click",(function(e){if(s("body").hasClass("hide-focus-outline")){var t=u.windowSizeService.isSmallBreakpoint(),n=u.windowSizeService.isMediumBreakpoint();if("true"===u.attrs.tooltipOpenOnActivation||t||n){if("true"===u.attrs.tooltipDisableOnMediumDownBreakpoint&&(n||t))return;u.isTooltipVisible()?u.hideTooltip():(u.showTooltip(),e.stopPropagation())}else u.hideTooltip()}else e.stopPropagation()})),n.on("keydown",(function(e){e.which===p.g&&u.isTooltipVisible()?(u.hideTooltip(),e.stopPropagation()):e.which!==p.t&&e.which!==p.f||"true"===u.attrs.tooltipOpenOnActivation&&(u.isTooltipVisible()?u.hideTooltip():(u.showTooltip(),e.stopPropagation()))}))}return e.prototype.isTooltipVisible=function(){return this.getTooltip()&&"false"===this.getTooltip().attr("aria-hidden")},e.prototype.cancelTimeout=function(){this.timeout&&this.timeoutService.cancel(this.timeout)},e.prototype.showTooltip=function(){var e=this;this.tooltipCreated||(this.addTooltipToDom(),this.attrs.tooltipInitImmediate)?(this.getTriggerElement().attr("title",""),(a.isUndefined(this.attrs.tooltipOnOverflowOnly)||"true"===this.attrs.tooltipOnOverflowOnly&&"true"===a.element(this.getTriggerElement().children()[0]).attr("data-overflowed"))&&(this.cancelTimeout(),this.hideAllTooltips(),this.positionTooltip(),this.getTooltip().attr("aria-hidden","false"),this.postShowTooltip())):this.timeoutService((function(){e.showTooltip()}),this.scope,100)},e.prototype.hideTooltip=function(){this.tooltipCreated&&this.getTooltip().attr("aria-hidden","true").css({top:0,left:0})},e.prototype.hideAllTooltips=function(){s("body").find(".enhanced-tooltip").attr("aria-hidden","true").css({top:0,left:0})},e.prototype.addTooltipToDom=function(){var e=void 0===this.attrs.tooltipCenterContent||"true"===this.attrs.tooltipCenterContent,t="true"===this.attrs.tooltipDarkTheme,n=i()("enhanced-tooltip","tooltip-max-width",{"tooltip-center-content":e,"tooltip-dark-theme":t},this.attrs.tooltipClassNames),r=s('<span class="'+n+'" aria-hidden="true" role="tooltip" id="'+this.controlId+'">'+this.getPipHtml()+"</span>");this.addTooltipStyles(r),this.addTooltipContent(r),this.addTooltipEvents(r),this.addTooltipClose(r),this.$body.append(r),this.getTriggerElement().attr("aria-describedby",this.controlId),this.tooltipCreated=!0},e.prototype.getPipHtml=function(){var e=this.isRTL()?"is-rtl":"";return"true"===this.attrs.tooltipDisablePip?"":'<span class="enhanced-tooltip-pip '+e+'"></span>'},e.prototype.isRTL=function(){return this.localizeService.isRTL(this.scope)},e.prototype.getPipPadding=function(){return"true"===this.attrs.tooltipDisablePip?0:13},e.prototype.getTriggerElement=function(){return this.element},e.prototype.getTooltip=function(){if(!this.tooltip){var e=this.$body.find("#"+this.controlId);this.tooltip=e.length>0?e:null}return this.tooltip},e.prototype.updateTooltip=function(e){if(this.tooltipCreated){var t=this.getTooltipPip()||"";this.getTooltip().html("").append(t).append(document.createTextNode(e))}},e.prototype.getTooltipPip=function(){return this.pip||(this.pip=this.getTooltip().find(".enhanced-tooltip-pip")),this.pip},e.prototype.positionTooltip=function(){this.getTooltipPip().removeClass(this.adjustedTooltipPosition);var t=this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()/2;switch(this.checkPositionInBoundary(t),this.adjustedTooltipPosition){case"top-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()/2,null);break;case"top-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()+20,t-e.TOOLTIP_PIP_PADDING);break;case"top-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-20,t-this.getTooltip().outerWidth()+e.TOOLTIP_PIP_PADDING);break;case"bottom-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()/2,null);break;case"bottom-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()+e.TOOLTIP_PIP_PADDING,t-e.TOOLTIP_PIP_PADDING);break;case"bottom-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-e.TOOLTIP_PIP_PADDING,t-this.getTooltip().outerWidth()+e.TOOLTIP_PIP_PADDING);break;case"right-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding(),this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding());break;case"right-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding(),this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding());break;case"right-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding(),this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding());break;case"left-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding(),this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"left-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding(),this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"left-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding(),this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding())}this.getTooltipPip().addClass(this.adjustedTooltipPosition)},e.prototype.applyPosition=function(e,t,n,r){var i=this.adjustLeftPercentage(n,r),o=this.ensureTopInBounds(t);e.css({top:o||"auto",left:this.isRTL()?i.rtlLeft||"auto":i.left||"auto"})},e.prototype.ensureTopInBounds=function(t){var n=t+this.getTooltip().outerHeight();return this.getWindowHeight()-n<e.TOOLTIP_VIEWPORT_EDGE_PADDING?t=this.getWindowHeight()-this.getTooltip().outerHeight()-e.TOOLTIP_VIEWPORT_EDGE_PADDING:t<e.TOOLTIP_VIEWPORT_EDGE_PADDING&&(t=e.TOOLTIP_VIEWPORT_EDGE_PADDING),t},e.prototype.adjustLeftPercentage=function(e,t){if(a.isDefined(this.attrs.tooltipLeftAdjustPercent)){var n=this.getTriggerElement().outerWidth()/100*parseInt(this.attrs.tooltipLeftAdjustPercent,10);e+=n,t-=n}return{left:e,rtlLeft:t}},e.prototype.checkPositionInBoundary=function(e){var t=this.tooltipPosition.split("-");"bottom"!==t[0]&&"top"!==t[0]||(this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getTooltip().outerHeight()+this.getPipPadding()>this.getWindowHeight()?t[0]="top":this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding()<0&&(t[0]="bottom"),e+this.getTooltip().outerWidth()/2>this.getWindowWidth()?t[1]="left":e-this.getTooltip().outerWidth()/2<0?t[1]="right":t[1]=t[1]?t[1]:"center"),this.adjustedTooltipPosition=t.join("-")},e.prototype.getWindowWidth=function(){return s(window).width()},e.prototype.getWindowHeight=function(){return s(window).height()},e.prototype.addTooltipClose=function(e){var t=this,n=e.find(".close-icon");n.length>0&&n.on("click",(function(){t.hideTooltip()}))},e.prototype.addTooltipStyles=function(e){},e.prototype.addTooltipContent=function(e){e.append(document.createTextNode(this.getTriggerElement().attr("title")))},e.prototype.addTooltipEvents=function(e){},e.prototype.postShowTooltip=function(){},e.$inject=["scope","element","attrs",u.serviceName,c.b,l.b],e.TOOLTIP_PIP_PADDING=20,e.TOOLTIP_VIEWPORT_EDGE_PADDING=20,e.initEnhancedTooltipEvents=o.once((function(){var e=o.throttle((function(){s("body").find(".enhanced-tooltip").attr("aria-hidden","true")}),500);document.addEventListener("scroll",e,!0),s(window).resize(e),s("body").click(e)})),e}(),g=function(){function e(t){var n=this;this.$injector=t,this.restrict="A",this.scope={},this.link=function(t,r,i){d.a(i.enhancedTooltip)?t.tooltip=n.$injector.instantiate(h,{scope:t,element:r,attrs:i}):(e.instanceCount++,e.ensureEvents(),r.one("mouseover",(function(e){var t=s(e.currentTarget);null==t.attr("data-tooltip")&&(t.attr("data-tooltip",""),t.parent().foundation({tooltip:{disable_for_touch:!0}}))})),t.$on("$destroy",(function(){e.instanceCount--,0===e.instanceCount&&e.unregisterEvents(),r.foundation("tooltip","off")})))}}return e.ensureEvents=function(){function t(){a.element("span.tooltip:visible").hide(),a.element(".button-with-active-tooltip").removeClass("open")}e.eventHandlers||(e.eventHandlers={click:t,blur:t,keyup:function(e){s.Event(e).keyCode===p.g&&t()}},Object.keys(e.eventHandlers).forEach((function(t){document.addEventListener(t,e.eventHandlers[t],!0)})))},e.unregisterEvents=function(){Object.keys(e.eventHandlers).forEach((function(t){document.removeEventListener(t,e.eventHandlers[t],!0)})),e.eventHandlers=null},e.instanceCount=0,e.eventHandlers=null,e.$inject=["$injector"],e}();a.module(f,[u.moduleName,c.a,l.a]).directive("bbTooltip",["$injector",function(e){return e.instantiate(g)}])},fYJU:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u}));var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s=n("Qbdf"),a="ultra.service.context.user",u="contextUser",c=function(){function e(e,t,n){this.$window=e,this.UserModel=t,this.contextCourse=n}return Object.defineProperty(e.prototype,"userId",{get:function(){return this.contextCourse.isInIframeOfPreviewMode()?this.contextCourse.previewStatus.user.id:this._userId||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userModel",{get:function(){return this.contextCourse.isInIframeOfPreviewMode()?this.contextCourse.previewStatus.user:(this._userModel||(this._userModel=this.getInitialUserModel(),this._userId=this._userModel.id),this._userModel)},enumerable:!0,configurable:!0}),e.prototype.update=function(){var e=this;return this.UserModel.$find("me",{expand:"systemRoles"}).$then((function(t){return e._setUserModel(t)}))},e.prototype.getInitialUserModel=function(){return this.$window.__initialContext?this.UserModel.$buildRaw(this.$window.__initialContext.user):this.UserModel.$find("me",{expand:"systemRoles"})},e.prototype._setUserId=function(e){return this._userId=e,this._userId},e.prototype._setUserModel=function(e){return this._userModel=e,this._userId=e?e.id:null,this._userModel},e.$inject=["$window",o.Pb.serviceName,s.e],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);i.module(a,[o.Q]).service(u,c)},fm95:function(e,t,n){"use strict";n.r(t),n.d(t,"CREATE_CONTENT_ID",(function(){return k})),n.d(t,"FolderContentHandlerIcon",(function(){return I})),n.d(t,"FileContentHandlerType",(function(){return T})),n.d(t,"getProctoredAssessmentSettings",(function(){return E})),n.d(t,"ForumAttacherAction",(function(){return $})),n.d(t,"StateType",(function(){return w})),n.d(t,"ScormScoringMethod",(function(){return P})),n.d(t,"ScormLearningStandard",(function(){return A})),n.d(t,"serviceName",(function(){return O}));var r=n("D57K"),i=(n("QLzv"),n("nsO7")),o=n("wHJ2"),s=n("wgY5"),a=n("nbDY"),u=n.n(a),c=n("5MwF"),l=n("JfV0"),d=n("4nF1"),p=n("pjml"),m=n("yCC5"),f=n("nkTj"),h=n("gm4d"),g=n("Rjd/"),v=n("eUpQ"),b=n("Sa5G");n.d(t,"AssessmentType",(function(){return b.c})),n.d(t,"ContentRootNode",(function(){return b.h})),n.d(t,"DeployedAssessmentType",(function(){return b.m}));var y=n("94iD"),S=n("f8ya"),C=n("6vR2");n.d(t,"ContentHandler",(function(){return l.ContentHandler})),n.d(t,"ContentVisibility",(function(){return l.ContentVisibility})),n.d(t,"Visibility",(function(){return l.ContentVisibility})),n.d(t,"ILearnCourseContent",(function(){return l.ILearnCourseContent})),n.d(t,"ILearnCourseContentDetail",(function(){return l.ILearnCourseContentDetail})),n.d(t,"ILearnAssignedGroup",(function(){return l.ILearnAssignedGroup})),n.d(t,"ILearnSingleFile",(function(){return l.ILearnSingleFile}));var w,k="create",I=function(e){function t(t){var n=e.call(this,t)||this;return n.iconClass=t,n}return Object(r.__extends)(t,e),t.OpenFolder=new t("img-icon-folder-open"),t.ClosedFolder=new t("img-icon-folder"),t}(u.a),T=function(e){function t(t,n){var r=e.call(this,t.join())||this;return r.mimeTypeKeywords=t,r.iconClass=n,r}return Object(r.__extends)(t,e),t.getIconClassByFileMIMEType=function(e){if(e&&e.trim())for(var n=e.toLowerCase(),r=t.getValues(),i=0;i<r.length;i++){var o=r[i];if(o.mimeTypeKeywords.some((function(e){return n.indexOf(e)>=0})))return o.iconClass}return""},t.Pdf=new t(["pdf"],"img-icon-pdf"),t.Presentation=new t(["powerpoint","presentation"],"img-icon-presentation"),t.Spreadsheet=new t(["excel","spreadsheet"],"img-icon-spreadsheet"),t.Zip=new t(["zip"],"img-icon-zip"),t.Audio=new t(["audio"],"img-icon-audio"),t.Image=new t(["image"],"img-icon-photo"),t.Video=new t(["video"],"img-icon-video"),t.Document=new t(["word","document","text","rtf"],"img-icon-document-text"),t}(u.a),E=function(e){if(o.isUndefined(e)||null==e)return null;var t=e.contentHandler.toString();if(p.r.ContentHandler.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail&&e.contentDetail[t]&&e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings){var n=e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings;return{proctoringDownloadUrl:n.proctoringDownloadUrl,proctoringServiceHandle:n.proctoringServiceHandle,proctoringServiceVendor:n.proctoringServiceVendor,isSecureBrowserRequiredToTake:n.isSecureBrowserRequiredToTake,isSecureBrowserRequiredToReview:n.isSecureBrowserRequiredToReview,isWebcamRequired:n.isWebcamRequired}}return null},$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.ADD=new t("ADD"),t.DELETE=new t("DELETE"),t}(u.a);!function(e){e.None="None",e.Started="Started",e.Completed="Completed"}(w||(w={}));var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.SCORE=new t("SCORE"),t.COMPLETION=new t("COMPLETION"),t.SATISFACTION=new t("SATISFACTION"),t}(u.a),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.AICC=new t("AICC"),t.CMI5=new t("CMI5"),t.SCORM_11=new t("SCORM_11"),t.SCORM_12=new t("SCORM_12"),t.SCORM_2004_2ND_EDITION=new t("SCORM_2004_2ND_EDITION"),t.SCORM_2004_3RD_EDITION=new t("SCORM_2004_3RD_EDITION"),t.SCORM_2004_4TH_EDITION=new t("SCORM_2004_4TH_EDITION"),t.TINCAN=new t("TINCAN"),t}(u.a),O=m.A;g.a.factory(O,["restmod",f.d,"$q","$rootScope","$ngRedux",function(e,t,n,a,u){var m=e.model().mix({depth:{mask:!0},children:{mask:!0},softLinks:{mask:!0},"adaptiveReleaseRules.startDate":{serialize:"date"},"adaptiveReleaseRules.endDate":{serialize:"date"},position:{mask:"CU"},selfEnrollmentGroups:{mask:"CU"},positionBefore:{mask:"R"},positionAfter:{mask:"R"},hasMoreChildren:{mask:!0},launchInNewWindow:{init:!0},ui:{mask:!0,init:function(){return{hasData:!1,isDeleted:!1,isOpen:!1}}},$extend:{Record:{getDeployedAssessment:function(){if(!this.contentDetail)throw new Error("Cannot get deployed assessment if content detail is null");var e=this.contentHandler&&b.m.parseByContentHandler(this.contentHandler.toString());if(e){var t=this.contentDetail[this.contentHandler.toString()];return t.gradingColumn?t:t[e.toString()]}},getAssociatedGradingColumn:function(e){var t=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];if(t&&t.gradingColumn)return t.gradingColumn;if(t){var n=this.getDeployedAssessment();if(n)return n.gradingColumn}},getDueDate:function(){return this.genericReadOnlyData&&this.genericReadOnlyData.dueDate},getContentHandlerByIconUrl:function(){var e=this.iconUrl.match("^/.*/(.*)_.*..*$"),t=l.ContentHandler.Unknown;if(e)switch(e[1]){case"assignment":t=l.ContentHandler.UltraAssignment;break;case"discussion":t=l.ContentHandler.Discussion;break;case"file":t=l.ContentHandler.File;break;case"folder":t=l.ContentHandler.Folder;break;case"link":t=l.ContentHandler.ExternalLink;break;case"test":t=l.ContentHandler.TestLink}return t},setupAssessmentContentDetail:function(e,t){var n,r=this.contentHandler.toString(),i=b.c.parseByContentHandler(r),o=b.m.parseByContentHandler(r);if(i&&o){this.contentDetail={},this.contentDetail[r]={};var a=s(v.a.getServerTime()).startOf("day").add({days:1}).toDate();this.contentDetail[r][o.toString()]={deployedAssessmentType:o.toString(),assessment:{title:this.title,type:i.toString()},deploymentSettings:{feedbackSettings:(n={},n[l.FeedbackMode.AfterSubmission]={options:[l.FeedbackOption.InstructorFeedback,l.FeedbackOption.UserAnswers]},n[l.FeedbackMode.AfterAttemptGraded]={options:[l.FeedbackOption.Score]},n)},gradingColumn:{columnName:this.title,possible:0,visible:!1,gradebookCategoryId:t?t.id:null,gradebookCategory:t,gradingSchemaId:e,courseId:this.courseId,dueDate:a},permissions:{modify:!0}}}},createScormSettings:function(e){var t={method:"POST",url:this.$url()+"/scormSettings",data:e},r=n.defer();return this.$scope.$collection().$send(t,(function(e){r.resolve(e.data)}),(function(e){r.reject(e)})),r.promise},conditionalReleaseAsync:function(e,t,n,r){var i=n?"/rules/"+n+"/conditions":"";r&&(i+="/"+r);var o={method:e,url:this.$url()+"/adaptiveReleaseRules"+i};if(t&&"DELETE"!==e&&(o.data=t),"GET"===e)return this.$scope.$collection().$send(o).$then((function(e){return e.$unwrap(e.$response.data)}));if("DELETE"===e){var s=l.ContentHandler.CourseLink.isEqualTo(this.contentHandler)?this.contentDetail[l.ContentHandler.CourseLink.toString()].linkSourceId:this.id;t&&t.type?u.dispatch(l.actions.content.deleteAdaptiveReleaseRuleInStore(s,t.type)):u.dispatch(l.actions.content.deleteAdaptiveReleaseRulesInStore(s))}return this.$scope.$collection().$send(o)},getChildren:function(e){e=e||{};var n=this,r=[];return this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",params:{offset:e.offset,limit:e.limit,contentHandler:e.contentHandler,recursive:e.recursive,onlyUltraConvertableContents:e.onlyUltraConvertableContents,expand:"assignedGroups,selfEnrollmentGroups.group",sort:e.sort,"@view":"Summary"}}).$then((function(n){if(c.a.features.learningModule||i.remove(n.$response.data.results,(function(e){return l.ContentHandler.LearningModule.isEqualTo(e.contentHandler)})),e.resolveLinks&&n.$response.data.results&&n.$response.data.results.length){var o=t.getDataMixin(n.findMany.bind(n),"linkSourceId","linkSource");if(n.$response.data.results.forEach((function(e){l.ContentHandler.CourseLink.isEqualTo(e.contentHandler)&&e.contentDetail&&r.push({linkId:e.id,linkSourceId:e.contentDetail[l.ContentHandler.CourseLink.toString()].linkSourceId})})),r.length)return o(r,{}).then((function(){return n}))}})).$then((function(e){e.$unwrap(e.$response.data);var t={};r.forEach((function(e){t[e.linkId]=e.linkSource})),e.forEach((function(e){e.depth=n.depth+1,t[e.id]&&(e.ui.linkSource=t[e.id])}))}))},getClassicContent:function(){return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url(),params:{onlyUltraConvertableContents:"true"}}).$then((function(e){e.$unwrap(e.$response.data)}))},getLinkContentSource:function(e){if(e=e||{},l.ContentHandler.CourseLink.isEqualTo(this.contentHandler)&&this.contentDetail)return this.ui.linkSource&&this.ui.linkSource.$pk&&!e.fromServer?this.ui.linkSource:(this.ui.linkSource=this.$scope.$new(this.contentDetail[l.ContentHandler.CourseLink.toString()].linkSourceId),this.contentDetail[l.ContentHandler.CourseLink.toString()].linkSourceId?this.ui.linkSource.$fetch():this.ui.linkSource)},getChildrenCount:function(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/children/count"}).$asPromise().then((function(e){return e.$response.data.count}))},hasGradedContentItems:function(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/hasGrades"}).$asPromise().then((function(e){return e.$response.data.result}))},isCurrentUserEligibleToAlignGoals:function(){return this.permissions&&!0===this.permissions.createLearningStandardsAlignment&&this.permissions.edit},getContentIdForGoalAlignment:function(){return"blackboard.data.content.Content;"+this.id},getContentTitleForGoalAlignment:function(){return this.title},getSibling:function(e,t){var n=this;return this.$scope.$build().$send({method:"GET",url:this.$url()+"/"+e,params:{lessonContentId:t}}).$asPromise().then((function(e){return e.$response.data.id?n.$scope.$buildRaw(e.$response.data):null}))},getAttemptCount:function(){var e=this.getAssociatedGradingColumn();return this.$scope.$collection().$send({method:"GET",url:e["@id"]+"/attempts/count"}).$suppressErrorDialog().$asPromise().then((function(e){return e.$response.data.count}))},getTimeLimit:function(){return this.getDeployedAssessment()&&this.getDeployedAssessment().exceptions&&this.getDeployedAssessment().exceptions.length>0?this.getDeployedAssessment().exceptions[0].timeLimit:this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings?this.getDeployedAssessment().deploymentSettings.timeLimit:void 0},getExtraTime:function(){var e=this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings;if(e&&e.softTimeLimit)return e.timeLimit-e.softTimeLimit},getTimedTestDetail:function(){var e=this.contentDetail&&this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings,t=null,n=null,r=e?this.getDeployedAssessment().deploymentSettings.softTimeLimit:null;e&&(n=this.getDeployedAssessment().deploymentSettings.timeLimit,t=this.getDeployedAssessment().deploymentSettings.timerCompletion);var i={timerCompletion:t,timeLimitSec:n?60*n:null,softLimitSec:r?60*r:null};return new y.a(i)},getSoftLinks:function(e){e=e||{};var t=this;return this.$scope.$collection().$send({method:"GET",url:this.$url()+"/softLinks",params:{offset:e.offset,limit:e.limit,label:e.label}},(function(e){this.$unwrap(e.data),t.softLinks=this}))},update:function(){for(var e=this.$scope.$build(),t=0,n=Object.keys(this);t<n.length;t++){var r=n[t];e[r]=this[r]}return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id,data:e})},canEdit:function(){return this.permissions&&this.permissions.edit},canEditPartial:function(){var e=this.canEdit();if(this.contentDetail){var t=this.getDeployedAssessment();if(t){var n=t.permissions;n&&(e=e||n.modifyDueDate||n.view)}}return!!e},canEditAvailability:function(){return this.canEdit()||this.permissions&&this.permissions.modifyAvailability},canViewAsInstructor:function(){return this.canEdit()||this.permissions&&this.permissions.viewDesigner},canDelete:function(){return this.permissions&&this.permissions.delete},hasConversation:function(){return!!this.attachedForumLink},hasDueDateException:function(){return null!=this.dueDateExceptionType&&this.dueDateExceptionType!==S.c.NoAccommodation},hasGradingColumn:function(){return!!this.getAssociatedGradingColumn()},hasDueDate:function(){return this.genericReadOnlyData&&this.genericReadOnlyData.hasGradeColumn},isVisible:function(){return this.visibility&&l.ContentVisibility.Visible.isEqualTo(this.visibility)},isRestricted:function(){return this.visibility&&l.ContentVisibility.Restricted.isEqualTo(this.visibility)},isStarted:function(){return this.state===w.Started},isCompleted:function(){return this.state===w.Completed},isHidden:function(){return this.visibility&&l.ContentVisibility.Hidden.isEqualTo(this.visibility)},isVisibleToStudents:function(){return this.isAvailable&&!this.isPartiallyVisible&&!this.isConditionalRelease()},isHiddenFromStudents:function(){return!this.isAvailable&&!this.isPartiallyVisible},isConditionalRelease:function(){return!(!this.isAvailable||!(this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules&&this.adaptiveReleaseRules.rules.every((function(e){return e.criteria&&e.criteria.length}))||this.isLearningModule()&&this.contentDetail[p.r.ContentHandler.LearningModule.toString()].isSequential))},isForcedSequenceModule:function(){return this.isLearningModule()&&this.contentDetail[p.r.ContentHandler.LearningModule.toString()].isSequential},isInForcedSequenceModule:function(){return this.inSequence},isForcedSequenceItem:function(){return this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules&&this.adaptiveReleaseRules.rules[0]&&!!i.find(this.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"})},isActiveForcedSequenceModule:function(){return this.isForcedSequenceModule()&&this.hasProgressed},applyForcedSequence:function(e){this.contentDetail[p.r.ContentHandler.LearningModule.toString()].isSequential=e,this.children&&(this.children.forEach((function(t){t.inSequence=e,t.children&&t.children.forEach((function(t){return t.inSequence=e}))})),this.children.filter((function(e){return e.isAvailable})).forEach((function(t){t.isPartiallyVisible=e,e?i.has(t,"adaptiveReleaseRules.rules[0].criteria[0]")?t.adaptiveReleaseRules.rules[0].criteria.push({type:"Pre_Content"}):i.set(t,"adaptiveReleaseRules.rules[0].criteria[0]",{type:"Pre_Content"}):t.adaptiveReleaseRules&&t.adaptiveReleaseRules.rules&&t.adaptiveReleaseRules.rules[0].criteria.length&&(i.remove(t.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"}),t.adaptiveReleaseRules.rules[0].criteria.length&&(t.isAvailable=!0)),a.$broadcast("refresh-conditional-release-rules",t)})))},isConditionalReleaseWithVisibleButNotAccessible:function(){return this.isConditionalRelease()&&this.isPartiallyVisible},isConditionalReleaseWithHiddenFromStudent:function(){return this.isConditionalRelease()&&!this.isPartiallyVisible},isConditionalReleaseLocked:function(){var e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isRestricted()},isConditionalReleaseUnlocked:function(){var e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isVisible()},containsCriteriaWithGradeColumnId:function(e){var t,n;return null===(n=null===(t=this.adaptiveReleaseRules)||void 0===t?void 0:t.rules)||void 0===n?void 0:n.some((function(t){var n;return null===(n=t.criteria)||void 0===n?void 0:n.some((function(t){return t.type===l.AdaptiveReleaseCriteriaType.Grade.toString()&&t.gradeColumnId===e}))}))},getVisibilityAsStudent:function(){return this.isVisibleToStudents()?l.ContentVisibility.Visible:this.isConditionalRelease()?l.ContentVisibility.Restricted:l.ContentVisibility.Hidden},getContentDisplay:function(){return d.a.create(this)},saveAlignedGoals:function(e){var t=this;return e&&(this.alignedGoals=e.map((function(e){return{goalId:e.id,isVisibleToStudent:!0,goal:e}}))),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals}}).$then((function(){t.$getPreviousVersion()&&(t.$getPreviousVersion().alignedGoals=t.alignedGoals)}))},saveAssignedGroups:function(e){var t,n,r=this;void 0===e&&(e=!1);var i=this.getDeployedAssessment(),o=this.contentHandler.toString(),s=b.m.parseByContentHandler(o),a={assignedGroups:this.assignedGroups,isGroupContent:this.isGroupContent},u=!e&&i&&i.deploymentSettings&&i.deploymentSettings.id&&1===i.deploymentSettings.attemptCount;if(u){var c={id:i.deploymentSettings.id,attemptCount:i.deploymentSettings.attemptCount,feedbackSettings:i.deploymentSettings.feedbackSettings};a.contentDetail=((t={})[o]=((n={})[s.toString()]={deployedAssessmentType:s.toString(),deploymentSettings:c},n),t)}return this.withParams({expand:"assignedGroups,selfEnrollmentGroups.group"}).$send({method:"PATCH",url:this.$url(),data:a},(function(e){this.isGroupContent=e.data.isGroupContent,this.assignedGroups=e.data.assignedGroups,this.selfEnrollmentGroups=e.data.selfEnrollmentGroups,u&&(i.gradingColumn.multipleAttempts=e.data.contentDetail[o][s.toString()].gradingColumn.multipleAttempts)})).$then((function(){var e=r.$getPreviousVersion();if(e&&(e.isGroupContent=r.isGroupContent,e.assignedGroups=r.assignedGroups,e.selfEnrollmentGroups=r.selfEnrollmentGroups,u)){var t=e.contentDetail[o][s.toString()];t.deploymentSettings.attemptCount=i.deploymentSettings.attemptCount,t.gradingColumn.multipleAttempts=i.gradingColumn.multipleAttempts}}))},removeTimeLimit:function(e){var t,n,r=this,i=this.contentHandler.toString(),o=b.m.parseByContentHandler(i);if(e&&o)return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:(t={},t[i]=(n={},n[o.toString()]={deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{attemptCount:e.attemptCount?e.attemptCount:1,timerCompletion:e.timerCompletion?e.timerCompletion:p.d.TimerCompletion.C,timeLimit:null,softTimeLimit:null}},n),t)}},(function(e){delete this.getDeployedAssessment().deploymentSettings.timeLimit,delete this.getDeployedAssessment().deploymentSettings.softTimeLimit,this.contentDetail[i].test.deploymentSettings.timerCompletion=e.data.contentDetail[i].test.deploymentSettings.timerCompletion})).$then((function(){r.$getPreviousVersion()&&(delete r.$getPreviousVersion().contentDetail[i].test.deploymentSettings.timeLimit,delete r.$getPreviousVersion().contentDetail[i].test.deploymentSettings.softTimeLimit,r.$getPreviousVersion().contentDetail[i].test.deploymentSettings.timerCompletion=r.contentDetail[i].test.deploymentSettings.timerCompletion)}))},updateProctoringSettings:function(e){var t=this,r=n.defer(),i=function(e){if(E(t)&&E(e)){var n=e.contentHandler.toString(),r=e.contentDetail[n].test.deploymentSettings,i=t.contentDetail[n].test.deploymentSettings;if(i.proctoringServiceHandle=r.proctoringServiceHandle,i.proctoringServiceVendor=r.proctoringServiceVendor,i.proctoringDownloadUrl=r.proctoringDownloadUrl,i.isSecureBrowserRequiredToTake=r.isSecureBrowserRequiredToTake,i.isSecureBrowserRequiredToReview=r.isSecureBrowserRequiredToReview,i.isWebcamRequired=r.isWebcamRequired,t.$getPreviousVersion()){var o=t.$getPreviousVersion().contentDetail[n].test.deploymentSettings;o.proctoringServiceHandle=r.proctoringServiceHandle,o.proctoringServiceVendor=r.proctoringServiceVendor,o.proctoringDownloadUrl=r.proctoringDownloadUrl,o.isSecureBrowserRequiredToTake=r.isSecureBrowserRequiredToTake,o.isSecureBrowserRequiredToReview=r.isSecureBrowserRequiredToReview,o.isWebcamRequired=r.isWebcamRequired}}};return e?(i(e),r.resolve(this)):this.withParams({fields:"contentHandler,contentDetail"}).$send({method:"GET",url:this.$url()},(function(e){i(e.data),r.resolve(t)}),(function(){r.reject("Failed to fetch latest when updating proctoring settings.")})),r.promise},updateProctoringAssociation:function(e){var t,r,i=this,o=this.contentHandler.toString(),s=b.m.parseByContentHandler(o),a=n.defer();return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:(t={},t[o]=(r={},r[s.toString()]={deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{proctoringServiceHandle:e}},r),t)}},(function(e){i.updateProctoringSettings(e.data).then((function(){a.resolve(i)}))}),(function(){a.reject("Failed to update proctoring association.")})),a.promise},getProctoringLaunchLink:function(e){var t=n.defer(),r=c.a.apiBasePath+"/v1/courses/"+this.courseId+"/contents/"+this.id;return e.attemptId&&(r+="/attempts/"+e.attemptId),r+="/proctoring/launchLink",e.password&&(r+="?password="+encodeURIComponent(e.password)),this.$send({method:"GET",url:r},(function(e){e?t.resolve(e.data.launchLink):t.reject("Failed to fetch assessment launch link.")})).$allow([l.HttpStatus.Unauthorized,l.HttpStatus.TooManyRequests]).$asPromise().then((function(e){t.reject(e.$response)})),t.promise},getProctoringServiceVendor:function(){var e=E(this);return null==e?null:e.proctoringServiceVendor||null},getProctoringServiceHandle:function(){var e=E(this);return null==e?null:e.proctoringServiceHandle||null},isSecureBrowserRequiredToTake:function(){var e=E(this);return null!=e&&!(!e.proctoringServiceHandle||!e.isSecureBrowserRequiredToTake)},isSecureBrowserRequiredToReview:function(){var e=E(this);return null!=e&&!(!e.proctoringServiceHandle||!e.isSecureBrowserRequiredToReview)},isWebcamRequired:function(){var e=E(this);return null!=e&&!(!e.proctoringServiceHandle||!e.isWebcamRequired)},getProctoringDownloadUrl:function(){var e=E(this);return null==e?null:e.proctoringDownloadUrl||null},userNeedsToSelfEnrollInGroup:function(){return this.isGroupContent&&this.assignedGroups&&0===this.assignedGroups.length&&this.selfEnrollmentGroups&&this.selfEnrollmentGroups.length>0},setVisibility:function(e,t){switch(void 0===t&&(t=!0),this.adaptiveReleaseRules={startDate:null,endDate:null},e){case l.ContentVisibility.Visible:this.isAvailable=!0,this.isPartiallyVisible=!1;break;case l.ContentVisibility.Hidden:this.isAvailable=!1,this.isPartiallyVisible=!1;break;case l.ContentVisibility.Restricted:this.isAvailable=!0,this.isPartiallyVisible=t}},setTitle:function(e){this.title=e;var t=this.getAssociatedGradingColumn();t&&(t.columnName=e);try{this.getDeployedAssessment().assessment.title=e}catch(e){}},isUiFolder:function(){return l.ContentHandler.Folder.isEqualTo(this.contentHandler)&&!this.isBbPage()},isFolder:function(){return!!l.ContentHandler.Folder.isEqualTo(this.contentHandler)||!!l.ContentHandler.Unknown.isEqualTo(this.contentHandler)&&void 0},isBbPage:function(){if(this.contentDetail){var e=this.contentDetail[l.ContentHandler.Folder.toString()];if(l.ContentHandler.Folder.isEqualTo(this.contentHandler)&&e&&e.isBbPage)return!0;if(l.ContentHandler.Unknown.isEqualTo(this.contentHandler))return;return!1}return!1},isRoot:function(){return b.h.ROOT.isEqualTo(this.$pk)||b.h.INTERACTIVE.isEqualTo(this.$pk)},isAssignment:function(){return l.ContentHandler.UltraAssignment.isEqualTo(this.contentHandler)},isDocument:function(){return l.ContentHandler.Folder.isEqualTo(this.contentHandler)&&this.isBbPage()},isFile:function(){return l.ContentHandler.File.isEqualTo(this.contentHandler)},isJournal:function(){return l.ContentHandler.Journal.isEqualTo(this.contentHandler)},isLink:function(){return l.ContentHandler.ExternalLink.isEqualTo(this.contentHandler)},isLtiLink:function(){return l.ContentHandler.LtiLink.isEqualTo(this.contentHandler)},isLtiPlacement:function(){return l.ContentHandler.LtiPlacement.startsWith(this.contentHandler)},isPartnerCloud:function(){return l.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler)},isPlaceHolderContent:function(){return this.isLink()||this.isLtiLink()||this.isLtiPlacement()||this.isFile()||this.isPartnerCloud()},isTest:function(){return l.ContentHandler.TestLink.isEqualTo(this.contentHandler)},isScorm:function(){return l.ContentHandler.RusticiScorm.isEqualTo(this.contentHandler)},isGradedScorm:function(){return this.isScorm()&&!!this.getAssociatedGradingColumn()},isDiscussion:function(){return!!l.ContentHandler.Discussion.isEqualTo(this.contentHandler)||l.ContentHandler.CourseLink.isEqualTo(this.contentHandler)&&this.isDiscussionInOutline()},isLearningModule:function(){return!!l.ContentHandler.LearningModule.isEqualTo(this.contentHandler)||!!l.ContentHandler.Unknown.isEqualTo(this.contentHandler)&&void 0},isDiscussionInOutline:function(){return this.getContentHandlerByIconUrl().isEqualTo(l.ContentHandler.Discussion)},getSafeAssignAttrs:function(){return this.contentDetail[this.contentHandler.toString()].safeAssignOptions},isSafeAssignOn:function(){return!!this.contentDetail&&!!this.contentDetail[this.contentHandler.toString()].safeAssignOptions},isSafeAssignEnabled:function(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().checkAttempts},canStudentViewReports:function(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().canStudentViewReports},canSubmitToGlobalReferenceDatabase:function(){return this.isSafeAssignOn()&&!this.getSafeAssignAttrs().excludeSubmissions&&this.getSafeAssignAttrs().globalSearch},canHaveAttempts:function(){return l.ContentHandler.UltraAssignment.isEqualTo(this.contentHandler)||l.ContentHandler.TestLink.isEqualTo(this.contentHandler)||l.ContentHandler.LtiLink.isEqualTo(this.contentHandler)||l.ContentHandler.LtiPlacement.startsWith(this.contentHandler)||l.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler)||l.ContentHandler.Discussion.isEqualTo(this.contentHandler)||l.ContentHandler.CourseLink.isEqualTo(this.contentHandler)||l.ContentHandler.Journal.isEqualTo(this.contentHandler)||this.isScorm()},canHaveSharedGradingColumn:function(){return l.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler)},applyAvailabilitySettings:function(e){this.adaptiveReleaseRules=e.adaptiveReleaseRules,this.isAvailable=e.isAvailable,this.isPartiallyVisible=e.isPartiallyVisible},applyGroupSettings:function(e){this.isGroupContent=e.isGroupContent,this.assignedGroups=e.assignedGroups,this.selfEnrollmentGroups=e.selfEnrollmentGroups},addAndRevealAtIndex:function(e){this.$moveTo(e),this.$reveal()},findInTreeById:function(e,t){return this.findLoadedNodeByIdAndCache(e,t)},findLoadedNodeByIdAndCache:function(e,t,n){return void 0===n&&(n=3),null!=t&&t.id===e||(t=this.findLoadedNodeById(e,n)),t},findLoadedNodeById:function(e,t){if(t<0)return null;if(null==e&&null==this.id||e===this.id)return this;if(this.children){t--;for(var n=0;n<this.children.length;n++){var r=this.children[n].findLoadedNodeById(e,t);if(r)return r}}},moveTo:function(e,t,n){if(this.id!==t&&this.id!==n){this.$scope.$remove(this),this.$scope.fixPositions(),null!=t&&(n=void 0);var r=e.children.getInsertionIndex(t,n,!1,e.hasMoreChildren);null!=t&&0===r&&(t="start"),null==n||r!==e.children.length||e.hasMoreChildren||(n="end"),e.children.$add(this,r),this.$scope=e.children,this.$scope.fixPositions(),this.positionBefore=t,this.positionAfter=n,this.parentId=e.id,this.depth=null!=e.depth?e.depth+1:void 0}},shouldRestrict:function(){return!this.canEdit()&&this.isRestricted()},isQuestionAnalysisAvailable:function(){return this.isAssignment()||this.isTest()},updateState:function(e,t){var r=this;void 0===t&&(t=!1);var i=n.when(this);return this.inSequence?(this.state=e,t&&(i=this.$send({method:"PATCH",url:this.$url()+"/states/me",data:{state:e}}).$asPromise()),i.then((function(){return a.$broadcast("update-state",r,e),r}))):i}},Collection:{indexOfItemById:function(e){return this.$indexOf((function(t){return(t.id===e||null==t.id&&null==e)&&!t.ui.importPlaceholder}))},buildAndRevealAtPosition:function(e,t){var n=this.getInsertionIndex(e.positionBefore,e.positionAfter);if(n>-1){var r=this.$build(t);return r.addAndRevealAtIndex(n),null!=e.positionBefore&&(r.positionBefore=e.positionBefore),null!=e.positionAfter&&null==e.positionBefore&&(r.positionAfter=e.positionAfter),r}},getInsertionIndex:function(e,t,n,r){var i=null==n||n,s=-1;return null!=e&&(s="start"===o.lowercase(e)?0:this.indexOfItemById(e),!i&&s<0&&(s=0)),s<0&&null!=t&&("end"===o.lowercase(t)?null==r||r||(s=this.length):(s=this.indexOfItemById(t))>=0&&s++,!i&&s<0&&(s=this.length)),s},fixPositions:function(){for(var e=0;e<this.length;e++)this[e].position=e}}},$hooks:{"after-request":function(e){200===e.status&&(e.config.params&&e.config.params.fields||e.data.adaptiveReleaseRules||(this.adaptiveReleaseRules=null))},"before-request":function(e){if(!["/ROOT","/count","/softLinks"].some((function(t){return i.endsWith(e.url,t)}))&&"DELETE"!==e.method){e.params&&e.params.expand?i.includes(e.params.expand,"gradebookCategory")||(e.params.expand+=",gradebookCategory"):e.params=Object(r.__assign)({expand:"gradebookCategory"},e.params)}"PATCH"!==e.method&&"PUT"!==e.method||e.data&&e.data.title&&this.safeAssignOptions&&(e.data.safeAssignOptions=this.safeAssignOptions)},"before-render":function(e){if(h.a.peerAssessmentFeatureFlag){if(e.contentDetail){var t=this.getDeployedAssessment.call(e);if(t){var n=t.gradingColumn;n&&!n.peerGrading&&t&&t.peerSettings&&delete t.peerSettings}}}},"after-save":function(e){var t=Object(C.a)(e.data);u.dispatch(l.actions.content.persistContentSync(t))}}});return m.$extendRecord((function(e,t){if(t.contentHandler&&l.ContentHandler.CourseLink.isEqualTo(t.contentHandler))return{getDueDate:function(){return this.getLinkContentSource()&&this.getLinkContentSource().getDueDate()},hasDueDate:function(){return this.getLinkContentSource()&&this.getLinkContentSource().hasDueDate()}}})),m.$extendRecord((function(e,t){if(t.contentHandler&&l.ContentHandler.LtiLink.isEqualTo(t.contentHandler))return{getDueDate:function(){return this.getAssociatedGradingColumn()&&this.getAssociatedGradingColumn().dueDate},hasDueDate:function(){return this.hasGradingColumn()}}})),m.$extendRecord((function(e,t){if(t.contentHandler&&l.ContentHandler.RusticiScorm.isEqualTo(t.contentHandler))return{getAssociatedGradingColumn:function(e){var t=this.getScormGradebookItems(),n=null;return(n=e?t.find((function(t){return t.columnId===e})):t.find((function(e){return e.root}))||t[0])&&n.gradingColumn},getDueDate:function(){var e=this.getAssociatedGradingColumn();return e&&e.dueDate},hasDueDate:function(){return this.hasGradingColumn()},getScormGradebookItems:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.gradebookItems||[]},getScormLearningStandard:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.learningStandard||"UNKNOWN"},getScormAdvancedSettings:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.advancedSettings||{}},getScormReport:function(){var e={method:"GET",url:this.$url()+"/scormReport"},t=n.defer();return this.$scope.$collection().$send(e,(function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},isTinCan:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return!(!e||!A.TINCAN.isEqualTo(e.learningStandard))},hasReport:function(){return!this.isTinCan()&&!!this.getScormGradebookItems().length},setTitle:function(e){this.title=e;var t=this.getScormGradebookItems().find((function(e){return e.root}));t&&(t.title=e,t.gradingColumn.columnName=e)}}})),m}])},fmWv:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("In+A"),i=n("caKH"),o=function(){function e(e){var t=this;this.modalStackedMap=e,this.hasAngularModal=!1,this.hasReactModal=!1,this._started=!0,this.onReactModalChanged=function(e){t.hasReactModal=e,t.updateGuidanceState()},this.onAngularModalChanged=function(e){t.hasAngularModal=!!e,t.updateGuidanceState()},r.guidanceConnector.addWatcher(this)}return Object.defineProperty(e.prototype,"started",{get:function(){return this._started},set:function(e){this._started=e,this.startedCallback&&this.startedCallback(e)},enumerable:!0,configurable:!0}),e.prototype.start=function(){i.ModalManager.getInstance().addOnModalDisplayingChanged(this.onReactModalChanged),this.modalStackedMap.addTopListener(this.onAngularModalChanged)},e.prototype.onStateChanged=function(e){this.startedCallback=e},e.prototype.updateGuidanceState=function(){this.started=!this.hasReactModal&&!this.hasAngularModal},e}()},fzj8:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("wHJ2"),i=n("0JpG"),o=n("Qbdf"),s=n("UD9g"),a=n("Cxi4"),u=n("pjml"),c=n("TnpK"),l=n("g7Mf"),d=n("w9Zy"),p=n("nmzr"),m=n("36CG"),f="ultra.course.engagement.router";r.module(f,[i.moduleName,c.b,a.a,s.b,l.b,o.b,m.a]).config([c.c,o.c,m.b,function(e,t,r){var f,h,g;e.peekState(p.EngagementRoutes.DISCUSSION,{abstract:!0,url:"/discussion",resolve:(f={translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("features/course/content/course-content")),n.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(n)}]},f[o.d]=t.resolve,f.canCreateAllContent=[a.b,c.d,function(e,t){return e.canCreateAllContent(t.nextParams.courseId)}],f.hasEditAvailabilityPermission=[a.b,c.d,function(e,t){return e.hasEditAvailabilityPermission(t.nextParams.courseId)}],f)}).peekState(p.EngagementRoutes.DISCUSSION_VIEW,{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter",panelClass:"full",pageTitle:"course.content.discussion",require:function(){return Promise.all([n.e(0),n.e(10),n.e(1),n.e(2),n.e(7),n.e(16),n.e(15),n.e(35),n.e(45),n.e(558)]).then(n.bind(null,"uypo"))},resolve:{translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),e.all(n)}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[l.c,"currentCourseMemberships",function(e,t){return e.init(t)}]},onExit:[l.c,function(e){e.destroy()}]}).peekState(p.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,{url:"?view&disGroupId",panelClass:"full",views:{"engagement-edit@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(539)]).then(n.bind(null,"m3My"))}},"engagement-grade@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(111)]).then(n.bind(null,"4Rme"))}}},onEnter:[c.d,d.e,function(e,t){e.isPeekPanelOpen()&&t.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],peekStates:["conditional-release","content-market","course-group","discussion-details","discussion-participants","discussion-settings",s.a,"lti",p.CourseRoutes.COURSE_MESSAGE,"rubric","rubric-evaluation","rubric-view","submission-list","view-exceptions","discussion-feedback","discussions-settings"],peekViewName:"discussion-peek@",pageTitle:"course.content.discussion",resolve:(h={},h[m.c]=r.resolve,h.currentColumn=[c.d,o.d,function(e,t){var n=e.nextParams.columnId;if(n&&n!==u.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n).$asPromise()}],h)}).peekState(p.EngagementRoutes.SUBMISSION_LIST,{url:"/grading/:columnId/detail?participantId&contentId&disGroupId",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(540)]).then(n.bind(null,"nbFo"))},resolve:(g={translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("components/directives/grade/submission-list")),n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),n.push(t.loadBundle("components/directives/discussion")),e.all(n)}]},g[o.d]=t.resolve,g.currentColumn=[c.d,o.d,function(e,t){var n=e.nextParams.columnId;if(n&&n!==u.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n,{expand:"associatedRubrics"}).$asPromise()}],g[m.c]=r.resolve,g.memberships=[o.d,function(e){return e.memberships.$clear(),e.memberships.$fetch({expand:"user",roleBucket:"taking"}).$asPromise()}],g),pageTitle:"course.engagement.submissionTitle",peekStates:[p.CourseRoutes.COURSE_MESSAGE,"discussion-feedback","rubric-evaluation"],peekViewName:"engagement-submissions-peek@"}).peekState(p.EngagementRoutes.DISCUSSION_SETTINGS,{url:"/settings?contentId&focusEleId",require:function(){return Promise.all([n.e(0),n.e(1),n.e(16),n.e(35),n.e(45),n.e(559)]).then(n.bind(null,"W67U"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/engagement/discussion-settings")])}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[l.c,"currentCourseMemberships",function(e,t){return e.init(t)}]},onExit:[l.c,function(e){e.destroy()}],pageTitle:"course.engagement.discussionSettingsTitle",peekViewName:"discussion-group",allowChildPeekStates:!0,peekStates:["course-group","goal-picker-legacy","rubric","rubric-view"]}).peekState(p.EngagementRoutes.DISCUSSION_PARTICIPANTS,{url:"/participants",require:function(){return n.e(650).then(n.bind(null,"IrK9"))},pageTitle:"course.engagement.participantsTitle"}).peekState("discussion-details",{url:"/details",require:function(){return Promise.all([n.e(1),n.e(16),n.e(598)]).then(n.bind(null,"DTfl"))},pageTitle:"course.engagement.discussionDetailsTitle",peekStates:["discussion-feedback"]}).peekState("discussion-feedback",{url:"/feedback?forumId&isReadOnlyPanel&columnId",require:[function(){return Promise.all([n.e(0),n.e(5),n.e(635)]).then(n.bind(null,"pq88"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(111)]).then(n.bind(null,"4Rme"))}],resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/feedback-authoring/feedback-authoring")}],offCanvasArgs:["offCanvasArgs",function(e){return e.overlay=!1,e.disableFocusHandling=!0,e}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[l.c,"currentCourseMemberships",function(e,t){return e.init(t)}]},onExit:[l.c,function(e){e.destroy()}],pageTitle:"course.engagement.grade.feedback.viewFeedbackTitle"}).peekState("discussions-settings",{url:"/discussions-settings",require:function(){return n.e(641).then(n.bind(null,"ouab"))}})}])},g66W:function(e,t,n){"use strict";function r(e,t,n){return n=n||"...",(e=e.trim()).length>t&&(e=e.slice(0,t)+n),e}function i(e,t,n){e=e.trim(),n=n||"...";var r=new RegExp("^(.{0,"+t+"})\\b.*$"),i=e.trim().replace(r,"$1");return e.length>t?i+n:i}function o(e,t,n){return n=n||"",e?e.replace(t,n):""}function s(e,t){return e&&t&&e.substring(e.length-t.length,e.length)===t||!1}function a(e,t){return 0===(e||"").indexOf(t)}n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"k",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"f",(function(){return h}));var u=document.createElement("textarea");function c(e){return u.innerHTML=e,u.value}function l(e){return null==e?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<")}function d(e){if(""===e||null==e)return"";var t=e.match(/(&#x[0-9A-Fa-f]{2};)*/g).filter((function(e){return 0!==e.length})),n=e;return t.forEach((function(e){n=n.replace(e,String.fromCharCode(parseInt(e.substr(3,2),16)))})),n}function p(e){return null!=e.match(/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf\uac00-\ud7af]/)}function m(e){return null!=e.match(/[\-\s]/)}var f=function(e,t){3===e.nodeType&&e.textContent.trim()?t.push(e.textContent.trim()):e.firstChild&&!e.hasAttribute("data-bbtype")&&f(e.firstChild,t),e.nextSibling&&f(e.nextSibling,t)};function h(e){var t=document.createElement("div");t.innerHTML=e.replace(/\n/g,"");var n=[];return f(t,n),n.join(" ")}},g7Mf:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return C})),n.d(t,"a",(function(){return w}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("Sa5G"),a=n("pjml"),u=n("0JpG"),c=n("oVrE"),l=n("nYZ0"),d=n("Fvsw"),p=n("Qbdf"),m=n("fYJU"),f=n("TnpK"),h=n("jhBu"),g=n("Cxi4"),v=n("g66W"),b=(n("SeO5"),n("aHpC")),y=n("d2bc"),S="ultra.service.discussion",C="discussionService",w="default",k=function(){function e(e,t,n,r,i,o,s,a,u,c,l,d,p){var m=this;this.bbLocalize=e,this.$rootScope=t,this.$q=n,this.$modal=r,this.courseModel=i,this.UserModel=o,this.context=s,this.contentService=a,this.ultraState=u,this.entitlementService=c,this.discussionPermission=l,this.contextUser=d,this.contextCourse=p,this.userCourseRoles={},this.userCourseAvailabilities={},this.canObserveGradebook=!1,this.canViewAssessments=!1,this.canViewGradebook=!1,this.canViewAttempts=!1,this.participantCount="-",this.hasEditPermission=!1,this.hasClassGroup=!1,this.initCount=0,this.$rootScope.$on("discussion-group-content-update",(function(e,t){m.hardLinkContent&&(m.hardLinkContent.applyGroupSettings(t),m.softLinkContent&&m.softLinkContent.id&&m.softLinkContent.applyGroupSettings(m.hardLinkContent))}))}return e.prototype.init=function(e){var t=this,n=this.ultraState.nextParams.contentId;if(this.initCount++,this.initCount>1){if(n===this.currentContentId)return this.$q.when();this.initCount=1,this.destroy(),this.initCount=1}return this.currentContentId=n,this.currentCourseId=this.contextCourse.courseId?this.contextCourse.courseId:this.ultraState.nextParams.courseId,this.groupId=this.ultraState.nextParams.disGroupId||"",this.userCourseAvailabilities[c.e()]=!0,this.courseMembershipsFetcher=e||this.courseModel.$new(this.currentCourseId).memberships,this.courseMembershipsFetcher.$resolve({limit:1e4}).$asPromise().then((function(e){e.forEach((function(e){var n=e.role.toString();n in a.y.toBeLocalizedRoleLabels?t.userCourseRoles[e.userId]=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(null),key:a.y.toBeLocalizedRoleLabels[n]}):t.userCourseRoles[e.userId]=n,t.userCourseAvailabilities[e.userId]=e.isAvailable}))})),this.resolveCourse().then((function(e){t.course=e,t.outlineRoot=t.contentService.findRootNode(t.course,a.r.ContentRootNode.ROOT),t.engagementRoot=t.contentService.findRootNode(t.course,a.r.ContentRootNode.INTERACTIVE);var n,r=t.ultraState.nextParams.columnId;n=r&&r!==a.F.CREATE_COLUMN_ID?t.course.gradebook.columns.$find(r,{expand:"associatedRubrics"}).$asPromise():t.$q.when();var i=t.course.id;return t.$q.all([n,t.entitlementService.hasCourseEntitlement(s.j.ViewAssessment,i),t.discussionPermission.hasEditPermission(i),t.entitlementService.hasCourseEntitlement(y.a.Observe,i),t.entitlementService.hasCourseEntitlement(y.a.ViewGradebookMetaData,i),t.entitlementService.hasCourseEntitlement(y.a.ViewAttempts,i)])})).then((function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5];n&&(t.column=n),t.canViewAssessments=r,t.hasEditPermission=i,t.canObserveGradebook=o,t.canViewGradebook=s,t.canViewAttempts=a}))},e.prototype.destroy=function(){this.initCount--,this.initCount>0||(this.course=void 0,this.userCourseRoles={},this.userCourseAvailabilities={},this.currentContentId=void 0,this.hardLinkContent=void 0,this.softLinkContent=void 0,this.engagementRoot=void 0,this.outlineRoot=void 0,this.canObserveGradebook=void 0,this.canViewAssessments=void 0,this.canViewGradebook=void 0,this.canViewAttempts=void 0,this.currentDiscussion=void 0,this.groupId=void 0,this.currentCourseId=void 0,this.column=void 0,this.assignedGroupsFiltersArray=void 0,this.selectedGroup=void 0,this.participantCount=void 0,this.loadDiscussionP=void 0,this.loadHardContentP=void 0,this.loadSoftContentP=void 0,this.hasEditPermission=void 0,this.hasClassGroup=void 0)},e.prototype.loadDiscussion=function(e,t){var n=this;return this.loadDiscussionP?this.loadDiscussionP:this.loadDiscussionP=this.loadHardContent().then((function(){return n.loadSoftContent()})).then((function(){return e&&(i.merge(n.hardLinkContent,e),n.hasGroups()?n.hardLinkContent.assignedGroups.some((function(e){return n.groupId===e.groupId}))||(n.groupId=n.hardLinkContent.assignedGroups[0].groupId):n.groupId=""),n.doLoadDiscussion(t)}))},e.prototype.doLoadDiscussion=function(e){var t=this;return void 0===e&&(e=this.forumId),this.course.forums.$new(e).messages.$fetch().$asPromise().then((function(e){t.currentDiscussion=e.find((function(e){return!e.groupId}))}))},e.prototype.createDiscussion=function(){var e=this,t=this.ultraState.params,n=this.ultraState.includes("**.course.outline.**")?void 0:t.parentId;return this.loadDiscussionP=this.$q.all([this.buildDiscussion(),this.contentService.makeContentInContentTree(this.engagementRoot,this.contextCourse.courseId,n,t.positionBefore,t.positionAfter)]).then((function(t){var n=t[0],r=t[1];e.currentDiscussion=n,e.hardLinkContent=r.content,e.hardLinkContent.contentHandler=a.r.ContentHandler.Discussion,e.hardLinkContent.visibility=e.contentService.determineVisibility(e.hardLinkContent.isAvailable),e.hardLinkContent.isAvailable=e.currentDiscussion.isAvailable}))},e.prototype.newDiscussionPersist=function(e){var t=this,n=v.f(this.currentDiscussion.body.rawText),r=this.contentService.truncateDescription(n,l.c.MAX_LENGTH_IN_CONTENT_ITEM);return this.currentDiscussion.plaintextDescription=r,this.currentDiscussion.$patch(["body","plaintextDescription"]).$asPromise().then((function(){return t.doLoadDiscussion(e)})).then((function(){t.hardLinkContent.description=r,t.softLinkContent&&(t.softLinkContent.description=r)}))},e.prototype.loadHardContent=function(e){var t=this;if(void 0===e&&(e=!1),this.loadHardContentP)return this.loadHardContentP;var n=(e?"":"alignedGoals,")+"assignedGroups.group,selfEnrollmentGroups.group";return this.loadHardContentP=this.course.contents.$find(this.currentContentId,{expand:n}).$asPromise().then((function(e){return t.hardLinkContent=e}))},e.prototype.loadSoftContent=function(){var e=this;return this.hardLinkContent?this.loadSoftContentP?this.softLinkContent?this.$q.when(this.softLinkContent):this.loadSoftContentP:this.loadSoftContentP=this.hardLinkContent.getSoftLinks({label:"ROOT"}).$asPromise().then((function(t){if(t.length)return e.contentService.getOrMakeContentInContentTree(e.outlineRoot,e.course.id,t[0].courseContent).then((function(t){return e.softLinkContent=t.content}))})):this.$q.when()},e.prototype.persistNew=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t,n,i,o,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.updateHardLinkContent(this.currentDiscussion),[4,this.hardLinkContent.$save().$asPromise()];case 1:return e=r.sent(),this.currentContentId=e.id,this.currentDiscussion=this.updateDiscussion(this.forumId),[4,this.currentDiscussion.$save().$asPromise()];case 2:return r.sent(),[4,this.discussionPermission.canCreateAllContent(this.currentCourseId)];case 3:return r.sent()?[3,5]:[4,this.ultraState.search("contentId",this.currentContentId)];case 4:return r.sent(),[2];case 5:return t=this.ultraState.params,n=t.parentId,i=t.positionBefore,o=t.positionAfter,this.ultraState.includes("**.course.engagement.**")&&(n=this.outlineRoot.id,i=null,o=null),[4,this.contentService.makeSoftLinkContentInContentTree(this.hardLinkContent,this.outlineRoot,this.contextCourse.courseId,n,i,o)];case 6:return(s=r.sent())?(this.softLinkContent=s,this.softLinkContent.title=this.hardLinkContent.title,[4,this.softLinkContent.$save().$asPromise()]):[3,8];case 7:r.sent(),r.label=8;case 8:return[4,this.ultraState.search("contentId",this.currentContentId)];case 9:return r.sent(),[2]}}))}))},e.prototype.expandUsersInParticipants=function(e,t){var n=this;if(void 0===t&&(t=!1),i.isEmpty(e))return this.$q.when(e);var r=e[0];if(null==r||null==r.userId)return this.$q.when(e);var o=e.map((function(e){return e.userId}));return(!t||this.contextCourse.usersCache.hit(o)?this.$q.when():this.courseMembershipsFetcher.$fetchIfNotExpanded({limit:1e4,expand:"user"}).$asPromise()).then((function(){return n.contextCourse.usersCache.fetchUsers(o,n.UserModel,n.$q).then((function(t){return e.forEach((function(e){e.data=t.get(e.userId)})),n.$q.when(e)}))}))},e.prototype.getParticipantCount=function(e){var t=this;return void 0===e&&(e=null),this.loadHardContent().then((function(){return e||(e=t.forumId),t.course.forums.$new(e).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING",groupId:t.groupId}).$then((function(e){return t.expandUsersInParticipants(e)})).$asPromise()})).then((function(e){t.participantCount=e.filter((function(e){return e.topLevelReplyCount+e.secondLevelReplyCount>0})).length}))},e.prototype.queryParticipants=function(e,t,n,r){var i=this;void 0===n&&(n=""),void 0===r&&(r=!1);var o={limit:t,q:n,offset:0,groupId:this.hasGroups()&&this.groupId||""};return this.course.forums.$new(e).usercounts.$fetch(o).$asPromise().then((function(e){return i.expandUsersInParticipants(e,r)}))},e.prototype.queryParticipant=function(e,t){return Object(r.__awaiter)(this,void 0,Promise,(function(){var n,i,o,s,a=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n={userIds:[t],offset:0},[4,this.course.forums.$new(e).usercounts.$fetch(n).$asPromise()];case 1:return i=r.sent(),o=i.map((function(e){return e.userId})),[4,this.contextCourse.usersCache.fetchUsers(o,this.UserModel,this.$q)];case 2:return s=r.sent(),i.forEach((function(e){e.data=s.get(e.userId),e.data||(e.data=c.d(a.$rootScope,a.bbLocalize))})),[2,this.$q.when(i[0])]}}))}))},e.prototype.isPostFirstSatisfied=function(e,t){var n=this;return void 0===t&&(t=this.forumId),this.loadHardContent().then((function(){return n.course.forums.$new(t).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING"}).$then((function(e){return n.expandUsersInParticipants(e)})).$asPromise()})).then((function(t){var n=t.find((function(t){return t.data.id===e}));return!(!n||!n.topLevelReplyCount)}))},e.prototype.refreshParticipationGrade=function(){var e=this;if(!this.hasNoGroups())return this.resolveColumn().then((function(t){t&&(e.column=t,e.column.summary&&e.column.summary.$fetch&&(e.getParticipantCount(),e.column.summary.$fetch({groupId:e.groupId})))}));this.column=void 0},e.prototype.saveContent=function(){var e=this;return this.hardLinkContent.$patch().$then((function(){e.softLinkContent&&e.softLinkContent.id&&(e.softLinkContent.applyAvailabilitySettings(e.hardLinkContent),e.softLinkContent.$patch().$then((function(){e.$rootScope.$broadcast("content-update",e.softLinkContent)}))),e.$rootScope.$broadcast("content-update",e.hardLinkContent),e.$rootScope.$broadcast("attempt-base-content-update",e.hardLinkContent,e.course.id)})).$asPromise()},e.prototype.savePost=function(){this.currentDiscussion.plaintextDescription=this.contentService.truncateDescription(this.currentDiscussion.plaintextDescription,l.c.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent&&(this.hardLinkContent.description=this.currentDiscussion.plaintextDescription,this.hardLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.hardLinkContent)),this.softLinkContent&&(this.softLinkContent.description=this.currentDiscussion.plaintextDescription,this.softLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.softLinkContent))},e.prototype.loadGroup=function(e){var t=this;if(this.hasClassGroup=e,this.assignedGroupsFiltersArray=null,e){var n={name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:"components.directives.conversation.classConversation"}),index:0,groupId:w,extraClass:""};this.assignedGroupsFiltersArray=new Array(n),this.selectedGroup=n}if(this.hasGroups()){var r=!1,i=e?1:0,o=this.hardLinkContent.assignedGroups.map((function(n){var o={name:!e||t.hasEditPermission?n.groupTitle:t.bbLocalize.translateSync({locale:"",key:"components.directives.conversation.myGroup"}),index:i++,groupId:n.groupId,isInGroupSet:!(!n.group||!n.group.groupSetId)};return t.groupId&&t.groupId===o.groupId&&(t.selectedGroup=o,r=!0),o}));this.assignedGroupsFiltersArray=this.assignedGroupsFiltersArray?this.assignedGroupsFiltersArray.concat(o):o,!r&&this.assignedGroupsFiltersArray.length&&(this.selectedGroup=this.assignedGroupsFiltersArray[0],this.groupId=this.selectedGroup.groupId,e||this.refreshParticipationGrade())}else this.groupId=""},e.prototype.clearGroups=function(){var e=this;this.hardLinkContent&&this.contentService.clearContentGroups(this.hardLinkContent,this.course).then((function(){e.groupId="",e.$rootScope.$broadcast("discussion-group-content-update",e.hardLinkContent),e.$rootScope.$broadcast("load-participants")}))},e.prototype.isGroupDiscussion=function(){return!!(this.hardLinkContent&&this.hardLinkContent.isGroupContent&&this.hardLinkContent.assignedGroups)},e.prototype.hasGroups=function(){return this.isGroupDiscussion()&&!!this.hardLinkContent.assignedGroups.length},e.prototype.hasNoGroups=function(){return this.isGroupDiscussion()&&!this.hardLinkContent.assignedGroups.length},e.prototype.isOpenFromConversation=function(){return!!this.ultraState.current.url&&this.ultraState.current.url.indexOf("conversations")>0},Object.defineProperty(e.prototype,"forumId",{get:function(){return this.contentService.parseForumId(this.hardLinkContent.contentDetailUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignedGoalsCount",{get:function(){return this.hardLinkContent&&this.hardLinkContent.alignedGoals?this.hardLinkContent.alignedGoals.length:0},enumerable:!0,configurable:!0}),e.prototype.updateHardLinkContent=function(e){this.hardLinkContent.title=e.subject,this.hardLinkContent.description=this.contentService.truncateDescription(e.plaintextDescription,l.c.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent.visibility=this.contentService.determineVisibility(this.hardLinkContent.isAvailable),this.hardLinkContent.contentDetail={"resource/x-bb-forumlink":{title:e.subject}}},e.prototype.buildDiscussion=function(){var e=this;return this.engagementRoot.$asPromise().then((function(){var t=!1;e.contentService.canOnlyCreateDiscussion(e.engagementRoot)&&(t=!0);var n=e.contextUser.userModel;return e.course.forums.$new().messages.$build({courseId:e.contextCourse.courseId,userId:n.id,postedName:n.userName,subject:e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(null),key:"course.content.discussionTitlePlaceholder"}),body:{rawText:"",displayText:""},isDeleted:!1,isAvailable:t})}))},e.prototype.updateDiscussion=function(e){var t=this.context.getServerTime();return this.course.forums.$new(e).messages.$build({subject:this.currentDiscussion.subject,id:null,forumId:e,parentId:"{unset id}",courseId:this.currentDiscussion.courseId,userId:this.currentDiscussion.userId,postedName:this.currentDiscussion.postedName,body:this.currentDiscussion.body,isDeleted:!1,postDate:t,editDate:t,isAvailable:this.currentDiscussion.isAvailable})},e.prototype.resolveCourse=function(){return this.contextCourse.course?this.contextCourse.course.$asPromise():this.courseModel.$find(this.currentCourseId).$asPromise()},e.prototype.refetchColumn=function(){return this.column?this.column.$fetch({expand:"associatedRubrics"}).$asPromise():this.resolveColumn()},e.prototype.hasViewGradebookColumnPermission=function(){return this.canViewGradebook||this.canViewAttempts||this.canViewAssessments||this.canObserveGradebook},e.prototype.resolveColumn=function(){var e=this;return this.column?this.column.$asPromise():this.loadDiscussion().then((function(){if(e.currentDiscussion.gradedColumn)return e.hasViewGradebookColumnPermission()?e.course.gradebook.columns.$new(e.currentDiscussion.gradedColumn.id).$fetch({expand:"associatedRubrics"}).$asPromise():e.$q.when(e.currentDiscussion.gradedColumn)}))},Object.defineProperty(e.prototype,"isGradedDiscussion",{get:function(){return this.currentDiscussion&&this.currentDiscussion.allowGrading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupId",{get:function(){return this._groupId===w?"":this._groupId},set:function(e){var t=this._groupId;o.isArray(e)?this._groupId=e[0]:this._groupId=e,this._groupId&&this._groupId!==t&&(this.hasClassGroup?this.ultraState.search("groupId",this._groupId):this.ultraState.search("disGroupId",this._groupId))},enumerable:!0,configurable:!0}),e=Object(r.__decorate)([Object(r.__param)(0,Object(b.b)(u.serviceName)),Object(r.__param)(1,Object(b.b)("$rootScope")),Object(r.__param)(2,Object(b.b)("$q")),Object(r.__param)(3,Object(b.b)("$modal")),Object(r.__param)(4,Object(b.b)(a.o.serviceName)),Object(r.__param)(5,Object(b.b)(a.Pb.serviceName)),Object(r.__param)(6,Object(b.b)(d.b)),Object(r.__param)(7,Object(b.b)(l.f)),Object(r.__param)(8,Object(b.b)(f.d)),Object(r.__param)(9,Object(b.b)(h.b)),Object(r.__param)(10,Object(b.b)(g.b)),Object(r.__param)(11,Object(b.b)(m.b)),Object(r.__param)(12,Object(b.b)(p.e))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(k);o.module(S,[a.Q,u.moduleName,d.a,l.d,f.b,h.a,g.a,a.Q]).service(C,k)},gCXj:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("wHJ2"),i=n("nsO7"),o=n("5Dl8"),s=n("TnpK"),a=n("w9Zy"),u=n("pjml"),c="ultra.course.coursemembershipmarkups",l="ultra.course.coursemembershipmarkups.service",d=function(){function e(){this.fn=[]}return e.prototype.onStyleRefresh=function(e){this.fn.push(e)},e.prototype.$get=function(){return this},e}();r.module(c,[u.Q,s.b,a.d]).run([a.e,s.d,u.v.serviceName,"$rootScope",function(e,t,n,r){r.$on(a.c,(function(){t.params.courseId&&e.getTopElement().then((function(e){e.getElement().addClass("cc"+t.params.courseId)}))})),n.$mixHook("after-fetch-many",(function(){var e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];e&&r.$broadcast("course-"+e+"-memberships-after-fetch",Array.prototype.slice.apply(this))}))}]).provider(l,d).directive("bbCourseMembershipMarkups",[l,function(e){return{restrict:"A",scope:!1,link:function(t,n,s){var a=s.bbCourseMembershipMarkups,u="css_course_"+a+"_membership",c={},l=i.once((function(){var e=r.element(document).find("#"+u);return 0===e.length&&(e=r.element('<style id="'+u+'"></style>').appendTo("head"),t.$on("$destroy",(function(){e.remove()}))),e}));t.$root.$on("course-"+a+"-memberships-after-fetch",(function(t,n){t.preventDefault();var r=l();(n=i(n).filter((function(e){return null!=(e.userId||e.user.id)})).map((function(e){return e.userId=e.userId||e.user.id,e})).value()).forEach((function(t){var n=new o.a,r=n.selector(".cc"+a);e.fn.forEach((function(e){e(r,t)})),c[t.id]=n.build()}));var s=i(c).sortBy().map((function(e,t){return e})).join("\n");s!==r.text()&&r.text(s)})),t.$on("course-"+a+"-memberships-before-fetch",(function(e,t){e.preventDefault();var n=t.params||{};n.fields&&(n.fields+=",courseId,dueDateExceptionType,timeLimitExceptionType")}))}}}])},gOJg:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("JzsJ");var r=n("wHJ2"),i=n("0JpG"),o=n("Qbdf"),s=n("TnpK"),a=n("nmzr"),u="ultra.course.contentCreate.routes";r.module(u,[i.moduleName,o.b,s.b]).config([s.c,o.c,function(e,t){var r,s;e.peekState("content-manage.create.document",{panelClass:"full",resolve:(r={translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},r[o.d]=t.resolve,r),reloadOnSearch:!1,peekViewName:"document-peek@",url:"/document",require:function(){return Promise.all([n.e(0),n.e(115),n.e(1),n.e(2),n.e(7),n.e(17),n.e(49),n.e(56),n.e(118)]).then(n.bind(null,"HjlN"))},peekStates:["content-manage.edit.document","document-settings","conversations","edit-file-settings",a.CourseRoutes.COURSE_MESSAGE,"lti","content-market","content-collection","conditional-release"],pageTitle:"course.content.document.title"}).peekState("content-manage.edit.document",{panelClass:"full",resolve:(s={translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},s[o.d]=t.resolve,s),peekViewName:"document-peek@",url:"/document/:id?courseId",require:function(){return Promise.all([n.e(0),n.e(115),n.e(1),n.e(2),n.e(7),n.e(17),n.e(49),n.e(56),n.e(118)]).then(n.bind(null,"HjlN"))},peekStates:["document-settings","conversations","edit-file-settings",a.CourseRoutes.COURSE_MESSAGE,"lti","content-market","conditional-release"],pageTitle:"course.content.document.title"}).peekState("document-settings",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/document-settings/:id",params:{focusEleId:null},require:function(){return Promise.all([n.e(3),n.e(1),n.e(2),n.e(7),n.e(17),n.e(25),n.e(573)]).then(n.bind(null,"Ynio"))},peekViewName:"document-settings-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.document.settings.header"}),e.peekState("content-manage",{abstract:!0,peekStates:["gradebook-item"]}).peekState("content-manage.create",{url:"/create?parentId&positionBefore&positionAfter&id",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},peekStates:["discussion","gradebook-item",a.JournalRoutes.JOURNAL],require:[function(){return Promise.all([n.e(17),n.e(663)]).then(n.bind(null,"a0Ud"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.createItem"}).peekState("content-manage.create.folder",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/folder",require:[function(){return Promise.all([n.e(17),n.e(141)]).then(n.bind(null,"1wJd"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.createFolder"}).peekState("content-manage.create.link",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/link",require:[function(){return Promise.all([n.e(17),n.e(131)]).then(n.bind(null,"KYun"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.createLink"}).peekState("content-manage.create.lti",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/lti",require:[function(){return Promise.all([n.e(17),n.e(132)]).then(n.bind(null,"7OXB"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.createLti"}).peekState("content-manage.create.file",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/file",require:[function(){return Promise.all([n.e(17),n.e(130)]).then(n.bind(null,"ebp7"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.fileTitlePlaceholder"}).peekState("content-manage.edit",{abstract:!0,resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/goal-alignment/goal")}]},url:"/edit"}).peekState("content-manage.edit.folder",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/folder/:id?focusEleId",require:[function(){return Promise.all([n.e(17),n.e(141)]).then(n.bind(null,"1wJd"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],peekStates:["conditional-release"],allowChildPeekStates:!0,pageTitle:"course.content.editFolder"}).peekState("content-manage.edit.file",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/file/:id?focusEleId",require:[function(){return Promise.all([n.e(17),n.e(130)]).then(n.bind(null,"ebp7"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],peekViewName:"file-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release"],pageTitle:"course.content.file"}).peekState("content-manage.edit.link",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/link/:id?focusEleId",require:[function(){return Promise.all([n.e(17),n.e(131)]).then(n.bind(null,"KYun"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release"],pageTitle:"course.content.editLink"}).peekState("content-manage.edit.lti",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/lti/:id?focusEleId",require:[function(){return Promise.all([n.e(17),n.e(132)]).then(n.bind(null,"7OXB"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release"],pageTitle:"course.content.editLti"}).peekState("content-manage.edit.placement",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/placement/:id",require:[function(){return Promise.all([n.e(17),n.e(683)]).then(n.bind(null,"1xSQ"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],peekStates:["conditional-release"],allowChildPeekStates:!0,pageTitle:"course.content.editPlacement"}).peekState("content-manage.import",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/import/content-import"),t.loadBundle("features/course/content/course-content")])}]},url:"/import?parentId&targetCourseId&oneDriveButtonId&positionBefore&positionAfter",require:[function(){return Promise.all([n.e(49),n.e(617)]).then(n.bind(null,"dTsQ"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.import.title"}).peekState("content-manage.copy",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/copy/content-copy"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/organization/content/copy/content-copy")])}]},url:"/copy?parentId&targetCourseId&positionBefore&positionAfter&depth",require:[function(){return Promise.all([n.e(13),n.e(592)]).then(n.bind(null,"9fW2"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(13),n.e(1),n.e(2),n.e(18)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.copy.title"}).peekState("content-manage.import-report",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},url:"/importReport/:id",require:function(){return Promise.all([n.e(59),n.e(54),n.e(693)]).then(n.bind(null,"O9bg"))},pageTitle:"ultra.convert.analysis.importDetailsTitle"}).peekState("content-manage.copy-details",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},url:"/copyDetails",require:function(){return Promise.all([n.e(59),n.e(54),n.e(682)]).then(n.bind(null,"EdNC"))},pageTitle:"ultra.convert.analysis.copyDetailsTitle"})}])},gSbt:function(e,t,n){},gZo5:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("D57K"),i=n("wHJ2"),o="ultra.services.messaging",s="crossWindowMessaging",a="ultra.crossWindowMessagingService",u=function(){function e(e){var t=this;this.$rootScope=e,this.broadcastChannel=new BroadcastChannel(a),this.onMessage=this._onMessage.bind(this),this.broadcastChannel.addEventListener("message",this.onMessage),e.$on("$destroy",(function(){t.broadcastChannel.close(),t.broadcastChannel.removeEventListener("message",t.onMessage)}))}return e.prototype._onMessage=function(e){var t=e.data;this.$rootScope.$broadcast(t.type,t.message)},e.prototype.postMessage=function(e,t){this.broadcastChannel.postMessage({type:e,message:t})},e.$inject=["$rootScope"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);i.module(o,[]).service(s,u)},gkef:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var r=n("D57K"),i=n("wHJ2"),o=n("nsO7"),s="ultra.services.windowSize",a="windowSizeService",u=100,c=function(){function t(t){var n=this;this.$rootScope=t,this.SMALL_SIZE_MAX=40,this.MEDIUM_SIZE_MAX=64,this.LARGE_SIZE_MAX=90,this.hasQueuedRefreshWindowSizeEm=!1,this.currentWindowSizeEm=e(window).width()/parseFloat(e("html").css("font-size"));var r=Object(o.throttle)((function(){var t=window.innerWidth/parseFloat(e("html").css("font-size"));t!==n.currentWindowSizeEm&&n.$rootScope.$apply((function(){n.currentWindowSizeEm=t,n.$rootScope.$broadcast("window-resize",n.currentWindowSizeEm)}))}),u);window.addEventListener("resize",r)}return t.prototype.isSmallBreakpoint=function(){return this.currentWindowSizeEm<=this.SMALL_SIZE_MAX},t.prototype.isMediumBreakpoint=function(){return this.currentWindowSizeEm>this.SMALL_SIZE_MAX&&this.currentWindowSizeEm<=this.MEDIUM_SIZE_MAX},t.prototype.isLargeBreakpoint=function(){return this.currentWindowSizeEm>this.MEDIUM_SIZE_MAX},t.prototype.getBreakpointSize=function(){return this.currentWindowSizeEm<=this.SMALL_SIZE_MAX?"small":this.currentWindowSizeEm<=this.MEDIUM_SIZE_MAX?"medium":"large"},t.prototype.isWindowSizeAtLeast=function(e){return this.currentWindowSizeEm>=e},t.$inject=["$rootScope"],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);i.module(s,[]).service(a,c)}).call(this,n("5iHu"))},gm4d:function(e,t,n){"use strict";var r=n("D57K"),i={baseMessagesPageRefactor:!0,batchRestAPI:!0,collab:!0,componentDemos:!1,courseNotice:!1,devtools_allyMock:!1,devtools_digestHub:!0,devtools_disableFtue:!1,devtools_enableSetLangQuery:!1,differentiatedFeedback:!0,externalCourse:!1,gradebookSearchFilterM2:!0,gradebookSearchFilterM3:!0,guestAccessToOriginalCourseCatalog:!0,instructorPushNotifications:!0,httpEase:!0,journal:!1,learnApiCaching:!0,learningModule:!0,notificationAdmin:!0,offcanvasPausalScope:!0,organizationA4L:!1,organizationPredict:!1,originalCourseMessage:!0,overallGradeAlert:!1,peerAssessmentFeatureFlag:!1,perAssessmentSettings:!0,predictSisCards:!1,questionResponseTextAttachmentUpload:!0,questionRegrading:!0,reactAssessmentsSettings:!1,rightToLeftSupport:!1,sharedNotesEditing:!0,studentListView:!0,studentPreview:!0,targetedNotificationMilestone3:!1,unsubmittedZeroM1:!0,useBbmlInDiscussion:!0,useReactRendererForDocumentEditor:!1},o={externalCourse:!1,reactAssessmentsSettings:!1,devtools_allyMock:!1,devtools_disableFtue:!1},s={externalCourse:!1,reactAssessmentsSettings:!1,devtools_allyMock:!1,devtools_disableFtue:!1},a={devtools_enableSetLangQuery:!0},u=function(e,t,n){return!(e in n)||n[e]},c={"^(https://ultra-integ.int.bbpd.io)$":function(e,t){return u(e,0,o)},"^(https://ultra-canary.bbpd.io)$":function(e,t){return u(e,0,s)},".*(bbpd.io)":function(e,t){return function(e,t,n){return e in n?n[e]:i[e]}(e,0,a)}},l=n("Q/M7");t.a=function(){var e=Object(r.__assign)({},i),t=l.j(),n=c[Object.keys(c).find((function(e){return!!t.match(e)}))];if("all"===n)for(var o=0,s=Object.keys(e);o<s.length;o++){e[d=s[o]]=!0}else if("function"==typeof n)for(var a=0,u=Object.keys(e);a<u.length;a++){var d;e[d=u[a]]=n(d,e[d])}else null!=n&&Object.assign(e,n);return e}()},go4a:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r=function(e,t){var n;return"static/images/default-banners/"+(e.course&&e.course.isOrganization?"structure":"nature")+(void 0===(n=e.courseCardColorIndex)&&(n=0),void 0===n&&(n=0),n%20+1)+(t?"_thumb":"")+".jpg"},i=function(e){return e.course&&e.course.isClassic()?"course-color-classic":"course-color-"+(void 0===(t=e.courseCardColorIndex)&&(t=0),t%10+1);var t},o=function(e){return r(e,!1)},s=function(e){return r(e,!0)}},hWgD:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.partner-tool.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("partner-tool",{abstract:!0,url:"/partners/:partnerId"}).peekState("partner-tool.tool",{url:"/tools/:toolType?partnerParentId&mode",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content-market/content-market")}]},params:{partnerTitle:"",toolHref:"",returnState:null},panelClass:"full",require:function(){return Promise.all([n.e(10),n.e(129),n.e(642)]).then(n.bind(null,"HgnN"))},pageTitle:"course.partnerTool.partnerTool"})}])},hkqm:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n("wHJ2"),i=n("H8CZ"),o=n("0JpG"),s=n("3FFP"),a=n("GbAM"),u=n("n1KZ"),c=n("lBPC"),l="ultra.services.toast",d="toast",p=function(){function e(e,t,n,r,i){this.$compile=e,this.$q=t,this.$rootScope=n,this.$timeout=r,this.localize=i,this.toastQueue=[]}return e.prototype.show=function(t){var n=this;if(!t)throw new Error("args is required");if(!t.messageKey)throw new Error("messageKey is required");this.setUpToast({bundlePromise:t.bundle?this.localize.loadBundle(t.bundle):this.$q.when(),createScope:function(){var e=n.$rootScope.$new(!0);return e.message=n.localize.translateSync({locale:t.locale||n.localize.getLocale(e),key:t.messageKey,params:t.translationParams,noWrap:!0,noEscape:!0}),e.shortMessage=t.shortMessageKey&&n.localize.translateSync({locale:t.locale||n.localize.getLocale(e),key:t.shortMessageKey,params:t.translationParams,noWrap:!0,noEscape:!0}),e.icon=t.icon||"icon-alert-triangle",e.toastClass=t.toastClass,e.toastStatus=t.toastStatus,e},triggerToastClose:function(r,i,o,s){i.$root.$broadcast(a.b,i.message);var u=function(){if(i.isActive){var o=t.durationMS||e.DEFAULT_DISPLAY_MS;n.toastQueue.length>1&&(o=Math.min(e.RUSH_DISPLAY_MS,o)),(new Date).getTime()-r.startTime>=o?s():n.$timeout(u,1e3,!1)}};u(),n.$timeout((function(){o.addClass("is-active")}),0,!1)},onCloseToast:this.closeToast,template:u})},e.prototype.showLoading=function(e){var t=this;if(!e)throw new Error("args is required");if(!e.trayId)throw new Error("messageKey is required");e.promise.then((function(){return e.promise.done=!0}));return this.setUpToast({bundlePromise:this.$q.when(),createScope:function(){var n=t.$rootScope.$new(!0);return n.trayId=e.trayId,n.trayLocalizationKeysPrefix=e.trayLocalizationKeysPrefix,n},triggerToastClose:function(t,n,r,i,o){e.promise.then((function(){i()}),(function(){o()})),n.$root.$broadcast(s.a.LoadMoreResults.eventName,e.trayId,e.promise,null,!0,e.delayTime)},template:c,footerCss:e.footerCss,promise:e.promise})},e.prototype.setUpToast=function(e){var t,n=this,i=this.$q.defer(),o=this.toastQueue[this.toastQueue.length-1]||this.$q.when();return this.toastQueue.push(i.promise),this.$q.all([o,e.bundlePromise]).then((function(){if(i.startTime=(new Date).getTime(),!e.promise||!e.promise.done){var o,s=e.createScope(),a=function(){e.onCloseToast&&e.onCloseToast(s,o),n.cleanUpToast(i,s,o)};return t=function(){n.cancelToast(i,s,o)},s.isActive=!0,s.toastClicked=function(){a()},o=n.$compile(e.template)(s),r.element(document.body).append(o),o.addClass(e.footerCss),e.triggerToastClose(i,s,o,a,t),i.promise}i.resolve()})).then((function(){n.toastQueue.shift()})),function(){return t&&t()}},e.prototype.closeToast=function(e,t){e.isActive&&t.removeClass("is-active")},e.prototype.cleanUpToast=function(e,t,n){var r=this;t.isActive&&(t.isActive=!1,i.b(n,(function(){r.cancelToast(e,t,n)})))},e.prototype.cancelToast=function(e,t,n){e.resolve(),n.remove(),t.$destroy()},e.DEFAULT_DISPLAY_MS=6e3,e.RUSH_DISPLAY_MS=3e3,e.$inject=["$compile","$q","$rootScope","$timeout",o.serviceName],e}();r.module(l,[o.moduleName,s.b]).service(d,p)},hlSw:function(e,t,n){"use strict";var r=n("nsO7"),i=n("wHJ2"),o=n("nYZ0"),s=n("Qbdf"),a=n("oi1r"),u=n("P2dS"),c=n("0JpG"),l=n("pjml"),d=n("TnpK"),p=n("ZQFV"),m=function(){function e(){}return e.currentColumn=[d.d,s.d,"currentContent",function(e,t,n){if(n){var r=e.params.columnId||e.nextParams.columnId;return t.gradebook.columns.$buildRaw(n.getAssociatedGradingColumn(r)).$asPromise().then((function(e){return null==e.rubricAssociations?e.$fetch({expand:"associatedRubrics,externalGrade"}).$asPromise().then((function(e){return e.$asPromise()})):e.$asPromise()}))}var i=e.nextParams.columnId;if(i&&i!==l.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(i,{expand:"associatedRubrics,externalGrade"}).$asPromise()}],e.assignmentContent=[s.d,d.d,function(e,t){var n=t.nextParams.contentId?t.nextParams.contentId:t.nextParams.id;if(n){return e.contents.$find(n,{expand:"alignedGoals,assignedGroups,isGroupContent,permissions"}).$asPromise()}}],e.assessmentContent=[s.d,"$q",c.serviceName,o.f,d.d,a.b,u.b,function(e,t,n,o,s,a,u){if(s.nextParams.contentId!==l.r.CREATE_CONTENT_ID)return o.getContentInContentTree(o.findRootNode(e,l.r.ContentRootNode.ROOT),e.id,s.nextParams.contentId).then((function(e){return e.content.$asPromise()}));var c=t.defer();return a.loadSchemas(e).then((function(t){o.getOrMakeContentInContentTree(o.findRootNode(e,l.r.ContentRootNode.ROOT),e.id,void 0,s.nextParams.parentId,s.nextParams.positionBefore,s.nextParams.positionAfter).then((function(o){var a=o.content,d=r.find(t,(function(e){return l.I.ScaleType.Score.isEqualTo(e.scaleType)})),m=s.nextParams.gradebookCategoryId,f=null;u.getOrLoadCategoriesForCourse(e.id).then((function(e){f=r.find(e,(function(e){return e.id===m}))})).then((function(){a.courseId=e.id,a.contentHandler=l.r.ContentHandler.TestLink,a.body={};var t="course.grades.gradebook-item.title.default."+(f?f.isUserDefined?"custom":f.title:"test"),r=f&&f.isUserDefined?{today:new Date,title:f.title}:{today:new Date};a.title=n.translateSync({locale:e&&e.locale,key:t,params:r,noWrap:!0}),a.setupAssessmentContentDetail(d.id,f),a.setVisibility(l.r.Visibility.Hidden),a.getAssociatedGradingColumn().visible=!1,a.getAssociatedGradingColumn().possible=p.Utils.GRADE_DEFAULT_POINTS,a.ui.hasConversationAttached=!1,a.permissions={edit:!0},a.$save().$asPromise().then((function(){c.reject(),s.go(s.next.name,i.extend(s.nextParams,{contentId:a.id,gradeitemView:"details",isCreateState:!0,parentId:void 0,positionBefore:void 0,positionAfter:void 0}))}))}))}))})),c.promise}],e.currentContent=[s.d,"$injector",d.d,"translations",function(t,n,r){return-1===r.next.name.indexOf("gradebook-item.assessment")&&-1===r.next.name.indexOf("gradebook-item.scorm-submissions")?n.invoke(e.assignmentContent,null,{currentCourse:t}):n.invoke(e.assessmentContent,null,{currentCourse:t})}],e.nullContent=[function(){return null}],e}();t.a=m},hlUp:function(e,t){e.exports='<div id="aria-live-polite-region-1" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-polite-region-2" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-assertive-region-1" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>\n<div id="aria-live-assertive-region-2" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>'},hqh6:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("XLiA"),n("t3ZG"),n("xjJw");var r=n("nsO7"),i=n("5iHu"),o=n("wHJ2"),s=n("0JpG"),a=n("WShm"),u=n("oQrK"),c=n("XGja"),l=n("+4Px"),d=n("wgY5"),p=n("V6ed"),m="ultra.components.directives.datepicker",f=function(){function e(e,t,n,r,i,o,s,a){var u=this;this.scope=e,this.element=t,this.attrs=n,this.model=r,this.$transclude=i,this.bbLocalize=o,this.bbValidateDate=s,this.$compile=a,this.attrs.firstDayOfWeek?this.scope.$watch(""+this.attrs.firstDayOfWeek,(function(e){void 0!==e&&(u.weekStart=e,u.initialize())})):this.initialize()}return e.prototype.initialize=function(){var e=this,t=this.bbLocalize.getLocale(this.scope);null==this.attrs.bbValidateDate&&(this.attrs.bbValidateDate="short",this.bbValidateDate[0].compile(this.element,this.attrs,void 0)(this.scope,this.element,this.attrs,this.model,this.$transclude));if(!u.a.detect().desktop()&&window.Modernizr.inputtypes.date){if(this.setupNativeDatePicker(),this.attrs.$set("type","date"),this.element.removeAttr("placeholder"),this.attrs.bbTranslateAttrs){var r=this.scope.$eval(this.attrs.bbTranslateAttrs);r.placeholder&&(delete r.placeholder,this.attrs.bbTranslateAttrs=JSON.stringify(r))}}else{this.bbLocalize.loadBundle("components/directives/datepicker").then((function(){null==e.attrs.placeholder&&e.attrs.$set("placeholder",e.bbLocalize.translateSync({locale:t,key:"components.directives.datepicker.dateFormatPlaceholder"}));var n=e.bbLocalize.translateSync({locale:t,key:"components.directives.datepicker.ariaLabel.datepickerButton"});e.widgetButton=e.$compile('<button class="open-datepicker super-clear" aria-label="'+n+'" type="button"><bb-svg-icon size="small" icon="calendar"></bb-svg-icon></button>')(e.scope),e.updateReadOnlyState(),e.attrs.$observe("disabled",(function(t){e.updateReadOnlyState()})),e.attrs.$observe("readonly",(function(t){e.updateReadOnlyState()}))}));var o=this.bbLocalize.preProcessFormatterLocale(t).replace(/_/g,"-");["zh-TW","zh-CN","rs-latin","pt-BR","nl-BE"].indexOf(o)<0&&(o="en-SC"===o?"ar":"ko-KR"===o?"kr":o.substring(2,0)),this.attrs.$set("type","text");var s=this.bbLocalize.isRTL(this.scope),a="left",c="right";if(s&&(a="right",c="left"),this.attrs.container){var l=i(this.attrs.container);l.length&&(this.container=l)}this.attrs.orientation&&(this.orientation=this.attrs.orientation);var d={todayHighlight:!0,autoclose:!0,forceParse:!1,container:this.container,keyboardNavigation:!1,language:o,orientation:this.orientation,weekStart:this.weekStart,rtl:s,showOnFocus:!1,startDate:new Date("1900-01-01"),templates:{leftArrow:'<div class="icon-arrow-'+a+'"></div>',rightArrow:'<div class="icon-arrow-'+c+'"></div>'}};"en"===o?this.setupBootstrapDatePicker(d):(o="bootstrap-datepicker."+o,n.e(527).then(function(){n("OfSV")("./"+o).then((function(){e.setupBootstrapDatePicker(d)}))}.bind(null,n)).catch((function(){}))),this.scope.$on("$destroy",(function(){e.element.datepicker("destroy")}))}},e.prototype.setupNativeDatePicker=function(){var e=this;this.scope.$watch((function(){return e.model.$modelValue}),(function(t){t&&(e.element.val(d(t).format("YYYY-MM-DD")),e.element.triggerHandler("change"),e.model.$render())}))},e.prototype.setupBootstrapDatePicker=function(e){var t=this;this.element.datepicker(e).data("datepicker");this.scope.$watch((function(){return t.model.$modelValue}),(function(){t.updateDatepicker()})),this.element.on("changeDate",(function(e){e.date&&(t.element.val(e.date.getFullYear()+"-"+(e.date.getMonth()+1)+"-"+e.date.getDate()),t.element.triggerHandler("change"),t.model.$render())}));var n=this.element.data("datepicker");n.isInput=!1,this.element.unbind("keyup",n._events[0][1].keyup),this.element.on("show changeMonth changeYear",(function(e){t.datepickerDropdownElement=i(".datepicker-dropdown"),t.iconArrowLeft=t.datepickerDropdownElement.find(".icon-arrow-left"),t.iconArrowRight=t.datepickerDropdownElement.find(".icon-arrow-right"),t.openDatepickerButton=t.element.siblings("button.open-datepicker");var n=[];t.datepickerDropdownElement.find("td.day").not(".old").not(".new").each((function(){n.push(i(this))})),t.currentMonthDays=n,t.datepickerDropdownElement.on("keydown",(function(e){e.keyCode===l.g&&(t.openDatepickerButton.focus(),t.element.datepicker("hide"))})),t.iconArrowLeft.add(t.iconArrowRight).on("blur",(function(){t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true")})),t.iconArrowLeft.off("keydown").on("keydown",(function(e){e.preventDefault(),e.keyCode!==l.g&&e.stopPropagation(),e.keyCode===l.t||e.keyCode===l.f?(t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),t.goToPreviousMonth()):e.keyCode===l.u&&(e.shiftKey?(t.openDatepickerButton.focus(),t.element.datepicker("hide")):t.focusElement(t.iconArrowRight))})),t.iconArrowRight.off("keydown").on("keydown",(function(e){e.preventDefault(),e.keyCode!==l.g&&e.stopPropagation(),e.keyCode===l.t||e.keyCode===l.f?(t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),t.goToNextMonth()):e.keyCode===l.u&&(e.shiftKey?t.focusElement(t.iconArrowLeft):t.focusDefaultDay())})),t.updateAriaRolesAndStates(t.getViewDate(),e.date),t.setUpKeyboardNavigation(),"show"===e.type&&(t.datepickerDropdownElement.find("tfoot").remove(),t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true"),t.datepickerDropdownElement.on("keyup",(function(e){e.stopPropagation()})),t.focusDefaultDay())}))},e.prototype.updateDatepicker=function(){var e=this.model.$modelValue,t=this.element.data("datepicker");if(o.isDate(e)&&t){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDate();r&&r.getTime()===n.getTime()||(t.dates.replace([n]),t.viewDate=n,t.fill())}},e.prototype.updateReadOnlyState=function(){var e=this;this.element.prop("disabled")||this.element.prop("readonly")?this.widgetButton.remove():this.element.next()!==this.widgetButton&&(this.widgetButton.click((function(t){e.element.datepicker("show")})),this.element.after(this.widgetButton))},e.prototype.focusDefaultDay=function(){var e=r.find(this.currentMonthDays,(function(e){return e.hasClass("active")})),t=null!=e?e:this.currentMonthDays[0];this.focusElement(t)},e.prototype.focusPreviousDay=function(){var e=this.getActiveElementIndex();0===e?(this.goToPreviousMonth(),this.focusLastDayOfMonth()):this.focusElement(this.currentMonthDays[e-1])},e.prototype.focusNextDay=function(){var e=this.getActiveElementIndex();e<this.currentMonthDays.length-1?this.focusElement(this.currentMonthDays[e+1]):(this.goToNextMonth(),this.focusElement(this.currentMonthDays[0]))},e.prototype.focusSameWeekdayOfPreviousWeek=function(){var e=this.getActiveElementIndex();if(e-7>=0)this.focusElement(this.currentMonthDays[e-7]);else{var t=7-e;this.goToPreviousMonth(),this.focusElement(this.currentMonthDays[this.currentMonthDays.length-t])}},e.prototype.focusSameWeekdayOfNextWeek=function(){var e=this.getActiveElementIndex();if(e+7<this.currentMonthDays.length)this.focusElement(this.currentMonthDays[e+7]);else{var t=e+7-this.currentMonthDays.length;this.goToNextMonth(),this.focusElement(this.currentMonthDays[t])}},e.prototype.focusSameDayOfPreviousMonth=function(){this.focusSameDayOfAdjacentMonth(-1)},e.prototype.focusSameDayOfNextMonth=function(){this.focusSameDayOfAdjacentMonth(1)},e.prototype.focusSameDayOfAdjacentMonth=function(e){var t=this.getActiveElementIndex();e>0?this.goToNextMonth():this.goToPreviousMonth(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()},e.prototype.focusSameDayOfPreviousYear=function(){this.focusSameDayOfAdjacentYear(-1)},e.prototype.focusSameDayOfNextYear=function(){this.focusSameDayOfAdjacentYear(1)},e.prototype.focusSameDayOfAdjacentYear=function(e){var t=this.getActiveElementIndex();e>0?this.goToNextYear():this.goToPreviousYear(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()},e.prototype.focusFirstDayOfMonth=function(){this.focusElement(this.currentMonthDays[0])},e.prototype.focusLastDayOfMonth=function(){this.focusElement(this.currentMonthDays[this.currentMonthDays.length-1])},e.prototype.focusElement=function(e){e.attr("tabindex","-1").focus()},e.prototype.getViewDate=function(){return this.element.data("datepicker").viewDate},e.prototype.setViewDate=function(e){this.element.data("datepicker").viewDate=e},e.prototype.getActiveElementIndex=function(){return r.findIndex(this.currentMonthDays,(function(e){return e.attr("id")===i(document.activeElement).attr("id")}))},e.prototype.goToPreviousMonth=function(){this.moveMonth(-1)},e.prototype.goToNextMonth=function(){this.moveMonth(1)},e.prototype.goToPreviousYear=function(){this.moveYear(-1)},e.prototype.goToNextYear=function(){this.moveYear(1)},e.prototype.moveMonth=function(e){var t=this.getViewDate();this.setViewDate(this.element.datepicker("moveMonth",t,e)),this.element.datepicker("fill"),this.element.trigger("changeMonth")},e.prototype.moveYear=function(e){var t=this.getViewDate();this.setViewDate(this.element.datepicker("moveYear",t,e)),this.element.datepicker("fill"),this.element.trigger("changeYear")},e.prototype.updateAriaRolesAndStates=function(e,t){var n=this,r=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.datepicker.ariaLabel.container"});this.datepickerDropdownElement.attr("role","application").attr("aria-label",r),this.datepickerDropdownElement.find("table").attr("role","grid").attr("aria-label",r);var o=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.datepicker.ariaLabel.previousMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-left").attr("aria-label",o).attr("role","button");var s=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.datepicker.ariaLabel.nextMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-right").attr("aria-label",s).attr("role","button"),this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-live","assertive").attr("aria-atomic","true"),this.datepickerDropdownElement.find("thead th").attr("role","gridcell"),this.datepickerDropdownElement.find("table").removeAttr("aria-activedescendant");var a=d(e),u=d(a).subtract({months:1}),c=d(a).add({months:1});this.datepickerDropdownElement.find("td").each((function(e,t){var r,o=i(t);r=o.hasClass("old")?u.toDate():o.hasClass("new")?c.toDate():a.toDate();var s=d({year:r.getFullYear(),month:r.getMonth(),day:+o.text()});o.attr("aria-label",n.bbLocalize.formatDateSync(s.toDate()));var l="datepicker-td-"+s.unix();o.attr("id",l),o.hasClass("active")&&(o.attr("aria-selected","true"),n.datepickerDropdownElement.find("table").attr("aria-activedescendant",l)),o.attr("role","gridcell")}))},e.prototype.setUpKeyboardNavigation=function(){var e=this;this.currentMonthDays.forEach((function(t){t.off("keydown").on("keydown",(function(t){switch(t.preventDefault(),t.keyCode!==l.f&&t.keyCode!==l.g&&t.stopPropagation(),p.a.enableFocusOutline(),t.keyCode){case l.j:e.focusPreviousDay();break;case l.s:e.focusNextDay();break;case l.v:e.focusSameWeekdayOfPreviousWeek();break;case l.d:e.focusSameWeekdayOfNextWeek();break;case l.q:t.ctrlKey||t.altKey?e.focusSameDayOfPreviousYear():e.focusSameDayOfPreviousMonth();break;case l.p:t.ctrlKey||t.altKey?e.focusSameDayOfNextYear():e.focusSameDayOfNextMonth();break;case l.i:e.focusFirstDayOfMonth();break;case l.e:e.focusLastDayOfMonth();break;case l.u:t.shiftKey?e.focusElement(e.iconArrowRight):(c.b(null,e.openDatepickerButton),e.element.datepicker("hide"));break;case l.f:case l.t:e.currentMonthDays[e.getActiveElementIndex()].click(),e.openDatepickerButton.focus()}}))}))},e.$inject=["scope","element","attrs","model","$transclude",s.serviceName,a.a+"Directive","$compile"],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.priority=1,this.restrict="A",this.require="ngModel",this.link=function(e,n,r,i,o){e.datepicker=t.$injector.instantiate(f,{scope:e,element:n,attrs:r,model:i,$transclude:o})}}return e.$inject=["$injector"],e}();o.module(m,[s.moduleName,a.b]).directive("bbDatePicker",["$injector",function(e){return e.instantiate(h)}])},i2kg:function(e,t,n){},i8dz:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n("KCTV");var r=n("wHJ2"),i=n("+4Px"),o="ultra.directives.bbFoundationDropdownClose",s="bbFoundationDropdownClose",a=function(){this.restrict="A",this.link=function(t,n,r){var o="keyup."+s;n.on("click",(function(t){var r=e(t.target);if(r.closest("[data-dropdown]").length<=0&&(r.closest(".f-dropdown").length<=0||r.closest(".f-dropdown a").length>0)){var i=n.find(".f-open-dropdown");if(i.length&&i.foundation("dropdown","close",i),window.top!==window){var o=e(window.parent.document).find(".f-open-dropdown");o.foundation("dropdown","close",o)}}})),n.on("scroll",(function(t){var n=e(t.target);n.hasClass("f-dropdown")||0!==n.parents(".f-dropdown").length||e(".f-open-dropdown").each((function(){e(this).foundation("dropdown","close",e(this))}))})),e("body").on(o,(function(t){if(t.keyCode===i.u){var r=n.find(".f-open-dropdown"),o=e(document.activeElement).is(".f-open-dropdown"),s=e(document.activeElement).parents(".f-open-dropdown").length>0;o||s||r.foundation("dropdown","close",r)}})),t.$on("$destroy",(function(){n.off(),e("body").off(o)}))}};r.module(o,[]).directive(s,["$injector",function(e){return e.instantiate(a)}])}).call(this,n("5iHu"))},iAaI:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("Sa5G"),o=n("0JpG"),s=n("TnpK"),a="ultra.base.admin.theme.routes";r.module(a,[o.moduleName,s.b]).config([s.c,function(e){e.peekState("colorSelection",{systemEntitlement:i.D.ViewAdmin,url:"/theme/:themeId/colorSelection",require:function(){return n.e(600).then(n.bind(null,"xCEN"))},pageTitle:"base.admin.theme.colorSelection.title",panelClass:"full"})}])},iVgd:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("+4Px"),o="ultra.directives.accessibility.keyboardClick",s=function(){this.restrict="A",this.link=function(t,n,r){n.on("keyup",(function(t){var n=e(t.target),r=n.closest(".react-container").length>0;(t.keyCode!==i.f||r||"file"===n.attr("type")||"INPUT"===n.prop("tagName")&&("INPUT"!==n.prop("tagName")||"checkbox"!==n.prop("type"))||"BUTTON"===n.prop("tagName")||"BODY"===n.prop("tagName")||"A"===n.prop("tagName")&&n.attr("href"))&&(t.keyCode!==i.t||r||"A"!==n.prop("tagName")&&("DIV"!==n.prop("tagName")||"button"!==n.attr("role")))||n.trigger("click")}))}};r.module(o,[]).directive("bbKeyboardClick",["$injector",function(e){return e.instantiate(s)}])}).call(this,n("5iHu"))},imME:function(e,t,n){},"iwI+":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("wHJ2"),i=n("0JpG"),o=n("w9Zy"),s=n("TnpK"),a=n("0wat"),u="ultra.base.tools.routes";r.module(u,[s.b]).config([s.c,function(e){e.state("base.tools.legacy",{url:"/:toolName",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/tools/base-tools")}],offCanvasArgs:[s.d,function(e){return{panelClass:"full",template:a,close:function(){e.goCurrentBasePage()},stateName:"base.tools.legacy"}}]},require:function(){return Promise.resolve().then(n.bind(null,"yA26"))},onExit:[o.e,function(e){e.close("base.tools.legacy")}],pageTitle:"base.tools.pageTitle"})}])},j2IR:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("wHJ2"),i=n("0JpG"),o=n("w9Zy"),s=n("go4a"),a=n("pjml"),u=n("TnpK"),c=n("Qbdf"),l=n("fYJU"),d=n("nmzr"),p="ultra.telemetry.routes";function m(e,t,n,r){var i=e.defer(),o=t.courseId;return o?n.$new(o).users.$find(r.userId).$then((function(e){i.resolve(s.a(e))})):i.resolve(null),i.promise}r.module(p,[i.moduleName,o.d,a.Q,u.b,c.b]).config([u.c,c.c,function(e,t){var r,o,s,u,p,f,h;e.peekState("telemetry-settings",{url:"/telemetry-settings",require:function(){return Promise.all([n.e(1),n.e(127),n.e(611)]).then(n.bind(null,"W9KP"))},resolve:{currentCourseColor:["$q","$stateParams",a.o.serviceName,l.b,function(e,t,n,r){return m(e,t,n,r)}]}}).peekState(d.TelemetryRoutes.INSTRUCTOR_CLASS,{url:"/telemetry/activityVsGrade/:courseId?notificationId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(9),n.e(16),n.e(23),n.e(32),n.e(47),n.e(595)]).then(n.bind(null,"7FjY"))},panelClass:"full",resolve:(r={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},r[c.d]=t.resolve,r),peekStates:[d.CourseRoutes.COURSE_MESSAGE,"event-create","telemetry-settings",d.TelemetryRoutes.INSTRUCTOR_DETAILS],peekViewName:"telemetry-instructor-class-base@",pageTitle:"components.directives.telemetry.panel.titleInstructor"}).peekState(d.TelemetryRoutes.INSTRUCTOR_DETAILS,{url:"/telemetry/timeSeries/:courseId?userId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(9),n.e(16),n.e(23),n.e(32),n.e(591)]).then(n.bind(null,"AxRA"))},panelClass:"full",resolve:(o={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},o[c.d]=t.resolve,o),peekStates:[d.CourseRoutes.COURSE_MESSAGE,"event-create","telemetry-settings"],peekViewName:"telemetry-instructor-details-base@",pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(d.TelemetryRoutes.STUDENT_HIGH_PERFORMANCE,{url:"/telemetry/student/high-performance/:courseId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(9),n.e(16),n.e(23),n.e(32),n.e(47),n.e(605)]).then(n.bind(null,"5a0X"))},panelClass:"peek",resolve:(s={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},s[c.d]=t.resolve,s.currentCourseColor=["$q","$stateParams",a.o.serviceName,l.b,function(e,t,n,r){return m(e,t,n,r)}],s),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(d.TelemetryRoutes.STUDENT_LOW_ACTIVITY,{url:"/telemetry/student/low-performance/activity/:courseId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(9),n.e(16),n.e(23),n.e(32),n.e(47),n.e(612)]).then(n.bind(null,"ADyW"))},panelClass:"peek",resolve:(u={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},u[c.d]=t.resolve,u.currentCourseColor=["$q","$stateParams",a.o.serviceName,l.b,function(e,t,n,r){return m(e,t,n,r)}],u),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(d.TelemetryRoutes.STUDENT_LOW_GRADES,{url:"/telemetry/student/low-performance/grades/:courseId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(9),n.e(16),n.e(23),n.e(32),n.e(47),n.e(613)]).then(n.bind(null,"vOTS"))},panelClass:"peek",resolve:(p={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},p[c.d]=t.resolve,p.currentCourseColor=["$q","$stateParams",a.o.serviceName,l.b,function(e,t,n,r){return m(e,t,n,r)}],p),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(d.TelemetryRoutes.STUDENT_PROGRESS,{url:"/telemetry/student/progress/:courseId",require:function(){return Promise.all([n.e(21),n.e(26),n.e(9),n.e(16),n.e(23),n.e(32),n.e(589)]).then(n.bind(null,"09dT"))},panelClass:"peek",resolve:(f={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},f[c.d]=t.resolve,f.currentCourseColor=["$q","$stateParams",a.o.serviceName,l.b,function(e,t,n,r){return m(e,t,n,r)}],f),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(d.TelemetryRoutes.STUDENT_FIND_A_STUDY_PARTNER,{url:"/telemetry/student/request-study-help/:courseId",require:function(){return n.e(588).then(n.bind(null,"cU3T"))},panelClass:"peek",resolve:(h={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry")])}]},h[c.d]=t.resolve,h.currentCourseColor=["$q","$stateParams",a.o.serviceName,l.b,function(e,t,n,r){return m(e,t,n,r)}],h),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(d.TelemetryRoutes.CONTENT_ACTIVITY_IN_DETAIL,{url:"/telemetry/instructor/activity-in-detail/:contentId",require:function(){return Promise.all([n.e(21),n.e(1),n.e(9),n.e(32),n.e(557)]).then(n.bind(null,"AeD7"))},panelClass:"full",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/telemetry/telemetry")}],currentContent:["$stateParams",c.d,function(e,t){var n=e.contentId;return t.contents.$find(n).$asPromise()}]},pageTitle:"components.directives.telemetry.panel.titleStudentActivityDetails",peekStates:[d.CourseRoutes.COURSE_MESSAGE,"event-create",d.TelemetryRoutes.INSTRUCTOR_DETAILS],peekViewName:"telemetry-content-activity-in-detail-base@"}).peekState(d.TelemetryRoutes.DISCUSSION_FORUM_INSIGHTS,{url:"/telemetry/instructor/discussion-insights/:contentId/:forumContentId",require:function(){return Promise.all([n.e(1),n.e(571)]).then(n.bind(null,"zl9+"))},panelClass:"full",params:{groupId:null},resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/discussion")}],currentContent:["$stateParams",c.d,function(e,t){var n=e.contentId;return t.contents.$find(n).$asPromise()}]},pageTitle:"components.directives.discussion.insights.pageTitle",peekStates:["content-manage","submission-list",d.CourseRoutes.COURSE_MESSAGE],peekViewName:"telemetry-discussion-forum-insights-base@"})}])},jciN:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));n("SSV0");var r=n("wHJ2"),i=n("oVrE"),o=n("g66W"),s=n("0JpG"),a=n("NMEb"),u=n("3Zit"),c=n("5MwF"),l=n("9Ss5"),d="ultra.directives.avatar",p=function(){function e(e,t,n,r,i){var o=this;this.scope=e,this.$element=t,this.attributes=n,this.bbLocalize=r,this.$timeout=i,this.backgroundColors=12;var s=this.scope.$watchGroup(["user.givenName","user.familyName","user.ui.displayName","user.avatar.permanentUrl","user","inactive()"],(function(){void 0!==o.scope.user&&(o.renderAvatars(),o.scope.autoUpdate&&o.scope.autoUpdate()||s())})),a=this.scope.$watchCollection("users",(function(){o.scope.users&&(o.renderAvatars(),o.scope.autoUpdate&&o.scope.autoUpdate()||a())}))}return e.prototype.getAvatarBG=function(e){return"default-avatar-"+(parseInt((e&&e.id||"0").replace(/[^\d]/g,""),10)%this.backgroundColors+1)},e.prototype.avatarParticipantsClass=function(e){switch(e){case 0:return"no-participants";case 1:return"one-participant";case 2:return"two-participants";default:return"two-plus-participants"}},e.prototype.canDisplayAvatarForUser=function(e){return!!e&&(!!(e.givenName||e.familyName||this.isAnonymousStudent(e))||!(!e.avatar||!e.avatar.permanentUrl||"default"===e.avatar.permanentUrl))},e.prototype.getInitials=function(e){return!e||this.isAnonymousStudent(e)||!e.givenName||!e.familyName||o.i(e.givenName)||o.i(e.familyName)||o.j(e.givenName)||o.j(e.familyName)?null:(e.givenName.charAt(0)+e.familyName.charAt(0)).toLowerCase()},e.prototype.buildAvatarData=function(e){var t={};return this.canDisplayAvatarForUser(e)?(t.avatarBg=this.getAvatarBG(e),t.userInitials=this.getInitials(e),e.ui&&e.ui.displayName?t.username=e.ui.displayName:e.givenName||e.familyName||this.isAnonymousStudent(e)?this.bbLocalize.formatUsername(e,s.ILocaleUsernameFormat.Long,this.scope,{noWrap:!0,noEscape:!0}).then((function(e){t.username=e})):t.username=null,e.avatar&&e.avatar.permanentUrl&&"default"!==e.avatar.permanentUrl&&(/^https?/.test(e.avatar.permanentUrl)&&-1===e.avatar.permanentUrl.indexOf("ts=")&&(e.avatar.permanentUrl=e.avatar.permanentUrl+(e.avatar.permanentUrl.indexOf("?")>=0?"&ts=":"?ts=")+encodeURIComponent(e.lastModifiedAt||""+(new Date).getTime())),t.avatarUrl=e.avatar.permanentUrl),t.isAllMembers=i.f(e),t):null},e.prototype.isAnonymousStudent=function(e){if(e.isAnonymousStudent)return e.isAnonymousStudent()},e.prototype.renderAvatars=function(){var e=this.scope.users;if(!e&&this.scope.user&&(e=this.scope.user),r.isArray(e)||(e=null!=e?[e]:[]),0===e.length)return this.scope.first=null,this.scope.second=null,this.scope.participants=0,void(this.scope.isAvatarRender=!0);this.scope.participants=e.length,this.scope.avatarsClasses={},r.isDefined(this.scope.inactive)&&(this.scope.avatarsClasses.inactive=this.scope.inactive()),!this.scope.avatarsClasses.inactive&&r.isDefined(this.scope.customizedActiveStyle)&&(this.scope.avatarsClasses.outline=!0,this.scope.avatarsClasses[this.scope.customizedActiveStyle]=!0),this.scope.avatarsClasses[this.avatarParticipantsClass(e.length)]=!0,this.scope.first=this.buildAvatarData(e[0]),2===e.length?this.scope.second=this.buildAvatarData(e[1]):e.length>2&&(this.scope.second={}),this.scope.isAvatarRender=!0},e}(),m=function(){function e(e,t){var n=this;this.bbLocalize=e,this.$timeout=t,this.restrict="E",this.template=l,this.scope={user:"=?",inactive:"&?",users:"=?",autoUpdate:"&?",isGray:"&?",hasException:"&?",customizedActiveStyle:"@?",analyticsIdTagPrefix:"@"},this.link=function(e,t,r){return new p(e,t,r,n.bbLocalize,n.$timeout)}}return e.$inject=[s.serviceName,"$timeout"],e}();c.a.features.newAvatar?r.module(d,[u.a]).directive("bbAvatar",["$compile",function(t){return{restrict:"E",scope:!1,priority:Number.MAX_VALUE,terminal:!0,link:function(n,r,i){var o=Object.prototype.hasOwnProperty.call(i,"users")?"bb-user-avatar-group":"bb-user-avatar",s=e(r[0].outerHTML.replace(/bb\-avatar/g,o));r.replaceWith(s),t(s)(n)}}}]):r.module(d,[a.a,u.a]).directive("bbAvatar",["$injector",function(e){return e.instantiate(m)}])}).call(this,n("5iHu"))},jhBu:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("5MwF"),s=n("x+T+"),a=n("Qbdf"),u="ultra.service.entitlement",c="entitlement",l=function(){function e(e,t){this.entitlementCache=e,this.currentCourse=t}return e.prototype.isEntitled=function(e,t){if(void 0===t&&(t=this.currentCourse.courseId),!t)return o.a.production||console.error(new Error("There is no course in context. Check the configuration.")),!1;if(!o.a.production&&!this.entitlementCache.hasCachedCourseEntitlements(t))throw new Error("Cached entitlements should exist for course with ID, "+t+", but none were found.\n        Make sure the entitlement resolver is configured for this route,\n        or use async hasCourseEntitlement methods that guarantee the cache initializes.");return this.entitlementCache.hasCachedCourseEntitlements(t)&&this.entitlementCache.getCachedCourseEntitlements(t).has(e.toString())},e.prototype.areAllEntitled=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),e.every((function(e){return n.isEntitled(e,t)}))},e.prototype.areAnyEntitled=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),e.some((function(e){return n.isEntitled(e,t)}))},e.prototype.hasCourseEntitlement=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),this.entitlementCache.loadCourseEntitlements(t).then((function(){return n.isEntitled(e,t)}))},e.prototype.hasAllCourseEntitlements=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),this.entitlementCache.loadCourseEntitlements(t).then((function(){return n.areAllEntitled(e,t)}))},e.prototype.hasAnyCourseEntitlement=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),this.entitlementCache.loadCourseEntitlements(t).then((function(){return n.areAnyEntitled(e,t)}))},e.prototype.hasSystemEntitlement=function(e){var t=this;return this.entitlementCache.loadCourseEntitlements(s.a).then((function(){return t.isEntitled(e,s.a)}))},e.$inject=[s.c,a.e],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);i.module(u,[s.b,a.b]).service(c,l)},jj6p:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n("JzsJ");var r=n("5iHu"),i=n("wHJ2"),o=n("5MwF"),s=n("Sa5G"),a=n("0JpG"),u=n("wQOJ"),c=n("pjml"),l=n("MOka"),d=n("TnpK"),p=n("Q/M7"),m=n("nmzr"),f="ultra.base.routes";i.module(f,[a.moduleName,c.Q]).config([d.c,function(e){e.baseState("base.calendar",{url:"^/calendar",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}],"?courseMembershipsLoader":i.noop},peekStates:["calendar-settings","event-create","event-edit","event-view","class-schedule","office-hours","content-manage","assignment","assessment","course","lti","scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview"],require:function(){return Promise.all([n.e(3),n.e(63),n.e(12),n.e(27),n.e(57),n.e(133)]).then(n.bind(null,"q2ny"))},pageTitle:"base.nav.calendar"}).baseState("base.deadline",{url:"^/deadline",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},peekStates:["calendar-settings","event-create","event-edit","event-view","class-schedule","office-hours","content-manage","assignment","course","assessment"],require:function(){return Promise.all([n.e(3),n.e(63),n.e(12),n.e(27),n.e(57),n.e(133)]).then(n.bind(null,"q2ny"))},pageTitle:"base.nav.calendar"}).baseState("base.courses",{url:"^/course?enrollmentMessage",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/courses/base-courses")}]},peekStates:["course","external","class-schedule","course-edit-banner"],peekViewName:"courses-base",require:function(){return Promise.all([n.e(10),n.e(1),n.e(12),n.e(70),n.e(113)]).then(n.bind(null,"EQ9X"))},pageTitle:"base.nav.courses"}).baseState("base.grades",{url:"^/grades",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/grades/base-grades")}],"?courseMembershipsLoader":[i.noop]},require:function(){return Promise.all([n.e(3),n.e(6),n.e(10),n.e(1),n.e(2),n.e(7),n.e(16),n.e(12),n.e(25),n.e(554)]).then(n.bind(null,"Bfy5"))},peekStates:["assessment","assignment",m.Routes.Grade.GRADE_AND_FEEDBACK,"gradebook-item","telemetry","course","discussion","lti","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview",m.Routes.Journal.JOURNAL,m.Routes.Telemetry.INSTRUCTOR_CLASS,m.Routes.Telemetry.INSTRUCTOR_DETAILS,m.Routes.Telemetry.STUDENT_PROGRESS,"overall-grade-student","attendance","attendance-student-view"],pageTitle:"base.nav.grades"}).baseState("base.messages",{url:"^/messages",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/messages/base-messages")}]},require:function(){return Promise.all([n.e(0),n.e(10),n.e(30),n.e(120),n.e(623)]).then(n.bind(null,"ZQ8w"))},peekStates:["create-message","edit-message",m.Routes.Course.COURSE_MESSAGE,"course"],pageTitle:"base.nav.messages"}).baseState("base.organizations",{url:"^/organization?enrollmentMessage",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/courses/base-courses")}]},peekStates:["course","external","class-schedule","organization-edit-banner"],peekViewName:"courses-base",require:function(){return Promise.all([n.e(10),n.e(1),n.e(12),n.e(70),n.e(113)]).then(n.bind(null,"EQ9X"))},pageTitle:"base.nav.organizations"}).baseState("base.profile",{url:"^/profile",resolve:{userConfiguration:[c.Pb.serviceName,function(e){return e.getUserConfiguration()}],translations:[a.serviceName,function(e){return e.loadBundle("features/base/profile/base-profile")}],isMobileDistributorActive:["$q",c.T.serviceName,"memberships",function(e,t,n){var r=n.length>0,i=n.every((function(e){return e.isStudentMembership()}));return o.a.features.instructorPushNotifications||r&&i?t.$build().courseSettings.$new(s.x.Mobile).$fetch().$allow([400]).$then((function(e){return!!e.settings})):e.resolve(!1)}],memberships:[l.b,function(e){return e.reloadStreamMemberships()}]},require:function(){return Promise.all([n.e(28),n.e(48),n.e(72),n.e(128),n.e(597)]).then(n.bind(null,"cFSu"))},peekStates:["notification-settings","update-avatar","update-profile","update-language","update-password","privacy"],pageTitle:"base.nav.profile"}).baseState("base.recentActivity",{resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/stream/base-stream")}],memberships:[l.b,function(e){return e.reloadStreamMemberships()}],"?courseMembershipsLoader":i.noop},peekStates:["announcement",m.Routes.Announcement.ANNOUNCEMENT_DETAIL,"assignment","assessment","content-manage","content-group","course","discussions","event-edit","event-view","gradebook-item","stream-message","telemetry","lti","content-group-enroll","notification-create","notification-history","notification-settings","scorm-overview","scorm-launch-frame","scorm",m.Routes.Telemetry.INSTRUCTOR_CLASS,m.Routes.Telemetry.INSTRUCTOR_DETAILS,m.Routes.Telemetry.STUDENT_HIGH_PERFORMANCE,m.Routes.Telemetry.STUDENT_LOW_ACTIVITY,m.Routes.Telemetry.STUDENT_LOW_GRADES,m.Routes.Telemetry.STUDENT_PROGRESS,m.Routes.Telemetry.STUDENT_FIND_A_STUDY_PARTNER],peekViewName:"base-recentActivity-base",url:"^/stream",require:function(){return Promise.all([n.e(0),n.e(20),n.e(572),n.e(9),n.e(31),n.e(60),n.e(569)]).then(n.bind(null,"UFXJ"))},pageTitle:"base.nav.recentActivity"}).baseState("base.tools",{url:"^/tools",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/tools/base-tools")}]},peekStates:["lti"],require:function(){return n.e(568).then(n.bind(null,"2yHp"))},pageTitle:"base.nav.tools"}).baseState("base.admin",{resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/admin/base-admin")}]},systemEntitlement:s.D.ViewAdmin,onEnter:function(){r("body").addClass("base-admin-open")},onExit:function(){r("body").removeClass("base-admin-open")},url:"^/admin",require:function(){return n.e(632).then(n.bind(null,"9D0M"))},peekStates:["course","localization","brands","cloud-storage-admin","notification-admin"],pageTitle:"base.nav.admin"}).peekState("localization",{url:"/localization?launchUrl",require:function(){return n.e(658).then(n.bind(null,"Arco"))},pageTitle:"base.nav.localization",panelClass:"full",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/admin/localization")}],enterCheck:[d.d,"$stateParams",function(e,t){if(!t.launchUrl)return e.goToRoute("base.admin")}]}}).peekState("cloud-storage-admin",{url:"/cloud-storage",require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(42),n.e(710)]).then(n.bind(null,"nL78"))},pageTitle:"base.nav.cloud-storage-admin",panelClass:"full"}).peekState("notification-admin",{url:"/notification",require:function(){return n.e(711).then(n.bind(null,"Vf+W"))},pageTitle:"base.nav.notification-admin",panelClass:"full"}).baseState("base.redirect",{url:"^/redirect?userId&contentId&courseId&eventType&sourceType&sourceId&redirectType&legacyUrl&parentId&screen",require:function(){return n.e(719).then(n.bind(null,"kds7"))}}).baseState("base.institution-page",{url:"^/institution-page",require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(139)]).then(n.bind(null,"dRT/"))},peekStates:["allLinks","lti"],pageTitle:"base.nav.institutionPage",resolve:{ipVariantId:[u.b,d.d,function(e,t){return e.getEffectiveVariantIdWithPermissions().then((function(e){var n=e.variantId;if(e.canView)return n;t.goToRoute("base.recentActivity")}),(function(){return t.goToRoute("base.recentActivity")}))}]}}).baseState("base.institution-page-admin",{url:"^/institution-page/admin/:variantId",require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(139)]).then(n.bind(null,"dRT/"))},peekStates:["allLinks","editModule","editPageImage","createModule","lti","brand-detail"],pageTitle:"base.nav.institutionPage",params:{variantId:"default"},resolve:{ipVariantId:[u.b,d.d,"$stateParams",function(e,t,n){return e.getUserCanEdit("default").then((function(e){return e||t.goToRoute("base.recentActivity"),n.variantId}),(function(){return t.goToRoute("base.recentActivity")}))}],testResolver:["ipVariantId",function(e){return e}]}}).state("institution",{onEnter:function(){window.location.href=p.c("/institution")}}).baseState("base.course-catalog",{url:"^/catalog",require:function(){return n.e(138).then(n.bind(null,"Kz46"))},pageTitle:"base.nav.catalog",peekStates:["course"],resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/course/course-catalog")}]}}).baseState("base.organization-catalog",{url:"^/organization-catalog",require:function(){return n.e(138).then(n.bind(null,"Kz46"))},pageTitle:"base.nav.orgCatalog",peekStates:["course"],resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/course/course-catalog")}]}}).baseState(m.Routes.Integration.INTEGRATION_BASE,{url:"^/integration/:routeName?params",require:function(){return n.e(685).then(n.bind(null,"xYk/"))}}),o.a.features.componentDemos&&e.baseState("base.demo",{url:"^/demo",require:function(){return Promise.all([n.e(0),n.e(73),n.e(1),n.e(28),n.e(71),n.e(555)]).then(n.bind(null,"KTgJ"))},peekStates:["demoComponent"],pageTitle:"base.nav.demo"})}])},jnoB:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("wHJ2"),i=n("Sa5G"),o=n("Qbdf"),s=n("0JpG"),a=n("TnpK"),u=n("nmzr"),c="ultra.course.groups.router";r.module(c,[o.b,s.moduleName,a.b]).config([o.c,a.c,function(e,t){var r;t.peekState("group-set-list",{url:"/group-set-list",courseEntitlement:i.v.ViewGroupsAsAdmin,require:function(){return Promise.all([n.e(0),n.e(43),n.e(687)]).then(n.bind(null,"Mkxh"))},pageTitle:"course.outline.groupWorkspace.title",peekStates:["group-set-detail"],panelClass:"full"}).peekState("group-set-detail",{panelClass:"full",url:"/groupSet?courseId&groupSetId&mode",courseEntitlement:i.v.ViewGroupsAsAdmin,resolve:{translations:[s.serviceName,function(e){return e.loadBundle("features/course/content/group/course-group")}]},require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(43),n.e(1),n.e(2),n.e(541)]).then(n.bind(null,"ymtw"))},pageTitle:"course.content.courseGroup.groupSetTitle",peekStates:[u.CourseRoutes.COURSE_MESSAGE],peekViewName:"group-message-peek"}).peekState("content-group-enroll",{url:"/group-enroll?courseId&contentId&fromView",panelClass:"full",resolve:(r={},r[o.d]=e.resolve,r.translations=[s.serviceName,function(e){return e.loadBundle("features/course/content/group/course-group")}],r),require:function(){return Promise.all([n.e(0),n.e(43),n.e(686)]).then(n.bind(null,"sBQA"))},pageTitle:"course.content.courseGroup.selfEnroll"}).peekState("course-group-enroll",{url:"/course-group-enroll?courseId&fromView",pageTitle:"course.content.courseGroup.selfEnroll",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(43),n.e(688)]).then(n.bind(null,"B5Yh"))}})}])},k9iv:function(e,t,n){"use strict";var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("5MwF"),a=n("0JpG"),u=n("12mu"),c=n("JfV0"),l=n("ERkP"),d=n("0gcN"),p=n("1ZbL"),m=n("ReOc"),f="ultra.components.directives.sessionDebugModalButton",h={Class:function(e){var t=l.useState(""),n=t[0],r=t[1];return l.useEffect((function(){m.a.getDebugInfoFriendly().then((function(e){return r(e.join("\r\n"))}))}),[]),l.createElement(d.SessionDebugModalButton,{sessionDebug:n})},renderLocalized:!0,withThemeProvider:!0,withProvider:!0};o.module(f,[a.moduleName]).component("bbSessionDebugModalButton",Object(p.a)(h));var g=n("W/rt"),v=n("zlFc"),b=n("9ZjI"),y=n("TFjq"),S=n("PqsU"),C=n("sqUP"),w=n("nL6A"),k=n("cGmE"),I=n("q4pc"),T=n("krSA");n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return $})),n.d(t,"a",(function(){return v}));var E="ultra.components.services.errorModal",$="errorModal",P=function(){function e(){this.isModalClosed=!0,this.handlers=[],this.$get=[u.b,"$rootScope","$q","$window","$injector",function(e,t,n,r,i){var o=this;return this.$modal=e,this.$rootScope=t,this.$q=n,this.$injector=i,this.$window=r,window.addEventListener("show-debug-error-modal",(function(){o.showDefaultErrorModal()})),this}]}return e.prototype.onErrorResponse=function(e){this.handlers.push(e)},e.prototype.handleApiError=function(t,n){var r,o,s,a,u=this;if(t&&null!=t.status&&!this.$window.document.getElementsByClassName("ms-Panel").length){var l={response:t,errorHandler:n};if(t.status===c.HttpStatus.Forbidden)"Question could not be created with existing attempt(s)"===(null===(r=t.data)||void 0===r?void 0:r.message)?l.template=g:l.template=v;else if(t.status===c.HttpStatus.NotFound)i.includes(null===(o=t.data)||void 0===o?void 0:o.message,"No course content found for content id")?l.template=b:l.template=y;else if(t.status===c.HttpStatus.Conflict)l.template=S;else if(507===t.status)l.template=C;else if(t.status>=400&&t.status<=599)if(t.status===c.HttpStatus.BadRequest&&(null===(s=t.data)||void 0===s?void 0:s.code)===e.COURSE_IS_CLOSED_CODE)l.template=w;else if(t.status===c.HttpStatus.BadRequest&&i.includes(null===(a=t.data)||void 0===a?void 0:a.message,"The input was too large"))l.template=I;else{var d;this.handlers.some((function(e){return(d=u.$injector.invoke(e,void 0,{response:t}))&&void 0!==d.tpl})),l.template=d&&d.tpl||k,l.scope=d&&d.scope}l.template&&this.openModal(l)}},e.prototype.showDefaultErrorModal=function(){var e={template:y};this.openModal(e)},e.prototype.handleError=function(e,t){if(e){var n={errorString:e,template:T,errorHandler:t};this.openModal(n)}},e.prototype.openModal=function(e){var t=this;if(this.isModalClosed){if(!e||!e.template)throw new Error("Modal configuration template was not supplied");var n=e.scope||this.$rootScope;s.a.errorDetails&&((n=this.$rootScope.$new()).response=e.response),n.errorString=e.errorString;var r={template:e.template,scope:n,resolve:{translations:[a.serviceName,function(e){return e.loadBundle("components/services/error-modal")}]}};this.isModalClosed=!1,this.modalInstance=this.$modal.open(r),this.modalInstance.result.then((function(){}),(function(){t.isModalClosed=!0,e.errorHandler&&e.errorHandler()}))}},e.COURSE_IS_CLOSED_CODE="bb-rest-course-is-closed",e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(P);o.module(E,[a.moduleName,u.a,f]).provider($,P)},kH1j:function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-medium-programs",use:"icon-medium-programs-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-programs"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M17 3h6v20h-6zM9 7h8v16H9zM1 1h8v22H1zM1 19h8M1 5h8M12 11h2M12 19h2M17 19h6M20 7v3" /></symbol>'});i.add(o);e.exports=o},"kj+S":function(e,t,n){},klG7:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.services.error-modal.error-external-questions">\n  <div name="modal-contents">\n    <p bb-translate>{{descriptionKey}}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss">components.services.error-modal.dismiss</button>\n</bb-modal>\n'},krSA:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p>{{ errorString }}</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},lAEu:function(e,t,n){"use strict";var r=n("D57K"),i=n("n7/H"),o=n.n(i),s=n("6VGE"),a=n.n(s),u=n("tfZW"),c=function(e){function t(t,n){void 0===n&&(n={defaultLocale:"en",production:!1,urlRoot:""});var r=e.call(this,t,n)||this;return r.babelfishInstance=t,r.options=n,r.overrideLoader=u.a.getInstance(),r}return Object(r.__extends)(t,e),t.prototype._load=function(e){return t._loadPromises[e]?t._loadPromises[e]:(t._loadPromises[e]=new i.InstantPromise((function(t){n("RRs6")("./"+e+"/_combined.json").then((function(e){return t(e.default?e.default:e)})).catch((function(){return t(null)}))})),t._loadPromises[e])},t.prototype.getPreferredLocales=function(t){return[t].concat(e.prototype.getPreferredLocales.call(this,this.overrideLoader.getBaseLocale(t)||t))},t._loadPromises={},Object(r.__decorate)([a.a],t.prototype,"getPreferredLocales",null),t}(o.a);t.a=c},lBPC:function(e,t){e.exports='\n<footer class="panel-footer notification toast-container">\n  <bb-save-tray tray-type="LoadMoreResults"\n                tray-id="{{::trayId}}"\n                tray-localization-keys-prefix="{{::trayLocalizationKeysPrefix}}">\n  </bb-save-tray>\n</footer>'},lCpV:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Discussions=new t("discussions"),t.Participants=new t("participants"),t}(n.n(i).a);t.a=o},lDJ8:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=(n("abLi"),n("yq4x"),n("6BRP"),n("nsO7")),o=n("5iHu"),s=n("wHJ2"),a=n("0JpG"),u=n("nPfc"),c=n("lEL+"),l=n("GbAM"),d="ultra.directives.validationMessages",p=function(){function e(t,n,r,i,o,s){var a=this;this.$rootScope=t,this.scope=n,this.element=r,this.attrs=i,this.form=o,this.timeout=s,this.error=!1,this.immediateUpdate=!1,this.elements=[],e._$rootScope=t,n.labels=[],e.onDirectiveAdded(),n.$on("$destroy",(function(){e.onDirectiveRemoved()}));var u=i.for;if(!u)throw new Error("`for` attribute is required.");u.split(",").forEach((function(e){var t=o[e];null==t.$warning&&(t.$warning={}),null==t.$errorImmediate&&(t.$errorImmediate={}),a.elements.push(t)})),n.$watch(this.updateMessages.bind(this)),n.$watch((function(){return document.activeElement}),(function(e,t){e!==t&&a.updateMessages()})),n.$watch((function(){return n.showErrors})),this.elements&&this.elements.length&&n.$watch((function(){return a.elements[0].$invalid}),(function(e,t){e&&e!==t?(a.immediateUpdate=!0,a.updateMessages()):a.immediateUpdate=!1}))}return e.prototype.updateMessages=function(){var t=this;this.scope.showOnsubmitErrors=!1,this.scope.showErrors=!1,this.scope.showImmediateErrors=!1,this.scope.showWarnings=!1,this.scope.labels.length=0;var n=[];if(this.form.$submitted){var r=i.filter(this.elements,(function(e){return Object.keys(e.$error).length>0}));n=i.map(r,"$label");var o=i.merge.apply(null,i.map(r,"$error"))||{},s=Object.keys(o);s.length>0&&(this.scope.showOnsubmitErrors=!0,this.scope.onsubmitErrors={},s.forEach((function(e){t.scope.onsubmitErrors[e+"Onsubmit"]=o[e]})),this.readAriaLiveMessage(this.element.find(".form-element-onsubmit-errors").text(),"alert"))}else{var a=document.activeElement,u=i.find(this.elements,{$name:a.name});if(u&&u.$errorImmediate&&Object.keys(u.$errorImmediate).length>0)return this.scope.showImmediateErrors=!0,this.scope.immediateErrors=u.$errorImmediate,this.readAriaLiveMessage(this.element.find(".form-element-immediate-errors").text(),"alert"),!0;if(!e.mouseIsDown||this.error||this.immediateUpdate){var c=this.immediateUpdate?this.elements:i.filter(this.elements,(function(e){return(e.$touched||e.$dirty||t.scope.checkWhenInit&&t.scope.checkWhenInit())&&(!(a.name===e.$name)||t.scope.immediate&&t.scope.immediate())})),l=(r=i.filter(c,(function(e){return Object.keys(e.$error).length>0})),i.merge.apply(null,i.map(r,"$error"))||{});l&&Object.keys(l).length>0?(this.error=this.scope.showErrors=!0,this.scope.errors=l,n.push.apply(n,i.map(r,"$label")),this.readAriaLiveMessage(this.element.find(".form-element-errors").text(),"alert")):this.error=!1}if(!this.scope.showOnsubmitErrors&&!this.scope.showErrors){var d=i.filter(this.elements,(function(e){return Object.keys(e.$warning).length>0})),p=i.merge.apply(null,i.map(d,"$warning"))||{};p&&Object.keys(p).length>0&&(this.scope.showWarnings=!0,this.scope.warnings=p,this.readAriaLiveMessage(this.element.find(".form-element-warnings").text(),"status"))}}return this.scope.labels.push.apply(this.scope.labels,i.compact(n)),!0},e.prototype.readAriaLiveMessage=function(e,t){var n=this;this.timeout((function(){"alert"===t?n.scope.$root.$broadcast(l.a,e.trim()):n.scope.$root.$broadcast(l.b,e.trim())}),this.scope,0,!1)},e.mouseIsDown=!1,e._directiveCount=0,e.onDirectiveAdded=function(){var t=0===e._directiveCount;e._directiveCount++,t&&(e.mouseDownHandler||(e.mouseDownHandler=function(t){var n=o(t.target);(n.parents("ng-form").length||n.parents("form").length)&&e._$rootScope.$apply((function(){n.is("[type=submit]")||(e.mouseIsDown=!0)}))}),e.mouseUpHandler||(e.mouseUpHandler=function(t){var n=o(t.target);(n.parents("ng-form").length||n.parents("form").length)&&e._$rootScope.$apply((function(){e.mouseIsDown=!1}))}),o(document).on("mousedown",e.mouseDownHandler),o(document).on("mouseup",e.mouseUpHandler))},e.onDirectiveRemoved=function(){var t=e._directiveCount<=1;e._directiveCount--,t&&(o(document).off("mousedown",e.mouseDownHandler),o(document).off("mouseup",e.mouseUpHandler))},e}(),m=function(e,t,n){var r=this;this.bbLocalize=e,this.$rootScope=t,this.timeout=n,this.scope={immediate:"&?",checkWhenInit:"&?"},this.require="^form",this.restrict="A",this.transclude=!0,this.link=function(e,t,n,i){return r.bbLocalize.loadBundle("components/directives/validation-messages"),new p(r.$rootScope,e,t,n,i,r.timeout)},this.template=u};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(m);s.module(d,["ngMessages",a.moduleName]).directive("bbValidationMessages",[a.serviceName,"$rootScope",c.b,function(e,t,n){return new m(e,t,n)}]).directive("ngModel",(function(){return{restrict:"A",require:"ngModel",priority:-9999,link:function(e,t,n,r){var i=t[0],o=t.parents().last();if(i.hasAttribute("aria-label"))e.$watch((function(){return i.getAttribute("aria-label")}),(function(e){return r.$label=e}));else if(i.hasAttribute("aria-labelledby")){var s=i.getAttribute("aria-labelledby").split(" ")[0],a=o.find("#"+s)[0];a&&e.$watch((function(){return a.textContent}),(function(e){return r.$label=e}))}else{var u=o.find('label[for="'+i.id+'"]')[0];u&&e.$watch((function(){return u.textContent}),(function(e){return r.$label=e}))}}}}))},"lEL+":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n("wHJ2"),i="ultra.services.timeout",o="timeout";r.module(i,[]).factory(o,["$timeout",function(e){var t=function(t,n,r,i){var o=e((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.__bb_unregister_scope_destroy__&&(o.__bb_unregister_scope_destroy__(),o.__bb_unregister_scope_destroy__=null),t.apply(this,e)}),r,i);return o.__bb_unregister_scope_destroy__=n.$on("$destroy",(function(){e.cancel(o)})),o};return t.cancel=function(t){return t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)},t}])},lTRw:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n("D57K"),i=(n("QLzv"),n("Bu0u")),o=n("nkTj"),s=n("yCC5"),a=n("Q/M7"),u=n("Rjd/"),c=s.Y,l=function(){function e(){}return e.fromValue=function(t){return e[t]},e.ALL={resetShowComments:function(){return!0},getValue:function(){return"ALL"},validate:function(e){return!0}},e.BYCOLUMNS={resetShowComments:function(){return!1},getValue:function(){return"BYCOLUMNS"},validate:function(e){return e&&!!e.length}},e}(),d=function(){function e(){}return e.fromValue=function(t){return e[t]},e.MYDEVICE={resetContentCollection:function(){return!0},getValue:function(){return"MYDEVICE"},validate:function(e){return!0},openUrl:function(e){var t=a.j();window.location.href=t+e}},e.CONTENTCOLLECTION={resetContentCollection:function(){return!1},getValue:function(){return"CONTENTCOLLECTION"},validate:function(e){return!!e},openUrl:function(e){return function(){}}},e}();u.a.factory(c,["restmod",o.d,function(e,t){return e.model().mix({grades:{hasMany:s.gb},columns:{hasMany:s.fb},attempts:{hasMany:s.cb},categories:{hasMany:s.eb},performancecodes:{hasMany:s.ib},schemas:{hasMany:s.jb},bulkView:{hasOne:s.db,path:"grades/bulkView"},settings:{hasOne:s.Z},groupAttempts:{hasMany:s.hb},summaries:{hasMany:s.r},$extend:{Record:{getDownloadUrl:function(e){if(!e||!e.dataScopeType||!e.delimiterType)throw new i.a({message:"dataScoreType and delimiterType must be set"});return this.$send({method:"POST",url:this.$url()+"/prepareDownload",data:Object(r.__assign)(Object(r.__assign)({},e),{dataScopeType:e.dataScopeType.getValue(),downloadTo:e.downloadTo.getValue()})},(function(e){this.$unwrap(e.data)})).$asPromise()},validateCalculatedFormula:function(e){if(!e)throw new i.a({message:"formula data must be set"});return this.$send({method:"POST",url:this.$url()+"/validateCalculatedFormula",data:e}).$allow([400]).$asPromise().then((function(e){return 200===e.$response.status}))},parseUploadedGradebook:function(e){return this.$send({method:"GET",url:this.$url()+"/parseUploadedGradebook",params:e},(function(e){this.$unwrap(e.data)})).$allow([400,403,404]).$asPromise()},importGradebook:function(e){return this.$send({method:"POST",url:this.$url()+"/importGradebook",data:e},(function(e){this.$unwrap(e.data)})).$allow([400,403,404]).$asPromise()}}}})}])},"lUN/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("5iHu");function i(){return r.extend(r.expr[":"],{tabbable:function(e){var t=r.attr(e,"tabindex"),n=null!=t;return(!n||t>=0)&&function(e,t){var n,i,o,s,a,u=e.nodeName.toLowerCase();if("area"===u)return n=e.parentNode,i=n.name,!(!e.href||!i||"map"!==n.nodeName.toLowerCase())&&((o=r("img[usemap='#"+i+"']")).length>0&&o.is(":visible"));/^(input|select|textarea|button|object)$/.test(u)?(s=!e.disabled)&&(a=r(e).closest("fieldset")[0])&&(s=!a.disabled):s="a"===u&&e.href||t;return s&&r(e).is(":visible")}(e,n)}})}},lVRt:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r="currentCourse",i="membership",o="currentContent"},lhRd:function(e,t,n){},lhpd:function(e,t,n){},lmMM:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return b}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("nbDY"),a=n.n(s),u=n("Fvsw"),c=n("0JpG"),l=n("12mu"),d=n("pjml"),p=n("abE0"),m="ultra.directives.confirmationNeeded",f="components.directives.confirmation-needed.",h="show-confirmation",g="-",v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Always=new t("always"),t.Once=new t("once"),t.UserChoice=new t("userChoice"),t}(a.a);function b(e,t){return f+t+g+e}var y=function(){function t(e,t,n,r,i,o){var s=this;this.scope=e,this.attrs=n,this.$q=r,this.bbContext=i,this.$modal=o,this.clickHandling=!1,this.scope.confirmationNeeded=this,this.scope.modalAriaType=this.attrs.modalAriaType,this.scope.nextSelector=this.attrs.nextSelector,e.$on(h,(function(e,t,n){t===s.attrs.modalName&&s.handleButtonClick(n)})),t.on("click",(function(e){s.handleButtonClick(e)})),e.$on("$destroy",(function(){t.off()})),e.$on("dismiss-confirmation",(function(){s.modalInstance&&s.modalInstance.dismiss()}))}return t.prototype.handleButtonClick=function(e){var t=this;if(!this.clickHandling){var n;if(this.clickHandling=!0,this.attrs.getConfirmationKeyAndShowType)n=this.$q.when(this.scope.$eval(this.attrs.getConfirmationKeyAndShowType));else{if(!this.attrs.bbConfirmationNeeded)return void(this.clickHandling=!1);n=this.$q.when({confirmationKey:this.attrs.bbConfirmationNeeded,showType:this.attrs.showType})}e&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault()),n.then((function(n){if(n.confirmationKey)switch(t.resourceType=n.confirmationKey.replace("resource/",""),t.choices=[],v.parse(n.showType)){case v.Always:t.confirmAction(e);break;case v.Once:t.showConfirmationActionOnlyOnce(e);break;default:t.showConfirmationActionByUserChoice(e)}else t.invokeClickAction(e)}))}},t.prototype.showConfirmationActionOnlyOnce=function(e){var t=this;this.bbContext.getPreference(this.createPreferenceKey("dont-ask-again"),"false").then((function(n){"true"===n.value?t.invokeClickAction(e):t.confirmAction(e)}))},t.prototype.createResourceKey=function(e){return f+e+g+this.resourceType},t.prototype.createPreferenceKey=function(e){return"{{context}}.confirmation".replace("{{context}}",this.resourceType+g+e).replace(/\-/g,".")},t.prototype.addToChoices=function(e,t,n){var r;r=this.attrs.modalContext&&"predict"===this.attrs.modalContext?{key:e,value:!!t,localizedKey:e,preferenceKey:this.createPreferenceKey(e),isDisable:!!n}:{key:e,value:!!t,localizedKey:this.createResourceKey(e),preferenceKey:this.createPreferenceKey(e),isDisable:!!n},this.choices.some((function(t){return t.key===e}))||this.choices.push(r)},t.prototype.parseChoicesFromAttr=function(e){if(e&&e.length)for(var t=0;t<e.length;t++)this.addToChoices(e[t].key,e[t].value,e[t].isDisable)},t.prototype.showConfirmationActionByUserChoice=function(e){var t=this;this.bbContext.getPreference(this.createPreferenceKey("dont-ask-again"),"false").then((function(n){if("true"===n.value)if(t.attrs.choices){var r=JSON.parse(t.attrs.choices),i=[];r.forEach((function(e){i.push(t.bbContext.getPreference(t.createPreferenceKey(e.key),"false").then((function(n){var r="true"===n.value;t.scope.$emit(e.key,r)})))})),t.$q.all(i).then((function(){t.invokeClickAction(e)}))}else t.invokeClickAction(e);else t.addToChoices("dont-ask-again"),t.confirmAction(e)}),(function(){t.addToChoices("dont-ask-again"),t.confirmAction(e)}))},t.prototype.confirmAction=function(e){var t,n=this;this.scope.titleKey=this.createResourceKey("title"),this.scope.instructionsKey=this.createResourceKey("instructions"),this.scope.cancelKey=this.createResourceKey("cancel"),this.scope.okKey=this.createResourceKey("ok"),this.attrs.choices&&this.attrs.choices.length>0&&this.parseChoicesFromAttr(JSON.parse(this.attrs.choices)),t=this.attrs.customClass?p.replace(/class="notification"/,'class="notification '+this.attrs.customClass+'"'):p,this.modalInstance=this.$modal.open({template:t,scope:this.scope,resolve:{translations:[c.serviceName,function(e){return e.loadBundle("components/directives/confirmation-needed")}]},controller:["$scope",c.serviceName,function(e,t){e.okAction=function(){e.$close(),n.okClicked=!0},e.cancelAction=function(){n.attrs.otherChoiceAction?(e.$close(),n.okClicked=!1):e.$dismiss()};var r={};n.attrs.modalTranslateOptions&&(r=e.$eval(n.attrs.modalTranslateOptions)),e.modalTranslateOptions={},e.modalStrings={title:null,instructions:null,cancel:null,ok:null},Object.keys(e.modalStrings).forEach((function(n){e.modalTranslateOptions[n]=i.merge({key:e[n+"Key"]},r[n]),e.modalStrings[n]=t.translateSync(e.modalTranslateOptions[n])}))}]}),this.modalInstance.result.then((function(){n.okClicked?(n.persistResult(),n.invokeClickAction(e)):(n.scope.$eval(n.attrs.otherChoiceAction),n.clickHandling=!1)}),(function(){n.attrs.dismissCallback&&n.scope.$eval(n.attrs.dismissCallback),n.clickHandling=!1}))},t.prototype.persistResult=function(){var e=this;switch(v.parse(this.attrs.showType)){case v.Always:this.choices.forEach((function(t){e.scope.$emit(t.key,t.value)}));break;case v.Once:this.bbContext.setPreference(this.createPreferenceKey("dont-ask-again"),"true");break;default:this.choices.forEach((function(t){t.value&&(e.scope.$emit(t.key,t.value),e.bbContext.setPreference(t.preferenceKey,t.value.toString()))}))}},t.prototype.invokeClickAction=function(t){this.scope.$eval(this.attrs.fngClick||this.attrs.ngClick,{$event:t}),this.clickHandling=!1,this.scope.nextSelector&&e(this.scope.nextSelector).focus()},t}(),S=function(){function e(e,t,n){var r=this;this.$q=e,this.bbContext=t,this.$modal=n,this.priority=100,this.restrict="A",this.scope=!0,this.compile=function(e,t){return{pre:function(e,t,n){return new y(e,t,n,r.$q,r.bbContext,r.$modal)}}}}return e.$inject=["$q",u.b,l.b,d.o.serviceName],e}();o.module(m,["ngSanitize",u.a,l.a]).directive("bbConfirmationNeeded",["$injector",function(e){return e.instantiate(S)}])}).call(this,n("5iHu"))},lr7J:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));n("FNJT"),n("I22j");var r=n("nsO7"),i=n("wHJ2"),o=n("5MwF"),s=n("XGja"),a=n("hkqm"),u=n("lEL+"),c=n("PIPc"),l="ultra.components.directives.infiniteScroll",d="bbInfiniteScroll",p=function(){function e(e,t,n,i,o,a,u){var l=this;this.scope=e,this.element=t,this.attrs=n,this.$compile=i,this.$q=o,this.timeout=a,this.toast=u,this.isManualLoad=!1,this.promises=[];var p=n.$observe("infiniteScrollTrayId",(function(e){l.trayId=e,p()}));if(n.infiniteScrollLocalizationKeysPrefix)var m=n.$observe("infiniteScrollLocalizationKeysPrefix",(function(e){l.localizationKeysPrefix=e,l.trayLocalizationKeysPrefix=e+".saveTray",m()}));else this.localizationKeysPrefix="components.directives.infinite-scroll",this.trayLocalizationKeysPrefix="";n.infiniteScrollLocalizationValues&&(this.localizationValues=e.$eval(n.infiniteScrollLocalizationValues)),e.$watchGroup([n.infiniteScrollTotalCount,n.infiniteScrollCurrentCount],(function(e){if(null!=e[0]&&null!=e[1]){if(l.totalCount=e[0],l.currentCount=e[1],l.remainingCount=l.totalCount-l.currentCount,l.remainingCount<0)throw new Error("The remainingCount of "+l.remainingCount+" should never be a negative number!");l.setLoadCount()}})),e.$watch(n.infiniteScrollDisabled,(function(e){l.disabled=e}));var f,h=e.$watch(n.infiniteScrollLoadLimit,(function(e){null!=e&&(l.loadLimit=e,l.setLoadCount(),h())}));i(t)(e),this.timeout((function(){f=i(c)(e).insertAfter(t)}),this.scope,0,!1),this.scope.$on(d,(function(e,t,i){if(l.trayId===t){var o=l.$q.defer();if(i.then((function(){o.resolve()})).catch((function(){return o.resolve()})),l.promises.push(o),o.promise.then((function(){return r.remove(l.promises,(function(e){return i===e}))})),l.cancelLoading=l.toast.showLoading({trayId:t,trayLocalizationKeysPrefix:l.trayLocalizationKeysPrefix,promise:o.promise}),l.attrs.infiniteScrollFocusableChildrenSelector&&l.isManualLoad){l.isManualLoad=!1;var a=l.loadCount;i.then((function(){l.timeout((function(){var e=l.element.find(l.attrs.infiniteScrollFocusableChildrenSelector);s.a(e.eq(e.length-a),null,n.infiniteScrollForceShowAncestorSelector)}),l.scope,0,!1)}))}}})),this.scope.$on("$destroy",(function(){f&&f.remove(),l.breakPromises(),l.cancelLoading&&l.cancelLoading()}))}return e.prototype.breakPromises=function(){r.forEach(this.promises,(function(e){e.resolve()}))},e.prototype.loadMoreItems=function(){this.remainingCount>0&&(this.isManualLoad=!0,this.scope.$eval(this.attrs.bbInfiniteScroll))},Object.defineProperty(e.prototype,"loadMoreLocalizationValues",{get:function(){return i.extend({},this.localizationValues,{loadCount:this.loadCount})},enumerable:!0,configurable:!0}),e.prototype.setLoadCount=function(){null!=this.loadLimit&&null!=this.remainingCount&&(this.loadCount=Math.min(this.loadLimit,this.remainingCount))},e.$inject=["scope","element","attrs","$compile","$q",u.b,a.b],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.terminal=!0,this.compile=function(e,n){return function(e,n,r){var i=e.$eval(r.infiniteScrollCurrentCount),o=e.$eval(r.infiniteScrollTotalCount);null!=i&&null!=o&&i>=o||n.attr("infinite-scroll",r.bbInfiniteScroll),n.removeAttr("bb-infinite-scroll"),e.infiniteScroll=t.$injector.instantiate(p,{scope:e,element:n,attrs:r})}}}return e.$inject=["$injector"],e}();i.module(l,["infinite-scroll",u.a,a.a]).value("THROTTLE_MILLISECONDS",o.a.infiniteScrollThrottleMS).directive("bbInfiniteScroll",["$injector",function(e){return e.instantiate(m)}])},mhLG:function(e,t){e.exports='<bb-modal id="folder-drop-depth-limit-modal" class="notification js-folder-drop-limit"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.folderDropDepthLimitTitle\' : \'components.directives.fileUpload.folderDropDepthLimitNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.folderDropDepthLimitFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFulNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},mkvA:function(e,t){e.exports='<div class="reveal-modal fade open" ng-class="{ in: $parent.animate }" role="{{::modal.ariaType}}" tabindex="-1" data-reveal\n     ng-multi-transclude-controller ng-attr-aria-label="{{::modal.titleString}}" ng-keydown="modal.handleKeyDown($event)">\n  <div class="reveal-modal__header">\n    <h1 class="reveal-modal__title" aria-describedby="modal-contents" bb-focus>\n      {{::modal.titleString}}\n    </h1>\n    <button class="close-reveal-modal standard-button light-background" \n            ng-click="modal.dismiss()" \n            bb-translate-attrs="{ \'aria-label\': \'global.close\' }"\n            analytics-id="{{modal.analyticsIdTagPrefix}}.modal.close.button">\n      <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n    </button>\n  </div>\n  <div id="modal-contents" class="reveal-modal__contents" ng-multi-transclude="modal-contents"></div>\n  <footer ng-multi-transclude="modal-footer" class="reveal-modal__footer">\n    <div class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n      <div ng-multi-transclude="modal-footer-help-link" class="reveal-modal__footer-help-link-container"></div>\n      <div class="reveal-modal__footer-buttons">\n        <span ng-multi-transclude="modal-footer-button-secondary" class="reveal-modal__footer-button-container"></span>\n        <span ng-multi-transclude="modal-footer-button-primary" class="reveal-modal__footer-button-container"></span>\n      </div>\n    </div>\n  </footer>\n  <div class="reveal-modal__dismiss" ng-class="{ \'hide\' : !modal.dismissString }">\n    <span class="reveal-modal__divider"></span>\n    <button class="button button--text dismiss-message expand" ng-click="modal.dismiss()" analytics-id="{{modal.analyticsIdTagPrefix}}..modal.dismiss.button">\n      <span>{{::modal.dismissString}}</span>\n    </button>\n  </div>\n</div>\n'},mxgC:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return d}));var r,i,o=n("D57K"),s=n("e6jQ");function a(){var e=window.webkit;return!!(e&&e.messageHandlers&&e.messageHandlers.MobileApp)||!!window.MobileApp}function u(){window.onMobileApiMessage=p}function c(e){try{var t=window.webkit;if(t&&t.messageHandlers&&t.messageHandlers.MobileApp&&t.messageHandlers.MobileApp.postMessage(e),window.MobileApp){var n=JSON.stringify(e);window.MobileApp.sendMessageToMobile(n)}}catch(e){console.error(e)}}!function(e){e.AttemptSaveAndClosed="ATTEMPT_SAVE_AND_CLOSED",e.AttemptSubmitted="ATTEMPT_SUBMITTED",e.AttemptFeedbackOpened="ATTEMPT_FEEDBACK_OPENED",e.AttemptRubricOpened="ATTEMPT_RUBRIC_OPENED",e.AttemptGoalAlignmentOpened="ATTEMPT_GOAL_ALIGNMENT_OPENED",e.AttemptFeedbackClosed="ATTEMPT_FEEDBACK_CLOSED",e.AttemptRubricClosed="ATTEMPT_RUBRIC_CLOSED",e.AttemptGoalAlignmentClosed="ATTEMPT_GOAL_ALIGNMENT_CLOSED",e.AttemptOpened="ATTEMPT_OPENED",e.AttemptReviewOpened="ATTEMPT_REVIEW_OPENED",e.DocumentOpened="DOCUMENT_OPENED",e.LoadDocument="LOAD_DOCUMENT",e.AssessementPreviewOpened="ASSESSMENT_PREVIEW_OPENED"}(r||(r={})),function(e){e.Success="Success",e.Fail="Fail"}(i||(i={}));var l={};function d(e){return new Promise((function(t,n){var r=Object(s.b)();l[r]={resolve:t,reject:n},c(Object(o.__assign)(Object(o.__assign)({},e),{correlationId:r}))}))}function p(e){if(e){var t=JSON.parse(e);if(t&&t.correlationId){var n=l[t.correlationId];n&&(t.status===i.Fail?n.reject(t):n.resolve(t))}}}},n1KZ:function(e,t){e.exports='<footer class="panel-footer notification row collapse" ng-click="toastClicked()"\n        analytics-id="components.services.toast.clicked">\n  <bb-save-tray toast-message="::message" toast-short-message="::shortMessage" toast-icon="::icon" toast-class="::toastClass" toast-status="::toastStatus"></bb-save-tray>\n</footer>\n'},n88p:function(e,t,n){},nL6A:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-course-is-closed.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-course-is-closed">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-is-closed.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-course-is-closed.alt"\n          bb-translate>components.services.error-modal.error-course-is-closed.alt</button>\n</bb-modal>\n'},nPfc:function(e,t){e.exports='\x3c!-- Onsubmit Errors first --\x3e\n<script type="text/ng-template" id="default-onsubmit-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="numberInvalidOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.number_invalid</span></span>\n  <span ng-message="numberLargeOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberLargeOnsubmit.max }">components.directives.validation.messages.onsubmitErrors.number_large</span></span>\n  <span ng-message="numberSmallOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberSmallOnsubmit.min }">components.directives.validation.messages.onsubmitErrors.number_small</span></span>\n  <span ng-message="maxlengthOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.maxlength</span></span>\n  <span ng-message="urlOnsubmit"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="requiredOnsubmit"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="emailOnsubmit"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="timeOnsubmit"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="dateOnsubmit"><span bb-translate>components.directives.validation.messages.errors.date</span></span>\n<\/script>\n\n\x3c!-- Errors --\x3e\n<script type="text/ng-template" id="default-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="rangeInvalid"><span bb-translate translate-values="{ value: errors.rangeInvalidArgs.min }">components.directives.validation.messages.errors.range_invalid</span></span>\n  <span ng-message="numberInvalid"><span bb-translate>components.directives.validation.messages.errors.number_invalid</span></span>\n  <span ng-message="numberLarge"><span bb-translate translate-values="{ value: errors.numberLarge.max }">components.directives.validation.messages.errors.number_large</span></span>\n  <span ng-message="numberSmall"><span bb-translate translate-values="{ value: errors.numberSmall.min }">components.directives.validation.messages.errors.number_small</span></span>\n  <span ng-message="maxlength"><span bb-translate translate-values="{ diff: errors.maxlength.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n  <span ng-message="url"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="required"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="email"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="phoneNumber"><span bb-translate>components.directives.validation.messages.errors.phone_number_noSymbolsOrSpaces</span></span>\n  <span ng-message="time"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="date"><span class="js-error-date" bb-translate>components.directives.validation.messages.errors.date</span></span>\n  <span ng-message="maxDate"><span bb-translate translate-values="{ value: errors.maxDate.dateMax }">components.directives.validation.messages.errors.max_date</span></span>\n  <span ng-message="minDate"><span bb-translate translate-values="{ value: errors.minDate.dateMin }">components.directives.validation.messages.errors.min_date</span></span>\n  <span ng-message="schemaSymbolString"><span bb-translate>components.directives.validation.messages.errors.schema_symbol_string</span></span>\n<\/script>\n\n\x3c!-- Immediate Errors --\x3e\n<script type="text/ng-template" id="default-immediate-error-messages">\n  <span ng-message="maxlengthImmediate"><span bb-translate translate-values="{ diff: immediateErrors.maxlengthImmediate.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n<\/script>\n\n\x3c!-- Warnings --\x3e\n<script type="text/ng-template" id="default-warning-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.warnings.invalid_bbml_markups_cleanup</span></span>\n  <span ng-message="maxlengthWarning"><span bb-translate translate-values="{ left: warnings.maxlengthWarning.left }">components.directives.validation.messages.warnings.maxlength.plural</span></span>\n<\/script>\n\n<div class="bb-validation-messages form-element-onsubmit-errors" ng-class="{\'sr-only\': !showOnsubmitErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.onsubmitFieldHasError</div>\n  </div>\n\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="onsubmitErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-onsubmit-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.fieldHasError</div>\n  </div>\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="errors">\n    <ng-transclude class="js-error-message"></ng-transclude>\n    <div ng-messages-include="default-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showImmediateErrors}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="immediateErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-immediate-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-warnings" ng-class="{\'sr-only\': !showWarnings}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="warnings">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-warning-messages"></div>\n  </div>\n</div>\n'},nYZ0:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return y})),n.d(t,"e",(function(){return C})),n.d(t,"c",(function(){return k}));var r=n("D57K"),i=n("wHJ2"),o=n("nsO7"),s=n("+O05"),a=n("lmMM"),u=n("k9iv"),c=n("pjml"),l=n("e6jQ"),d=n("Q/M7"),p=n("adx1"),m=n("JfV0"),f=n("Sa5G"),h=n("yC9S"),g=9e5,v="ultra.services.content",b="contentService",y="content-update",S=function(e){function t(){var n;if(t._instance)throw new Error("Error: Instantiation failed: Use IndicatorCacheService.getInstance() instead of new.");return n=e.call(this)||this,t._instance=n,n}return Object(r.__extends)(t,e),t.getInstance=function(){return t._instance},t.prototype.classConversationIndicatorRemoved=function(e,n,r,i){this.$emitEvent(t.CLASS_CONVERSATION_INDICATOR_REMOVED,e,n,r,i)},t.prototype.groupConversationIndicatorRemoved=function(e,n,r,i){this.$emitEvent(t.GROUP_CONVERSATION_INDICATOR_REMOVED,e,n,r,i)},t.prototype.$onClassConversationIndicatorRemoved=function(n){return e.prototype.$onEvent.call(this,t.CLASS_CONVERSATION_INDICATOR_REMOVED,n)},t.prototype.$onGroupConversationIndicatorRemoved=function(n){return e.prototype.$onEvent.call(this,t.GROUP_CONVERSATION_INDICATOR_REMOVED,n)},t._instance=new t,t.CLASS_CONVERSATION_INDICATOR_REMOVED="class-conversation-indicator-removed",t.GROUP_CONVERSATION_INDICATOR_REMOVED="group-conversation-indicator-removed",t}(p.a);function C(e,t){return e.$on("rootNodeElementFetched",t)}var w=function(){function e(e,t,n,r,i,o,s,a){var u=this;this.$q=e,this.DSCacheFactory=t,this.CourseModel=n,this.PartnerContentIdModel=r,this.errorModal=i,this.assessment=o,this.$rootScope=s,this.$ngRedux=a,this.rootNodeCache=t.createCache("rootNodes"),this.settingsCache=t.createCache("contentSettings"),this.indicatorsCache=t.createCache("indicators",{maxAge:g,deleteOnExpire:"aggressive"}),this.fetchIndicatorsPromiseCache={},this.indicatorCacheService=S.getInstance(),h.b.OnRootScope(s,"content-update",(function(e,t){return u.refreshContentInCache(t)})),this.subscribeToRedux(a)}return e.prototype.subscribeToRedux=function(e){e.connect((function(e){return{}}),(function(e){return{deleteContentInStore:function(t){return e(m.actions.content.deleteContentInStore(t))}}}))(this)},e.prototype.truncateDescription=function(t,n){if(n=n||e.MAX_LENGTH,!t||t.length<=n)return t;n-=" ...".length;var r=t.lastIndexOf(" ",n);return r<=0&&(r=n),t.substr(0,r)+" ..."},e.prototype.findRootNode=function(e,t){var n,r,i,o=this.getCacheKey(t,e.$pk),s=this.rootNodeCache.get(o);return s||(s=e.contents.$find(t.toString()),this.rootNodeCache.put(o,s),n=this.$rootScope,r=e.$pk,i=t,n.$broadcast("rootNodeElementFetched",r,i)),s},e.prototype.getCacheKey=function(e,t){return e.toString()+t},e.prototype.getSettings=function(e){return this.settingsCache.get(e)},e.prototype.putSettings=function(e,t){return this.settingsCache.put(e,t)},e.prototype.removeSettings=function(e){return this.settingsCache.remove(e)},e.prototype.getCourseIndicators=function(e){return this.indicatorsCache.get("courseId_"+e)},e.prototype.putCourseIndicators=function(e,t){return this.indicatorsCache.put("courseId_"+e,t)},e.prototype.removeCourseIndicators=function(e){return this.indicatorsCache.remove("courseId_"+e)},e.prototype.refreshContentInCache=function(e){if(e)for(var t=e.courseId,n=f.h.getValues(),r=0;r<n.length;r++){var i=n[r],o=this.getCacheKey(i,t),s=this.rootNodeCache.get(o);if(s)if(this.updateCachedContent(s,e))return void this.rootNodeCache.put(o,s)}},e.prototype.updateCachedContent=function(e,t){if(e.id===t.id)return null!=t.isAvailable&&(e.isAvailable=t.isAvailable),null!=t.visibility&&(e.visibility=t.visibility),null!=t.isPartiallyVisible&&(e.isPartiallyVisible=t.isPartiallyVisible),null!=t.isGroupContent&&(e.isGroupContent=t.isGroupContent),null!=t.assignedGroups&&(e.assignedGroups=t.assignedGroups),t.adaptiveReleaseRules&&(e.adaptiveReleaseRules=t.adaptiveReleaseRules),e.title=t.title,e.attachedForumLink=t.attachedForumLink,e.ui&&(void 0===e.ui.hasConversationAttached||e.isScorm())&&(e.ui.hasConversationAttached=!!t.attachedForumLink),e.updateProctoringSettings(t),!0;if(e.children)for(var n=0;n<e.children.length;n++){var r=e.children[n];if(this.updateCachedContent(r,t))return!0}return!1},e.prototype.getOrMakeContentInContentTree=function(e,t,n,r,i,o){return n?this.getContentInContentTree(e,t,n):this.makeContentInContentTree(e,t,r,i,o)},e.prototype.getContentInContentTree=function(e,t,n){var r,i,o=this;return e.$asPromise().then((function(e){return e.children=e.children||e.getChildren({limit:0,recursive:!0}),e.children.$asPromise()})).then((function(){if(n){if(r=e.findInTreeById(n))r.isSafeAssignOn()||!r.isTest()&&!r.isAssignment()||r.$fetch({fields:"safeAssignOptions"});else{r=o.CourseModel.$new(t).contents.$find(n,{expand:"alignedGoals,assignedGroups,selfEnrollmentGroups.group"}).$allow([403])}return r.$asPromise()}})).then((function(){if(r&&r.parentId)return(i=e.findInTreeById(r.parentId))||(i=o.CourseModel.$new(t).contents.$find(r.parentId)),i.$asPromise()})).then((function(){return{content:r,parentFolder:i}}))},e.prototype.makeContentInContentTree=function(e,t,n,r,i,o){var s,a,u=this;return e.$asPromise().then((function(e){return e.children=e.children||e.getChildren({limit:0}),e.children.$asPromise()})).then((function(){return(a=u.getParentFolder(n,t,e)).$asPromise()})).then((function(){return a.children=a.children||a.getChildren({limit:0}),a.children.$asPromise()})).then((function(){var e=a.children.indexOfItemById(void 0);return!o&&e>=0&&a.children[e].positionBefore===r&&a.children[e].positionAfter===i?s=a.children[e]:(s=a.children.$build(),(e=a.children.getInsertionIndex(r,i,!0,a.hasMoreChildren))>=0&&s.addAndRevealAtIndex(e),a.children.paging&&a.children.paging.count++),null!=r&&(s.positionBefore=r),null!=i&&null==r&&(s.positionAfter=i),s.parentId=n||a&&a.id,s.depth=a&&null!=a.depth?a.depth+1:void 0,s.courseId=t,{content:s,parentFolder:a}}))},e.prototype.getParentFolder=function(e,t,n){var r;return e?(r=n.findInTreeById(e))||(r=this.CourseModel.$new(t).contents.$find(e)):r=n,r},e.prototype.makeSoftLinkContentInContentTree=function(e,t,n,r,i,o){return this.makeContentInContentTree(t,n,r,i,o).then((function(t){var n=t.content;return e&&e.$pk&&(n.contentHandler=c.r.ContentHandler.CourseLink,n.ui.linkSource=e),n.id=null,n.description=e.description,n.title=e.title,n.courseId=e.courseId,n.isAvailable=e.isAvailable,n.visibility=e.visibility,n.contentDetail={"resource/x-bb-courselink":{linkSourceId:e.id,linkSourceTable:"CONTENT"}},n}))},e.prototype.isEmpty=function(e){return!e||0===e.trim().length},e.prototype.parseForumId=function(e){var t=e.split("/");return t[t.length-1]},e.prototype.determineVisibility=function(e,t){return e?c.r.Visibility.Visible:c.r.Visibility.Hidden},e.prototype.generateDeleteConfirmationKey=function(e,t){var n=this,r=this.$q.defer();return e.ui.modalShowType=a.b.UserChoice.toString(),!e.isFolder()&&!e.isLearningModule()||e.isRoot()?e.canHaveSharedGradingColumn()&&e.hasGradingColumn()&&f.g.PartnerCloud.isEqualTo(e.contentHandler)?this.PartnerContentIdModel.getContentIds(e.courseId,e.linkRef).then((function(t){t.contentIds.length>1?(e.ui.modalShowType=a.b.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-shared-grade-column",r.resolve(e)):n.checkForAttempts(e,r)})).catch((function(t){n.errorModal.handleApiError(t.$response),r.reject(e)})):this.checkForAttempts(e,r):e.isBbPage()?(e.ui.deleteConfirmationKey=f.g.Page.toString(),r.resolve(e)):e.getChildren().$then((function(n){if(n&&n.length>0){e.ui.modalShowType=a.b.Always.toString();var i=n.filter((function(e){return e&&e.isDiscussion()})).length;e.hasGradedContentItems().then((function(o){o?e.ui.deleteConfirmationKey=e.contentHandler+"-contains-graded-items":i===n.length?e.ui.deleteConfirmationKey=e.contentHandler+"-all-discussions-"+t:e.ui.deleteConfirmationKey=i>0?e.contentHandler+"-contains-discussions":e.contentHandler+"-no-discussions",r.resolve(e)}))}else e.ui.deleteConfirmationKey=e.contentHandler+"-empty",r.resolve(e)})),r.promise},e.prototype.checkForAttempts=function(e,t){var n=this;e.canHaveAttempts()&&e.hasGradingColumn()?(e.ui.modalShowType=a.b.Always.toString(),e.getAttemptCount().then((function(n){e.ui.deleteConfirmationKey=n>0?e.getContentDisplay().deleteKey()+"-data":e.getContentDisplay().deleteKey(),t.resolve(e)})).catch((function(r){403===r.$response.status?(e.ui.modalShowType=a.b.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-unknown",t.resolve(e)):(n.errorModal.handleApiError(r.$response),t.reject(e))}))):f.g.Discussion.isEqualTo(e.contentHandler)?(e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),e.$fetch().$then((function(n){var r=n.contentDetail[f.g.Discussion.toString()];r&&r.properties.allowForumGrading&&(e.ui.modalShowType=a.b.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-graded"),t.resolve(e)}))):e.isJournal()?(e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),e.$fetch().$then((function(n){var r=n.contentDetail[f.g.Journal.toString()].blog;r&&r.gradingAllowed&&(e.ui.modalShowType=a.b.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-graded"),t.resolve(e)}))):f.g.CourseLink.isEqualTo(e.contentHandler)?(e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),e.getLinkContentSource({fromServer:!0}).$then((function(n){if(f.g.Discussion.isEqualTo(n.contentHandler)){var r=n.contentDetail[f.g.Discussion.toString()];r&&r.properties.allowForumGrading&&(e.ui.modalShowType=a.b.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-graded")}t.resolve(e)}))):(e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),t.resolve(e))},e.prototype.deleteContent=function(e){var t=this;if(e.id){e.ui.isDeleted=!0;var n={};return(e.isGroupContent||e.isFolder())&&(n.deleteGroups=!0),(e.canHaveAttempts()||e.isDiscussion()||e.isFolder())&&(n.deleteGrades=!0),e.withParams(n).$destroy().$suppressErrorDialog().$asPromise().then((function(n){return t.deleteContentInStore&&t.deleteContentInStore(e.id),n})).catch((function(n){e.ui.isDeleted=!1;var r=n.$response;return t.assessment.isExternallyRefQuestionsAPIError(r.data)?t.assessment.openHasExternallyRefQuestionsModal(t.getExternallyRefQuestionsModalType(e.contentHandler)):t.errorModal.handleApiError(r),t.$q.reject(r)}))}return this.$q.when()},e.prototype.getExternallyRefQuestionsModalType=function(e){return f.g.Folder.isEqualTo(e)?s.b.FOLDER:s.b.ASSESSMENT},e.prototype.canOnlyCreateDiscussion=function(e){return e&&e.children&&e.children.permissions&&!e.children.permissions.create&&e.children.permissions.contentHandlerPermissionMap&&e.children.permissions.contentHandlerPermissionMap.createDiscussion},e.prototype.canCreateAllContent=function(e){return e&&e.children&&e.children.permissions&&e.children.permissions.create},e.prototype.convertBbMLToAttemptFileContentBlocks=function(e){var t=[];return this.convertBbMLToContentBlocks(e).forEach((function(e){"attemptFileBlock"in e&&t.push(e.attemptFileBlock)})),t},e.prototype.convertAttemptFileContentBlocksToBbML=function(e){var t=[];e.forEach((function(e){t.push({attemptFileBlock:e})}));return this.convertContentBlocksToBbML(t,"question1 ")},e.prototype.convertBbMLToContentBlocks=function(e){var t=[],n=document.createElement("div");n.innerHTML=e;for(var r=0;r<n.children.length;r++){var i=n.children[r];if("A"===i.tagName)t.push(this.convertBbMLToFileBlock(i));else if("DIV"===i.tagName){var o=this.getBlockIdFromBbML(i);t.push({textBlock:i.innerHTML.trim(),id:o})}}return t},e.prototype.convertBbMLToFileBlock=function(e){var t={file:{}};if(e.dataset&&e.dataset.bbfile)try{var n=JSON.parse(e.dataset.bbfile);t.alternativeText=n.alternativeText,t.ui={isRenderedInline:"inline"===n.render},t.linkName=n.linkName,t.currentMimeType=n.mimeType}catch(e){}else if(e.dataset&&e.dataset.bbmedia)try{var r=JSON.parse(e.dataset.bbmedia);t.alternativeText=r.alternativeText,t.ui={isRenderedInline:"inline"===r.render}}catch(e){}t.linkName||(t.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),t.currentMimeType||(t.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1));var i=e.href;0===i.indexOf("http://localhost")&&(i=d.c(i.substr("http://localhost".length))),t.downloadUrl=i;var o=i.match(/xid-(\d+_\d+)/);return o&&(t.id=o[1]),{attemptFileBlock:t,id:this.getBlockIdFromBbML(e)}},e.prototype.convertContentBlocksToBbML=function(e,t){var n=document.createElement("div");return e.forEach((function(e){if("attemptFileBlock"in e){var t=document.createElement("a");if(t.href=e.attemptFileBlock.downloadUrl,e.attemptFileBlock.ui){var r={};e.attemptFileBlock.ui.isRenderedInline?r.render="inline":r.render="attachment",e.attemptFileBlock.alternativeText&&(r.alternativeText=e.attemptFileBlock.alternativeText),e.attemptFileBlock.linkName&&(r.linkName=e.attemptFileBlock.linkName),e.attemptFileBlock.currentMimeType&&(r.mimeType=e.attemptFileBlock.currentMimeType),t.dataset.bbfile=JSON.stringify(r)}e.id&&(t.id=e.id),t.innerHTML=e.attemptFileBlock.linkName+"?"+e.attemptFileBlock.currentMimeType,n.appendChild(t)}else if("textBlock"in e){var i=document.createElement("div");e.id&&(i.id=e.id),i.innerHTML=e.textBlock,n.appendChild(i)}e.isNewToBbML&&delete e.isNewToBbML})),(t||"")+n.innerHTML},e.prototype.getBlockIdFromBbML=function(e){return e.id?e.id:this.generateBlockId()},e.prototype.generateBlockId=function(){return"bbml-editor-id_"+l.b()},e.prototype.fetchIndicatorsPerRequest=function(e){var t=this,n=this.fetchIndicatorsPromiseCache[e];return n||(n=this.CourseModel.$new(e).indicators.$fetch().$asPromise().then((function(n){return t.putCourseIndicators(e,n),n}),(function(e){401!==e.$response.status&&(e.$response.status=null),console.error("Fetch indicators error!")})).finally((function(){delete t.fetchIndicatorsPromiseCache[e]})),this.fetchIndicatorsPromiseCache[e]=n,n)},e.prototype.fetchIndicators=function(e,t){if(t)return this.fetchIndicatorsPerRequest(e);var n=this.getCourseIndicators(e);return n?this.$q.when(n):this.fetchIndicatorsPerRequest(e)},e.prototype.getCourseContentCache=function(e,t){var n=this.getCourseIndicators(e);return n?n.filter((function(e){return e.contentId===t}))[0]:null},e.prototype.setClassConversationHasIndicatorToFalseInCache=function(e,t,n){var r=this.getCourseIndicators(e);if(r){var i=o.find(r,(function(e){return e.contentId===t}));i&&(i.classConversationHasIndicator=!1,i.groupIds||(r=o.filter(r,(function(e){return e.contentId!==t}))),this.putCourseIndicators(e,r),this.indicatorCacheService.classConversationIndicatorRemoved(e,t,!!i.groupIds,n))}},e.prototype.removeGroupIdFromIndicatorCache=function(e,t,n,r){if(!n)return null;var i=this.getCourseIndicators(e);if(i){var s=o.find(i,(function(e){return e.contentId===t}));if(s){if(s.groupIds=o.filter(s.groupIds,(function(e){return n!==e})),s.groupIds&&0===s.groupIds.length)return delete s.groupIds,s.classConversationHasIndicator||(i=o.filter(i,(function(e){return e.contentId!==t}))),this.putCourseIndicators(e,i),void this.indicatorCacheService.groupConversationIndicatorRemoved(e,t,s.classConversationHasIndicator,r);this.putCourseIndicators(e,i)}}},e.prototype.clearContentGroups=function(e,t){var n=this,r=this.$q.defer();if(e.assignedGroups&&e.assignedGroups.length){if(e.assignedGroups.some((function(e){return!e.group})))throw new Error("Expected group to be expanded on content group assignments when clearing groups.");var i=e.assignedGroups.filter((function(e){return!e.group.groupSetId})).map((function(e){return{method:"DELETE",relativeUrl:e.groupId}}));i.length>0&&t.groups.batchUpdate(i),e.isGroupContent=!1,e.assignedGroups=[],e.saveAssignedGroups(!0).$asPromise().then((function(){n.$rootScope.$broadcast(y,e),r.resolve(e)}))}else r.resolve(e);return r.promise},e.MAX_LENGTH=60,e.MAX_LENGTH_IN_CONTENT_ITEM=250,e.$inject=["$q","DSCacheFactory",c.o.serviceName,c.V.serviceName,u.c,s.g,"$rootScope","$ngRedux"],e}(),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(w);i.module(v,["angular-data.DSCacheFactory",c.Q,u.b,s.f]).service(b,w)},nawZ:function(e,t,n){"use strict";var r;!function(e){e.ModifyException="course.assessment.exceptions.MODIFY",e.ViewException="course.assessment.exceptions.VIEW"}(r||(r={})),t.a=r},neh4:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n("JzsJ");var r=n("5MwF"),i=n("wHJ2"),o=n("0JpG"),s=n("w9Zy"),a=n("Qbdf"),u=n("X455"),c=n("bF8R"),l=n("vdfi"),d=n("jhBu"),p=n("o5Lu"),m=n("TnpK"),f=n("pjml"),h=n("nmzr"),g="ultra.course.content.assignment.routes";i.module(g,[o.moduleName,c.a,d.a,p.g,m.b,a.b]).config([m.c,a.c,u.b,function(e,t,i){var p;e.peekState("assignment",{abstract:!0,url:"/assignment/:assignmentId?courseId",resolve:(p={},p[a.d]=t.resolve,p[u.c]=i.resolve,p.contentData=[a.d,c.b,m.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.assignmentId,contentHandler:f.r.ContentHandler.UltraAssignment})}],p.currentContent=["contentData",function(e){return e.courseContent}],p.currentColumn=["contentData",function(e){return null!=e.gradingColumn.rubricAssociations?e.gradingColumn.$asPromise():e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()}],p),peekStates:["conversations",h.CourseRoutes.COURSE_MESSAGE],peekViewName:"assignment-conversation@"}).peekState("assignment.router",{url:"/route",routingFunction:[f.o.serviceName,d.b,m.d,function(e,t,n){var r=n.nextParams.courseId?n.nextParams.courseId:n.prevParams.courseId;e.$new(r).contents.$find(n.nextParams.assignmentId).$then((function(e){e.canViewAsInstructor()?n.go(n.prev.name,n.prevParams).then((function(){n.goPeekState("gradebook-item.assignment",{courseId:e.courseId,contentId:e.id,gradeitemView:"details"})})):n.go(n.prev.name,n.prevParams).then((function(){n.goPeekState("assignment.view",{courseId:e.courseId,assignmentId:e.id})}))}))}]}).peekState("assignment.view",{url:"/view",resolve:{translations:["$q",o.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}],prefetch:["$q",f.o.serviceName,m.d,function(e,t,n){var i=n.nextParams.courseId?n.nextParams.courseId:n.prevParams.courseId;r.a.features.httpEase&&t.$new(i).contents.$find(n.nextParams.assignmentId,{expand:"assignedGroups,associatedRubrics,alignedGoals"}).$then((function(e){t.$new(i).gradebook.columns.$find(e.getDeployedAssessment().gradingColumn.id,{expand:"associatedRubrics,rubricAssociations.rubricDefinition.alignedGoals,rubricAssociations.rubricDefinition.rows.alignedGoals"})}))}]},require:[function(){return Promise.all([n.e(11),n.e(14),n.e(44),n.e(1),n.e(2),n.e(7),n.e(36),n.e(61)]).then(n.bind(null,"pA7Z"))}],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations",h.CourseRoutes.COURSE_MESSAGE],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt",{abstract:!0,url:"/attempt"}).peekState("assignment.view.attempt.edit",{url:"/{attemptId:_[0-9]+_1}",onEnter:[s.e,m.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{translations:["$q",o.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/goal-alignment/goal")])}]},require:[function(){return Promise.all([n.e(11),n.e(14),n.e(44),n.e(1),n.e(2),n.e(7),n.e(49),n.e(36),n.e(56),n.e(575)]).then(n.bind(null,"OXIQ"))}],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations",h.CourseRoutes.COURSE_MESSAGE,"rubric-evaluation","rubric-view",l.b],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt.finished",{url:"/view",onEnter:[s.e,m.d,function(e){e.shrinkTopPanel()}],params:{gradeDetail:null},resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/assignment/assignment")}]},require:function(){return Promise.all([n.e(11),n.e(14),n.e(44),n.e(1),n.e(2),n.e(7),n.e(36),n.e(61)]).then(n.bind(null,"pA7Z"))},pageTitle:"course.content.assignmentAttempt"}).peekState("assignment.grade",{url:"/grade",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/assignment/assignment")}]},require:function(){return Promise.all([n.e(11),n.e(14),n.e(44),n.e(1),n.e(2),n.e(7),n.e(36),n.e(61)]).then(n.bind(null,"pA7Z"))},pageTitle:"course.content.assignmentGrading"})}])},"nh++":function(e,t,n){},nkTj:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return y})),n.d(t,"g",(function(){return S})),n.d(t,"a",(function(){return w}));var r=n("D57K"),i=(n("QLzv"),n("BnCD"),n("/fvP"),n("5iHu")),o=n("wHJ2"),s=n("nsO7"),a=n("nbDY"),u=n.n(a),c=n("VdDF"),l=n("HDxW"),d=n("k9iv"),p=n("z6Q5"),m=n("Qbdf"),f=n("Q/M7"),h=(n("JfV0"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.GET=new t("GET"),t.POST=new t("POST"),t.PATCH=new t("PATCH"),t.DELETE=new t("DELETE"),t}(u.a)),g=function(e){return e},v="ultra.model.utilities",b="ultra.model.utilities.Utilities";function y(e,t){return null!=e?e:t}function S(e,t){return e.$isCollection?"PUT"===e.$response.config.method&&Array.isArray(t)?t.map((function(e){return e.statusCode>=200&&e.statusCode<300?o.fromJson(e.body):e.body})):(e.paging=t&&t.paging,e.permissions=t&&t.permissions,t&&t.results):t}var C,w=function(){function e(){}return e.isValid=function(e){return!s.isEmpty(e)&&/^_\d+_\d+$/.test(e)},e}();o.module(v,["restmod",d.b,p.a,l.a]).factory(b,["$http","$q",function(e,t){return{getDataMixin:function(e,n,r){return function(i,o){var s=(o=o||{}).path||"",a=o.overrideIdKey,u=o.params;return t.when(i).then((function(i){var c=t.defer();if(null==i||0===i.length)return c.resolve(i),c.promise;var l={};i.forEach((function(e){var t=function(e,t){return t.split(".").reduce((function(e,t){return t?e&&e[t]:e}),e)}(e,s+"."+(a||n));t&&(l[t]=l[t]||[]).push(e)}));var d=Object.keys(l);return e(d,u).$asPromise().then((function(e){e.forEach((function(e,t){l[d[t]].forEach((function(t){!function(e,t,n){for(var r=t.split("."),i=0;i<r.length-1;i++)r[i]&&(e=e&&e[r[i]]);e&&(e[r[r.length-1]]=n)}(t,s+"."+(o.overrideResultKey||r),e)}))})),c.resolve(i)})),c.promise}))}},createHooksToFetchParent:function(){function n(n,r){n.cache={get:function(){return t.all([e(s.omit(n,"cache")),r.$resolve().$asPromise()]).then((function(e){return e[0]}))}}}var i={"before-fetch-many":function(e){n(e,this.$scope.$scope)},"before-fetch":function(e){n(e,this.$scope.$scope.$scope)}};return function(e){return Object(r.__assign)({"after-fetch-many":function(){var t=this;this.forEach((function(n){return n[e]=t.$scope.$scope}))},"after-fetch":function(){this[e]=this.$scope.$scope.$scope}},i)}}()}}]).factory("DateSerializer",(function(){return{encode:function(e){return c.a.parseDateToISOString(e)},decode:function(e){return c.a.parseStringToDate(e)}}})).filter("localDate",(function(){return function(e){return c.a.convertToLocalDate(e)}})).factory("BbRestmodFindMany",["restmod","$q",p.b,"restmod.Preload",function(e,t,n){return e.mixin({$extend:{"Scope.canCreate":function(){return this.permissions&&this.permissions.create},"Scope.canEdit":function(){return this.permissions&&this.permissions.edit},"Scope.canDelete":function(){return this.permissions&&this.permissions.delete},Scope:{findMany:function(e,r,i){var s=this,a=this.$collection();return a.$always((function(){return n.performBatch((function(n){return t.all(e.map((function(e){var t,a=s.$new(e).$fetch(o.extend(((t={})[p.c]=n,t),r));return(i||[]).length>0?a.$allow(i).$asPromise():a.$asPromise()})))})).then((function(e){e.forEach((function(e){return a.push(e)}))}))}))}}},$hooks:{"before-find-many":function(e){e.method="PUT",e.data=(e.params&&e.params.ids||[]).map((function(t){var n=o.copy(e.params);return delete n.ids,{method:"GET",relativeUrl:t+(n&&"?"+i.param(n)||"")}})),e.params&&delete e.params.ids}}})}]).factory("BbApiStyle",["restmod",function(e){return e.mixin((function(){this.setProperty("style","BB").setProperty("primaryKey","id")}))}]).factory("BbEncodeUrl",["restmod","inflector",function(e,t){return e.mixin({$extend:{Model:{encodeUrlName:function(e){return t.camelize(e)}}}})}]).factory("BbUi",["restmod",function(e){return e.mixin({ui:{mask:!0,init:function(){return{}}}})}]).factory("BbWithParams",["restmod",function(e){return e.mixin({$extend:{Record:{withParams:function(e,t){var n=function(r){r.params||(r.params={}),Object.keys(e).forEach((function(n){r.params[n]=t?t(r.params[n],e[n],n):e[n]})),this.$off("before-request",n)};return this.$on("before-request",n),this}}}})}]).factory("BbApiErrorHandlerInjector",["restmod","$injector","$window","$rootScope",d.c,l.b,function(e,t,n,r,i,o){return e.mixin({$hooks:{"after-request-error":function(){var e=this;this.__bb_suppressErrorDialog||setTimeout((function(){e.$then((function(){}),o.handle)}))}}})}]).factory("BbCheckStatusCode",["restmod",function(e){return e.mixin({$extend:{Resource:{isStatusCode:function(e){return this.$response&&this.$response.status&&this.$response.status===e}}}})}]).factory("BbPermissions",["restmod","restmod.Preload",function(e){return e.mixin({$extend:{Record:{canCreate:function(){return this.permissions&&this.permissions.create},canEdit:function(){return this.permissions&&this.permissions.edit},canDelete:function(){return this.permissions&&this.permissions.delete}}}})}]).factory("BbPermissionsMask",["restmod",function(e){return e.mixin({permissions:{mask:"CU"}})}]).factory("$ExtendRecord",["RMUtils",function(e){var t=Symbol("$extendRecord");return{$extend:{"Model.$extendRecord":function(e){return this[t]=this[t]||[],this[t].push(e),this},"Record.$decode":function(n,r){var i=this.$super.apply(this,arguments);if(void 0===this.$type)throw new Error("NOT_FOUND_$MODEL");return(this.$type[t]||[]).some((function(t){var r=t(i,n);return!!r&&(e.extendOverriden(i,r),!0)})),i}}}}]).factory("BbExpandParams",["restmod",function(e){var t=function(e){return!!s.isString(e)&&""!==e.trim()},n=function(e){return Array.isArray(e)?e.filter(t):s.isString(e)?e.split(",").filter(t):[]},r=Symbol("$expand_params"),i=function(e){return function(e,t){void 0===t&&(t=new Set);var r=n(e);return r.length<=0||r.every((function(e){return t.has(e)}))}(e&&e.expand||"",this[r])?this.$resolve():this.$fetch(e)};return e.mixin({$hooks:{"after-request":function(e){this[r]=function(e){var t=e.config&&e.config.params&&e.config.params.expand,r=n(t);return new Set(r)}(e)}},$extend:{"Record.$fetchIfNotExpanded":i,"Collection.$fetchIfNotExpanded":i}})}]).factory("BbExcludeCourseGradebookActivity",["restmod","$injector",function(e,t){return e.mixin({$hooks:{"before-request":function(e){var n=t.get(m.e),r=e.url,i="GET"===e.method,o=!!n.courseId,s=/\/courses\/_\d+_1\/gradebook\/(schemas|grades|columns)/.test(r);!o&&i&&s&&(e.url=Object(f.a)(r,"isExcludedFromCourseUserActivity","true"))}}})}]).config(["restmodProvider",function(e){function t(e){e=e||[];var t=this.$promise=this.$promise||C.when(this),n=C.defer();return this.$promise=n.promise,t.then((function(e){n.resolve(e)}),(function(t){e.some((function(e){var n=[0];if("number"==typeof e)n[0]=e;else if("string"==typeof e){var r=e.split("-");n[0]=parseInt(r[0],10),n[1]=parseInt(r[1]||r[0],10)}return n[1]=n[1]||n[0],t&&t.$response.status>=n[0]&&t.$response.status<=n[1]}))?n.resolve(t):n.reject(t)})),this}function n(){var e=this;if(this.__bb_suppressErrorDialog=!0,!this.$promise)throw new Error("suppressErrorDialog must be called after performing an action, such as $fetch or $resolve");return this.$finally((function(){e.__bb_suppressErrorDialog=!1}))}function r(e,t){var n=Object.create(null);return Object.keys(e).forEach((function(r){if("$"!==r[0]){var i=e[r];o.equals(i,t[r])||(n[r]=t[r])}})),Object.keys(t).forEach((function(r){if("$"!==r[0]&&!n[r]){var i=t[r];o.equals(i,e[r])||(n[r]=i)}})),function e(t,n){var r=Object.keys(t);var i=[];var s;for(var a=0;a<r.length;a++)s=n?n+"."+r[a]:r[a],i.push(s),"$"!==r[a].charAt(0)&&t[r[a]]&&"object"==typeof t[r[a]]&&!o.isArray(t[r[a]])&&(i=i.concat(e(t[r[a]],s)));return i}(n,"")}e.rebase("BbRestmodFindMany"),e.rebase("BbPermissions"),e.rebase("BbPermissionsMask"),e.rebase("BbApiStyle"),e.rebase("BbApiErrorHandlerInjector"),e.rebase("BbEncodeUrl"),e.rebase("BbWithParams"),e.rebase("BbCheckStatusCode"),e.rebase("BbUi"),e.rebase("restmod.Preload"),e.rebase("restmod.FindMany"),e.rebase("$ExtendRecord"),e.rebase("BbExpandParams"),e.rebase("BbExcludeCourseGradebookActivity"),e.rebase({$extend:{"Model.$mixHook":function(e,t,n){var r=this,i="$mixHook_"+e,o=i+"_hook";r[i]=r[i]||[],r[i].push(t),r[o]=r[o]||Object(s.once)((function(){var t;r.mix({$hooks:(t={},t[e]=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(r[i]||[]).forEach((function(n){return n&&n.apply(e,t)}))},t)})})),r[o]();var a=Object(s.once)((function(){Object(s.remove)(r[i],(function(e){return e===t}))}));return n&&n.$on("$destroy",a),a}}}),e.rebase({"Model.unpack":S,"Record.$allow":t,"Collection.$allow":t,"Record.$suppressErrorDialog":n,"Collection.$suppressErrorDialog":n,"Record.$revert":function(e){var t=this,n=e||this.$_ultra_previous_version,i=r(n,this.$encode("U")),o=this.constructor.$buildRaw(n);return i.forEach((function(e){t[e]=o[e]})),this},"Record.$snapshot":function(){return this.$_ultra_previous_version=this.$encode("U"),this.$_ultra_previous_version},"Record.$getChangedKeys":function(){return r(this.$_ultra_previous_version||{},this.$encode("U"))},"Record.$getPreviousVersion":function(){return this.$_ultra_previous_version},"Record.$patch":function(e){var t=r(this.$_ultra_previous_version||{},this.$encode("U"));if(e&&e.length>0&&e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t.length>0){this.$_ultra_patchHolder={data:this.$wrap("U"),changedKeys:t};var n=function(e){var t=this.$_ultra_patchHolder.changedKeys,r=this.$_ultra_patchHolder.data;t.forEach((function(t){e.data[t]=r[t]})),this.$off("before-update",n)};this.$on("before-update",n),this.$save(t)}else{var i={method:"PATCH",url:this.$url("update"),data:{}};this.$dispatch("before-request",[i])}return this},$hooks:{"after-feed":function(){this.$snapshot()}}}),e.rebase({$extend:{Collection:["slice","filter","concat"].reduce((function(e,t){return e["$"+t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.$collection();return r.push.apply(r,this[t].apply(this,e)),r},e}),{})}})}]).run(["$q",function(e){C=e}])},nsX6:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("+3BC");var r=n("wHJ2"),i=n("5MwF"),o="ultra.components.directives.featureToggle",s=function(){function e(e){var t=this;this.$parse=e,this.restrict="A",this.priority=1e3,this.transclude="element",this.terminal=!0,this.link=function(e,n,r,o,s){var a=i.a.features,u=r.prototypeContent&&"true"===r.prototypeContent.toLowerCase();if(i.a.showFeaturePrototypes||!u){var c=t.$parse(r.bbFeatureToggle);r.removeFromDom&&"true"===r.removeFromDom.toLowerCase()?c(a)&&s((function(e){n.replaceWith(e)})):s((function(e){c(a)||e.addClass("bb-feature-toggle-hide"),n.replaceWith(e)}))}}}return e.$inject=["$parse"],e}();r.module(o,[]).directive("bbFeatureToggle",["$injector",function(e){return e.instantiate(s)}])},o2qC:function(e,t){e.exports='<table class="fs-table bb-table">\n  <caption role="alert" class="sr-only">{{ ::config().title }}</caption>\n  <thead>\n    <tr class="table-headings">\n      <th class="table-heading"\n          scope="col"\n          ng-style="{ \'width\': column.widthPercentage, \'min-width\': column.widthPercentage }"\n          ng-repeat="column in config().columns"\n          ng-if="column.visible"\n          data-heading-index="{{ ::$index }}"\n          ng-class="{\n            \'sortable-header\': column.sort,\n            \'ascending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\',\n            \'descending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\'}"\n          ng-attr-aria-sort="{{ $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\' ? \'ascending\' :\n          $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\' ? \'descending\' : undefined }}">\n        <button class="button-anchor" ng-if="column.sort" analytics-id="components.directives.table.sort.button">\n          <span class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n          <i class="sort-control">\n            <i class="arrow up" ></i>\n            <i class="arrow down"></i>\n          </i>\n        </button>\n        <span ng-if="!column.sort" class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody ng-if="table.initialDataLoaded || config().showRowsDuringRefresh">\n    <tr ng-repeat="item in tableData()"\n        class="table-row"\n        ng-class="{\'clickable\': config().rowClickFn }"\n        ng-click="config().rowClickFn ? config().rowClickFn(item): null"\n        ng-transclude\n        analytics-id="components.directives.table.rowClick"></tr>\n  </tbody>\n</table>\n<div ng-if="config().pageSize && table.initialDataLoaded">\n  <div bb-infinite-scroll="table.showMore()"\n       infinite-scroll-immediate-check="false"\n       infinite-scroll-total-count="config().totalCount"\n       infinite-scroll-current-count="tableData().length"\n       infinite-scroll-load-limit="config().pageSize"\n       infinite-scroll-container="config().infiniteScrollContainerSelector()"\n       infinite-scroll-tray-id="{{::config().instanceId}}-scroll-tray"></div>\n</div>\n<div class="spinner bb-secondary-color-2" ng-show="!table.initialDataLoaded"></div>'},o5Lu:function(e,t,n){"use strict";(function(e){n.d(t,"g",(function(){return _})),n.d(t,"h",(function(){return D})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return R})),n.d(t,"a",(function(){return M})),n.d(t,"e",(function(){return N})),n.d(t,"d",(function(){return L})),n.d(t,"f",(function(){return G}));var r,i=n("D57K"),o=n("nbDY"),s=n.n(o),a=n("nsO7"),u=n("wHJ2"),c=n("rEZX"),l=n("A0nf"),d=n("z6Q5"),p=n("0JpG"),m=n("d8yC"),f=n("Fvsw"),h=n("Qbdf"),g=n("fYJU"),v=n("Sa5G"),b=n("jhBu"),y=n("Bu0u"),S=n("oi1r"),C=n("X/qj"),w=n("pjml"),k=n("wgY5"),I=n("Mc6f"),T=n("5uPl"),E=n("e6jQ"),$=n("TnpK"),P=n("JfV0"),A=n("ZQFV"),O=n("t6LE"),_="ultra.services.grade",D="grade",x="course.grades.gradebook-item.submission.grade-status-change",R="bb-update-column",M="bb-update-attendance-column",N="placeholder",j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Possible=new t("possible"),t.Text=new t("text"),t}(s.a),L=function(){function t(e,t,n,r,i,o,s,a,u,c,l,d,p,m,f,h,g,v,b,y,S,C,w,k){this.$q=e,this.$rootScope=t,this.$injector=n,this.cacheFactory=r,this.$ngRedux=i,this.CourseModel=o,this.GradeAttemptModel=s,this.GradebookSettingsModel=a,this.GradeGroupAttemptModel=u,this.GradeModel=c,this.ColumnModel=l,this.UserModel=d,this.GradeBulkViewModel=p,this.context=m,this.bbLocalize=f,this.ultraState=h,this.batchService=g,this.entitlement=v,this.notation=b,this.schemaService=y,this.gradebookPermissionService=S,this.originalityReportService=C,this.contextUser=w,this.contextCourse=k,this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE="resource/x-bb-grade",this.loadColorPreference=function(){},this.colorSettings={isColorEnabled:!0,colorPreference:""},this.gbSettingsCache=r.createCache("gbSettings"),this.subscribeToRedux(),this.loadColorPreference()}return t.prototype.subscribeToRedux=function(){var e=this,t=this.$ngRedux.connect((function(t){var n=P.select.systemPreference.getSystemPreferenceByKey(t,"gradepill.color.preference.settings");return n&&n.value&&n.value!==e.colorSettings.colorPreference?{colorSettings:Object(i.__assign)({colorPreference:n.value},JSON.parse(n.value))}:{}}),(function(e){return{loadColorPreference:function(){return e(P.actions.systemPreference.loadSystemPreference({key:"gradepill.color.preference.settings"}))}}}))(this);this.$rootScope.$on("$destroy",t)},t.prototype.loadColumnsAndGrades=function(e){var t=this,n=this.CourseModel.$new(e.courseId),r=this.loadColumns(n,e.includeExternal,{expand:"associatedRubrics,collectExternalSubmissions",includeInvisible:!!e.includeInvisible}).then((function(t){return e&&e.attachContentsByScoreProviderHandle?t.attachRelatedContentsByScoreProviderHandle(e.attachContentsByScoreProviderHandle):t})),i=this.loadGrades(n,e.userId,e.gradeQueryParams);return this.$q.all([r,i]).then((function(r){var i=r[0]||[],o=r[1]||[],s=[],u=a.keyBy(o,(function(e){return e.columnId}));return i.forEach((function(e){var n=u[e.id];n?n.column=e:n=t.GradeModel.$build({column:e}),s.push(n)})),t._loadAttempts(s,n,e.attemptQueryParams).then((function(e){return e}))}))},t.prototype.loadGrade=function(e,t){var n,r,i=this,o=this.CourseModel.$new(e.courseId);if(e.column)r=e.column&&e.column.$asPromise&&e.column.$asPromise()||this.$q.when(e.column);else{if(!e.columnId)throw new y.a({message:"Column or columnId must be provided."});r=o.gradebook.columns.$find(e.columnId).$asPromise()}return r.then((function(r){return a.merge(e.gradeQueryParams,{userId:e.userId}),r.grades.$search(e.gradeQueryParams).$allow([404]).$asPromise().then((function(s){return(n=s[0])?(n.column=r,t?i.loadAttempt(n,o,e.attemptQueryParams,e.content):i.$q.when(n)):i.$q.when(null)}))}))},t.prototype.loadCurrentColumnsAndGrades=function(e,t,n,r){var i=e||this.contextCourse.courseId,o=r||this.contextUser.userId;return this.loadColumnsAndGrades({courseId:i,userId:o,includeExternal:!0,includeInvisible:!!t,gradeQueryParams:{expand:"attemptsLeft"},attemptQueryParams:{overrideAggregationModel:w.F.AttemptAggregationModel.Last},attachContentsByScoreProviderHandle:n})},t.prototype.loadColumns=function(e,t,n){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));var r=function(e){return t?e:e.filter((function(e){return!e.externalGrade}))},i=e.gradebook.columns;return(i?i.length:0)>(n&&"offset"in n?n.offset:0)?i.$refresh(n).$asPromise().then(r):i.$fetch(n).$asPromise().then(r)},t.prototype.loadGrades=function(e,t,n){var r=this;e instanceof this.CourseModel||(e=this.CourseModel.$new(e));var i=a.merge({userId:t},n);return i.limit=100,e.gradebook.grades.$fetch(i).$asPromise().then((function(n){return n.paging.nextPage?(i.offset=n.paging.offset+n.paging.limit,r.loadGrades(e,t,i)):e.gradebook.grades}))},t.prototype.loadColumnGrades=function(e,t){return e instanceof this.ColumnModel||(e=t.gradebook.columns.$new(e)),e.grades.$refresh().$asPromise()},t.prototype.loadBulkViewRows=function(e,t,n,r,i){var o=this,s=[],u=[];e.forEach((function(e){u.push(e.id);var n=o.$injector.instantiate(U,{column:t});n.user=e.user,n.membership=e,n.dueDate=t.dueDate,n.hasDueDateException=e.isDueDateExcepted(),s.push(n)}));var c=a.keyBy(s,(function(e){return e.user.id})),l={courseId:t.courseId,membershipIds:u,columnIds:[t.id]};return r&&(l=a.merge(l,r)),this.CourseModel.$new(t.courseId).gradebook.bulkView.$fetch(l).$asPromise().then((function(e){return o.processBulkViewRows(e,c,t,n,i)}))},t.prototype.processBulkViewRows=function(e,t,n,r,i){e.bulkViewUsers.forEach((function(e){var n=t[e.studentId];e.peerReviewsCountsPerColumn&&(n.peerReviewCounts=e.peerReviewsCountsPerColumn[n.Column.id]),n.originalityProcessed=e.grades[0].originalityProcessed,n.originalityScore=e.grades[0].originalityScore,e.grades.forEach((function(o){n.grade=o.grade,n.grade.user=n.user,r&&r.lookup[o.grade.id]&&(n.grade.attempts=r.lookup[o.grade.id]),n.attemptCount=o.attemptCount,n.lastAttemptDate=o.lastAttemptDate,n.attemptsReadyToPost=o.attemptsReadyToPost,i&&!i(n)&&delete t[e.studentId]}))}));var o=a.values(t);return this.originalityReportService.setOriginalityAverageScore(o,n.id),o},t.prototype.loadCustomizedBulkViewRows=function(e,t,n,r,i,o){var s=this;if(l.a.Discussion.isEqualTo(t.scoreProviderHandle)){var u=this.$q.defer();return this.loadBulkViewRows(e,t,null,{expand:"grade.instructorFeedback,attempts"}).then((function(i){var o=a.merge(a.clone(r),{limit:e.length}),c=a.merge(a.clone(o),{dateBefore:t.dueDate}),l=function(e,t){if(e&&e.length){var n={};e.forEach((function(e){var r=e.data.id;n[r]=t?{totalComment:e.topLevelReplyCount,totalReply:e.secondLevelReplyCount}:{comment:e.topLevelReplyCount,reply:e.secondLevelReplyCount}})),i.forEach((function(e){if(n&&n[e.user.id]){e.participation||(e.participation={comment:0,reply:0,totalComment:0,totalReply:0});var r=n[e.user.id];t?(e.participation.totalComment=r.totalComment,e.participation.totalReply=r.totalReply):(e.participation.comment=r.comment,e.participation.reply=r.reply)}}))}};s.$q.all([s.CourseModel.$find(t.courseId).forums.$new(n).usercounts.$fetch(c).$allow([400]).$then((function(e){l(e)})).$asPromise(),s.CourseModel.$find(t.courseId).forums.$new(n).usercounts.$fetch(o).$allow([400]).$then((function(e){l(e,!0)})).$asPromise()]).then((function(){return u.resolve(i)})).catch(u.reject)})).catch(u.reject),u.promise}var c="attempts";i&&(c+=",submissionResults");var d=!!o;return this.loadBulkViewRows(e,t,null,{expand:c,includeInProgress:d})},t.prototype.loadGradeOverall=function(e){return this.CourseModel.$new(e).gradebook.columns.getOverallColumn()},t.prototype.loadAnonymousStudentRows=function(e){var t=this;return e.getGradeIdToAttempt({expand:"toolAttemptDetail,viewUrl"}).then((function(e){return e.lookup})).then((function(n){var r=[];return Object.keys(n).forEach((function(i){var o=n[i];if(a.remove(o,(function(e){return e.isInProgress()})),o.length>0){var s=t.createAnonymousStudentRow(e,o,i);r.push(s)}})),r}))},t.prototype.createBlankSubmissionListRow=function(e){var t=this.$injector.instantiate(U,{column:e}),n=this.GradeAttemptModel.$collection();return t.user=this.UserModel.getAnonymousStudent(""),t.grade=this.GradeModel.$build({id:null,user:t.user,attempts:n}),t.id=N,t},t.prototype.generatePeerRow=function(e,t,n){return this.createAnonymousStudentRowWithoutId(t,e,n)},t.prototype.createAnonymousStudentRow=function(e,t,n){return this.createAnonymousStudentRowImpl(e,t,n,n)},t.prototype.createAnonymousStudentRowWithoutId=function(e,t,n){return this.createAnonymousStudentRowImpl(e,t,n,"")},t.prototype.createAnonymousStudentRowImpl=function(e,t,n,r){var i=this.$injector.instantiate(U,{column:e}),o=t[t.length-1],s=t.reverse().find((function(e){return e.displayGrade&&null!=e.displayGrade.score}));return i.user=this.UserModel.getAnonymousStudent(r),i.dueDate=e.dueDate,i.attemptCount=t.length,i.lastAttemptDate=o.attemptDate,i.grade=this.GradeModel.$build({id:n,user:i.user,attempts:t,displayGrade:s&&s.displayGrade||{},manualStatus:s&&s.status||v.r.NoOverride}),i},t.prototype.loadAnonymousStudentGrade=function(e,t){var n=this,r=e.grades.$new(t).attempts,i=this.UserModel.getAnonymousStudent(t);return r.$fetch().$asPromise().then((function(r){return n.GradeModel.$build({pointsPossible:e.possible,id:t,user:i,attempts:r})}))},t.prototype.loadGroupRows=function(e,t,n,r,i){var o=this,s={},u=[],c=a.keyBy(n,(function(e){return e.user.id}));return(r.ui&&r.ui.content&&r.ui.content.assignedGroups&&r.ui.content.assignedGroups.some((function(e){return!!e.groupAssociationId}))?this.$q.when(r.ui.content):e.contents.$find(r.contentId,{expand:"assignedGroups"}).$asPromise()).then((function(n){var l={};return n&&n.assignedGroups&&n.assignedGroups.forEach((function(e){l[e.groupId]=e.groupAssociationId})),u=t.map((function(t){return s[t.groupId]={},e.groups.$find(t.groupId,{expand:"memberships"}).$then((function(e){var t=o.$injector.instantiate(U,{column:r});t.group=e,t.groupDetailsShown=!1,t.dueDate=r.dueDate,t.group.ui||(t.group.ui={}),t.group.ui.groupAssociationId=l[e.id],t.group.memberships&&(t.group.memberships=t.group.memberships.filter((function(e){return!!c[e.userId]&&(e.ui||(e.ui={}),e.ui.user=c[e.userId].user,e.ui.hasDueDateException=c[e.userId].isDueDateExcepted(),e.ui.courseRole=c[e.userId].courseRole,!0)}))),t.hasDueDateException=t.group.memberships.some((function(e){return c[e.userId].isDueDateExcepted()})),s[e.id]=t})).$asPromise()})),o.$q.all(u).then((function(){var e="attempts,toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor";return i&&(e+=",submissionResults"),r.getContentGroupIdToGroupAttempt({expand:e}).then((function(e){var t={};a.values(e.lookup).forEach((function(e){t[e[0].groupId]=e[0]}));var n,i=[];return o.batchService.performBatch((function(){n=a.values(s),i=n.map((function(e){return o.updateOneGroupRow(e,r,{expand:!0,groupAttempt:t[e.group.id]})}))})),o.$q.all(i).then((function(){return o.originalityReportService.setOriginalityAverageScore(n,r.id)})),o.$q.all(i).then((function(){return o.sortGroupMembers(n)}))}))}))}))},t.prototype.getOverallGradeJson=function(t){var n=e(e.parseHTML(t)),r={};if("math"===n.prop("nodeName")){var i=n.children();if(i&&i.length>0){var o=e(i[0]);if("mi"===o.prop("nodeName")){var s=o.text(),a=(s=(s=s.replace("@X@BBCalColElem(","")).replace(")@X@","")).indexOf(":")+1,u=s.substring(a);r=JSON.parse(u)}}}return r},t.prototype.sortGroupMembers=function(e){var t=this,n=[];return e.forEach((function(e){var r=[];e.group.memberships&&(e.group.memberships.forEach((function(e){r.push(t.bbLocalize.formatUsername(e.ui.user,p.ILocaleUsernameFormat.Short,t.$rootScope).then((function(t){e.ui.formatUserName=t})))})),n.push(t.$q.all(r).then((function(){e.group.memberships.sort((function(e,t){return e.ui.formatUserName.localeCompare(t.ui.formatUserName)})),e.group.ui.users=[],e.group.memberships.forEach((function(t){e.group.ui.users.push(t.ui.user)}))}))))})),this.$q.all(n).then((function(){return e}))},t.prototype.updateOneGroupRow=function(e,t,n){var r=this;return void 0===n&&(n={expand:!0}),t.getGroupGrade(e.group.ui.groupAssociationId,n.expand).then((function(t){var i=n.groupAttempt||e.grade&&e.grade.ui.groupAttempt;return e.grade=t,i&&(e.originalityScore=i.originalityScore,e.originalityProcessed=i.originalityProcessed),r.setGroupAttemptOnRow(e,i,n.grade,n.grades||t.groupMembersGrades,n.attempt),e}))},t.prototype.setGroupAttemptOnRow=function(e,t,n,r,i){var o=t||this.GradeGroupAttemptModel.$buildRaw({}),s={rawText:"",displayText:""};n&&n.instructorFeedback?s=n.instructorFeedback:r&&r.length&&r[0].instructorFeedback&&(s=r[0].instructorFeedback),e.grade.groupAttempts.push(o),e.grade.instructorFeedback=s,e.grade.ui={groupAttempt:o,currentAttemptIndex:0},e.attemptCount=w.C.AttemptStatus.NeedsGrading.isEqualTo(o.status)||w.C.AttemptStatus.NeedsMoreGrading.isEqualTo(o.status)||w.C.AttemptStatus.Completed.isEqualTo(o.status)?1:0,e.lastAttemptDate=o.attemptDate,e.isGroupGradeInProgress=e.grade.isInProgress(),e.grade.ui.isGroupGradeMultiple=e.grade.isMultipleGradesInGroup;var u=a.keyBy(e.group.memberships,(function(e){return e.userId}));if(r)r.forEach((function(e){var t=u[e.user.$pk];t&&(t.ui.gradeDetail=e)}));else if(i){var c=o.attempts.map((function(e,t){var n;return e.id===i.id?((n=i).userId=e.userId,u[n.userId].ui.gradeDetail.displayGrade=n.displayGrade,u[n.userId].ui.gradeDetail.ui.attempt=n):n=e,n}));e.grade.isInProgress()&&(e.grade.ui.groupAttempt.status=w.C.AttemptStatus.NeedsGrading),e.grade.ui.groupAttempt.attempts=c}else n?e.group.memberships=e.group.memberships.map((function(e){var t=e.userId===n.user.$pk?n:e.ui.gradeDetail;return e.ui.gradeDetail=t,e})):o.attempts&&o.attempts.forEach((function(t){u[t.userId].ui.gradeDetail.displayGrade=t.displayGrade,u[t.userId].ui.gradeDetail.ui.attempt=t,u[t.userId].ui.gradeDetail.manualStatus=e.grade.manualStatus}));e.group.memberships=a.values(u)},t.prototype._loadAttempts=function(e,t,n){var r=this,i=[];return e.forEach((function(e){i.push(r.loadAttempt(e,t,n))})),this.$q.all(i)},t.prototype.loadAttempt=function(e,n,r,i){var o;void 0===r&&(r={});var s=a.clone(r);if(s&&s.attemptId)o=s.attemptId,delete s.attemptId;else{var u=w.F.AttemptAggregationModel.parseModel(e.column&&e.column.aggregationModel);s&&s.overrideAggregationModel&&(u=s.overrideAggregationModel,delete s.overrideAggregationModel),o=t.getDefaultAttemptIdToLoad(u,e)}if(e.column&&w.F.CalculationType.NonCalculated.isEqualTo(e.column.calculationType)){var c=void 0,l=n.gradebook.attempts,d=i&&i.isGroupContent,p=i&&i.assignedGroups&&i.assignedGroups.length&&i.assignedGroups[0].groupAssociationId;if(d&&!i.isDiscussion()){if(!p)return this.$q.when(e);c=e.column.getGroupAttemptByGroupAssociationId(p)}else{if(!o)return this.$q.when(e);c=l.$find(o,s).$asPromise()}return c.then((function(t){if(d){if(t&&t.id){var n=t;e.ui.groupAttempt=n,e.ui.attempt=n&&n.attempts&&n.attempts.length&&n.attempts[0]}}else e.ui.attempt=t;return e}))}return this.$q.when(e)},t.prototype.loadColumnAttempts=function(e,t,n){return void 0===t&&(t={}),e.getGradeIdToAttempt(t,n)},t.prototype.loadUsersFinalGradeForCourse=function(e,t){return e.gradebook.grades.$search({userId:t,expand:"column",externalGrade:!0}).$asPromise().then((function(e){return e[0]}))},t.prototype.loadColumnSummary=function(e,t){return e.gradebook.columns.$find(t).summary.$fetch().$asPromise()},t.prototype.loadGradebookSettings=function(e){var t=this.gbSettingsCache.get(e);if(!t){var n=this.CourseModel.$new(e).gradebook.settings.$fetch().$asPromise();return this.gbSettingsCache.put(e,{promise:n}),n}return this.$q.when(t.promise)},t.prototype.loadDefaultGradebookSettings=function(){return this.GradebookSettingsModel.$build({afterDecimal:t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,beforeDecimal:t.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL})},t.prototype.formatPoints=function(e,t,n,r){var i=this;null==n&&(n=j.Text);var o=n.toString();return this.bbLocalize.loadBundle("components/services/grade").then((function(){return i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(t),key:"components.services.grade.points_"+o,params:{points:r,possible:e},noWrap:!0})}))},t.prototype.parseGrade=function(e,t,n){if(!e)return"";if(t&&w.I.ScaleType.Text.isEqualTo(t.scaleType))return e;var r=this.bbLocalize.parseNumberSync(e,n);return Number.isNaN(r)?e:r.toString()},t.prototype.getGradeToDisplay=function(e,n,r){if(!e)return null;if(e.grade)return e.grade;if(e.perfCode)return e.perfCode.code;if(null!=e.score){var i=this.bbLocalize.formatNumberSync(e.score,n,{maximumFractionDigits:t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL});return r&&w.I.ScaleType.Percent.isEqualTo(r)&&(i=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(n),key:"components.services.grade.percent",params:{grade:i},noWrap:!0})),i}},t.prototype.getHighestPossibleScore=function(e,t,n){var r=this.$q.defer();switch(e.scaleType){case w.I.ScaleType.Tabular.toString():return r.resolve(e.symbols[0].symbol),r.promise;case w.I.ScaleType.Percent.toString():return this.bbLocalize.formatPercentage(1,n);case w.I.ScaleType.Score.toString():var i=t.possible;return this.formatPoints(i,n,j.Text);default:return r.resolve("N/A"),r.promise}},t.prototype.validateGrade=function(e,t,n){var r=this,i=this.loadDefaultGradebookSettings(),o=this.bbLocalize.loadBundle("components/services/grade"),s=this.notation.getGradeNotationsMap(e.courseId,!0);return this.$q.all([o,s]).then((function(o){var s=e.gradeValue.getGrade(),a=!1,u=o[1];return s?!(a=r.isValidNumericGrade(s,i,t))&&e.column&&e.column.externalGrade&&(a=r.notation.isValidPerformanceCodeGrade(u,s)):a=!(n&&n.notAllowEmptyString),a}))},t.prototype.clearGroupGrade=function(e,n,r){var i=this,o=this.CourseModel.$new(e.id).gradebook.columns.$new(n.id);return this.batchService.performBatch((function(){return i.$q.all(r.map((function(e){var n=o.grades.$new(e.ui.gradeDetail.id);return n.manualGrade=t.CLEAR_GRADE_CHARACTER,n.$patch(["manualGrade"]).$asPromise()})))})).then((function(){return o.grades}))},t.prototype.saveGrade=function(e,t,n,r){if(!e.courseId||!e.column||!e.gradeValue)throw new Error("A valid courseId, column, and grade value are required.");if(e.column.seemsAttemptBased()){var i=[],o=[];r&&r.group&&r.group.memberships&&r.group.memberships.forEach((function(t){t.ui&&t.ui.gradeDetail&&(i.push(t.ui.gradeDetail.id),(t.ui.gradeDetail.displayGrade&&t.ui.gradeDetail.displayGrade.isOverride||e.setGradeToEmpty)&&o.push(t.ui.gradeDetail.id))})),(null==n||null==n.id)&&t||n&&n.isInProgress()?(r.group?e.gradeIds=i:e.gradeId=t.id,!e.userId&&r.userId&&(e.userId=r.userId),e.clearGrade&&(e.setGradeToEmpty=!0)):n&&n.id&&t?(e.clearGrade&&(r.group||(e.gradeId=t.id),e.setAttemptToEmpty=!0,e.setGradeToEmpty=!0),n instanceof this.GradeAttemptModel?(e.attemptId=n.id,n.groupAttemptId&&(e.override=!0),(t.displayGrade&&t.displayGrade.isOverride||e.setGradeToEmpty)&&(e.gradeId=t.id,e.setGradeToEmpty=!0)):(e.groupAttemptId=n.id,o.length&&(e.gradeIdsNeedClear=o))):r&&r.userId?e.userId=r.userId:r&&r.group&&r.group.id&&(e.gradeIds=i)}else e.column.externalGrade?t&&t.id?e.gradeId=t.id:e.userId=r.userId:null==t?e.userId=r.userId:(e.userId||(e.userId=r.userId),e.gradeId=t.id);return this._save(e)},t.prototype.save=function(e){return this._save(e)},t.prototype._save=function(e){var t=this;if(e.column.externalGrade)return e.gradeId?this.updateGrade(e):this.createGradeForUserAndSave(e);if(!this.canSaveGradeDetail(e))return this.updateAttempt(e);if(e.gradeId)return e.attemptId?(e.setGradeToEmpty=!0,this.updateGrade(e).then((function(){return t.updateAttempt(e)}))):this.updateGrade(e);if(e.gradeIds)return this.createAndUpdateGradesForGroupMembers(e);if(e.gradeIdsNeedClear)return this.createAndUpdateGradesForGroupMembers(e).then((function(){return t.updateGroupAttempt(e)}));if(e.attemptId)return this.updateAttempt(e);if(e.groupAttemptId)return this.updateGroupAttempt(e);if(e.userId)return this.createGradeForUserAndSave(e);throw new Error("A valid userId must be specified when creating a new grade.")},t.prototype.canSaveGradeDetail=function(e){return!e.column.anonymousGrading&&(!e.column.delegatedGrading||this.isDelegatedAndEntitledReconciler(e))},t.prototype.createAndUpdateGradesForGroupMembers=function(e){var t=this,n=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades;return e.gradeIdsNeedClear||e.gradeIds?this.batchService.performBatch((function(){return t.$q.all((e.gradeIdsNeedClear||e.gradeIds).map((function(r){var i=n.$buildRaw({id:r});return n.$add(i),t.setGradeValueOnGrade(e,i,!!e.gradeIdsNeedClear||e.setGradeToEmpty),i.withParams({clearCommentsIfRevertOverrides:!1}).$patch().$asPromise()})))})).then((function(){return n.$asPromise()})):n.$asPromise()},t.prototype.createGradeSubmission=function(e,t,n){return new c.a(e,t,n)},t.prototype.wasGradeCleared=function(e,t){var n=e&&e.length,r=t&&t.length;return n>0&&!r},t.prototype.updateAttempt=function(e){if(!e.attemptId)throw new Error("Attempt id is not set");var t=this.CourseModel.$new(e.courseId).gradebook.attempts.$new(e.attemptId);return this.setGradeOnAttempt(e,t),t.$patch().$asPromise()},t.prototype.updateGroupAttempt=function(e){if(!e.groupAttemptId)throw new Error("Group attempt id is not set");var t=this.CourseModel.$new(e.courseId).gradebook.groupAttempts.$new(e.groupAttemptId);return this.setGradeOnAttempt(e,t),t.withParams({expand:"attempts"}).$patch().$asPromise()},t.prototype.isReadyToPost=function(e){return!e.delegatedGrading||e.isUserReconciler(this.contextUser.userId)},t.prototype.setGradeOnAttempt=function(e,n){e.setAttemptToEmpty?(n.score=null,n.status=w.C.AttemptStatus.NeedsGrading,n.grade=t.CLEAR_GRADE_CHARACTER,n.rubricEvaluation=null):(e.gradeValue.isNumeric?n.score=parseFloat(e.gradeValue.getGrade()):n.grade=e.gradeValue.getGrade(),e.rubricEvaluation&&(n.rubricEvaluation=e.rubricEvaluation),n.readyToPost=this.isReadyToPost(e.column),n.readyToPost||(n.status=O.AttemptStatus.Completed)),e.override&&(n.override=!0),this.isDelegatedAndEntitledReconciler(e)&&!e.setAttemptToEmpty&&(n.reconciliationMode=v.q.CUSTOM)},t.prototype.isDelegatedAndEntitledReconciler=function(e){return e.column.delegatedGrading&&e.column.isUserReconciler(this.contextUser.userId)},t.prototype.createGradeForUserAndSave=function(e){var t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new();return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.user=this.UserModel.$new(e.userId),t.withParams({userId:e.userId,clearCommentsIfRevertOverrides:!1}).$save().$asPromise()},t.prototype.updateGrade=function(e){var t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new(e.gradeId);return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.withParams({clearCommentsIfRevertOverrides:!1,includeUnpostedGrade:!0}).$patch().$asPromise()},t.prototype.setGradeValueOnGrade=function(e,n,r){if(r)n.manualGrade=t.CLEAR_GRADE_CHARACTER;else if(e.column.externalGrade&&e.perfCodeId)n.perfCodeId=e.perfCodeId;else{var i=e.gradeValue;i.isNumeric?n.manualScore=parseFloat(i.getGrade()):n.manualGrade=i.getGrade()}},t.prototype.isValidNumericGrade=function(e,t,n){var r,i=this.bbLocalize.parseNumberSync(e,n);if(Number.isNaN(i))return!1;if(t&&null!=t.beforeDecimal&&(r=Math.floor(i).toString()).length>t.beforeDecimal)return!1;if(t&&null!=t.afterDecimal&&null!=r&&i.toString().substring(r.length+1).length>t.afterDecimal)return!1;return!0},t.isValidFormat=function(e,t){var n=e.indexOf("."),r=0,i=e.length;return n>-1&&(r=i-n-1,i=0),i<=t.beforeDecimal&&n<=t.beforeDecimal&&r<=t.afterDecimal},t.mapSchemaSymbols=function(e){if(w.I.ScaleType.Tabular.isEqualTo(e.scaleType))return e.symbols.map((function(e){return e.symbol.toLocaleLowerCase()}))},t.getDefaultAttemptIdToLoad=function(e,t){switch(e){case w.F.AttemptAggregationModel.Average:return t.lastAttemptId;case w.F.AttemptAggregationModel.First:return t.firstAttemptId;case w.F.AttemptAggregationModel.Highest:return t.highestAttemptId;case w.F.AttemptAggregationModel.Last:return t.lastAttemptId;case w.F.AttemptAggregationModel.Lowest:return t.lowestAttemptId;default:return t.lastAttemptId}},t.prototype.findOverallGrade=function(e){return a.find(e,(function(e){return e.externalGrade}))},t.prototype.needsToSetupOverall=function(e,t){this.CourseModel.$new(t);var n=this.findOverallGrade(e);return this.$q.when(!n)},t.prototype.setDeleteConfirmationHandle=function(e){e.isOffline()?e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-column":e.isCalculated()&&(e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-calculation")},t.prototype.calculateRankingsMap=function(e,t){for(var n,r,i={},o=e.length,s=0;s<o;s++)r=s/o,n=t?10*Math.floor(10*r):Math.floor(100*r),i[e[s].displayGrade.score]=n;return i},t.prototype.getPercentileColor=function(e){return A.Utils.getPercentileColor(e,this.colorSettings.isColorEnabled)},t.prototype.isRubricGradeOverridden=function(e,t,n,r){var i=e&&e.displayGrade&&e.displayGrade.isOverride;r&&r.memberships&&r.memberships.forEach((function(e){e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.displayGrade&&e.ui.gradeDetail.displayGrade.isOverride&&(i=!0)}));var o=null!=n.rubricAssociations&&n.rubricAssociations.length>0&&n.rubricAssociations[0],s=t&&t.rubricEvaluation,a=!(!t||!t.groupAttemptId);return!(!t||a||null==t.score||!t.readyToPost||!o||s&&s.rubricAssociationId===o.id&&t.score===s.totalScore)||i&&(o||!l.a.UltraAssignment.isEqualTo(n.scoreProviderHandle)&&!l.a.Discussion.isEqualTo(n.scoreProviderHandle))},t.prototype.getCalculateByStringKey=function(e){var t="course.grades.overallGrade.settings.itemWeights";return w.F.CalculateType.Category.isEqualTo(e)&&(t="course.grades.overallGrade.settings.categoryWeights"),t},t.prototype.canGrade=function(e){return this.gradebookPermissionService.canEnterGrades()&&this.gradebookPermissionService.canOverrideGrades()},t.prototype.canUserReconcile=function(e,t){return!e.isClosed&&t.isUserReconciler(this.contextUser.userId)},t.prototype.hasItemsToReconcile=function(e){return e.summary.numSubmissionsNeedsReconciling>0},t.prototype.canPostGrades=function(e,t){if(!this.gradebookPermissionService.canPostGrades(e.id,t))return!1;var n=!e.isComplete()&&t.summary.hasGradesToPost();return t.anonymousGrading?n&&this.gradebookPermissionService.canDeanonymizeGrades(e.id):n},t.prototype.getPostAllGradeConfirmationNeededStringsKey=function(e){if(e.anonymousGrading){if(e.summary.numNeedsGrading)return"x-bb-grade-anonymous-submissions-not-graded";if(!e.isLate()){if(e.getNumMissing()>0)return"x-bb-grade-anonymous-missing-submissions";if(e.isMultipleAttempts())return"x-bb-grade-anonymous-multiple-attempts"}return"x-bb-grade-anonymous-generic"}return"x-bb-grade-column-post-grades"},t.prototype.pointToPercentage=function(e,t){return 100*e/t},t.prototype.percentageToPoint=function(e,t){return e*t/100},t.prototype.gradeDetailToPercentage=function(e){if(!e)return e;var t=a.assignInWith({},e);if(e.displayGrade&&!e.displayGrade.isOverride&&e.manualScore){var n=this.pointToPercentage(e.manualScore,e.pointsPossible);t.manualScore=m.b(n,2),t.displayGrade.score=t.manualScore}return t.pointsPossible=100,t},t.prototype.percentageToGradeDetail=function(e,t){if(!e)return e;var n=e.manualScore;e.manualScore&&(n=this.percentageToPoint(e.manualScore,t));var r=a.assignInWith({},e);return r.manualScore=n,r.displayGrade.score=n,r.pointsPossible=t,r},t.TEXT_SCHEMA_CHARACTER_LENGTH=32,t.CLEAR_GRADE_CHARACTER="-",t.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL=5,t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL=2,t.$inject=["$q","$rootScope","$injector","DSCacheFactory","$ngRedux",w.o.serviceName,w.C.serviceName,w.J.serviceName,w.H.serviceName,w.G.serviceName,w.F.serviceName,w.Pb.serviceName,w.D.serviceName,f.b,p.serviceName,$.d,d.b,b.b,I.b,S.b,C.b,T.b,g.b,h.e],t}();!function(e){e[e.Graded=1]="Graded",e[e.MultiStatus=2]="MultiStatus",e[e.NeedGrade=3]="NeedGrade",e[e.Opened=4]="Opened",e[e.Unopend=5]="Unopend",e[e.Posted=6]="Posted",e[e.Completed=7]="Completed"}(r||(r={}));var U=function(){function e(e,t,n){this.column=e,this.context=t,this.contextUser=n,this.isCommentBoxShown=!1,this.hasBeenViewed=!1,this.id=E.a(),this.hasDueDateException=!1}return Object.defineProperty(e.prototype,"numOfPeerReviewsCompleted",{get:function(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.total)&&void 0!==t?t:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfPeerReviewsCompletedLate",{get:function(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.late)&&void 0!==t?t:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfPeerReviewsSaved",{get:function(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.saved)&&void 0!==t?t:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Column",{get:function(){return this.column},enumerable:!0,configurable:!0}),e.prototype.isCurrentUserReconciler=function(){return this.column&&this.column.isUserReconciler(this.contextUser.userId)},e.prototype.isDiscussion=function(){return this.column.isDiscussion()},e.prototype.isOverdue=function(){return this.column&&this.column.dueDate&&this.column.dueDate.getTime()-this.context.getServerTime().getTime()<0},e.prototype.getLateSubmissionCount=function(){return u.isDefined(this.lateSubmissionCount)?this.lateSubmissionCount:(this.grade.attempts&&this.grade.attempts.length>0&&(this.lateSubmissionCount=this.grade.attempts.getNumAttemptsSubmittedLate(this.dueDate)),this.lateSubmissionCount)},e.prototype.isStatusComplete=function(e){return this.isDiscussion()||e||this.grade&&!this.grade.attempts?this.isCompleted():this.grade&&(this.grade.attempts.isAllGradedAndPosted()||this.grade.isPosted())&&this.grade.attempts.getNumOfGradedAttempts()===this.column.multipleAttempts&&!this.column.anonymousGrading},e.prototype.isGroupStatusComplete=function(e){return e?this.isCompleted():this.grade&&(this.grade.groupAttempts.isAllGradedAndPosted()||this.grade.isPosted())&&this.grade.groupAttempts.getNumOfGradedAttempts()===this.column.multipleAttempts&&!this.column.anonymousGrading},e.prototype.isStatusNothingToGrade=function(){return this.isDiscussion()?this.hasNoTotalParticipation():this.grade&&!this.grade.attempts.getNumAttemptsToGrade()},e.prototype.isGroupStatusNothingToGrade=function(){return this.grade&&!this.grade.groupAttempts.getNumAttemptsToGrade()},e.prototype.isStatusAttemptsToReconcile=function(){if(!this.isDiscussion()&&this.isCurrentUserReconciler())return this.grade&&this.grade.attempts.getNumAttemptsToReconcile()>0},e.prototype.isStatusAttemptsToGrade=function(e){return this.isDiscussion()?(!this.hasNoParticipation()||this.hasLateParticipation())&&(!this.grade||this.grade&&!this.grade.isGraded()):e?!this.grade||this.grade.attempts.getNumAttemptsToGrade()>=0:this.isCurrentUserReconciler()?void 0:this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0},e.prototype.isGroupStatusAttemptsToGrade=function(e){return e?this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>=0:this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>0},e.prototype.isStatusToPost=function(){return this.isDiscussion()?this.needsPosting():this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()},e.prototype.isGroupStatusToPost=function(){return this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()},e.prototype.overrideToPost=function(){return this.grade&&(this.grade.isOverrideGrade()||this.grade.displayGrade&&"MULTIPLE"===this.grade.displayGrade.grade)&&this.grade.isReadyToPost()},e.prototype.isMultipleStatus=function(){return this.group?this.isGroupStatusAttemptsToGrade()&&(this.isGroupStatusToPost()||this.overrideToPost()&&!this.isGroupStatusComplete()):(this.isStatusAttemptsToGrade()||this.isStatusAttemptsToReconcile())&&(this.isStatusToPost()||this.overrideToPost()&&!this.isStatusComplete())},e.prototype.hasGroupAttempts=function(){return this.grade&&this.grade.groupAttempts.length&&a.every(this.grade.groupAttempts,(function(e){return!!e.id}))},Object.defineProperty(e.prototype,"RowStatus",{get:function(){if(this.grade&&this.group){if(this.needsPosting())return 1;if(this.isGroupStatusAttemptsToGrade())return 3;if(this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade.groupAttempts[0].status&&!this.grade.hasGradeBeenPosted)return 5;if(this.grade.isPosted()&&!this.isGroupStatusComplete())return 6;if(this.isGroupStatusComplete())return 7}else{if(this.membership&&this.membership.isPreviewStudent)return 0;if(this.grade&&0===this.grade.attempts.getNumAttemptsToGrade()&&this.grade.isReadyToPost())return 1;if(this.grade&&this.grade.isGraded()&&this.grade.attempts.getNumAttemptsToGrade()>0&&this.grade.isReadyToPost())return 2;if(this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0&&0===this.grade.attempts.getNumAttemptsToPost()&&!this.grade.isPosted())return 3;if(this.hasNoSubmissions()&&this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade||!this.grade.hasGradeBeenPosted)return 5;if(this.grade&&this.grade.hasGradeBeenPosted&&!this.isStatusComplete())return 6;if(this.isStatusComplete())return 7}return 8},enumerable:!0,configurable:!0}),e.prototype.hasNoSubmissions=function(){return!this.attemptCount||0===this.attemptCount},e.prototype.hasNoParticipation=function(){return!this.participation||0===this.participation.comment&&0===this.participation.reply},e.prototype.hasNoTotalParticipation=function(){return!this.participation||0===this.participation.comment&&0===this.participation.reply&&0===this.participation.totalComment&&0===this.participation.totalReply},e.prototype.hasLateParticipation=function(){return this.participation&&0===this.participation.comment&&0===this.participation.reply&&this.participation.totalComment+this.participation.totalReply!==0},e.prototype.inProgress=function(){return this.group?this.grade&&this.grade.ui&&this.grade.ui.groupAttempt&&w.C.AttemptStatus.InProgress.isEqualTo(this.grade.ui.groupAttempt.status):this.grade&&this.grade.ui&&this.grade.ui.attempt&&w.C.AttemptStatus.InProgress.isEqualTo(this.grade.ui.attempt.status)},e.prototype.isLate=function(){if(!this.hasDueDateException){var e=k(this.context.getServerTime());return this.hasNoSubmissions()&&e.isAfter(this.dueDate)||k(this.lastAttemptDate).isAfter(this.dueDate)}return!1},e.prototype.isSubmittedLate=function(){return!this.hasDueDateException&&(!this.hasNoSubmissions()&&k(this.lastAttemptDate).isAfter(this.dueDate)&&!this.inProgress())},e.prototype.isCompleted=function(){return!(this.group||!this.grade||!this.grade.isGraded()||!this.grade.isPosted())||!!(this.group&&this.group.memberships&&this.group.memberships.length>0)&&this.group.memberships.every((function(e){return e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.isPosted()}))},e.prototype.needsPosting=function(){if(!this.group)return!this.isCompleted()&&this.grade&&this.grade.isReadyToPost();if(this.group&&this.group.memberships){var e=0,t=0;if(this.group.memberships.forEach((function(n){n.ui&&n.ui.gradeDetail&&(n.ui.gradeDetail.isReadyToPost()?t++:n.ui.gradeDetail.isPosted()&&e++)})),t>0&&e+t===this.group.memberships.length)return!0}return!1},e.prototype.needsGrading=function(){return this.grade.groupAttempts&&this.grade.groupAttempts.length?this.grade.groupAttempts[0].isNeedsGrading()&&!this.grade.groupAttempts[0].isPostable():this.attemptCount>0&&this.grade.isSubmitted()},e.prototype.deleteAllAttempts=function(){var e=this;this.grade.attempts.$fetch().$then((function(t){t.forEach((function(e){e.$destroy()})),e.attemptCount=0,e.lastAttemptDate=null}))},e.$inject=["column",f.b,g.b],e}(),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(L);u.module(_,["angular-data.DSCacheFactory",w.Q,f.a,$.b,I.a,S.a,C.a,T.a]).service(D,L)}).call(this,n("5iHu"))},oB9e:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h}));var r=n("D57K"),i=(n("SeO5"),n("wHJ2")),o=n("JfV0"),s=n("0JpG"),a=n("nYZ0"),u=n("Fvsw"),c=n("jhBu"),l=n("Y3OE"),d=n("X/qj"),p=n("pjml"),m=n("TnpK"),f="ultra.service.blog",h="blogService",g=function(){function e(e,t,n,r,i,o,s,a,u,c,l,d){this.bbLocalize=e,this.$rootScope=t,this.$q=n,this.$ngRedux=r,this.$modal=i,this.courseModel=o,this.UserModel=s,this.context=a,this.contentService=u,this.ultraState=c,this.gradebookPermissionService=l,this.entitlementService=d,this.subscribeToRedux()}return e.prototype.subscribeToRedux=function(){this.$ngRedux.connect(null,(function(e){return{loadBlog:function(t){return e(o.actions.blog.blogs.loadBlog(t))},persistContent:function(t,n){return e(o.actions.content.persistContent(t,n))},loadGradebookColumn:function(t,n){return e(o.actions.gradebookColumn.loadGradebookColumn({courseId:t,columnId:n.gradeColumnId}))},persistGradebookColumn:function(t,n){return e(o.actions.gradebookColumn.persistGradebookColumn(t,n))},loadGradebookGrade:function(t,n,r,i){return void 0===i&&(i={}),e(o.actions.gradebookGrade.loadBulkView(t,[n],[r],i))}}}))(this)},e.prototype.createContent=function(e){var t=e.courseId,n=e.parentId,r=e.positionBefore,i=e.positionAfter,o=e.root;return this.contentService.makeContentInContentTree(o,t,n,r,i)},e.prototype.updateContent=function(e,t,n){var r=this;return e.$patch(n).$then((function(){r.$rootScope.$broadcast("content-update",e),r.$rootScope.$broadcast("attempt-base-content-update",e,t)})).$asPromise()},e.prototype.fetchContent=function(e,t){return t.contents.$find(e,{expand:"alignedGoals,assignedGroups"}).$asPromise()},e.prototype.fetchBlog=function(e,t,n){void 0===n&&(n=!1);var r={courseId:e,blogId:t,expandHasEntries:n};return this.$q.resolve(this.loadBlog(r)).then((function(e){return e.blog}))},e.prototype.patchBlogContent=function(e,t,n,r){var i,o,s={id:t,courseId:e,contentDetail:(i={},i[l.a.Journal.toString()]={blog:n},i)},a={id:t,courseId:e,contentDetail:(o={},o[l.a.Journal.toString()]={blog:r},o)};return this.$q.resolve(this.persistContent(s,a)).then((function(e){return e.contents}))},e.prototype.patchGradebookColumn=function(e,t){return this.$q.resolve(this.persistGradebookColumn(e,t)).then((function(e){return e.gradebookColumn}))},e.prototype.patchBlogGrading=function(e,t,n,r,i,o){var s=this,a=!n.gradingAllowed&&!r.gradingAllowed,u=n.gradingAllowed&&!r.gradingAllowed,c=!n.gradingAllowed&&r.gradingAllowed,d=n.entryModificationAllowed!==r.entryModificationAllowed,p=n.commentModificationAllowed!==r.commentModificationAllowed;return!a||d||p?u||d||p?this.patchBlogContent(e,t,n,r).then((function(e){return null})):c?this.patchBlogContent(e,t,n,r).then((function(n){var r=n[t].contentDetail[l.a.Journal.toString()];return o.id=r.blog.gradeColumnId,o.courseId=e,s.patchGradebookColumn({},o)})):this.patchGradebookColumn(i,o):this.$q.resolve(null)},e.prototype.loadBlogGradebookColumn=function(e,t){return t&&t.gradeColumnId?this.$q.resolve(this.loadGradebookColumn(e,t).then((function(e){return e.gradebookColumn}))):this.$q.resolve(null)},e.prototype.savePrompt=function(e,t){var n=this,r=e.description;return e.$patch(["contentDetail"]).$asPromise().then((function(){n.$rootScope.$broadcast("content-update",e)})).catch((function(){e.description=r}))},e.prototype.loadBlogGradebookGrade=function(e,t,n,r){return void 0===r&&(r={}),this.$q.resolve(this.loadGradebookGrade(e,t,n,r))},e.$inject=[s.serviceName,"$rootScope","$q","$ngRedux","$modal",p.o.serviceName,p.Pb.serviceName,u.b,a.f,m.d,d.b,c.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(g);i.module(f,[p.Q,s.moduleName,u.a,a.d,m.b,d.a,c.a,p.Q]).service(h,g)},oNH7:function(e,t){e.exports='<div ng-if="conversionStatusBarController.showStatusBar && !conversionStatusBarController.inPreview"\n     class="conversion-status-bar import-learn-bar" ng-class="{\'below\': conversionStatusBarController.hideStatusBar()}"\n     bb-load-bundle="components/directives/conversion-status-bar" role="banner">\n  <div class="conversion-prompt-container">\n    <div class="conversion-prompt-title" bb-translate="course.conversion.statusBar.useUltraPromptTitle" course-org-token-resolver>\n    </div>\n    <div class="conversion-prompt-details" bb-translate="course.conversion.statusBar.useUltraPromptDetails" course-org-token-resolver>\n    </div>\n    <a class="hide-for-medium-only hide-for-small-only" href="https://help.blackboard.com/001_574en_US"\n        bb-translate="course.conversion.statusBar.moreInfoLink" target="_blank" rel="noopener noreferrer"\n        analytics-id="course.conversion.statusBar.moreInfoLink"></a>\n  </div>\n  <div class="conversion-button-container">\n    <a href="javascript:void(0);" class="js-back-to-classic conversion-button conversion-return-classic show-for-large-up"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic">\n      <bb-translate course-org-token-resolver>course.conversion.statusBar.backToClassic</bb-translate>\n    </a>\n    <button class="js-back-to-classic conversion-button conversion-return-button button button--secondary"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic.button">\n      <span bb-translate="course.conversion.statusBar.backToClassic" course-org-token-resolver></span>\n    </button>\n    <button class="js-use-new-ux conversion-button button default" ng-click="conversionStatusBarController.useTheNewExperience()"\n            bb-confirmation-needed="resource/x-bb-course-conversion" show-type="always"  confirmation-course-org-token-resolver\n            analytics-id="course.conversion.statusBar.useUltra.button">\n      <span bb-translate="course.conversion.statusBar.useUltra" course-org-token-resolver></span>\n    </button>\n  </div>\n</div>'},oQrK:function(e,t,n){"use strict";var r=function(){function e(){}return e.detect=function(){var e={},t=window.navigator.userAgent.toLowerCase(),n=function(e){return-1!==t.indexOf(e)};return e.ios=function(){return e.iphone()||e.ipod()||e.ipad()},e.iphone=function(){return!e.windows()&&n("iphone")},e.ipod=function(){return n("ipod")},e.ipad=function(){return n("ipad")},e.android=function(){return!e.windows()&&n("android")},e.androidPhone=function(){return e.android()&&n("mobile")},e.androidTablet=function(){return e.android()&&!n("mobile")},e.blackberry=function(){return n("blackberry")||n("bb10")||n("rim")},e.blackberryPhone=function(){return e.blackberry()&&!n("tablet")},e.blackberryTablet=function(){return e.blackberry()&&n("tablet")},e.windows=function(){return n("windows")},e.windowsPhone=function(){return e.windows()&&n("phone")},e.windowsTablet=function(){return e.windows()&&n("touch")&&!e.windowsPhone()},e.fxos=function(){return(n("(mobile;")||n("(tablet;"))&&n("; rv:")},e.fxosPhone=function(){return e.fxos()&&n("mobile")},e.fxosTablet=function(){return e.fxos()&&n("tablet")},e.meego=function(){return n("meego")},e.mobile=function(){return e.androidPhone()||e.iphone()||e.ipod()||e.windowsPhone()||e.blackberryPhone()||e.fxosPhone()||e.meego()},e.tablet=function(){return e.ipad()||e.androidTablet()||e.blackberryTablet()||e.windowsTablet()||e.fxosTablet()},e.desktop=function(){return!e.tablet()&&!e.mobile()},e.portrait=function(){return window.innerHeight/window.innerWidth>1},e.landscape=function(){return window.innerHeight/window.innerWidth<1},e},e}();t.a=r},oVrE:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"a",(function(){return d}));var r="allMembersId",i="anonymousId";function o(){return r}function s(){return{id:o(),givenName:"allMembers",familyName:void 0,userName:void 0}}function a(){return i}function u(e,t){var n=t.translateSync({locale:t.getLocale(e),key:"components.directives.avatar.anonymous",noWrap:!0,noEscape:!0});return{id:a(),givenName:n,familyName:"",userName:void 0}}function c(e){return e&&e.id===r}function l(e){return e&&e.id===i}function d(e){var t,n=null==e?void 0:e.givenName,r=null==e?void 0:e.familyName;return e&&(r||n)?{avatarUrl:null===(t=null==e?void 0:e.avatar)||void 0===t?void 0:t.permanentUrl,givenName:n,familyName:r}:null}},ofgY:function(e,t){e.exports='<div class="file-upload-container">\n  <div ngf-drop\n       id="{{fileUploadDivId}}"\n       ng-model="files" class="file-upload"\n       ngf-multiple="fileUpload.allowMultiple"\n       ngf-drop-disabled="disableDrag && disableDrag()"\n       ngf-change="fileUpload.onFileSelect($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"\n       ngf-stop-propagation="!(disableDrag && disableDrag())"\n       ngf-drag-over-class="dragClass"\n       tabindex="-1">\n    <div class="fileUploadTransclude" ng-transclude ng-show="fileUpload.transcludeVisible"></div>\n    <div class="js-file-upload-complete" ng-attr-ready="{{!fileUpload.uploadInProgress}}"></div>\n    <div ng-show="fileUpload.fileReviewVisible" class="file-upload-review">\n      <section class="file-upload-panel" ng-if="fileUpload.progressVisible">\n        <bb-progress primary-key="primaryKey && primaryKey()" display-results="fileUpload.useDefaultSuccessMethod"></bb-progress>\n      </section>\n    </div>\n  </div>\n  <input ngf-select\n         ng-if="fileUpload.allowMultiple"\n         type="file"\n         ngf-change="fileUpload.onFileSelect($files)"\n         multiple class="hide fileUploadInput"\n         analytics-id="components.directives.fileUpload.multipleFiles.input.file"/>\n  <input ngf-select\n         ng-if="!fileUpload.allowMultiple"\n         type="file"\n         ngf-change="fileUpload.onFileSelect($files)"\n         class="hide fileUploadInput"\n         analytics-id="components.directives.fileUpload.input.file"/>\n</div>'},oi1r:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("0JpG"),a=n("Bu0u"),u=n("pjml"),c="ultra.components.services.grade.gradeSchema.Service",l="gradeSchemaService",d=function(){function e(e,t,n,r){this.$q=e,this.CourseModel=n,this.bbLocalize=r,this.gbSchemasCache=t.createCache("gbSchemas")}return e.prototype.loadSchemas=function(e,t,n){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));var r=e.$pk||e.id;if(!r)throw new a.a({message:"A primary key or id must be set on the course model"});var o=null,s=this.gbSchemasCache.get(r);if(s)o=this.$q.when(s.promise);else{var c=e.gradebook.schemas.$fetch().$asPromise(),l=this.bbLocalize.loadBundle("components/services/grade"),d=this.$q.defer();this.$q.all({gradeSchemas:c,bundle:l}).then((function(e){var t=i.filter(e.gradeSchemas,(function(e){return!u.I.ScaleType.Text.isEqualTo(e.scaleType)||n}));t.forEach((function(e){if(e.localizableTitle){var t=e.localizableTitle.languageKey.replace(/[\W_]+/g,"_").toLowerCase();e.ui.displayTitleKey="components.services.grade.schema."+t}else e.ui.displayTitle=e.title})),d.resolve(t)})),this.gbSchemasCache.put(r,{promise:d.promise}),o=d.promise}return o.then((function(e){return t&&t.length?e.filter((function(e){return t.some((function(t){return t.isEqualTo(e.scaleType)}))})):e}))},e.prototype.loadSchemaForColumn=function(e){return this.loadSchemas(e.courseId).then((function(t){return i.find(t,(function(t){return t.id===e.gradingSchemaId}))}))},e.prototype.loadGradeSchema=function(e){var t=e.courseId;if(t){var n=void 0,r=this.gbSchemasCache.get(t);return n=r?this.$q.when(r.promise):this.loadSchemas(t,[],!0),this.$q.when(n).then((function(t){return i.find(t,(function(t){return t.id===e.gradingSchemaId}))}))}throw new a.a({message:"Valid grade column object not provided."})},e.$inject=["$q","DSCacheFactory",u.o.serviceName,s.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(d);o.module(c,["angular-data.DSCacheFactory"]).service(l,d)},okL3:function(e,t){e.exports='<div>\n  <div class="upload-list">\n    <div ng-repeat="file in inProgressFiles" ng-attr-id="{{::progress.getProgressIdAttr(file)}}" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.document\'}" class="file-container file-container-progress">\n      <div class="file-meta-container">\n        <div class="file-meta">\n          <ng-switch on="file.currentMimeType">\n            <bb-ui-icon-zip ng-switch-when="application/zip" color="primary" class-name="element-image"></bb-ui-icon-zip>\n          </ng-switch>\n          <div ng-hide="file.isProcessing" class="progress-circle">\n            <svg class="progress-circle-svg" viewBox="-10 -10 220 220">\n              <path class="back" ng-attr-d="{{\'M0,100 a100,100 0 1 0 200,0 a100,100 0 1 0 -200,0\'}}" fill="transparent" />\n              <path class="bar" ng-attr-d="{{\'m100,0a100,100 0 0 1 0,200a100,100 0 0 1 0,-200\'}}" fill="transparent" stroke-dasharray="629" stroke-dashoffset="629"/>\n            </svg>\n            <i class="progress-icon file-error-icon icon-exclamation" ng-if="state === \'error\'"></i>\n            <span class="progress-value" bb-translate translate-values="{percentage: file.currentProgress}">global.percent</span>\n          </div>\n          <span ng-show="file.isProcessing" class="processing-spinner">\n            <div class="canvas success-state"></div>\n          </span>\n          <p class="progress-status">\n            <span class="ellipse" bb-translate="components.directives.fileUpload.uploadingFile" translate-values="{fileName: file.fileName}"></span>\n          </p>\n        </div>\n        <div class="content-item-controls file-container-controls">\n          <button ng-hide="file.isProcessing"\n                  class="button super-clear js-cancel-upload"\n                  bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.cancelUploadText\'}"\n                  ng-click="progress.cancelUpload($event, file.id, file.identifier)"\n                  analytics-id="components.directives.fileUpload.cancelUploadText.button">\n            <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},p7NW:function(e,t,n){"use strict";n.d(t,"e",(function(){return k})),n.d(t,"f",(function(){return I})),n.d(t,"d",(function(){return T})),n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return $})),n.d(t,"a",(function(){return P}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("0JpG"),a=n("Fvsw"),u=n("Qbdf"),c=n("X455"),l=n("fYJU"),d=n("bMxM"),p=n("o5Lu"),m=n("X/qj"),f=n("pjml"),h=n("TnpK"),g=n("rEZX"),v=n("+O05"),b=n("Sa5G"),y=n("ZQFV"),S=n("aHpC"),C=n("e6jQ"),w=n("nkTj"),k="ultra.services.rubric",I="rubric",T="rubric-eval-save",E="remove-peek-override",$="remove-inline-override",P=255,A=[{max:100,min:85},{max:84,min:75},{max:74,min:60},{max:60,min:0}],O=function(){function e(e,t,n,r,i,o,s,a,u,c,l,d,p){this.$rootScope=e,this.$q=t,this.context=n,this.bbLocalize=r,this.CourseModel=i,this.RubricModel=o,this.grade=s,this.currentCourse=a,this.membership=u,this.ultraState=c,this.contextUser=l,this.ultraGradebookPermissionService=d,this.contentIcon=p,this.getPercentileColor=function(e){return y.Utils.getPercentileColor(e,!0)},this.bbLocalize.loadBundle("components/services/rubric"),this.updateIsStudentView()}return e.prototype.loadRubricEvaluationData=function(){var e=this;this.updateIsStudentView();var t=this.getParamsFromUrl();if(!t)return this.$q.resolve(void 0);var n=this.currentCourse.course.contents.$find(t.contentId,{expand:"assignedGroups"}).$asPromise(),r=this.currentCourse.course.gradebook.columns.$find(t.columnId,{expand:"associatedRubrics"}).$asPromise();return this.$q.all([n,r]).then((function(n){var r=n[0],i=n[1];if(e.isGroupContent=!!t.groupIdParam,e.content=r,e.isExternalSubmission=v.a.isExternalSubmissionsAssessment(r),e.gradingColumn=i,e.currentUserId=e.isStudentView?e.contextUser.userId:t.userId,e.rubricAssociation=e.gradingColumn.getRubricAssociation(),e.gradebookSettings=e.grade.loadDefaultGradebookSettings(),e.course=e.currentCourse.course,e.gradingColumn.hasRubricAssociation())return e.loadRubricData()}))},e.prototype.loadRubricViewData=function(){var e=this;this.updateIsStudentView();var t=this.getParamsFromUrl();if(!t)return this.$q.resolve(void 0);var n=this.currentCourse.course.contents.$find(t.contentId).$asPromise(),r=this.currentCourse.course.gradebook.columns.$find(t.columnId,{expand:"associatedRubrics"}).$asPromise();return this.$q.all([n,r]).then((function(t){var n=t[0],r=t[1];e.content=n,e.gradingColumn=r}))},e.prototype.getParamsFromUrl=function(){var e=this.ultraState.params,t=e.userId,n=e.columnId,r=e.assignmentId,i=e.groupId,o=e.disGroupId,s=t||this.isStudentView,a=this.ultraState.params.contentId;return a=a||r,s&&n&&a?{userId:t,columnId:n,contentId:a}:!s&&(i||o)&&a?{groupIdParam:i||o,contentId:a,columnId:n}:null},e.prototype.shouldRenderRubricEvaluation=function(){return!this.isStudentView||!(!this.gradingColumn||!this.gradingColumn.hasRubricAssociation())&&(this.gradingColumn.getRubricAssociation().isWithEvaluations&&(this.attempt&&this.attempt.isCompleted()||this.gradingColumn.isDiscussion()||this.gradingColumn.isJournal()))},e.prototype.loadRubricData=function(){var e=this;if(this.currentUserId&&(!this.isGroupContent||this.isStudentView)){if(this.group=null,this.gradingColumn.anonymousGrading){if(!this.shouldRenderRubricEvaluation())return;return this.grade.loadAnonymousStudentGrade(this.gradingColumn,this.currentUserId).then((function(t){return e.loadGradeData([t])}))}return this.gradingColumn.grades.$refresh({userId:this.currentUserId}).$asPromise().then((function(t){return e.loadGradeData(t)}))}if(this.isGroupContent)return this.course.contents.$find(this.gradingColumn.contentId,{expand:"assignedGroups"}).$asPromise().then((function(t){return e.course.memberships.$fetch({expand:"user",roleBucket:"taking"}).$asPromise().then((function(n){return e.grade.loadGroupRows(e.course,t.assignedGroups,n,e.gradingColumn,t.isSafeAssignEnabled()).then((function(t){if(e.groupSubmission=i.find(t,(function(t){return"grade"in t&&t.attemptCount>0&&(t.group.id===e.ultraState.params.groupId||t.group.id===e.ultraState.params.disGroupId)})),e.groupSubmission)return e.group=e.groupSubmission.group,e.gradeDetail=e.groupSubmission.grade,e.isGradingInProgress=b.r.GradingInProgress.isEqualTo(e.gradeDetail.manualStatus),e.loadAttemptData(e.gradeDetail.ui.groupAttempt)}))}))}))},e.prototype.loadGradeData=function(e){var t=this;if(!(e.length<=0)||null==this.ultraState.params.gradeId&&e[0].id===this.ultraState.params.gradeId){this.gradeDetail=e[0],this.isGradingInProgress=b.r.GradingInProgress.isEqualTo(this.gradeDetail.manualStatus),this.gradeDetail.column=this.gradingColumn;var n=this.ultraState.params.attemptId&&!this.isGroupContent?{attemptId:this.ultraState.params.attemptId}:{expand:"attempts"};return this.grade.loadAttempt(this.gradeDetail,this.course,n,this.content).then((function(e){var n=e.ui.groupAttempt||e.ui.attempt;if(n)return t.loadAttemptData(n)}))}},e.prototype.loadAttemptData=function(e){this.attempt=e,this.attempt.rubricEvaluation&&this.attempt.rubricEvaluation.rubricAssociationId===this.rubricAssociation.id||(this.attempt.rubricEvaluation=this.createRubricEvaluation(this.rubricAssociation.id,this.gradeDetail.userId,this.gradingColumn.possible)),this.rubricEvaluation=Object(r.__assign)(Object(r.__assign)({},this.attempt.rubricEvaluation),{maxScore:this.gradeDetail.pointsPossible})},e.prototype.getBaseRubricEvaluationPayload=function(){return{maxScore:this.rubricEvaluation.maxScore,isEditable:this.isEditable(),grade:this.getGrade(),isMultipleAttempts:this.isMultipleAttempts(),isGroupGradeMultiple:this.gradeDetail.ui.isGroupGradeMultiple,isGradingInProgress:this.isGradingInProgress,isExternalSubmission:this.isExternalSubmission,isGradeOverridden:this.isGradeOverridden(),isAnonymousGrading:this.gradingColumn.anonymousGrading,criteria:this.getCriteriaPayload(this.gradingColumn,this.rubricEvaluation),getGradingPillColor:this.getPercentileColor,contentIconName:this.getIconName(),smallTitle:this.content.title}},e.prototype.getBaseRubricViewPayload=function(){return{maxScore:this.gradingColumn.possible,criteria:this.getCriteriaPayload(this.gradingColumn),contentIconName:this.getIconName(),smallTitle:this.content.title}},e.prototype.getIconName=function(){var e=this.contentIcon.getColumnIconClassAsString(this.gradingColumn);return this.contentIcon.getIconName(e)},e.prototype.isEditable=function(){return!this.isStudentView&&(this.gradingColumn.canEdit()||this.membership.isActAsInstructorMembership())&&!this.course.isComplete()&&this.ultraGradebookPermissionService.canOverrideGrades()},e.prototype.getGrade=function(){var e;return this.isMultipleAttempts()?this.attempt.displayGrade.score&&this.attempt.displayGrade.score.toString()||"":this.gradingColumn.anonymousGrading?this.attempt.score.toString():!this.isGradeOverridden()||this.gradeDetail.ui.isGroupGradeMultiple||this.isGradingInProgress?(null===(e=this.rubricEvaluation.cells)||void 0===e?void 0:e.length)>0?this.rubricEvaluation.totalScore.toString():"":this.gradeDetail.displayGrade.score.toString()},e.prototype.isMultipleAttempts=function(){return this.gradingColumn.isMultipleAttempts()&&!this.gradingColumn.isDiscussion()&&!this.gradingColumn.isJournal()},e.prototype.isGradeOverridden=function(){return this.grade.isRubricGradeOverridden(this.gradeDetail,this.attempt,this.gradingColumn)},e.prototype.createRubricCopy=function(e){var t=this.CourseModel.$new(e.courseId),n={courseId:e.courseId,title:this.incrementTitle(e.title,t.locale),columnHeaders:this.cloneHeaders(e.columnHeaders),rows:this.cloneRows(e.rows),permissions:i.clone(e.permissions),rubricType:e.rubricType};return t.rubrics.$build(n)},e.prototype.cloneRows=function(e){var t=this;return i.map(e,(function(e){return{cells:t.cloneCells(e.cells),header:e.header,percentage:e.percentage,position:e.position}}))},e.prototype.cloneCells=function(e){return i.map(e,(function(e){return{position:e.position,description:e.description,percentage:e.percentage,percentageMin:e.percentageMin,percentageMax:e.percentageMax}}))},e.prototype.cloneHeaders=function(e){return i.map(e,(function(e){return{position:e.position,header:e.header}}))},e.prototype.incrementTitle=function(e,t){return this.bbLocalize.translateSync({locale:t,key:"components.services.rubric.newCopyTitle",params:{rubricTitle:e,date:this.bbLocalize.formatDateSync(new Date,s.ILocaleDateFormat.Short)},noWrap:!0,noEscape:!0}).substring(0,P)},e.prototype.processColumnHeader=function(t,n){for(var r=0;r<e.templateColumnCount;r++)t.push({position:r,header:this.bbLocalize.translateSync({locale:n,key:"components.services.rubric.template.column"+(r+1)})})},e.prototype.processRow=function(t,n,r){for(var i=0;i<e.templateRowCount;i++){var o=new Array;this.processCell(r,o),t.push({position:i,header:this.bbLocalize.translateSync({locale:n,key:"components.services.rubric.template.criteria",params:{idx:i+1}}),percentage:Math.floor(100/e.templateRowCount),cells:o})}},e.prototype.updateRubricRows=function(e,t){for(var n=this.cloneRows(e),r=0;r<n.length;r++){n[r].cells.length;switch(t){case f.qb.ILearnRubricType.PERCENTAGE:n[r].cells=this.processPercentageCells(n[r].cells);break;case f.qb.ILearnRubricType.PERCENTAGE_RANGE:n[r].cells=this.processPercentageRangeCells(n[r].cells);break;default:this.unrecognizedRubric()}}return n},e.prototype.processPercentage=function(e,t){return Math.floor(100-100/e*t)},e.prototype.processPercentageRangeCells=function(e){for(var t=this.cloneCells(e),n=e.length,r=0;r<n;r++)t[r]={position:r,description:t[r].description,percentageMin:this.processPercentage(n,r+1),percentageMax:this.processPercentage(n,r)};return t},e.prototype.processPercentageCells=function(e){for(var t=this.cloneCells(e),n=e.length,r=0;r<n;r++)t[r]={position:r,description:t[r].description,percentage:this.processPercentage(n,r)};return t},e.prototype.processCell=function(t,n){switch(t){case f.qb.ILearnRubricType.PERCENTAGE:for(var r=0;r<e.templateColumnCount;r++)n.push({position:r,description:"",percentage:this.processPercentage(e.templateColumnCount,r)});break;case f.qb.ILearnRubricType.PERCENTAGE_RANGE:A.forEach((function(e,t){n.push({position:t,description:"",percentageMin:e.min,percentageMax:e.max})}));break;default:this.unrecognizedRubric()}},e.prototype.generateDefaultRubric=function(e){var t=this;if(null!=this.rubricTemplate){var n=i.cloneDeep(this.rubricTemplate);return e.rubrics.$build(n).$asPromise()}return this.bbLocalize.loadBundle("components/services/rubric").then((function(){t.rubricTemplate={courseId:e.id,title:"",rows:new Array,columnHeaders:new Array,permissions:{edit:!0,delete:!0},rubricType:f.qb.ILearnRubricType.PERCENTAGE},t.processColumnHeader(t.rubricTemplate.columnHeaders,e.locale),t.processRow(t.rubricTemplate.rows,e.locale,t.rubricTemplate.rubricType);var n=i.cloneDeep(t.rubricTemplate);return e.rubrics.$build(n).$asPromise()}))},e.prototype.getCriteriaPayload=function(e,t){var n=this,r=e.getAssociatedRubric();return r.rows.map((function(i){var o,s=e.possible*i.percentage/100;(null==t?void 0:t.cells)&&(o=t.cells.find((function(e){return e.rubricRowId===i.id})));var a=n.getAchievementsPayload(i.cells,r.columnHeaders,r.rubricType,s,o);return{id:i.id,title:i.header,percentage:i.percentage,achievements:a}}))},e.prototype.getAchievementsPayload=function(e,t,n,r,i){return e.map((function(e,o){var s,a,u=n===f.qb.ILearnRubricType.PERCENTAGE_RANGE;(null==i?void 0:i.rubricCellId)===e.id&&(s=!0,a=u?i.selectedPercent:null);var c={isSelected:s,rangeScoreValue:a,id:e.id,title:t[o].header,description:e.description,percentage:e.percentage};return u?c.rangeScore={minPercentage:e.percentageMin,maxPercentage:e.percentageMax}:c.score=r*e.percentage/100,c}))},e.prototype.changeRubricType=function(e,t){e.rows=this.updateRubricRows(e.rows,e.rubricType)},e.prototype.insertNewCriteriaAt=function(e,t){if(e.rows.length>=10)throw new Error("Cannot add more than 10 criteria rows");var n=this.genNewRow(e.rubricType,e.rows[0].cells);return e.rows.splice(t,0,n),e.rows.forEach((function(e,t){e.position=t})),e},e.prototype.deleteCriteriaAt=function(e,t){if(1===e.rows.length)throw new Error("Cannot delete last criteria row");return e.rows.splice(t,1),e.rows.forEach((function(e,t){e.position=t})),e},e.prototype.balanceCriteriaPercentages=function(e){e.rows.forEach((function(t){t.percentage=Math.floor(100/e.rows.length)})),i.last(e.rows).percentage+=100-e.rows.reduce((function(e,t){return e+t.percentage}),0)},e.prototype.insertNewColumnAt=function(e,t){var n=this;if(e.columnHeaders.length>=10)throw new Error("Cannot add more than 10 columns");return e.columnHeaders.splice(t,0,{position:t,header:""}),e.rows.forEach((function(r){switch(e.rubricType){case f.qb.ILearnRubricType.PERCENTAGE:n.insertNewPercentRubricColumn(r,t);break;case f.qb.ILearnRubricType.PERCENTAGE_RANGE:n.insertNewPercentRangeRubricColumn(r,t);break;default:n.unrecognizedRubric()}})),e},e.prototype.deleteColumnAt=function(e,t){if(1===e.columnHeaders.length)throw new Error("Cannot remove last column");return e.columnHeaders.splice(t,1),e.rows.forEach((function(e){e.cells.splice(t,1),e.cells.forEach((function(e,n){0===t&&0===n&&(e.percentage=100)}))})),e},e.prototype.createRubricEvaluation=function(e,t,n){return{rubricAssociationId:e,userId:t,maxScore:n,totalScore:0,cells:[]}},e.prototype.initiateUiState=function(e,t){e.ui.editingCells=!1,e.ui.canEdit=t,e.ui.editingCriteria=!1,e.ui.invalidCriteriaPercentageSum=!1,e.ui.criteriaLimit=10,e.ui.columnLimit=10},e.prototype.mapRubricToGrid=function(e){return null==e.ui.columnHeaders&&(e.ui.columnHeaders=new Array),e.columnHeaders.forEach((function(t,n){e.ui.columnHeaders[n]?e.ui.columnHeaders[n].uuid||(e.ui.columnHeaders[n].uuid=Object(C.b)()):e.ui.columnHeaders[n]={uuid:Object(C.b)()}})),null==e.ui.rows&&(e.ui.rows=new Array),e.rows.forEach((function(t,n){e.ui.rows[n]?e.ui.rows[n].uuid||(e.ui.rows[n].uuid=Object(C.b)()):e.ui.rows[n]={uuid:Object(C.b)()}})),{rows:e.rows.map((function(t,n){return{id:e.ui.rows[n].uuid,data:t}})),columns:e.columnHeaders.map((function(t,n){return{id:e.ui.columnHeaders[n].uuid,data:t}}))}},e.prototype.insertNewPercentRubricColumn=function(e,t){var n=t<e.cells.length?e.cells[t].percentage:e.cells[t-1].percentage;if(e.cells.splice(t,0,{position:0,description:"",percentage:n}),e.cells.forEach((function(e,t){e.position=t})),0!==t){var r=e.cells[t+1]?e.cells[t+1].percentage:0,i=Math.floor((e.cells[t-1].percentage-r)/2);e.cells[t].percentage=e.cells[t-1].percentage-i}},e.prototype.insertNewPercentRangeRubricColumn=function(e,t){var n=t<e.cells.length?e.cells[t].percentageMin:e.cells[t-1].percentageMin,r=t<e.cells.length?e.cells[t].percentageMax:e.cells[t-1].percentageMax;if(e.cells.splice(t,0,{position:t,description:"",percentageMin:n,percentageMax:r}),e.cells.forEach((function(e,t){e.position=t})),0!==t){var i=e.cells[t+1]?e.cells[t+1].percentageMin:0,o=e.cells[t+1]?e.cells[t+1].percentageMax:0;e.cells[t].percentageMin=e.cells[t-1].percentageMin-Math.floor((e.cells[t-1].percentageMin-i)/2),e.cells[t].percentageMax=e.cells[t-1].percentageMax-Math.floor((e.cells[t-1].percentageMax-o)/2)}},e.prototype.genNewRow=function(e,t){switch(e){case f.qb.ILearnRubricType.PERCENTAGE:return this.genNewPercentageRow(t);case f.qb.ILearnRubricType.PERCENTAGE_RANGE:return this.genNewPercentageRangeRow(t);default:this.unrecognizedRubric()}},e.prototype.genNewPercentageRangeRow=function(e){var t={header:"",percentage:0,cells:new Array};return e.forEach((function(e,n){t.cells.push({position:n,description:"",percentageMin:e.percentageMin,percentageMax:e.percentageMax})})),t},e.prototype.genNewPercentageRow=function(e){var t={header:"",percentage:0,cells:new Array};return e.forEach((function(e,n){t.cells.push({position:n,description:"",percentage:e.percentage})})),t},e.prototype.unrecognizedRubric=function(){throw new Error("Invalid rubric type, please go check ILearnRubricType for more detail")},e.prototype.persistRubricEvaluation=function(e){var t=this;return this.$q((function(n){return t.performPersistRubricEvaluation(e).then((function(){n(t.gradingColumn)}))}))},e.prototype.performPersistRubricEvaluation=function(e){if("grade"in e&&""===e.grade)return this.attempt.score=null,this.persistCleared(e);var t="isGradeOverridden"in e;if(t&&e.isGradeOverridden&&!this.gradingColumn.anonymousGrading)return this.persistOverriden(e);var n="grade"in e&&"criteria"in e;return t&&!e.isGradeOverridden&&n||n||this.gradingColumn.anonymousGrading?(this.attempt.score=e.grade,this.persistRubricEvaluationData(e)):this.$q.resolve(void 0)},e.prototype.persistCleared=function(e){var t=this.rubricEvaluation;t.cells=this.getCells(e);var n=new g.a(this.gradingColumn,null);return n.clearGrade=!0,n.setGradeToEmpty=!0,n.rubricEvaluation=t,this.grade.saveGrade(n,this.gradeDetail,this.attempt,{userId:this.currentUserId,group:this.group})},e.prototype.persistOverriden=function(e){var t=this,n=!this.gradingColumn.anonymousGrading&&this.gradeDetail.displayGrade.isOverride,r=this.group?this.CourseModel.$new(this.course.id).gradebook.groupAttempts.$new(this.attempt.id):this.CourseModel.$new(this.course.id).gradebook.attempts.$new(this.attempt.id),i=Object(w.f)(r);i.rubricEvaluation=this.rubricEvaluation;var o=new g.a(this.gradingColumn,String(e.grade));return this.gradingColumn.isDiscussion&&n?i.$asPromise().then((function(){return t.saveOverridenGrade(o)})):i.$patch().$asPromise().then((function(){return t.saveOverridenGrade(o)}))},e.prototype.persistRubricEvaluationData=function(e){var t=this.rubricEvaluation;t.totalScore=e.rubricGrade,t.cells=this.getCells(e),t.overrideScore=-1;var n=new g.a(this.gradingColumn,String(this.attempt.score));return n.rubricEvaluation=t,this.isSingleAttempt()?n.setGradeToEmpty=!0:(n.setGradeToEmpty=!1,n.attemptId=this.attempt.id),null==this.attempt.score&&(n.clearGrade=!0),this.isSingleAttempt()?this.grade.saveGrade(n,this.gradeDetail,this.attempt,{userId:this.currentUserId,group:this.group}):this.grade.saveGrade(n,this.gradeDetail,this.attempt)},e.prototype.getCells=function(e){var t=[];return e.criteria.forEach((function(e){e.achievements.forEach((function(n){var r;n.isSelected&&t.push({rubricCellId:n.id,rubricRowId:e.id,selectedPercent:null!==(r=n.rangeScoreValue)&&void 0!==r?r:n.percentage})}))})),t},e.prototype.updateIsStudentView=function(){var e;this.isStudentView=null!==(e=this.isStudentView)&&void 0!==e?e:this.membership.isStudentMembership()},e.prototype.isSingleAttempt=function(){return this.gradingColumn&&(this.gradingColumn.isSingleAttempt()||this.gradingColumn.isDiscussion()||this.gradingColumn.isJournal())},e.prototype.saveOverridenGrade=function(e){var t=this;return this.gradingColumn.anonymousGrading?this.$q.resolve(void 0):this.grade.saveGrade(e,this.gradeDetail,void 0,{userId:this.currentUserId,group:this.group}).then((function(){if((t.gradingColumn.isAssignment()||t.gradingColumn.isDiscussion())&&t.gradeDetail.isPosted&&t.gradeDetail.isPosted()&&t.attempt.readyToPost)return t.group?t.gradingColumn.postReadyGroupAttempts({groupAssociationId:t.attempt.groupAssociationId}):t.gradeDetail.postReadyGrades()}))},e.templateRowCount=4,e.templateColumnCount=4,e=Object(r.__decorate)([Object(r.__param)(0,Object(S.b)("$rootScope")),Object(r.__param)(1,Object(S.b)("$q")),Object(r.__param)(2,Object(S.b)(a.b)),Object(r.__param)(3,Object(S.b)(s.serviceName)),Object(r.__param)(4,Object(S.b)(f.o.serviceName)),Object(r.__param)(5,Object(S.b)(f.qb.serviceName)),Object(r.__param)(6,Object(S.b)(p.h)),Object(r.__param)(7,Object(S.b)(u.e)),Object(r.__param)(8,Object(S.b)(c.d)),Object(r.__param)(9,Object(S.b)(h.d)),Object(r.__param)(10,Object(S.b)(l.b)),Object(r.__param)(11,Object(S.b)(m.b)),Object(r.__param)(12,Object(S.b)(d.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(O);o.module(k,[a.a,s.moduleName,f.Q,p.g,d.a]).service(I,O)},pGZF:function(e,t,n){},pIXs:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("bd9L"),o=n("0JpG"),s=n("6jv3"),a="ultra.directives.saveButtons",u=function(){function e(e,t){var n=this;this.scope=e,this.bbLocalize=t,this.isSaving=!1,this.isSavedOnceOrMore=!1,this.savedToBrowserCount=0,this.bbLocalize.loadBundle("components/directives/save-buttons").then((function(){n.notSavedStr=e.saveType||n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.notSaved"}),n.savedStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.saved"}),n.savingStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.saving"}),n.cancelStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.cancel"}),n.deleteStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.delete"}),n.savedSuccessfullyStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.notification.savedSuccessfully"}),n.canceledSuccessfullyStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.notification.canceledSuccessfully"}),n.deleteButtonStatus=n.deleteStr,e.displaySavedAfterSaving&&e.displaySavedAfterSaving()&&n.isSavedOnceOrMore?n.saveButtonStatus=n.savedStr:n.saveButtonStatus=n.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()&&n.isSavedOnceOrMore?n.cancelButtonStatus=n.deleteStr:n.cancelButtonStatus=n.cancelStr})),e.$on("bb-save-button",(function(t,r,o){var s=!1;switch(r){case i.a.Change:n.isSaving=!1,n.saveButtonStatus=n.notSavedStr;break;case i.a.Saving:n.isSaving=!0,n.saveButtonStatus=n.savingStr,s=!0;break;case i.a.Saved:s=!0,n.isSavedOnceOrMore=!0,n.isSaving=!1,n.informScreenReaderToRead(n.savedSuccessfullyStr),e.displaySavedAfterSaving&&e.displaySavedAfterSaving()?n.saveButtonStatus=n.savedStr:n.saveButtonStatus=n.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()?n.cancelButtonStatus=n.deleteStr:n.cancelButtonStatus=n.cancelStr;break;case i.a.SaveFailure:case i.a.ValidationFailure:s=!0}n.form.$bbSaveAttempt=s})),e.$parent.$on("bb-autosave-form-to-browser",(function(e,t,r){i.a.Saved.isEqualTo(t)&&n.element.attr("saved-to-browser",n.savedToBrowserCount+=1)}))}return e.prototype.isValid=function(){return this.scope.ignoreFormValidation&&this.scope.ignoreFormValidation()?this.scope.validateSave():this.form.$valid&&this.scope.validateSave()},e.prototype.isCancelNowADelete=function(){return this.scope.displayDeleteAfterSaving&&this.scope.displayDeleteAfterSaving()&&this.isSavedOnceOrMore},e.prototype.isCancelDisabled=function(){return this.isSaving||this.isCancelNowADelete()&&!this.scope.canDelete()},e.prototype.isDeleteDisabled=function(){return this.isSaving||!this.scope.canDelete()},e.prototype.isSaveDisabled=function(){return this.isSaving||!this.isValid()},e.prototype.cancelAction=function(){return this.form.$setPristine(),this.informScreenReaderToRead(this.canceledSuccessfullyStr),this.isCancelNowADelete()?this.scope.deleteAction():this.scope.cancelAction()},e.prototype.deleteAction=function(){return this.form.$setPristine(),this.scope.deleteAction()},e.prototype.saveAction=function(){return this.form.$setSubmitted(),this.informScreenReaderToRead(this.savedSuccessfullyStr),this.scope.saveAction()},e.prototype.mousedownAction=function(){if(this.scope.mousedownAction)return this.scope.mousedownAction()},e.prototype.informScreenReaderToRead=function(e){this.scope.disableScreenreaderAnnouncements&&this.scope.disableScreenreaderAnnouncements()||this.scope.$emit("read-info-directive",e)},e.$inject=["scope",o.serviceName],e}(),c=function(){function e(e,t){var n=this;this.$injector=e,this.bbLocalize=t,this.require="^form",this.replace=!0,this.restrict="E",this.scope={canDelete:"&",cancelAction:"&",choices:"=?",deleteAction:"&",deleteConfirmationResourceType:"@?",disableScreenreaderAnnouncements:"&?",displayDeleteAfterSaving:"&?",displaySavedAfterSaving:"&?",hideSave:"&?",hideCancel:"&?",hideDelete:"&?",isInline:"&?",mousedownAction:"&?",mustShowDeleteConfirmation:"&?",mustShowSaveConfirmation:"&?",saveAction:"&",saveConfirmationResourceType:"@?",validateSave:"&",ignoreFormValidation:"&",saveType:"@?",analyticsIdTagPrefix:"@"},this.link=function(e,t,r,i){e.saveButtons=n.$injector.instantiate(u,{scope:e}),e.saveButtons.form=i,e.saveButtons.element=t},this.compile=function(e,t){return"true"===t.isInline&&(e.prepend(e.find("footer").children()),e.find("footer").remove()),{pre:n.link}},this.template=s}return e.$inject=["$injector",o.serviceName],e}();r.module(a,[o.moduleName]).directive("bbSaveButtons",["$injector",function(e){return e.instantiate(c)}])},"pUR+":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("wHJ2"),i=n("0JpG"),o=n("Qbdf"),s=n("36CG"),a=n("X455"),u=n("UD9g"),c=n("pjml"),l=n("TnpK"),d=n("oB9e"),p=n("nmzr"),m="ultra.course.journal.router";r.module(m,[i.moduleName,l.b,u.b,d.a,o.b,a.a,s.a]).config([l.c,o.c,a.b,s.b,function(e,t,r,d){var m,f;e.peekState(p.JournalRoutes.JOURNAL,{abstract:!0,url:"/journal",resolve:(m={},m[o.d]=t.resolve,m.translations=["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("features/course/content/journal/journal")),n.push(t.loadBundle("features/course/content/course-content")),n.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(n)}],m)}).peekState(p.JournalRoutes.JOURNAL_VIEW,{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter?journalId",panelClass:"full",pageTitle:"course.content.journalItem",require:function(){return Promise.all([n.e(10),n.e(1),n.e(2),n.e(7),n.e(15),n.e(35),n.e(566)]).then(n.bind(null,"hucp"))},resolve:{translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),e.all(n)}]}}).peekState(p.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,{url:"?view&limit&page&name&submissionStatus",panelClass:"full",reloadOnSearch:!1,views:{"journal-content@":{require:function(){return Promise.all([n.e(0),n.e(5),n.e(41),n.e(1),n.e(35),n.e(578)]).then(n.bind(null,"6omJ"))}},"journal-participation@":{require:function(){return Promise.all([n.e(0),n.e(5),n.e(41),n.e(717)]).then(n.bind(null,"uPz6"))}}},onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],peekStates:["conditional-release","content-market","course-group",p.JournalRoutes.JOURNAL_DETAILS,p.JournalRoutes.JOURNAL_PARTICIPATION_DETAIL,p.JournalRoutes.JOURNAL_SETTINGS,u.a,p.JournalRoutes.JOURNAL_SUBMISSION_FEEDBACK,"lti",p.CourseRoutes.COURSE_MESSAGE,"rubric","rubric-evaluation","rubric-view","view-exceptions"],peekViewName:"journal-peek@",pageTitle:"course.content.journalItem",allowChildPeekStates:!0,resolve:(f={},f[o.d]=t.resolve,f[a.c]=r.resolve,f.currentCourseId=["$state",function(e){return e.nextParams.courseId}],f[s.c]=d.resolve,f.currentColumn=[l.d,o.d,function(e,t){var n=e.nextParams.columnId;if(n&&n!==c.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n).$asPromise()}],f)}).peekState(p.JournalRoutes.JOURNAL_PARTICIPATION_DETAIL,{url:"/participants/:participantId/submissions?offset?columnId?contentId?singleUserId?singleMembershipId",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(5),n.e(41),n.e(1),n.e(15),n.e(629)]).then(n.bind(null,"Zo+2"))},pageTitle:"course.content.journalItem",peekViewName:"journal-submissions-peek",allowChildPeekStates:!0,resolve:{translations:["$q",i.serviceName,function(e,t){return t.loadBundle("features/course/content/journal/journal")}]},peekStates:[p.JournalRoutes.JOURNAL_SUBMISSION_FEEDBACK,"content-market","lti","rubric-evaluation"]}).peekState(p.JournalRoutes.JOURNAL_DETAILS,{panelClass:"peek",url:"/details",require:function(){return n.e(673).then(n.bind(null,"sC0C"))},pageTitle:"course.content.journalDetails",peekViewName:"journal-details-peek"}).peekState(p.JournalRoutes.JOURNAL_SETTINGS,{panelClass:"peek",url:"/settings?focusEleId",require:function(){return Promise.all([n.e(1),n.e(2),n.e(7),n.e(35),n.e(574)]).then(n.bind(null,"SxKk"))},pageTitle:"course.content.journalSettings",peekViewName:"journal-settings-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","rubric"]}).peekState(p.JournalRoutes.JOURNAL_SUBMISSION_FEEDBACK,{panelClass:"peek",url:"/feedback?userId?columnId",require:function(){return Promise.all([n.e(0),n.e(5),n.e(41),n.e(694)]).then(n.bind(null,"p01W"))},pageTitle:"course.content.journalFeedback",peekViewName:"journal-feedback-peek"})}])},pjml:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"serviceName",(function(){return De}));var i={};n.r(i),n.d(i,"serviceName",(function(){return Me}));var o={};n.r(o),n.d(o,"serviceName",(function(){return je}));var s={};n.r(s),n.d(s,"serviceName",(function(){return qe})),n.d(s,"AssessmentExceptionType",(function(){return He}));var a={};n.r(a),n.d(a,"serviceName",(function(){return We}));var u={};n.r(u),n.d(u,"serviceName",(function(){return Ye})),n.d(u,"KnownCalendar",(function(){return Ze}));var c={};n.r(c),n.d(c,"serviceName",(function(){return tt})),n.d(c,"RecurFrequency",(function(){return nt})),n.d(c,"RecurWeekDay",(function(){return rt})),n.d(c,"MonthRepeatBy",(function(){return it})),n.d(c,"MetadataOnCalendarItemCardLinkType",(function(){return ot})),n.d(c,"RepeatRuleType",(function(){return st}));var l={};n.r(l),n.d(l,"ConversionContentCategory",(function(){return at})),n.d(l,"ConversionReportStatus",(function(){return ut})),n.d(l,"ConversionQueueTaskStatus",(function(){return ct})),n.d(l,"serviceName",(function(){return lt}));var d={};n.r(d),n.d(d,"serviceName",(function(){return mt}));var p={};n.r(p),n.d(p,"serviceName",(function(){return gt})),n.d(p,"CollabSessionType",(function(){return vt})),n.d(p,"CollabAccessType",(function(){return bt}));var m={};n.r(m),n.d(m,"serviceName",(function(){return wt}));var f={};n.r(f),n.d(f,"serviceName",(function(){return kt}));var h={};n.r(h),n.d(h,"serviceName",(function(){return xt}));var g={};n.r(g),n.d(g,"CourseMessageType",(function(){return Rt})),n.d(g,"serviceName",(function(){return Mt}));var v={};n.r(v),n.d(v,"sortInstructorsMembership",(function(){return Bt})),n.d(v,"serviceName",(function(){return Ht}));var b={};n.r(b),n.d(b,"serviceName",(function(){return Vt}));var y={};n.r(y),n.d(y,"serviceName",(function(){return en}));var S={};n.r(S),n.d(S,"serviceName",(function(){return sn}));var C={};n.r(C),n.d(C,"serviceName",(function(){return an}));var w={};n.r(w),n.d(w,"serviceName",(function(){return un}));var k={};n.r(k),n.d(k,"serviceName",(function(){return cn}));var I={};n.r(I),n.d(I,"moduleName",(function(){return mn})),n.d(I,"serviceName",(function(){return fn})),n.d(I,"START_ATTEMPT_ID",(function(){return hn}));var T={};n.r(T),n.d(T,"moduleName",(function(){return gn})),n.d(T,"serviceName",(function(){return vn})),n.d(T,"GradeCategoryTitleEnum",(function(){return bn}));var E={};n.r(E),n.d(E,"ColumnSummaryStatus",(function(){return Cn.a})),n.d(E,"serviceName",(function(){return wn})),n.d(E,"SummaryAction",(function(){return kn}));var $={};n.r($),n.d($,"serviceName",(function(){return $n}));var P={};n.r(P),n.d(P,"serviceName",(function(){return Pn}));var A={};n.r(A),n.d(A,"serviceName",(function(){return Dn}));var O={};n.r(O),n.d(O,"serviceName",(function(){return xn}));var _={};n.r(_),n.d(_,"serviceName",(function(){return Rn}));var D={};n.r(D),n.d(D,"serviceName",(function(){return Mn})),n.d(D,"LTIStatusType",(function(){return Nn})),n.d(D,"LTISendUserDataType",(function(){return jn}));var x={};n.r(x),n.d(x,"serviceName",(function(){return Ln}));var R={};n.r(R),n.d(R,"serviceName",(function(){return Un}));var M={};n.r(M),n.d(M,"serviceName",(function(){return Gn}));var N={};n.r(N),n.d(N,"serviceName",(function(){return Hn}));var j={};n.r(j),n.d(j,"serviceName",(function(){return Kn}));var L={};n.r(L),n.d(L,"serviceName",(function(){return Jn}));var U={};n.r(U),n.d(U,"serviceName",(function(){return Wn}));var G={};n.r(G),n.d(G,"serviceName",(function(){return Yn}));var F={};n.r(F),n.d(F,"serviceName",(function(){return Zn}));var B={};n.r(B),n.d(B,"serviceName",(function(){return nr})),n.d(B,"adjustEngagement",(function(){return rr}));var q={};n.r(q),n.d(q,"serviceName",(function(){return or}));var H={};n.r(H),n.d(H,"serviceName",(function(){return sr}));var V={};n.r(V),n.d(V,"serviceName",(function(){return ar}));var z={};n.r(z),n.d(z,"serviceName",(function(){return ur}));var K={};n.r(K),n.d(K,"serviceName",(function(){return cr}));var J={};n.r(J),n.d(J,"serviceName",(function(){return lr})),n.d(J,"adjustProbabilities",(function(){return dr})),n.d(J,"learnUser",(function(){return pr}));var W={};n.r(W),n.d(W,"serviceName",(function(){return mr}));var Q={};n.r(Q),n.d(Q,"serviceName",(function(){return fr}));var Y={};n.r(Y),n.d(Y,"serviceName",(function(){return hr}));var Z={};n.r(Z),n.d(Z,"serviceName",(function(){return gr}));var X={};n.r(X),n.d(X,"serviceName",(function(){return vr}));var ee={};n.r(ee),n.d(ee,"serviceName",(function(){return br}));var te={};n.r(te),n.d(te,"serviceName",(function(){return yr}));var ne={};n.r(ne),n.d(ne,"serviceName",(function(){return Sr})),n.d(ne,"VENDOR_RESPONDUS",(function(){return Cr}));var re={};n.r(re),n.d(re,"serviceName",(function(){return wr}));var ie={};n.r(ie),n.d(ie,"QueueTaskStatus",(function(){return Ir})),n.d(ie,"serviceName",(function(){return Tr}));var oe={};n.r(oe),n.d(oe,"NotificationRecipientType",(function(){return Pr})),n.d(oe,"GradeIconType",(function(){return Ar})),n.d(oe,"serviceName",(function(){return Or}));var se={};n.r(se),n.d(se,"serviceName",(function(){return _r}));var ae={};n.r(ae),n.d(ae,"serviceName",(function(){return Dr}));var ue={};n.r(ue),n.d(ue,"serviceName",(function(){return xr})),n.d(ue,"ITargetedNotificationPriority",(function(){return Rr})),n.d(ue,"ITargetedNotificationType",(function(){return Mr}));var ce={};n.r(ce),n.d(ce,"serviceName",(function(){return Nr})),n.d(ce,"transformActivityTime",(function(){return jr}));var le={};n.r(le),n.d(le,"serviceName",(function(){return Lr}));var de={};n.r(de),n.d(de,"serviceName",(function(){return Ur}));var pe={};n.r(pe),n.d(pe,"serviceName",(function(){return Gr}));var me={};n.r(me),n.d(me,"serviceName",(function(){return Fr}));var fe={};n.r(fe),n.d(fe,"serviceName",(function(){return Br}));var he={};n.r(he),n.d(he,"serviceName",(function(){return qr}));var ge={};n.r(ge),n.d(ge,"serviceName",(function(){return Hr}));var ve={};n.r(ve),n.d(ve,"serviceName",(function(){return Vr}));var be={};n.r(be),n.d(be,"serviceName",(function(){return zr}));var ye={};n.r(ye),n.d(ye,"serviceName",(function(){return Kr}));var Se={};n.r(Se),n.d(Se,"serviceName",(function(){return Jr}));var Ce={};n.r(Ce),n.d(Ce,"serviceName",(function(){return Wr}));var we={};n.r(we),n.d(we,"serviceName",(function(){return Qr}));var ke={};n.r(ke),n.d(ke,"TermDuration",(function(){return Yr.a})),n.d(ke,"ConstantTermId",(function(){return Zr})),n.d(ke,"serviceName",(function(){return Xr}));var Ie={};n.r(Ie),n.d(Ie,"serviceName",(function(){return ti})),n.d(Ie,"ultraSettingsPrefix",(function(){return ni}));var Te={};n.r(Te),n.d(Te,"serviceName",(function(){return oi}));var Ee={};n.r(Ee),n.d(Ee,"serviceName",(function(){return si}));var $e={};n.r($e),n.d($e,"serviceName",(function(){return ai}));var Pe=n("Rjd/"),Ae=(n("QLzv"),n("5MwF")),Oe=n("yCC5"),_e=n("nkTj"),De=Oe.a,xe=Ae.a.apiBasePath+"/v1";Pe.a.factory(De,["restmod",_e.d,function(e,t){return e.model(xe).mix({$extend:{Model:{getAllyConfig:function(){return this.single(xe+"/ally/config").$fetch().$allow(["400-599"]).$asPromise().then((function(e){return e.isStatusCode(200)?e:{serviceAvailable:!1}}))},getAllyToken:function(e,t){var n=xe+"/courses/"+e+(t?"/ally/content/"+t+"/token":"/ally/token");return this.single(n).$fetch().$asPromise()}}}})}]);var Re=n("wHJ2"),Me=Oe.b;Pe.a.factory(Me,(function(){var e=Ae.a.telemetryApiBasePath+"/v1/browser/interactions";return{$create:function(t){Re.element.ajax({type:"POST",url:e,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",timeout:Ae.a.telemetryApiTimeoutMS})}}}));var Ne=Oe.c;Pe.a.factory(Ne,["restmod",function(e){return e.model().mix({lastRun:{serialize:"date"},getRedirectUrl:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/redirectUrl"},(function(e){this.$unwrap(e.data)})).$asPromise()}})}]);var je=Oe.d;Pe.a.factory(je,["restmod",function(e){var t=Ae.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{downloadWithAnnotations:function(e,t,n){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+n+"/assignments/attempts/files/"+e+"/downloadInfo?is_group="+t},(function(e){return this.$unwrap(e.data)}))}}}})}]);var Le=Oe.e;Pe.a.factory(Le,["restmod",_e.d,function(e,t){return e.model()}]);var Ue=n("40MU"),Ge=n("D57K"),Fe=n("nbDY"),Be=n.n(Fe),qe=Oe.g,He=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.User=new t("USER"),t.Group=new t("GROUP"),t}(Be.a);Pe.a.factory(qe,["restmod","$q",_e.d,function(e,t,n){return e.model().mix({$url:function(e){if(this.$scope.$url(e))return this.$scope.$url(e).replace(Ae.a.apiBasePath,Ae.a.apiBasePath+"/public")+"/"+encodeURIComponent(this.$pk)},$extend:{Record:{saveException:function(e){return this.$send({method:"POST",url:this.$url(),data:e}).$allow([404]).$asPromise()},deleteException:function(){return this.$send({method:"DELETE",url:this.$url()}).$allow([404]).$asPromise()}}}})}]);var Ve=n("+IM5"),ze=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(Ge.__extends)(t,e),t.Student=new t("STUDENT"),t.InstructorComments=new t("INSTRUCTOR_COMMENTS"),t.InstructorNotes=new t("INSTRUCTOR_NOTES")}(Be.a),Oe.Vb);Pe.a.factory(ze,["restmod",_e.d,function(e){return e.model().mix({grade:{hasOne:Oe.bb,path:"grades"}})}]);var Ke=n("FHk9"),Je=Oe.h;Pe.a.factory(Je,["restmod",_e.d,function(e,t){return e.model().mix({$hooks:{"after-request":function(e){null===e.data.results&&(e.data.results=[])}}})}]);var We=Oe.i;Pe.a.factory(We,["restmod",function(e){var t=Ae.a.apiBasePath+"/v1/brands";return e.model(t).mix({$extend:{Model:{getCurrent:function(){return this.single(t+"/current").$fetch()}}}})}]);var Qe=n("Q/M7"),Ye=Oe.j,Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.INSTITUTION=new t("INSTITUTION"),t.PERSONAL=new t("PERSONAL"),t}(Be.a);Pe.a.factory(Ye,["restmod","$q",function(e,t){var n=Ae.a.apiBasePath+"/v1/calendars";return e.model(n).mix({ui:{mask:!0,init:function(){return{}}},$extend:{Collection:{sortCalendars:function(){return this.$action((function(){this.sort((function(e,t){return e.labelLocalizable.languageKey&&t.labelLocalizable.languageKey?e.id===Ze.INSTITUTION.toString()?1:-1:e.labelLocalizable.languageKey&&!t.labelLocalizable.languageKey?e.id===Ze.INSTITUTION.toString()?1:-1:t.labelLocalizable.languageKey&&!e.labelLocalizable.languageKey?t.id===Ze.INSTITUTION.toString()?-1:1:e.labelLocalizable.rawValue<t.labelLocalizable.rawValue?-1:1}))}))}},Model:{getOrRegenerateExportCalendarFeed:function(e){var n=t.defer();return this.$build().$send({method:e?"POST":"GET",url:Qe.c("/webapps/calendar/calendarFeed/url"),transformResponse:function(e){return e}},(function(e){n.resolve(e&&e.data)})),n.promise}}}})}]);var Xe=n("VdDF"),et=n("g66W"),tt=Oe.k,nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Monthly=new t("MONTHLY"),t.Weekly=new t("WEEKLY"),t.Daily=new t("DAILY"),t}(Be.a),rt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.dayOfWeek=n,r}return Object(Ge.__extends)(t,e),t.Sunday=new t("SU",0),t.Monday=new t("MO",1),t.Tuesday=new t("TU",2),t.Wednesday=new t("WE",3),t.Thursday=new t("TH",4),t.Friday=new t("FR",5),t.Saturday=new t("SA",6),t}(Be.a),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.ByMonthDay=new t("BYMONTHDAY"),t}(Be.a),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Course=new t("Course"),t.External=new t("External"),t}(Be.a),st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.ClassSchedule=new t("C"),t.ExternalCourseSchedule=new t("E"),t.OfficeHours=new t("O"),t}(Be.a);Pe.a.factory(tt,["restmod","RMUtils",_e.d,function(e,t,n){var r=Ae.a.apiBasePath+"/v1/calendars/calendarItems";return e.model(r).mix({startDate:{serialize:"date"},endDate:{serialize:"date"},"recurRules.until":{serialize:"date"},"recurRules.originalStart":{serialize:"date"},"recurRules.originalEnd":{serialize:"date"},ui:{mask:!0,init:function(){return{}}},$extend:{isDueItem:function(){return!!this.dynamicCalendarItemProps},isAllDayEvent:function(){return 0===this.startDate.getHours()&&0===this.startDate.getMinutes()&&23===this.endDate.getHours()&&59===this.endDate.getMinutes()},isConditionalRelease:function(){return!(this.permissions&&this.permissions.edit)&&Ct.ContentVisibility.Restricted.isEqualTo(this.visibility)},getTruncatedLocation:function(e){return et.g(this.location,e)},Record:{$buildUrl:function(e){return this.$pk&&this.$pk.itemSourceType&&this.$pk.itemSourceId?t.joinUrl(t.joinUrl(e.$url(),this.$pk.itemSourceType),this.$pk.itemSourceId):null}},Model:{inferKey:function(e){return{itemSourceType:e.itemSourceType,itemSourceId:e.itemSourceId}},unpack:function(e,t){var n=e.$response.config;if(e.$isCollection){if("PUT"===n.method&&Array.isArray(t))return t.map((function(e){return e.statusCode>=200&&e.statusCode<300?Re.fromJson(e.body):e.body}));e.paging=t&&t.paging,e.permissions=t&&t.permissions;var r=t&&t.results;return r&&r.forEach((function(e){e.recurRules&&!e.recurRules.timeZoneId&&(e.recurRules.timeZoneId=Xe.a.getCurrentTimeZoneId())})),r}var i="POST"===n.method&&Array.isArray(t)?t[0]:t;return i.recurRules&&!i.recurRules.timeZoneId&&(i.recurRules.timeZoneId=Xe.a.getCurrentTimeZoneId()),i}}}})}]);var at=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.category=t,i.categoryKey=n,i.categoryImage=r,i.mediumIconsByCategory={Assessment:"test",Announcements:"announcements",Blog:"blog",Course:"course",CourseLink:"link",CourseSettings:"settings",DiscussionBoard:"discussion",Gradebook:"grades",Group:"groups",Message:"messages",ReleaseSettings:"settings",Rubric:"rubric",TableOfContents:"content-collection",Wiki:"wiki",Content:"document-blank"},i}return Object(Ge.__extends)(t,e),t.prototype.getLocalizableCategoryNameKey=function(){return this.categoryKey},t.prototype.getMediumCategoryIconOrDefault=function(){return this.mediumIconsByCategory[this.category]||"document-blank"},t.prototype.getCategoryIconName=function(){return this.categoryImage?this.categoryImage:"document-blank"},t.Assessment=new t("Assessment","ultra.convert.category.assessment","test"),t.Announcements=new t("Announcements","ultra.convert.category.announcements","announcement"),t.Blog=new t("Blog","ultra.convert.category.blog","blog"),t.Collab=new t("Collab","ultra.convert.category.collab"),t.Course=new t("Course","ultra.convert.category.course","course"),t.CourseLink=new t("CourseLink","ultra.convert.category.courseLink","link"),t.CourseSettings=new t("CourseSettings","ultra.convert.category.courseSettings","settings"),t.Content=new t("Content","ultra.convert.category.content","document-blank"),t.ContentSettings=new t("ContentSettings","ultra.convert.category.contentSettings","settings"),t.DiscussionBoard=new t("DiscussionBoard","ultra.convert.category.discussionBoard","discussion"),t.Gradebook=new t("Gradebook","ultra.convert.category.gradebook","grades"),t.Group=new t("Group","ultra.convert.category.group","groups"),t.Message=new t("Message","ultra.convert.course.message.unsupported","messages"),t.ReleaseSettings=new t("ReleaseSettings","ultra.convert.category.releaseSettings","settings"),t.Rubric=new t("Rubric","ultra.convert.category.rubric","rubric"),t.TableOfContents=new t("TableOfContents","ultra.convert.category.tableOfContents","content-collection"),t.Task=new t("Task","ultra.convert.category.task"),t.Wiki=new t("Wiki","ultra.convert.category.wiki","wiki"),t}(Be.a),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Success=new t("Success"),t.Failure=new t("Failure"),t.Partial=new t("Partial"),t.Unavailable=new t("Unavailable"),t}(Be.a),ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Waiting=new t("WAITING"),t.Assigned=new t("ASSIGNED"),t.Running=new t("RUNNING"),t.Complete=new t("COMPLETE"),t.CompleteErrors=new t("COMPLETE_ERRORS"),t.Incomplete=new t("INCOMPLETE"),t}(Be.a),lt=Oe.s;Pe.a.factory(lt,["restmod",_e.d,function(e,t){return e.model().mix({$config:{primaryKey:"taskId"}})}]);var dt=Oe.u;Pe.a.factory(dt,["restmod",function(e){return e.model().mix({calendarItems:{hasMany:Oe.v},dueDateCalendarItems:{hasMany:Oe.D}})}]);var pt=Oe.v;Pe.a.factory(pt,["restmod",function(e){return e.model().mix(tt,{})}]);var mt=Oe.U;Pe.a.factory(mt,["restmod",function(e){var t=Ae.a.apiBasePath+"/v1/calendars/dueDateCalendarItems";return e.model(t).mix(tt)}]);var ft=Oe.D;Pe.a.factory(ft,["restmod",function(e){return e.model().mix(mt,{})}]);n("RphD");var ht=n("vYaK"),gt=Oe.x,vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.CourseRoom=new t("COURSE_ROOM"),t.UserRoom=new t("USER_ROOM"),t}(Be.a),bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.APOLLO=new t("APOLLO"),t.GEMINI=new t("GEMINI"),t}(Be.a);Pe.a.factory(gt,["restmod",_e.d,function(e,t){return e.model().mix({$extend:{Record:{getLaunchUrl:function(){return this.$send({method:"POST",url:this.$url()+"/launch",data:{}}).$asPromise().then((function(e){return Ae.a.features.collab?e.$response.data.url:e.$response.data.launchUrl}))}}}})}]);var yt=Oe.w;Pe.a.factory(yt,["restmod",_e.d,function(e,t){return e.model().mix({sessions:{hasMany:Oe.x},$extend:{Record:{getVirtualClassroomSession:function(){return this.sessions.$search({sessionType:vt.CourseRoom.toString()}).$asPromise().then((function(e){return e[0]||null}))}}}})}]);var St=Oe.y;Pe.a.factory(St,["restmod",_e.d,function(e,t){return e.model().mix({sessions:{hasMany:Oe.x},$extend:{Record:{getAllCollabSessions:function(){return this.sessions.$search({expand:"sessionInstances",startTime:(new Date).toISOString()}).$asPromise()},getCourseCollabInfo:function(){return this.sessions.$search({sessionCategory:"course",expand:"sessionInstances",startTime:(new Date).toISOString()}).$asPromise()},enableCourseRoom:function(e){var t=this;return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!0}},(function(e){return t.$unwrap(e.data)})).$asPromise()},disableCourseRoom:function(e){var t=this;return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!1}},(function(e){return t.$unwrap(e.data)})).$asPromise()},launchDiscussionSession:function(e,t){var n=this;return this.$send({method:"POST",url:this.$url()+"/sessions/forums/"+e+"/launch"+(t?"?groupId="+t:"")},(function(e){return n.$unwrap(e.data)})).$asPromise()}}}})}]);var Ct=n("fm95"),wt=Oe.z;Pe.a.factory(wt,["restmod",_e.d,function(e,t){return e.model().mix({})}]);var kt=Oe.E;Pe.a.factory(kt,["restmod",_e.d,function(e,t){return e.model().mix({data:{belongsTo:Oe.Ac},ui:{mask:!0,init:function(){return{}}},$hooks:{"before-fetch-many":function(e){e.params=e.params||{},e.params.fields?e.params.fields+=",-data":e.params.fields="-data"},"after-request":function(e){e.data.results.forEach((function(e){var t={id:e.userId,isPlaceHolder:!0};e.data=t}))}}})}]);var It=Oe.I;Pe.a.factory(It,["restmod",_e.d,function(e,t){return e.model().mix({counts:{hasOne:Oe.J},messages:{hasMany:Oe.P},usercounts:{hasMany:Oe.E},$extend:{Record:{save:function(){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url(),data:{"resource/x-bb-forumlink":{title:this.title}}},(function(e){this.$unwrap(e.data["resource/x-bb-forumlink"])}))}}}})}]);var Tt=Oe.J;Pe.a.factory(Tt,["restmod",_e.d,function(e,t){return e.model()}]);var Et=Oe.H;Pe.a.factory(Et,["restmod",_e.d,function(e,t){return e.model().mix({$config:{primaryKey:"cxFileId"},createDate:{serialize:"date"}})}]);var $t=n("PSJS"),Pt=Oe.Q;Pe.a.factory(Pt,["restmod",_e.d,function(e,t){return e.model().mix({contents:{hasMany:Oe.P}})}]);var At=Oe.F;Pe.a.factory(At,["restmod",_e.d,function(e,t){return e.model()}]);var Ot=n("nsO7"),_t=n("oVrE"),Dt=n("qhd3"),xt=Oe.B;Pe.a.factory(xt,["restmod",Dt.serviceName,"$http","$q",function(e,t,n,r){var i=e.model().mix({courseId:{mask:"CU"},latestMessages:{mask:"U",map:"messages"},messages:{mask:"U",hasMany:Oe.C},participants:{mask:!0,hasMany:Oe.Ac},totalCount:{mask:"CU"},unreadCount:{mask:"CU"},createdDate:{mask:"CU",serialize:"date"},updatedDate:{mask:"CU",serialize:"date"},canBeRepliedTo:{mask:"U"},newParticipantIds:{mask:"R"},participantsWithoutSender:{mask:!0},participantsWithoutLatestSender:{mask:!0},creatorId:{mask:"CUD"},ui:{mask:!0,init:function(){return{}}},createConversation:function(e){return this.$decorate({"before-request":function(t){t.params={sendEmailToParticipants:e}}},(function(){return this.$save()}))},$hooks:{"before-request":function(e){if("GET"===e.method&&/conversations\/_\d+_\d+$/.exec(e.url)){e.params=e.params||{},e.params.fields=(e.params.fields||"")+",-participantIds";var t=r.all([n(Ot.pick(e,"method","params","url")),this.participants.$fetch().$asPromise()]).then((function(e){var t=e[0];e[1];return delete t.data.participantIds,t}));e.cache={get:function(){return t}},Object.defineProperty(this,"participantIds",{get:function(){return this.participants.map((function(e){return e.$pk}))},set:Ot.noop})}}}});return i.$extendRecord((function(e,n){if(!Object.prototype.hasOwnProperty.call(e,"latestSender")){var r=null;Object.defineProperty(e,"latestSender",{get:function(){var e=this,n=this.latestMessages[0].senderId;if(null!==r&&r.$pk===n)return r;for(var i=[function(){return e.latestMessages[0].sender},function(){if(e.participants.$resolved)return e.participants.find((function(t){return t.id===e.latestMessages[0].senderId}))},function(){if(_e.a.isValid(e.latestMessages[0].senderId)){var n=t.$new(e.latestMessages[0].senderId);return n.$resolve(),n}var r=_t.e();return e.latestMessages[0].senderId=r,t.$buildRaw({id:r})}],o=0;o<i.length;o++){var s=i[o]();if(void 0!==s)return r=s,s}}})}return{}})),i}]);var Rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Normal=new t("NORMAL"),t.System=new t("SYSTEM"),t}(Be.a),Mt=Oe.C;Pe.a.factory(Mt,["restmod",_e.d,function(e,t){return e.model().mix({conversationId:{mask:"CU"},courseId:{mask:"CU"},senderId:{mask:"CU"},isRead:{mask:"C",init:!1},postDate:{mask:"CU",serialize:"date"},type:{mask:"CU"},participants:{hasMany:Oe.Ac},ui:{mask:!0,init:function(){return{}}},isSystemMessage:function(){return Rt.System.isEqualTo(this.type)},createReply:function(e){return this.$decorate({"before-request":function(t){t.params={sendEmailToParticipants:e}}},(function(){return this.$save()}))}})}]);var Nt=n("tPPx"),jt=n("go4a"),Lt=n("JfV0"),Ut=n("6vR2"),Gt=n("f8ya");function Ft(){return{encode:function(){},decode:function(e){var t={editRole:!1,editPersonalOptions:!1,editAvailability:!1,editDueDateException:!1,editTimeLimitException:!1,delete:!1,create:!1,canInviteUsers:!1,viewDueDateException:!1,viewTimeLimitException:!1,viewAccommodation:!1,editAccommodation:!1};return Object.assign(t,e),t.viewAccommodation=t.viewDueDateException||t.viewTimeLimitException,t.editAccommodation=t.editDueDateException||t.editTimeLimitException,t}}}function Bt(e){e.sort((function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder-t.displayOrder:e.displayOrder&&!t.displayOrder?-1:!e.displayOrder&&t.displayOrder?1:e.displayOrder||t.displayOrder?0:Dt.sortCompareUsers(e.user,t.user)}))}var qt=/courses\/(_\d+_\d+)/,Ht=Oe.N;Pe.a.factory(Ht,["restmod","$q",_e.d,"$rootScope","$injector",function(e,t,n,r,i){var o;function s(){return o||(o=i.get("$ngRedux")),o}return e.model().mix({course:{belongsTo:Oe.t,key:"courseId"},user:{belongsTo:Oe.Ac,key:"userId"},officeHours:{hasMany:Oe.vb},enrollmentDate:{serialize:"date"},isAvailable:{init:!0},lastAccessDate:{serialize:"date"},permissions:{serialize:Ft,init:{}},availabilityHasBeenBypassed:function(){return!!this.bypassCourseAvailabilityUntil},courseIsAvailable:function(){return this.availabilityHasBeenBypassed()?!0===this.course.effectiveAvailability:!0===this.course.isAvailable},courseIsOpen:function(){return this.courseIsAvailable()&&!1===this.course.isClosed},courseIsPrivate:function(){return!this.courseIsAvailable()},isGuestMembership:function(){return Nt.KnownCourseRoleIdentifier.Guest.isEqualTo(this.role)},isStudentMembership:function(){var e=Nt.KnownCourseRoleIdentifier.Student.isEqualTo(this.role);return!(!this.isInStudentPreview||!this.isInStudentPreview())||e},isStudentOrGuestMembership:function(){return this.isStudentMembership()||this.isGuestMembership()},isActAsInstructorMembership:function(){var e=this.courseRole&&this.courseRole.isActAsInstructor||Nt.KnownCourseRoleIdentifier.Instructor.isEqualTo(this.role);return(!this.isInStudentPreview||!this.isInStudentPreview())&&e},isTeachingAssistantMembership:function(){return Nt.KnownCourseRoleIdentifier.TeachingAssistant.isEqualTo(this.role)},isInRoleBucket:function(e){return this.courseRole&&this.courseRole.roleBucket===e},isDueDateExcepted:function(){return this.accommodation().dueDate.hasAccommodation},accommodation:function(){return Gt.a.fromTypes(this.dueDateExceptionType,this.timeLimitExceptionType)},setAccommodation:function(e){e.dueDate.equals(this.dueDateExceptionType)||(this.dueDateExceptionType=e.dueDate.type),e.timeLimit.equals(this.timeLimitExceptionType)||(this.timeLimitExceptionType=e.timeLimit.type)},getCourseColorClass:function(){return jt.a(this)},getBannerImageFilename:function(){return this.course.banner&&this.course.banner.permanentUrl?this.course.banner.permanentUrl:jt.b(this)},getBannerImageThumbnailFilename:function(){return this.course.bannerImageThumbnail&&this.course.bannerImageThumbnail.permanentUrl?this.course.bannerImageThumbnail.permanentUrl:jt.c(this)},$extend:{Collection:{getMembershipCount:function(e){return this.getCounts(e).then((function(e){return e.count}))},getCounts:function(e,n){void 0===n&&(n="/count");var r=t.defer();return this.$collection().$send({method:"GET",url:this.$url()+n,params:e},(function(e){r.resolve(e.data)}),(function(e){r.reject(e)})),r.promise},getDetailsCount:function(){return this.getCounts({membershipAvailable:"true"})},getRoleBucketCount:function(){return this.getCounts({groupBy:"roleBucket"},"/counts")},getAccommodatedMemberCount:function(){return this.getCounts({membershipAvailable:"true"}).then((function(e){return e.withAccommodationCount}))},batchGetCollections:function(e){var n=t.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},(function(e){n.resolve(e.data)}),(function(e){n.reject(e)})),n.promise}}},$hooks:{"before-fetch-many":function(e){var t=(qt.exec(this.$url())||[])[1];t&&r.$broadcast("course-"+t+"-memberships-before-fetch",e)},"after-fetch-many":function(){this.permissions=Ft().decode(this.permissions),this.forEach((function(e){1===e.displayOrder&&(e.ui||(e.ui={}),e.ui.isLeader=!0),e.user&&null==e.user.isAvailable&&(e.user.isAvailable=!0),e.course&&e.course.instructorsMembership&&e.course.instructorsMembership.length&&Bt(e.course.instructorsMembership)}));var e=s(),t=(qt.exec(this.$url())||[])[1],n=Object(Ut.a)(this.$response.data);e.dispatch(Lt.actions.courseMembership.setMembershipsInStore(t,n))},"after-fetch":function(){1===this.displayOrder&&(this.ui||(this.ui={}),this.ui.isLeader=!0)},"after-feed":function(){var e;if(this.userId=this.userId||(this.user||{$pk:void 0}).$pk,null===(e=this.$response)||void 0===e?void 0:e.data){var t=s(),n=Object(Ut.a)(this.$response.data);t.dispatch(Lt.actions.courseMembership.setMembershipInStore(n))}}}})}]);var Vt=Oe.O;Pe.a.factory(Vt,["restmod",_e.d,function(e,t){return e.model().mix({$extend:{Record:{getEmailPreviewContent:function(){var e=this;return this.$send({method:"GET",url:this.$scope.$url()+"/preview"},(function(t){return e.$unwrap({emailBody:t.data.emailBody})})).$asPromise()},getCourseInviteUrl:function(){var e=this;return this.$send({method:"GET",url:this.$scope.$url()+"/inviteUrl"},(function(t){return e.$unwrap({inviteUrl:t.data.inviteUrl})})).$asPromise()}}}})}]);var zt=Oe.R;Pe.a.factory(zt,["restmod","DSCacheFactory",_e.d,function(e,t,n){return e.model().mix({$config:{primaryKey:"key"},$extend:{Collection:{getPreference:function(e){return new Kt(t,this).getPreference(e)},setPreference:function(e){return new Kt(t,this).setPreference(e)},deletePreference:function(e){return new Kt(t,this).deletePreference(e)}}}})}]);var Kt=function(){function e(e,t){this.DSCacheFactory=e,this.preferences=t,this.courseId=t.$scope.$scope.id||t.$scope.$scope.$pk}return e.prototype.setPreference=function(e){return this._setCachePreference({key:e.key,value:e.value.toString(),visibleToStudents:e.visibleToStudents}).$asPromise().then((function(t){var n={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.value){case"boolean":n.value="true"===t.value;break;case"number":n.value=Number(t.value)}return n}))},e.prototype._setCachePreference=function(e){var t=this._getPreferenceCacheForCourse(),n=this._setPreferenceOnBackend(e);return t.put(e.key,n),n},e.prototype._setPreferenceOnBackend=function(e){if(e.key.length>247)throw new Error("Preference key is too long!");if(e.value.length>255)throw new Error("Preference value is too long!");var t=this.preferences.$new(e.key);return t.key=e.key,t.value=e.value,t.visibleToStudents=e.visibleToStudents,t.$save()},e.prototype.getPreference=function(e){var t;return"defaultValue"in e&&(t={value:e.defaultValue.toString(),visibleToStudents:!0}),this._getPreferenceWithDefaultAndCache({key:e.key,defaultPreference:t}).$asPromise().then((function(t){var n={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.defaultValue){case"boolean":n.value="true"===t.value;break;case"number":n.value=Number(t.value)}return n}))},e.prototype._getPreferenceWithDefaultAndCache=function(e){var t=this._getPreferenceCacheForCourse().get(e.key);return null==t&&(t=this._getPreferenceFromBackend(e),this._getPreferenceCacheForCourse().put(e.key,t)),t},e.prototype._getPreferenceFromBackend=function(e){if(e.key.length>247)throw new Error("Preference key is too long!");if(e.defaultPreference&&e.defaultPreference.value.length>255)throw new Error("Default preference value is too long!");return this.preferences.$find(e.key).$allow([404]).$then((function(t){t.$response&&404===t.$response.status&&e.defaultPreference&&null!=e.defaultPreference.value&&null!=e.defaultPreference.visibleToStudents&&(t.value=e.defaultPreference.value,t.visibleToStudents=e.defaultPreference.visibleToStudents)}))},e.prototype._getPreferenceCacheForCourse=function(){if(!this.courseId)throw new Error("No courseId has been provided");var e=this.DSCacheFactory.get("course.preference."+this.courseId);return null==e&&(e=this.DSCacheFactory.createCache("course.preference."+this.courseId,{capacity:100})),e},e.prototype.deletePreference=function(e){return this._deleteCachePreference(e).$asPromise().then((function(e){return{key:e.key,value:e.value,visibleToStudents:e.visibleToStudents}}))},e.prototype._deleteCachePreference=function(e){var t=this._getPreferenceCacheForCourse();return t.get(e)?(t.remove(e),this.preferences.$new(e).$destroy().$allow([404])):this.preferences.$new(e)},e}(),Jt=Oe.T;Pe.a.factory(Jt,["restmod",_e.d,function(e,t){return e.model().mix(tt,{})}]);var Wt=function(e,t){var n="/learn/api/v1/courses/"+e+"/groupsets";return t&&(n+="/"+t),n},Qt=Oe.K;Pe.a.factory(Qt,["restmod","$q",_e.d,function(e,t,n){return e.model().mix({course:{belongsTo:Oe.t,key:"courseId"},modifiedDate:{serialize:"date"},available:{init:!1},batchUid:{mask:!0},collabSession:{hasMany:Oe.x,path:"collabultra/sessions"},$extend:{Record:{canDelete:function(){return!this.permissions||this.permissions.delete},canEdit:function(){return!this.permissions||this.permissions.modify}},Collection:{batchGetCollection:function(e,t){return this.findMany(e,t).$asPromise()},batchUpdate:function(e){return this.$collection().$send({method:"PUT",url:this.$url()+"/batchUpdate",data:e},(function(e){var t=e.data.map((function(e){return e.statusCode>=200&&e.statusCode<300?Re.fromJson(e.body):e.body}));return this.$unwrap({results:t})})).$asPromise()},getGroupsInGroupSet:function(e,t,n){var r=n.expand,i=n.limit,o=void 0===i?1e3:i;return this.$collection().$send({method:"GET",url:Wt(e,t)+"/groups",params:{expand:r,limit:o}},(function(e){var t=[];return e.data&&e.data.results&&(t=e.data.results),this.$unwrap({results:t})})).$asPromise()}}}})}]);var Yt=Oe.L;Pe.a.factory(Yt,["restmod",ht.serviceName,function(e,t){return e.model().mix({groupAttempts:{hasMany:Oe.hb,hooks:{"after-fetch-many":function(){for(var e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1],n=0;n<this.length;n++)this[n]=t.$new(e).gradebook.groupAttempts.$buildRaw(this[n]),this[n].attempts&&this[n].attempts.length&&(this[n].attempts=t.$new(e).gradebook.attempts.$decode(this[n].attempts))}}}})}]);var Zt=Oe.M;Pe.a.factory(Zt,["restmod",function(e){return e.model().mix({$hooks:{"before-request":function(e){e.headers={"Suppress-Session-Timestamp-Update":!0}}}})}]);var Xt=Oe.G;Pe.a.factory(Xt,["restmod",_e.d,function(e,t){return e.model().mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement:function(){return!!this.uid}}}})}]);var en=Oe.l;Pe.a.factory(en,["restmod",_e.d,function(e,t){return e.model(Ae.a.apiBasePath+"/v1/cloudstorages").mix({contents:{hasMany:Oe.m},me:{hasOne:Oe.o},$config:{primaryKey:"name"}})}]);var tn=Oe.o;Pe.a.factory(tn,["restmod",_e.d,function(e,t){return e.model()}]);var nn=Oe.m;Pe.a.factory(nn,["restmod",_e.d,function(e,t){return e.model().mix({download:{hasOne:Oe.n,mask:!0},createdTime:{serialize:"date"},updatedTime:{serialize:"date"},ui:{mask:!0,init:function(){return{}}},$url:function(e){return this.$scope.$url(e)+"/"+encodeURIComponent(this.$pk)},$extend:{Record:{getChildren:function(e){return null==e&&(e={}),this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",params:e},(function(e){this.$unwrap(e.data)}),(function(e){}))}}}})}]);var rn=Oe.n,on={};Pe.a.factory(rn,["restmod",_e.d,function(e,t){return e.model().mix(on)}]);var sn=Oe.p;Pe.a.factory(sn,["restmod",_e.d,function(e,t){return e.model(Ae.a.apiBasePath+"/v1/cloudstorages/tasks").mix(on)}]);var an=Oe.q;Pe.a.factory(an,["restmod",_e.d,function(e,t){return e.model(Ae.a.apiBasePath+"/v1/collabultra/ping").mix({$extend:{Record:{getCollabUltraInfo:function(){return this.$send({method:"GET",url:this.$scope.$url()},(function(e){this.$unwrap(e.data)})).$allow([403,404]).$asPromise()}}}})}]);var un=Oe.V;Pe.a.factory(un,["restmod",_e.d,function(e,t){var n=Ae.a.apiBasePath+"/v1/utilities/entitlements";return e.model(n).mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement:function(){return!!this.uid}}}})}]);var cn=Oe.W;Pe.a.factory(cn,["restmod",function(e){return e.model(Ae.a.apiBasePath+"/v1/externalCourses").mix({schedule:{hasMany:Oe.T},startDate:{serialize:"date"},endDate:{serialize:"date"},$extend:{Collection:{}},$hooks:{"before-request":function(e){Ae.a.features.externalCourse||"GET"===e.method&&e.url===Ae.a.apiBasePath+"/v1/externalCourses"&&(e.cache={get:function(){return{paging:{nextPage:"",previousPage:"",count:0,limit:1e5,offset:0},permissions:null,results:[]}}})}}})}]);var ln=Oe.X;Pe.a.factory(ln,["restmod",_e.d,function(e,t){return e.model().mix({ui:{mask:!0,init:function(){return{}}}})}]);var dn=n("t6LE"),pn=n("JrDC"),mn="ultra.components.services.models.grade.gradeGroupAttempt",fn=Oe.hb,hn="start";Pe.a.factory(fn,["restmod",ht.serviceName,_e.d,function(e,t,n){return e.model().mix(dn.serviceName,{attempts:{ignore:"CU"},members:{ignore:"CU"},$extend:{Scope:{$destroyUrlFor:function(e){return Ae.a.apiBasePath+"/v1/courses/"+pn.a(t,e.$scope)+"/gradebook/groupAttempts/"+e.id}},Record:{getFeedbackToUser:function(){return this.feedbackToUser},getLastFeedbackAuthor:function(){return this.lastFeedbackAuthor||this.attempts[0]&&this.attempts[0].lastFeedbackAuthor},getGradeAttempt:function(){var e=this;return this.attempts&&this.attempts.length?1===this.attempts.length?this.attempts[0]:this.submittedBy?Ot.find(this.attempts,(function(t){return t.userId===e.submittedBy})):Ot.sortBy(this.attempts,["creationDate"])[0]:null},isPrePostGrade:function(){return!this.isCompleted()||!this.readyToPost},isDisplayablePostedGrade:function(){return this.isCompleted()&&this.readyToPost}},Collection:{getNumAttemptsToGrade:function(){return this.filter((function(e){return e.isNeedsGrading()&&!e.isPostable()})).length},getNumAttemptsToPost:function(){return this.filter((function(e){return e.isPostable()})).length},getNumOfGradedAttempts:function(){return this.filter((function(e){return e.isGraded()})).length},isAllGradedAndPosted:function(){return this.length>0&&this.every((function(e){return e.isCompleted()}))}}},$hooks:{"after-update":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-fetch":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-feed":function(e){this.permissions&&(this.permissions.deleteAttempt=this.permissions.delete,this.permissions.editAttempt=this.permissions.editGrade);!function(e){var t=e.toolAttemptDetail,n=e.attempts;if(t&&n){var r=Object.keys(t)[0];r&&n.forEach((function(e){if(!e.toolAttemptDetail){var n=e.id,i=Ot.cloneDeep(t);if(i[r]){e.toolAttemptDetail=i;var o=e.toolAttemptDetail[r].questionAttempts;o&&o.forEach((function(e){e.attemptId=n}))}}}))}}(this)}}})}]);var gn="ultra.components.services.models.grade.gradeCategory",vn=Oe.eb,bn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.title=t,r.iconName=n,r._iconName=n,r}return Object(Ge.__extends)(t,e),t.prototype.getIconName=function(){return this._iconName},t.Assignment=new t("Assignment.name","assignment"),t.Attendance=new t("Attendance.name","attendance"),t.Blog=new t("Blog.name","blog"),t.Discussion=new t("Discussion.name","discussion"),t.Exam=new t("Exam.name","exam"),t.Homework=new t("Homework.name","homework"),t.Journal=new t("Journal.name","journal"),t.Presentation=new t("Presentation.name","presentation"),t.Quiz=new t("Quiz.name","quiz"),t.Survey=new t("Survey.name","survey"),t.Test=new t("Test.name","test"),t}(Be.a);Pe.a.factory(vn,["restmod",_e.d,function(e,t){return e.model().mix({ui:{mask:!0,init:function(){return{}}},$hooks:{"after-feed":function(e){this.localizableTitle||(this.localizableTitle={bundle:"gradebook_type",languageKey:this.title,serviceLevel:null})}}})}]);var yn=n("Kpdw"),Sn=n("e6jQ"),Cn=n("7CA4"),wn=Oe.r,kn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.NewOverrideGrade=new t("New Override Grade"),t.NewOverrideGradeWithPostedAttempt=new t("New Override Grade With Posted Attempt"),t.NewGradeWithNotPostedAttempt=new t("New Grade With Not Posted Attempt"),t.CleanOverride=new t("Clean Override"),t.CleanOverrideForAttempt=new t("Clean Override For Attempt"),t.CleanPostedOverride=new t("Clean Posted Override Without Attempt"),t.CleanOverrideWithPostedAttempt=new t("Clean Override Grade With Posted Attempt"),t.CleanGradeWithPostedAttempt=new t("Clean Grade With Posted Attempt"),t.CleanGradeWithNotPostedAttempt=new t("Clean Grade With Not Posted Attempt"),t.PostGrade=new t("Post Grade"),t.PostOverrideGrade=new t("Post Override Grade"),t}(Be.a);Pe.a.factory(wn,["restmod",_e.d,ht.serviceName,function(e,t,n){return e.model().mix({$hooks:{ui:{mask:!0,init:function(){return{updateTimestamp:0}}},"after-feed":function(){this.calculateDerivedSummaries()}},$extend:{Record:{calculateDerivedSummaries:function(){this.numNeedsGrading=_e.c(this.numGroupsNeedsGrading,this.numStudentsNeedsGrading),this.numPosted=_e.c(this.numGroupsPosted,this.numStudentsPosted),this.numEligibleToBeGraded=null!=this.numGroupsPosted?this.numGroupsEligibleToBeGraded:this.numStudentsEligibleToBeGraded,this.numSubmissionGradedNeedsPosting=_e.c(this.numGroupsSubmissionGradedNeedsPosting,this.numStudentsSubmissionGradedNeedsPosting),this.numStudentsEligibleToBeGradedExternalSubmission=this.numStudentsEligibleToBeGraded-this.numStudentsGradedNeedsPosting-this.numStudentsPosted-this.numberOfOverriddenGradesToPost,this.numGroupsEligibleToBeGradedExternalSubmission=this.numGroupsEligibleToBeGraded-this.numGroupsGradedNeedsPosting-this.numGroupsPosted,null!=this.numGroupsGradedNeedsPosting?(this.numGradedNeedsPosting=this.numGroupsGradedNeedsPosting,this.numberOfStudentsOverriddenGradesToPost=this.numberOfOverriddenGradesToPost,this.numberOfOverriddenGradesToPost=0):this.numGradedNeedsPosting=this.numStudentsGradedNeedsPosting},isRestricted:function(){return this.restricted},getStatus:function(){return this.isRestricted()?Cn.a.Restricted:this.numNeedsGrading>0?Cn.a.NeedsGrading:this.totalNumberOfGradesToPost()>0?Cn.a.NeedsPosting:this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0?Cn.a.AllPosted:0===this.numSubmissionsTotal?Cn.a.NothingToGrade:0===this.numNeedsGrading?Cn.a.AllGraded:void 0},isAllGradedAndPosted:function(){return this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0},numStudentsGraded:function(){return this.numGradedNeedsPosting+this.numPosted+this.numberOfOverriddenGradesToPost},numStudentSubmissions:function(){return this.participantIds?this.participantIds.length:this.numGroupsSubmitted||this.numStudentsSubmitted},hasGradesToPost:function(){return null!=this.numGroupsGradedNeedsPosting?this.numGroupsGradedNeedsPosting>0:this.numGradedNeedsPosting>0||this.numberOfOverriddenGradesToPost>0},totalNumberOfGradesToPost:function(){return this.numGradedNeedsPosting+this.numberOfOverriddenGradesToPost}},Model:{inferKey:function(){return Sn.a()},unpack:function(e,t){return Ot.forOwn(e,(function(e,t,n){Ot.startsWith(t,"$")||"ui"===t||(n[t]=null)})),_e.g(e,t)}},Collection:{expandingColumns:function(e,t){var n={};return this.$collection().$on("after-fetch-many",(function(r){var i=r.data.results;n=i.reduce((function(e,t){return e[t.columnId]=t,e}),n),e.forEach((function(e){e.id in n?e.summary.$unwrap(n[e.id]):t&&e.summary.$unwrap(t)}))}))}}}})}]);var In=n("KrjC"),Tn=n("Iftj"),En=n("3PCF"),$n=Oe.db;Pe.a.factory($n,["restmod",_e.d,"$injector","$ngRedux",function(e,t,n,r){return e.model().mix({$hooks:{"before-fetch":function(e){e.method="POST",Ot.isString(e.params.membershipIds)&&(e.params.membershipIds=e.params.membershipIds.split(",")),Ot.isString(e.params.columnIds)&&(e.params.columnIds=e.params.columnIds.split(",")),e.data={membershipIds:e.params.membershipIds,columnIds:e.params.columnIds},delete e.params.membershipIds,delete e.params.columnIds},"after-fetch":function(e){var t=this,i=n.get(ht.serviceName),o=e.config.params.courseId;this.bulkViewUsers.forEach((function(e){var n=e.grades.map((function(e){var t,n=null===(t=e.attempts)||void 0===t?void 0:t.find((function(t){return new Date(t.attemptDate).getTime()===new Date(e.lastAttemptDate).getTime()}));return Object(Ge.__assign)(Object(Ge.__assign)({},e.grade),{lastAttemptId:null==n?void 0:n.id})}));r.dispatch(Lt.actions.gradebookGrade.setGradesInStore(n)),e.grades.forEach((function(e){var n=e.grade;e.grade=i.$new(o).gradebook.columns.$new(e.columnId).grades.$buildRaw(n),e.lastAttemptDate&&(e.lastAttemptDate=new Date(e.lastAttemptDate)),e.attempts&&e.attempts.length>0&&(e.attempts.forEach((function(t){var r=i.$new(o).gradebook.columns.$new(e.columnId).grades.$new(n.id).attempts.$buildRaw(t);e.grade.attempts.$add(r)})),e.grade.ui.attempt=e.grade.attempts[0]),e.grade.permissions=t.permissions,e.submissionResults&&e.submissionResults.results[En.b]&&(e.originalityProcessed=e.submissionResults.results[En.b].originalityProcessed,e.originalityScore=e.submissionResults.results[En.b].originalityScore)}))}))}}})}]);n("lTRw");var Pn=Oe.Z;Pe.a.factory(Pn,["restmod",_e.d,function(e,t){return e.model()}]);var An=Oe.bb;Pe.a.factory(An,["restmod",function(e){return e.model().mix({$hooks:{"after-save":function(e){this.points=null,this.$unwrap(e.data),this.questionAttempt.visibleQuestionNumber=this.questionNumber},"before-save":function(e){e.url=e.url.substr(0,e.url.indexOf("/answers"))+"/answers/"+this.questionAttempt.id+"/grades",Ot.merge(e.data,{questionType:this.questionAttempt.questionType}),this.questionNumber=this.questionAttempt.visibleQuestionNumber},"after-fetch-many":function(){var e=this;this.forEach((function(t){t.permissions=e.permissions}))}},$extend:{Collection:{setPostStatusAndGroupAttemptId:function(e){this.forEach((function(t){t.ui.isPosted=e.isCompleted(),e.groupAttemptId&&(t.ui.groupAttemptId=e.groupAttemptId)}))}}},questionAttempt:{ignore:"CU"},ui:{init:function(){return{}},mask:!0}})}]);var On=Oe.ib;Pe.a.factory(On,["restmod","$q",_e.d,function(e,t,n){return e.model().mix({})}]);var _n=Oe.ab;Pe.a.factory(_n,["restmod",_e.d,function(e){return e.model().mix({$extend:{hasAttachments:function(){return!Ot.isUndefined(this.overallOriginalityProcessed)&&(this.attemptOriginality&&this.attemptOriginality.attachments.length||this.answerOriginalities.length&&this.answerOriginalities.some((function(e){return e.attachments.length})))},canShowReportPanel:function(){return this.overallOriginalityProcessed&&this.hasAttachments()}},$hooks:{"after-request":function(e){e.data.results&&(e.data=e.data.results[En.b])}}})}]);var Dn=Oe.kb;Pe.a.factory(Dn,["restmod",function(e){var t=Ae.a.apiBasePath+"/v1/calendars/institution/calendarItems";return e.model(t).mix(tt)}]);var xn=Oe.lb;Pe.a.factory(xn,["restmod",_e.d,function(e,t){var n=Ae.a.apiBasePath+"/v1/roles/institutionRoles";return e.model(n)}]);var Rn=Oe.mb;Pe.a.factory(Rn,["restmod",_e.d,function(e,t){var n=Ae.a.apiBasePath+"/v1/languages";return e.model(n).mix({})}]);var Mn=Oe.nb,Nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Approved=new t("Approved"),t.Excluded=new t("Excluded"),t.NeedsApproval=new t("NeedsApproval"),t}(Be.a),jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Never=new t("Never"),t.SSLOnly=new t("SSLOnly"),t.Always=new t("Always"),t}(Be.a);Pe.a.factory(Mn,["restmod",function(e){var t=Ae.a.apiBasePath+"/v1/lti/domainConfigs";return e.model(t).mix({$extend:{Model:{findByDomain:function(e){return this.$build().$send({method:"GET",url:this.$url()+"?domain="+e},(function(e){return this.$unwrap(e.data)})).$allow([404]).$asPromise()}}}})}]);var Ln=Oe.pb;Pe.a.factory(Ln,["restmod",_e.d,function(e){var t=Ae.a.apiBasePath+"/v1/lti/settings";return e.model(t).mix({$extend:{Model:{getSettings:function(){return this.$build().$send({method:"GET",url:this.$url()},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);var Un=Oe.ob;Pe.a.factory(Un,["restmod",function(e){var t=Ae.a.apiBasePath+"/public/v1/lti/placements";return e.model(t).mix({isAvailable:function(){return Lt.PublicAvailability.Yes===this.availability.available},$hooks:{"after-feed":function(e){this.iconUrl=Qe.c(this.iconUrl)}}})}]);var Gn=Oe.qb;Pe.a.factory(Gn,["restmod",_e.d,function(e,t){var n=Ae.a.apiBasePath+"/v1/users/me/preferences";return e.model(n).mix({$config:{primaryKey:"key"}})}]);var Fn=Oe.rb;Pe.a.factory(Fn,["restmod",_e.d,function(e){return e.model()}]);var Bn=n("1/43"),qn=Oe.tb;Pe.a.factory(qn,["restmod",_e.d,function(e){return e.model()}]);var Hn=Oe.ub;Pe.a.factory(Hn,["restmod",_e.d,function(e){return e.model().mix({courseSettings:{hasMany:Oe.tb},organizationSettings:{hasMany:Oe.tb},$url:function(){return Ae.a.apiBasePath+"/v1/notification/settings"}})}]);var Vn=Oe.vb;Pe.a.factory(Vn,["restmod",function(e){return e.model().mix(tt,{})}]);var zn=n("FBBZ"),Kn=Oe.wb;Pe.a.factory(Kn,["restmod",function(e){var t=Ae.a.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getPartnersByType:function(e){return this.$build().$send({method:"GET",url:this.$url()+"/providerContent?course_id="+e},(function(e){return this.$unwrap(e.data)})).$allow(["400-599"]).$asPromise()}}},$hooks:{"after-feed":function(e){var t=function(e){Re.isDefined(e.internalPovider)&&Re.isUndefined(e.internalProvider)&&(e.internalProvider=e.internalPovider)};Ot.forEach(this.premierList,t),Ot.forEach(this.signatureList,t),Ot.forEach(this.otherList,t);var n=function(e){return!e.internalProvider||zn.o(e)};this.premierList=Ot.filter(this.premierList,n),this.signatureList=Ot.filter(this.signatureList,n),this.otherList=Ot.filter(this.otherList,n)}}})}]);var Jn=Oe.Cb;Pe.a.factory(Jn,["restmod",function(e){var t=Ae.a.partnerCloudBasePath+"/v1/status";return e.model(t).mix({$extend:{Model:{getStatus:function(e){return this.$build().$send({method:"GET",url:this.$url()+"?course_id="+e},(function(e){return this.$unwrap(e.data)}),(function(){return this.$unwrap({enabled:!1,userCloudProvisioned:!1})})).$allow(["400-599"]).$asPromise()}}}})}]);var Wn=Oe.yb;Pe.a.factory(Wn,["restmod",_e.d,function(e,t){var n=Ae.a.partnerCloudBasePath+"/v1/courses";return e.model(n).mix({partnerLinkedCourses:{hasMany:Oe.Ab,path:"providerBindings"},$extend:{Record:{updateProvisioning:function(e){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.$pk+"/updateProvisioning/"+e},(function(e){this.$unwrap(e.data)})).$allow(["400-599"]).$asPromise()}}}})}]);var Qn=Oe.Ab;Pe.a.factory(Qn,["restmod",_e.d,function(e){return e.model().mix({tools:{hasOne:Oe.Db,path:"tools"},id:{map:"@id"},$extend:{Model:{unpack:function(e,t){return t&&t.bindings}}}})}]);var Yn=Oe.xb;Pe.a.factory(Yn,["restmod",function(e){var t=Ae.a.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{getContentIds:function(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/"+e+"/linkRefId/"+t+"/content/ids"},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);n("3uIF");var Zn=Oe.Bb;Pe.a.factory(Zn,["restmod",function(e){var t=Ae.a.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getSettingsById:function(e){return this.$build().$send({method:"GET",url:this.$url()+"/providers/"+e+"/settings"},(function(e){return this.$unwrap(e.data)})).$allow(["400-599"]).$asPromise()}}}})}]);var Xn=Oe.Db;Pe.a.factory(Xn,["restmod",_e.d,function(e,t){return e.model().mix({})}]);var er=Oe.Eb;Pe.a.factory(er,["restmod",function(e){return e.model().mix(tt,{})}]);var tr=n("0JpG"),nr=Oe.Fb;function rr(e,t){e.activityDaily&&e.activityDaily.forEach((function(e){e.inCourseDuration=ir(e.inCourseDuration),e.ui={display:t.formatComposedDurationSync(e.inCourseDuration,tr.ILocaleComposedDurationFormat.HoursMinutes)}})),e.activityWeekly&&e.activityWeekly.forEach((function(e){e.inCourseDuration=ir(e.inCourseDuration),e.ui={display:t.formatComposedDurationSync(e.inCourseDuration,tr.ILocaleComposedDurationFormat.HoursMinutes)}}))}function ir(e){return 15*Math.round(e/15)*60}Pe.a.factory(nr,["restmod",tr.serviceName,function(e,t){var n=Ae.a.telemetryApiBasePath+"/v1/predict/courses";return e.model(n).mix({"activityDaily[].activityDate":{decode:"localDate"},"activityWeekly[].activityWeek":{decode:"localDate"},"assignments[].dueDate":{serialize:"date"},"assignmentGrades[].gradedDate":{serialize:"date"},"assignmentGrades[].submissionDate":{serialize:"date"},startDate:{serialize:"date"},endDate:{serialize:"date"},lastActivityDate:{serialize:"date"},"weeks[].weekOf":{decode:"localDate"},$hooks:{"after-fetch":function(){rr(this,t),this.instructors&&this.instructors.forEach((function(e){e.learnUser=J.learnUser}))}}})}]);var or=Oe.Gb;Pe.a.factory(or,["restmod",function(e){return e.model().mix({$extend:{Model:{$for:function(e,t){return this.$collection(t,{$urlFor:function(){return Ae.a.telemetryApiBasePath+"/v1/predict/"+e}})}},Collection:{$decode:function(e){return this.push.apply(this,e),this}}}})}]);var sr=Oe.Jb;Pe.a.factory(sr,["restmod",function(e){var t=Ae.a.telemetryApiBasePath+"/v1/predict/favorites";return e.model(t).mix({$extend:{Model:{marketSnapshot:function(e,t){return this.$build().$send({method:"GET",params:t,url:this.$url()+"/"+e+"/marketSnapshot"},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);var ar=Oe.Pb;Pe.a.factory(ar,["restmod",_e.d,function(e,t){var n=Ae.a.telemetryApiBasePath+"/v1/predict/settings";return e.model(n).mix({$extend:{Model:{get:function(){return this.single(n).$fetch().$allow([403]).$asPromise()}}},$hooks:{"after-fetch":function(){Re.isUndefined(this.advisorEmailEnabled)&&(this.advisorEmailEnabled=!0),Re.isUndefined(this.instructorEmailEnabled)&&(this.instructorEmailEnabled=!0);var e=Ot.indexOf(this.fields,"probability");-1!==e&&(this.fields[e]="goodProbability")}}})}]);var ur=Oe.Rb;Pe.a.factory(ur,["restmod",_e.d,function(e){var t=Ae.a.apiBasePath+"/v1/telemetry/predict/systemSettings";return e.model(t).mix({$extend:{Model:{get:function(){return this.single(t).$fetch().$allow([404]).$asPromise()}}}})}]);var cr=Oe.Ib;Pe.a.factory(cr,["restmod",function(e){return e.model().mix({$extend:{Model:{$for:function(e,t){return this.$collection(t,{$urlFor:function(){return Ae.a.telemetryApiBasePath+"/v1/predict/"+e}})}},Collection:{$unwrap:function(e){return e.results||e.data?(e.data&&this.push.apply(this,e.data),e.results&&this.push.apply(this,e.results)):this.push.apply(this,e),this}}}})}]);var lr=Oe.Qb;function dr(e){Re.isDefined(e.goodProbability)&&(e.goodProbability=Math.round(100*e.goodProbability)),Re.forEach(e.courses,(function(e){e.prediction&&(e.prediction.goodProbability=Math.round(100*e.prediction.goodProbability)),e.previousPrediction&&(e.previousPrediction.goodProbability=Math.round(100*e.previousPrediction.goodProbability)),Re.forEach(e.weeks,(function(e){e.goodProbability=Math.round(100*e.goodProbability)}))}))}function pr(){return Re.isUndefined(this.ui)&&(this.ui={}),Re.isUndefined(this.ui.learnUser)&&(this.ui.learnUser={givenName:this.firstName,familyName:this.lastName}),this.ui.learnUser}Pe.a.factory(lr,["restmod","$q",tr.serviceName,function(e,t,n){var r=Ae.a.telemetryApiBasePath+"/v1/predict/students",i=Ae.a.telemetryApiBasePath+"/v1/predict/courses/",o=Ae.a.telemetryApiBasePath+"/v1/predict/studentSearch",s=Ae.a.telemetryApiBasePath+"/v1/predict/message";Ae.a.telemetryApiBasePath;return e.model(r).mix({academicHoldDate:{serialize:"date"},birthDate:{serialize:"date"},financialHoldDate:{serialize:"date"},lastActivityDate:{serialize:"date"},"plannerInterests[].chosenDate":{serialize:"date"},plannerLocationChosenDate:{serialize:"date"},"courses[].activityDaily[].activityDate":{decode:"localDate"},"courses[].activityWeekly[].activityWeek":{decode:"localDate"},"courses[].assignments[].dueDate":{serialize:"date"},"courses[].assignmentGrades[].gradedDate":{serialize:"date"},"courses[].assignmentGrades[].submissionDate":{serialize:"date"},"courses[].startDate":{serialize:"date"},"courses[].endDate":{serialize:"date"},"courses[].lastActivityDate":{serialize:"date"},"courses[].weeks[].weekOf":{decode:"localDate"},$extend:{Model:{getCourseStudent:function(e,t,n){return this.single(i+t+"/students/"+e).$fetch(n).$allow([403]).$asPromise()},getCourseStudents:function(e,t){return this.$collection(t,{$urlFor:function(){return i+e+"/students"}}).$fetch(t).$allow([403]).$asPromise()},getStudent:function(e,n){var i=t.defer();return this.$collection({studentId:e},{$urlFor:function(){return r}}).$fetch(n).$asPromise().then((function(e){i.resolve(e[0])})).catch((function(){i.reject()})),i.promise},postInstructorMessage:function(e,t,n){return this.$build().$send({method:"POST",url:i+n+"/students/"+t+"/message/advisor",data:e}).$asPromise()},postAdvisorMessage:function(e,t){return this.$build().$send({method:"POST",url:r+"/"+t+"/message/student",data:e}).$asPromise()},postMessage:function(e){return this.$build().$send({method:"POST",url:""+s,data:e}).$asPromise()},postMessageToStudents:function(e){return this.$build().$send({method:"POST",url:r+"/message",data:e}).$asPromise()},postMessageToStudentsByFilter:function(e,t){return this.$build().$send({method:"POST",url:r+"/messageByFilter",data:e,params:t}).$asPromise()},typeaheadSearch:function(e,n,r,s){void 0===n&&(n=""),void 0===r&&(r=6),void 0===s&&(s=!1);var a=t.defer(),u=o+"?query="+encodeURIComponent(e);return n&&(u=""+i+n+"/studentSearch?query="+encodeURIComponent(e)),this.$build().$send({method:"GET",url:u,params:{emailRequired:!0===s?"true":"false",limit:r}},(function(e){e&&e.data&&e.data.results?a.resolve(e.data.results.map((function(e){return{firstName:e.firstName,lastName:e.lastName,studentDisplayId:e.studentDisplayId,lmsId:e.lmsId,avatar:{permanentUrl:e.avatarUrl},learnUser:pr,email:e.email,advisors:e.advisors}}))):a.resolve([])})).$allow([403]),a.promise}},Record:{learnUser:pr}},$hooks:{"after-fetch":function(){dr(this),this.courses.forEach((function(e){B.adjustEngagement(e,n)})),this.advisors&&this.advisors.forEach((function(e){e.learnUser=pr}))},"after-fetch-many":function(){this.forEach((function(e){dr(e),e.courses.forEach((function(e){B.adjustEngagement(e,n)})),e.advisors&&e.advisors.forEach((function(e){e.learnUser=pr}))}))}}})}]);var mr=Oe.Nb;Pe.a.factory(mr,["restmod",_e.d,function(e,t){var n=Ae.a.telemetryApiBasePath+"/v1/predict/permissions";return e.model(n).mix({$extend:{Model:{get:function(){return this.single(n).$fetch().$allow([403]).$asPromise()}}}})}]);var fr=Oe.Kb;Pe.a.factory(fr,["restmod","$q",function(e,t){var n=Ae.a.telemetryApiBasePath+"/v1/predict/ftue",r=Ae.a.telemetryApiBasePath+"/v1/predict/ftues";return e.model(n).mix({$extend:{Model:{setFtue:function(e){return this.$build().$send({method:"POST",url:this.$url()+"/"+e}).$asPromise()},delFtue:function(e){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e}).$asPromise()},delFtues:function(){return this.$build().$send({method:"DELETE",url:this.$url()}).$asPromise()},getFtue:function(e){var n=t.defer();return this.$build().$send({method:"GET",url:r,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){var r=t.data.filter((function(t){return t.componentKey===e}));r&&r.length?n.resolve({key:r[0].componentKey,value:""}):n.resolve(null)}else n.resolve(null)})),n.promise},getFtues:function(){var e=t.defer();return this.$build().$send({method:"GET",url:r,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){var n=[];t.data.forEach((function(e){n.push({key:e.componentKey,value:""})})),n&&n.length?e.resolve(n):e.resolve(null)}else e.resolve(null)})),e.promise}}}})}]);var hr=Oe.Mb;Pe.a.factory(hr,["restmod","$q",_e.d,function(e,t,n){var r=Ae.a.telemetryApiBasePath+"/v1/predict/notes";return e.model(r).mix({dateCreated:{serialize:"date"},dateModified:{serialize:"date"},isEdited:{mask:!0},isUndoing:{mask:!0},isAdding:{mask:!0},$extend:{Model:{getNotes:function(e,t){return(t=t||{}).timestamp=(new Date).getTime(),this.$collection(t,{$urlFor:function(){return r+"/students/"+e}}).$fetch(t).$allow([403]).$asPromise()},postNote:function(e,t){return this.$build().$send({method:"POST",url:r,data:{note:e,recipient:{recipientId:t.recipientId,email:t.email}}},(function(e){this.$unwrap(e.data)})).$asPromise()},updateNote:function(e,t){return this.$build().$send({method:"PUT",url:r,data:{noteId:e,note:t}},(function(e){return this.$unwrap(e.data)})).$asPromise()},deleteNote:function(e){return this.$build().$send({method:"DELETE",url:r+"/"+e},(function(e){this.$unwrap(e.data)})).$asPromise()},undoDeleteNote:function(e){return this.$build().$send({method:"PUT",url:r+"/"+e},(function(e){return e})).$asPromise()}}},$hooks:{"after-fetch-many":function(){this.forEach((function(e){Re.isDefined(e.dateModified)?e.isEdited=e.dateCreated.getTime()<e.dateModified.getTime():e.isEdited=!1;var t=Object(Ot.cloneDeep)(e.dateCreated);e.ui.dateCreated=t}))}}})}]);var gr=Oe.Ob;Pe.a.factory(gr,["restmod","$q",function(e,t){var n=Ae.a.telemetryApiBasePath+"/v1/predict/preferences";return e.model(n).mix({$extend:{Model:{setPreference:function(e,t){var n={componentKey:e,preference:t};return this.$build().$send({method:"POST",url:this.$url(),data:n}).$allow([403]).$asPromise()},delPreference:function(e){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e}).$asPromise()},delPreferences:function(){return this.$build().$send({method:"DELETE",url:this.$url()}).$asPromise()},getPreference:function(e){var r=t.defer();return this.$build().$send({method:"GET",url:n+"/"+e,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){var n=t.data.filter((function(t){return t.componentKey===e}));n&&n.length?r.resolve({componentKey:n[0].componentKey,value:n[0].value}):r.resolve(null)}else r.resolve(null)})).$allow([403]),r.promise},getPreferences:function(){var e=t.defer();return this.$build().$send({method:"GET",url:n,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){var n=[];t.data.forEach((function(e){n.push({componentKey:e.componentKey,preference:e.preference})})),n&&n.length?e.resolve(n):e.resolve([])}else e.resolve([])})).$allow([403]),e.promise}}}})}]);var vr=Oe.Lb;Pe.a.factory(vr,["restmod","$q",function(e,t){var n=Ae.a.telemetryApiBasePath+"/v1/predict/preferences/config";return e.model(n).mix({$extend:{Model:{getInstitutionPreference:function(e){var r=t.defer();return this.$build().$send({method:"GET",url:n+"/"+e},(function(t){if(t&&t.data){var n=t.data;n.name===e?r.resolve(n):r.resolve(null)}else r.resolve(null)})).$allow([403]),r.promise}}}})}]);var br=Oe.Hb;Pe.a.factory(br,["restmod","$q",function(e,t){var n=Ae.a.telemetryApiBasePath+"/v1/predict/customFieldSettings";return e.model(n).mix({$extend:{Model:{getCustomFieldSettings:function(){var e=t.defer();return this.$build().$send({method:"GET",url:n},(function(t){t&&t.data?e.resolve(t.data):e.resolve([])})),e.promise}}}})}]);var yr=Oe.Sb;Pe.a.factory(yr,["restmod",_e.d,function(e){var t=Ae.a.apiBasePath+"/public/v1/system/policies/privacy";return e.model(t).mix({$extend:{Model:{getPrivacyPolicy:function(){return this.$build().$send({method:"GET",url:this.$url()},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);var Sr=Oe.Tb,Cr="Respondus";Pe.a.factory(Sr,["restmod",function(e){var t=Ae.a.apiBasePath+"/public/v1/proctoring/services";return e.model(t).mix({})}]);var wr=Oe.Wb;Pe.a.factory(wr,["restmod","$q",function(e,t){var n=Ae.a.telemetryApiBasePath+"/v1/predict/courses/";return e.model(n).mix({$extend:{Model:{getRiskBucketDistribution:function(e){var r=t.defer();return this.$build().$send({method:"GET",url:""+n+e+"/riskBuckets"},(function(e){if(e&&e.data){var t=e.data;r.resolve(t)}else r.resolve(null)})).$allow([403]),r.promise}}}})}]);var kr=n("XfOu"),Ir=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Waiting=new t("WAITING"),t.Assigned=new t("ASSIGNED"),t.Running=new t("RUNNING"),t.Complete=new t("COMPLETE"),t.CompleteErrors=new t("COMPLETE_ERRORS"),t.Incomplete=new t("INCOMPLETE"),t}(Be.a),Tr=Oe.Yb;Pe.a.factory(Tr,["restmod",_e.d,function(e,t){return e.model(Ae.a.apiBasePath+"/v1/scheduledTasks").mix({$config:{primaryKey:"taskId"},startDate:{serialize:"date"},endDate:{serialize:"date"},isWaiting:function(){return Ir.Waiting.isEqualTo(this.taskStatus)}})}]);var Er=Oe.ac,$r=function(e){"stagedAttemptGrades"in e.data&&(e.data={results:e.data.stagedAttemptGrades})};Pe.a.factory(Er,["restmod",function(e){return e.model().mix({user:{hasOne:Oe.Ac},$hooks:{"after-request":$r},$extend:{Record:{toggleVisibility:function(){var e=this;return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.stagedAttemptId,data:{showFeedbackToStudent:!this.showFeedbackToStudent}},(function(t){e.showFeedbackToStudent=t.data.showFeedbackToStudent})).$then((function(){var t=e.$getPreviousVersion();t&&(t.showFeedbackToStudent=e.showFeedbackToStudent)}))}},Collection:{}}})}]);var Pr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Sender=new t("SENDER"),t.Receiver=new t("RECEIVER"),t}(Be.a),Ar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Completed=new t("completed"),t.InProgress=new t("in_progress"),t.Exempt=new t("exempt"),t.NeedsGrading=new t("needs_grading"),t}(Be.a),Or=Oe.bc;Pe.a.factory(Or,["restmod",_e.d,function(e,t){var n=Ae.a.apiBasePath+"/v1/streams";return e.model(n).mix({$extend:{Collection:{$fetch:function(){throw new Error("fetch StreamContent collection not supported")},$refresh:function(){throw new Error("refresh StreamContent collection not supported")},$create:function(){throw new Error("create StreamContent collection not supported")}},Record:{$fetch:function(e){return this.$decorate({"before-request":function(t){t.method="POST",t.data=e}},(function(){return this.$super()}))},$resolve:function(){throw new Error("resolve StreamContent not supported")},$save:function(){throw new Error("save StreamContent not supported")},$destroy:function(){throw new Error("destroy StreamContent not supported")}}},$hooks:{"before-request":function(e){e.timeout=3e4,e.headers={"Suppress-Session-Timestamp-Update":!0}}}})}]);var _r=Oe.dc;Pe.a.factory(_r,["restmod",_e.d,function(e,t){return e.model().mix({now:{serialize:"date"},$url:function(){return Ae.a.apiBasePath+"/v1/utilities/systemInfo"},$extend:{Record:{getLegacyToolUrl:function(e){if(e in this.classicUrls)return Qe.c(this.classicUrls[e]);throw new Error("Key "+e+" is not found in systemInfo.classicUrls")}}}})}]);var Dr=Oe.ec;Pe.a.factory(Dr,["restmod",_e.d,function(e,t){var n=Ae.a.apiBasePath+"/v1/systemPreferences";return e.model(n).mix({$config:{primaryKey:"key"}})}]);var xr=Oe.fc,Rr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.Standard=new t("STANDARD"),t.Important=new t("IMPORTANT"),t.Urgent=new t("URGENT"),t}(Be.a),Mr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.System=new t("SYSTEM"),t.Course=new t("COURSE"),t}(Be.a);Pe.a.factory(xr,["restmod",_e.d,function(e,t){var n=Ae.a.apiBasePath+"/v1/announcements";return e.model(n)}]);var Nr=Oe.gc;function jr(e){return e/60}Pe.a.factory(Nr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},$url:function(){return Ae.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/activityVsGrade"},$hooks:{"after-fetch":function(){this.data.forEach((function(e){return e.activity=jr(e.activity)}))}}})}]);var Lr=Oe.hc;Pe.a.factory(Lr,["restmod",function(e){var t=Ae.a.apiBasePath+"/v1";return e.model(t).mix({$config:{primaryKey:"contentId"},available:{serialize:"date"},firstOpened:{serialize:"date"},firstSave:{serialize:"date"},lastSave:{serialize:"date"},startedTime:{serialize:"date"},"submissions[].date":{serialize:"date"},$extend:{Collection:{getContentActivityInDetail:function(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentContentActivityInDetail"},(function(e){this.$unwrap(e.data)}))}},Record:{containsInvalidData:function(){return this.ui&&this.ui.containsInvalidData||!1}}}})}]);var Ur=Oe.ic;Pe.a.factory(Ur,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"courseActivity[].date":{serialize:"date"},$url:function(){return Ae.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseActivity"},$hooks:{"after-fetch":function(){this.courseActivity.forEach((function(e){e.activity=jr(e.activity),e.minScore=jr(e.minScore),e.maxScore=jr(e.maxScore),e.stdDev=jr(e.stdDev)}))}}})}]);var Gr=Oe.kc;Pe.a.factory(Gr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"currentStudent[].created":{serialize:"date"},"currentStudent[].dismissed":{serialize:"date"},$url:function(){return Ae.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/notifications"}})}]);var Fr=Oe.jc;Pe.a.factory(Fr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"courseGrades[].date":{serialize:"date"},$url:function(){return Ae.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseGrades"}})}]);var Br=Oe.lc;Pe.a.factory(Br,["restmod",function(e){var t=Ae.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionActivityReport:function(e,t,n){var r=n?this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity?groupId="+n:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity";return this.$build().$send({method:"GET",url:r},(function(e){this.$unwrap(e.data)}))}}}})}]);var qr=Oe.mc;Pe.a.factory(qr,["restmod",function(e){var t=Ae.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionXrayReport:function(e,t,n){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivityScore/"+n},(function(e){this.$unwrap(e.data)}))}}},modifyDate:{serialize:"date"}})}]);var Hr=Oe.nc;Pe.a.factory(Hr,["restmod",function(e){var t=Ae.a.apiBasePath+"/v1";return e.model(t).mix({lastOpened:{serialize:"date"},$extend:{Collection:{getMultimediaActivityInDetail:function(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaActivityInDetail"},(function(e){this.$unwrap(e.data)}))}}}})}]);var Vr=Oe.oc;Pe.a.factory(Vr,["restmod",function(e){var t=Ae.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getMultimediaStatistics:function(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaStatistics"},(function(e){this.$unwrap(e.data)}))}}}})}]);var zr=Oe.pc;Pe.a.factory(zr,["restmod",_e.d,function(e){return e.model(Ae.a.apiBasePath+"/v1/telemetry/notifications")}]);var Kr=Oe.qc;Pe.a.factory(Kr,["restmod",_e.d,function(e){return e.model().mix({$config:{primaryKey:"notificationId"},$url:function(){return Ae.a.apiBasePath+"/v1/telemetry/notifications/"+this.$pk+"/users"}})}]);var Jr=Oe.rc;Pe.a.factory(Jr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"studentActivity[].date":{serialize:"date"},$url:function(){return Ae.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentActivity"},$hooks:{"after-fetch":function(){this.studentActivity.forEach((function(e){return e.activity=jr(e.activity)}))}}})}]);var Wr=Oe.sc;Pe.a.factory(Wr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"studentGrades[].date":{serialize:"date"},$url:function(){return Ae.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentGrades"}})}]);var Qr=Oe.tc;Pe.a.factory(Qr,["restmod",_e.d,function(e){return e.model().mix({$url:function(){return Ae.a.apiBasePath+"/v1/telemetry/courses?filter=sufficientData"}})}]);var Yr=n("KiLF"),Zr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(Ge.__extends)(t,e),t.CurrentTerm=new t("current"),t.UpcomingTerm=new t("upcoming"),t}(Be.a),Xr=Oe.uc;Pe.a.factory(Xr,["restmod",_e.d,function(e,t){return e.model(Ae.a.apiBasePath+"/v1/terms").mix({startDate:{serialize:"date"},endDate:{serialize:"date"}})}]);var ei=n("/J7e"),ti=Oe.vc,ni="UltraUI.";Pe.a.factory(ti,["restmod",_e.d,function(e,t){var n=Ae.a.apiBasePath+"/v1/themes";return e.model(n).mix({ui:{mask:!0},getUsePrimaryColorOnAllBaseNav:function(){return ei.a(this.ui.usePrimaryColorOnAllBaseNav)},setUsePrimaryColorOnAllBaseNav:function(e){this.ui.usePrimaryColorOnAllBaseNav=ei.a(e)?"true":"false"},getUsePrimaryColorOnLogoBackground:function(){return ei.a(this.ui.usePrimaryColorOnLogoBackground)},setUsePrimaryColorOnLogoBackground:function(e){this.ui.usePrimaryColorOnLogoBackground=ei.a(e)?"true":"false"},$config:{primaryKey:"themeId"},$extend:{Record:{$fetch:function(){return this.$decorate({"before-request":function(e){e.url=n+"/"+this.$pk.themeId+"/settings"}},(function(){return this.$super()}))},$save:function(){return this.$decorate({"before-request":function(e){var t=this;this.settings=[],Object.keys(this.ui).forEach((function(e){t.settings.push({key:ni+e,value:t.ui[e]})})),e.url=n+"/"+this.$pk.themeId+"/settings",e.data.settings=this.settings}},(function(){return this.$super()}))}},Model:{getDefault:function(){return this.$new({themeId:"default"}).$fetch()}}},$hooks:{"after-feed":function(){var e=this;this.settings.forEach((function(t){if(t&&t.key){var n=t.key.replace(ni,"");e.ui[n]=t.value}}))}}})}]);var ri=Oe.xc;Pe.a.factory(ri,["restmod",function(e){return e.model().mix({$extend:{Collection:{getToolById:function(e){return Ot.find(this,["identifier",e])},isToolAvailable:function(e){return this.$build().$send({method:"GET",url:this.$url()+"/"+e}).$allow([403]).$asPromise().then((function(e){var t;return!!(e.$response.data&&(null===(t=e.$response.data.toolEnabledSetting)||void 0===t?void 0:t.isAvailable))}))}}}})}]);var ii=Oe.Zb;Pe.a.factory(ii,["restmod",function(e){return e.model().mix({isTinCan:function(){return!(!this.learningStandard||!Ct.ScormLearningStandard.TINCAN.isEqualTo(this.learningStandard))}})}]);var oi=Oe.wc;Pe.a.factory(oi,["restmod",_e.d,function(e,t){return e.model(Ae.a.apiBasePath+"/v1/tools")}]);var si=Oe.cc;Pe.a.factory(si,["restmod",_e.d,function(e,t){return e.model()}]);var ai=Oe.yc;Pe.a.factory(ai,["restmod",_e.d,function(e,t){var n=Ae.a.apiBasePath+"/v1/trial/supportTickets";return e.model(n)}]);var ui=Oe.zc;Pe.a.factory(ui,["restmod",_e.d,function(e,t){return e.model().mix({})}]),n.d(t,"Q",(function(){return ci})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return Ue})),n.d(t,"e",(function(){return s})),n.d(t,"ob",(function(){return Ve})),n.d(t,"f",(function(){return Ke})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return c})),n.d(t,"n",(function(){return l})),n.d(t,"z",(function(){return d})),n.d(t,"o",(function(){return ht})),n.d(t,"p",(function(){return p})),n.d(t,"r",(function(){return Ct})),n.d(t,"q",(function(){return m})),n.d(t,"u",(function(){return f})),n.d(t,"x",(function(){return $t})),n.d(t,"s",(function(){return h})),n.d(t,"t",(function(){return g})),n.d(t,"v",(function(){return v})),n.d(t,"w",(function(){return b})),n.d(t,"y",(function(){return Nt})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return S})),n.d(t,"l",(function(){return C})),n.d(t,"A",(function(){return w})),n.d(t,"B",(function(){return k})),n.d(t,"C",(function(){return dn})),n.d(t,"H",(function(){return I})),n.d(t,"E",(function(){return T})),n.d(t,"F",(function(){return yn})),n.d(t,"m",(function(){return E})),n.d(t,"G",(function(){return In})),n.d(t,"I",(function(){return Tn})),n.d(t,"D",(function(){return $})),n.d(t,"J",(function(){return P})),n.d(t,"K",(function(){return A})),n.d(t,"L",(function(){return O})),n.d(t,"M",(function(){return _})),n.d(t,"N",(function(){return D})),n.d(t,"P",(function(){return x})),n.d(t,"O",(function(){return R})),n.d(t,"R",(function(){return M})),n.d(t,"S",(function(){return Bn})),n.d(t,"T",(function(){return N})),n.d(t,"U",(function(){return j})),n.d(t,"Y",(function(){return L})),n.d(t,"W",(function(){return U})),n.d(t,"V",(function(){return G})),n.d(t,"X",(function(){return F})),n.d(t,"Z",(function(){return B})),n.d(t,"ab",(function(){return q})),n.d(t,"db",(function(){return H})),n.d(t,"jb",(function(){return V})),n.d(t,"lb",(function(){return z})),n.d(t,"cb",(function(){return K})),n.d(t,"kb",(function(){return J})),n.d(t,"hb",(function(){return W})),n.d(t,"eb",(function(){return Q})),n.d(t,"gb",(function(){return Y})),n.d(t,"ib",(function(){return Z})),n.d(t,"fb",(function(){return X})),n.d(t,"bb",(function(){return ee})),n.d(t,"mb",(function(){return te})),n.d(t,"nb",(function(){return ne})),n.d(t,"pb",(function(){return re})),n.d(t,"qb",(function(){return kr})),n.d(t,"rb",(function(){return ie})),n.d(t,"sb",(function(){return oe})),n.d(t,"ub",(function(){return se})),n.d(t,"vb",(function(){return ae})),n.d(t,"xb",(function(){return ue})),n.d(t,"yb",(function(){return ce})),n.d(t,"zb",(function(){return le})),n.d(t,"Ab",(function(){return de})),n.d(t,"Cb",(function(){return pe})),n.d(t,"Bb",(function(){return me})),n.d(t,"Db",(function(){return fe})),n.d(t,"Eb",(function(){return he})),n.d(t,"Fb",(function(){return ge})),n.d(t,"Gb",(function(){return ve})),n.d(t,"Hb",(function(){return be})),n.d(t,"Ib",(function(){return ye})),n.d(t,"Jb",(function(){return Se})),n.d(t,"Kb",(function(){return Ce})),n.d(t,"Lb",(function(){return we})),n.d(t,"Mb",(function(){return ke})),n.d(t,"Nb",(function(){return Ie})),n.d(t,"wb",(function(){return Te})),n.d(t,"Ob",(function(){return $e})),n.d(t,"Pb",(function(){return Dt})),n.d(t,"tb",(function(){return Ee}));var ci=Pe.a.name},pqmn:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.ROOT=new t("ROOT"),t.INTERACTIVE=new t("INTERACTIVE"),t.INDIRECT=new t("INDIRECT"),t}(n.n(i).a);t.a=o},"q/wk":function(e,t,n){"use strict";var r=n("D57K"),i=n("td+C"),o=n("adx1"),s=n("gSji"),a=n("5LAh"),u=n("x9Ok"),c=n("TWlR"),l=function(e){function t(t,n,r){var i=e.call(this)||this;return i.integrationService=t,i.routeListenerService=n,i.createMessenger=r,i.updateRoute=function(e){i.currentRoute=e},i.registerAsHelpProvider=function(e,t){var n=a.c.getHelpProvider(e.id);if(!e.id||n)return n?console.warn("Cannot register provider: Provider already exists with an id of "+e.id):console.warn("Cannot register provider: no id was specified"),void i.integrationService.sendMessage({type:s.l,id:e.id,status:s.p.Failure},t);var r={iconUrl:e.iconUrl,providerId:e.id,providerType:e.providerType,integrationId:t.id,displayName:e.displayName};a.c.addHelpProvider(r),i.integrationService.sendMessage({type:s.l,id:e.id,status:s.p.Success,iconUrl:e.iconUrl},t);var o=a.c.getProviderByType(s.n.Auxiliary),u=a.c.getProviderByType(s.n.Primary);i.$emitEvent(i.helpChangedEvent,{auxiliaryProviders:o,primaryProviders:u})},i.helpChangedEvent="helpChanged",i.routeListenerService.subscribe(i.updateRoute),i}return Object(r.__extends)(t,e),t.prototype.init=function(){this.integrationService.addIntegrationMessageType(s.l,this.registerAsHelpProvider),this.helpRequestMessenger=this.createMessenger(s.m,{includeProcessingEvent:!1})},t.prototype.sendHelp=function(e,t){return Object(r.__awaiter)(this,void 0,Promise,(function(){return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.helpRequestMessenger.sendMessage({type:s.i,eventType:s.m,helpUrl:t,currentRouteName:this.currentRoute},e)];case 1:return n.sent(),[2]}}))}))},t}(o.a);t.a=new l(i.a,u.b,c.a)},q4pc:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-too-long.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-too-long">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-too-long.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},qOsI:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("PCGa");var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.base.calendar.routes";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("calendar-settings",{url:"/settings",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},require:function(){return Promise.all([n.e(0),n.e(631)]).then(n.bind(null,"OHPy"))},pageTitle:"base.calendar.settings.title"}).peekState("event-create",{url:"/event/create?selectedDate?calendarId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(0),n.e(3),n.e(20),n.e(2),n.e(7),n.e(9),n.e(12),n.e(31),n.e(27),n.e(65)]).then(n.bind(null,"V4Gf"))},pageTitle:"base.calendar.create.addEvent"}).peekState("event-edit",{url:"/event/edit/:calendarId/:itemSourceType/:itemSourceId?updateSeries&repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(0),n.e(3),n.e(20),n.e(2),n.e(7),n.e(9),n.e(12),n.e(31),n.e(27),n.e(65)]).then(n.bind(null,"V4Gf"))},pageTitle:"base.calendar.create.editEvent"}).peekState("event-view",{url:"/event/view/:calendarId/:itemSourceType/:itemSourceId?repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},require:function(){return Promise.all([n.e(2),n.e(7),n.e(12),n.e(607)]).then(n.bind(null,"dWqS"))},pageTitle:"base.calendar.create.viewEvent"}).peekState("class-schedule",{url:"/class-schedule?selectedDate&courseId",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(3),n.e(1),n.e(12),n.e(27),n.e(633)]).then(n.bind(null,"TayV"))},pageTitle:"base.calendar.schedule.classSchedule"}).peekState("office-hours",{url:"/office-hours?selectedDate?calendarId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(0),n.e(3),n.e(20),n.e(2),n.e(7),n.e(9),n.e(12),n.e(31),n.e(27),n.e(65)]).then(n.bind(null,"V4Gf"))},pageTitle:"base.calendar.addOfficeHours"})}])},qZC8:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.placements.inlineGradableModalTitle"\n          analytics-id-tag-prefix="course.placements.basePlacement">\n  <div name="modal-contents">\n    <p bb-translate>course.placements.inlineGradableSupport</p>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          ng-click="dismissCallback()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="course.placements.basePlacement.ok.button">\n    global.ok\n  </button>\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n</bb-modal>'},qhd3:function(e,t,n){"use strict";n.r(t),n.d(t,"KnownSystemRole",(function(){return f})),n.d(t,"VisibilityScopeEnum",(function(){return h})),n.d(t,"Gender",(function(){return g})),n.d(t,"EducationLevel",(function(){return v})),n.d(t,"sortCompareUsers",(function(){return b})),n.d(t,"serviceName",(function(){return y})),n.d(t,"USER_API_PATH",(function(){return S}));var r=n("D57K"),i=(n("QLzv"),n("nsO7")),o=n("wHJ2"),s=n("5MwF"),a=n("Rjd/"),u=n("yCC5"),c=n("nkTj"),l=n("g66W"),d=n("nbDY"),p=n.n(d),m=n("cYWG"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.AccountAdmin=new t("ACCOUNT_ADMIN"),t.CourseCreator=new t("COURSE_CREATOR"),t.CourseSupport=new t("COURSE_SUPPORT"),t.Guest=new t("GUEST"),t.Integration=new t("INTEGRATION"),t.Observer=new t("OBSERVER"),t.Portal=new t("PORTAL"),t.SystemAdmin=new t("SYSTEM_ADMIN"),t.SystemSupport=new t("SYSTEM_SUPPORT"),t.User=new t("USER"),t.Default=new t("DEFAULT"),t}(p.a),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Nobody=new t("NOBODY"),t.Classmates=new t("CLASSMATES"),t.Everyone=new t("EVERYONE"),t.School=new t("EVERYONE"),t}(p.a),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Male=new t("MALE"),t.Female=new t("FEMALE"),t.Unknown=new t("UNKNOWN"),t}(p.a),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.K8=new t("K_8"),t.HighSchool=new t("HIGH_SCHOOL"),t.Freshman=new t("FRESHMAN"),t.Sophomore=new t("SOPHOMORE"),t.Junior=new t("JUNIOR"),t.Senior=new t("SENIOR"),t.GraduateSchool=new t("GRADUATE_SCHOOL"),t.PostGraduateSchool=new t("POST_GRADUATE_SCHOOL"),t.Unknown=new t("UNKNOWN"),t}(p.a);function b(e,t){if(!e&&!t)return 0;if(e&&!t)return-1;if(!e&&t)return 1;if(e&&t){if(e.familyName&&!t.familyName)return-1;if(!e.familyName&&t.familyName)return 1;if((e.familyName||t.familyName)&&e.familyName!==t.familyName)return e.familyName&&t.familyName?e.familyName.localeCompare(t.familyName):0;if(!e.givenName&&!t.givenName)return 0;if(e.givenName&&!t.givenName)return-1;if(!e.givenName&&t.givenName)return 1;if(!e.givenName&&!t.givenName||e.givenName===t.givenName){if(e.userName&&!t.userName)return-1;if(!e.userName&&t.userName)return 1;if(!e.userName&&!t.userName)return 0;if(e.userName&&t.userName)return e.userName.localeCompare(t.userName)}else if(e.givenName&&t.givenName)return e.givenName.localeCompare(t.givenName)}return 0}var y=u.Ac,S=s.a.apiBasePath+"/v1/users";a.a.factory(y,["$http","restmod","$q",c.d,function(e,t,n,r){var s=t.model(S).mix({calendarItems:{hasMany:u.Eb},memberships:{hasMany:u.N,hooks:{"before-fetch-many":function(t){t.params=t.params||{},i.isUndefined(t.params.includeCount)&&(t.params.includeCount=!0);var n=t.params.limit,r=t.params.offset,s=function(t,i,a){return e.get(t,{params:i}).then((function(e){if(!(e&&200===e.status&&e.data&&e.data.results&&e.data.paging))return e;a=a||[];var i=e.data.results,u=e.data.paging;if(!((a=a.concat(i)).length>=n||i.length<u.limit)){var c=o.extend(o.copy(e.config.params),{offset:(r||0)+a.length});return a.length<n&&(c.limit=n-a.length),delete c.includeCount,s(t,c,a)}return e.data.results=a,e.data.paging.limit=n,e.data.paging.offset=r,e}))};t.cache={get:function(){return s(t.url,t.params)}}}}},blocks:{hasMany:u.h},birthDate:{serialize:"date"},isGuest:function(){return f.Guest.isEqualTo(this.systemRoles&&this.systemRoles[0])},isAnonymousStudent:function(){return this.ui&&this.ui.anonymousStudent},isInstructor:function(){return this.memberships.some((function(e){return e.isActAsInstructorMembership()}))},isStudent:function(){return this.memberships.some((function(e){return e.isStudentMembership()}))},getInitials:function(){if(this.givenName&&this.familyName&&!l.i(this.givenName)&&!l.i(this.familyName)&&!l.j(this.givenName)&&!l.j(this.familyName))return(""+this.givenName.charAt(0)+this.familyName.charAt(0)).toLowerCase()},$extend:{Collection:{batchGetCollection:function(e){var t=n.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},(function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise}}}});return s.getUserConfiguration=function(){var e,t=n.defer();return this.$collection().$send({method:"GET",url:this.$url()+"/fieldsConfiguration",params:(e={visibleOnly:!0},e[m.a]=Number.MAX_VALUE,e)},(function(e){t.resolve(e.data)}),(function(e){t.reject(e)})),t.promise},s.mixinUsers=r.getDataMixin((function(e,t){return s.findMany(e,t,[404])}),"userId","user"),s.getAnonymousStudent=function(e){return s.$build({id:e,familyName:"",givenName:"",ui:{anonymousStudent:!0,anonymousStudentId:e}})},s}])},qtHE:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("Sa5G"),o=n("wQOJ"),s=n("TnpK"),a="ultra.base.institution-page.routes";r.module(a,[s.b]).config([s.c,function(e){e.peekState("allLinks",{url:"/all?moduleId",require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(712)]).then(n.bind(null,"Dovs"))},pageTitle:"base.nav.institutionPage",resolve:{IP:[o.b,s.d,function(e,t){var n=t.nextParams;return e.getModuleIsVisible(n.moduleId).then((function(e){if(!e)return t.goToRoute("base.institution-page")}))}]}}).peekState("editPageImage",{systemEntitlement:i.E.ModifyPortalOptionsModuleManagement,url:"/editPage?type",require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(644)]).then(n.bind(null,"JKPj"))},pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-page-image-peek"}).peekState("editModule",{systemEntitlement:i.E.ModifyPortalOptionsModuleManagement,url:"/edit?moduleId&expandRoles",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(708)]).then(n.bind(null,"axDv"))},peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("createModule",{systemEntitlement:i.E.CreatePortalOptionsModuleManagement,url:"/create?type&sequence",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(707)]).then(n.bind(null,"57Mq"))},peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("linkImage",{systemEntitlement:i.E.ModifyPortalOptionsModuleManagement,url:"/linkImage?linkId",require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(645)]).then(n.bind(null,"kHrt"))},pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-link-image-peek"}).peekState("contentCollection",{systemEntitlement:i.E.ModifyPortalOptionsModuleManagement,url:"/contentCollection",require:function(){return n.e(628).then(n.bind(null,"HgOS"))},pageTitle:"base.nav.institutionPage",panelClass:"full",peekViewName:"ip-content-collection-peek"}).peekState("browserSettings",{systemEntitlement:i.E.ModifyPortalOptionsModuleManagement,url:"/browserSettings",require:function(){return n.e(679).then(n.bind(null,"usdo"))},pageTitle:"base.nav.institutionPage",panelClass:"peek"})}])},r6n2:function(e,t,n){"use strict";var r=n("D57K"),i=n("nbDY"),o=n.n(i),s=n("Y3OE"),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.handle=t,r.contentHandler=n,r}return Object(r.__extends)(t,e),t.parseByContentHandler=function(e){switch(e){case t.Assignment.contentHandler:return t.Assignment;case t.Test.contentHandler:return t.Test;case t.Survey.contentHandler:return t.Survey;case t.Discussion.contentHandler:return t.Discussion;case t.ClassicAssignment.contentHandler:return t.ClassicAssignment;case t.Scorm.contentHandler:return t.Scorm}},t.Assignment=new t("assignment",s.a.UltraAssignment.toString()),t.Survey=new t("survey",s.a.SurveyLink.toString()),t.Test=new t("test",s.a.TestLink.toString()),t.Discussion=new t("discussion",s.a.Discussion.toString()),t.ClassicAssignment=new t("classicAssignment",s.a.ClassicAssignment.toString()),t.Scorm=new t("scorm",s.a.RusticiScorm.toString()),t}(o.a);t.a=a},rEGj:function(e,t,n){"use strict";n.r(t);n("GiEq")},rEZX:function(e,t,n){"use strict";var r=n("pjml"),i=function(){function e(e,t){t&&r.I.ScaleType.Text.isEqualTo(t.scaleType)?this.isNumeric=!1:this.isNumeric=!Number.isNaN(parseFloat(e)),this.grade=e}return e.prototype.getGrade=function(){return this.grade},e}(),o=function(e,t,n){this.column=e,this.courseId=e.courseId,this.gradeValue=new i(t,n)};t.a=o},rkMR:function(e,t,n){},rmtn:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wHJ2"),i=n("Sa5G"),o=n("0JpG"),s=n("TnpK"),a="ultra.base.admin.brand.routes";r.module(a,[o.moduleName,s.b]).config([s.c,function(e){e.peekState("brands",{panelClass:"full",allowChildPeekStates:!0,url:"/brands",systemEntitlement:i.D.ViewBrands,require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(42),n.e(709)]).then(n.bind(null,"olMq"))},pageTitle:"base.admin.branding.brandList.title",peekStates:["create-brand","brand-detail"]}).peekState("create-brand",{panelClass:"full",allowChildPeekStates:!0,url:"/create",systemEntitlement:i.D.CreateBrand,require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(42),n.e(144)]).then(n.bind(null,"3ay5"))},pageTitle:"base.admin.branding.createBrand.title",peekStates:["colorSelection"]}).peekState("brand-detail",{panelClass:"full",allowChildPeekStates:!0,url:"/brand/:brandId",systemEntitlement:i.D.ViewBrands,require:function(){return Promise.all([n.e(0),n.e(4),n.e(19),n.e(42),n.e(144)]).then(n.bind(null,"3ay5"))},pageTitle:"base.admin.branding.brandDetails.title",peekStates:["colorSelection"]})}])},rxY8:function(e,t,n){"use strict";var r=n("D57K"),i=(n("kj+S"),n("5iHu")),o=n("nsO7"),s=20,a=function(){function e(e,t){var n=this;this.element=e,this.settings=t,this.nextFrame=o.throttle((function(){window.requestAnimationFrame((function(){e.setAttribute("keyframe",n.state+"-"+("00"+(n.frame=Math.min(n.frame+1,s))).substr(-2)),n.frame<s?n.nextFrame():(n[n.state+"Callback"]||n.settings[n.state+"Callback"]||i.noop)()}))}),50),this.settings=i.extend({successCallback:i.noop,errorCallback:i.noop,canvasSize:54},t),i(e).width(this.settings.canvasSize).height(this.settings.canvasSize)}return e.prototype.start=function(){this.state="start",this.frame=1,this.startCallback=i.noop,this.nextFrame()},e.prototype.loadComplete=function(){var e=this;this.afterWaiting((function(){e.state="success",e.frame=1,e.nextFrame()}))},e.prototype.loadError=function(){var e=this;this.afterWaiting((function(){e.state="error",e.frame=1,e.nextFrame()}))},e.prototype.reset=function(){this.state="reset",this.frame=s,this.nextFrame()},e.prototype.afterWaiting=function(e){var t=this;"start"===this.state&&this.frame===s||"reset"===this.state?e():this.startCallback=function(){e(),t.startCallback=null}},e}();i.fn.inlineLoader=function(e){return this.addClass("xloader2").each((function(){this.InlineLoader=new a(this,e)})),this};var u=n("wHJ2");n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var c="ultra.components.services.spinner",l="spinner",d=function(){function e(e){this.$rootScope=e}return e.prototype.initInlineLoader=function(e,t){return e.inlineLoader(t),new p(e,this.$rootScope)},e.$inject=["$rootScope"],e}(),p=function(){function e(e,t){this.element=e,this.$rootScope=t}return e.prototype.start=function(){this.element[0].InlineLoader.start()},e.prototype.complete=function(){this.element[0].InlineLoader.loadComplete()},e.prototype.error=function(){this.element[0].InlineLoader.loadError()},e.prototype.reset=function(){this.element[0].InlineLoader.reset()},e.prototype.animate=function(e){var t=this;this.start(),e.then((function(){t.complete()}),(function(){t.error()}))},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(d);u.module(c,[]).service(l,d)},sNuB:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("JzsJ");var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.goal-alignment.router";r.module(s,[o.b]).config([o.c,function(e){e.peekState("goal-picker-legacy",{panelClass:"full",url:"/goalPickerLegacy",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/goal-alignment/goal")}]},require:function(){return n.e(630).then(n.bind(null,"8MxD"))},pageTitle:"course.goal-alignment.goal.header",params:{goalAlignableContent:null}})}])},saCP:function(e,t,n){},"sb+l":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("wHJ2"),i=n("Sa5G"),o=n("0JpG"),s=n("w9Zy"),a=n("jhBu"),u=n("pjml"),c=n("TnpK"),l="ultra.base.stream.routes";r.module(l,[o.moduleName,s.d,a.a,u.Q,c.b]).config([c.c,function(e){e.peekState("announcement",{url:"/announcement/:streamEntryId",require:function(){return Promise.all([n.e(0),n.e(20),n.e(9),n.e(31),n.e(614)]).then(n.bind(null,"/Lzo"))},pageTitle:"base.stream.entryTitle.announcement"}).peekState("stream-message",{url:"/message/:courseId/:conversationId",require:function(){return Promise.all([n.e(0),n.e(30),n.e(33),n.e(691)]).then(n.bind(null,"yVjE"))},pageTitle:"base.stream.entryTitle.message"}).peekState("content-group",{url:"/content/:streamEntryId",require:function(){return Promise.all([n.e(0),n.e(20),n.e(9),n.e(31),n.e(60),n.e(585)]).then(n.bind(null,"G506"))},resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/content/content")}]},pageTitle:"base.stream.content.pageTitle"}).peekState("notification-create",{abstract:!0,url:"/notification",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/notification")}],isAdmin:[a.b,function(e){return e.hasSystemEntitlement(i.D.ViewAdminTop).then((function(e){return e}))}]},panelClass:"full",require:function(){return Promise.all([n.e(3),n.e(125),n.e(657)]).then(n.bind(null,"s7sT"))},pageTitle:"base.stream.notification.create.pageTitle"}).peekState("notification-create.steps",{url:"/create",panelClass:"full",pageTitle:"base.stream.notification.create.pageTitle",views:{"notification-step1@":{require:function(){return Promise.all([n.e(0),n.e(126)]).then(n.bind(null,"At0Z"))}},"notification-step2@":{require:function(){return n.e(134).then(n.bind(null,"SPbX"))}}}}).peekState("notification-edit",{abstract:!0,url:"/notification",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/notification")}]},panelClass:"full",require:function(){return Promise.all([n.e(3),n.e(125),n.e(672)]).then(n.bind(null,"OhPa"))},pageTitle:"base.stream.notification.edit.pageTitle"}).peekState("notification-edit.steps",{url:"/edit",panelClass:"full",pageTitle:"base.stream.notification.edit.pageTitle",views:{"notification-step1@":{require:function(){return Promise.all([n.e(0),n.e(126)]).then(n.bind(null,"At0Z"))}},"notification-step2@":{require:function(){return n.e(134).then(n.bind(null,"SPbX"))}}}}).peekState("notification-history",{url:"/notification/history",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/notification")}]},panelClass:"full",require:function(){return n.e(619).then(n.bind(null,"Mc4O"))},pageTitle:"base.stream.notification.history.title",peekStates:["notification-edit"],peekViewName:"notification-history-base@"})}])},sgjL:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("e6jQ"),a=n("Q/M7"),u="ultraUi.components.services.postMessageDispatcher",c="postMessageDispatcher",l=function(){function e(e){var t=this;this.$window=e,this.eventHandlers={},this.eventListenerBound=!1,this.superEventHandler=function(e){e.origin===a.j()&&e.data&&e.data.messageId&&i.forOwn(t.eventHandlers,(function(t){t.messageId===e.data.messageId&&t.eventHandler(e.data,e.source)}))}}return e.prototype.callEventHandler=function(e,t){i.forOwn(this.eventHandlers,(function(n){n.messageId===e&&n.eventHandler(t,window)}))},e.prototype.registerEventHandler=function(e,t,n,r){var o=this;if(void 0===r&&(r=!1),r){var a=[];i.forOwn(this.eventHandlers,(function(t,n){t.messageId===e&&a.push(n)})),a.forEach((function(e){o.removeEventHandler(e)}))}var u=s.a();this.eventHandlers[u]={eventHandler:t,messageId:e},this.handleEventListener(),n.$on("$destroy",(function(){o.removeEventHandler(u),o.handleEventListener()}))},e.prototype.removeEventHandler=function(e){this.eventHandlers[e]&&delete this.eventHandlers[e]},e.prototype.getDispatcherStatus=function(){return{count:Object.keys(this.eventHandlers).length,bound:this.eventListenerBound}},e.prototype.testDispatcherEventHandler=function(e){this.superEventHandler(e)},e.prototype.handleEventListener=function(){Object.keys(this.eventHandlers).length>0?this.eventListenerBound||this.addEventListener():this.removeEventListener()},e.prototype.addEventListener=function(){this.$window.addEventListener("message",this.superEventHandler,!1),this.eventListenerBound=!0},e.prototype.removeEventListener=function(){this.$window.removeEventListener("message",this.superEventHandler),this.eventListenerBound=!1},e.$inject=["$window"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(l);o.module(u,[]).service(c,l)},spHl:function(e,t,n){var r={"./ar-sa/_combined":["805C",75],"./ar-sa/_combined.json":["805C",75],"./cs-cz/_combined":["p7mG",76],"./cs-cz/_combined.json":["p7mG",76],"./cy-gb/_combined":["jeLm",77],"./cy-gb/_combined.json":["jeLm",77],"./da-dk/_combined":["2iiI",78],"./da-dk/_combined.json":["2iiI",78],"./de-de/_combined":["bR5d",79],"./de-de/_combined.json":["bR5d",79],"./en-au/_combined":["FPgK",81],"./en-au/_combined.json":["FPgK",81],"./en-cd/_combined":["D2Gb",82],"./en-cd/_combined.json":["D2Gb",82],"./en-gb/_combined":["fX7R",83],"./en-gb/_combined.json":["fX7R",83],"./en-sa/_combined":["x0Fz",84],"./en-sa/_combined.json":["x0Fz",84],"./en-sb/_combined":["WerP",85],"./en-sb/_combined.json":["WerP",85],"./en-sc/_combined":["bwBR",86],"./en-sc/_combined.json":["bwBR",86],"./en-sm/_combined":["8Rqa",87],"./en-sm/_combined.json":["8Rqa",87],"./en-us-k12/_combined":["TfEl",88],"./en-us-k12/_combined.json":["TfEl",88],"./en-us-pro/_combined":["SQ9M",89],"./en-us-pro/_combined.json":["SQ9M",89],"./en-us/_combined":["pVoq",142],"./en-us/_combined.json":["pVoq",142],"./en-za/_combined":["7bwu",90],"./en-za/_combined.json":["7bwu",90],"./en/_combined":["JOlw",80],"./en/_combined.json":["JOlw",80],"./es-es/_combined":["qCZ9",91],"./es-es/_combined.json":["qCZ9",91],"./fr-fr/_combined":["SMTA",92],"./fr-fr/_combined.json":["SMTA",92],"./it-it/_combined":["mwd4",93],"./it-it/_combined.json":["mwd4",93],"./ja-jp/_combined":["BVZK",94],"./ja-jp/_combined.json":["BVZK",94],"./ko-kr/_combined":["/x4r",95],"./ko-kr/_combined.json":["/x4r",95],"./ms-my/_combined":["YOK3",96],"./ms-my/_combined.json":["YOK3",96],"./nb-no/_combined":["oNI2",97],"./nb-no/_combined.json":["oNI2",97],"./nl-nl/_combined":["7Mff",98],"./nl-nl/_combined.json":["7Mff",98],"./nn-no/_combined":["pU4P",99],"./nn-no/_combined.json":["pU4P",99],"./pl-pl/_combined":["395X",100],"./pl-pl/_combined.json":["395X",100],"./pt-br/_combined":["LehD",101],"./pt-br/_combined.json":["LehD",101],"./ru-ru/_combined":["lC96",102],"./ru-ru/_combined.json":["lC96",102],"./sv-se/_combined":["JSyn",103],"./sv-se/_combined.json":["JSyn",103],"./th-th/_combined":["S6Bf",104],"./th-th/_combined.json":["S6Bf",104],"./tr-tr/_combined":["3Rba",105],"./tr-tr/_combined.json":["3Rba",105],"./zh-cn/_combined":["qOHB",106],"./zh-cn/_combined.json":["qOHB",106],"./zh-tw/_combined":["G1jo",107],"./zh-tw/_combined.json":["G1jo",107]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n.t(i,3)}))}i.keys=function(){return Object.keys(r)},i.id="spHl",e.exports=i},sqUP:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-insufficient-storage.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-insufficient-storage">\n  <div name="modal-contents">\n    <div>\n      <p bb-translate>components.services.error-modal.error-insufficient-storage.information</p>\n    </div>\n    <div>\n      <p bb-translate>components.services.error-modal.error-insufficient-storage.description</p>\n    </div>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},"t04/":function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-course_catalog_default",use:"icon-small-course_catalog_default-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-course_catalog_default"><path d="M5 14.5c-2 1.0446-4 0-4 0v-13c2-1 4 0 4 0v13zM15 14.5c-2 1.125-4 0-4 0v-13s2-1 4 0v13zM8 11v1m0-7v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 14.5357c-3 1.0447-6 0-6 0V1.5s3-1 6 0v13.0357z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},t3AZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("0JpG"),o="ultra.components.directives.translateAttrsDirective",s="bbTranslateAttrs",a="translateAttrsValues",u=function(){function e(e,t,n,r,i,o){var u=this;this.$q=e,this.bbLocalize=t,this.scope=n,this.element=r,this.attrs=i,this.origAttrs=o,this.currentAttrs={},this.currentValues={},this.getOrigAttrsString=function(){return u.origAttrs[s]},this.getOrigValuesString=function(){return u.origAttrs[a]},this.getAttrsString=function(){return u.attrs[s]},this.getValuesString=function(){return u.attrs[a]},this.updateValues=function(){return Object.assign(u.currentValues,u.scope.$eval(u.getValuesString()))};var c=!0;this.isOnetimeBind(this.getOrigAttrsString())?this.updateAttrs():(this.scope.$watch(this.updateAttrs.bind(this),this.translate.bind(this),!0),c=!1),this.isValuesStringDefined()&&!this.isOnetimeBind(this.getOrigValuesString())&&(this.scope.$watch(this.updateValues.bind(this),this.translate.bind(this),!0),c=!1);var l=n.$root.$on("$translateChangeSuccess",this.translate.bind(this));n.$on("$destroy",l),c&&this.translate()}return e.prototype.updateAttrs=function(){return Object.assign(this.currentAttrs,this.scope.$eval(this.getAttrsString()))},e.prototype.isValuesStringDefined=function(){return null!=this.getOrigValuesString()},e.prototype.isOnetimeBind=function(e){return 0===e.indexOf("::")},e.prototype.translate=function(){var e=this,t={},n=this.bbLocalize.getLocale(this.scope);r.forEach(this.currentAttrs,(function(r,i){t[i]=e.bbLocalize.translate({locale:n,key:r,params:e.currentValues,noWrap:!0,noEscape:!0})})),this.$q.all(t).then((function(t){e.element.attr(t)}))},e}(),c=function(){function e(e,t){var n=this;this.$q=e,this.bbLocalize=t,this.restrict="A",this.scope=!1,this.compile=function(e,t){t[s];return function(e,r,i){return new u(n.$q,n.bbLocalize,e,r,i,t)}}}return e.$inject=["$q",i.serviceName],e}();r.module(o,[i.moduleName]).directive(s,["$injector",function(e){return e.instantiate(c)}])},t6LE:function(e,t,n){"use strict";n.r(t);var r,i=n("D57K"),o=(n("QLzv"),n("nsO7")),s=n("5MwF"),a=n("nbDY"),u=n.n(a),c=n("vYaK"),l=n("yCC5"),d=n("pjml"),p=n("Rjd/"),m=n("JrDC"),f=n("wgY5"),h=n("JfV0"),g=n("A0nf"),v=n("nkTj"),b=n("94iD"),y=n("6vR2"),S=n("817J"),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Completed=new t("COMPLETED"),t.NeedsPosting=new t("NEEDS_POSTING"),t.NothingToPost=new t("NOTHING_TO_POST"),t}(u.a);n.d(t,"OverrideStatus",(function(){return r})),n.d(t,"moduleName",(function(){return w})),n.d(t,"serviceName",(function(){return k})),n.d(t,"ToolAttemptDetailItemEx",(function(){return I})),n.d(t,"AttemptStatus",(function(){return T})),n.d(t,"AssessmentType",(function(){return S.a})),n.d(t,"AttemptsPostingStatus",(function(){return C})),function(e){e.NoOverride="NO_OVERRIDE",e.FeedbackOverride="FEEDBACK_OVERRIDE",e.GradeFeedbackOverride="GRADE_FEEDBACK_OVERRIDE"}(r||(r={}));var w="ultra.components.services.models.grade.gradeAttempt",k=l.cb,I=function(){function e(t,n){var r=this;this.gradeAttempt=t,this.toolAttemptDetailItem=n,this._softTimeLimitDate=f(this.gradeAttempt.creationDate).add(this.softTimeLimitSecond,"seconds").toDate(),this._graceTimeLimitSecond=this.softTimeLimitSecond+e.GRACE_PERIOD_SECOND,this._graceDate=f(this.gradeAttempt.creationDate).add(this._graceTimeLimitSecond,"seconds").toDate(),this._isSubmittedInGracePeriod=f(this.gradeAttempt.attemptDate).isBetween(f(this.gradeAttempt.creationDate),f(this._graceDate)),this._hasAnswerIsModifiedInGracePeriod=o.filter(this.toolAttemptDetailItem.questionAttempts,(function(e){return!o.isEmpty(e.saveTimes)&&f(r.getLastModifyTime(e)).isBetween(r._softTimeLimitDate,r._graceDate)})).length>0}return Object.defineProperty(e.prototype,"elapsedDuration",{get:function(){return f.duration(f(this.gradeAttempt.attemptDate).diff(f(this.gradeAttempt.creationDate)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elapsedSec",{get:function(){return Math.ceil(this.elapsedDuration.asSeconds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"softTimeLimitSecond",{get:function(){return this.isTimerCompletionH()?this.toolAttemptDetailItem.softTimeLimitSeconds:this.toolAttemptDetailItem.timeLimitSec},enumerable:!0,configurable:!0}),e.prototype.needAttention=function(){return!o.isUndefined(this.toolAttemptDetailItem.timeLimitSec)&&(this.elapsedSec>this._graceTimeLimitSecond||this._isSubmittedInGracePeriod&&this._hasAnswerIsModifiedInGracePeriod)},e.prototype.getExceedTime=function(){return Math.floor(f.duration(this.elapsedSec-this.softTimeLimitSecond,"seconds").asMinutes())},e.prototype.isCompleted=function(){return this.gradeAttempt.isCompleted()},e.prototype.isTimerCompletionH=function(){return d.d.TimerCompletion.H.isEqualTo(this.toolAttemptDetailItem.timerCompletion)},e.prototype.isTimerCompletionC=function(){return d.d.TimerCompletion.C.isEqualTo(this.toolAttemptDetailItem.timerCompletion)},e.prototype.getLastModifyTime=function(e){return o.maxBy(e.saveTimes,(function(e){return e.date})).date},e.prototype.isAnsweredAfterSoftTimeLimit=function(e){return!o.isEmpty(e.saveTimes)&&f(this.getLastModifyTime(e)).isAfter(this._softTimeLimitDate)},e.prototype.getQuestionsAnsweredAfterSoftTimeLimit=function(){var e=this;return o.filter(this.toolAttemptDetailItem.questionAttempts,(function(t){return e.isAnsweredAfterSoftTimeLimit(t)}))},e.GRACE_PERIOD_SECOND=60,e}(),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.NotAttempted=new t("NOT_ATTEMPTED"),t.Abandoned=new t("ABANDONED"),t.InProgress=new t("IN_PROGRESS"),t.Suspended=new t("SUSPENDED"),t.Canceled=new t("CANCELED"),t.NeedsGrading=new t("NEEDS_GRADING"),t.Completed=new t("COMPLETED"),t.InMoreProgress=new t("IN_MORE_PROGRESS"),t.NeedsMoreGrading=new t("NEEDS_MORE_GRADING"),t}(u.a),E=function(e){o.forEach(e,(function(e,t){e.timeLimitSec=e.timeLimitSec||e.timeLimitSeconds}))};p.a.factory(k,["restmod",v.d,c.serviceName,"$ngRedux",function(e,t,n,i){return e.model().mix({creationDate:{serialize:"date"},modifiedDate:{serialize:"date"},attemptDate:{serialize:"date"},attemptFirstGradedDate:{serialize:"date"},attemptLastGradedDate:{serialize:"date"},originality:{hasOne:l.ab,path:"submissionResults"},assessment:{hasOne:l.f,path:"assessment"},stagedAttemptGrades:{hasMany:l.ac,path:"stagedAttemptGrades"},$hooks:{"after-fetch":function(){E(this.toolAttemptDetail)},"after-fetch-many":function(){o.forEach(this,(function(e){return E(e.toolAttemptDetail)}))},"after-save":function(e){var t=Object(y.a)(e.data);i.dispatch(h.actions.gradebookAttempt.setGradeAttemptInStore(t))}},$extend:{Scope:{$destroyUrlFor:function(e){return s.a.apiBasePath+"/v1/courses/"+m.a(n,e.$scope)+"/gradebook/attempts/"+e.id}},Record:{isPostable:function(){return this.readyToPost&&(T.NeedsGrading.isEqualTo(this.status)||T.NeedsMoreGrading.isEqualTo(this.status))},isCompleted:function(){return T.Completed.isEqualTo(this.status)},isGraded:function(){return this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade)||this.readyToPost},isGradable:function(e){var t=this.getToolAttemptDetailItem(e);return t&&t.assessment&&!t.assessment.hasAnswerableQuestions},isInProgress:function(){return T.InProgress.isEqualTo(this.status)||T.InMoreProgress.isEqualTo(this.status)},isSubmitted:function(){return!this.isInProgress()},isNeedsGrading:function(){return T.NeedsGrading.isEqualTo(this.status)||T.NeedsMoreGrading.isEqualTo(this.status)},isReconciled:function(){return null!=this.reconciliationMode},getToolAttemptDetailItem:function(e){return this.toolAttemptDetail?this.toolAttemptDetail[e.toString()]:null},getToolAttemptDetailItemEx:function(e){var t=this.getToolAttemptDetailItem(e);return null!=t?new I(this,t):null},getTimedTestAttemptDetail:function(){var e=this.getToolAttemptDetailItem(g.a.Test);if(null==e)return null;var t={elapsedSec:e.elapsedSeconds,timeLimitSec:e.timeLimitSeconds,softLimitSec:e.softTimeLimitSeconds,timerCompletion:e.timerCompletion};return new b.a(t)},getFeedbackToUser:function(){return this.feedbackToUser},getGroupIndividualFeedbackToUser:function(){return this.groupAttemptId&&this.overrideStatus===r.FeedbackOverride?this.feedbackToUser:null},getLastFeedbackAuthor:function(){return this.lastFeedbackAuthor},isPrePostGrade:function(){return!this.isCompleted()||!this.readyToPost||!this.userId},isDisplayablePostedGrade:function(){return this.isCompleted()&&this.readyToPost&&null!=this.userId}},Collection:{getNumAttemptsToGrade:function(){return this.filter((function(e){return e.isNeedsGrading()&&!e.isPostable()})).length},getNumAttemptsToReconcile:function(){return this.getNumAttemptsToGrade()},getNumAttemptsToPost:function(){return this.filter((function(e){return e.isPostable()})).length},getNumAttemptsSubmittedLate:function(e){return this.filter((function(t){return t.isSubmitted()&&f(t.attemptDate).isAfter(e)})).length},getNumAttemptsSubmitted:function(){return this.filter((function(e){return e.isSubmitted()})).length},getNumOfGradedAttempts:function(){return this.filter((function(e){return e.isGraded()})).length},isAllGradedAndPosted:function(){return this.length>0&&this.every((function(e){return e.isCompleted()}))},getAttemptIndexById:function(e){return o.findIndex(this,(function(t){return t.id===e}))}}}})}])},t6zR:function(e,t,n){"use strict";var r,i,o=n("wDWF"),s=function(){function e(){}return e.getBasePageStorageKey=function(){return r||(r="ultra.ui.basepage."+o.a(e.userId)),r},e.getPeekPageStorageKey=function(){return i||(i="ultra.ui.peekpage."+o.a(e.userId)),i},e}();t.a=s},tPPx:function(e,t,n){"use strict";n.r(t),n.d(t,"COURSE_ROLES_LIMIT",(function(){return u})),n.d(t,"KnownCourseRoleIdentifier",(function(){return c})),n.d(t,"toBeLocalizedRoleLabels",(function(){return d})),n.d(t,"toBeLocalizedOrgRoleLabels",(function(){return p})),n.d(t,"serviceName",(function(){return m})),n.d(t,"USER_API_PATH",(function(){return f}));var r=n("D57K"),i=(n("QLzv"),n("5MwF")),o=n("Rjd/"),s=n("yCC5"),a=n("nbDY"),u=1e3,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.Instructor=new t("P"),t.Facilitator=new t("BB_FACILITATOR"),t.TeachingAssistant=new t("T"),t.Grader=new t("G"),t.CourseBuilder=new t("B"),t.Student=new t("S"),t.Guest=new t("U"),t}(n.n(a).a),l={S:0,T:1,B:2,G:3,BB_FACILITATOR:4,P:5,U:6},d={S:"global.course.role.S",P:"global.course.role.P",BB_FACILITATOR:"global.course.role.BB_FACILITATOR",T:"global.course.role.T",B:"global.course.role.B",G:"global.course.role.G",U:"global.course.role.U"},p={S:"global.organization.role.S",P:"global.organization.role.P",BB_FACILITATOR:"global.organization.role.BB_FACILITATOR",T:"global.organization.role.T",B:"global.organization.role.B",G:"global.organization.role.G",U:"global.organization.role.U"},m=s.S,f=i.a.apiBasePath+"/v1/roles/courseRoles";o.a.factory(m,["restmod",function(e){return e.model(f).mix({localizedCourseName:{mask:!0},$extend:{Collection:{loadLocalizedNames:function(e){return this.forEach((function(t){t.isRemovable?t.localizedRoleName=e?t.orgName.rawValue:t.courseName.rawValue:t.localizedRoleName=e?"global.organization.role."+t.identifier.toString():"global.course.role."+t.identifier.toString()})),this},sortByStudentFirst:function(e){return this.$action((function(){this.sort((function(t,n){var r,i,o=t.identifier.toString(),s=n.identifier.toString();return o in l&&s in l?l[o]-l[s]:o in l&&!(s in l)?-1:!(o in l)&&s in l?1:("organization"===e?(r=t.orgName.languageKey,i=n.orgName.languageKey):(r=t.courseName.languageKey,i=n.courseName.languageKey),r>i?1:r<i?-1:0)}))}))}}}})}])},"tb/u":function(e,t){e.exports='<div>\n  <bb-user-avatar ng-repeat="user in displayUsers" user="user"></bb-user-avatar>\n</div>'},tcaZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("wHJ2"),o=n("In+A"),s=n("5KgE"),a=n("aHpC"),u="ultra.components.directives.firstTimeContainer",c=function(){function e(e){this.firstTimeHelper=e,this.manager=o.guidanceManager}return e=Object(r.__decorate)([Object(r.__param)(0,Object(a.b)(s.b))],e)}(),l=function(){this.restrict="AE",this.controller=c,this.link=function(e,t,n,r){r.manager.startQueue(),e.$on("hide-ftue-component",(function(e,t){r.manager.hideComponent(t)}))}};i.module(u,[s.a]).directive("bbFirstTimeContainer",["$injector",function(e){return e.instantiate(l)}])},"td+C":function(e,t,n){"use strict";(function(e){var r=n("D57K"),i=n("nsO7"),o=n("JfV0"),s=n("Q/M7"),a=n("6vR2"),u=n("5LAh"),c=n("gSji"),l=n("ObAk"),d=n("x9Ok"),p=function(){function t(){var e=this;this.helloMessageListener=function(t){var n,r,i,o=Array.from(e.integrations.values()).find((function(e){return e.iframe.contentWindow===t.source}));if(o||(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.type)===c.o)if((null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.type)===c.o)if(o){var a=Object(s.i)(o.url);if(Object(s.i)(o.url)===t.origin){var u=new MessageChannel;o.integrationChannel=u.port1,o.integrationChannel.onmessage=function(t){e.onIntegrationMessage(t.data,o)},o.iframe.contentWindow.postMessage({type:c.o},t.origin,[u.port2])}else console.warn("Message came from origin ["+t.origin+"], but we were expecting ["+a+"]. Authorization requests must come from the same origin that was configured in the LTI placement.")}else console.warn("Could not find a valid integration for message -- did the event come from an unexpected frame?");else console.warn("Received unexpected postMessage. Expected event type ["+c.o+"], but got ["+(null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.type)+"] instead",t)},this.onIntegrationMessage=function(t,n){if(t){var r=u.a.authScopes.get(t.type);if(r)if(!r(t,n))return;var i=e.integrationMessageEvents.get(t.type);i?i(t,n):console.warn("No valid method to call with provided event type "+t.type+".")}},this.sendAuthorizedMessage=function(t,n){return Object(r.__awaiter)(e,void 0,Promise,(function(){var e,i,s,a,u,l,d,p,m,f;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:if(!t||!t.token)return[2,this.sendAuthorizationError(n,"Received authorized message without token")];e=t.token,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Object(o.fetchAccessTokenInfo)(e)];case 2:return null==(i=r.sent()).scope?(s="Could not authenticate, no auth scopes provided for "+n,[2,this.sendAuthorizationError(n,s)]):(a=new Set(i.scope.split(/\s+/)),this.checkPremiumAccess(n,a),n.authScopes=a,n.integrationChannel.postMessage({type:c.c}),[3,4]);case 3:return u=r.sent(),d=(l=u).error&&l.error.error,p="invalid_request"===d,m=l.error&&l.error.error_description,f=p?"Expired or invalid token.":"Server side error occurred: "+d+", "+m,[2,this.sendAuthorizationError(n,f)];case 4:return[2]}}))}))},this.checkPremiumAccess=function(t,n){if(!n.has(c.H)){e.sendAuthorizationError(t,"This integration does not have UEF access enabled.")}},this.sendAuthorizationError=function(t,n){var r={type:c.Z,errorInformation:n};e.sendMessage(r,t),e.removeIframe(t)},this.removeIframe=function(t){e.document.body.querySelector("#"+t.iframe.id).remove()},this.sendRouteEvent=function(t){var n=d.b.getCurrentRoute();e.sendMessage({type:c.i,eventType:c.cb.Route,routeName:n.currentRouteName,routeData:n.currentParams},t)},this.integrations=new Map,this.integrationMessageEvents=new Map,this.integrationSubscriptionManager=new l.a}return t.prototype.init=function(e){return Object(r.__awaiter)(this,void 0,Promise,(function(){var t;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:if(this.window=e,this.document=e.document,this.isSafeMode())return console.warn("In integration safe mode -- not loading integrations"),[2,null];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Object(o.fetchLtiPlacements)({type:o.PlacementType.UltraUI})];case 2:return t=n.sent(),this.window.addEventListener("message",this.helloMessageListener),this.initIntegrationMessageTypes(),this.initIntegrationSubscriptionCallbacks(),this.loadIntegrations(t),[2,t];case 3:return n.sent(),[2,null];case 4:return[2]}}))}))},t.prototype.loadIntegrations=function(t){var n=this;!t||this.integrations&&this.integrations.size>0||Object.entries(t).forEach((function(t){var r=t[0],i=t[1];if(i.availability.available===o.PublicAvailability.Yes){var a=e('<iframe id="'+i.id+'" src="'+Object(s.c)(i.launchLink)+'"></iframe>').hide();n.document.body.appendChild(a[0]),n.integrations.set(r,{id:r,hasAuthorized:!1,iframe:a[0],url:i.url,authScopes:new Set})}}))},t.prototype.isSafeMode=function(){return"true"===Object(s.m)("noExtensions",this.window.location.href)},t.prototype.addIntegrationMessageType=function(e,t){this.integrationMessageEvents.get(e)||this.integrationMessageEvents.set(e,t)},t.prototype.addSubscriptionEventCallback=function(e,t){return this.integrationSubscriptionManager.onSubscriptionEventCallback(e,t)},t.prototype.addUnsubscriptionEventCallback=function(e,t){return this.integrationSubscriptionManager.onUnsubscriptionEventCallback(e,t)},t.prototype.initIntegrationMessageTypes=function(){this.addIntegrationMessageType(c.c,this.sendAuthorizedMessage),this.addIntegrationMessageType(c.Y,this.integrationSubscriptionManager.subscribeToEvents),this.addIntegrationMessageType(c.ab,this.integrationSubscriptionManager.unsubscribeFromEvents)},t.prototype.initIntegrationSubscriptionCallbacks=function(){var e=this;this.addSubscriptionEventCallback(c.cb.PortalNew,(function(e){u.e.getUnownedPortals().forEach((function(t){e.integrationChannel.postMessage({type:c.i,eventType:c.cb.PortalNew,portalId:t.portalId,selector:t.selector,selectorData:t.selectorData})}))})),this.addSubscriptionEventCallback(c.cb.Route,(function(t){var n=d.b.getCurrentRoute();e.sendMessage({type:c.i,eventType:c.cb.Route,routeName:n.currentRouteName,routeData:n.currentParams},t)}))},t.prototype.sendEventMessage=function(e,t){var n=this,r=this.integrationSubscriptionManager.getSubscribedIntegrations(e.eventType);r&&(t?[this.findIntegration(t)]:r).forEach((function(t){t&&n.sendMessage(Object(a.b)(e),t)}))},t.prototype.findIntegration=function(e){return this.integrations.get(e)},t.prototype.sendMessage=function(e,t){(Object(i.isString)(t)?this.findIntegration(t):t).integrationChannel.postMessage(Object(a.b)(e))},t}();t.a=new p}).call(this,n("5iHu"))},tfZW:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("6VGE"),o=n.n(i),s=function(){function e(){this.overrideBundles={},this.baseLocaleMap={},this.pathMap={},this.overrideAddedHandlers=new Set,this.overridePathPromises={}}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.onOverrideAdded=function(e){this.overrideAddedHandlers.add(e)},e.prototype.notifyOverrideAdded=function(e){this.overrideAddedHandlers.forEach((function(t){try{t(e)}catch(e){}}))},e.normalizeLocale=function(e){return e.toLocaleLowerCase().replace(/_/g,"-")},Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"siteId",{get:function(){return this._siteId},enumerable:!0,configurable:!0}),e.prototype.setOverrideLocation=function(e,t){e.endsWith("/")&&(e=e.substring(0,e.length-1)),this._root=e,this._siteId=t},e.prototype.addOverrideBundle=function(t,n){t=e.normalizeLocale(t);var r=e.normalizeLocale(n),i=e.getFallbackLocale(r);this.overrideBundles[t]={ultraLocale:r,localeForPath:n},this.baseLocaleMap[t]=this.baseLocaleMap[r]=i,this.notifyOverrideAdded(t)},e.prototype.getOverridePathForLocale=function(t){return t=e.normalizeLocale(t),this.overrideBundles[t]?(this.overridePathPromises[t]||(this.overridePathPromises[t]=this.internalGetOverridePath(t)),this.overridePathPromises[t]):Promise.resolve(null)},e.prototype.internalGetOverridePath=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return t=this.overrideBundles[e].ultraLocale,n=this.overrideBundles[e].localeForPath,[4,this.getPathToLocale(n)];case 1:return i=r.sent(),t&&i?[2,{path:i,ultraLocale:t}]:[2,null]}}))}))},e.getFallbackLocale=function(e){return e.split("-").slice(0,-1).join("-")},e.prototype.getPreferredLocales=function(t){if(t=e.normalizeLocale(t),!this.overrideBundles[t])return[t];var n=this.overrideBundles[t].ultraLocale;return[n,e.getFallbackLocale(n)].filter((function(e){return!!e}))},e.prototype.getPathToLocale=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:if(!this._root||!this._siteId)return[2,null];r.label=1;case 1:return r.trys.push([1,5,,6]),void 0!==this.pathMap[e]?[3,4]:(t=this._root+"/"+this._siteId+"/mapping.json",[4,fetch(t)]);case 2:return(n=r.sent()).ok?[4,n.json()]:(this.pathMap[e]=null,[2,null]);case 3:if(!(i=r.sent())[e])return this.pathMap[e]=null,[2,null];this.pathMap[e]=""+this._root+i[e][0].url,r.label=4;case 4:return[2,this.pathMap[e]];case 5:return r.sent(),[2,null];case 6:return[2]}}))}))},e.prototype.getBaseLocale=function(t){return t=e.normalizeLocale(t),void 0===this.baseLocaleMap[t]?"":this.baseLocaleMap[t]||"en"},e.loadFromRemotePath=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(e)];case 1:return(t=n.sent()).ok?[4,t.json()]:[2,{}];case 2:return[2,n.sent()];case 3:return n.sent(),[2,{}];case 4:return[2]}}))}))},Object(r.__decorate)([o.a],e,"normalizeLocale",null),Object(r.__decorate)([o.a],e,"getFallbackLocale",null),e}()},uC9d:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("nsO7"),i="learnApiCacheMessageService",o=function(){this.listen=r.noop,this.clearCache=r.noop},s=function(){function e(e){var t=this;this.$rootScope=e,this.init=function(){t.clearCacheOnLearnScreenClose()},this.clearCacheOnLearnScreenClose=function(){return t.$rootScope.$on("$stateChangeStart",(function(e,n,r,i){-1!==["base.admin","base.courses.peek.course.classic.outline"].indexOf(i.name)&&t.clearCache()}))},this.clearCache=function(e){return t.cacheServiceCallback({type:"clear",pattern:e})},this.listen=function(e){t.cacheServiceCallback=e},this.init()}return e.$inject=["$rootScope"],e}()},uNsL:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.content-collection.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("content-collection",{url:"/contentcollection?parentId&positionBefore&positionAfter",require:function(){return Promise.all([n.e(1),n.e(561)]).then(n.bind(null,"tsxV"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content-collection/content-collection")])}]},panelClass:"full",pageTitle:"course.contentCollection.contentCollection",peekStates:["content-collection-edit","content-collection-picker","content-collection-settings"],peekViewName:"content-collection-child@"}).peekState("content-collection-edit",{url:"/edit",require:function(){return n.e(626).then(n.bind(null,"klLK"))},panelClass:"peek",pageTitle:"course.contentCollection.itemSettings",peekStates:[],params:{items:null,fileRow:null}}).peekState("content-collection-settings",{url:"/settings",require:function(){return n.e(661).then(n.bind(null,"ks8w"))},panelClass:"peek",pageTitle:"course.contentCollection.browserSettings",peekStates:[]}).peekState("content-collection-picker",{url:"/picker?pickerType&multi",require:function(){return n.e(660).then(n.bind(null,"sSTc"))},panelClass:"full",pageTitle:"course.contentCollection.browseContentCollection",peekStates:[],params:{pickerType:"File",multi:"true"}})}])},"ud/9":function(e,t,n){},usTV:function(e,t){e.exports='<div class="square-toggle">\n  <input class="toggle-input input-one"\n         ng-checked="property === oneViewValue"\n         aria-checked="{{property === oneViewValue}}"\n         id="square-toggle-option-one-{{ ::squareToggle.oneControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.oneControlId }}"\n         type="radio"\n         value="{{ ::oneViewValue }}"\n         aria-controls="{{ ::oneAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::oneTooltipTemplate }}"\n         tooltip-scope="oneTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option1.input.radio">\n  <label class="toggle-label input label-one js-label-{{oneIconClass}}"\n         for="square-toggle-option-one-{{ ::squareToggle.oneControlId }}">\n    <bb-svg-icon size="custom" icon="{{oneIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::oneAriaLabel }}</span>\n  </label>\n  <input class="toggle-input input-two"\n         ng-checked="property === twoViewValue"\n         aria-checked="{{property === twoViewValue}}"\n         id="square-toggle-option-two-{{ ::squareToggle.twoControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.twoControlId }}"\n         type="radio"\n         value="{{ ::twoViewValue }}"\n         aria-controls="{{ ::twoAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::twoTooltipTemplate }}"\n         tooltip-scope="twoTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option2.input.radio">\n  <label class="toggle-label input label-two js-label-{{twoIconClass}}"\n         for="square-toggle-option-two-{{ ::squareToggle.twoControlId }}">\n    <bb-svg-icon size="custom" icon="{{twoIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::twoAriaLabel }}</span>\n  </label>\n  <a href="javascript:void(0);" class="button" role="presentation" tabindex="-1"\n     analytics-id="{{analyticsIdTagPrefix}}.presentation.link"></a>\n</div>'},vJBG:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("D57K"),i=n("td+C"),o=n("gSji"),s=n("JfV0"),a=n("3PCF"),u=n("9OUN"),c=n("TWlR"),l=new(function(){function e(e){var t=this;this.integrationService=e,this.registerOriginalityProvider=function(e,n){if(!e.submissionServicesUniqueHandle)return console.warn("Cannot register provider: no submissionServicesUniqueHandle was specified"),void t.integrationService.sendMessage({type:o.A,submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,status:o.p.Failure,errorMessage:"submissionServicesUniqueHandle should be provided"},n);var r={submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,integrationId:n.id};t.addIntegration(r),t.integrationService.sendMessage({type:o.A,submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,status:o.p.Success},n)},this.saveOriginalityConfiguration=function(e,n){return Object(r.__awaiter)(t,void 0,Promise,(function(){var t,i,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:if(!(t=this.listeners.get(n.uniqueHandle)))throw new Error("No listener registered for "+n.uniqueHandle);r.label=1;case 1:return r.trys.push([1,5,,6]),[4,this.saveSettingsMessenger.sendMessage({type:o.B,contentId:e.id,contentHandle:e.contentHandler.toString(),enabled:n.capabilities.OriginalityReport.enabled},t.integrationId)];case 2:return(i=r.sent()).success?[4,this.saveSubmissionService(e.courseId,null===(s=e.getAssociatedGradingColumn())||void 0===s?void 0:s.id,n)]:[3,4];case 3:r.sent(),r.label=4;case 4:return[2,i];case 5:return r.sent(),[2,{success:!1,error:this.localizationService.translateSync({key:"course.content.originalityReport.settings.errorSavingSettings",locale:this.localizationService.getAppLocale(),noWrap:!0,params:{integrationDisplayName:n.displayName}})}];case 6:return[2]}}))}))},this.listeners=new Map}return e.prototype.init=function(e,t){this.integrationService.addIntegrationMessageType(o.A,this.registerOriginalityProvider),this.ngRedux=t,this.subscribeToRedux(t),this.localizationService=e,this.integrationService.addIntegrationMessageType(o.A,this.registerOriginalityProvider),this.saveSettingsMessenger=Object(c.a)(o.B,{})},e.prototype.subscribeToRedux=function(e){e.connect((function(){return{}}),(function(e){return Object(u.bindActionCreators)({loadSubmissionServices:s.actions.submissionServices.loadSubmissionServices,saveSubmissionService:s.actions.submissionServices.saveSubmissionService},e)}))(this)},e.prototype.addIntegration=function(e){this.listeners.set(e.submissionServicesUniqueHandle,e)},e.prototype.removeIntegration=function(e){this.listeners.delete(e.submissionServicesUniqueHandle)},e.prototype.fetchDefaultOriginalityReportSubmissionService=function(e,t){return Object(r.__awaiter)(this,void 0,Promise,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.loadSubmissionServices(e,t)];case 1:return r.sent(),(n=s.select.submissionServices.getDefaultOriginalityReportSubmissionService(this.ngRedux.getState(),t))&&(n.uniqueHandle===a.b||this.listeners.get(n.uniqueHandle))?[2,n]:[2,void 0]}}))}))},e.prototype.getOriginalityIntegrationByUniqueId=function(e){return this.listeners.get(e)},e}())(i.a)},vT39:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("nsO7"),o=n("0JpG"),s=n("6Ksg"),a="ultra.directives.validate.bbmlmarkup.sanitize",u={style:function(e){return null},":default":function(t){var n=e("<span></span>");return n.text(t.text()),n}},c=function(t){function n(n,r){var o=t.call(this,n,r)||this;return o.validate=function(t){if(null===o.whitelist)return!0;var n=!0;if(1!==t[0].nodeType)return!0;var r=t[0].tagName.toLowerCase();if(Object.prototype.hasOwnProperty.call(o.whitelist,r)){var s=o.whitelist[r];i.each(Array.prototype.slice.apply(t[0].attributes),(function(e){Object.prototype.hasOwnProperty.call(s,e.name.toLowerCase())||(t.removeAttr(e.name),n=!1)}))}else{n=!1;var a=(u[r]||u[":default"])(t);if(null===a)return t.remove(),!1;t.replaceWith(a),t=a}return i.each(t.children(),(function(t){n=o.validate(e(t))&&n})),n},o.getValidator=function(t,n,r,s){return function(t){var r=o.$q.defer();return o.initialWhitelist().then((function(){var a=!0,u=e("<span></span>");u.html(t),i.each(u,(function(t){a=o.validate(e(t))&&a})),a||s.$setViewValue(n.html()),r.resolve()})),r.promise}},o}return Object(r.__extends)(n,t),n.$inject=["$q","$http"],n}(s.a);angular.module(a,[o.moduleName]).directive("bbSanitizeBbmlMarkup",["$injector",function(e){return e.instantiate(c)}])}).call(this,n("5iHu"))},vWx0:function(e,t,n){"use strict";var r=n("D57K"),i=(n("JzsJ"),n("5MwF")),o=n("hlSw"),s=n("wHJ2"),a=n("w9Zy"),u=n("bF8R"),c=n("vdfi"),l=n("Fvsw"),d=n("Qbdf"),p=n("jhBu"),m=(n("UC5D"),n("nsO7")),f=n("yC9S"),h=n("Y/dt"),g=n("z6Q5"),v=n("fYJU"),b=n("12mu"),y=n("pjml"),S=n("lEL+"),C=n("0JpG"),w=n("TnpK"),k=n("E01l"),I="ultra.modules.groupattempt.activities",T="ultra.services.groupattempt.activities",E="ultra.services.groupattempt.activities.dialog",$=new RegExp("assessment\\.overview\\.attempt("+w.a.replace(/\./g,"\\.")+".+)?$"),P={USER_CANCELLED:"USER_CANCELLED",USER_RELEASE_CONTROL:"USER_RELEASE_CONTROL",USER_REJECT_CONTROL:"USER_REJECT_CONTROL"},A=s.module(I,["ng"]);A.factory(T,["$injector","$q","$log","$http","$rootScope",v.b,S.b,w.d,function(e){var t=e.get("$q"),n=e.get("$http"),r=e.get("$rootScope"),o=e.get(v.b);return f.b.OnRootScope(r,"$stateChangeError",(function(t,n,r){$.test(n.name)&&e.get(w.d).go(n.name.replace(/\.attempt$/,""),r)})),{new:function(e,r){var s=function(e,t){e.userId=t.userId,e.queue=t.queue,e.groupAttemptId=t.groupAttemptId,e.status=t.status},a=t.when(null),u={myId:o.userId,request:function(){var o=this;return a=a.then((function(){var a=t.defer();return n.put(i.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities",{}).then((function(e){s(o,e.data),a.resolve(o)})),a.promise}))},keepAlive:function(o){var c=this;a=a.then((function(a){var l=t.defer();return m.some(c.queue.concat(c.userId),(function(e){return c.myId===e}))?n({method:"PATCH",url:i.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities"}).then((function(e){return s(c,e.data),t.when(o(c)).then((function(e){if(m.some(c.queue.concat(c.userId),(function(e){return c.myId===e}))&&e){var t=(new Date).getTime(),n=function(){window.requestAnimationFrame((function(){(new Date).getTime()-t>=5e3?u.keepAlive(o):n()}))};n()}}))})).finally((function(){l.resolve(c)})):l.resolve(c),l.promise}))},release:function(){var o=this;return a=a.then((function(){var a=t.defer();return n.delete(i.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities").then((function(e){s(o,e.data),a.resolve(o)})),a.promise}))},kickout:function(){return a=a.then((function(){return n.delete(i.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities/waiting")}))},peek:function(){var o=this;return a=a.then((function(){var a=t.defer();return n.get(i.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities").then((function(e){s(o,e.data),a.resolve(o)})),a.promise}))}};return u}}}]),A.factory(E,["$injector","$q","$log","$http","$rootScope",C.serviceName,w.d,b.b,g.b,y.Pb.serviceName,function(e){var t=e.get(b.b),n=e.get("$rootScope"),r=e.get(g.b),i=e.get(y.Pb.serviceName),o=e.get(C.serviceName),s="features.course.content.assessment.group-attempt.activities",a=function(e,n){var o=t.open({template:k,scope:e,controller:["$scope",function(e){}]});return o.refresh=function(t){r.performBatch((function(){var n=e.queuedUsers;e.owner&&(n[e.owner.id]=e.owner),e.queuedUsers={},t.userId&&t.userId!==(e.owner||{}).id&&i.$find(t.userId).$then((function(t){e.owner=t})),t.queue.forEach((function(t,r){Object.prototype.hasOwnProperty.call(n,t)?e.queuedUsers[t]=n[t]:i.$find(t).$then((function(n){e.queuedUsers[t]=n}))}))}))},o.scope=e,o.refresh(n),o.result.finally((function(){o.scope.$destroy()})),o};return{openRequest:function(e){var t,r=n.$new();return m.extend(r,{hideOK:!0,modalTranslateOptions:{title:{key:s+".title_group_member_editing"}},modalStrings:{instructions:o.translateSync({locale:null,key:s+".msg_taken_by_other_group_member"}),ok:o.translateSync({locale:null,key:s+".takecontrol"}),cancel:o.translateSync({locale:null,key:s+".cancel"})},queuedUsers:{},additionalClass:"requesting",okAction:function(){r.$broadcast(P.USER_REQUEST_CONTROL)},cancelAction:function(){t.dismiss()}}),t=a(r,e)},openNotify:function(e){var t,r=n.$new();return m.extend(r,{hideOK:!1,modalTranslateOptions:{title:{key:s+".title_group_member_requesting"}},modalStrings:{instructions:o.translateSync({locale:null,key:s+".msg_taking_by_other_group_member"}),ok:o.translateSync({locale:null,key:s+".leave"}),cancel:o.translateSync({locale:null,key:s+".ignore"})},queuedUsers:{},additionalClass:"notifying",okAction:function(){r.$broadcast(P.USER_RELEASE_CONTROL)},cancelAction:function(){t.dismiss()}}),t=a(r,e)},openDeclined:function(e){var t,r=n.$new();return m.extend(r,{hideCancel:!0,modalTranslateOptions:{title:{key:s+".title_group_member_request_decline"}},modalStrings:{instructions:o.translateSync({locale:null,key:s+".msg_control_request_declined"}),ok:o.translateSync({locale:null,key:s+".ok"})},queuedUsers:{},additionalClass:"declined",okAction:function(){t.dismiss()}}),t=a(r,e)}}}]),A.directive("bbGroupAttemptActivitiesPeek",[w.d,S.b,T,function(e,t,n){return{restrict:"A",link:function(r,i,o){i.addClass("group-attempt-activities-observe");var s=r.$watch(o.bbGroupAttemptActivitiesPeek,(function(o){if(o&&s(),o&&o.groupId&&o.isInProgress()){var a=n.new(e.params.courseId,o.id),u=function(){a.peek().then((function(e){e.status&&(o.status=e.status),m.extend(r,{groupAttemptOwnerId:e.userId});var n="group-attempt-has-owner";e.userId?i.addClass(n):i.removeClass(n),t(u,r,5e3)}))};u()}}))}}}]);var O=function(){function e(e){var t,n=this;this.delegatee=e,this.isResolvingControl=!1,m.forEach(e,(function(e,t){n[t]=e}));var r=["$injector","$http","$q","$rootScope",S.b,w.d,y.o.serviceName];this.resolve=this.resolve||{};var i=function(e){var r=e.get("$q"),i=e.get("$rootScope"),o=e.get(S.b),s=e.get(w.d),a=e.get(y.o.serviceName),u=e.get(T),c=e.get(E);if(!n.isRelatedState(s.next.name))return r.when(!0);if(n.isResolvingControl)return r.reject();n.isResolvingControl=!0;var l=r.defer(),d=s.nextParams;return a.$new(d.courseId).contents.$find(d.contentId||d.assignmentId).$then((function(e){if(!e.isGroupContent)return l.resolve(!0),void(t=null);(t=u.new(d.courseId,d.attemptId)).peek().then((function(e){if(e.userId&&e.myId!==e.userId){i.$broadcast("hideInitialLoadingArea");var t=c.openRequest(e);t.result.then((function(){}),(function(){e.release(),l.reject()})),e.request().then((function(){e.keepAlive((function(){return e.myId===e.userId?(t.close(),l.resolve(!0),!1):e.queue.some((function(t){return e.myId===t}))?(t.refresh(e),!0):(t.dismiss("ACCESS_CONTROL_TAKEN"),l.reject(),o((function(){c.openDeclined(e)}),i,200),!1)}))}))}else l.resolve(!0)}))})),l.promise.finally((function(){n.isResolvingControl=!1}))},o=this.resolve;if(o.translateGroupAttemptControl=[C.serviceName,function(e){e.loadBundle("features/course/content/assessment/group-attempt/activities/group-attempt-activities")}],o.attempt){var a=o.attempt;o.attempt=["contentData"].concat(r).concat((function(e,t){var o=t.get("$q"),s=t.get(w.d);return o.when(t.invoke(r.concat(i))).then((function(){return t.invoke(a,null,{contentData:e})})).then((function(e){return n.isRelatedState(s.next.name)&&e.isSubmitted()?(t.get(w.d).goPeekState("assessment.overview.attempt.review",{attemptId:e.id}),o.reject()):e}))}))}else o.takeControlOnGroupAttempt=r.concat(i);var u=this,c=u.onExit;u.onExit=r.concat((function(e){n.isRelatedState(e.get(w.d).prev.name)&&(c&&e.invoke(c),t&&(t.release(),(u.__childScope||{$destroy:s.noop}).$destroy()))}));var l=u.onEnter;u.onEnter=r.concat((function(e){var r=e.get("$rootScope"),i=e.get(E),o=e.get(w.d);if(n.isRelatedState(o.next.name)&&(l&&e.invoke(l),t)){var s,a=!1,c=function(){a=!0},d=function(){a=!1},p=r.$new();p.$on(h.b,c),p.$on(h.d,c),p.$on(h.a,d),p.$on(h.c,d),u.__childScope=p,t.request().then((function(e){e.keepAlive((function(e){return!!a||!!n.isRelatedState(o.current.name)&&(e.userId!==e.myId?(o.leavePeekState(),!1):(e.userId===e.myId&&e.queue.length>0?s?s.refresh(e):((s=i.openNotify(e)).result.then((function(){}),(function(){e.kickout(),s=null})),s.scope.$on(P.USER_RELEASE_CONTROL,(function(){s.close(),r.$broadcast(h.e);var t=p.$on("$stateChangeAbort",(function(n,r){"ABORTED_BY_FILE_UPLOAD"===(r||{}).reason&&(t(),e.kickout()),s=null}))}))):s&&(s.close(),s=null),!0))}))}))}}))}return e.prototype.isRelatedState=function(e){return $.test(e)},e}(),_=n("JXhc"),D=n("gkef"),x=n("X455"),R=n("nmzr"),M=n("+O05"),N=n("Sa5G");n.d(t,"a",(function(){return j}));var j="ultra.course.content.assessment.routes";var L={onEnter:["contentData","attempt",a.e,w.d,"$stateParams",D.b,function(e,t,n,r,o,s){o.skipTransitionEvents||(!o.viewOriginalityReport||o.forceOpenFeedbackPanel?(r.isPeekPanelOpen()&&n.expandTopPanel(),function(e,t,n,r,o){var s,a=i.a.features.peerAssessmentFeatureFlag&&(null===(s=null==e?void 0:e.gradingColumn)||void 0===s?void 0:s.peerGrading),u=n.next.name.includes("assessment-submission-feedback"),c=n.next.name.includes("assessment-submission-feedback-tab"),l=n.next.name.includes("rubric"),d=!n.prev.name,p=o.isSmallBreakpoint();if(a||u||c||l||d||p)return!1;var m=M.a.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail);return r.forceOpenFeedbackPanel&&m}(e,t,r,o,s)&&r.goPeekState(R.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW+".assessment-submission-feedback-tab",{attemptId:t.id})):r.goPeekState(R.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW+".originality-tab"))}],onExit:["contentData",a.e,w.d,"$q","$stateParams",function(e,t,n,r,i){var o=this;if(!i.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){var s=r.when();n.isPeekPanelOpen()&&(s=t.shrinkTopPanel()),s.then((function(){n.goPeekState("assessment.overview.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId,viewOriginalityReport:o.viewOriginalityReport})}))}}]};s.module(j,[p.a,w.b,c.c,_.c,I,d.b]).config([w.c,d.c,x.b,function(e,t,i){var s,m,f,h;e.peekState("assessment",{abstract:!0,url:"/assessment/{contentId:_[0-9]+_1}?courseId",resolve:(s={},s[d.d]=t.resolve,s)}).peekState("assessment.open",{url:"/open",params:{contentId:null,courseId:null,isCollectExternalSubmissions:!1},routingFunction:[y.o.serviceName,p.b,w.d,function(e,t,n){var r=n.nextParams.contentId,i=n.nextParams.courseId,o=n.nextParams.isCollectExternalSubmissions;t.hasAnyCourseEntitlement([N.j.ViewAssessment,N.j.ModifyAssessment],i).then((function(e){if(e)n.goPeekState("gradebook-item.assessment",{courseId:i,contentId:r,gradeitemView:"details",assessmentType:"test"});else{var t="assessment.overview";o&&(t="assessment.external-overview"),n.goPeekState(t,{courseId:i,contentId:r})}}))}]}).peekState("assessment.overview",{url:"/overview",resolve:(m={contentData:[d.d,u.b,w.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId,contentExtraExpand:"alignedGoals"})}]},m[x.c]=i.resolve,m.translations=["$q",C.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("components/services/proctoring")])}],m.onEnter=["contentData",l.b,function(e,t){t.column=e.gradingColumn}],m.onExit=[l.b,function(e){e.column=null}],m),peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations",R.CourseRoutes.COURSE_MESSAGE,R.AssessmentRoutes.ASSESSMENT_PEER_GRADING],pageTitle:"course.content.assessment.overview.pageTitle",require:[function(){return Promise.all([n.e(55),n.e(143)]).then(n.bind(null,"Xcx3"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(11),n.e(14),n.e(1),n.e(52)]).then(n.bind(null,"F2mp"))}]}).peekState(R.AssessmentRoutes.ASSESSMENT_PEER_GRADING,{panelClass:"full",resolve:{translations:["$q",C.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])}],currentColumn:o.a.currentColumn,currentContent:o.a.currentContent},url:"/peerReview?columnId&gradeId&userId&attemptId&initialPeerIndex",onExit:["currentColumn",a.e,w.d,function(e,t,n){n.goPeekState("assessment.overview",{})}],reloadOnSearch:!1,require:[function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(550)]).then(n.bind(null,"MbeC"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(10),n.e(1),n.e(2),n.e(37)]).then(n.bind(null,"fVgT"))}],pageTitle:"course.grades.peer-grading.title",peekViewName:"peer-grading-peek",peekStates:[]}).peekState("assessment.external-overview",{url:"/external-overview",panelClass:"full",resolve:(f={contentData:[d.d,u.b,w.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}]},f[x.c]=i.resolve,f.currentContent=["contentData","$q",function(e,t){return t.when(e.courseContent)}],f.currentColumn=["contentData","$q",function(e,t){return t.when(e.gradingColumn)}],f.translations=["$q",C.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])}],f.onEnter=["contentData",l.b,function(e,t){t.column=e.gradingColumn}],f.onExit=[l.b,function(e){e.column=null}],f),peekViewName:"assessment-overview-peek",allowChildPeekStates:!0,peekStates:["conversations",R.CourseRoutes.COURSE_MESSAGE,"rubric-view","rubric-evaluation"],require:[function(){return Promise.all([n.e(55),n.e(662)]).then(n.bind(null,"2cT1"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(11),n.e(14),n.e(1),n.e(534)]).then(n.bind(null,"8sa/"))}]}).peekState("assessment.overview.attempt",new O({url:"/attempt/{attemptId:_[0-9]+_1}",onEnter:[a.e,w.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{currentContent:["contentData",function(e){return e.courseContent}],currentColumn:["contentData",function(e){return e.gradingColumn}],attempt:["$q","contentData",y.o.serviceName,w.d,y.C.serviceName,y.H.serviceName,function(e,t,n,r){var i=r.nextParams.attemptId,o=t.courseContent.isGroupContent,s=n.$buildRaw({id:t.courseContent.courseId}).gradebook;return o?t.gradingColumn.getGroupAttemptByGroupAssociationId(t.courseContent.assignedGroups[0].groupAssociationId).then((function(e){if(0===e.attempts.length&&e.isInProgress()){return e.withParams({expand:"attempts,attempts.toolAttemptDetail,toolAttemptDetail"}).$patch(["id"]).$asPromise()}return e.$asPromise()})):s.attempts.$find(i,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then((function(e){t.attempt=e})).$asPromise()}]},params:{attemptId:null},peekStates:["conversations",R.CourseRoutes.COURSE_MESSAGE,"assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-evaluation","rubric-view","lti","content-market",c.b,_.b],peekViewName:"assessment-attempt-peek",pageTitle:"course.content.assessment.details.pageTitle",require:[function(){return n.e(616).then(n.bind(null,"mJUP"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(11),n.e(14),n.e(1),n.e(52)]).then(n.bind(null,"F2mp"))}]})).peekState("assessment.overview.multiple-attempt",{panelClass:"peek",url:"/multiple-attempt?columnId&gradeId",resolve:{currentColumn:["contentData",function(e){return e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()}]},params:{viewOriginalityReport:!1},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:[function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(546)]).then(n.bind(null,"ykN9"))}]}).peekState("assessment-details",{panelClass:"peek",url:"/details",resolve:{contentData:[d.d,u.b,w.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],translations:["$q",C.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment")])}]},params:{detailsView:!0,submitToGRD:null},require:[function(){return Promise.all([n.e(55),n.e(143)]).then(n.bind(null,"Xcx3"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(11),n.e(14),n.e(1),n.e(52)]).then(n.bind(null,"F2mp"))}],peekStates:["attempt-safe-assign-setting"]}).peekState(R.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW,Object(r.__assign)(Object(r.__assign)({url:"/review?columnId&contentId",panelClass:"full",resolve:(h={contentData:["contentData",d.d,u.b,w.d,function(e,t,n,r){return e.gradeDetail.ui.groupAttempt?e:n.loadContentAndGrades({course:t,contentId:r.nextParams.contentId})}]},h[x.c]=i.resolve,h),require:[function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(109)]).then(n.bind(null,"H0q3"))}]},L),{params:{commentPanelInitiallyOpen:!1,viewOriginalityReport:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations",R.CourseRoutes.COURSE_MESSAGE,"rubric-view","originality-report",_.b]})).peekState(R.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW+".assessment-submission-feedback-tab",{url:"/inline-feedback?attemptId&userId&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[C.serviceName,function(e){return e.loadBundle("features/course/feedback-authoring/feedback-authoring")}]},views:{"slider-tab-navigation-view@":{require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(39)]).then(n.bind(null,"15AK"))}}},peekStates:["lti"]}).peekState(R.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW+".inline-rubric",{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{"slider-tab-navigation-view@":{require:function(){return Promise.all([n.e(11),n.e(14),n.e(62)]).then(n.bind(null,"5N8L"))}}}}).peekState(R.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW+".originality-tab",{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{"slider-tab-navigation-view@":{require:function(){return n.e(69).then(n.bind(null,"djtz"))}}}}),e.peekState(R.AssessmentRoutes.ASSESSMENT_SETTINGS,{panelClass:"peek",url:"/assessmentSettings?contentId?focusEleId?subpanelId",require:function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(535)]).then(n.bind(null,"mUfJ"))},pageTitle:"course.content.assessment.windowTitle",resolve:{translations:["$q",C.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])}]},peekViewName:"assessment-settings-peek",allowChildPeekStates:!0,peekStates:["assign-graders","course-group","goal-picker-legacy","rubric","proctoring-lti-tool","question-analysis"]}),e.peekState("assign-graders",{panelClass:"full",url:"/assignGraders",require:function(){return n.e(606).then(n.bind(null,"BTMz"))},pageTitle:"course.content.assessment.settings.delegatedGrading.assignGraders.pageTitle",resolve:{translations:[C.serviceName,function(e){return e.loadBundle("features/course/content/assessment/assessment")}]},peekViewName:"assign-graders-peek"}),e.peekState("attempt-safe-assign-setting",{url:"/safeAssignSetting",require:function(){return Promise.all([n.e(3),n.e(2),n.e(7),n.e(25),n.e(590)]).then(n.bind(null,"Sg/T"))},params:{submitToGRD:null}}).peekState("assessment-submission-feedback",{url:"/feedback?userId",require:[function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(39)]).then(n.bind(null,"15AK"))},function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(1),n.e(2),n.e(7),n.e(110)]).then(n.bind(null,"EPkw"))}],resolve:{translations:[C.serviceName,function(e){return e.loadBundle("features/course/feedback-authoring/feedback-authoring")}],offCanvasArgs:["offCanvasArgs",function(e){return e.overlay=!1,e.disableFocusHandling=!0,e}]},pageTitle:"course.content.assessment.feedback.title"}).peekState(R.GradeRoutes.CREATE_OFFLINE_ATTEMPT,{url:"/create-attempt?expandId&userId&groupId&columnId&contentId",require:function(){return n.e(621).then(n.bind(null,"IvpR"))},resolve:{translations:[C.serviceName,function(e){return e.loadBundle("features/course/content/assessment/attempt/create/create-attempt")}]},pageTitle:"course.content.assessment.attempt.create.createAttempt",panelClass:"peek"}).peekState("proctoring-lti-tool",{panelClass:"full",url:"/proctoringLtiTool?toolHref&toolSubtitle",resolve:{translations:[C.serviceName,function(e){return e.loadBundle("components/services/proctoring")}]},require:function(){return n.e(627).then(n.bind(null,"a478"))},pageTitle:"components.services.proctoring.ltiTool.pageTitle"})}])},vYaK:function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",(function(){return p}));n("QLzv");var r=n("nsO7"),i=n("5MwF"),o=n("ZQey"),s=n("yCC5"),a=n("pjml"),u=n("Rjd/"),c=n("nkTj"),l=n("JfV0"),d=n("Sa5G");n.d(t,"ILearnCourse",(function(){return l.ILearnCourse})),n.d(t,"CourseDuration",(function(){return l.CourseDuration})),n.d(t,"CourseUltraStatus",(function(){return l.CourseUltraStatus}));var p=s.t;u.a.factory(p,["restmod","$q","$http",c.d,function(e,t,n,u){var c=u.createHooksToFetchParent("course"),p=e.model(i.a.apiBasePath+"/v1/courses").mix({announcements:{hasMany:s.e},assessments:{hasMany:s.f},calendarItems:{hasMany:s.v,path:"calendars/calendarItems"},calendars:{hasOne:s.u},collab:{hasOne:s.w},collabUltra:{hasOne:s.y,path:"collabultra"},contents:{hasMany:s.A},conversions:{hasMany:s.s,path:"convertToUltra"},forums:{hasMany:s.I,path:"discussionboards/default/forums"},entitlements:{hasMany:s.G},gradebook:{hasOne:s.Y},instructorsMembership:{mask:"CU",hasMany:s.N,path:"memberships?roleBucket="+d.k.TEACHING.toString()},exports:{hasMany:s.H},ltiPlacements:{hasMany:s.ob},memberships:{hasMany:s.N,hooks:c},membershipInvites:{hasMany:s.O,path:"membershipInvites"},messageFolders:{hasMany:s.Q},conversations:{hasMany:s.B},notifications:{hasMany:s.rb},preferences:{hasMany:s.R},schedule:{hasMany:s.T},term:{belongsTo:s.uc,key:"termId"},users:{hasMany:s.N,hooks:c},groups:{hasMany:s.K},rubrics:{hasMany:s.Xb,path:"rubrics"},analyticsReports:{hasMany:s.c,path:"analyticsReports"},tools:{hasMany:s.xc,path:"tools"},contentHandlers:{hasMany:s.xc,path:"contentHandlers"},indicators:{mask:!0,hasMany:s.M,path:"contents/indicators"},startDate:{serialize:"date"},endDate:{serialize:"date"},scormReportItems:{hasMany:s.Zb,path:"scormReportContents"},studentPreview:{hasOne:s.cc,path:"spreview"},ui:{mask:!0,init:function(){return{convertToUltraTaskStatus:"?"}}},isUndecided:function(){return l.CourseUltraStatus.Undecided.isEqualTo(this.ultraStatus)},isClassic:function(){return l.CourseUltraStatus.Undecided.isEqualTo(this.ultraStatus)||l.CourseUltraStatus.Classic.isEqualTo(this.ultraStatus)},isUltraConfirmed:function(){return l.CourseUltraStatus.Ultra.isEqualTo(this.ultraStatus)},isUltra:function(){return l.CourseUltraStatus.Ultra.isEqualTo(this.ultraStatus)||this.isUltraPreview()},isUltraPreview:function(){return l.CourseUltraStatus.UltraPreview.isEqualTo(this.ultraStatus)},setUltraStatusDecided:function(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:l.CourseUltraStatus.Ultra.toString()}},(function(e){this.ultraStatus=e.data.ultraStatus})).$asPromise()},chooseClassicCourseView:function(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:l.CourseUltraStatus.Classic.toString()}},(function(e){this.$unwrap(e.data)})).$asPromise()},isOpen:function(){return!0===this.isAvailable&&!1===this.isClosed},isOpenClassic:function(){return this.isOpen()&&this.isClassic()},isOpenNonClassic:function(){return this.isOpen()&&!this.isClassic()},isPrivate:function(){return!1===this.isAvailable},isComplete:function(){return!0===this.isAvailable&&!0===this.isClosed},getStatus:function(){return this.isAvailable?this.isClosed?o.a.Complete:o.a.Open:o.a.Private},setStatus:function(e){o.a.Complete.isEqualTo(e)?(this.isAvailable=!0,this.isClosed=!0,this.ui.status=o.a.Complete):o.a.Open.isEqualTo(e)?(this.isAvailable=!0,this.isClosed=!1,this.ui.status=o.a.Open):o.a.Private.isEqualTo(e)&&(this.isAvailable=!1,this.isClosed=!1,this.ui.status=o.a.Private)},canAccess:function(){return this.ui&&this.ui.isExternal?!!this.ui.externalUrl:this.isUndecided()?this.permissions&&this.permissions.chooseUltraStatus:this.effectiveAvailability},canChooseUltraStatus:function(){return this.permissions.chooseUltraStatus},canExport:function(){return this.permissions.export&&!this.isUltraPreview()},canArchive:function(){return this.permissions.archive&&!this.isUltraPreview()},canCopy:function(){return this.permissions.copy},canImport:function(){return this.permissions.import},convertToUltraCourse:function(){var e=this;return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra",data:{id:this.id}},(function(t){e.ui.convertToUltraTaskId=t.data.taskId,e.ui.convertToUltraTaskStatus=t.data.taskStatus,e.ui.conversionTaskTitle=t.data.taskTitle,e.ui.showConversionInProgress=!0,e.ui.showConversionComplete=!1})).$asPromise()},undoCourseConversion:function(){var e=this;return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/undo",data:{id:this.id}},(function(t){e.ui.convertToUltraTaskId=t.data.taskId,e.ui.convertToUltraTaskStatus=t.data.taskStatus,e.ui.conversionTaskTitle=t.data.taskTitle,e.ui.showConversionInProgress=!0,e.ui.showConversionComplete=!1})).$allow([400,404]).$asPromise()},refreshConvertToUltraStatus:function(){var e=this;return this.$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/conversionStatus"},(function(t){e.ui.convertToUltraTaskId=t.data.taskId,e.ui.convertToUltraTaskStatus=t.data.taskStatus,e.ui.conversionTaskTitle=t.data.taskTitle})).$allow([404,403]).$asPromise()},getInstructors:function(){return(this.instructorsMembership||[]).map((function(e){return e.user}))},getBaseRoute:function(){return this.isOrganization?"base.organizations":"base.courses"},importContents:function(e,t){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/imports?fileName="+e+"&fileLocation="+t,data:{cxAction:"CX_ACTION_IMPORT",includeItems:["alignments","announcement","availabilityRule","assessment","content","calendar","collabSessions","glossary","gradebookItems","groups","discussionBoard","settings","staffInformation","tasks","blog","journal","rubric","customArea(bb-retention)","customArea(bb-wiki)"]}},(function(e){this.$unwrap(e.data)})).$asPromise()},copyCourse:function(e,t,n,r,i,o,s){return void 0===t&&(t=!1),this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/copy",data:{srcCourseId:e,contentOnly:t,contentItems:n,targetContentId:r,positionBefore:i,positionAfter:o,shouldSendNotifyEmail:s}},(function(e){this.$unwrap(e.data)})).$asPromise()},getImportCopyTaskStatus:function(e){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/"+e},(function(e){this.$unwrap(e.data)})).$asPromise()},getGranularCopyTaskStatus:function(e){return void 0===e&&(e=[]),this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/ultraConversionReports?taskIds="+e.join()},(function(e){this.$unwrap(e.data)})).$asPromise()},getTaskErrorDetailMessages:function(e,t){return t=t||this.$scope.$url()+"/"+this.id+"/ultraConversionReports/"+e+"/messages",this.$scope.$build().$send({method:"GET",url:t},(function(e){this.$unwrap(e.data)})).$asPromise()},canConvert:function(){return this.permissions.convert},hasSchedule:function(){return!r.isEmpty(this.schedule)},getLocale:function(){return this.isLocaleEnforced&&this.locale},isToolAvailable:function(e){return this.tools.isToolAvailable(e)},getAnnouncementsCount:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/announcements/counts"},(function(e){this.$unwrap(e.data)})).$asPromise()},getCourseGroupSetCount:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/groupsets/count"},(function(e){this.$unwrap(e.data)})).$asPromise()},getChildrenCourses:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url().replace(i.a.apiBasePath,i.a.apiBasePath+"/public")+"/"+this.id+"/children?fields=id,childCourse.name"}).$allow([400]).$asPromise().then((function(e){return e.$response.data.results&&e.$response.data.results}))},attendanceRecordsExist:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.$pk+"/attendanceRecords",params:{limit:"1"}}).$suppressErrorDialog().$asPromise().then((function(e){return e.$response.data.results&&e.$response.data.results.length>0}))},$extend:{Model:{findCourseByCourseId:function(e,t){void 0===t&&(t=!1);var n=this.$collection().$send({method:"GET",url:this.$url()+"/find",params:{courseId:e}});return t&&(n=n.$allow([404])),n.$asPromise().then((function(e){if(e&&e.$response&&200===e.$response.status)return e.$response&&e.$response.data}))}},Record:{getConversationCounts:function(){var e=this.$scope.$url()+"/"+this.$pk+"/conversations/counts";return n.get(e).then((function(e){return e.data}))}}},$hooks:{"after-fetch":function(){a.v.sortInstructorsMembership(this.instructorsMembership)},"after-feed":function(e){e.instructorsMembership&&this.instructorsMembership.$decode(e.instructorsMembership)}}});return p.mixinCourses=u.getDataMixin(p.findMany.bind(p),"courseId","course"),p}])},vdfi:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("Sa5G"),a=n("0JpG"),u=n("hlSw"),c=n("TnpK"),l=n("3bn4"),d="ultra.course.content.assessment.content-goal-alignment",p="ultra.course.content.assessment.content-goal-alignment.service",m="content-goal-alignment",f="content-goal-alignment-for-student",h=["course","goal-alignment","goal"],g=function(){function e(e){this.$q=null,this.defers=null,this.cachedGoalAlignment=null,this.isLoading=!1,this.$q=e}return e.prototype.isReady=function(){return null!==this.cachedGoalAlignment||this.isLoading},e.prototype.updataState=function(){this.cachedGoalAlignment=null,this.isLoading=!0},e.prototype.getData=function(){if(null===this.cachedGoalAlignment){this.defers=this.defers||[];var e=this.$q.defer();return this.defers.push(e),e.promise}return this.cachedGoalAlignment},e.prototype.updateData=function(e){var t=this;return this.cachedGoalAlignment=e,this.isLoading=!1,(this.defers||[]).forEach((function(e){e.resolve(t.cachedGoalAlignment)})),this.defers=null,this.cachedGoalAlignment},e.prototype.cleanData=function(){this.cachedGoalAlignment=null,this.isLoading=!1},e}(),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelClass="peek content-assessment-goal-peek",t}return Object(r.__extends)(t,e),t.prototype.getCache=function(e){return t.cache=t.cache||new g(e)},t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentContent","currentCourse","currentColumn",a.serviceName,"$injector","refreshCache",function(t,n,r,i,a,c,l){if(void 0===l&&(l=!1),n&&!n.id)return t.when([]);var d=e.getCache(t);return!l&&d.isReady()?t.when(d.getData()):(d.updataState(),t.when(null).then((function(){if(!n)return c.invoke(u.a.currentContent,null,{currentCourse:r,translations:{}}).then((function(e){n=e}))})).then((function(){if(!i)return c.invoke(u.a.currentColumn,null,{currentCourse:r,currentContent:n}).then((function(e){i=e}))})).then((function(){return t.all([r.contents.$find(n.id,{expand:"alignedGoals,permissions"}).$asPromise(),r.assessments.$buildRaw({id:n.getDeployedAssessment().assessment.id}).questions.$fetch({expand:"alignedGoals"}).$asPromise(),r.gradebook.columns.$find(i.id,{expand:["associatedRubrics","rubricAssociations.rubricDefinition.alignedGoals","rubricAssociations.rubricDefinition.permissions","rubricAssociations.rubricDefinition.rows.alignedGoals"].join(",")}).$asPromise(),a.loadBundle("features/"+h.join("/"))]).then((function(t){var n=t[0],i=t[1],u=t[2],c=1,l=i.map((function(e){if(!s.A.PresentationOnly.isEqualTo(e.questionType)){var t=c++;return o.extend(e,{getContentTitleForGoalAlignment:function(){return a.translateSync({locale:r.locale,key:"components.directives.assessment-question.question-title",params:{index:t}})}})}return e}));return e.groupGoals(r.contents.$buildRaw(n),l,u,a)}))})).then((function(e){return d.updateData(e)})))}]},t.prototype.getPeekStateName=function(){return m},t.prototype.groupGoals=function(e,t,n,r){var s=n.rubricAssociations&&n.rubricAssociations.length>0?n.rubricAssociations[0].rubricDefinition:{},a=e.isTest()?"goalsAlignedWithTest":"goalsAlignedWithAssignment";return[{getContentTitleForGoalAlignment:function(){return r.translateSync({locale:null,key:h.join(".")+"."+a})},getContentIdForGoalAlignment:o.bind(e,e.getContentIdForGoalAlignment),isCurrentUserEligibleToAlignGoals:o.bind(e,e.isCurrentUserEligibleToAlignGoals),alignedGoals:e.alignedGoals?e.alignedGoals.map((function(t){return t.content=e,t})):[],coreContent:e},{getContentTitleForGoalAlignment:function(){return r.translateSync({locale:null,key:h.join(".")+".goalsAlignedWithQuestions"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()+".all.questions"},isCurrentUserEligibleToAlignGoals:function(){return!1},alignedGoals:i.flatten(t.map((function(e){return e.alignedGoals?e.alignedGoals.map((function(t){return t.content=e,t})):[]})))},{getContentTitleForGoalAlignment:function(){return r.translateSync({locale:null,key:h.join(".")+".goalsAlignedWithRubric"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()+".all.rubricrows"},isCurrentUserEligibleToAlignGoals:function(){return!1},alignedGoals:i.flatten((s.rows||[]).map((function(e){return e.alignedGoals.map((function(t){return e.getContentTitleForGoalAlignment=function(){return e.header},e.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+this.id},t.content=e,t}))})))}]},t.prototype.getOverrideSubTitle=function(){return["currentCourse","currentContent",function(e,t){return t.id?e.contents.$find(t.id).$asPromise().then((function(e){return e.title})):""}]},t.$inject=["$injector","$q"],t}(l.a),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.resolveGoalAlignableContent=function(e){var t=this;return["$q","currentCourse","contentData",a.serviceName,function(n,r,i,s){var a=n.when(null);return e?a=n.when(e):i.courseContent.isGroupContent&&i.groupAttempt?a=i.gradingColumn.getGroupAttemptByGroupAssociationId(i.courseContent.assignedGroups[0].groupAssociationId):!i.courseContent.isGroupContent&&i.attempt&&(a=r.gradebook.attempts.$find(i.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),n.all([i.courseContent.alignedGoals?i.courseContent.$asPromise():r.contents.$find(i.courseContent.id,{expand:"alignedGoals"}).$asPromise(),a,r.gradebook.columns.$find(i.gradingColumn.id,{expand:["associatedRubrics","rubricAssociations.rubricDefinition.alignedGoals","rubricAssociations.rubricDefinition.permissions","rubricAssociations.rubricDefinition.rows.alignedGoals"].join(",")}).$asPromise(),s.loadBundle("features/"+h.join("/")),s.loadBundle("components/directives/assessment/assessment-question")]).then((function(e){var n=e[0],a=e[1],u=e[2],c=[];if(a&&a.$pk){var l=a.getToolAttemptDetailItem(i.gradingColumn.scoreProviderHandle);(l&&l.questionAttempts||[]).forEach((function(e){c.push(o.extend(e.question,{getContentTitleForGoalAlignment:function(){return s.translateSync({locale:r.locale,key:"components.directives.assessment-question.question-title",params:{index:e.visibleQuestionNumber}})},getContentIdForGoalAlignment:function(){return"blackboard.data.qti.asi.AsiObject;"+this.id},isCurrentUserEligibleToAlignGoals:function(){return!1}}))}))}return t.groupGoals(n,c,u,s)}))}]},t.prototype.getPeekStateName=function(){return f},t.prototype.getOverrideSubTitle=function(){return["contentData",function(e){return e.courseContent&&e.courseContent.title||""}]},t}(v);o.module(d,[c.b,a.moduleName]).config([c.c,function(e){[new v,new b].forEach((function(t){e.peekState(t.getPeekStateName(),t)}))}]).value("refreshCache",!1).service(p,["$injector",a.serviceName,function(e){return{alignedGoalsCount:-1,resolveGoalAlignableContents:function(t,n,r,o){var s,a=this;return void 0===o&&(o=!1),e.invoke((new v).resolveGoalAlignableContent(),null,(s={currentCourse:t,currentContent:n,currentColumn:r},s.refreshCache=o,s)).then((function(e){return a.alignedGoalsCount=i.flatten(i.compact(e.map((function(e){return e.alignedGoals})))).length,[e,a.alignedGoalsCount]}))},resolveGoalAlignableContentsForStudent:function(t,n,r){return e.invoke((new b).resolveGoalAlignableContent(r),null,{currentCourse:t,contentData:n}).then((function(e){return[e,i.flatten(i.compact(e.map((function(e){return e.alignedGoals})))).length]}))}}}])},vhkR:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return k}));var r=n("D57K"),i=n("nsO7"),o=n("wHJ2"),s=n("pjml"),a=n("4nF1"),u=n("Qbdf"),c=n("0JpG"),l=n("12mu"),d=n("sgjL"),p=n("TnpK"),m=n("Sa5G"),f=n("Q/M7"),h=n("fYJU"),g=n("yytE"),v=n("qZC8"),b=n("e6jQ"),y=n("JfV0"),S=n("CY5M"),C="ultra.components.services.lti",w="lti",k="geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *",I=function(){function e(e,t,n,r,i,o,s,a,u,c,l,d,p,m,f){this.$q=e,this.$rootScope=t,this.$stateParams=n,this.$window=r,this.cacheFactory=i,this.contextCourse=o,this.bbLocalize=s,this.modalService=a,this.postMessageDispatcherService=u,this.stateService=c,this.CourseModel=l,this.PartnerContentIdModel=d,this.PartnerSettingsModel=p,this.PlacementModel=m,this.contextUser=f,this.shortMaxAge=5e3,this.thirtyMinuteMaxAge=18e5,this.placementCache=i.createCache("PlacementCache",{deleteOnExpire:"passive",maxAge:this.thirtyMinuteMaxAge}),this.placementsCache=i.createCache("PlacementsCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge})}return e.prototype.configureAndInitInlineLaunch=function(e,t){var n=this.$q.defer(),r=this.contextCourse.courseId||this.$stateParams.courseId,i=this.$stateParams.contentId,o=Object(S.configureLaunchArgs)({bbFileData:e,courseId:r,contentId:i});if(o.linkType){if(!m.g.ExternalLink.isEqualTo(o.linkType)&&t&&t.preventDefault(),o.linkRefId)return this.ltiLaunch(o)}else n.reject({errorMessage:"Failed to render the iframe from src"});return n.promise},e.prototype.getPlacements=function(e,t){if(void 0===t&&(t=!1),t)return this.PlacementModel.$search(e).$asPromise();var n=this.placementsCache.get(o.toJson(e||{}));return n||(n={promise:this.PlacementModel.$search(e).$asPromise()},this.placementsCache.put(o.toJson(e||{}),n)),n.promise},e.prototype.getAvailablePlacements=function(e,t){return void 0===t&&(t=!1),this.getPlacements(e,t).then((function(e){return e.filter((function(e){return e.isAvailable()}))}))},e.prototype.ltiLaunch=function(e){var t=this,n=this.$q.defer();return this._getContent(e.courseId,e.content,e.contentId,e.linkType,e.linkRefId).then((function(r){if(!r||!e.showPreLaunchPanel)return t._ltiLaunch(i.merge(e,{content:r})).then(n.resolve,n.reject);t._getMembership(e.courseId).then((function(o){if(!t._isGradable(r)||!t._isStudentInCourse(o))return t._ltiLaunch(i.merge(e,{content:r})).then(n.resolve,n.reject);t.stateService.goPeekState("lti.launch",{courseId:r.courseId,contentId:r.id}).then((function(){e.showPreLaunchPanel||t.markCompleted(r.id,r.courseId,o,r),n.resolve()})).catch((function(e){n.reject({errorMessage:"Failed to open the gradable lti launch panel",errorResponse:e})}))}))})),n.promise},e.prototype.markCompleted=function(e,t,n,r){var i=this;n&&r&&!n.isActAsInstructorMembership()&&r.state!==s.r.StateType.Completed?r.updateState(s.r.StateType.Completed,!0):this._getMembership(t).then((function(n){i._getContent(t,null,e,null,null).then((function(e){!n.isActAsInstructorMembership()&&e&&e.state!==s.r.StateType.Completed&&e.updateState(s.r.StateType.Completed,!0)}))}))},e.prototype.launch=function(e,t,n){void 0===t&&(t=!1),e=f.c(e),e=f.a(e,"from_ultra","true");var r=this.contextCourse.courseId||this.$stateParams.courseId,i=this.$stateParams.contentId||f.b(e).content_id||f.b(e).parentId;return t?(this.$window.open(e),this.markCompleted(i,r),"lti-service: Link was launched in a new window."):n?e:(this.stateService.goPeekState("lti.launch-frame",{toolHref:e}),this.markCompleted(i,r),"lti-service: Link was launched in a peek panel.")},e.prototype._ltiLaunch=function(e){var t;if(e.content){t=this.getLaunchLinkFromContent(e.content);var n=this.getDomainConfigStatusType(e.content);if(!t){if(n&&s.N.LTIStatusType.NeedsApproval.isEqualTo(n)){var r=this.$rootScope.$new();return r.email=this._getSupportEmail(e.content),r.hasEmail=!!r.email,this.modalService.open({scope:r,template:g,resolve:{translations:[c.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]}}),this.$q.resolve()}return this.$q.reject({errorMessage:"Attempted to launch an LTI link without a valid launchLink."})}}else t={link:this._getLaunchLinkFromLinkRef(e)};return this._initLaunchTarget(i.merge(e,{launchLink:t}))},e.prototype._initLaunchTarget=function(e){var t=this,n=Object(S.getPartnerIdFromLinkRefId)(e.linkRefId);if(e.content)return this._launchFromContent(e.content,e.launchLink,n);if(m.g.LtiPlacement.isEqualTo(e.linkType))return this._getPlacementById(e.linkRefId).then((function(n){var r=e.launchLink.link,i=n.launchInNewWindow;return f.n(n.url)||(r=f.a(r,"target_override","window"),i=!0),y.PlacementType.ContentItemMessage!==n.type||m.w.Inline.isEqualTo(t.$stateParams.mode)||(t.$stateParams.position&&(r=f.a(r,"position",t.$stateParams.position)),t.$stateParams.parentId&&(r=f.a(r,"content_id",t.$stateParams.parentId))),t.launch(r,i)}),(function(){return t.launch(e.launchLink.link)}));if(m.g.PartnerCloud.isEqualTo(e.linkType))return this.PartnerSettingsModel.getSettingsById(n).then((function(n){return t.launch(e.launchLink.link,!n.responsive)}));if(m.g.LtiLink.isEqualTo(e.linkType)){var r=e.launchLink.link;return!e.launchInNewWindow&&e.url&&f.n(e.url)?this.$q.resolve(this.launch(r,!1,e.renderAsEmbed)):this.$q.resolve(this.launch(r,!0))}},e.prototype._launchFromContent=function(e,t,n){var r=this,i=e.contentHandler;if(m.g.LtiPlacement.startsWith(i)||m.g.LtiLink.isEqualTo(i))return this.$q.resolve(this.launch(t.link,t.launchNewWindow));if(m.g.PartnerCloud.isEqualTo(i)){var o=e.contentDetail;return!n&&o&&o[m.g.PartnerCloud.handle]&&(n=o[m.g.PartnerCloud.handle].providerId),this.PartnerSettingsModel.getSettingsById(n).then((function(e){return r.launch(t.link,!e.responsive)}))}},e.prototype.getLaunchLinkFromContent=function(e){return Object(S.getLaunchLinkFromContent)(e)},e.prototype._getPlacementById=function(e){var t=this,n=this.placementCache.get(e);return n||(n={promise:this.PlacementModel.$find(e).$asPromise()}).promise.then((function(){t.placementCache.put(e,n)})),n.promise},e.prototype._getLaunchLinkFromLinkRef=function(e){return Object(S.getLaunchLinkFromLinkRef)(e)},e.prototype.getDomainConfigStatusType=function(e){var t,n,r;return(null===(r=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()])||void 0===n?void 0:n.domainConfig)||void 0===r?void 0:r.statusType)?e.contentDetail[e.contentHandler.toString()].domainConfig.statusType:null},e.prototype.ltiEditColumn=function(e){var t=this;this._getContent(e.courseId,e.ui.content,e.contentId,null,null).then((function(n){e.ui.content=n;var r=a.a.create(n).getEditState();t.stateService.goPeekState(r,{id:n.id})}))},e.prototype.isLTILink=function(e){return null!=e.scoreProviderHandle&&(m.B.PartnerCloud.isEqualTo(e.scoreProviderHandle)||m.B.LTILink.isEqualTo(e.scoreProviderHandle))},e.prototype.populateNewPlacement=function(e,t){var n=s.r.ContentHandler.LtiPlacement.handle+"-"+t.handle;e.isAvailable=!1,e.isPartiallyVisible=!1,e.visibility=s.r.Visibility.Hidden,e.contentHandler=new s.r.ContentHandler(n,null),e.permissions={edit:!0},e.contentDetail={},e.contentDetail[n]={},e.title=t.name.trim().substr(0,333),t.description&&t.description.length>0&&(e.description=t.description.trim().substr(0,250))},e.prototype._isStudentInCourse=function(e){return e.isStudentMembership()},e.prototype._isGradable=function(e){return!!(e&&e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].gradingColumn)&&!!e.contentDetail[e.contentHandler.toString()].gradingColumn},e.prototype._getContent=function(e,t,n,r,i){var o=this;return t?this.$q.when(t):n?this.CourseModel.$new(e).contents.$find(n).$asPromise():i&&m.g.PartnerCloud.isEqualTo(r)?this.PartnerContentIdModel.getContentIds(e,i).then((function(t){return t.contentIds&&t.contentIds.length>0?o.CourseModel.$new(e).contents.$find(t.contentIds[0]).$asPromise():o.$q.when(null)})):this.$q.when(null)},e.prototype._getMembership=function(e){return this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()},e.prototype._getSupportEmail=function(e){return e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].supportEmail?e.contentDetail[e.contentHandler.toString()].supportEmail:null},e.prototype.convertInlineLTILinkToBbMLLink=function(e){return e.map((function(e){var t,n,r=e.data;m.g.LtiLink.isEqualTo(e.data.linkType)&&("iframe"===(null===(n=null===(t=e.data)||void 0===t?void 0:t.target)||void 0===n?void 0:n.toLowerCase())&&(r.bbtype="embedded-app",e.data.height&&(r.height=e.data.height),e.data.width&&(r.width=e.data.width),delete r.target),r.linkRefUuid||(r.linkRefUuid=Object(b.b)()));var s={type:o.isDefined(r)&&!m.g.ExternalLink.isEqualTo(r.linkType)?"lti":"external",title:e.title,url:"",data:i.escape(o.toJson(o.isDefined(r)?r:{}))};return o.isDefined(r)&&m.g.ExternalLink.isEqualTo(r.linkType)&&(s.url=r.url),s}))},e.prototype.isEmbeddedGradable=function(e){var t=!1;return e.forEach((function(e){e.data.gradable&&(t=!0)})),t},e.prototype.returnToContentState=function(){var e=this.stateService.current.name.split(".peek."),t=1;e.length>2&&(t="content-market"===e[e.length-2]?2:1);var n=e.splice(0,e.length-t).join(".peek.");this.stateService.goPeekState(n)},e.prototype._registerEmbedLinkEventHandler=function(e,t){var n=this;this.postMessageDispatcherService.registerEventHandler("embedded-links",(function(t,r){window!==r&&r.close(),n.returnToContentState();var i=function(t){var r=n.convertInlineLTILinkToBbMLLink(t);e(r.map((function(e){return{data:e.data,type:e.type.includes("lti")?"lti":"external",url:e.url,title:e.title}})))};n.isEmbeddedGradable(t.items)?n.showEmbeddedNotGradableModal(i,t.items):i(t.items)}),t,!0)},e.prototype.getOpenContentMarketConf=function(e){var t=this;return function(n){t._registerEmbedLinkEventHandler(n,e),t.stateService.goPeekState("content-market",{mode:"inline"})}},e.prototype.getOpenSystemContentMarketConf=function(e){var t=this;return function(n){t._registerEmbedLinkEventHandler(n,e),t.stateService.goPeekState("system-content-market",{mode:"inline"})}},e.prototype.showEmbeddedNotGradableModal=function(e,t){var n=this.$rootScope.$new(!0),r=this.modalService.open({scope:n,template:v,resolve:{translations:[c.serviceName,function(e){return e.loadBundle("features/course/content-market/content-market")}]}});n.dismissCallback=function(){e(t),r.dismiss()}},e.$inject=["$q","$rootScope","$stateParams","$window","DSCacheFactory",u.e,c.serviceName,l.b,d.b,p.d,s.o.serviceName,s.V.serviceName,s.X.serviceName,s.O.serviceName,h.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(I);o.module(C,[u.b,d.a,p.b,s.Q]).service(w,I).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},w9Zy:function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return b}));var r=n("D57K"),i=(n("NLMr"),n("5iHu")),o=n("wHJ2"),s=n("5MwF"),a=n("9zo4"),u=n("0JpG"),c=n("lEL+"),l=n("TT9l"),d=n("aHpC"),p=n("7/CN"),m="ultra.services.BbOffcanvas",f="bbOffcanvas",h="OffCanvasPanelClosed",g="OffCanvasPanelOpened",v=function(){function e(e,t,n,r,i,o){this.$compile=e,this.$q=t,this.$rootScope=n,this.accessibility=r,this.bbLocalize=i,this.timeout=o,this.document=document,this.openElements=[],this.openElementsPromise=[]}return e.prototype.open=function(e){var t=this;return this.$q.when(p.e.getCSSLoadedPromise()).then((function(){return t.openOffcanvas(e)}))},e.prototype.openOffcanvas=function(e){var t=this;return this.$q.when(e.template).then((function(n){var r=i(n);if(r.length>1&&!s.a.production)throw new Error("Current page has multiple root element! Please refactor the page to have only one root element");r.attr("data-base-state-name",e.stateName),0===t.openElements.length&&1===t.openElementsPromise.length&&r.addClass("first");var o=e.scope||t.$rootScope,u=(o.$newOffcanvasScope||o.$new).apply(o);t.$rootScope.bbOffcanvasOpened=!1,t.bbOffcanvasOpening=!0;var c=e.opened,d=e.close,p=t;e.trapFocus=!1,e.open=function(){e.disableFocusHandling||p.accessibility.applyAccessibilityHandlingForPanel(r)},a.a.isLastNavigationByKeyboard&&i("body").addClass("hide-focus-outline"),e.opened=function(){var t=this;p.$compile(r)(u);var n=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];p.$rootScope.bbOffcanvasOpened=!0,p.bbOffcanvasOpening=!1,c&&c.apply(t,e),a.a.isLastNavigationByKeyboard&&i("body").removeClass("hide-focus-outline"),p.$rootScope.$broadcast(g)};p.$rootScope.$$phase?n():p.$rootScope.$apply(n),p.accessibility.isElementInActivePanel(i(document.activeElement))||p.accessibility.focusCorrectElementOnPanel(r),r.hasClass("peek")&&r.hasClass("overlay-disabled")&&!e.disableFocusHandling&&p.enableFocusSkipLinks(u)},e.close=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.hasClass("peek")&&r.hasClass("overlay-disabled")&&!e.disableFocusHandling&&t.disableFocusSkipLinks(),d.apply(t,n)},e.closed=function(){e.disableFocusHandling||t.accessibility.revertAccessibilityHandling(),t.$rootScope.$broadcast(h)},e.overlay||r.addClass("overlay-disabled"),e.disableFocusHandling&&(r.addClass("focus-handling-disabled"),r.attr("role","region"),r.attr("aria-label",t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(u),key:"global.panel"}))),r.bbOffcanvas(e);var m=new b(r,t.accessibility);e.banner&&l.a.pushBanner({state:{stateName:e.stateName,panelClass:e.panelClass},orphan:function(){m.setBanner()(void 0)},adopt:m.setBanner()}),m.open();var f=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(u),key:"global.close"}),v=r.find(".bb-close");v&&v.length>0&&(v[0].setAttribute("aria-label",f),r.find(".top-border").length>0&&v.addClass("has-top-border"));var y=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(u),key:"global.focusJumpLink"});return r.append('<button class="focus-skip-link focus-skip-link-disabled" tabindex="0">'+y+"</button>"),r.attr("data-page-title",t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(u),key:e.pageTitle})),m}))},e.prototype.addBbOffcanvasElement=function(e){this.openElements.push(e),this.synchronizeOffcanvasDepth()},e.prototype.addBbOffcanvasElementPromise=function(e,t){var n=this;this.openElementsPromise.push(this.$q.when(e)),this.openElementsPromise[this.openElementsPromise.length-1].then((function(e){e.name=t,n.addBbOffcanvasElement(e),n.openElementsPromise.pop()}),(function(){n.openElementsPromise.pop()}))},e.prototype.close=function(e){for(;0!==this.openElements.length;){var t=this.openElements.pop();if(this.synchronizeOffcanvasDepth(),t.close(),this.$rootScope.bbOffcanvasOpened&&t.name===e)break}this.$rootScope.$broadcast(h)},e.prototype.synchronizeOffcanvasDepth=function(){i(this.document.body).attr("bb-offcanvas-depth",this.openElements.length)},e.prototype.getElement=function(e){var t=this;return(this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then((function(){return t.openElements.filter((function(t){return t.name===e}))[0]}))},e.prototype.getTopElement=function(){return this.getNthElementFromTop(0)},e.prototype.getNthElementFromTop=function(e){var t=null;return this.openElementsPromise.length>e?t=this.openElementsPromise[this.openElementsPromise.length-e-1]:this.openElements.length>e&&(t=this.openElements[this.openElements.length-e-1]),this.$q.when(t)},e.prototype.getCoursePanel=function(){var e=this;return(this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then((function(){return e.openElements.filter((function(e){var t=e.name.match(/base\.[A-Za-z]+\.peek\.course\.[A-Za-z]+\.peek$/);return t&&0!==t.length}))[0]}))},e.prototype.showTopPanelCloseButton=function(){this.getTopElement().then((function(e){e&&e.showCloseButton()}))},e.prototype.expandTopPanel=function(){this.getTopElement().then((function(e){e&&!e.isPanelExpanded()&&e.expandPanel()}))},e.prototype.shrinkTopPanel=function(){return this.getTopElement().then((function(e){e&&e.isPanelExpanded()&&e.expandPanel()}))},e.prototype.safeFocus=function(e){var t=this;if(this.bbOffcanvasOpening)var n=this.$rootScope.$watch((function(){return t.bbOffcanvasOpening}),(function(r){!1===r&&(n(),t.timeout((function(){e.focus()}),t.$rootScope,0,!1))}));else this.timeout((function(){e.focus()}),this.$rootScope,0,!1);this.accessibility.isFocusDelayed=!1},e.prototype.enableFocusSkipLinks=function(e){var t=this;this.$q.all([this.getTopElement(),this.getNthElementFromTop(1)]).then((function(n){var r=n[0],i=n[1];if(null!=r&&null!=i){var o=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:i.getElement().attr("data-page-title")}}),s=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:r.getElement().attr("data-page-title")}});r.enableFocusSkipLink(i,o),i.enableFocusSkipLink(r,s)}}))},e.prototype.disableFocusSkipLinks=function(){this.getTopElement().then((function(e){e&&e.disableFocusSkipLink()})),this.getNthElementFromTop(1).then((function(e){e&&e.disableFocusSkipLink()}))},e=Object(r.__decorate)([Object(r.__param)(0,Object(d.b)("$compile")),Object(r.__param)(1,Object(d.b)("$q")),Object(r.__param)(2,Object(d.b)("$rootScope")),Object(r.__param)(3,Object(d.b)(a.c)),Object(r.__param)(4,Object(d.b)(u.serviceName)),Object(r.__param)(5,Object(d.b)(c.b))],e)}(),b=function(){function e(e,t,n){this.element=e,this.accessibility=t,this.name=n}return e.prototype.getElement=function(){return this.element},e.prototype.open=function(){this.element.addClass("hide-in-background"),this.element.bbOffcanvas("open")},e.prototype.close=function(){this.element.bbOffcanvas("remove")},e.prototype.setBanner=function(){return i(this.element)[0].setBanner},e.prototype.expandPanel=function(){this.element.bbOffcanvas("expandPanel")},e.prototype.isPanelExpanded=function(){return this.element.hasClass("full")},e.prototype.hideCloseButton=function(){this.element.find(".bb-close").addClass("bb-close-hide")},e.prototype.showCloseButton=function(){this.element.find(".bb-close.bb-close-hide").removeClass("bb-close-hide")},e.prototype.enableFocusSkipLink=function(e,t){var n=this;this.element.find(".focus-skip-link").removeClass("focus-skip-link-disabled").attr("aria-label",t).on("click.focusSkip",(function(){n.element.hasClass("peek")?n.accessibility.revertAccessibilityHandling():(n.accessibility.applyAccessibilityHandlingForPanel(e.getElement()),n.accessibility.focusCorrectElementOnPanel(e.getElement()))}))},e.prototype.disableFocusSkipLink=function(){this.element.find(".focus-skip-link").addClass("focus-skip-link-disabled").off("click.focusSkip")},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(v);o.module(m,[a.b,u.moduleName,c.a]).service(f,v)},w9mJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("D57K"),i=n("wHJ2"),o="ultra.service.promiseQueue",s="promiseQueue",a=function(){function e(){this.queue=[],this.processing=!1,this.MAX_QUEUE_LENGTH=2e3}return e.prototype.enqueue=function(e){this.queue.length<this.MAX_QUEUE_LENGTH?(this.queue.push(e),this.processQueue()):console.error("Maximum queue length reached. Item was not enqueued.")},e.prototype.enqueueArray=function(e){var t=this;if(this.queue.length>0)throw Error("Queue is not currently empty. Cannot queue new array.");if(e.length>this.MAX_QUEUE_LENGTH)throw Error("Too many items to queue. "+e.length+" exceeds maximum of "+this.MAX_QUEUE_LENGTH);e.forEach((function(e){t.queue.push(e)})),this.processQueue()},e.prototype.processQueue=function(e){var t=this;if(!this.processing){var n=this.queue.shift();if(n){this.processing=!0;var r=e;try{n(e).then((function(e){r=e})).finally((function(){t.processing=!1,t.processQueue(r)}))}catch(e){throw this.processing=!1,e}}}},e.prototype._processQueue=function(){return this.processQueue()},e}(),u=function(){function e(){this.queues=Object.create(null)}return e.prototype.getQueue=function(e){var t=this.queues[e];return t||(t=this.queues[e]=new a),t},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);i.module(o,[]).service(s,u)},wDWF:function(e,t,n){"use strict";function r(e){if(!e)return 0;for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}n.d(t,"a",(function(){return r}))},wQOJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n("D57K"),i=n("5MwF"),o=n("nbDY"),s=n.n(o),a=n("Q/M7"),u=n("aHpC"),c=n("Fvsw"),l="ultra.services.institutionApi",d="institutionApi",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.V1=new t("1.0"),t.V2=new t("2.0"),t}(s.a),m=function(){function e(e,t,n){var r=this;this.$http=e,this.$q=t,this.context=n,this.getUserCanEdit=function(e){return r.canEditFetch(e).then((function(e){return e.canEdit}),(function(){return!1}))},this.getUserCanView=function(e){return r.canEditFetch(e).then((function(e){return e.ipHasVisible>0}),(function(){return!1}))},this.getEffectiveVariantIdWithPermissions=function(){var e=r.context.getBrand(),t=e.isDefault?null:e.portalBrandId;return r.getEffectivePageVariantId(t).then((function(e){return r.canEditFetch(e).then((function(t){var n=t.canEdit,r=t.ipHasVisible;return{variantId:e,canEdit:n,canView:r>0}}))})).catch((function(){return{variantId:void 0,canEdit:!1,canView:!1}}))},this.getModuleIsVisible=function(e){return r.getModuleVisibility(e).then((function(e){return e.visible}),(function(){return!1}))},this.getHealth=function(){if(r.ipHealthPromise)return r.ipHealthPromise;var e=a.c(i.a.institutionApiBasePath+"/health");return r.ipHealthPromise=r.$http.get(e,r._getConfig())},this._getConfig=function(){return{headers:{Accept:"application/json; version="+p.V2.toString()}}}}return e.prototype.importIP=function(){return Promise.all([n.e(0),n.e(4),n.e(19)]).then(n.t.bind(null,"Rhk/",7)).then((function(e){return e.default}))},e.prototype.canEditFetch=function(e){return this.$q.when(this.importIP().then((function(t){return t.pageService.canEditFetch(p.V2.toString(),e)})))},e.prototype.getEffectivePageVariantId=function(e){return this.$q.when(this.importIP().then((function(t){return t.pageService.getEffectivePageVariantId(e)})))},e.prototype.getModuleVisibility=function(e){return this.$q.when(this.importIP().then((function(t){return t.moduleService.getModuleVisibility(e)})))},e=Object(r.__decorate)([Object(r.__param)(0,Object(u.b)("$http")),Object(r.__param)(1,Object(u.b)("$q")),Object(r.__param)(2,Object(u.b)(c.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(m);angular.module(l,[c.a]).service(d,m)},wWlP:function(e,t,n){"use strict";var r=function(){var e=[],t=[];function n(){return e[e.length-1]}function r(){var e=n();t.forEach((function(t){return t(e)}))}return{add:function(t,n){e.push({key:t,value:n}),r()},addTopListener:function(e){t.push(e)},get:function(t){for(var n,r=0;r<e.length;r++)if(t===e[r].key){n=e[r];break}return n},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:n,remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t===e[i].key){n=i;break}var o=e.splice(n,1)[0];return r(),o},removeTop:function(){var t=e.splice(e.length-1,1)[0];return r(),t},length:function(){return e.length}}}();t.a=r},"x+T+":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("wHJ2"),o=n("pjml"),s="ultra.service.entitlementCache",a="entitlementCache",u="SYSTEM_ENTITLEMENTS",c=function(){function e(e,t,n){this.$q=e,this.CourseModel=t,this.EntitlementModel=n,this.entitlements=new Map,this.entitlementDefers=new Map}return e.prototype.fetchSystemEntitlements=function(){return this.EntitlementModel.$collection().$fetch().$asPromise()},e.prototype.fetchCourseEntitlements=function(e){return this.CourseModel.$new(e).entitlements.$fetch().$asPromise()},e.prototype.loadCourseEntitlements=function(e){var t=this;if(!e)return this.$q.resolve();if(this.hasCachedCourseEntitlements(e))return this.$q.resolve();var n=this.$q.defer();if(!this.entitlementDefers.has(e)){this.entitlementDefers.set(e,new Set);(e===u?this.fetchSystemEntitlements():this.fetchCourseEntitlements(e)).then((function(n){var r=n.filter((function(e){return e.hasEntitlement()})).map((function(e){return e.uid}));t.entitlements.set(e,new Set(r)),t.entitlementDefers.get(e).forEach((function(e){return e.resolve()}))}),(function(n){return t.entitlementDefers.get(e).forEach((function(e){return e.reject(n)}))})).finally((function(){return t.entitlementDefers.delete(e)}))}return this.entitlementDefers.get(e).add(n),n.promise},e.prototype.getCachedCourseEntitlements=function(e){return this.hasCachedCourseEntitlements(e)?this.entitlements.get(e):new Set},e.prototype.hasCachedCourseEntitlements=function(e){return this.entitlements.has(e)},e.prototype.clearEntitlementCache=function(e){this.entitlements.delete(e)},e.$inject=["$q",o.o.serviceName,o.A.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(c);i.module(s,[o.Q]).service(a,c)},x9Ok:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return r}));var r,i=n("D57K"),o=n("wHJ2"),s=n("aHpC"),a=n("ZzR9"),u="ultra.components.services.route.routeListener",c="routeListener",l=function(){function e(e){this.$rootScope=e}return e.prototype.addRouteListener=function(){this.$rootScope.$on(a.a.$stateChangeSuccess,(function(e,t,n){var i=t.name;d.emitRouteEvent(r.Changed,i,n)})),this.$rootScope.$on(a.a.$stateChangeStart,(function(e,t,n){var i=t.name;d.emitRouteEvent(r.Changing,i,n)}))},e=Object(i.__decorate)([Object(i.__param)(0,Object(s.b)("$rootScope"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(l);o.module(u,[]).service(c,l),function(e){e[e.Changed=0]="Changed",e[e.Changing=1]="Changing"}(r||(r={}));var d=new(function(){function e(){var e,t=this;this.subscribers=((e={})[r.Changed]=[],e[r.Changing]=[],e),this.subscribe((function(e,n){t.currentRoute={currentRouteName:e,currentParams:n}}))}return e.prototype.subscribe=function(e,t){var n=this;return void 0===t&&(t=r.Changed),this.subscribers[t].push(e),function(){n.subscribers[t]=n.subscribers[t].filter((function(t){return t!==e}))}},e.prototype.emitRouteEvent=function(e,t,n){this.subscribers[e].forEach((function(e){return e(t,n)}))},e.prototype.getCurrentRoute=function(){return this.currentRoute},e}());t.b=d},xjJw:function(e,t,n){var r=n("ziER"),i=n("5JeM"),o=new r({id:"icon-small-calendar",use:"icon-small-calendar-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-calendar"><path d="M1 15h14V2H1v13zM5 1v1h6V1H5zM5 12h1M1 6h14M5 9h1M10 12h1M10 9h1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},"xqn/":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("wHJ2"),o=n("0JpG"),s="ultra.directives.validate.time",a="bbValidateTime",u=function(){function e(e){var t=this;this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getISOTime=function(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)},this.getTimeParser=function(e,n,r,i){return function(s){if(i.$isEmpty(s))return i.$setValidity("time",!0),i.$modelValue;var a;try{a=t.bbLocalize.parseTimeSync(s,o.ILocaleTimeFormat.Short,e,i.$modelValue)}catch(e){return i.$setValidity("time",!1),i.$modelValue}return i.$setValidity("time",!0),(s="time"===r.type?t.getISOTime(a):t.formatTime(a,e))!==i.$viewValue&&(i.$setViewValue(s),n.is(":focus")||i.$render()),a}},this.getTimeFormatter=function(e,n,r,i){return function(){i.$setValidity("time",!0);var o=i.$modelValue;return i.$isEmpty(o)?n.val():"time"===r.type?t.getISOTime(o):t.formatTime(o,e)}},this.link=function(e,n,r,i){i.$parsers.push(t.getTimeParser(e,n,r,i)),i.$formatters.push(t.getTimeFormatter(e,n,r,i)),n.on("blur",(function(){i.$render()}))}}return e.prototype.formatTime=function(e,t){return"ar-sa"===this.bbLocalize.getLocale(t)?this.getISOTime(e):this.bbLocalize.formatTimeSync(e,o.ILocaleTimeFormat.Short,t)},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.__extends)(t,e)}(u);i.module(s,[o.moduleName]).directive(a,[o.serviceName,function(e){return new u(e)}])},y3by:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.content-market.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("content-market",{url:"/contentmarket?parentId&positionBefore&positionAfter&position",require:function(){return Promise.all([n.e(10),n.e(64),n.e(129),n.e(594)]).then(n.bind(null,"NZF1"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])}]},panelClass:"full",pageTitle:"course.contentMarket.contentMarketName",peekStates:["partner-tool","lti"],params:{mode:null}})}])},yA26:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return a})),n.d(t,"controllerName",(function(){return u})),n.d(t,"template",(function(){return c})),n.d(t,"requireName",(function(){return l})),n.d(t,"BbOffcanvasController",(function(){return d})),n.d(t,"Controller",(function(){return p}));var r=n("D57K"),i=n("wHJ2"),o=n("w9Zy"),s=n("aHpC"),a="ultra.controllers.bbOffcanvas",u="BbOffcavasController",c="",l="components/services/bb-offcanvas/bb-offcanvas-controller",d=function(){function e(e,t,n){var r=t.open({template:e.template,trapFocus:e.trapFocus,panelClass:e.panelClass||"peek",pageTitle:e.pageTitle,anchor:e.anchor,showType:e.showType,container:e.container,scope:e.scope||n,close:e.close,closed:e.closed,open:e.open,opened:e.opened,overlay:null==e.overlay||e.overlay,stateName:e.stateName,disableFocusHandling:!!e.disableFocusHandling,banner:e.banner});t.addBbOffcanvasElementPromise(r,e.stateName)}return e=Object(r.__decorate)([Object(r.__param)(0,Object(s.b)("offCanvasArgs")),Object(r.__param)(1,Object(s.b)(o.e)),Object(r.__param)(2,Object(s.b)("$scope"))],e)}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(d);i.module(a,[o.d]).controller(u,d)},yC9S:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a}));var r=n("wHJ2"),i=n("nsO7"),o=function(){function t(){}return t.OnRootScope=function(e,n,r){return t.unbindOnDestroy(e,e.$root.$on(n,r))},t.OnScope=function(e,n,r){return t.unbindOnDestroy(e,e.$on(n,r))},t.unbindOnDestroy=function(e,t){return e.$on("$destroy",t),t},t.OnWindow=function(n,r,o){var s=e(window);s.on(n,r);var a=Object(i.once)((function(){return s.off(n,r)}));return t.unbindOnDestroy(o,a),a},t}();function s(e){return function(t){if(!e.module&&!e.moduleName)throw Error("Component must define a module or moduleName");(e.module?e.module:r.module(e.moduleName,e.requireModules||[])).component(e.componentName,r.extend(e,{controller:t}))}}var a=function(){function e(e){this.$ngRedux=e}return e.prototype.$onInit=function(){var e=this;this.unsubscribeRedux=this.$ngRedux.connect(this.mapStateToProps.bind(this),this.selectActions()||this.mapDispatchToActions.bind(this))((function(t,n){e.componentWillReceiveState(t),e.actions=n,e.props=t}))},e.prototype.$onDestroy=function(){this.unsubscribeRedux()},e.prototype.selectActions=function(){return{}},e.prototype.mapDispatchToActions=function(e){return{}},e}()}).call(this,n("5iHu"))},yCC5:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"Ub",(function(){return l})),n.d(t,"Vb",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return h})),n.d(t,"u",(function(){return g})),n.d(t,"v",(function(){return v})),n.d(t,"D",(function(){return b})),n.d(t,"U",(function(){return y})),n.d(t,"kb",(function(){return S})),n.d(t,"vb",(function(){return C})),n.d(t,"Eb",(function(){return w})),n.d(t,"t",(function(){return k})),n.d(t,"w",(function(){return I})),n.d(t,"y",(function(){return T})),n.d(t,"x",(function(){return E})),n.d(t,"A",(function(){return $})),n.d(t,"E",(function(){return P})),n.d(t,"F",(function(){return A})),n.d(t,"H",(function(){return O})),n.d(t,"z",(function(){return _})),n.d(t,"s",(function(){return D})),n.d(t,"Yb",(function(){return x})),n.d(t,"I",(function(){return R})),n.d(t,"J",(function(){return M})),n.d(t,"P",(function(){return N})),n.d(t,"Q",(function(){return j})),n.d(t,"B",(function(){return L})),n.d(t,"C",(function(){return U})),n.d(t,"N",(function(){return G})),n.d(t,"O",(function(){return F})),n.d(t,"R",(function(){return B})),n.d(t,"S",(function(){return q})),n.d(t,"T",(function(){return H})),n.d(t,"K",(function(){return V})),n.d(t,"L",(function(){return z})),n.d(t,"M",(function(){return K})),n.d(t,"W",(function(){return J})),n.d(t,"G",(function(){return W})),n.d(t,"l",(function(){return Q})),n.d(t,"m",(function(){return Y})),n.d(t,"n",(function(){return Z})),n.d(t,"p",(function(){return X})),n.d(t,"o",(function(){return ee})),n.d(t,"q",(function(){return te})),n.d(t,"V",(function(){return ne})),n.d(t,"X",(function(){return re})),n.d(t,"cb",(function(){return ie})),n.d(t,"hb",(function(){return oe})),n.d(t,"eb",(function(){return se})),n.d(t,"fb",(function(){return ae})),n.d(t,"r",(function(){return ue})),n.d(t,"gb",(function(){return ce})),n.d(t,"jb",(function(){return le})),n.d(t,"db",(function(){return de})),n.d(t,"Y",(function(){return pe})),n.d(t,"Z",(function(){return me})),n.d(t,"ib",(function(){return fe})),n.d(t,"bb",(function(){return he})),n.d(t,"ab",(function(){return ge})),n.d(t,"lb",(function(){return ve})),n.d(t,"mb",(function(){return be})),n.d(t,"nb",(function(){return ye})),n.d(t,"pb",(function(){return Se})),n.d(t,"ob",(function(){return Ce})),n.d(t,"qb",(function(){return we})),n.d(t,"rb",(function(){return ke})),n.d(t,"sb",(function(){return Ie})),n.d(t,"tb",(function(){return Te})),n.d(t,"ub",(function(){return Ee})),n.d(t,"wb",(function(){return $e})),n.d(t,"Cb",(function(){return Pe})),n.d(t,"yb",(function(){return Ae})),n.d(t,"Ab",(function(){return Oe})),n.d(t,"xb",(function(){return _e})),n.d(t,"zb",(function(){return De})),n.d(t,"Bb",(function(){return xe})),n.d(t,"Db",(function(){return Re})),n.d(t,"Fb",(function(){return Me})),n.d(t,"Gb",(function(){return Ne})),n.d(t,"Jb",(function(){return je})),n.d(t,"Ob",(function(){return Le})),n.d(t,"Lb",(function(){return Ue})),n.d(t,"Pb",(function(){return Ge})),n.d(t,"Rb",(function(){return Fe})),n.d(t,"Ib",(function(){return Be})),n.d(t,"Qb",(function(){return qe})),n.d(t,"Nb",(function(){return He})),n.d(t,"Kb",(function(){return Ve})),n.d(t,"Mb",(function(){return ze})),n.d(t,"Hb",(function(){return Ke})),n.d(t,"Wb",(function(){return Je})),n.d(t,"Sb",(function(){return We})),n.d(t,"Tb",(function(){return Qe})),n.d(t,"Xb",(function(){return Ye})),n.d(t,"Zb",(function(){return Ze})),n.d(t,"ac",(function(){return Xe})),n.d(t,"bc",(function(){return et})),n.d(t,"dc",(function(){return tt})),n.d(t,"ec",(function(){return nt})),n.d(t,"cc",(function(){return rt})),n.d(t,"fc",(function(){return it})),n.d(t,"gc",(function(){return ot})),n.d(t,"hc",(function(){return st})),n.d(t,"ic",(function(){return at})),n.d(t,"jc",(function(){return ut})),n.d(t,"kc",(function(){return ct})),n.d(t,"lc",(function(){return lt})),n.d(t,"mc",(function(){return dt})),n.d(t,"nc",(function(){return pt})),n.d(t,"oc",(function(){return mt})),n.d(t,"pc",(function(){return ft})),n.d(t,"qc",(function(){return ht})),n.d(t,"rc",(function(){return gt})),n.d(t,"sc",(function(){return vt})),n.d(t,"tc",(function(){return bt})),n.d(t,"uc",(function(){return yt})),n.d(t,"vc",(function(){return St})),n.d(t,"xc",(function(){return Ct})),n.d(t,"wc",(function(){return wt})),n.d(t,"yc",(function(){return kt})),n.d(t,"zc",(function(){return It})),n.d(t,"Ac",(function(){return Tt}));var r="AnalyticsEventModel",i="AnalyticsForLearnModel",o="AnnotationsModel",s="AnnouncementModel",a="AllyModel",u="AssessmentDetail",c="AssessmentExceptionModel",l="Question",d="QuestionAttempt",p="BlockedUserModel",m="BrandModel",f="CalendarModel",h="CalendarItemModel",g="CourseCalendarsModel",v="CourseCalendarItemModel",b="CourseDueDateCalendarItemModel",y="DueDateCalendarItemModel",S="InstitutionCalendarItemModel",C="OfficeHoursModel",w="PersonalCalendarItemModel",k="CourseModel",I="CourseCollab",T="CourseCollabUltra",E="CourseCollabSession",$="CourseContentModel",P="CourseEngagementParticipant",A="CourseEngagementUserStateModel",O="CourseExportModel",_="CourseConditionalReleaseModel",D="ConversionTaskModel",x="ScheduledTaskModel",R="CourseForumModel",M="CourseForumCountModel",N="CourseMessageModel",j="CourseMessageFolderModel",L="CourseConversationModel",U="CourseConversationMessageModel",G="CourseMembershipModel",F="CourseMembershipInviteModel",B="CoursePreferenceModel",q="CourseRole",H="CourseScheduleModel",V="CourseGroupModel",z="CourseGroupAssociationModel",K="CourseIndicatorModel",J="ExternalCourse",W="CourseEntitlementModel",Q="CloudDriveModel",Y="CloudDriveContent",Z="CloudDriveDownloadMessage",X="CloudDriveTask",ee="CloudDriveMeModel",te="CollabUltraPing",ne="EntitlementModel",re="FileModel",ie="GradeAttemptModel",oe="GradeGroupAttemptModel",se="GradeCategoryModel",ae="GradeColumnModel",ue="ColumnSummaryModel",ce="GradeDetailModel",le="GradeSchemaModel",de="GradeBulkViewModel",pe="GradebookModel",me="GradebookSettingsModel",fe="GradeNotationModel",he="GradedQuestionAttemptModel",ge="GradedOriginalityModel",ve="InstitutionRoleModel",be="LanguagesModel",ye="LtiDomainConfigModel",Se="LtiSettingsModel",Ce="LtiPlacementModel",we="MyPreferenceModel",ke="NotificationModel",Ie="NotificationGeneralSettingsModel",Te="NotificationSettingModel",Ee="NotificationSettingsContainerModel",$e="PartnerModel",Pe="PartnerStatusModel",Ae="PartnerCourseModel",Oe="PartnerLinkedCourseModel",_e="PartnerContentIdModel",De="PartnerGradeModel",xe="PartnerSettingsModel",Re="PartnerToolModel",Me="PredictCourseModel",Ne="PredictCourseSearch",je="PredictFavoriteModel",Le="PredictPreferences",Ue="PredictInstitutionPreference",Ge="PredictSettingsModel",Fe="PredictSystemSettingsModel",Be="PredictDynamicOptionModel",qe="PredictStudentModel",He="PredictPermissionsModel",Ve="PredictFtueModel",ze="PredictNoteModel",Ke="PredictCustomFieldSettingsModel",Je="RiskBucketDistributionModel",We="PrivacyPolicyModel",Qe="ProctoringServiceModel",Ye="Rubric",Ze="ScormReportItemModel",Xe="StagedAttemptGradeModel",et="StreamModel",tt="SystemInfoModel",nt="SystemPreferenceModel",rt="StudentPreviewModel",it="TargetedNotificationModel",ot="TelemetryActivityVsGradeModel",st="TelemetryContentActivityInDetailModel",at="TelemetryCourseActivityModel",ut="TelemetryCourseGradesModel",ct="TelemetryCourseNotificationsModel",lt="TelemetryDiscussionActivityModel",dt="TelemetryDiscussionXrayModel",pt="TelemetryMultimediaActivityInDetailModel",mt="TelemetryMultimediaStatisticsModel",ft="TelemetryNotificationsModel",ht="TelemetryNotificationUsersModel",gt="TelemetryStudentActivityModel",vt="TelemetryStudentGradesModel",bt="TelemetrySufficientDataModel",yt="TermModel",St="ThemeModel",Ct="ToolAvailabilityModel",wt="ToolsModel",kt="TrialSupportTicketsModel",It="UploadingFile",Tt="UserModel"},yCJt:function(e,t){e.exports='<svg id="icon-large-avatar-multiple" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><g fill="none"  stroke-miterlimit="10"><path d="M37.685 17.545C37.976 12.214 41.593 8 46.012 8c4.609 0 8.345 4.583 8.345 10.237s-3.737 10.237-8.345 10.237c-1.683 0-3.25-.612-4.562-1.663"/><path d="M44.685 44.789h11.676C57.996 42.569 59 39.838 59 36.846c0-5.068-2.81-9.419-6.894-11.656M18.949 26.469c-1.387 1.26-3.103 2.005-4.962 2.005-4.609 0-8.345-4.583-8.345-10.237S9.379 8 13.987 8c4.39 0 7.988 4.158 8.32 9.438"/><path d="M7.894 25.191C3.81 27.428 1 31.779 1 36.847c0 2.992 1.004 5.722 2.639 7.943H15.27"/><g><ellipse cx="30" cy="27.514" rx="11.266" ry="13.223"/><path d="M19.619 32.661c-2.532 3.407-4.644 8.708-4.644 13.758 0 2.317.343 4.528.942 6.581h28.167c.599-2.054.942-4.264.942-6.581 0-5.09-2.075-10.343-4.644-13.758"/></g></g></svg>'},yDoS:function(e,t,n){},yGso:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("wHJ2"),i=n("k9iv"),o=n("0JpG"),s=n("w9Zy"),a=n("Fvsw"),u=n("ZzN+"),c=n("pjml"),l=n("TnpK"),d="ultra.base.courses.routes";r.module(d,[i.b,o.moduleName,a.a,s.d,c.Q,l.b,u.a]).config([l.c,function(e){e.peekState("external",{abstract:!0}).peekState("external.create",{url:"/external/create",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/courses/external/external-course")}]},require:function(){return Promise.all([n.e(3),n.e(12),n.e(27),n.e(140)]).then(n.bind(null,"hwlu"))},pageTitle:"course.external.panelTitleAdd"}).peekState("external.edit",{url:"/external/edit/:id",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/courses/external/external-course")}]},require:function(){return Promise.all([n.e(3),n.e(12),n.e(27),n.e(140)]).then(n.bind(null,"hwlu"))},pageTitle:"course.external.panelTitleEdit"}).peekState("external.description",{url:"/external/description/:courseId",resolve:{currentCourse:["$stateParams",c.o.serviceName,c.B.serviceName,function(e,t,n){var r=e.courseId;return n.$new(r).$fetch().$asPromise().then((function(e){var n=t.$new();return n.id=e.id,n.name=e.title,n.description=e.description,n.displayName=e.title,n}))}],translations:[o.serviceName,function(e){return e.loadBundle("features/course/description/course-description")}]},require:function(){return n.e(137).then(n.bind(null,"8WQs"))},pageTitle:"course.description.header"}).peekState("course-edit-banner",{url:"^/courses/:id/editBanner",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/edit-banner/edit-banner")}]},require:function(){return n.e(123).then(n.bind(null,"WXoY"))},pageTitle:"course.editBanner.pageTitle",panelClass:"peek"}).peekState("organization-edit-banner",{url:"^/organizations/:id/editBanner",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/edit-banner/edit-banner")}]},require:function(){return n.e(123).then(n.bind(null,"WXoY"))},pageTitle:"course.editBanner.pageTitle",panelClass:"peek"})}])},yXB1:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("wHJ2"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.exports.router";r.module(s,[o.b,i.moduleName]).config([o.c,function(e){e.peekState("exports",{url:"/exportsPanel",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/exports/course-export")}]},require:function(){return n.e(618).then(n.bind(null,"m+3A"))},pageTitle:"course.export.exportPanel.head"})}])},"yo/t":function(e,t){e.exports='<div>\n  <div class="notification-container {{::toastStatus()}}">\n    <div class="close-notification">&times;</div>\n    <div class="progress-indicator icon">\n      <i class="{{::toastIcon()}}"></i>\n    </div>\n    <span class="progress-status {{::toastClass()}}">\n    </span>\n  </div>\n</div>\n'},yq4x:function(e,t,n){},yytE:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.content.ltiNeedsApprovalTitle"\n          analytics-id-tag-prefix="course.content.ltiNeedsApproval">\n  <div name="modal-contents">\n    <p ng-if="hasEmail" bb-translate>course.content.ltiNeedsApprovalDescription</p>\n    <p ng-if="hasEmail"><a href="mailto:{{ ::email }}" analytics-id="components.services.lti.needsApproval.email.link">{{ ::email }}</a></p>\n    <p ng-if="!hasEmail" bb-translate>course.content.ltiNeedsApprovalDescriptionNoEmail</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="global.ok"\n          bb-translate>global.ok</button>\n</bb-modal>'},z6Q5:function(e,t,n){"use strict";var r=n("nsO7"),i=n("wHJ2"),o=n("5MwF"),s=n("lEL+"),a=[];function u(){return a[a.length-1]}n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d}));var c="ultra.service.batch-utility-rest-api",l="ultra.service.batch-utility-rest-api.service",d="batch-utility-rest-api-param",p=[];function m(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var f=function(e,t,n,r){this.position=e,this.deferred=t,this.reqConfig=n,this.token=r},h=0;i.module(c,["ng",s.a]).config(["$httpProvider",function(e){e.interceptors.push(["$injector","$log",function(e,t){var n={};return{request:function(s){var a,u=e.get("$q");if(s.params&&s.params[d]&&new RegExp("^"+m(s.params[d].baseUrl)).test(s.url)){var c=u.defer(),l=s.params[d];return delete s.params[d],l.trackId=l.trackId||""+h++,Object.prototype.hasOwnProperty.call(n,l.trackId)||(n[l.trackId]={token:l,queue:[]},l.sendDeferred.promise.then((a=l.trackId,function(){var s=n[a],u=new RegExp("^"+m(s.token.baseUrl));!o.a.features.batchRestAPI&&s.token.batchUrl===o.a.apiBasePath+"/v1/utilities/batch"||1===s.queue.length?(delete n[a],e.get("$q").all(s.queue.map((function(t){var n=function(e){return t.deferred.resolve(i.extend({},t.reqConfig,{method:"JSONP",cache:{get:function(){return[e.status,e.data,e.headers]}}})),{statusCode:e.status,body:e.data,method:t.reqConfig.method,headers:{},relativeUrl:t.reqConfig.url.replace(o.a.apiBasePath+"/","")}};return e.get("$http")(t.reqConfig).then(n,n)}))).then((function(e){s.token.finalDeferred.resolve(e)}))):s.queue.length>1?e.get("$http")({method:"PUT",url:s.token.batchUrl,data:s.queue.map((function(e,n){var i=e.reqConfig;return t.debug(i.method+" "+i.url+' will be sent by batch request "'+s.token.batchUrl+"?xb="+s.token.trackId+"["+n+']"'),{method:i.method,relativeUrl:i.url.replace(u,"")+"?"+r(i.params).omitBy(r.isUndefined).map((function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)})).value().join("&"),body:i.data}})),params:{xb:a}}).then((function(e){s.queue.forEach((function(t){var n=t.reqConfig,r=e.data[t.position];t.deferred.resolve(i.extend({},n,{method:"JSONP",cache:{get:function(){return[r.statusCode,r.body,r.headers]}}}))})),s.token.finalDeferred.resolve(e.data),delete n[a]})):(s.token.finalDeferred.resolve([]),delete n[a])}))),n[l.trackId].queue.push(new f(n[l.trackId].queue.length,c,s,l)),c.promise}return u.when(s)}}}])}]).config(["$provide",function(e){e.decorator("$http",["$delegate",function(e){var t=function(t){var n;return p.length>0&&(t.params=t.params||{},Object.prototype.hasOwnProperty.call(t.params,d)||(t.params[d]=r.last(p))),u()&&u().$emit("BEFORE_REQUEST",t),void 0!==(n=(t.params||{})[d])&&(n.totalRequests=(n.totalRequests||0)+1),e(t)};return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.each(e,(function(e){t[e]=function(n,r){return t(i.extend({},r||{},{method:e,url:n}))}}))}("get","delete","head","jsonp"),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.each(e,(function(e){t[e]=function(n,r,o){return t(i.extend({},o||{},{method:e,url:n,data:r}))}}))}("post","put","patch"),function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];r.each(n,(function(n){Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}))}("defaults","pendingRequests"),t}])}]).factory(l,["$rootScope","$q","$log",s.b,function(e,t,n,i){return{performBatch:function(e,t,n){var r=this.newToken.apply(this,Array.prototype.slice.call(arguments).splice(1));p.push(r);var i=this.awaitBatch(e);return r.autoSend=!0,i()},awaitBatch:function(e){if(0===p.length)throw new Error("No batch token in current context! Please invoke in the callstack of performBatch");var i=r.last(p);return i.autoSend=!1,function(){var o;r.last(p)!==i&&p.push(i),i.autoSend=!0;try{o=e(i)}catch(e){n.error(e)}return p.pop(),i.autoSend&&i.send(),o?t.resolve(o):i.finalDeferred.promise}},newToken:function(e,n){void 0===e&&(e=o.a.apiBasePath+"/v1/utilities/batch"),void 0===n&&(n=o.a.apiBasePath+"/");var r=t.defer();return{send:function(){return this.totalRequests?this.sendDeferred.resolve():this.finalDeferred.resolve([]),this.finalDeferred.promise},sendDeferred:t.defer(),finalDeferred:r,batchUrl:e,baseUrl:n,autoSend:!1,promise:r.promise,totalRequests:0}}}}])},zFCC:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("nsO7"),i=n("wHJ2"),o=n("lEL+"),s="ultra.service.intersectionobserver.directive",a="bbIntersectionObserver";i.module(s,[o.a]).directive(a,[function(){return{restrict:"A",scope:!1,controller:["$scope","$element",o.b,function(e,t,n){if("IntersectionObserver"in window){var i=[],o=new IntersectionObserver((function(t){r(t).map((function(e){return{entry:e,data:r.find(i,(function(t){return t.el===e.target}))}})).each((function(e){var t=e.entry,n=e.data;n.fn(n.el,n.scope,t)&&(r.remove(i,(function(e){return e.el===t.target})),o.unobserve(t.target))})),n(r.noop,e)}),{root:null,rootMargin:"0px",threshold:0});e.$on("$destroy",(function(){o.disconnect()})),Object.assign(this,{link:function(e,t,n){t.$on("$destroy",(function(){o.unobserve(e),r.remove(i,(function(t){return t.el===e}))})),o.observe(e),i.push({el:e,scope:t,fn:n})},unlink:function(e){o.unobserve(e),r.remove(i,(function(t){return t.el===e}))}})}else Object.assign(this,{link:function(e,t,n){n(e,t,{isIntersecting:!0,boundingClientRect:void 0,intersectionRatio:void 0,intersectionRect:void 0,rootBounds:void 0,target:e,time:void 0})},unlink:r.noop})}]}}])},zJ62:function(e,t,n){},zXZW:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("wHJ2"),i=n("4HXK"),o="ultra.services.errorHandler",s=["$delegate","$injector",function(e,t){var n;return Object.assign((function(r,o){e(r,o),n||(n=t.get(i.b)),"undefined"!=typeof NREUM&&NREUM.noticeError(r)}),e)}];r.module(o,[i.a]).config(["$provide",function(e){e.decorator("$exceptionHandler",s)}])},zYa8:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("wHJ2"),o=n("ERkP"),s=n("1ZbL"),a=n("mweN"),u=n("eqO1");function c(e,t,n){var c={Class:function(t){return o.createElement(a.a,{theme:u.bbTheme},o.createElement(e,Object(r.__assign)({},t)))},attributes:["color","fillColor","className","titleAccess"]};i.module(t,[]).component(n,Object(s.a)(c))}},zlFc:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-forbidden.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-forbidden">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-forbidden.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'}});