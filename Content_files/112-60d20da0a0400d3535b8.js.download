(window.webpackJsonp=window.webpackJsonp||[]).push([[112,31,36,49,56,60],{"/BCe":function(e,t){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-forumlink" class="content-title"\n     bb-peek-sref="discussion.view.with-grading({contentId:\'{{targetContent.id}}\'})"\n     bb-prevent-click-if="targetContent.isConditionalReleaseLocked()" \n     aria-describedby="{{ariaDescribedBy}}"\n     analytics-id="course.link.item.forumLink.link"><span>{{ content.title }}</span></a>\n  <div ng-switch-default class="content-title">{{ content.title }}</div>\n</ng-switch>'},"/R3n":function(e,t){e.exports='<div>\n  <div class="name">\n    <ng-switch on="::content.getContentDisplay().linkAction()" ng-class="{\'has-indicator\': content.ui.hasIndicator}">\n      <div ng-switch-when="resource/x-bb-folder">\n        <bb-content-item-folder></bb-content-item-folder>\n      </div>\n      <div ng-switch-when="contenturl">\n        \x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n        <a bb-prevent-click-if="content.isConditionalReleaseLocked()"\n            ng-click="contentItemBase.markCompleted()"\n            ng-href="{{content.getContentDisplay().contentUrl()}}" target="_blank" rel="noopener noreferrer" class="content-title"\n            ng-class="{\'name-middle\': contentItemCourseOutline.shouldAlignMiddle()}"\n            aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n            analytics-id="content.item.course.outline.courseContent.link">\n          <span>{{ content.title }}</span>\n        </a>\n      </div>\n      <div ng-switch-when="ltilaunch">\n        <bb-content-item-ltilaunch></bb-content-item-ltilaunch>\n      </div>\n      <div ng-switch-when="scormlaunch">\n        <bb-content-item-scormlaunch></bb-content-item-scormlaunch>\n      </div>\n      <div ng-switch-when="resource/x-bb-asmt-agn-link">\n        \x3c!-- open  edit page when an instructor(=entitledToDesignAssessment) is accessing an assignment in a complete course. page will become read only based on canEdit() --\x3e\n        <a ng-if="contentItemBase.entitledToDesignAssessment"\n           class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           bb-peek-sref="gradebook-item.assignment({\n                                 courseId: content.courseId,\n                                 contentId: content.id,\n                                 gradeitemView: \'details\' })"\n           analytics-id="content.item.course.outline.gradebook.item.assignment.link"><span>{{ content.title }}</span></a>\n        \x3c!-- user cannot modify --\x3e\n        <a ng-if="!contentItemBase.entitledToDesignAssessment"\n           bb-peek-sref="assignment.view({assignmentId:content.id})" bb-prevent-click-if="content.isConditionalReleaseLocked()"\n           ng-class="{\'is-late\': contentItemBase.isLate, \'is-restricted\': content.isRestricted()}"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           class="content-title"\n           analytics-id="content.item.course.outline.gradebook.item.assignment.readOnly.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-assignment">\n        <a bb-peek-sref="assignment.view({assignmentId:content.id})" class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           ng-class="{\'is-late\': contentItemBase.isLate}"\n           analytics-id="content.item.coures.outline.assignment.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-document">\n        <a bb-peek-sref="content-manage.edit.document({id:content.id})" class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           ng-class="{\'is-late\': contentItemBase.isLate}"\n           analytics-id="content.item.coures.outline.document.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-page">\n        <bb-content-item-page></bb-content-item-page>\n      </div>\n      <div ng-switch-when="resource/x-bb-asmt-test-link">\n        \x3c!-- open edit page when an instructor(=entitledToDesignAssessment) is accessing content. In a complete course, page will become read only based on canEdit() --\x3e\n        <a ng-if="contentItemBase.entitledToDesignAssessment" class="content-title"\n           bb-peek-sref="gradebook-item.assessment({\n                                 courseId: content.courseId,\n                                 contentId: content.id,\n                                 gradeitemView: \'details\',\n                                 assessmentType: \'test\'})"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           analytics-id="content.item.courses.outline.gradebook.item.assessment.link"><span>{{ content.title }}</span></a>\n        \x3c!-- user cannot modify --\x3e\n        <a ng-if="!contentItemBase.entitledToDesignAssessment" href="javascript:void(0);"\n           ng-click="contentItemBase.openAssessmentItem()" bb-prevent-click-if="content.isConditionalReleaseLocked()"\n           ng-class="{\'is-late\': contentItemBase.isLate, \'is-restricted\': content.isRestricted()}"\n           class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           analytics-id="content.item.courses.outline.gradebook.item.assessment.readOnly.link"><span>{{ content.title }}</span></a>\n      </div>\n      <a ng-switch-when="resource/x-bb-forumlink" bb-peek-sref="discussion.view.with-grading({contentId:content.id})"\n         bb-prevent-click-if="content.isConditionalReleaseLocked()"\n         class="content-title" aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n         analytics-id="content.item.courses.outline.gradebook.item.forum.link"><span>{{ content.title }}</span></a>\n      <div ng-switch-when="resource/x-bb-courselink">\n        <bb-course-link-item content="content" target-content="contentItemBase.targetContent" prefix="\'course.outline\'"/>\n      </div>\n      <div ng-switch-when="resource/x-bb-journallink">\n        <a bb-peek-sref="journal.view.with-participation({contentId:content.id})"\n          bb-prevent-click-if="content.isConditionalReleaseLocked()"\n          class="content-title" aria-describedby="activity-indicator-{{::content.id}}"\n          analytics-id="content.item.courses.outline.journal.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-default class="content-title">{{ content.title }}</div>\n      <bb-svg-icon role="img" aria-hidden="false" bb-translate-attrs="::{\'aria-label\':\'components.directives.content-item-base.aria-label.indicator\'}" ng-if="content.ui.hasIndicator" id="activity-indicator-{{::content.id}}" class="indicator" size="small" icon="activity-indicator"></bb-svg-icon>\n    </ng-switch>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date">\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-if="!dueDate" class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-if="dueDate && !gradeDetail" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-if="dueDate && !gradeDetail" class="content-due-date"></bb-datetime>\n    <span ng-if="content.getTimedTestDetail().hasTimeLimit" class="time-limit ellipse">\n      <span class="vertical-bar"></span>\n      <span bb-translate>components.directives.content-item-base.time-limit</span>\n      <span>{{content.getTimedTestDetail().displayedTimeLimitSeconds | timeSpan: "m": this }}</span>\n    </span>\n    <span ng-if="contentItemCourseOutline.getExtraRequirementsSummary() !== null">\n      <span class="vertical-bar"></span>\n      <span bb-translate class="js-extra-requirements">{{::contentItemCourseOutline.getExtraRequirementsSummary()}}</span>\n    </span>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date"\n       ng-class="{\'is-late\': contentItemBase.isLate}" ng-switch="dueDate != null">\n    \x3c!-- submission card --\x3e\n    \x3c!--  TODO: submissionCard is disabled until LRN-101279 is fixed --\x3e\n    \x3c!-- <bb-submission-card ng-if="gradeDetail"  grade-detail="gradeDetail" inline="true"></bb-submission-card>\n    <bb-submission-card ng-if="!gradeDetail" grading-column="gradingColumn" inline="true"></bb-submission-card> --\x3e\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-switch-default class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-switch-when="true"\n          class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-switch-when="true" class="content-due-date"></bb-datetime>\n    <span ng-if="content.getTimedTestDetail().hasTimeLimit" class="time-limit ellipse">\n      <span class="vertical-bar"></span>\n      <span bb-translate>components.directives.content-item-base.time-limit</span>\n      <span>{{content.getTimedTestDetail().displayedTimeLimitSeconds | timeSpan: "m": this }}</span>\n    </span>\n    <span ng-if="contentItemCourseOutline.getExtraRequirementsSummary() !== null">\n      <span class="vertical-bar"></span>\n      <span bb-translate class="js-extra-requirements">{{::contentItemCourseOutline.getExtraRequirementsSummary()}}</span>\n    </span>\n  </div>\n  <div ng-if="contentItemBase.isPeerGradingConfigured" class="peer-review-due-date" bb-feature-toggle="peerAssessmentFeatureFlag" remove-from-dom="true">\n    <bb-svg-icon size="small" icon="peer-review"></bb-svg-icon>\n    <span bb-translate class="content-peer-review-due-date-label"\n          translate-values="{peerReviewsNumber: contentItemBase.peerReviews, datetime: contentItemBase.peerDueDate}">\n      components.directives.content-item-base.peer-review-due-date\n    </span>\n    <div ng-if="contentItemBase.contextCourseMembership.isStudentMembership()">\n      <button class="peer-review-info-tooltip"\n        bb-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-open-on-activation="true"\n        tooltip-disable-on-mouse-over="false"\n        bb-translate-attrs="{ \'title\': \'components.directives.content-item-base.peerReview.information-tooltip\' }"\n        analytics-id="components.directives.content-item-base.peerGrading.tooltip.button"\n      >\n        <bb-svg-icon class="stop-click-propagation" size="small" icon="information"></bb-svg-icon>\n      </button>\n    </div>\n  </div>\n  <div ng-if="contentItemBase.isModifyPermissionLoaded && content.canHaveAttempts() && content.isGroupContent" class="group-info">\n    <div class="guidance-wrapper">\n      <div class="group-name">\n        <span><bb-svg-icon size="small" icon="groups"></bb-svg-icon></span>\n        <span class="group-target-guided" bb-guidance-target component-key="contentGroupInfo"\n              ng-if="!contentItemBase.contextCourse.course.isComplete()">\n        </span>\n        <a ng-if="contentItemBase.hasViewGroupsAsAdmin"\n           class="js-groups-link"\n           href="javascript:void(0);"\n           ng-click="contentItemBase.editGroups()"\n           analytics-id="content.item.course.outline.contentItemBase.editGroups.link">\n          <bb-group-count content="content"></bb-group-count>\n        </a>\n        <span ng-if="contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin" class="js-groups-link">\n          <bb-group-count content="content"></bb-group-count>\n        </span>\n        <div ng-if="!(contentItemBase.canViewGroups || contentItemBase.hasViewGroupsAsAdmin)" class="student-group-enrollment">\n          <bb-group-student-enrollment content="content"></bb-group-student-enrollment>\n        </div>\n        \x3c!-- For complete course, will not show this guidance: LRN-107718 --\x3e\n        <span>\n          <bb-guidance ng-if="!contentItemBase.contextCourse.course.isComplete() && !contentItemBase.entitledToDesignAssessment" component-key="contentGroupInfo"\n                       class="guidance-element-group guidance-is-empty-student guidance-element-overlay push-left">\n            <span bb-translate="{{::contentItemCourseOutline.groupAssessmentFtueKey}}" translate-values="{title: contentItemCourseOutline.customCategory}"></span>\n          </bb-guidance>\n        </span>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.isConditionalReleaseLocked()"\n    role="tooltip"\n    tabindex="0"\n    class="lock-info"\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    tooltip-position="bottom"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n    tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n    <span bb-translate="components.directives.content-item-base.conditionalRelease.lock-info"></span>\n    <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n  </div>\n  <div class="name-controls stop-click-propagation"\n    ng-class="{\n      \'name-conditional-release\': !content.canViewAsInstructor() && content.isConditionalReleaseLocked(),\n      \'selector-disabled\': content.isInForcedSequenceModule()\n    }"\n    ng-if="contentItemBase.showVisibility()">\n    <bb-content-visibility-selector content="content"\n                                    link-content="contentItemBase.targetContent"\n                                    onchange-func="contentItemBase.updateContentVisibility()"\n                                    open-panel-on-restricted="true"\n                                    enable-conditional-release="content.canAccessAdaptiveRelease()"\n                                    disable-restricted="contentItemBase.disableRestricted"\n                                    verbose-restricted-label="true"></bb-content-visibility-selector>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.isConditionalRelease()" class="conditional-release-control"\n       ng-class="{\'conditional-release-control-for-complete-course\': contentItemCourseOutline.isCourseCompletedAndInInstructorView()}">\n    <div class="rules">\n      <a href="javascript:void(0);"\n        ng-click="contentItemCourseOutline.canOpenConditionalRelease && contentItemCourseOutline.openConditionalRelease()"\n        bb-complex-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-disable-on-mouse-over="{{!contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-enable-on-mouse-leave-for-all-breakpoints="{{contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-enable-on-mouse-over-for-all-breakpoints="{{contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-open-on-activation="{{!contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-auto-update="true"\n        tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n        tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n        analytics-id="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}.link">\n        <span bb-translate="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}"></span>\n        <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},"/hmo":function(e,t){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-blti-link" \n     bb-component-sref="{{prefix}}.engagement.edit({contentId:\'{{targetContent.id}}\'})"\n     class="content-title"\n     analytics-id="course.content.lti.link"><span>{{ content.title }}</span></a>\n</ng-switch>\n'},"/oLk":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-export",use:"icon-small-export-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-export"><path d="M7 9l8-8M12 1h3v3M15 9.091V15H1V1h5.909" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"0/Nk":function(e,t){e.exports='<div class="group-student-self-enroll-directive" bb-load-bundle="components/directives/group/group-student-enrollment">\n  <div ng-if="$ctrl.content.assignedGroups.length > 0">\n    <span ng-if="!$ctrl.isOpenEnrollment()" class="ellipse title">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </span>\n    <a ng-if="$ctrl.isSelfEnrollment && $ctrl.isOpenEnrollment()" class="self-enroll-link js-self-enroll-link"\n       href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()"\n       analytics-id="components.directives.group-student-enrollment.groupTitle.link">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </a>\n  </div>\n  <span ng-if="!($ctrl.content.assignedGroups.length > 0) && !$ctrl.isSelfEnrollment" class="ellipse title" bb-translate\n        translate-values="{title: components.directives.group-student-enrollment.unknown}">\n    components.directives.group-student-enrollment.unknown\n  </span>\n  <div ng-if="!($ctrl.content.assignedGroups.length > 0) && $ctrl.isSelfEnrollment">\n    <div ng-if="$ctrl.isOpenEnrollment()">\n      <a href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()" class="self-enroll-link js-self-enroll-link"\n         bb-translate analytics-id="components.directives.group-student-enrollment.self-enroll-to-participate">components.directives.group-student-enrollment.self-enroll-to-participate</a>\n    </div>\n    <div ng-if="$ctrl.isBeforeEnrollment()" class="self-enroll-date" translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-starts</div>\n    <div ng-if="$ctrl.isOpenEnrollmentWithEnding()" class="self-enroll-date"\n         ng-class="{\'is-important\': $ctrl.selfEnrollGroupInfo.isEnrollmentDateImportant}"\n         translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closes</div>\n    <div ng-if="$ctrl.isAfterEnrollment()" class="self-enroll-date"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closed</div>\n  </div>\n</div>\n'},"00V8":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("xQgz"),s="ultra.components.directives.bbUiIcon.Folder";Object(o.a)(i.Folder,s,"bbUiIconFolder")},"07HN":function(e,t){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    class="button-add-content"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.grades.button"\n  >\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>'},"0lMW":function(e,t,n){},"0rzL":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("D57K"),i=(n("eWdw"),n("wHJ2")),s=n("pjml"),r=n("dJ97"),a=n("nbDY"),c=n.n(a),l=n("Bu0u"),d=n("UODz"),u="ultra.components.directives.submissionCard",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.ATTEMPT=new t("ATTEMPT"),t.GRADE=new t("GRADE"),t.INFO=new t("INFO"),t}(c.a),h=function(){function e(e){if(this.scope=e,!e.gradingColumn&&!e.gradeDetail)throw new l.a({message:"gradingColumn or gradeDetail must be provided."});if(this.scope.gradeDetail&&!this.scope.gradeDetail.column)throw new l.a({message:"gradeDetail.column must be provided to display attempt mode."});var t,n;switch(this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)&&(this.attempt=this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt,this.currentGradeStatus=this.scope.gradeDetail.ui.attempt.status),(!e.gradeDetail||e.gradeDetail&&!this.attempt)&&e.gradingColumn?this.scope.mode=p.INFO:e.gradeDetail&&this.attempt&&(this.scope.mode=p.ATTEMPT,this.scope.gradingColumn=this.scope.gradeDetail.column),e.iconClass=s.r.ContentHandler.UltraAssignment.iconClass,this.showLate=!e.showLate||e.showLate(),!this.showLate||e.gradeDetail&&this.attempt&&!this.attempt.isInProgress()||(e.iconClass+="-a"),e.mode){case p.INFO:n=e.gradingColumn.dueDate?"DUE":"NO_DUE_DATE",t=this.showLate?"UNOPENED_LATE":"UNOPENED";break;case p.ATTEMPT:n=this.attempt.status.toString(),e.hasAttempt=!0,t=s.C.AttemptStatus.InProgress.isEqualTo(this.attempt.status)&&this.showLate?"SUBMISSION_LATE":"SUBMISSION";break;case p.GRADE:}e.status="components.directives.submission-card.attemptStatus."+n,e.title="components.directives.submission-card.title."+t}return e.prototype.shouldExpandForRubricIcon=function(){return(this.scope.showRubricButton&&this.scope.showRubricButton()||this.scope.showRubricDiv&&this.scope.showRubricDiv())&&this.scope.gradingColumn.hasRubricAssociation&&this.scope.gradingColumn.hasRubricAssociation()},e.$inject=["scope"],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.template=d,this.scope={gradeDetail:"=?",gradingColumn:"=?",inline:"@?",clickable:"=?",showLate:"&?",showRubricButton:"&?",showRubricDiv:"&?"},this.link=function(e){e.submissionCard=t.$injector.instantiate(h,{scope:e})}}return e.$inject=["$injector"],e}();i.module(u,[r.a]).directive("bbSubmissionCard",["$injector",function(e){return e.instantiate(m)}])},"1/hr":function(e,t,n){},"1Niw":function(e,t){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    class="button-add-content js-show-add-options"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.editor.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="::addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>\n\x3c!--\n  The elements are kept around to trigger download actions.\n  The \'ng-hide\' class is added to prevent the buttons from interfering with AX (tab order, screen readers)\n--\x3e\n<ul class="element-list-add-menu angular-animate ng-hide">\n  <li>\n    <button type="button"\n            class="js-add-text-block"\n            ng-click="addContentButton.addTextBlock()"\n            analytics-id="components.directives.add-content-button.editor.addText.button">\n      <div>\n        <i class="icon-doc-pencil-2"></i>\n        <span bb-translate>components.directives.add-content-button.addContent</span>\n      </div>\n    </button>\n  </li>\n  <li ng-if="addContentButton.canEditUnsafeHtml">\n    <button type="button"\n            ng-click="addContentButton.addHtmlBlock()"\n            analytics-id="components.directives.add-content-button.editor.addHtml.button">\n      <div>\n        <bb-svg-icon size="small" icon="code"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.addHtml</span>\n      </div>\n    </button>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      click-enabled="true"\n      disable-drag="false"\n      class="js-file-upload"\n      web-location="{{webLocation}}"\n      file-location="{{fileLocation}}"\n      target-div="{{\'#\' + fileListViewId}}"\n      disallow-folder-uploads="true"\n      is-third-party-upload="false"\n      ignored-states="::ignoredStates()">\n        <button\n          type="button"\n          class="file-upload-button"\n          ng-click="addContentButton.assignPosition()"\n          aria-label="{{addContentButton.uploadAriaLabel}}"\n          analytics-id="components.directives.add-content-button.editor.fileUpload.button">\n          <div ng-if="!addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromComputer</span>\n          </div>\n          <div ng-if="addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromDevice</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="::addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="false"\n      monitor-leave="true"\n      target-div="{{\'#\' + fileListViewId}}"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      disable-drag="true"\n      is-third-party-upload="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      ignored-states="::ignoredStates()">\n      <button\n        type="button"\n        class="js-upload-from-kloudless"\n        ng-click="addContentButton.assignPosition()"\n        bb-kloudless\n        primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n        attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="false"\n        on-cancel-focus="!initialUpload ? addContentButton.focusAddButton : null"\n        analytics-id="components.directives.add-content-button.editor.uploadFromCloudStorage.button">\n          <div>\n            <i class="icon-cloud"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromCloudStorage</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n</ul>\n'},"1zDl":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("D57K"),i=n("nsO7"),s=n("wHJ2"),r=n("pjml"),a=n("+brj"),c="ultra.service.course.content.copy",l="courseContentCopy",d=function(){function e(e,t){var n=this;this.browserStorage=e,this.$q=t,this.COPY_TASKS_KEY="COPY-TASKS-ID",this.DISMISSED_TASKS_KEY="DISMISSED-COPY-TASKS-ID",this.getCurrentCopyTaskErrorSummaries=function(e){return n.getCurrentCopyTasks().then((function(t){return void 0===t&&(t=[]),t.length?n.getErrorSummaries(e,t):[]}))},this.getCurrentCopyTaskErrorCountsByCategory=function(e){return n.getCurrentCopyTaskErrorSummaries(e).then((function(e){return i.map(e,(function(e){return n.mergeTasksWithinCourseGrouping(e)}))}))},this.mergeTasksWithinCourseGrouping=function(e){var t=i.first(e),o=t.sourceCourseName,s=t.sourceCourseId;return{errorCountsByCategory:i(e).flatMap((function(e){return e.errorCountsByCategory})).groupBy((function(e){return e.name})).map((function(e,t){return n.mergeErrorCountsOfSameCategory(e)})).sortBy((function(e){return n.localizedCategoryName(e.name)})).value(),sourceCourseId:s,sourceCourseName:o,taskIds:i.map(e,(function(e){return e.taskId}))}},this.mergeErrorCountsOfSameCategory=function(e){return i.reduce(e,(function(e,t){return{count:e.count+t.count,name:t.name}}),{count:0,name:""})},this.localizedCategoryName=function(e){var t=r.n.ConversionContentCategory.parse(e);return t?t.getLocalizableCategoryNameKey():null},this.getErrorSummaries=function(e,t){return void 0===t&&(t=[]),e.getGranularCopyTaskStatus(t).then((function(e){r.n.ConversionReportStatus.Success;var t=i(e.results).groupBy("sourceCourseId").mapValues((function(e,t){return i.head(e).sourceCourseName})).value();return i(e.results).filter((function(e){return!!e.errorCountsByCategory.length})).groupBy("sourceCourseId").sortBy((function(e,n){return t[n]})).map((function(e,t){return e})).value()}))},this.copyDetailsNotificationCount=function(e){return n.getCopyDetailsNotificationTasks().then((function(t){return i(e).flatMap().filter((function(e){return i.includes(t,e.taskId)})).flatMap("errorCountsByCategory").reduce((function(e,t){return e+t.count}),0)}))},this.resetCopyDetailsNotificationCount=function(){n.getCurrentCopyTasks().then((function(e){void 0===e&&(e=[]),n.browserStorage.saveToStorage(n.DISMISSED_TASKS_KEY,e,a.a.SessionStorage)}))}}return e.prototype.getCurrentCopyTasks=function(){return this.browserStorage.getFromStorage(this.COPY_TASKS_KEY,a.a.SessionStorage)},e.prototype.getCopyDetailsNotificationTasks=function(){var e=this.browserStorage.getFromStorage(this.DISMISSED_TASKS_KEY,a.a.SessionStorage),t=this.browserStorage.getFromStorage(this.COPY_TASKS_KEY,a.a.SessionStorage);return this.$q.all([e,t]).then((function(e){var t=e[0],n=void 0===t?[]:t,o=e[1];return(void 0===o?[]:o).filter((function(e){return!i.includes(n,e)}))}))},e.prototype.appendToCurrentCopyTasks=function(e){var t=this;return void 0===e&&(e=[]),this.browserStorage.getFromStorage(this.COPY_TASKS_KEY,a.a.SessionStorage).then((function(n){return void 0===n&&(n=[]),t.browserStorage.saveToStorage(t.COPY_TASKS_KEY,Object(o.__spreadArrays)(n,e),a.a.SessionStorage)}))},e.prototype.clearCopyTasks=function(){this.browserStorage.deleteFromStorage(this.DISMISSED_TASKS_KEY,a.a.SessionStorage),this.browserStorage.deleteFromStorage(this.COPY_TASKS_KEY,a.a.SessionStorage)},e.$inject=[a.c,"$q"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(d);s.module(c,[r.Q]).service(l,d)},"2E9T":function(e,t){e.exports='<bb-svg-icon size="small" icon="add" class="js-add-plus add-circle-default"></bb-svg-icon>\n<bb-svg-icon size="small" icon="add" status="active" class="js-add-plus add-circle-active"></bb-svg-icon>'},"2a+M":function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p}));var o=n("D57K"),i=n("nsO7"),s=n("wHJ2"),r=n("nbDY"),a=n.n(r),c=n("0JpG"),l="ultra.services.dragDrop",d="dragDropService",u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.TOP=new t("TOP"),t.BOTTOM=new t("BOTTOM"),t.FOLDER=new t("FOLDER"),t.SELF=new t("SELF"),t}(a.a),p=function(){function t(e,t){var n=this;this.$timeout=e,this.bbLocalize=t,this.dragHoverClass="dz-drag-hover",this.dragElementSelector=".drag-element",this.onFolderClass="on-folder",this.onNestedFolderClass="on-nested-folder",this.originalElementClass="drag-element-original",this.movableElementClass="drag-element-movable",this.queuedScreenReaderMessages="",this.bbLocalize.loadBundle("components/services/drag-drop").then((function(){n.folderDepthMessageKey="components.services.drag-drop.folderDepthMessage"}))}return t.prototype.createDropPlaceholderElement=function(t){this.dropPlaceholderElement=e('<div class="dragdropplaceholder js-no-file-drop" style="height: '+t.height()+"px; width: "+t.width()+'px"></div>')},t.prototype.setDropTarget=function(e){this.lastDropTargetId=this.currentDropTargetId,this.currentDropTargetId=e},t.prototype.clearDropTarget=function(){this.setDropTarget(void 0)},t.prototype.isCurrentDropTarget=function(e){return this.currentDropTargetId===e},t.prototype.isNotSameDropTarget=function(){return this.currentDropTargetId!==this.lastDropTargetId},t.prototype.scrollDragDropItemsContainer=function(e,n){var o=this._getScrollingContainerElement();if(o){var i=e<t.SCROLLING_CONSTANTS.scrollZoneHeight,s=e>o.height()-t.SCROLLING_CONSTANTS.scrollZoneHeight,r=o.scrollTop();i?o.scrollTop(r-n):s&&o.scrollTop(r+n)}},t.prototype._getScrollingContainerElement=function(){var e=this,n=t.SCROLL_CONTAINERS_SELECTORS.map((function(t){return e.originalElement.closest(t)}));return i.find(n,(function(t){return e._elementHasScrollbar(t)}))},t.prototype._elementHasScrollbar=function(e){return e.get(0).scrollHeight>e.innerHeight()},t.SCROLLING_CONSTANTS={scrollZoneHeight:200,mouseInteractionDistanceToScroll:30,keyboardInteractionDistanceToScroll:200},t.SCROLL_CONTAINERS_SELECTORS=[".panel-wrap",".panel-content"],t.$inject=["$timeout",c.serviceName],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(p);s.module(l,[c.moduleName]).service(d,p)}).call(this,n("5iHu"))},"2i58":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-content-market",use:"icon-small-content-market-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-market"><path d="M2 2h13l-1 8H4" stroke-width="2" stroke-linejoin="round" /><circle cx="13" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="4" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 6h11.5M7 2v8M11 2v8M1 1h1l2 12h9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"367g":function(e,t,n){},"3Bw1":function(e,t){e.exports='<bb-modal id="content-deleted-modal"\n          class="notification"\n          modal-title-key="base.stream.modal.deleted.title"\n          analytics-id-tag-prefix="base.stream.modal.deleted">\n  <div name="modal-contents">\n    <p bb-translate>base.stream.modal.deleted.body</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate analytics-id="global.ok">global.ok</button>\n</bb-modal>\n'},"3Jgm":function(e,t,n){"use strict";var o=n("D57K"),i=n("wHJ2"),s=n("pjml"),r=n("Qbdf"),a=n("k9iv"),c=n("0JpG"),l=n("TnpK"),d=n("Sa5G"),u=n("FBBZ"),p=n("5iHu");var h=n("Q/M7");n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var m="ultra.components.services.partner",b="partner",f=function(){function e(e,t,n,o,i,s,r,a,c,l,d,u){this.$q=e,this.$rootScope=t,this.$stateParams=n,this.$window=o,this.cacheFactory=i,this.contextCourse=s,this.errorModalService=r,this.localizeService=a,this.ultraStateService=c,this.PartnerCourseModel=l,this.PartnerModel=d,this.PartnerStatusModel=u,this.shortMaxAge=5e3,this.partnerStatusCache=i.createCache("PartnerStatusCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),this.partnersCache=i.createCache("PartnersCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),this.partnerLinkedCoursesCache=i.createCache("PartnerLinkedCoursesCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge})}return e.prototype.getPartnerCloudStatus=function(e,t){if(void 0===t&&(t=!1),p("body").hasClass("bb-within-uia-test"))return this.$q.when({enabled:!1,userCloudProvisioned:!1});if(t)return this.PartnerStatusModel.getStatus(e);var n=this.partnerStatusCache.get("status");return n||(n={promise:this.PartnerStatusModel.getStatus(e)},this.partnerStatusCache.put("status",n)),n.promise},e.prototype.resetPartnerCloudStatus=function(){this.partnerStatusCache.removeAll()},e.prototype.getPartners=function(e,t){if(void 0===t&&(t=!1),t)return this.PartnerModel.getPartnersByType(e);var n=this.partnersCache.get(e);return n||(n={promise:this.PartnerModel.getPartnersByType(e)},this.partnersCache.put(e,n)),n.promise},e.prototype.getLinkedPartners=function(e,t){if(void 0===t&&(t=!1),t)return this.PartnerCourseModel.$new(e).partnerLinkedCourses.$search().$allow(["400-599"]).$asPromise();var n=this.partnerLinkedCoursesCache.get(e);return n||(n={promise:this.PartnerCourseModel.$new(e).partnerLinkedCourses.$search().$allow(["400-599"]).$asPromise()},this.partnerLinkedCoursesCache.put(e,n)),n.promise},e.prototype.launchPartner=function(e,t){e.toolProvider.available?u.o(e)?this._launchBrowseLink(e.browseContentLink):this._checkProvisioningAndLaunch(e,t):e.toolProvider.compatible?this.errorModalService.handleError(this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.errorProviderNotConfigured"})):this.errorModalService.handleError(this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.errorProviderIncompatible"}))},e.prototype._checkProvisioningAndLaunch=function(e,t){var n=this;this._getProvisioningCheckResult(e.providerId,t).then((function(t){var o;t.status?(o={partnerId:e.providerId,toolType:"browse",partnerTitle:u.h(e)},d.w.Inline.isEqualTo(n.$stateParams.mode)?o.mode=n.$stateParams.mode:(o.partnerParentId=n.$stateParams.parentId,o.position=n.$stateParams.position)):(o={partnerId:e.providerId,toolType:"partnerProvisioning",partnerTitle:n.localizeService.translateSync({locale:n.localizeService.getLocale(n.$rootScope),key:"course.partnerList.partnerProvisioning"}),partnerParentId:n.$stateParams.parentId},n.ultraStateService.current.name.indexOf("peek.books-and-tools")>=0&&(o.returnState="base.courses.peek.course.outline.peek.books-and-tools")),n.ultraStateService.goPeekState("partner-tool.tool",o)}))},e.prototype._getProvisioningCheckResult=function(e,t){return i.isDefined(t)?this.$q.when({status:t}):this.PartnerCourseModel.$new(this.contextCourse.courseId).updateProvisioning(e)},e.prototype._launchBrowseLink=function(e){var t=h.c(e.url);switch(this.$stateParams.parentId&&(t=h.a(t,"content_id",this.$stateParams.parentId)),e.target){case"_self":this._windowLocationAssign(t);break;case"_blank":this.$window.open(t)}},e.prototype._windowLocationAssign=function(e){this.$window.location.assign(e)},e.$inject=["$q","$rootScope","$stateParams","$window","DSCacheFactory",r.e,a.c,c.serviceName,l.d,s.W.serviceName,s.U.serviceName,s.Y.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(f);i.module(m,[r.b,a.b,c.moduleName,l.b,s.Q]).service(b,f)},"3YxC":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-unlock",use:"icon-medium-unlock-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-unlock"><path d="M11 16c0-.5523.4477-1 1-1v0c.5523 0 1 .4477 1 1v2c0 .5523-.4477 1-1 1v0c-.5523 0-1-.4477-1-1v-2z" stroke-width="2" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M3 11h18v12H3zM6 11V6s0-5 6-5c2.6981 0 4.1829 1.011 5 2.1239" /></symbol>'});i.add(s);e.exports=s},"3mIl":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-import",use:"icon-small-import-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-import"><path d="M15 9.091V15H1V1h5.909M15 1l-9 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 7v3h3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"4ICS":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-question-bank",use:"icon-medium-question-bank-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-question-bank"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 13h22v10H1zM8 5h2v2H8zM8 10h2v2H8zM8 18h8" /><path d="M4 13V1h16v12M13 5h4M13 10h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"4qUd":function(e,t){e.exports='<div bb-load-bundle="components/directives/schedule-outline" class="schedule-outline">\n\n  \x3c!-- compact representation, used on /courses --\x3e\n  <div ng-if="scheduleOutlineCollection().length !== 0 && compact()" class="compact">\n    \x3c!-- If there is only one schedule for this course - show it. --\x3e\n    <div ng-if="scheduleOutlineCollection().length === 1">\n      <p class="location-name" ng-if="scheduleOutlineCollection()[0].location">{{scheduleOutlineCollection()[0].getTruncatedLocation(TRUNCATION_LOCATION_COURSE_CARD)}}</p>\n      <p class="schedule">\n        <span ng-switch="scheduleOutlineCollection()[0].recurRules.freq">\n          <span ng-switch-when="WEEKLY">{{scheduleOutline.getWeeklyRepeatLabel(scheduleOutlineCollection()[0])}}</span>\n          <span ng-switch-when="MONTHLY">\n            <span bb-translate>scheduleOutline.monthlyEvent</span>\n            <span bb-translate ng-if="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0])">scheduleOutline.nextMonthlyEvent</span>\n            <span ng-if="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0] )" bb-date="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0])" format="short" auto-update="true"></span>\n          </span>\n          <span ng-switch-when="DAILY" bb-translate>scheduleOutline.dailyEvent</span>\n        </span>\n        <span ng-if="scheduleOutlineCollection()[0].isAllDayEvent()" bb-translate>scheduleOutline.allDay</span>\n        <span ng-if="!scheduleOutlineCollection()[0].isAllDayEvent()"><span bb-time="{{scheduleOutlineCollection()[0].startDate}}" auto-update="true" format="Short"></span> - <span bb-time="{{scheduleOutlineCollection()[0].endDate}}" auto-update="true" format="Short"></span></span>\n      </p>\n    </div>\n\n    \x3c!-- if there is more than one schedule for this course - just tell how many schedules available. --\x3e\n    <div ng-if="scheduleOutlineCollection().length > 1">\n      <span bb-translate translate-values="{count: scheduleOutlineCollection().length}">scheduleOutline.moreMeetingsCompact.plural</span>\n    </div>\n  </div>\n\n  \x3c!-- normal representation --\x3e\n  <div ng-if="scheduleOutlineCollection().length !== 0 && !compact()" class="regular">\n    <div class="item clearfix js-course-schedule" ng-repeat="repeatingEvent in scheduleOutline.getSchedules() track by $index">\n      <div class="element-card">\n        <div class="element-image" ng-if="$first">\n          <bb-svg-icon size="medium" icon="away"></bb-svg-icon>\n        </div>\n        <div class="element-details">\n          <div ng-switch="repeatingEvent.recurRules.freq" class="name">\n            <span ng-switch-when="WEEKLY">{{scheduleOutline.getWeeklyRepeatLabel(repeatingEvent)}}</span>\n            <span ng-switch-when="MONTHLY">\n              <span bb-translate>scheduleOutline.monthlyEvent</span> <br/>\n              <span bb-translate ng-if="scheduleOutline.getNextEventDate(repeatingEvent)">scheduleOutline.nextMonthlyEvent</span>\n              <span ng-if="scheduleOutline.getNextEventDate(repeatingEvent)" bb-date="{{scheduleOutline.getNextEventDate(repeatingEvent)}}" format="short" auto-update="true"></span>\n            </span>\n            <span ng-switch-when="DAILY">\n              <span bb-translate>scheduleOutline.dailyEvent</span> <br/>\n              <span bb-translate ng-if="scheduleOutline.getNextDailyEventDate(repeatingEvent)">scheduleOutline.nextMonthlyEvent</span>\n              <span ng-if="scheduleOutline.getNextDailyEventDate(repeatingEvent)" bb-date="{{scheduleOutline.getNextDailyEventDate(repeatingEvent)}}" format="short" auto-update="true"></span>\n            </span>\n          </div>\n          <div ng-if="repeatingEvent.isAllDayEvent()" bb-translate>scheduleOutline.allDay</div>\n          <div ng-if="!repeatingEvent.isAllDayEvent()"><span bb-time="{{repeatingEvent.startDate}}" format="Short" auto-update="true"></span> - <span bb-time="{{repeatingEvent.endDate}}" format="Short" auto-update="true"></span></div>\n        </div>\n      </div>\n      <div class="element-card" ng-if="scheduleOutline.areAnyLocationsSet()">\n        <div class="element-image" ng-if="$first">\n          <bb-svg-icon size="medium" icon="location"></bb-svg-icon>\n        </div>\n        <div class="element-details">\n          <span class="name" ng-if="$first || repeatingEvent.location !== scheduleOutlineCollection()[$index -1].location">{{repeatingEvent.getTruncatedLocation(TRUNCATION_LOCATION_OUTLINE)}}</span><br/>\n        </div>\n      </div>\n    </div>\n    <div ng-if="scheduleOutlineCollection().length > 2" class="item more" ng-class="{right: scheduleOutline.areAnyLocationsSet()}">\n      <a bb-peek-sref="class-schedule"\n         bb-translate\n         translate-values="{count: scheduleOutlineCollection().length - 2}"\n         analytics-id="scheduleOutline.moreMeetings.plural">\n        scheduleOutline.moreMeetings.plural\n      </a>\n    </div>\n  </div>\n</div>\n'},"5L1M":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("wnlu"),s="ultra.components.directives.bbUiIcon.Textbook";Object(o.a)(i.a,s,"bbUiIconTextbook")},"5Tom":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h}));var o=n("D57K"),i=(n("JfeD"),n("nYZ0")),s=n("fYJU"),r=n("0JpG"),a=n("TnpK"),c=n("0/Nk"),l=n("OI4n"),d=n("yC9S"),u=n("aHpC"),p="ultra.directives.group.group-student-enrollment",h=function(){function e(e,t,n,o,i){this.scope=e,this.contentService=t,this.currentUserService=n,this.localize=o,this.ultraState=i,this.isSelfEnrollment=!1}return e.prototype.$onInit=function(){this.render()},e.prototype.render=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var e,t,n,i,s;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0?(e=this.localize.getReactBabelfishParams(),t=e.locale,n=e.babelfishFormatter,i=this.content.selfEnrollmentGroups.filter((function(e){return e.group})).map((function(e){return e.group})),s=this,[4,l.getSelfEnrollmentGroupInfo(i,t,n)]):[3,2];case 1:return s.selfEnrollGroupInfo=o.sent(),this.isSelfEnrollment=this.selfEnrollGroupInfo.isSelfEnrollment,[3,3];case 2:this.isSelfEnrollment=!1,o.label=3;case 3:return[2]}}))}))},e.prototype.openContentEnrollPanel=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(e){switch(e.label){case 0:return this.fromView?this.ultraState.current.name.endsWith("discussion.view.with-grading.peek.discussion-details")?[4,this.ultraState.leavePeekState()]:[3,4]:[3,8];case 1:return e.sent(),[4,this.ultraState.leavePeekState()];case 2:return e.sent(),[4,this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})];case 3:return e.sent(),[3,7];case 4:return[4,this.ultraState.leavePeekState()];case 5:return e.sent(),[4,this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})];case 6:e.sent(),e.label=7;case 7:return[3,10];case 8:return[4,this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id})];case 9:e.sent(),e.label=10;case 10:return[2]}}))}))},e.prototype.isBeforeEnrollment=function(){return this.selfEnrollGroupInfo&&"Before"===this.selfEnrollGroupInfo.enrollmentDateState},e.prototype.isOpenEnrollment=function(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState},e.prototype.isOpenEnrollmentWithEnding=function(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState&&null!=this.selfEnrollGroupInfo.relativeDate},e.prototype.isAfterEnrollment=function(){return this.selfEnrollGroupInfo&&"After"===this.selfEnrollGroupInfo.enrollmentDateState},e=Object(o.__decorate)([Object(d.a)({moduleName:p,componentName:"bbGroupStudentEnrollment",template:c,bindings:{content:"<",fromView:"@"},requireModules:[i.d,s.a,r.moduleName,a.b]}),Object(o.__param)(0,Object(u.b)("$scope")),Object(o.__param)(1,Object(u.b)(i.f)),Object(o.__param)(2,Object(u.b)(s.b)),Object(o.__param)(3,Object(u.b)(r.serviceName)),Object(o.__param)(4,Object(u.b)(a.d))],e)}()},"66CI":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-lock-circle",use:"icon-small-lock-circle-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock-circle"><g stroke-width="2"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8h6v3H5V8z" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 9h4v1H6z" /><path d="M6 8V5.7143C6 4.857 6.6667 4 8 4m0 0c.3333 0-.3333 0 0 0zm0 0c1.3333 0 2 .8571 2 1.7143V8" stroke-linecap="round" stroke-linejoin="round" /></g></symbol>'});i.add(s);e.exports=s},"66CP":function(e,t){e.exports='<div class="content-item-icon" bb-load-bundle="components/directives/element-image/element-image-accessibility">\n  <bb-ui-content-icon icon="contentItemIcon.iconName" color="{{contentItemIcon.iconColor}}" not-decorative="true"></bb-ui-content-icon>\n  <div class="content-item-icon__status" ng-if="contentItemIcon.showStatusIcon()">\n    <bb-svg-icon size="small" icon="{{contentItemIcon.getStatusIconName()}}"></bb-svg-icon>\n  </div>\n</div>\n'},"6TNA":function(e,t){e.exports='<span class="schema-grade">{{displayGrade.fullDisplayGrade}}</span>\n'},"6s5h":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-onedrivebiz",use:"icon-medium-onedrivebiz-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-onedrivebiz"><path stroke-width="2.2" d="M8.8 18.6c-1.1 0-2-.9-2-2s.9-2 2-2h1l.1-1c.2-1.6 1.6-2.8 3.2-2.8 1 0 1.9.4 2.5 1.2l.6.8.8-.4c.4-.2.7-.3 1.1-.3 1.4 0 2.5 1.1 2.5 2.5v1l1 .1c.4 0 .8.2 1 .5.2.2.2.4.2.7v.2c0 .9-.6 1.5-1.5 1.5H8.8z" /><path stroke-width="2.2" d="M8.8 17.2c-.3 0-.6-.3-.6-.6s.3-.6.6-.6h2.3l.3-2.3c.1-.8.9-1.5 1.8-1.5.6 0 1.1.2 1.4.6l1.3 1.7 1.9-1c.1-.1.3-.1.5-.1.6 0 1.1.5 1.1 1.1v2.3l2.0833.2-.0833.1H8.8v.1z" /><path stroke-width="2.2" d="M16.4 15.8l1.4-.7v.7h-1.4zm-3.9 0l.2-1.9c0-.1.2-.3.3-.3.1 0 .2 0 .2.1l1.6 2.1h-2.3z" /><path stroke-width="1.1" d="M3.3 17.8c-1.4 0-2.7-1.3-2.7-2.7 0-1.3 1-2.4 2.4-2.6l.8-.1-.3-.7c-.1-.1-.1-.3-.1-.5 0-1.9 1.5-3.5 3.5-3.5.7 0 1.4.2 1.9.5l.5.2.2-.5c.7-1.4 2.2-2.3 3.9-2.3 2.2 0 4 1.5 4.4 3.4-.3 0-.5.1-.7.2-1.1-.9-2.4-1.3-3.8-1.3-2.5 0-4.8 1.6-5.7 4-2.2.5-3.6 2.5-3.6 4.7 0 .4 0 .8.1 1.2h-.8z" /><path stroke-width="2" d="M3.1 16.9c-.9-.1-1.7-.9-1.7-1.9 0-.9.7-1.6 1.7-1.8l1.1-.2c-.7 1-1.1 2.2-1.1 3.4v.5zM4.2 11.3c-.1-.3 0-.5.1-.9.1-.3.2-.5.3-.7.3-.4.7-.8 1.2-1 .3-.1.6-.2 1-.2.5.1 1.2.3 1.6.5-.6.6-1.2 1.3-1.5 2.2-.8.3-1.5.8-2.1 1.4 0-.1-.2-.4-.2-.4-.2-.4-.3-.6-.4-.9z" /><path d="M16.1 7.6c-.9-.4-1.8-.6-2.9-.6-.8 0-1.6.2-2.4.4.6-.6 1.5-1 2.5-1 1.1 0 2.2.5 2.8 1.2zM16.1 7.6l1 .9" /><path stroke-width="2" d="M6.6 9.5l-1.4 1.4M12.7 15.7h5.1" /><path stroke-width=".5" d="M9.742 7.983h.633v.55h-.633z" /></symbol>'});i.add(s);e.exports=s},"6sUD":function(e,t){e.exports='<div>\n  \x3c!-- Display a loading spinner if page is rendering --\x3e\n  <div class="telemetry-loading-anim" ng-if="telemetryPanelHeader.showSpinner">\n    <div class="spinner bb-secondary-color-2"/>\n  </div>\n  <header class="panel-header simple-header">\n    <div class="panel-titles-container">\n      <div class="panel-sub-title">{{ ::course().name }}</div>\n      <div class="black-header-contents">\n        <button class="left-off-canvas-toggle menu-toggle standard-button dark-background"\n                type="button"\n                analytics-id="components.directives.telemetry.panel.menu.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>components.directives.telemetry.panel.menu</span>\n        </button>\n        <h1 class="panel-title" ng-if="::titleKey" bb-translate>{{::titleKey}}</h1>\n        <h1 class="panel-title" ng-if="title">{{::title}}</h1>\n        \x3c!-- BUTTON 2 (displayed to the left of Button 1) --\x3e\n        <button ng-if="buttonTwoIcon" id="button-two"\n                aria-haspopup="true"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonTwoAriaLabel,\'title\': buttonTwoTitle}"\n                ng-click="buttonTwoCallback()"\n                ng-class="{ \'active\': mobileStudentListVisible }"\n                analytics-id="components.directives.telemetry.panel.buttonwTwo.button">\n          <i class="{{ ::buttonTwoIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonTwoTitle</span>\n        </button>\n        \x3c!-- BUTTON 1 (displayed on the far right) --\x3e\n        <button ng-if="buttonOneIcon"\n                id="button-one"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonOneAriaLabel,\'title\': buttonOneTitle}"\n                ng-click="buttonOneCallback()"\n                analytics-id="components.directives.telemetry.panel.buttonOne.button">\n          <i class="{{ ::buttonOneIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonOneTitle</span>\n        </button>\n      </div>\n    </div>\n  </header>\n</div>\n'},"6xt4":function(e,t){e.exports='<div\n  ng-switch="rootContent().isInForcedSequenceModule() || rootContent().isForcedSequenceModule() "\n  id="{{::addContentButton.getButtonWrapperId()}}"\n  tabindex="-1"\n>\n  <button\n    ng-switch-when="true"\n    id="{{::addContentButton.getTargetId()}}"\n    class="button-add-content js-show-add-options"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    bb-tooltip\n    enhanced-tooltip="true"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-haspopup="true"\n    aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    bb-translate-attrs="{ title: \'course.outline.addForbidden.text\' }"\n    analytics-id="components.directives.add-content-button.course-outline.button"\n    >\n  </button>\n  <button\n    ng-switch-default\n    id="{{::addContentButton.getTargetId()}}"\n    class="button-add-content js-show-add-options"\n    data-show-add-options\n    ng-click="addContentButton.toggleOverflowMenu()"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-haspopup="true"\n    aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    analytics-id="components.directives.add-content-button.course-outline.addContentMenu.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible && !addContentButton.isEmptyFolder()"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  aria-labelledby="{{::addContentButton.getTargetId()}}"\n  analytics-id="components.directives.add-content-button.contextualMenu">\n</bb-ui-contextual-menu>\n<ul class="element-list-add-menu angular-animate small-block-grid-2 medium-block-grid-2 large-block-grid-3"\n    ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n    ng-show="addContentButton.isEmptyFolder()">\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-create"\n       bb-peek-sref="content-manage.create(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.link">\n      <div>\n        <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.create</span>\n      </div>\n    </a>\n  </li>\n  <li ng-if="addContentButton.currentCourse.canCopy() && addContentButton.isEmptyFolder()">\n    <a class="content-import-button"\n       bb-peek-sref="content-manage.copy(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.import.link">\n      <div>\n        <bb-svg-icon size="small" icon="duplicate"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.copy</span>\n      </div>\n    </a>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      is-content="true"\n      primary-key="fileListViewLocalId"\n      skip-zip-file-check="true"\n      class="js-file-upload"\n      depth="depth()">\n      <button ng-if="addContentButton.isEmptyFolder()"\n              class="file-upload-button"\n              analytics-id="components.directives.add-content-button.course-outline.upload.button">\n        <div>\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n          <span bb-translate>components.directives.add-content-button.upload</span>\n        </div>\n      </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-content-market"\n       href="javascript:void(0);"\n       ng-click="addContentButton.openContentMarket()"\n       analytics-id="components.directives.add-content-button.course-outline.openContentMarket.link">\n      <div>\n        <bb-svg-icon size="small" icon="content-market"></bb-svg-icon><span bb-translate>components.directives.add-content-button.contentMarket</span>\n      </div>\n    </a>\n  </li>\n  <li ng-if="::addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="true"\n      monitor-leave="true"\n      is-third-party-upload="true"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      cloud-upload-selected-content-id="addContentButton.positionForFiles.positionAfter"\n      primary-key="fileListViewId"\n      skip-zip-file-check="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      target-div="{{\'#\' + fileListViewId}}"\n      disable-drag="true"\n      ignored-states="[\'content-manage.import\']">\n      <button\n        class="doc-add-media clear ng-scope"\n        bb-kloudless\n        primary-key="fileListViewId"\n        attach-handler="addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="true"\n        on-files-selected="addContentButton.onFilesSelectedHandler"\n        analytics-id="components.directives.add-content-button.course-outline.importContentFromCloudStorage.button">\n        <bb-svg-icon size="small" icon="upload-cloud"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n      </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-content-collection"\n       bb-peek-sref="content-collection(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.contentCollection.link">\n      <div>\n        <bb-svg-icon size="small" icon="content-collection"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.contentCollection</span>\n      </div>\n    </a>\n  </li>\n</ul>\n'},"7C3+":function(e,t,n){"use strict";n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return S})),n.d(t,"f",(function(){return w})),n.d(t,"e",(function(){return I})),n.d(t,"a",(function(){return k})),n.d(t,"d",(function(){return T})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return D}));var o=n("D57K"),i=n("nsO7"),s=n("wHJ2"),r=n("6ynb"),a=n("0JpG"),c=n("vhkR"),l=n("Is+C"),d=n("Fvsw"),u=n("KBr+"),p=n("P2dS"),h=n("12mu"),m=n("pjml"),b=n("8jzW"),f=n("KtUo"),g=n("r6lH"),v=n("av75"),y=n("nmzr"),C="ultra.service.stream.transformer.data",S="baseStreamEntryTransformer",w=function(){function e(){}return e.getCourseId=function(e){return e&&e.se_courseId||e&&e.se_orgId||""},e.getCourseName=function(e){return e&&e.ui.streamCourse&&e.ui.streamCourse.name||""},e.getSequenceId=function(e){return e.se_id.substr(e.providerId.length)},e.getEntryType=function(e){if(e){var t=e.extraAttribs&&e.extraAttribs.event_type||e.providerId;if(t&&t.length>0)return t.trim()}throw new Error("Type identifier does not exist on the given Learn stream entry."+(e.se_id||""))},e.generateStreamId=function(t){return t&&t.se_id||"local_"+e.index++},e.validateEntriesForGrouping=function(e,t){var n=e&&e.length>0;if(n){var o=e[0].courseId;n=e.every((function(e){return e.isGroupable&&t.some((function(t){return t===e.type}))&&e.courseId===o}))}return n},e.hasNewEntry=function(e){return e&&e.some((function(e){return e.isNew}))||!1},e.getMostRecentEntry=function(e){return e&&e.length>0?i.sortBy(e,"notificationCreationDate")[e.length-1]:null},e.getGroupedEntryIds=function(e){var t=[];return e&&Array.isArray(e)&&e.forEach((function(e){var n=e.groupedEntryIds;n?t=t.concat(n):t.push(e.id)})),t},e.getDistinctAuthorIds=function(e,t){var n={};return e.forEach((function(e){var o=e.authorIds;if(o)o.forEach((function(e){n[e]=n[e]||[]}));else{var i=t(e);(n[i]=n[i]||[]).push(e)}})),Object.keys(n)},e.getCoursePanelStateRef=function(e,t){return"course.outline("+s.toJson({courseId:e,legacyUrl:t})+")"},e.getDiscussionPanelStateRef=function(e,t){return'discussion.view.with-grading({ contentId: "'+e+'", courseId: "'+t+'" })'},e.getJournalPanelStateRef=function(e,t){return y.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION+'({ contentId: "'+e+'", courseId: "'+t+'" })'},e.DUE_DATE_FORMAT=a.ILocaleDatetimeFormat.Short,e.index=1,e}(),I=function(e){function t(t){var n=e.call(this,t)||this;return n.name="StreamEntriesGroupingError",n}return Object(o.__extends)(t,e),t}(r.a),k=function(){function e(e){this.supportedTypes=e}return e.prototype.canHandle=function(e){return e&&this.canHandleType(w.getEntryType(e))},e.prototype.canHandleType=function(e){return this.supportedTypes&&this.supportedTypes.some((function(t){return 0===t.indexOf(e)}))},e.prototype.convert=function(e){return{id:w.generateStreamId(e),type:w.getEntryType(e),providerId:e.providerId,eventType:e.itemSpecificData.eventType,notificationCreationDate:e.se_timestamp>0?new Date(e.se_timestamp):null,contextualDate:null,icon:null,isNew:!1,isImportant:!1,isGroupable:!1,courseId:w.getCourseId(e),isOrg:e&&e.ui.streamCourse&&e.ui.streamCourse.isOrganization||null,header:w.getCourseName(e),title:null,contentHandler:e.itemSpecificData.contentDetails&&e.itemSpecificData.contentDetails.contentHandler}},e.prototype.setLegacyCourseUrlRefToBody=function(e,t){var n=e&&e.ui&&e.ui.streamCourse,o=e&&e.se_itemUri;n&&n.isClassic()&&o&&(t.body=t.body||{},t.body.stateRef=w.getCoursePanelStateRef(n.id,o))},e}(),T=function(e){function t(t,n){var o=e.call(this,n)||this;return o.bbLocalize=t,o}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t);return n.entrySpecificData=t.ui.streamUser?{streamUser:t.ui.streamUser}:null,n},t.prototype.getUserDisplayName=function(e){return this.bbLocalize.formatUsername(e,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0})},t}(k),E=function(e){function t(){return e.call(this,[])||this}return Object(o.__extends)(t,e),t.prototype.canHandle=function(e){return!1},t.prototype.canHandleType=function(e){return!1},t.prototype.convert=function(n){var o=e.prototype.convert.call(this,n),i=n.itemSpecificData;return o.icon=t.DEFAULT_ICON,o.body={type:v.a.SimpleText,content:{bodyText:i.contentExtract||n.se_details||n.se_context}},o},t.DEFAULT_ICON="post",t}(k),D=function(e){function t(t,n){var o=e.call(this,f.b(t))||this;return o.supportedEventTypes=t,o}return Object(o.__extends)(t,e),t.prototype.canHandleType=function(e){if(!this.supportedEventTypes||!Object.keys(this.supportedEventTypes).length)return!1;var t=e.split(":")[0],n=this.supportedEventTypes[t];return n&&n.length>0&&n.some((function(t){return 0===t.indexOf(e)}))},t.prototype.convert=function(n){var o=e.prototype.convert.call(this,n),i=n.itemSpecificData.notificationDetails;return o.icon=t.TYPE_ICON_MAPPINGS[i.sourceType]||o.icon,o.notificationIds=i.notificationIds,o},t.TYPE_ICON_MAPPINGS={AS:"assignment",BL:"blog",CM:"message",CR:"course",DF:"discussion",DT:"discussion",JN:"journal",GB:"grades",QU:"course",SU:"survey",SC:"scormengine",TE:"test",UA:"assignment",WK:"wiki"},t}(k);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(E);s.module(C,[a.moduleName,c.b,l.b,d.a,u.a,h.a,m.Q,b.b,g.a,p.a]).service(S,E)},"7UH7":function(e,t){e.exports='<div class="text-editor" tabindex="-1" bb-load-bundle="components/directives/text-editor" bb-cache-compilation="basic-text-editor">\n  <label ng-if="inputLabelKey" class="text-editor-label" for="{{::elementId}}" bb-translate>{{::inputLabelKey}}</label>\n  <textarea id="{{::elementId}}"\n         class="read-mode editor-element"\n         name="{{::elementId}}"\n         tabindex="0"\n         type="text"\n         bb-validate-maxlength="{{::getInputMaxLength()}}"\n         ng-model="ngModel"\n         maxlength="{{::(getInputMaxLength() || \'\')}}"\n         ng-model-options="{ getterSetter: true }"\n         ng-disabled="{{::readonly()}}"\n         fng-blur="textEditor.onBlur()"\n         fng-focus="textEditor.onFocus()"\n         fng-keyup="textEditor.onChange($event)"\n         fng-keydown="textEditor.onKeydown($event)"\n         bb-translate-attrs="{ \'placeholder\': \'{{placeholderKey}}\' }"\n         aria-label="{{textEditor.getContentLabel()}}"\n         translate-attrs-values="{{::placeholderAttrsValues}}"\n         bb-focus-on="{{::focusOn}}"\n         ng-required="::fieldRequired()"\n         analytics-id="components.textEditor.basicEditor.textarea"></textarea>\n  <div bb-validation-messages\n       ng-if="::!noValidationMessage()"\n       for="{{::elementId}}" immediate="true">\n    <span ng-message="maxlengthImmediate">\n      <span bb-translate translate-values="{ diff: element.$errorImmediate.maxlengthImmediate.diff }">\n        components.directives.validation.messages.errors.maxlength.plural\n      </span>\n    </span>\n  </div>\n</div>\n'},"7u+5":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("Otwn"),s="ultra.components.directives.bbUiIcon.Assignment";Object(o.a)(i.Assignment,s,"bbUiIconAssignment")},"8+lX":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-replies",use:"icon-small-replies-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-replies"><path d="M1 5h14v10H1v-4" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 3L1 5l2 2" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"82Nl":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-location",use:"icon-medium-location-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-location"><path d="M20 9c0 4.4183-8 14-8 14S4 13.4183 4 9s3.5817-8 8-8 8 3.5817 8 8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="12" cy="9" r="4" stroke-width="2" /></symbol>'});i.add(s);e.exports=s},"8VoP":function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p}));var o=n("D57K"),i=n("0JpG"),s=n("Qbdf"),r=n("AI52"),a=n("Q/M7"),c=n("lEL+"),l=n("E4Qo"),d=n("GbAM"),u="ultra.course.exports.controller",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(function(){function t(t,n,o,i,s,r){var a=this;this.$scope=t,this.exportService=n,this.$modal=o,this.bbLocalize=i,this.timeout=s,this.contextCourse=r,t.courseExport=this,this.currentCourse=t.course.model,this.courseId=this.contextCourse.courseId,this.canExport=this.currentCourse.canExport(),this.canArchive=this.currentCourse.canArchive(),this.exportModalTitleKey=this.currentCourse.isOrganization?"organization.export.modal.modalTitle":"course.export.modal.modalTitle",this.getExportsAndScheduledTasks(!0),t.$on("update-course-exports",(function(){a.getExportsAndScheduledTasks(!1),a.timeout((function(){var t=e(".list-archive-export li:last .file-name").text().trim();a.$scope.$root.$broadcast(d.a,a.exportFileAddedNotification(t)),e(".list-archive-export li:last > .file-link").focus()}),a.$scope,1e3)}))}return t.prototype.getExportsAndScheduledTasks=function(e){var t=this;this.exportService.getExportsAndScheduledTasks(this.courseId,this.currentCourse.courseId,e,this.canExport,this.canArchive).then((function(e){t.courseExports=e.courseExports,t.scheduledTasks=e.scheduledTasks}))},t.prototype.openExportModal=function(){var e=this;!this.canExport||this.canArchive?!this.canArchive||this.canExport?this.modalInstance=this.$modal.open({template:l,scope:this.$scope,resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/exports/course-export")}]}}):this.exportService.createExportTask(!0,this.courseId).then((function(t){e.courseExports=t.courseExports,e.scheduledTasks=t.scheduledTasks,e.$scope.$emit("start-task-status-check")})):this.exportService.createExportTask(!1,this.courseId).then((function(t){e.courseExports=t.courseExports,e.scheduledTasks=t.scheduledTasks,e.$scope.$emit("start-task-status-check")}))},t.prototype.exportFileAddedNotification=function(e){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"course.export.aria-label.file-added",params:{fileName:e},noWrap:!0})},t.prototype.exportProgressNotification=function(){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"course.export.aria-label.export-in-progress",noWrap:!0})},t.prototype.triggerCourseExport=function(e){var t=this;this.modalInstance.dismiss(),this.exportService.createExportTask(e,this.courseId).then((function(e){t.courseExports=e.courseExports,t.scheduledTasks=e.scheduledTasks,t.$scope.$emit("start-task-status-check"),t.timeout((function(){t.$scope.$root.$broadcast(d.a,t.exportProgressNotification())}),t.$scope,1e3)}))},t.prototype.deleteCourseExport=function(e){var t=this;this.exportService.deleteCourseExport(e,this.courseId).then((function(e){t.courseExports=e.courseExports,t.scheduledTasks=e.scheduledTasks}))},t.prototype.deleteExportTask=function(e){var t=this;this.exportService.deleteScheduledTask(e,this.courseId).then((function(e){t.courseExports=e.courseExports,t.scheduledTasks=e.scheduledTasks}))},t.prototype.getAbsoluteUrl=function(e){return a.c(e)},t.$inject=["$scope",r.b,"$modal",i.serviceName,c.b,s.e],t}())}).call(this,n("5iHu"))},"8iPc":function(e,t){e.exports='<p class="summary" ng-if="::bodyContent().bodyText" ng-bind-html="::bodyContent().bodyText"></p>\n<a class="button button--secondary action-button"\n   ng-if="::!bodyContent().isComponentActionSref"\n   bb-peek-sref="{{bodyContent().actionSref}}"\n   analytics-id="base.stream.entryBody.telemetry.link">{{::bodyContent().actionText}}</a>'},"8nBA":function(e,t){e.exports='<bb-modal class="notification js-dismiss-modal"\n          role="alertdialog"\n          modal-title-key="{{moveErrorTitleKey}}"\n          analytics-id-tag-prefix="course.outline.moveErrorAlert">\n    <div name="modal-contents">\n        <p bb-translate="{{moveErrorTextKey}}"></p>\n    </div>\n    <button name="modal-footer-button-primary" \n            ng-click="$parent.$close()" \n            class="js-dismiss-modal button button--secondary js-secondary-button"\n            analytics-id="global.ok.button">\n      <span bb-translate="global.ok"></span>\n    </button>\n</bb-modal>'},"8sWK":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-groups",use:"icon-small-groups-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-groups"><path d="M12 15s-1-2-4-2M4 15s1-2 4-2M8 13c1.6569 0 3-1.3431 3-3S9.6569 7 8 7s-3 1.3431-3 3 1.3431 3 3 3zM12 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2zM1 7s1-2 3-2 3 2 3 2M9 7s1-2 3-2 3 2 3 2M4 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"9hp7":function(e,t){e.exports='<div bb-load-bundle="components/directives/add-content-button">\n  <div class="add-element no-select js-add-content-button {{::contextArea + \'-add-button\'}}"\n       ng-class="{\n         \'force-show-add-button\': addContentButton.isForceShowAddButton && addContentButton.isForceShowAddButton(),\n         \'is-active\': addContentButton.isMenuVisible,\n         \'button-visible\': addContentButton.isButtonVisible,\n         hide: hideDividerLines() && !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)\n       }"\n       ng-keydown="addContentButton.onKeydown($event)">\n    <template></template>\n  </div>\n  <div id="{{::fileListViewId}}">\n    <bb-progress display-results="false" primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId" target-div="{{::\'#\' + fileListViewId}}"></bb-progress>\n  </div>\n</div>'},A4FN:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-disable",use:"icon-small-disable-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-disable"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM12.5 3.5l-9 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},AI52:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var o=n("D57K"),i=n("nsO7"),s=n("wHJ2"),r=n("pjml"),a="ultra.service.course.export",c="courseExport",l=function(){function e(e,t,n,o){this.CourseModel=e,this.ScheduledTaskModel=t,this.$modal=n,this.$q=o,this.exportsAndScheduledTasksByCourseId={},this.permissionsByCourseId={}}return e.prototype.getExportsAndScheduledTasks=function(e,t,n,o,i){var s=this,r=this.$q.defer();return e&&t&&(o||i)&&(!this.exportsAndScheduledTasksByCourseId[e]||n?this.populateCourseExportsAndScheduledTasks(e,t,o,i).then((function(t){s.exportsAndScheduledTasksByCourseId[e]={courseExports:t[0],scheduledTasks:t[1]},r.resolve(s.exportsAndScheduledTasksByCourseId[e])})):r.resolve(this.exportsAndScheduledTasksByCourseId[e])),r.promise},e.prototype.createExportTask=function(e,t){var n=this,o=this.$q.defer();if(t){var i={cxAction:e?"CX_ACTION_ARCHIVE":"CX_ACTION_EXPORT"};this.CourseModel.$new(t).exports.$build(i).$save().$then((function(e){n.ScheduledTaskModel.$find(e.taskId).$then((function(e){n.exportsAndScheduledTasksByCourseId[t].scheduledTasks.push(e),o.resolve(n.exportsAndScheduledTasksByCourseId[t])}))}))}return o.promise},e.prototype.deleteCourseExport=function(e,t){var n=this,o=this.$q.defer();return t&&this.CourseModel.$new(t).exports.$new(e.cxFileId).$destroy().$then((function(){i.remove(n.exportsAndScheduledTasksByCourseId[t].courseExports,(function(t){return t.cxFileId===e.cxFileId})),o.resolve(n.exportsAndScheduledTasksByCourseId[t])})),o.promise},e.prototype.deleteScheduledTask=function(e,t){var n=this,o=this.$q.defer();return t&&this.ScheduledTaskModel.$new(e.taskId).$destroy().$then((function(){i.remove(n.exportsAndScheduledTasksByCourseId[t].scheduledTasks,(function(t){return t.taskId===e.taskId})),o.resolve(n.exportsAndScheduledTasksByCourseId[t])})),o.promise},e.prototype.populateCourseExportsAndScheduledTasks=function(e,t,n,o){return this.$q.all([this.getCourseExports(e),this.getScheduledTasks(t,n,o)])},e.prototype.getCourseExports=function(e){return this.CourseModel.$new(e).exports.$refresh().$asPromise()},e.prototype.getScheduledTasks=function(e,t,n){var o="";if(t||n){t&&(o+="EXPORT"),n&&(""!==o&&(o+=","),o+="ARCHIVE");var i={filterBy:"cxTasks",courseId:e,groupStatus:"INPROGRESS",operation:o};return this.ScheduledTaskModel.$collection().$refresh(i).$asPromise()}},e.$inject=[r.o.serviceName,r.rb.serviceName,"$modal","$q"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(l);s.module(a,[r.Q]).service(c,l)},AYCo:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-link",use:"icon-small-link-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-link"><rect x=".224" y="3.534" width="4.681" height="7.022" rx="2" transform="rotate(-45 .224 3.534)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><rect x="7.5" y="10.81" width="4.681" height="7.022" rx="2" transform="rotate(-45 7.5 10.81)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 5l6 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},Ao2D:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-reports",use:"icon-small-reports-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-reports"><path d="M5 7v5h6V7H5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M2 1h9l3 3v11H2V1z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 1v3h3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"Aw+3":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-feedback",use:"icon-small-feedback-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-feedback"><path d="M1 1h14v12h-4l-3 2-3-2H1V1zM4 4h8M4 7h8M4 10h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},BLb8:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return r}));var o=function(e,t){t?e.$broadcast("refresh-items",t):e.$broadcast("refresh-items")},i=function(e,t){e.$on("refresh-items",t)},s=function(e,t){e.$on("close-scorm-launch-frame",t)},r=function(e,t){e.content.$fetch().$asPromise().then((function(n){n===e.content?o(e,t):e.content=n}))}},BiyI:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-add-plus",use:"icon-small-add-plus-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add-plus"><path d="M8 5v6M11 8H5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},CM4G:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-video",use:"icon-small-video-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-video"><g clip-path="url(#icon-small-video_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 1h14v14H1zM4 1v14M12 1v14M0 4h4M12 4h4M0 8h4M12 8h4M0 12h4M12 12h4" /><path d="M7 7v2l2-1-2-1z" /></g><defs><clipPath id="icon-small-video_clip0"><path fill="#fff" d="M0 0h16v16H0z" /></clipPath></defs></symbol>'});i.add(s);e.exports=s},"D8d/":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var o=n("wHJ2"),i=n("0JpG"),s=n("A+IJ"),r=n("2a+M"),a=n("pjml"),c=n("lEL+"),l=n("GbAM"),d=n("W6wm"),u="ultra.components.directives.bbDropHandler",p=function(){function t(e,t,n,o,i,s,a,c){var l=this;this.scope=e,this.element=t,this.$rootScope=o,this.$q=i,this.timeout=s,this.dragDropService=a,this.bbLocalizeService=c,this.isDraggingOverFolder=!1,this.isEmptyTarget="emptyTarget"in n,this.dropTargetElement=t.closest(this.dragDropService.dragElementSelector),e.$on("bb-drag-move",(function(){if(l.isEnabledForReordering()&&l.isNotSameDropTarget()&&l.isOnSamePanel()){var e=t.offset(),n=t.height()+e.top,o=t.width()+e.left;l.dragDropService.pointerPosition.left>=e.left&&l.dragDropService.pointerPosition.left<=o&&l.dragDropService.pointerPosition.top>=e.top&&l.dragDropService.pointerPosition.top<=n?l.dragOverFunc(l.dragDropService.pointerPosition.top):l.dragLeaveFunc()}})),e.$on("bb-drag-end",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&l.isOnSamePanel()&&l.dropHandlerFunc()})),t.on("drop",(function(t){t.originalEvent.dataTransfer.files&&t.originalEvent.dataTransfer.files.length>0&&e.onFileDropHandler&&e.onFileDropHandler()(t.originalEvent.dataTransfer.files,e.content())})),e.$on("bb-drag-cancel",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&l.isOnSamePanel()&&(e.content().id===l.dragDropService.currentDragId&&(l.dragDropService.positionBefore=e.content().id),l.dropHandlerFunc())})),e.$on("keyboard-drag-start",(function(){l.isEnabledForReordering()&&e.content().id===l.dragDropService.currentDragId&&(l.dragPosition=r.b.SELF,l.dragDropService.originalElement=t.closest(l.dragDropService.dragElementSelector),l.dragDropService.currentDragElement=l.dragDropService.originalElement.clone(),l.dragDropService.originalElement.addClass(l.dragDropService.originalElementClass),l.dragDropService.currentDragElement.addClass(l.dragDropService.movableElementClass),l.dragDropService.originalElement.addClass(l.dragDropService.dragHoverClass),l.dragDropService.setDropTarget(e.content().id))})),e.$on("keyboard-drag-end",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&l.isOnSamePanel()&&l.timeout((function(){l.dragDropService.originalElement&&l.dragDropService.originalElement.removeClass(l.dragDropService.originalElementClass),r.b.FOLDER.isEqualTo(l.dragPosition)?l.dragDropService.positionAfter=e.content().id:r.b.TOP.isEqualTo(l.dragPosition)?(l.dragDropService.positionBefore=e.content().id,l.dragDropService.positionAfter=null):(l.dragDropService.positionAfter=e.content().id,l.dragDropService.positionBefore=null),l.dropTargetElement.removeClass(l.dragDropService.dragHoverClass),l.dragDropService.currentDragElement&&l.dragDropService.currentDragElement.remove(),l.isDropPreventedByContentDepthRules().then((function(t){if(!l.isDnDPreventedInDiscussionContext()&&!t&&!l._isDroppingInSamePlace()){var n={dragContentId:l.dragDropService.currentDragId,dragElement:l.dragDropService.currentDragElement,parentFolderId:l.scope.content().parentId,positionAfterId:l.dragDropService.positionAfter,positionBeforeId:l.dragDropService.positionBefore,rootScope:l.$rootScope,targetFolderId:l.scope.content().id};e.onMoveHandler()(n)}l._keyboardEndDragAndClearValues()}))}),e)})),e.$on("keyboard-drag-cancel",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&(l._keyboardEndDragAndClearValues(),l.dropTargetElement.removeClass(l.dragDropService.dragHoverClass),l.dragDropService.originalElement.removeClass(l.dragDropService.originalElementClass),l.dragDropService.currentDragElement.remove())})),e.$on("keyboard-drag-up",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&(l._removeKeyboardPlaceholderAndStyling(),l.isEmptyTarget&&(l.dragPosition=r.b.TOP),r.b.SELF.isEqualTo(l.dragPosition)||r.b.TOP.isEqualTo(l.dragPosition)?e.previousContentId&&e.previousContentId()?l.keyboardMoveUpToItem(e.previousContentId()):e.content().depth>1?(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),l.keyboardMoveOntoFolder(e.content().parentId)):(l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):r.b.FOLDER.isEqualTo(l.dragPosition)?l._keyboardMoveAboveThisItem():r.b.BOTTOM.isEqualTo(l.dragPosition)&&l.isDropPreventedByContentDepthRules().then((function(t){l.isAFolder()?!0!==e.isFolderOpen()||!l.isNotSameDropTarget()||l.isDnDPreventedInDiscussionContext()||t?!1!==e.isFolderOpen()||!l.isNotSameDropTarget()||l.isDnDPreventedInDiscussionContext()||t||l.keyboardMoveOntoFolder(l.scope.content().id):(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),l.keyboardMoveIntoFolderAsLastItem()):l._keyboardMoveAboveThisItem()})))})),e.$on("keyboard-drag-down",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&(l._removeKeyboardPlaceholderAndStyling(),l.isEmptyTarget&&(l.dragPosition=r.b.BOTTOM),r.b.SELF.isEqualTo(l.dragPosition)||r.b.BOTTOM.isEqualTo(l.dragPosition)?e.nextContentId&&e.nextContentId()?l.keyboardMoveDownToItem(e.nextContentId()):e.content().depth>1?(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),l.keyboardMoveBelowItem(e.content().parentId)):(l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):r.b.FOLDER.isEqualTo(l.dragPosition)?l.isDropPreventedByContentDepthRules().then((function(t){e.isFolderOpen&&!0===e.isFolderOpen()&&l.isNotSameDropTarget()&&!l.isDnDPreventedInDiscussionContext()&&!t?(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),l.keyboardMoveIntoFolderAsFirstItem()):l._keyboardMoveBelowThisItem()})):r.b.TOP.isEqualTo(l.dragPosition)&&l.isDropPreventedByContentDepthRules().then((function(e){l.isAFolder()&&l.isNotSameDropTarget()&&!l.isDnDPreventedInDiscussionContext()&&!e?l.keyboardMoveOntoFolder(l.scope.content().id):l._keyboardMoveBelowThisItem()})))})),e.$on("keyboard-drag-right",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&r.b.FOLDER.isEqualTo(l.dragPosition)&&e.isFolderOpen&&!1===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)})),e.$on("keyboard-drag-left",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&r.b.FOLDER.isEqualTo(l.dragPosition)&&e.isFolderOpen&&!0===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)})),e.$on("keyboard-move-up-to-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),e.content().id===l.dragDropService.currentDragId?(l.dragPosition=r.b.SELF,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):l.isAFolder()?l.scope.isFolderOpen&&!0===l.scope.isFolderOpen()?l.keyboardMoveIntoFolderAsLastItem():(l.dragPosition=r.b.FOLDER,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):l._keyboardMoveAboveThisItem())})),e.$on("keyboard-move-down-to-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),e.content().id===l.dragDropService.currentDragId?(l.dragPosition=r.b.SELF,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):l.isAFolder()?l.keyboardMoveOntoFolder(l.scope.content().id):l._keyboardMoveBelowThisItem())})),e.$on("keyboard-move-above-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),l._keyboardMoveAboveThisItem())})),e.$on("keyboard-move-below-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),l._keyboardMoveBelowThisItem())})),e.$on("keyboard-move-onto-folder",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),l.dragPosition=r.b.FOLDER,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation())})),e.$on("remove-placeholder",(function(){l.isEnabledForReordering()&&l.dragDropService.dropPlaceholderElement&&l.dragDropService.dropPlaceholderElement.remove(),l.isEmptyTarget&&l.element.children("bb-add-content-button").show()}))}return t.prototype._keyboardMoveBelowThisItem=function(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.content().id):this.scope.nextContentId&&this.scope.nextContentId()===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.nextContentId()):(this.dragPosition=r.b.BOTTOM,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())},t.prototype._keyboardMoveAboveThisItem=function(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.content().id):this.scope.previousContentId&&this.scope.previousContentId()===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.previousContentId()):(this.dragPosition=r.b.TOP,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())},t.prototype._informScreenReaderOfNewLocation=function(){var e=this.element.find("[bb-drag-handle]").eq(0).attr("drag-item-name"),t="";if(""!==this.dragDropService.queuedScreenReaderMessages&&(t+=this.dragDropService.queuedScreenReaderMessages,t+=" "),-1!==this.dragDropService.currentDropTargetId.indexOf("blank"))return t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-only-item-in-folder",noWrap:!0}),this.$rootScope.$broadcast(l.a,t),void(this.dragDropService.queuedScreenReaderMessages="");this.scope.previousContentId&&this.scope.previousContentId()||!r.b.TOP.isEqualTo(this.dragPosition)&&!r.b.SELF.isEqualTo(this.dragPosition)?this.scope.nextContentId&&this.scope.nextContentId()||!r.b.BOTTOM.isEqualTo(this.dragPosition)&&!r.b.SELF.isEqualTo(this.dragPosition)||(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-end-of-list",noWrap:!0}),t+=" "):(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-top-of-list",noWrap:!0}),t+=" "),r.b.SELF.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-self",noWrap:!0}):r.b.FOLDER.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-folder",params:{itemName:e},noWrap:!0}):r.b.TOP.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-above",params:{itemName:e},noWrap:!0}):r.b.BOTTOM.isEqualTo(this.dragPosition)&&(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-below",params:{itemName:e},noWrap:!0})),this.$rootScope.$broadcast(l.a,t),this.dragDropService.queuedScreenReaderMessages=""},t.prototype._applyKeyboardPlaceholderAndStyling=function(){var e=this.dropTargetElement;r.b.SELF.isEqualTo(this.dragPosition)?this.dropTargetElement.addClass(this.dragDropService.dragHoverClass):r.b.FOLDER.isEqualTo(this.dragPosition)?(this.dropTargetElement.before(this.dragDropService.currentDragElement),this.dragDropService.currentDragElement&&(1===this.scope.content().depth?this.dragDropService.currentDragElement.addClass(this.dragDropService.onFolderClass):2===this.scope.content().depth&&this.dragDropService.currentDragElement.addClass(this.dragDropService.onNestedFolderClass))):r.b.BOTTOM.isEqualTo(this.dragPosition)?(e=this.dragDropService.currentDragElement,this.dropTargetElement.after(this.dragDropService.currentDragElement)):r.b.TOP.isEqualTo(this.dragPosition)&&(e=this.dragDropService.currentDragElement,this.dropTargetElement.before(this.dragDropService.currentDragElement)),this._scrollContainer(e)},t.prototype._removeKeyboardPlaceholderAndStyling=function(){this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&(this.dragDropService.currentDragElement.removeClass(this.dragDropService.onFolderClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.onNestedFolderClass),this.dragDropService.currentDragElement.remove())},t.prototype._scrollContainer=function(e){this.dragDropService.scrollDragDropItemsContainer(e.offset().top,r.a.SCROLLING_CONSTANTS.keyboardInteractionDistanceToScroll)},t.prototype._keyboardEndDragAndClearValues=function(){var t=this;this.timeout((function(){e('[bb-drag-handle][drag-item-id="'+t.dragDropService.currentDragId+'"]').focus(),t.dragDropService.clearDropTarget(),t.dragDropService.currentDragId=void 0,t.dragDropService.currentDragType=void 0,t.dragDropService.isKeyboardDragging=!1}),this.scope,0,!1)},t.prototype.isDropPreventedByContentDepthRules=function(){var e=this;if(void 0!==this.dragDropService.currentDragHasFolderChild)return this.dragDropService.currentDragHasFolderChild.then((function(t){return a.r.ContentHandler.Folder.isEqualTo(e.dragDropService.currentDragType)&&(e.isDraggingOverFolder&&e.scope.content().depth===s.l||e.scope.content().depth>s.l||e.isDraggingOverFolder&&t)}));var t=this.$q.defer();return t.resolve(!1),t.promise},t.prototype.isDnDPreventedInDiscussionContext=function(){var e=this;return d.a.Discussions===e.dragDropService.currentDragContext&&a.r.ContentHandler.Folder.isEqualTo(e.dragDropService.currentDragType)&&(this.isDraggingOverFolder&&this.scope.content().depth===s.k||this.scope.content().depth>s.k)},t.prototype.dragOverFunc=function(e){var t=this;if(this.dragDropService.currentDragId&&this.dragDropService.currentDragId!==this.scope.content().id){this.dragDropService.setDropTarget(this.scope.content().id),!this.folderHoverTimeout&&this.scope.isFolderOpen&&!1===this.scope.isFolderOpen()&&(this.dropTargetElement.addClass(this.dragDropService.dragHoverClass),this.folderHoverTimeout=this.timeout((function(){t.isDropPreventedByContentDepthRules().then((function(e){e||t.isDnDPreventedInDiscussionContext()?(t.dragDropService.isShowingDepthMessage=!0,t.$rootScope.$broadcast("show-override-message",t.bbLocalizeService.translateSync({locale:t.bbLocalizeService.getLocale(t.scope),key:t.dragDropService.folderDepthMessageKey}),t.scope.content().id)):(t.scope.$emit("toggle-folder-by-id",t.scope.content().id),t.wasFolderOpened=!0)}))}),this.scope,1500)),this.dragDropService.isShowingDepthMessage&&this.dragDropService.isNotSameDropTarget()&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());var n=e,o=this.element.offset().top+this.element.height()/2,i=this.dragPosition;this.isAFolder()&&(this.isDraggingOverFolder=!0),this.scope.content().id.indexOf("placeholder")>-1?(this.dragDropService.positionAfter=this.scope.content().parentId,this.dragDropService.positionBefore=void 0,this.dragPosition=r.b.BOTTOM):n<=o?(this.dragDropService.positionBefore=this.scope.content().id,this.dragDropService.positionAfter=void 0,this.dragPosition=r.b.TOP):(this.dragDropService.positionAfter=this.scope.content().id,this.dragDropService.positionBefore=void 0,this.dragPosition=r.b.BOTTOM),(this.dragDropService.isNotSameDropTarget()||this.dragPosition!==i)&&(this._moveDropPlaceholderElement(),this.isEmptyTarget&&this.element.children().hide())}},t.prototype._moveDropPlaceholderElement=function(){var e=this;if(this.$rootScope.$broadcast("remove-placeholder"),this.dragDropService.currentDragId!==this.dragDropService.currentDropTargetId){e.dragDropService.positionBefore&&e.dragDropService.currentDropTargetId!==e.dragDropService.idOfNextItem?this.dropTargetElement.before(this.dragDropService.dropPlaceholderElement):e.dragDropService.currentDropTargetId.indexOf("placeholder")>-1&&e.dragDropService.idOfNextItem===e.dragDropService.currentDropTargetId||!e.dragDropService.positionAfter||e.dragDropService.currentDropTargetId===e.dragDropService.idOfPreviousItem||this.dropTargetElement.after(this.dragDropService.dropPlaceholderElement)}},t.prototype._isDroppingInSamePlace=function(){if(null!=this.dragDropService.positionAfter&&this.scope.previousContentId&&this.dragDropService.positionAfter===this.scope.previousContentId()||this.dragDropService.positionAfter===this.dragDropService.currentDragId||null!=this.dragDropService.positionBefore&&this.scope.nextContentId&&this.dragDropService.positionBefore===this.scope.nextContentId()||this.dragDropService.positionBefore===this.dragDropService.currentDragId)return!0},t.prototype.dropHandlerFunc=function(){var e=this;this.timeout.cancel(this.folderHoverTimeout),this.dropTargetElement.parents("[data-parent-id]").last().removeAttr("style"),this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("remove-placeholder"),this.$rootScope.$broadcast("file-drag-restore"),this.dragDropService.isShowingDepthMessage&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());var t={dragContentId:this.dragDropService.currentDragId,originalElement:this.dragDropService.originalElement,parentFolderId:this.scope.content().parentId,positionAfterId:this.dragDropService.positionAfter,positionBeforeId:this.dragDropService.positionBefore,rootScope:this.$rootScope,targetFolderId:this.scope.content().id};this.isDropPreventedByContentDepthRules().then((function(n){e._isDroppingInSamePlace()||e.isDnDPreventedInDiscussionContext()?e.dropCleanupFunc():!n&&e.isDraggingOverFolder?e.scope.$$phase||e.scope.$root&&e.scope.$root.$$phase?(e.scope.onMoveIntoFolderHandler()(t),e.dropCleanupFunc()):e.scope.$apply((function(){e.scope.onMoveIntoFolderHandler()(t),e.dropCleanupFunc()})):n?e.dropCleanupFunc():e.scope.$$phase||e.scope.$root&&e.scope.$root.$$phase?(e.scope.onMoveHandler()(t),e.dropCleanupFunc()):e.scope.$apply((function(){e.scope.onMoveHandler()(t),e.dropCleanupFunc()})),e.isDraggingOverFolder=!1}))},t.prototype.dropCleanupFunc=function(){this.wasFolderOpened&&(this.wasFolderOpened=!1,this.scope.$emit("toggle-folder-by-id",this.scope.content().id)),this.dragDropService.currentDragId=void 0,this.dragDropService.currentDragType=void 0,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&this.dragDropService.currentDragElement.remove()},t.prototype.dragLeaveFunc=function(){var e=this;this.isDraggingOverFolder=!1,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.timeout.cancel(this.folderHoverTimeout),this.folderHoverTimeout=void 0,this.isDropPreventedByContentDepthRules().then((function(t){t&&(e.dragDropService.isShowingDepthMessage=!1,e.broadcastShowOverrideMessage())}))},t.prototype.broadcastShowOverrideMessage=function(){var e=this;this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?this.$rootScope.$broadcast("show-override-message",void 0,this.scope.content().id):this.scope.$apply((function(){return e.$rootScope.$broadcast("show-override-message",void 0,e.scope.content().id)}))},t.prototype.keyboardMoveUpToItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-up-to-item",e)}),this.scope)},t.prototype.keyboardMoveDownToItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-down-to-item",e)}),this.scope)},t.prototype.keyboardMoveBelowItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-below-item",e)}),this.scope)},t.prototype.keyboardMoveAboveItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-above-item",e)}),this.scope)},t.prototype.keyboardMoveOntoFolder=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-onto-folder",e)}),this.scope)},t.prototype.keyboardMoveIntoFolderAsLastItem=function(){var e=this.scope.content().children;e.length>0?this.keyboardMoveBelowItem(e[e.length-1].id):this.keyboardMoveBelowItem(this.scope.content().id+"blank")},t.prototype.keyboardMoveIntoFolderAsFirstItem=function(){var e=this.scope.content().children;e.length>0?this.keyboardMoveAboveItem(e[0].id):this.keyboardMoveAboveItem(this.scope.content().id+"blank")},t.prototype.isNotSameDropTarget=function(){return this.scope.content().id!==this.dragDropService.currentDragId},t.prototype.isOnSamePanel=function(){return this.element.closest(".panel-content").is(this.dragDropService.originalElement.closest(".panel-content"))},t.prototype.isEnabledForReordering=function(){return!(this.scope.disableForReordering&&this.scope.disableForReordering())},t.prototype.isAFolder=function(){return null!=this.scope.isFolderOpen},t.$inject=["scope","element","attrs","$rootScope","$q",c.b,r.d,i.serviceName],t}(),h=function(){function e(e){var t=this;this.$injector=e,this.scope={onMoveIntoFolderHandler:"&?",onMoveHandler:"&",onFileDropHandler:"&",isFolderOpen:"&?",content:"&",previousContentId:"&?",nextContentId:"&?",disableForReordering:"&?"},this.restrict="A",this.link=function(e,n,o){e.dropHandlerDirective=t.$injector.instantiate(p,{scope:e,element:n,attrs:o})}}return e.$inject=["$injector"],e}();o.module(u,[r.c,c.a]).directive("bbDropHandler",["$injector",function(e){return e.instantiate(h)}])}).call(this,n("5iHu"))},DXZ4:function(e,t,n){},De5J:function(e,t,n){},Dt14:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}));var o=n("wHJ2"),i=n("pjml"),s="ultra.services.collab",r="collab",a=function(){function e(e,t,n,o,i,s){this.$compile=e,this.$rootScope=t,this.$timeout=n,this.CourseModel=o,this.CollabUltraModel=i,this.$sce=s}return e.prototype.joinVirtualClassroom=function(e,t){var n=window.open();this.getVirtualClassroomLaunchUrl(e,t).then((function(e){n.location.href=e}),(function(e){n.close()}))},e.prototype.getCollabSessions=function(e){return this.CourseModel.$new(e).collab.getVirtualClassroomSession()},e.prototype.getVirtualClassroomLaunchUrl=function(e,t){return this.CourseModel.$new(e).collab.sessions.$new(t).getLaunchUrl()},e.$inject=["$compile","$rootScope","$timeout",i.o.serviceName,i.l.serviceName,"$sce"],e}();o.module(s,[i.Q]).service(r,a)},E2HD:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("xwJZ"),s="ultra.components.directives.bbUiIcon.Grades";Object(o.a)(i.a,s,"bbUiIconGrades")},E4Qo:function(e,t){e.exports='<bb-modal id="notification-modal"\n          class="notification"\n          modal-title-key="{{::courseExport.exportModalTitleKey}}"\n          analytics-id-tag-prefix="course.export.modal.startArchive">\n  <div name="modal-contents">\n    <p bb-translate="course.export.modal.modalText" course-org-token-resolver></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="close-modal-export js-export-without-student-data button js-primary-button" \n          ng-click="courseExport.triggerCourseExport(false)"\n          analytics-id="course.export.modal.startExport.button">\n    <span bb-translate="course.export.modal.startExport"></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          class="close-modal-export js-export-with-student-data button button--secondary js-secondary-button" \n          ng-click="courseExport.triggerCourseExport(true)"\n          analytics-id="course.export.modal.startArchive.button">\n    <span bb-translate="course.export.modal.startArchive"></span>\n  </button>\n</bb-modal>'},EACR:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-export",use:"icon-medium-export-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-export"><g clip-path="url(#icon-medium-export_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 1L9 15M17 1h6v6M23 14v9H1V1h10" /></g><defs><clipPath id="icon-medium-export_clip0"><path fill="#fff" d="M0 0h24v24H0z" /></clipPath></defs></symbol>'});i.add(s);e.exports=s},ELoy:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("px9Z"),n("De5J"),n("GkCm");var o=n("wHJ2"),i=n("lEL+"),s=n("6sUD"),r="ultra.directives.telemetry.panel.header",a=function(){function e(t,n){var o=this;this.scope=t,this.timeout=n,this.showSpinner=!1,this.spinnerTimeout=this.timeout((function(){o.showSpinner=!0}),this.scope,e.WAIT_TIME_TO_SHOW_SPINNER),this.scope.$watch("::panelDataLoaded()",(function(e){e&&o.dataLoaded()}))}return e.prototype.dataLoaded=function(){this.timeout.cancel(this.spinnerTimeout),this.showSpinner=!1},e.$inject=["scope",i.b],e.WAIT_TIME_TO_SHOW_SPINNER=1e3,e}(),c=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=s,this.transclude=!0,this.scope={course:"&",panelDataLoaded:"&",titleKey:"@?",title:"@?",buttonOneIcon:"@",buttonOneCallback:"&",buttonOneAriaLabel:"@",buttonOneTitle:"@",buttonTwoIcon:"@",buttonTwoCallback:"&",buttonTwoAriaLabel:"@",buttonTwoTitle:"@"},this.link=function(e){e.telemetryPanelHeader=t.$injector.instantiate(a,{scope:e})}}return e.$inject=["$injector"],e}();o.module(r,[]).directive("bbTelemetryPanelHeader",["$injector",function(e){return e.instantiate(c)}])},Et3n:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("D57K"),i=n("0JpG"),s=n("yC9S"),r=n("dL5/"),a="ultra.directives.group.group-count";!function(){function e(){}e.prototype.$onInit=function(){},e.prototype.isSelfEnrollment=function(){return!!(this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0)&&this.content.selfEnrollmentGroups.some((function(e){return e.group&&!e.group.groupSetId}))},e=Object(o.__decorate)([Object(s.a)({moduleName:a,componentName:"bbGroupCount",template:r,bindings:{content:"<"},requireModules:[i.moduleName]})],e)}()},FB0g:function(e,t){e.exports='<div bb-load-bundle="components/directives/multi-user-usercard" class="multi-user-usercard" bb-foundation-defer>\n\n  <div class="multi-user-avatar usercard-button" ng-if="!noAvatar() && view() === \'multiple-instructors\'">\n    <bb-avatar user="multiUserUsercard.fakeMultiUser"></bb-avatar>\n  </div>\n\n  <div class="element-details">\n\n    \x3c!-- Multiple instructors usercard toggle button --\x3e\n    <div ng-if="view() === \'multiple-instructors\'" class="usercard-trigger">\n      <div class="multi-users-title name" ng-switch="multiUserUsercard.userType">\n        <span ng-switch-when="default" bb-translate>components.directives.multiUserUsercard.title.default</span>\n        <span ng-switch-when="instructor" course-org-token-resolver bb-translate>components.directives.multiUserUsercard.title.instructor</span>\n        <span ng-switch-when="leader" course-org-token-resolver bb-translate>components.directives.multiUserUsercard.title.leader</span>\n      </div>\n      <div class="view-users">\n        <button class="button-anchor"\n                ng-click="multiUserUsercard.toggleCard()"\n                ng-switch="multiUserUsercard.userType"\n                data-dropdown="{{::listId}}"\n                analytics-id="components.directives.multiUserUsercard.toggleCard.button"\n        >\n          <span class="separate-view-all-button" bb-translate>components.directives.multiUserUsercard.viewAll</span>\n          <span class="combined-view-all-button"\n                bb-translate-attrs="{\'aria-label\':\'components.directives.multiUserUsercard.viewAllSrText.\' +  multiUserUsercard.userType}"\n                translate-attrs-values="{ courseName: courseName }"\n                bb-translate\n                >\n                {{\'components.directives.multiUserUsercard.title.\' + multiUserUsercard.userType}}</span>\n        </button>\n      </div>\n    </div>\n\n    \x3c!-- User group usercard toggle button --\x3e\n    <div ng-if="view() === \'group-users\'" class="usercard-trigger assessment-exception">\n      <h2 bb-feature-toggle="differentiatedFeedback" remove-from-dom="true" class="slider-name">\n        <span class="page-title">\n          <bdi class="ellipse">{{groupUsersTitle()}}</bdi>\n        </span>\n      </h2>\n      <button aria-controls="group-members-id"\n            bb-feature-toggle="!differentiatedFeedback"\n            remove-from-dom="true"\n            data-dropdown="{{::listId}}"\n            aria-haspopup="true"\n            ng-click="multiUserUsercard.toggleCard()"\n            class="ellipse page-title group-member-dropdown clear"\n            analytics-id="components.directives.multiUserUsercard.toggleCard.button">\n        <span class="group-member-dropdown-flex-wrapper show-exceptions">\n          <bdi class="ellipse">{{groupUsersTitle()}}</bdi>\n          <bdi class="select-value"></bdi>\n        </span>\n      </button>\n    </div>\n\n    \x3c!-- Usercard list --\x3e\n    <div id="{{::listId}}" data-dropdown-content\n         ng-if="multiUserUsercard.isCardOpen"\n         class="multi-user-usercard-list"\n         ng-class="{\'multiple-instructors\': view() === \'multiple-instructors\', \'group-users\': view() === \'group-users\'}"\n         role="region" tabindex="-1"\n         bb-translate-attrs="{\'aria-label\': view() === \'multiple-instructors\' ? \'components.directives.multiUserUsercard.ariaLabels.instructor\' : \'components.directives.multiUserUsercard.ariaLabels.default\'}"\n         bb-focus\n         ng-keydown="multiUserUsercard.handleKeydown($event)"\n         bb-click-outside="multiUserUsercard.handleClickOutside()" is-active="true">\n      <div class="list-header" ng-if="view() === \'group-users\' && listHeader">\n        <h1>{{listHeader()}}</h1>\n      </div>\n      <ul>\n        <li ng-repeat="user in users | limitTo:multiUserUsercard.visibleUsersCount track by $index"\n            class="user-row js-user-{{::user.id}}"\n            ng-class="{\'separator\': ($index < users.length - 1) || showMoreButton()}"\n            aria-labelledby="user-row-name-{{::multiUserUsercard.userListId}}_{{$index}}">\n          <div class="user-avatar">\n            <bb-avatar user="user" auto-update="true" inactive="view() === \'group-users\' && !multiUserUsercard.isUserCourseAvailable(user.id)"></bb-avatar>\n          </div>\n          <div id="user-row-name-{{::multiUserUsercard.userListId}}_{{$index}}" class="user-name ellipsis">\n            <bb-username user="user" format="short" auto-update="true"></bb-username>\n            <div ng-if="view() === \'group-users\' && selectedUser === user" class="sub-text" ng-bind-html="selectedText"></div>\n          </div>\n        </li>\n      </ul>\n      <div ng-show="multiUserUsercard.showMoreButton()" class="show-all-users">\n        \x3c!-- htmlhint:analytics-id:disable --\x3e\n        <button class="button button--text" ng-click="multiUserUsercard.showAll($event)"\n                bb-translate="components.directives.multiUserUsercard.showMoreUsers.plural"\n                translate-values="{count: multiUserUsercard.hiddenUsersCount()}"\n                analytics-id="components.directives.multiUserUsercard.showMoreUsers.button">\n        </button>\n        \x3c!-- htmlhint:analytics-id:enable --\x3e\n      </div>\n    </div>\n\n  </div>\n</div>\n'},FH9J:function(e,t){e.exports='<div ng-switch="$ctrl.icon">\n  <bb-ui-icon-assignment ng-switch-when="assignment" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-assignment>\n  <bb-ui-icon-attendance ng-switch-when="attendance" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-attendance>\n  <bb-ui-icon-audio ng-switch-when="audio" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-audio>\n  <bb-ui-icon-blog ng-switch-when="blog" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-blog>\n  <bb-ui-icon-calculation ng-switch-when="calculation" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-calculation>\n  <bb-ui-icon-discussion ng-switch-when="discussion" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-discussion>\n  <bb-ui-icon-document-blank ng-switch-when="document-blank" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-document-blank>\n  <bb-ui-icon-document-text ng-switch-when="document-text" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-document-text>\n  <bb-ui-icon-folder ng-switch-when="folder|folder-open" ng-switch-when-separator="|" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-folder>\n  <bb-ui-icon-homework ng-switch-when="homework" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-homework>\n  <bb-ui-icon-journal ng-switch-when="journal" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-journal>\n  <bb-ui-icon-learning-module ng-switch-when="learning-module" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-learning-module>\n  <bb-ui-icon-link ng-switch-when="link" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-link>\n  <bb-ui-icon-lti ng-switch-when="lti" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-lti>\n  <bb-ui-icon-overall-grade ng-switch-when="overall-grade" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-overall-grade>\n  <bb-ui-icon-pdf ng-switch-when="pdf" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-pdf>\n  <bb-ui-icon-photo ng-switch-when="photo" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-photo>\n  <bb-ui-icon-presentation ng-switch-when="presentation" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-presentation>\n  <bb-ui-icon-scormengine ng-switch-when="scormengine" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-scormengine>\n  <bb-ui-icon-spreadsheet ng-switch-when="spreadsheet" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-spreadsheet>\n  <bb-ui-icon-survey ng-switch-when="survey" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-survey>\n  <bb-ui-icon-test ng-switch-when="test|quiz|exam" ng-switch-when-separator="|" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-test>\n  <bb-ui-icon-textbook ng-switch-when="textbook" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-textbook>\n  <bb-ui-icon-video ng-switch-when="video" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-video>\n  <bb-ui-icon-zip ng-switch-when="zip" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-zip>\n  <bb-ui-icon-document-blank ng-switch-default color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-document-blank>\n</div>'},GY9d:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("ERkP"),i=n("12Zt"),s=Object(i.a)(o.createElement(o.Fragment,null,o.createElement("path",{fill:"var(--icon-fill-color)",stroke:"transparent",fillRule:"evenodd",d:"M6.375 6.625c2.4853 0 4.5 2.0147 4.5 4.5V22h22c2.4853 0 4.5 2.0147 4.5 4.5s-2.0147 4.5-4.5 4.5h-26.5c-2.4853 0-4.5-2.0147-4.5-4.5V11.125c0-2.4853 2.0147-4.5 4.5-4.5z",clipRule:"evenodd"}),o.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",d:"M37 15V6H1v26h36V17"}),o.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",d:"M36 7L19 22 2 7"}),o.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M2 31l13-12m21 12L23 19"})),"large")},GbCx:function(e,t,n){},GkCm:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-main-menu",use:"icon-small-main-menu-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-main-menu"><path d="M1 3h14M15 8H1M1 13h14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"H/mg":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("D57K"),i=n("wHJ2"),s=n("ERkP"),r=n("1ZbL"),a=n("Dz4E"),c="ultra.components.directives.react-toolkit.contextual-menu",l={Class:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.render=function(){return this.props.show?s.createElement(a.ContextualMenu,{items:this.props.items,directionalHint:this.props.directionalHint,target:document.getElementById(this.props.targetId),onDismiss:this.props.dismiss,labelElementId:this.props.ariaLabelledby,analyticsId:this.props.analyticsId}):null},t}(s.Component),bindingNames:["items","targetId","show","dismiss","directionalHint"],attributes:["ariaLabelledby","analyticsId"]};i.module(c,[]).component("bbUiContextualMenu",Object(r.a)(l))},HCOL:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("OhrW"),s="ultra.components.directives.bbUiIcon.DocumentText";Object(o.a)(i.DocumentText,s,"bbUiIconDocumentText")},HGKz:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("Ul6e"),s="ultra.components.directives.bbUiIcon.Spreadsheet";Object(o.a)(i.Spreadsheet,s,"bbUiIconSpreadsheet")},HjsN:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var o=n("D57K"),i=(n("wnWX"),n("dCrD")),s=n("Oyr+"),r="allCloudUploadsCompleteEvent",a="failed",c=function(e){function t(t,n,o){var i=e.call(this,t,n,o)||this;return i.cloudUploadPromises=[],i.onFilesSelectedHandler=function(e){var t=[];e.forEach((function(e){var n={id:e.id,deferred:i.$q.defer()};t.push(n.deferred),i.cloudUploadPromises.push(n)})),i.$q.all(t.map((function(e){return e.promise}))).then((function(){i.scope.$emit(r)}),(function(e){i.scope.$emit(r,e)}))},i.resolveFileUploadDeferred=function(e,t){var n=i.cloudUploadPromises.findIndex((function(t){return t.id===e}));return n>=0&&(t?i.cloudUploadPromises[n].deferred.reject(t):i.cloudUploadPromises[n].deferred.resolve(),i.cloudUploadPromises.splice(n,1),!0)},i.cloudUploadAttachHandler=function(e,t,n,o){var s=i.scope.attachHandler||i.defaultAttachHandler,r=i.$q.defer();return s(e,t,n,o).then((function(){i.resolveFileUploadDeferred(t.ui.fileId)&&r.resolve()})),r.promise},n.$on(s.e,(function(e,t,n,o,r){o===s.c.Error?i.resolveFileUploadDeferred(t,a):o===s.c.Cancel&&i.resolveFileUploadDeferred(t)})),i}return Object(o.__extends)(t,e),t.$inject=["$injector","scope","element"],t}(i.a)},IAsK:function(e,t,n){},"IR+Z":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var o=n("wHJ2"),i=n("Oyr+"),s=n("0JpG"),r=n("Vsv2"),a=n("zXZW"),c=n("pjml"),l=n("12mu"),d=n("lEL+"),u=n("U2yl"),p=n("Poqp"),h="ultra.directives.bbKloudless",m=function(){function e(e,t,n,o,i,s,a,c){this.scope=e,this.$q=t,this.$exceptionHandler=n,this.bbLocalize=o,this.$modal=i,this.CloudDriveModel=s,this.CloudDriveTaskModel=a,this.timeout=c,this.provider=r.a.KLOUDLESS.toString(),this.bbLocalize.loadBundle("components/directives/kloudless")}return e.prototype.getFileId=function(e){return e.account+"|"+e.id},e.prototype.onFileSelect=function(e){this.scope.$emit(i.d,e,this.scope.primaryKey&&this.scope.primaryKey()),this.scope.onFilesSelected&&this.scope.onFilesSelected(e)},e.prototype.getDownloadFileInfo=function(e){var t=this.getFileId(e);return this.CloudDriveModel.$new("Kloudless").contents.$new(t).$fetch({accessToken:this.accessToken}).$asPromise()},e.prototype.downloadFiles=function(e,t,n,o){var s=this,r={accessToken:this.accessToken,expand:"mimeType,isMedia"};this.scope.fileLocation&&(r.fileLocation=this.scope.fileLocation),this.scope.webLocation&&(r.webLocation=this.scope.webLocation),(n?this.CloudDriveTaskModel.$new(o||e.id):this.CloudDriveModel.$new("Kloudless").contents.$new(o||e.id).download).$fetch(r).$then((function(n){if("COMPLETE"===n.status)var o=s.scope.$on(i.e,(function(r,a,c){c!==i.c.UploadProgressComplete||e.ui.fileId&&a!==e.ui.fileId||(s.attachHandler(n,e,t),o())}));else s.timeout((function(){s.downloadFiles(e,t,!0,n.taskId)}),s.scope,2e3);(n.completePercentage<100||"COMPLETE"===n.status)&&s.scope.$root.$broadcast(i.e,e.ui.index,n.completePercentage,null,i.c.UpdateProgress,e.inProgressFileId,e.ui.targetDiv,e.ui.fileId)}),(function(t){s.displayUploadError(),s.scope.$root.$broadcast(i.e,e.ui.fileId,e,i.c.Error,e.ui.targetDiv,s.scope.primaryKey&&s.scope.primaryKey()),s.$exceptionHandler(t,"source")}))},e.prototype.attachHandler=function(e,t,n){var o=this.$q.defer(),i={fileName:null,fileLocation:null};return e&&(i.fileName=e.fileName,i.fileLocation=e.fileLocation,i.webLocation=e.webLocation,i.mimeType=e.mimeType,i.isMedia=e.isMedia),this.scope.attachHandler(i,t,this.scope.isUploadMultipleFiles,void 0,n).then((function(e){o.resolve(e)}),(function(e){o.reject(e)})),o.promise},e.prototype.displayUploadError=function(){this.$modal.open({template:u,scope:this.scope})},e.$inject=["scope","$q","$exceptionHandler",s.serviceName,l.b,c.j.serviceName,c.k.serviceName,d.b],e}(),b=function(){function e(e,t,n,i){var s=this;this.$injector=e,this.$q=t,this.$modal=n,this.CloudDriveService=i,this.scope={attachHandler:"=",isFlatten:"=?",primaryKey:"&?",primaryKeyValue:"@?",fileLocation:"@?",webLocation:"@?",disableClick:"&?",allowMultiple:"=?",onFilesSelected:"=?",onCancelFocus:"=?"},this.restrict="A",this.link=function(e,t,n){var i=s,a=r.a.KLOUDLESS.toString();e.kloudless=s.$injector.instantiate(m,{scope:e}),e.folderBranchCounts=0,e.isInitialized=!!i.CloudDriveService.cloudDriveStorage[a],e.isInitialized||i.CloudDriveService.initializeCloudDrive(r.a.KLOUDLESS);var c=function(t){var n=[];if(t&&t.length>0){for(var o=0;o<t.length;o++)n.push(e.kloudless.getDownloadFileInfo(t[o]));i.$q.all(n).then((function(t){i.CloudDriveService.isGettingFilesInfo=!1,e.kloudless.onFileSelect(t),t.length>1&&(e.isUploadMultipleFiles=!0)}),(function(){i.CloudDriveService.isGettingFilesInfo=!1}))}};t.on("click",(function(){e.disableClick&&e.disableClick()||!e.isInitialized||(i.CloudDriveService.cloudDriveStorage[a].openFilePicker(e,e.allowMultiple).then((function(n){if((n||[]).length>0){if(!n[0]||!n[0].bearer_token||!n[0].bearer_token.key)return void s.$modal.open({template:p,scope:e});e.kloudless.accessToken=n[0].bearer_token.key,i.CloudDriveService.isGettingFilesInfo=!0,o.isDefined(e.allowMultiple)&&!1===e.allowMultiple&&n.length>1?c([n[0]]):c(n)}else e.onCancelFocus?e.onCancelFocus():t.focus()})),e.$on("$destroy",(function(){i.CloudDriveService.isGettingFilesInfo=!1,t.off("click")})))})),e.$on("downloadFile",(function(t,n,o){n.ui.primaryKey===(e.primaryKey&&e.primaryKey())&&n.file.$url().indexOf("Kloudless")>=0&&e.kloudless.downloadFiles(n,o)}))}}return e.$inject=["$injector","$q","$modal",r.c],e}();o.module(h,[s.moduleName,r.b,a.a,l.a,d.a]).directive("bbKloudless",["$injector",function(e){return e.instantiate(b)}])},IWgv:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("xS64"),n("66CI"),n("vcLy"),n("KXuk");var o=n("wHJ2"),i=n("pjml"),s=n("0JpG"),r=n("mCEN"),a=n("bMxM"),c=n("TnpK"),l=n("66CP"),d="ultra.components.directives.content.contentItemIcon",u=function(){function e(e,t,n,o,s,r,a){var c=this;this.scope=e,this.$q=t,this.element=n,this.bbLocalize=o,this.contentIconService=s,this.ColumnModel=r,this.$state=a,this.iconName="document-blank",this.iconColor="primary",this.iconNameForLocalization="document-blank";var l,d=[],u=i.r.ContentHandler,p=e.$watch((function(){return e.contentColumn}),(function(){var t=e.bbContentItemIcon&&e.bbContentItemIcon.contentHandler&&e.bbContentItemIcon.contentHandler.toString();if(t)switch(t){case u.LtiLink.toString():l="bbContentItemIcon",d=["showAlertIcon"];break;case u.CourseLink.toString():if(e.bbContentItemIcon.contentDetail)var n=c.scope.$watch((function(){return e.bbContentItemIcon.id}),(function(t){t&&(e.bbContentItemIcon.getLinkContentSource().$then((function(e){c.contentIconService.getIconClass(e).then((function(e){e&&(c.iconColor=c.scope.showAlertIcon?"error":"primary",c.iconName=c.contentIconService.getIconName(e),c.iconNameForLocalization=c.contentIconService.getIconNameForLocalization(c.iconName))}))})),n())}));else c.iconColor=c.scope.showAlertIcon?"error":"primary",c.iconName=c.contentIconService.getIconName(e.bbContentItemIcon.getContentHandlerByIconUrl().iconClass),c.iconNameForLocalization=c.contentIconService.getIconNameForLocalization(c.iconName);break;case u.RusticiScorm.toString():d=[(l="bbContentItemIcon")+".contentDetail['"+t+"'].gradebookItems[0].gradingColumn.gradebookCategory.id"];break;default:d=[(l="bbContentItemIcon")+".contentHandler",l+".ui.isOpen",l+".contentDetail['"+u.File.toString()+"'].file.mimeType",l+".contentDetail['"+u.TestLink.toString()+"'].test.gradingColumn.gradebookCategory.id",l+".contentDetail['"+u.TestLink.toString()+"'].assignment.gradingColumn.gradebookCategory.id"]}else e.contentColumn&&(d=[(l="contentColumn")+".scoreProviderHandle",l+".calculationType",l+".externalGrade",l+".visible",l+".summary.numStudentsGraded()",l+".summary.numStudentSubmissions()",l+".categoryTitle",l+".dueDate"]);var o=e.$watchGroup(d,(function(){var t=e[l];if(t){(t instanceof c.ColumnModel?c.contentIconService.getColumnIconClass(t):c.contentIconService.getIconClass(t)).then((function(e){e&&(c.iconColor=c.scope.showAlertIcon?"error":"primary",c.iconName=c.contentIconService.getIconName(e),c.iconNameForLocalization=c.contentIconService.getIconNameForLocalization(c.iconName));var n=u.Folder.isEqualTo(t.contentHandler),i=u.Unknown.isEqualTo(t.contentHandler),s=u.File.isEqualTo(t.contentHandler),a=u.LtiLink.isEqualTo(t.contentHandler),l=u.RusticiScorm.isEqualTo(t.contentHandler),d=u.TestLink.isEqualTo(t.contentHandler);n||i||t instanceof r||s||a||l||d||o(),p()}))}}))}))}return e.prototype.showStatusIcon=function(){return this.scope.bbContentItemIcon&&this.scope.bbContentItemIcon.canEdit&&!this.$state.includes("**.content-navigator-placeholder.**")&&!this.scope.bbContentItemIcon.canEdit()&&(this.scope.bbContentItemIcon.isConditionalReleaseLocked()||this.scope.bbContentItemIcon.isStarted()||this.scope.bbContentItemIcon.isCompleted())},e.prototype.getStatusIconName=function(){return this.scope.bbContentItemIcon.isStarted()?"started":this.scope.bbContentItemIcon.isCompleted()?"complete":"lock-circle"},e.$inject=["scope","$q","element",s.serviceName,a.b,i.F.serviceName,c.d],e}(),p=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.template=l,this.scope={bbContentItemIcon:"=",contentColumn:"=",showAlertIcon:"="},this.link=function(e,n){e.contentItemIcon=t.$injector.instantiate(u,{scope:e,element:n})}}return e.$inject=["$injector"],e}();o.module(d,[r.a,a.a,c.b]).directive("bbContentItemIcon",["$injector",function(e){return e.instantiate(p)}])},IfWz:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-gdrive",use:"icon-medium-gdrive-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-gdrive"><path stroke-width="4" d="M7.481 7.4388l1.189 2.081-2.329 4.0338-1.189-2.081 2.329-4.0338z" /><path stroke-width="4" d="M5.3476 11.1388l1.189 2.081-2.329 4.0338-1.189-2.081 2.329-4.0338zM13.6147 19.5662l1.2334-2.1144h4.7574l-1.2334 2.1144h-4.7574z" /><path stroke-width="4" d="M9.364 19.5662l1.2333-2.1144h4.7574l-1.2334 2.1144H9.364zM17.1374 8.4873l-2.3708-.0106-2.304-3.9905 2.371.0107 2.3038 3.9904h0z" /><path stroke-width="4" d="M19.3393 12.2794l-2.3709-.0106-2.304-3.9905 2.371.0106 2.3039 3.9905z" /></symbol>'});i.add(s);e.exports=s},IiJs:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var o=n("D57K"),i=n("wHJ2"),s=n("pjml"),r="ultra.services.collabUltra",a="collabUltra",c=function(){function e(e,t,n,o,i,s,r){this.$q=e,this.$compile=t,this.$rootScope=n,this.$timeout=o,this.CourseModel=i,this.CollabUltraModel=s,this.$sce=r}return e.prototype.getCollabB2Info=function(){return this.collabB2InfoPromise=this.collabB2InfoPromise||this.CollabUltraModel.$build().getCollabUltraInfo()},e.prototype.getAllCollabSessions=function(e){return this.CourseModel.$new(e).collabUltra.getAllCollabSessions()},e.prototype.enableCourseRoom=function(e,t){return this.CourseModel.$new(e).collabUltra.enableCourseRoom(t)},e.prototype.disableCourseRoom=function(e,t){return this.CourseModel.$new(e).collabUltra.disableCourseRoom(t)},e.prototype.getLaunchUrl=function(e,t){return this.CourseModel.$new(e).collabUltra.sessions.$new(t).getLaunchUrl()},e.prototype.getCourseCollab=function(e){return this.CourseModel.$new(e).collabUltra.getCourseCollabInfo()},e.prototype.launchDiscussionSession=function(e,t,n){return this.CourseModel.$new(e).collabUltra.launchDiscussionSession(t,n)},e.prototype.getCollabSessionStatus=function(e,t){var n=this;return this.getCollabB2Info().then((function(t){return 200===t.$response.status?n.CourseModel.$new(e).collabUltra.sessions.$fetch().$allow([403,500,504]).$asPromise():n.$q.reject()})).then((function(o){return 200===o.$response.status?n.CourseModel.$new(e).groups.$new(t).collabSession.$fetch({expand:"sessionInstances"}).$allow(["400-599"]).$asPromise().then((function(e){return e.filter((function(e){return e.sessionInstances&&e.sessionInstances.length>0})).length>0})):n.$q.when(null)}),(function(){return n.$q.when(null)}))},e.$inject=["$q","$compile","$rootScope","$timeout",s.o.serviceName,s.l.serviceName,"$sce"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(c);i.module(r,[s.Q]).service(a,c)},J4qU:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("D57K"),i=n("pjml"),s=n("0JpG"),r=n("7pcG"),a=n("Fvsw"),c="ultra.components.services.calendar.schedule",l="bbSchedule",d=function(){function e(e,t,n){this.localize=e,this.calendar=t,this.context=n}return e.prototype.getWeeklyRepeatLabel=function(e,t,n,o){var r,a=this;if(void 0===n&&(n="medium"),!i.i.RecurFrequency.Weekly.isEqualTo(e.recurRules.freq))return"";switch(n.trim().toLowerCase()){case"short":r=s.ILocaleDateFormat.ShortWeekday;break;case"medium":r=s.ILocaleDateFormat.MediumWeekday;break;case"long":r=s.ILocaleDateFormat.LongWeekday;break;default:r=s.ILocaleDateFormat.MediumWeekday}return e.recurRules.byWeekDay.map((function(e){return i.i.RecurWeekDay.parse(e)})).filter((function(e){return!!e})).sort((function(e,t){return e.dayOfWeek-t.dayOfWeek})).map((function(e){return a.localize.formatDateSync(a.calendar.getSampleDateForDayOfWeek(e.dayOfWeek),r)})).join(this.localize.translateSync({locale:o,key:t,options:{noWrap:!0}}))},e.prototype.getNextMonthlyEventDate=function(e,t){return this.updateDate(e,t,this.calendar.getNextEventForMonthlyRepeat(e.recurRules,this.context.getServerTime()))},e.prototype.getNextDailyEventDate=function(e,t){return this.updateDate(e,t,this.calendar.getNextEventForDailyRepeat(e.recurRules,this.context.getServerTime()))},e.prototype.updateDate=function(e,t,n){var o=t[e.itemSourceId];return o&&o.getTime()===n.getTime()||(t[e.itemSourceId]=n,o=n),o},e.$inject=[s.serviceName,r.b,a.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(d);angular.module(c,[r.a,a.a,s.moduleName]).service(l,d)},J8YL:function(e,t){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options" data-show-add-options ng-click="addContentButton.toggleMenu()"\n     ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n     aria-expanded="{{addContentButton.isMenuVisible}}" aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n     aria-label="{{addContentButton.addButtonAriaLabel}}"\n     ng-focus="addContentButton.showButton()" ng-blur="addContentButton.hideButton()"\n     analytics-id="components.directives.add-content-button.assignment.button">\n  </button>\n  \x3c!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        allow-multiple="true"\n        monitor-leave="true"\n        disable-drag="disableDrag && disableDrag()"\n        target-div="{{\'#\' + fileListViewId}}"\n        hide-transclude-during-upload="false"\n        is-third-party-upload="false"\n        disallow-folder-uploads="true"\n        skip-zip-file-check="true"\n        ignored-states="::ignoredStates()"\n        position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n           ng-click="addContentButton.toggleMenu()"\n           analytics-id="components.directives.add-content-button.assignment.fileUpload.link" >\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon><span bb-translate analytics-id="course.content.buildContentArea.addFiles">course.content.buildContentArea.addFiles</span>\n        </a>\n      </bb-file-upload>\n    </li>\n    <li ng-if="!addContentButton.isMobile">\n      \x3c!-- Skip zip file check, assignment does not support unzip file(LRN-101238) --\x3e\n      <bb-file-upload allow-multiple="true" monitor-leave="true" is-third-party-upload="true"  hide-transclude-during-upload="false" skip-zip-file-check="true"\n                      click-enabled="false" primary-key="fileListViewId" disable-drag="disableDrag && disableDrag()"\n                      third-party-download-handler="addContentButton.downloadFile" target-div="{{\'#\' + fileListViewId}}"\n                      position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           bb-one-drive primary-key="fileListViewId"\n           is-flatten="false"\n           attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n           ignored-states="::ignoredStates()"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.add-content-button.aria-label.content.oneDrive\'}"\n           ng-click="addContentButton.toggleMenu(\'OneDriveUpload\')"\n           analytics-id="components.directives.add-content-button.assignment.oneDrive.link">\n          <div>\n            <i class="icon-cloud"></i><span bb-translate>components.directives.add-content-button.oneDrive</span>\n          </div>\n        </a>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},JbZT:function(e,t,n){},JfeD:function(e,t,n){},JiEj:function(e,t){e.exports='<div bb-load-bundle="components/directives/content/learning-module/learning-module-base-item" class="base-content-item bb-lm-base-item"\n  bb-cache-compilation="lm-base-item">\n  <div class="content-item-base-container guidance-overflow-fix js-content-item-base" ng-paste="$event.stopPropagation()">\n    <div ng-switch on="content.ui.importPlaceholder">\n      \x3c!-- Import placeholder  --\x3e\n      <div ng-switch-when="true" class="placeholder-container" bb-focus>\n        <div class="placeholder-text" bb-translate>components.directives.content-item-base.copy-placeholder</div>\n        <div class="sr-only" bb-translate>components.directives.content-item-base.please-wait</div>\n      </div>\n\n      \x3c!-- Non-imported content --\x3e\n      <div ng-switch-default class="drag-element-row" ng-class="{\'is-restricted\': content.canEdit() && content.isHiddenFromStudents(), \'isNotClickable\': content.isConditionalReleaseLocked() || content.isRestricted() && !content.canEdit()}">\n        <div class="content-item-row">\n          <div class="content-item-details" ng-class="{\'is-uploading\':content.ui.isUploading}">\n            <div class="element-card outline-item">\n\n              <ng-switch on="content.ui.isUploading">\n                \x3c!-- Uploading section begin --\x3e\n\n                <div ng-switch-when="true" class="upload-file">\n                  <bb-progress displayResults="false" id="{{content.ui.fileUploadId}}" class="bb-progress"></bb-progress>\n                </div>\n                \x3c!-- Uploading section end --\x3e\n\n                <div class="outline-item-inner" ng-switch-default>\n\n                  <div class="lm-header-section">\n                    \x3c!-- Learning Module title section begin --\x3e\n\n                    \x3c!-- Learning Module title editor --\x3e\n                    <div class="lm-header-row" bb-click-to-invoke-child=".list-tree-toggle button">\n                      \x3c!-- Header row section --\x3e\n                      <div class="lm-title-text-editor">\n                        <div class="editable-title-container" ng-show="!baseItem.titleEditMode">\n                          \x3c!-- Conditional release section begin --\x3e\n                          <div class="element-conditional-release" ng-if="!content.canEdit() && content.isConditionalReleaseLocked()">\n                            <bb-svg-icon size="small" icon="lock"></bb-svg-icon>\n                          </div>\n                          <div class="element-conditional-release" ng-if="!content.canEdit() && content.isForcedSequenceModule() && content.state === \'Started\'">\n                            <bb-svg-icon size="small" icon="started" status="success"></bb-svg-icon>\n                          </div>\n                          <div class="element-conditional-release" ng-if="!content.canEdit() && content.isForcedSequenceModule() && content.state === \'Completed\'">\n                            <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n                          </div>\n                          \x3c!-- Conditional release section end --\x3e\n                          \x3c!-- Attach event only at Instructor View --\x3e\n                          <div ng-if="::content.canEdit()" class="lm-title-instructor">\n                            <h3 class="sr-only" tabindex="-1">{{content.title}}</h3>\n                            <h3 class="lm-title secondary-title ellipse" ng-click="baseItem.enterTitleEditMode($event)" tabindex="-1" aria-hidden="true"\n                                analytics-id="components.directives.learningModule.baseItem.enterTitleEditMode.header">\n                            {{content.title}}\n                            </h3>\n                            <button ng-if="::content.canEdit()" class="button super-clear edit-title" type="button"\n                                ng-click="baseItem.enterTitleEditMode($event)"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.base-item.edit-title\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                analytics-id="course.learning.module.base.item.editTitle.button"\n                                >\n                                <bb-svg-icon size="small" icon="draw" aria-hidden="true"></bb-svg-icon>\n                            </button>\n                          </div>\n\n                          \x3c!-- Just display title at Student View --\x3e\n                          <div class="lm-title-student" ng-if="::(!content.canEdit())">\n                            <button class="lm-title secondary-title ellipse"\n                                tabindex="0"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.aria-label.toggleLM\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                aria-expanded="{{isOpen}}"\n                                title="{{::content.title}}"\n                                ng-click="!content.isConditionalReleaseLocked() && baseItem.toggleLM()"\n                                analytics-id="course.learning.module.base.item.toggleLm.button">\n                              {{::content.title}}\n                            </button>\n                            <div ng-if="content.isConditionalReleaseLocked()"\n                              role="tooltip"\n                              tabindex="0"\n                              class="lock-info"\n                              bb-complex-tooltip\n                              enhanced-tooltip="true"\n                              tooltip-position="bottom"\n                              tooltip-open-on-activation="true"\n                              tooltip-disable-on-mouse-over="true"\n                              tooltip-scope="baseItem.conditionalRelease.tooltipScope"\n                              tooltip-template="{{::baseItem.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n                              <span bb-translate>components.directives.content-item-base.conditionalRelease.lock-info</span>\n                              <span class="sr-only">{{baseItem.conditionalRelease.tooltips}}</span>\n                            </div>\n                          </div>\n                        </div>\n\n                        <div ng-show="baseItem.titleEditMode" bb-click-outside="baseItem.exitTitleEditMode()" ng-if="::content.canEdit()">\n                          <div class="lm-input">\n                            <input name="learning-module-title" class="lm-header-title lm-title" type="text" autocapitalize="off" ng-keydown="baseItem.onTitlePressKey($event)"\n                              maxlength="{{::baseItem.titleMaxLength}}" ng-model="content.title" ng-model-options="{ getterSetter: true }"\n                              ng-blur="baseItem.exitTitleEditMode($event)" ng-change="baseItem.onChangeTitle()" ng-click="$event.stopPropagation()"\n                              aria-required="true"\n                              bb-translate-attrs="{\'aria-label\': \'components.directives.header.placeholder.x-bb-lesson\'}"\n                              ng-required="true"\n                              analytics-id="course.learning.module.base.item.learningModuleTitle.input.text">\n                          </div>\n                        </div>\n                        \x3c!-- Learning Module visibility selector  --\x3e\n                        <div class="lm-visibility-selector" ng-if="content.canEdit() || (baseItem.isCourseCompletedAndInInstructorView() && content.isConditionalRelease())">\n                          <bb-content-visibility-selector ng-if="::content.canEdit()" content="content" is-visibility-selector-enabled="true" onchange-func="baseItem.onChangeVisibility()"\n                            open-panel-on-restricted="true" disable-restricted="false" enable-conditional-release="true">\n                          </bb-content-visibility-selector>\n                          <div class="rules" ng-if="(content.canEdit() || baseItem.isCourseCompletedAndInInstructorView()) && content.isConditionalRelease()">\n                            <a href="javascript:void(0);"\n                              ng-click="baseItem.canOpenConditionalRelease && baseItem.openConditionalRelease()"\n                              bb-complex-tooltip\n                              enhanced-tooltip="true"\n                              tooltip-position="bottom"\n                              tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n                              tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n                              tooltip-auto-update="true"\n                              tooltip-scope="baseItem.conditionalRelease.tooltipScope"\n                              tooltip-template="{{::baseItem.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n                              analytics-id="components.directives.content-item-base.conditionalRelease.{{baseItem.conditionalRelease.conditionType}}.link">\n                              <span bb-translate>components.directives.content-item-base.conditionalRelease.{{baseItem.conditionalRelease.conditionType}}</span>\n                              <span class="sr-only">{{baseItem.conditionalRelease.tooltips}}</span>\n                            </a>\n                          </div>\n                        </div>\n                        \x3c!-- Learning Module control section begin --\x3e\n                        \x3c!-- for student --\x3e\n                        \x3c!-- <div ng-if="::(!content.canEdit())">\n                          <span class="lm-counting">{{baseItem.completed}} / {{baseItem.count}}</span>\n                        </div> --\x3e\n                        \x3c!-- for instructor --\x3e\n                        <div ng-if="::(content.canEdit() && canMove)" ng-show="!baseItem.titleEditMode" class="lm-drag-button">\n                          <button bb-drag-handle drag-item-id="{{content.id}}"\n                                  drag-item-name="{{content.title}}"\n                                  drag-item-type="{{content.contentHandler}}"\n                                  drag-item-context="{{contextArea}}"\n                                  class="super-clear small button icon js-drag-handle"\n                                  translate-attrs-values="{contentTitle: content.title}"\n                                  bb-translate-attrs="{\'title\': \'components.directives.content-item-base.move\', \'aria-label\': \'components.directives.content-item-base.aria-label.move\'}"\n                                  analytics-id="course.learning.module.base.item.move.button">\n                            <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n                          </button>\n                        </div>\n                        <div bb-foundation-defer>\n                          <bb-overflow-menu ng-if="::(content.canDelete() || content.canEdit() || content.hasConversation() && !content.isConditionalReleaseLocked())"\n                                            element-id="{{::(\'learning-module\' + baseItem.controlId)}}"\n                                            element-name="{{content.title}}"\n                                            menu-items="baseItem.getOverflowMenu()"\n                                            analytics-id-tag-prefix="components.directives.learning-module.base-item.overflowMenu">\n                          </bb-overflow-menu>\n                        </div>\n                      </div>\n\n                      \x3c!-- Learning Module control section end --\x3e\n                      <div class="list-tree-toggle" ng-if="::(content.canEdit() || !content.isRestricted())">\n                        <button class="button super-clear" ng-click="baseItem.toggleLM()" aria-controls="{{::\'learning-module-contents-\' + content.id}}"\n                          aria-expanded="{{isOpen}}"\n                          bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.aria-label.toggleLM\',\n                          title: isOpen ? \'components.directives.learning-module.base-item.collapse\' : \'components.directives.learning-module.base-item.expand\'}"\n                          translate-attrs-values="{learningModuleName: content.title}"\n                          analytics-id="course.learning.module.base.item.toggleLm.button"\n                          >\n                          <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n                        </button>\n                      </div>\n                    </div>\n                    \x3c!-- Learning Module title section end --\x3e\n                  </div>\n                  \x3c!-- Learning Module description section begin --\x3e\n                  <div class="lm-description"  ng-if="::(content.canEdit() || content.description)" ng-show="isOpen">\n                    \x3c!-- Displays at instructor view  --\x3e\n\n                    <div ng-if="::(content.canEdit())">\n                      <div class="lm-add-description" ng-if="!content.description && !baseItem.descriptionEditMode">\n                        <button type="button"\n                                class="lm-add-description-btn"\n                                ng-click="baseItem.editDescription()"\n                                bb-translate-attrs="{\'aria-label\': baseItem.toggleAriaLabel}"\n                                analytics-id="course.learning.module.base.item.lmAddDescription.button">\n                          <bb-svg-icon size="small" icon="draw" aria-hidden="true"></bb-svg-icon>\n                          <span bb-translate>components.directives.learning-module.base-item.add-description</span>\n                        </button>\n                      </div>\n\n                      <div ng-show="baseItem.descriptionEditMode" is-active="baseItem.descriptionEditMode" bb-click-outside="baseItem.saveDescription()">\n                        <form>\n                          <bb-basic-text-editor ng-model="content.description"\n                            element-id="{{::(\'lm-editor\' + content.id)}}"\n                            class="lm-description-editor"\n                            ng-class="{focused: baseItem.descriptionEditMode}"\n                            input-max-length="250"\n                            read-only="false"\n                            should-prevent-line-breaking="false"\n                            >\n                          </bb-basic-text-editor>\n                          <div class="buttons-2 equal-buttons panel-footer-right">\n                              <button class="button button--secondary js-cancel js-secondary-button non-first-focus"\n                                      ng-click="baseItem.cancelDescriptionEdit()"\n                                      bb-translate\n                                      ng-mousedown="$event.preventDefault()"\n                                      type="button"\n                                      analytics-id="components.directives.save-buttons.cancel">components.directives.save-buttons.cancel</button>\n                              <button class="button js-save js-primary-button non-first-focus"\n                                      ng-disabled="!baseItem.isDescriptionEdited()"\n                                      ng-click="baseItem.saveDescription()"\n                                      bb-translate\n                                      ng-mousedown="$event.preventDefault()"\n                                      type="button"\n                                      analytics-id="components.directives.save-buttons.notSaved">components.directives.save-buttons.notSaved</button>\n                            </div>\n                        </form>\n                      </div>\n\n                      <div class="description-show-text-container"\n                           ng-show="content.description && !baseItem.descriptionEditMode"\n                           ng-click="baseItem.onDescriptionClicked()"\n                           analytics-id="components.directives.learning-module.base-item.descriptionClicked"\n                      >\n                        <p class="description-show-text">\n                          {{content.description}}\n                        </p>\n                        <button class="description-editor"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.base-item.edit-description\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                analytics-id="course.learning.module.base.item.editDescription.button">\n                            <bb-svg-icon icon="draw" size="small" aria-hidden="true"></bb-svg-icon>\n                        </button>\n                      </div>\n                    </div>\n\n                    \x3c!-- Displays at student view --\x3e\n                    <div ng-if="::(!content.canEdit())">\n                      <div>\n                        <p class="description-show-text">\n                          {{content.description}}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \x3c!-- Learning Module description section end --\x3e\n              </ng-switch>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},Jwnl:function(e,t){e.exports='\x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n<button ng-if="!contentItemBase.isEngagementOutline()"\n        class="content-title" ng-class="{\'name-middle\': contentItemFolder.shouldAlignMiddle()}"\n        ng-click="contentItemFolder.toggleFolder()"\n        aria-expanded="{{content.ui.isOpen}}"\n        aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n        bb-translate-attrs="{\'aria-label\':\'components.directives.content-item-base.aria-label.toggle-folder\'}"\n        translate-attrs-values="{folderName: content.title}"\n        analytics-id="content.item.folder.toggleFolder.button"><span>{{ content.title }}</span></button>\n<button ng-if="contentItemBase.isEngagementOutline()"\n        class="content-title name"\n        ng-click="contentItemFolder.toggleFolder()"\n        aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n        aria-expanded="{{content.ui.isOpen}}"\n        analytics-id="content.item.folder.engagementOutline.toggleFolder.button"><span>{{ content.title }}</span></button>'},"KBr+":function(e,t,n){"use strict";var o=n("D57K"),i=n("wHJ2"),s=n("iYZE"),r=function(){function e(e,t,n,o){this.modelStatic=t,this.$q=n,this.$timeout=o,this.toFetch={},this.cache=new s(e)}return e.prototype.push=function(e,t){var n=this.cache.get(e);if(void 0!==n)return t(null,this.modelStatic.$buildRaw(n),e);var o=this.toFetch[e];null==o?this.toFetch[e]=[t]:o.push(t)},e.prototype.load=function(e){var t=this.$q.defer();return i.isArray(e)&&e.length>0||!i.isArray(e)?this._loadInternal(e,(function(e,n,o){e?t.reject(e):t.resolve(n)})):t.resolve({}),t.promise},e.prototype._loadInternal=function(e,t){if(Array.isArray(e))for(var n=this.getCoalescingCallback(e.length,t),o=0;o<e.length;o++)this.push(e[o],n);else this.push(e,t);this.lazyLoad()},e.prototype._load=function(){var e=this,t=this.toFetch;this.toFetch={};var n=Object.keys(t);0!==n.length&&this.modelStatic.findMany(n).$asPromise().then((function(o){var i,s={};if(Array.isArray(o))for(var r=0;r<o.length;r++)s[(i=o[r]).id]=i;else{if("object"!=typeof o)throw new Error("Invalid items format");s=o}for(var a=0;a<n.length;a++){var c=n[a];i=s[c];var l=t[c];e.cache.set(c,void 0===i?null:i.$encode());for(var d=0;d<l.length;d++)l[d](null,i,c)}}),(function(e){n.forEach((function(n){t[n].forEach((function(t){t(e)}))}))}))},e.prototype.lazyLoad=function(){var e=this;null==this.timeout&&(this.timeout=this.$timeout((function(){e._load(),e.timeout=null}),0,!1))},e.prototype.getCoalescingCallback=function(e,t){var n=!1,o={},i=0;return function(s,r,a){if(!n){if(s)return n=!0,t(s);r&&(o[a]=r),++i>=e&&(n=!0,t(null,o))}}},e}();i.module("ultra.utility.batchLoader",[]).factory("BatchLoaderFactory",["$q","$timeout",function(e,t){return function(n,o){return new r(n,o,e,t)}}]);var a=n("pjml");n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var c="ultra.batchLoader.courseNameBatchLoader",l="CourseBatchLoader",d=function(){function e(e,t){this.batchLoader=e(200,t)}return e.prototype.load=function(e){return this.batchLoader.load(e)},e.$inject=["BatchLoaderFactory",a.o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(d);i.module(c,["ultra.utility.batchLoader",a.Q]).service(l,d)},KKAh:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("BY8f"),s="ultra.components.directives.bbUiIcon.Journal";Object(o.a)(i.Journal,s,"bbUiIconJournal")},KXuk:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-complete",use:"icon-small-complete-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-complete"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8l2 3 4-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},KmIE:function(e,t,n){},KtUo:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var o=function(e){return e.contextualDate||e.notificationCreationDate},i=function(e,t){var n=new Date(t.getTime());n.setHours(0,0,0,0);var o=new Date(n.getTime()+864e5);return e<n?-1:e>=o?1:0},s=function(e){return e&&Object.keys(e||{}).reduce((function(t,n){return t.concat(e[n])}),[])}},"L+81":function(e,t,n){"use strict";n("zhNR"),n("Siqh"),n("Xc1Q");var o=n("lx16"),i=n("wHJ2"),s=n("kC07"),r=n("D8d/"),a=n("pjml"),c=n("lEL+"),l=n("yGpi"),d=n("D57K"),u=(n("Zahr"),n("lwNT"),n("vcLy"),n("KXuk"),n("Sa5G")),p=n("0JpG"),h=n("MKP7"),m=n("JNtI"),b=n("Ocaa"),f=n("pIXs"),g=n("aTRN"),v=n("nYZ0"),y=n("w9Zy"),C=n("TnpK"),S=n("X455"),w=n("oi1r"),I=n("jhBu"),k=n("JiEj"),T=n("aHpC"),E=n("+4Px"),D=n("e6jQ"),x=n("BLb8"),O="ultraUi.components.directives.content.learningModule.learningModuleBaseItem",P=function(){function e(e,t,n,o,i,s,r,a,c,l,d,p){var h=this;this.scope=e,this.element=t,this.attrs=n,this.localizeService=o,this.$q=i,this.contentService=s,this.offcanvasService=r,this.timeout=a,this.ultraState=c,this.contextCourseMembership=l,this.entitlementService=p,this.titleEditMode=!1,this.descriptionEditMode=!1,this.isEditButtonHovering=!1,this.lmTitlePlaceholder=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.learning-module.base-item.title-placeholder"}),this.description="",this.controlId=Object(D.a)(),this.titleMaxLength=250,this.isGettingConfirmationOptions=!1,this.descriptionCache="",this.titleCache="",this.conditionalRelease=d.instantiate(g.a,{scope:e}),e.content.title||(e.content.title=this.lmTitlePlaceholder),e.content.description=e.content.description?e.content.description:"",this.scope.$on("refresh-conditional-release-rules",(function(e,t){h.scope.content.id===t.id&&h.conditionalRelease.getConditions(t)})),this.scope.$on("bb-update-CR-tooltip",(function(e,t,n,o){t&&(h.rulesCriteria&&h.rulesCriteria.gradeColumnId)===t.id&&h.conditionalRelease.getConditions(h.scope.content,n,o)})),(e.content.isConditionalReleaseLocked()||e.content.isConditionalRelease()||e.content.isForcedSequenceModule())&&this.conditionalRelease.getConditions(e.content),this.entitlementService.hasCourseEntitlement(u.f.ModifyContent,this.scope.content.courseId).then((function(e){h.entitledToModifyContent=e})),this.scope.$on("update-state",(function(t,n){var o;if(n&&e.content.isForcedSequenceModule()&&!h.contextCourseMembership.isActAsInstructorMembership()&&(e.content.id===n.parentId||e.content.children&&e.content.children.some((function(e){return e.id===n.parentId&&(o=e,!0)})))){var s=[e.content.$fetch().$asPromise(),e.content.getChildren({limit:e.content.children.length+1}).$asPromise()];o&&o.children&&s.push(o.getChildren({limit:o.children.length+1}).$asPromise()),i.all(s).then((function(t){var n=t[1],i=t[2];n.forEach((function(t,o){var i=e.content.children.findIndex((function(e){return e.id===t.id}));-1!==i&&(n[o].ui=e.content.children[i].ui,n[o]=Object.assign(e.content.children[i],n[o]))})),o&&i&&i.forEach((function(e,t){var n=o.children.findIndex((function(t){return t.id===e.id}));-1!==n&&(o.children[n]=Object.assign(o.children[n],i[t]))}))}))}})),Object(x.c)(this.scope,(function(e,t){h.scope.content.isConditionalReleaseLocked()&&h.scope.content.containsCriteriaWithGradeColumnId(t)&&Object(x.d)(h.scope,t)})),Object(x.b)(this.scope,(function(e){h.scope.content.isConditionalReleaseLocked()&&Object(x.d)(h.scope)}))}return e.prototype.enterTitleEditMode=function(e){e.stopPropagation(),this.titleEditMode=!0,this.titleCache=this.scope.content.title,this.offcanvasService.safeFocus(this.element.find("input.lm-title"))},e.prototype.exitTitleEditMode=function(e){this.titleEditMode=!1,this.scope.content.title?this.scope.content.title!==this.titleCache&&this.onChangeTitle():this.scope.content.title=this.titleCache},e.prototype.onTitlePressKey=function(e){e.keyCode===E.f&&this.exitTitleEditMode()},e.prototype.onChangeTitle=function(){this.scope.content.title.trim()&&this._persistContent(this.scope.content,["title"])},e.prototype.onChangeVisibility=function(){this._updateVisibility(this.scope.content)},e.prototype._updateVisibility=function(e){e.visibility=this.contentService.determineVisibility(e.isAvailable);var t=["isAvailable","isPartiallyVisible","adaptiveReleaseRules"],n=e.getAssociatedGradingColumn();(n||this.scope.content.isForcedSequenceModule())&&(this.scope.content.isForcedSequenceModule()&&e.applyForcedSequence(!1),n&&(n.visible=e.isAvailable),t.push("contentDetail")),this._persistContent(e,t)},e.prototype.deleteContent=function(){this.scope.$emit("deleteContent",this.scope.content)},e.prototype.getOverflowMenu=function(){var e=this;return[{icon:"trash",labelKey:"global.delete",show:function(){return e.scope.content.canDelete()},onClick:this.deleteContent.bind(this),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){return e.isGettingConfirmationOptions=!0,e.getDeleteConfirmationKeyAndShowType().then((function(t){var n=t.confirmationKey.replace(/^resource\//,"");return e.isGettingConfirmationOptions=!1,e.$q.when(m.a(n))}))}}}]},e.prototype.getDeleteConfirmationKeyAndShowType=function(){var e=this;return this.contentService.generateDeleteConfirmationKey(this.scope.content,this.scope.contextArea).then((function(t){return{confirmationKey:e.scope.content.ui.deleteConfirmationKey,showType:e.scope.content.ui.modalShowType}}))},e.prototype.toggleLM=function(){this.scope.toggleFunc&&this.scope.toggleFunc()},e.prototype.isDescriptionEdited=function(){return this.descriptionCache!==this.scope.content.description},e.prototype.isCourseCompletedAndInInstructorView=function(){return!this.scope.content.canEdit()&&this.entitledToModifyContent},Object.defineProperty(e.prototype,"canOpenConditionalRelease",{get:function(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)},enumerable:!0,configurable:!0}),e.prototype.onDescriptionClicked=function(){this.editDescription(),this.descriptionCache=this.scope.content.description},e.prototype.editDescription=function(){var e=this;this.descriptionEditMode=!0,this.timeout((function(){e.element.find(".lm-description textarea").focus()}),this.scope,0)},e.prototype.cancelDescriptionEdit=function(){this.scope.content.description=this.descriptionCache,this.descriptionEditMode=!1},e.prototype.saveDescription=function(){this.descriptionEditMode=!1;this._persistContent(this.scope.content,["description"]),this.descriptionCache=""},e.prototype._persistContent=function(e,t){var n=this;e.withParams({fields:"id",expand:"gradebookCategory"}).$save(t).$asPromise().then((function(){n.scope.$root.$broadcast("content-update",e)}))},e.prototype.openConditionalRelease=function(){this.ultraState.goPeekState("conditional-release",{id:this.scope.content.id})},e.$inject=["scope","element","attrs",p.serviceName,"$q",v.f,y.e,c.b,C.d,S.d,"$injector",I.b],Object(d.__decorate)([Object(T.a)(2e3)],e.prototype,"onChangeTitle",null),e}(),A=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=k,this.scope={content:"=",canToggle:"&",toggleFunc:"&",canMove:"=",contextArea:"=",isOpen:"="},this.link=function(e,n,o){e.baseItem=t.$injector.instantiate(P,{scope:e,element:n,attrs:o})}}return e.$inject=["$injector"],e}();i.module(O,[h.a,f.a,v.d,b.a,y.d,c.a,C.b,w.a,I.a]).directive("bbLearningModuleBaseItem",["$injector",function(e){return e.instantiate(A)}]),n.d(t,"a",(function(){return $}));var $="ultra.directives.folder",M=function(){function e(e,t,n,o){var i=this;this.scope=e,this.element=t,this.timeout=n,this.contextCourseMembership=o,this.showEmptyMenu=!0,this.showMenuOverride=!1,this.showOutlineOverride=!1,this.isOpen=!1,this.toggleLabelKey="components.directives.folder.aria-label.open",this.initialChildrenLength=0,this.FOLDER_CONTENTS_SELECTOR=".folder-contents",this.contextArea=e.contextArea,this.loadMoreChildren=e.loadMoreChildren,this.contents=e.contents,this.content.ui?this.content.ui.isOpen=!1:this.content.ui={isOpen:!1},e.$on("toggle-folder",(function(e,t){i.canToggle()&&t===i.content&&i.toggleFolder()})),e.$on("toggle-folder-by-id",(function(t,n){i.canToggle()&&n===i.content.id&&(i.scope.$$phase||i.scope.$root&&i.scope.$root.$$phase?i.toggleFolder():e.$apply((function(){i.toggleFolder()})))})),e.$on("close-folder-immediately-by-id",(function(e,t){i.isOpen&&i.canToggle()&&t===i.content.id&&i._closeFolderImmediately()})),e.$on("bb-drag-start",(function(){i.isOpen&&i.canToggle()&&(null==i.content.children||0===i.content.children.length)&&i._closeFolderImmediately()})),e.$on("close-all-add-menus",(function(e,t){if(i.isOpen&&(null==i.content.children||0===i.content.children.length)&&i.content.id!==t){if(i.content.isLearningModule())return;i.toggleFolder()}})),e.$on("showContentImportProgress",(function(t,n,o){i.content.id!==o||0!==i.content.children.length||i.showOutlineOverride||(i.showOutlineOverride=!0,i.timeout((function(){i.scope.$broadcast("showContentImportProgress",n,o)}),e))})),e.$on("keyboard-drag-move",(function(e,t){i.content.id+"blank"===t?i.showEmptyMenu=!1:i.showEmptyMenu=!0})),e.$on("keyboard-drag-lost-focus",(function(){i.showEmptyMenu=!0})),e.$on("keyboard-drag-end",(function(){i.showEmptyMenu=!0}))}return e.prototype._closeFolderImmediately=function(){var e=this;this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).hide(),this.isOpen=!1,this.content.ui.isOpen=!1):this.scope.$apply((function(){e.element.children(".folder").children(e.FOLDER_CONTENTS_SELECTOR).hide(),e.isOpen=!1,e.content.ui.isOpen=!1}))},e.prototype.toggleFolder=function(){var e=this;this.isOpen||null!=this.content.children&&0!==this.content.children.length||this.loadMoreChildren(this.content).$then((function(){e.content.children&&0===e.content.children.length&&!e.contextCourseMembership.isActAsInstructorMembership()&&e.scope.content.state!==a.r.StateType.Completed&&e.scope.content.updateState(a.r.StateType.Completed,!0)})),this.isOpen=this.content.ui.isOpen=!this.content.ui.isOpen,this.content.children?this.content.children.$then((function(){e.initialChildrenLength=e.content.children.length,0===e.content.children.length?(e._calculateDurationAndToggle(),e.showMenuOverride=!0,(e.isOpen||e.isOpen&&e.content.isLearningModule())&&e.scope.$root.$broadcast("close-all-add-menus",e.content.id)):e.timeout((function(){e._calculateDurationAndToggle(),e.showMenuOverride=!1}),e.scope),e.scope.$watch((function(){return e.content.children&&e.content.children.length}),(function(t,n){e.showMenuOverride=0===t,0===t&&t!==n&&e.isOpen&&e.scope.$root.$broadcast("close-all-add-menus",e.content.id)}))})):(this._calculateDurationAndToggle(),this.showMenuOverride=!0),this.toggleLabelKey=this.isOpen?"components.directives.folder.aria-label.close":"components.directives.folder.aria-label.open"},e.prototype._calculateDurationAndToggle=function(){var e=this.isOpen?1e3:2e3,t=this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).outerHeight(),n=Math.round(1.17*t),o=Math.min(e,n);this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).slideToggle(o)},e.prototype.canToggle=function(){return this.content.canEdit()||!this.content.isRestricted()},Object.defineProperty(e.prototype,"content",{get:function(){return this.scope.content},enumerable:!0,configurable:!0}),e.$inject=["scope","element",c.b,S.d],e}(),L=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.scope={content:"=",contextArea:"=",canCreate:"=",contents:"=",canMove:"=",loadMoreChildren:"=",nextContentId:"=?",onFileDropHandler:"=?",onMoveHandler:"=",onMoveIntoFolderHandler:"=",previousContentId:"=?",canCopyImport:"=?",rootContent:"&?"},this.compile=function(e){return{pre:function(e,n){e.folder=t.$injector.instantiate(M,{scope:e,element:n})}}},this.template=l}return e.$inject=["$injector"],e}();i.module($,[s.b,r.a,o.a,c.a,O]).directive("bbFolder",["$injector",function(e){return e.instantiate(L)}])},"LC/l":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-beast-analytics",use:"icon-small-beast-analytics-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-beast-analytics"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 8V1M8 8l5-4M8 8l4.5 4.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},LecS:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("IAsK");var o=n("wHJ2"),i=n("pjml"),s=n("/hmo"),r="ultra.directives.lti",a=function(){function e(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"="},this.template=s,this.link=function(e,t){var n=e.$watch("targetContent.contentHandler",(function(t){null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())}));!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then((function(){e.content.description=e.targetContent.description})))}}return e.$inject=[i.o.serviceName],e}();o.module(r,[]).directive("bbLtiLinkItem",["$injector",function(e){return e.instantiate(a)}])},MKP7:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o=n("D57K"),i=n("7UH7"),s=n("wHJ2"),r=n("/KQw"),a=n("0JpG"),c=n("TnpK"),l=n("+4Px"),d=n("e6jQ"),u=n("tecA"),p="ultra.directives.basicTextEditor",h=function(e){function t(t,n,o,i,s,r){var a=e.call(this,n,o,i,s,r)||this;return a.shouldPreventLineBreaking=!0,n.$on(u.b,(function(){a.updateOriginalValues(),a.isTextTouched=!1})),n.shouldPreventLineBreaking&&(a.shouldPreventLineBreaking=n.shouldPreventLineBreaking()),a}return Object(o.__extends)(t,e),t.prototype.onKeydown=function(e){this.shouldPreventLineBreaking&&e.keyCode===l.f&&(e.stopPropagation(),e.preventDefault())},t.$inject=["$q","scope","element","ctrl",a.serviceName,c.d],t}(u.a),m=function(){function e(e){var t=this;this.$injector=e,this.require=["ngModel"],this.replace=!0,this.restrict="E",this.scope={placeholderKey:"@",placeholderAttrsValues:"@",elementId:"@",readonly:"&",getInputMaxLength:"&?inputMaxLength",onchangeFunc:"&?",onblurFunc:"&?",onFocusFunc:"&",ngModel:"=",fieldRequired:"&?",plainText:"=?",validationMessage:"@?",focusOn:"@?",noValidationMessage:"&?",direction:"&?",shouldPreventLineBreaking:"&?"},this.link=function(e,n,o,i){var s=i[0];e.textEditor=t.$injector.instantiate(h,{scope:e,element:n,ctrl:s}),e.elementId||(e.elementId="text-editor-"+d.a())},this.template=i}return e.$inject=["$injector"],e}();s.module(p,[r.a,a.moduleName,c.b]).directive("bbBasicTextEditor",["$injector",function(e){return e.instantiate(m)}])},NDLj:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h}));var o=n("D57K"),i=n("wHJ2"),s=n("z6Q5"),r=n("0JpG"),a=n("Vsv2"),c=n("pjml"),l=n("emI2"),d=n("OBf2"),u=n("aHpC"),p="ultra.service.kloudless",h="kloudless",m=function(){function e(e,t,n,o,i,s,r){this.$q=e,this.$timeout=t,this.batchService=n,this.bbLocalize=o,this.cloudDrive=i,this.SystemPreferenceModel=s,this.preferences=r,this.initializeRequired=!0}return e.prototype.getInstitutionAccount=function(){var e=this,t=new d.a;return t.type="disabled",this.batchService.performBatch((function(){return e.$q.all([e.SystemPreferenceModel.$find("institution_cloud_storage_provider_type").$allow([404]).$asPromise(),e.SystemPreferenceModel.$find("institution_cloud_storage_domain").$allow([404]).$asPromise()]).then((function(n){return n&&(t.type=e.getPreferenceValueByKey(n,"institution_cloud_storage_provider_type"),t.domain=e.getPreferenceValueByKey(n,"institution_cloud_storage_domain")),t}))}))},e.prototype.getKloudlessAccounts=function(){var e=[];return this.preferences.getPreference(d.c,"[]").then((function(t){return t&&t.value&&(e=JSON.parse(t.value)),e}))},e.prototype.getConnectedInstitutionAccount=function(e,t){var n=null;return t&&t.forEach((function(t){t.service===e.type&&t.name.endsWith(e.domain)&&(n=t)})),n},e.prototype.getCloudStorageIcon=function(e){switch(e){case"gdrive":return"gdrive";case"onedrivebiz":return"onedrivebiz";case"box":return"box";case"dropbox":return"dropbox";case"skydrive":return"skydrive";default:return""}},e.prototype.authenticateCallBack=function(e){var t=this;if(e.error)throw new Error("Unable to authenticate account: "+e.error);var n={id:e.account.id,name:e.account.account,service:e.account.service,bearer_token:{key:e.access_token}};this.preferences.getPreference(d.c).then((function(e){var o=JSON.parse(e.value).filter((function(e){return e.id!==n.id}));o.push(n),t.preferences.setPreference(d.c,JSON.stringify(o)),t.accountsInitialized.resolve()})).catch((function(){var e=[];e.push(n),t.preferences.setPreference(d.c,JSON.stringify(e)),t.accountsInitialized.resolve()}))},e.prototype.launchAuthenticator=function(e,t){var n=this;this.cloudDrive.isCloudServiceAvailable(a.a.KLOUDLESS).then((function(){var o=n.cloudDrive.cloudDriveStorage[a.a.KLOUDLESS.toString()],i=n.getKloudlessInfo(),s=n.authenticateCallBack.bind(n);if(o.authenticator){var r="";r=e?t:"gdrive onedrivebiz box dropbox skydrive",o.authenticator(null,{client_id:i.client_id,base_url:i.base_url,scope:r},s).launch()}else console.error("Authenticator is not available")}))},e.prototype.initAuthenticationDeferred=function(){return!this.initializeRequired&&this.accountsInitialized||(this.accountsInitialized=this.$q.defer(),this.initializeRequired=!1),this.accountsInitialized},e.prototype.launchInstitutionAccount=function(e,t){var n=this;return this.initializeRequired=!0,this.initAuthenticationDeferred(),this.getKloudlessAccounts().then((function(o){var i=n.getConnectedInstitutionAccount(e,o);null===i?n.launchAuthenticator(!0,e.type):n.launchToService(i,t)})),this.accountsInitialized.promise},e.prototype.connectPersonalAccount=function(){return this.initializeRequired=!0,this.initAuthenticationDeferred(),this.launchAuthenticator(!1,void 0),this.accountsInitialized.promise},e.prototype.getPreferenceValueByKey=function(e,t){var n=e.find((function(e){return e.key===t}));return n?n.value:null},e.prototype.deleteKloudlessAccount=function(e){var t=this;return this.getKloudlessAccounts().then((function(n){var o=n.filter((function(t){return t.id!==e}));return t.preferences.setPreference(d.c,JSON.stringify(o)),o}))},e.prototype.getOneDriveLink=function(e){var t=this.$q.defer(),n=this.getKloudlessInfo().base_url+"/v1/accounts/"+e.id+"?retrieve_tokens=true";return fetch(n,{method:"GET",headers:{Authorization:"Bearer "+e.bearer_token.key}}).then((function(e){e.json().then((function(e){try{var n=JSON.parse(e.token).oauth.split("."),o=JSON.parse(window.atob(n[1]));t.resolve(o.aud)}catch(e){t.reject(e.message)}}))})).catch((function(e){t.reject(e.message)})),t.promise},e.prototype.launchToService=function(e,t){switch(this.initAuthenticationDeferred(),e.service){case"gdrive":this.getInstitutionAccount().then((function(t){if("gdrive"===t.type&&e.name.endsWith(t.domain)){var n=e.name.substring(e.name.indexOf("@")+1);window.open("https://drive.google.com/a/"+n,"_blank")}else window.open("https://drive.google.com/drive/u/0/","_blank")}));break;case"onedrivebiz":t?window.open(t,"_blank"):this.getOneDriveLink(e).then((function(e){window.open(e,"_blank")})).catch((function(e){console.error(e)}));break;case"skydrive":window.open("https://onedrive.live.com","_blank");break;case"dropbox":window.open("https://www.dropbox.com/h","_blank");break;case"box":window.open("https://www.box.com","_blank")}},e.prototype.getKloudlessInfo=function(){return this.cloudDrive.cloudDriveStorage[a.a.KLOUDLESS.toString()].getKloudlessInfo()},e=Object(o.__decorate)([Object(o.__param)(0,Object(u.b)("$q")),Object(o.__param)(1,Object(u.b)("$timeout")),Object(o.__param)(2,Object(u.b)(s.b)),Object(o.__param)(3,Object(u.b)(r.serviceName)),Object(o.__param)(4,Object(u.b)(a.c)),Object(o.__param)(5,Object(u.b)(c.vb.serviceName)),Object(o.__param)(6,Object(u.b)(l.c))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(m);i.module(p,[c.Q,l.b,s.a]).service(h,m)},Nyb7:function(e,t){e.exports='<div class="complex-statistic-contents"></div>'},O3Pz:function(e,t){e.exports='<div class="grade-callout-wrapper">\n  <div class="grade-callout readonly {{displayGrade.getCourseColorClass()}}"\n       ng-class="{ \'pending\': displayGrade.attempt.isNeedsGrading() }"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target">\n    <span class="value" bb-translate>{{displayGrade.attemptStatus}}</span>\n  </div>\n</div>\n'},OaxLs:function(e,t,n){"use strict";var o=n("D57K"),i=n("nsO7"),s=n("wHJ2"),r=n("5MwF"),a=n("Fvsw"),c=n("xpqL"),l=n("yC9S"),d=n("adx1"),u=n("aHpC"),p=n("MOka"),h=n("KtUo");var m=function(e){return e.filter((function(e){return e.isImportant}))};var b=function(e,t){return e.filter((function(e){var n=h.c(e);return!e.isImportant&&n&&h.a(n,t)<0}))};var f=function(e,t){return e.filter((function(e){var n=h.c(e);return!e.isImportant&&n&&0===h.a(n,t)}))};var g=function(e,t){return e.filter((function(e){var n=h.c(e);return!e.isImportant&&n&&h.a(n,t)>0}))},v=n("av75"),y=function(){function e(){this.allEntries=[],this.view=[]}return e.prototype.addEntries=function(e){this.allEntries=this.allEntries.concat(e)},e.prototype.refreshView=function(e){this.view=[].concat((e?e(this.allEntries):this.allEntries).filter((function(e){return!e.hidden})))},e.prototype.deleteEntries=function(e){this.allEntries=this.allEntries.filter((function(t){return-1===e.indexOf(t.id)}))},e}(),C=function(e){function t(t){var n=e.call(this)||this;return n.entryLoader=t,n}return Object(o.__extends)(t,e),t.prototype.addEntries=function(t){e.prototype.addEntries.call(this,m(t))},t.prototype.deleteEntry=function(e){if(e.isImportant){var t=this.allEntries.indexOf(e);t>=0&&(this.allEntries.splice(t,1),this.refreshView(this.entryLoader.viewFilter))}},t.prototype.refreshView=function(t){e.prototype.refreshView.call(this,t),this.entryLoader._updateBadgeCount()},t}(y),S=function(e){function t(t){var n=e.call(this)||this;return n.context=t,n.hasMoreInView=!1,n}return Object(o.__extends)(t,e),t.prototype.addEntries=function(t){e.prototype.addEntries.call(this,g(t,this.context.getServerTime())),this.allEntries=i.sortBy(this.allEntries,h.c)},t.prototype.refreshView=function(t){e.prototype.refreshView.call(this,t);var n=this.view.slice(O.UPCOMING_MAX_LENGTH,this.view.length);this.hasMoreInView=n.length>0&&n.some((function(e){return e.body&&e.body.type===v.a.DueDatedContent})),this.view=this.hasMoreInView?this.view.slice(0,O.UPCOMING_MAX_LENGTH):this.view},t}(y),w=function(e){function t(t,n,o){var i=e.call(this)||this;return i.context=t,i.entryLoader=n,i.streamSettings=o,i}return Object(o.__extends)(t,e),t.prototype.addEntries=function(t){var n=this;e.prototype.addEntries.call(this,f(t,this.context.getServerTime())),this.allEntries=this.entryLoader.groupStreamEntries(this.allEntries);var o=this.context.getServerTime(),s=this.allEntries.filter((function(e){return h.c(e)>=o})),r=this.allEntries.filter((function(e){return h.c(e)<o}));this.allEntries=i.sortBy(s,h.c).concat(i.sortBy(r,h.c).reverse()),this.allEntries.forEach((function(e){e.hidden=n.streamSettings.hidden(e)}))},t.prototype.deleteEntries=function(e){this.allEntries=this.allEntries.filter((function(t){var n=t;if(n.groupedEntryIds){n.groupedEntryIds=n.groupedEntryIds.filter((function(t){return-1===e.indexOf(t)}));var o=n;return o.entryContents&&(o.entryContents=o.entryContents.filter((function(t){return-1===e.indexOf(t.id)}))),n.groupedEntryIds.length>0}return-1===e.indexOf(t.id)}))},t}(y),I=function(e){function t(t,n){var o=e.call(this)||this;return o.context=t,o.entryLoader=n,o._currentViewFilter=null,o.queuedView=[],o}return Object(o.__extends)(t,e),t.prototype.addEntries=function(t){e.prototype.addEntries.call(this,b(t,this.context.getServerTime())),this.allEntries=i.sortBy(this.allEntries,h.c).reverse()},t.prototype.refreshView=function(e){this.queuedView=[].concat((e?e(this.allEntries):this.allEntries).filter((function(e){return!e.hidden}))),(e||null)!==this._currentViewFilter?(this.view=[],this.loadMoreEntriesIntoView(),this._currentViewFilter=e):this.view=this.queuedView.splice(0,this.view.length)},t.prototype.loadMoreEntriesIntoView=function(){if(this.queuedView.length>0){var e=this.queuedView.splice(0,this._numEntriesToLoad());Array.prototype.push.apply(this.view,e)}},t.prototype._numEntriesToLoad=function(){var e=this.entryLoader.countViewEntries();return e>=t.MAX_ENTRIES_TO_PROGRESSIVE_LOAD?t.MAX_ENTRIES_TO_PROGRESSIVE_LOAD:t.MAX_ENTRIES_TO_PROGRESSIVE_LOAD-e},Object.defineProperty(t.prototype,"MAX_ENTRIES_TO_PROGRESSIVE_LOAD",{get:function(){return t.MAX_ENTRIES_TO_PROGRESSIVE_LOAD},enumerable:!0,configurable:!0}),t.MAX_ENTRIES_TO_PROGRESSIVE_LOAD=20,t}(y),k=n("Qbdf");n.d(t,"c",(function(){return T})),n.d(t,"d",(function(){return E})),n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return O}));var T="ultra.service.stream.loader",E="streamEntryLoader",D=0,x="PullingTaskScheduled",O=function(e){function t(t,n,o,s,r,a,c,d){var u=e.call(this)||this;return u.$interval=t,u.$log=n,u.$q=o,u.$rootScope=s,u.context=r,u.streamEntryManager=a,u.streamSettings=c,u.currentCourse=d,u.badgeCount=0,u.loadingErrorCount=0,u.buckets={},u.preLoading=!0,u.loadingStreamEntriesInProgress=!1,u.oneLoadingIsQueued=!1,u.buckets={important:new C(u),upcoming:new S(r),today:new w(r,u,c),previous:new I(r,u)},l.b.OnRootScope(u.$rootScope,"stream-entry-parent-item-not-found",(function(e,t){u.deleteEntries([t.id]),u.refreshEntries(!0)})),l.b.OnRootScope(u.$rootScope,"stream-settings-updated",(function(){u.reapplySettings()})),u.currentCourse.isInIframeOfPreviewMode()||u.init(),l.b.OnRootScope(u.$rootScope,"update-course-status",(function(e,t){var n=[];i.forEach(u.buckets,(function(e){i.forEach(e.allEntries,(function(e){e.courseId&&e.courseId===t&&!e.isOrg&&n.push(e.id)}))})),u.deleteEntries(n),u.refreshEntries(!0)})),l.b.OnRootScope(u.$rootScope,"update-course-name",(function(e,t){i.forEach(u.buckets,(function(e){i.forEach(e.allEntries,(function(e){e.courseId&&e.courseId===t.id&&!e.isOrg&&(e.header=t.displayName)}))}))})),u}return Object(o.__extends)(t,e),t.prototype.init=function(){var e=this;this.initialLoading=this.streamSettings.initializeSettings().finally((function(){e.preLoading=!1;try{return e.schedulePullingTask()}finally{e.currentTask.run()}})),this.streamEntryManager.$onStreamPulled((function(t,n){e._queueStreamData(n)}))},t.prototype.schedulePullingTask=function(e){var t=this;if(void 0===e&&(e=!1),this.currentTask&&!e)return this.currentTask.promise;this.$log.debug("Stream Polling Task Scheduled",(new Date).toISOString());var n=this.$q.defer(),o=this.$q.defer(),s=this.currentTask={id:D++,run:i.once((function(){window.requestAnimationFrame((function(){t.$log.debug("Stream Polling Task Running",(new Date).toISOString()),t._loadEntries(e).finally((function(){n.resolve(!0),s.run=i.once((function(){return o.resolve()}));var e=t.$interval(i.noop,r.a.streamLoadingInterval,1,!1);return t.$q.race([o.promise,e]).then((function(){t.$interval.cancel(e)}))})).then((function(){t.currentTask=null,t.schedulePullingTask()}))}))})),promise:n.promise};return this.$emitEvent(x,this.currentTask),n.promise},t.prototype._loadEntries=function(e){var t=this;return this.loadingStreamEntriesInProgress?this.oneLoadingIsQueued?null:(this.oneLoadingIsQueued=!0,this.loadEntriesPromise.then((function(){return t.oneLoadingIsQueued=!1,t._loadEntries(e)}))):(this.loadingStreamEntriesInProgress=!0,this.loadEntriesPromise=this.streamEntryManager.loadAllStreamEntries((function(){}),e).then((function(){t.loadingErrorCount=0}),(function(){t.loadingErrorCount++,t.loadingErrorCount>=P.MAX_LOADING_ERRORS&&t.cancelPeriodicLoading()})).finally((function(){t.loadingStreamEntriesInProgress=!1})),this.loadEntriesPromise)},t.prototype.refreshEntries=function(e){return this.schedulePullingTask(e)},t.prototype.cancelPeriodicLoading=function(){this.$log.error("Stream loading errors")},t.prototype.reapplySettings=function(){var e=this;this.getAllEntries().then((function(t){t.forEach((function(t){t.hidden=e.streamSettings.hidden(t)})),e._refreshViews()}))},t.prototype.isStreamLoading=function(){return this.loadingStreamEntriesInProgress||this.preLoading},t.prototype.groupStreamEntries=function(e){var n=this;if(e&&e.length>0){var o={};e.forEach((function(e){var n=e.type+t.ENTRY_GROUPING_KEY_DELIMITER+e.courseId;(o[n]=o[n]||[]).push(e)}));var i=[];return Object.keys(o).forEach((function(e){var s=o[e];if(1!==s.length&&s[0].isGroupable){var r=e.split(t.ENTRY_GROUPING_KEY_DELIMITER)[0];s=n.streamEntryManager.processGroupStreamEntry(s,r),i=i.concat(s)}else i=i.concat(s)})),i}return e},t.prototype.bulkUpdateEntryStatus=function(e){var t=this;e.forEach((function(e){s.isUndefined(e.hidden)&&(e.hidden=t.streamSettings.hidden(e))}))},t.prototype._queueStreamData=function(e){this._populateEntries(e.entries),this._deleteEntries(e.deletedIds,!1)},t.prototype._populateEntries=function(e){this.bulkUpdateEntryStatus(e),this.addEntries(e,!1)},t.prototype.deleteEntries=function(e){this._deleteEntries(e,!1)},t.prototype._deleteEntries=function(e,t){e&&e.length>0&&(this.allBuckets().forEach((function(t){return t.deleteEntries(e)})),t||this._refreshViews())},t.prototype.addEntries=function(e,t){e&&e.length>0&&(this.allBuckets().forEach((function(t){return t.addEntries(e)})),t||this._refreshViews())},t.prototype.removeImportantEntry=function(e){this.buckets.important.deleteEntry(e)},t.prototype._refreshViews=function(){var e=this;this.allBuckets().forEach((function(t){return t.refreshView(e.viewFilter)}))},t.prototype._updateBadgeCount=function(){this.badgeCount=this.buckets.important.view.length},t.prototype.allBuckets=function(){var e=this;return Object.keys(this.buckets).reduce((function(t,n){return t.push(e.buckets[n]),t}),[])},t.prototype._countAllEntries=function(){return this.allBuckets().reduce((function(e,t){return e+t.allEntries.length}),0)},t.prototype.findEntry=function(e){return this.getAllEntries().then((function(t){return i.find(t,{id:e})}))},t.prototype.getAllEntries=function(){var e=this;return this.currentCourse.isInIframeOfPreviewMode()?this.$q.when([]):this.initialLoading.then((function(){return e._getAllEntries()}))},t.prototype._getAllEntries=function(){var e=this;return Object.keys(this.buckets).reduce((function(t,n){return t.concat(e.buckets[n].allEntries)}),[])},t.prototype.countViewEntries=function(){return this.allBuckets().reduce((function(e,t){return e+t.view.length}),0)},t.prototype.setViewFilter=function(e){this.viewFilter=e,this._refreshViews()},t.prototype._reset=function(){this.allBuckets().forEach((function(e){e.allEntries=[]})),this._refreshViews()},t.ENTRY_GROUPING_KEY_DELIMITER="##",t.UPCOMING_MAX_LENGTH=5,t.MAX_LOADING_ERRORS=3,t=Object(o.__decorate)([Object(o.__param)(0,Object(u.b)("$interval")),Object(o.__param)(1,Object(u.b)("$log")),Object(o.__param)(2,Object(u.b)("$q")),Object(o.__param)(3,Object(u.b)("$rootScope")),Object(o.__param)(4,Object(u.b)(a.b)),Object(o.__param)(5,Object(u.b)(c.b)),Object(o.__param)(6,Object(u.b)(p.b)),Object(o.__param)(7,Object(u.b)(k.e))],t)}(d.a),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(O);s.module(T,[a.a,c.a]).service(E,O)},Ocaa:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var o=n("D57K"),i=(n("0lMW"),n("gORw"),n("wHJ2")),s=n("nbDY"),r=n.n(s),a=n("0JpG"),c=n("2a+M"),l=n("+4Px"),d=n("pjml"),u=n("lEL+"),p=n("GbAM"),h=n("Qbdf"),m=n("nYZ0"),b=n("W6wm"),f="ultra.components.directives.bbDragHandle",g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Vertical=new t("vertical"),t.Horizontal=new t("horizontal"),t.Omnidirectional=new t("omnidirectional"),t}(r.a),v=function(){function t(t,n,o,i,s,r){var a=this;this.$rootScope=t,this.bbLocalizeService=n,this.dragDropService=o,this.timeout=i,this.currentCourseService=s,this.contentService=r,this.bbDragMoveTimeoutId=null,this.scope={dragItemId:"@",dragItemName:"@",dragItemType:"@",dragDirection:"@?",dragItemContext:"@?"},this.restrict="A",this.link=function(t,n,o){a.dragDirection=g.parse(t.dragDirection)||g.Vertical,a.dragDropService.currentDragContext=t.dragItemContext,e(n).parent().attr("role","application"),n.on("mousedown",(function(o){function i(e){e.stopImmediatePropagation()}o.preventDefault(),document.addEventListener("click",i,!0),a.dragStart(o,n,t),e(document).on("mousemove.reorder",(function(e){a.dragMove(e,t)})),e(document).on("mouseup.reorder",(function(o){a.dragEnd(o,n),e(document).off("mousemove.reorder"),e(document).off("mouseup.reorder"),n.on("$destroy",(function(){document.removeEventListener("click",i,!0)})),a.timeout((function(){document.removeEventListener("click",i,!0)}),t,0,!1)}))})),n.on("keydown",(function(n){if(n.stopPropagation(),n.keyCode===l.f||n.keyCode===l.t)if(n.preventDefault(),a.dragDropService.isKeyboardDragging){var o=a.bbLocalizeService.translateSync({locale:a.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-stopped",noWrap:!0});a.$rootScope.$broadcast(p.a,o),e(document.body).removeClass("bb-is-dragging"),a.$rootScope.$broadcast("keyboard-drag-end")}else{a.dragDropService.isKeyboardDragging=!0,a.dragDropService.currentDragId=t.dragItemId,a.dragDropService.currentDragType=t.dragItemType,a.contentHasFolderChild(t),a.dragDropService.currentDropTargetId=t.dragItemId,a.dragDropService.positionBefore=t.dragItemId,e(document.body).addClass("bb-is-dragging"),a.$rootScope.$broadcast("keyboard-drag-start");var i=a.bbLocalizeService.translateSync({locale:a.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-started",params:{itemName:t.dragItemName},noWrap:!0});a.$rootScope.$broadcast(p.a,i)}else if(n.keyCode===l.v)n.preventDefault(),a.$rootScope.$broadcast("keyboard-drag-up");else if(n.keyCode===l.d)n.preventDefault(),a.$rootScope.$broadcast("keyboard-drag-down");else if(n.keyCode===l.s)n.preventDefault(),a.$rootScope.$broadcast("keyboard-drag-right");else if(n.keyCode===l.j)n.preventDefault(),a.$rootScope.$broadcast("keyboard-drag-left");else if(n.keyCode===l.g&&(n.preventDefault(),a.dragDropService.isKeyboardDragging)){var s=a.bbLocalizeService.translateSync({locale:a.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-canceled"});a.$rootScope.$broadcast(p.a,s),e(document.body).removeClass("bb-is-dragging"),a.$rootScope.$broadcast("keyboard-drag-cancel")}})),n.on("blur",(function(){a.dragDropService.isKeyboardDragging&&(e(document.body).removeClass("bb-is-dragging"),a.$rootScope.$broadcast("keyboard-drag-cancel"))}));var i=function(e){a.dragStart(e,n,t)},s=function(e){a.dragMove(e,t)},r=function(e){a.dragEnd(e,n)},c=function(){a.dragCancel()};n[0].addEventListener("touchstart",i,!1),n[0].addEventListener("touchmove",s,!1),n[0].addEventListener("touchend",r,!1),n[0].addEventListener("touchcancel",c,!1),t.$on("$destroy",(function(){n[0].removeEventListener("touchstart",i,!1),n[0].removeEventListener("touchmove",s,!1),n[0].removeEventListener("touchend",r,!1),n[0].removeEventListener("touchcancel",c,!1)}))}}return t.prototype.contentHasFolderChild=function(e){var t=this;if(d.r.ContentHandler.Folder.isEqualTo(e.dragItemType)&&b.a.Discussions!==t.dragDropService.currentDragContext){var n=d.r.ContentRootNode.ROOT,o=this.currentCourseService.course,i=this.contentService.findRootNode(o,n);this.contentService.getContentInContentTree(i,o.courseId,this.dragDropService.currentDragId).then((function(e){e.content&&(t.dragDropService.currentDragHasFolderChild=e.content.getChildren().$asPromise().then((function(e){return e.some((function(e){return e.isUiFolder()}))})))}))}},t.prototype.dragStart=function(t,n,o){if(this.dragDropService.currentDragElement){var i=e(".f-open-dropdown");i.length>0&&window.Foundation.libs.dropdown.close(i),this.dragDropService.currentDragElement.remove()}this.$rootScope.$broadcast("bb-drag-start"),e(document.body).addClass("bb-is-dragging"),this.dragDropService.originalElement=n.closest(this.dragDropService.dragElementSelector),this.dragDropService.currentDragElement=this.dragDropService.originalElement.clone(),this.dragDropService.idOfPreviousItem=this.dragDropService.originalElement.prev(".drag-element").find("[drag-item-id]").attr("drag-item-id"),this.dragDropService.idOfNextItem=this.dragDropService.originalElement.next(".drag-element").find("[drag-item-id]").attr("drag-item-id");var s=e(".f-open-dropdown");(s.length>0&&window.Foundation.libs.dropdown.close(s),this.$rootScope.$broadcast("foundation-offcanvas-close-panel"),d.r.ContentHandler.Folder.isEqualTo(o.dragItemType))&&(this.$rootScope.$broadcast("close-folder-immediately-by-id",o.dragItemId),this.dragDropService.currentDragElement.find(".img-icon-folder-open").removeClass("img-icon-folder-open").addClass("img-icon-folder"));this.dragDropService.originalElement.addClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.addClass(this.dragDropService.movableElementClass).addClass("mouse-touch-drag"),this.dragDropService.originalElement.after(this.dragDropService.currentDragElement),this.dragDropService.currentDragId=o.dragItemId,this.dragDropService.currentDragType=o.dragItemType,this.contentHasFolderChild(o),this.dragDropService.currentDropTargetId=o.dragItemId,this.dragDropService.positionBefore=o.dragItemId,this.dragDropService.createDropPlaceholderElement(this.dragDropService.currentDragElement),this.dragMove(t,o)},t.prototype.dragEnd=function(t,n){e(document.body).removeClass("bb-is-dragging"),t.preventDefault(),this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.movableElementClass),this.dragDropService.currentDragElement.removeAttr("style"),this.$rootScope.$broadcast("bb-drag-end")},t.prototype.dragCancel=function(){this.$rootScope.$broadcast("bb-drag-cancel"),e(document.body).removeClass("bb-is-dragging")},t.prototype.dragMove=function(e,t){var n=this;e.preventDefault();var o,i,s,r,a=this.dragDropService.currentDragElement.find("[bb-drag-handle]"),l=this.dragDropService.originalElement.find("[bb-drag-handle]").offset(),d=a.offset(),u=this.dragDropService.currentDragElement.offset(),p=d.left-u.left,h=d.top-u.top,m=p+a.width()/2,b=h+a.height()/2,f=g.Horizontal.isEqualTo(this.dragDirection)||g.Omnidirectional.isEqualTo(this.dragDirection),v=g.Vertical.isEqualTo(this.dragDirection)||g.Omnidirectional.isEqualTo(this.dragDirection);e.touches?(o=f?e.touches[0].pageX-m:u.left,i=v?e.touches[0].pageY-b:u.top,s=f?e.touches[0].pageX:l.left,r=v?e.touches[0].pageY:l.top):(o=f?e.pageX-m:u.left,i=v?e.pageY-b:u.top,s=f?e.pageX:l.left,r=v?e.pageY:l.top),this.dragDropService.currentDragElement.offset({left:o,top:i}),this.dragDropService.pointerPosition={left:s,top:r},this.dragDropService.scrollDragDropItemsContainer(this.dragDropService.pointerPosition.top,c.a.SCROLLING_CONSTANTS.mouseInteractionDistanceToScroll),this.timeout.cancel(this.bbDragMoveTimeoutId),this.bbDragMoveTimeoutId=this.timeout((function(){n.$rootScope.$broadcast("bb-drag-move")}),t,150,!1)},t.$inject=["$rootScope",a.serviceName,c.d,u.b,h.e,m.f],t}();i.module(f,[a.moduleName,c.c,u.a,h.b,m.d]).directive("bbDragHandle",["$injector",function(e){return e.instantiate(v)}])}).call(this,n("5iHu"))},Op6L:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("YHbk");var o=n("wHJ2"),i=n("oVrE"),s=n("tqR7"),r=n("7+Tq"),a=n("+4Px"),c=n("pjml"),l=n("FB0g"),d=n("ZzYr"),u="ultra.components.directives.multiUserUsercard",p=function(){function e(e,t,n){var o=this;this.scope=e,this.element=t,this.dropdownInit=n,this.isCardOpen=!1,this.showAllUsers=!1,this.fakeMultiUser=i.b(),this.userType="default",this.userType=this.scope.userType&&this.scope.userType()?this.scope.userType():this.userType;var s=this.scope.$root.$on("bb-multi-user-usercard-opened",(function(){o.isCardOpen=!1}));this.element.on("opened.fndtn.dropdown",".multi-user-usercard-list",(function(){o.dropdownInit(o.element,o.scope);var e=o.element.find(".multi-user-usercard");o.element.find(".multi-user-usercard-list").css({left:e[0].offsetLeft,top:e.outerHeight()+e[0].offsetTop})})),this.scope.$on("$destroy",(function(){s()}))}return Object.defineProperty(e.prototype,"visibleUsersCount",{get:function(){return void 0!==this._visibleUsersCount?this._visibleUsersCount:this.scope.users.length>4?4:this.scope.users.length},enumerable:!0,configurable:!0}),e.prototype.showMoreButton=function(){return!this.showAllUsers&&this.hiddenUsersCount()>0},e.prototype.showAll=function(){this.showAllUsers=!0,this._visibleUsersCount=this.scope.users.length,this.element.find(".multi-user-usercard-list").focus()},e.prototype.hiddenUsersCount=function(){return this.scope.users.length-this.visibleUsersCount},e.prototype.toggleCard=function(){this.isCardOpen?this.closeCard():this.openCard()},e.prototype.openCard=function(){this.scope.$root.$broadcast("bb-multi-user-usercard-opened"),this.isCardOpen=!0},e.prototype.closeCard=function(){this.isCardOpen=!1,this.element.find(".usercard-trigger button").focus()},e.prototype.handleKeydown=function(e){e.keyCode===a.g&&(e.stopPropagation(),this.closeCard())},e.prototype.handleClickOutside=function(){this.closeCard()},e.prototype.isUserCourseAvailable=function(e){var t=this.scope.getUserCourseAvailabilities&&this.scope.getUserCourseAvailabilities();return!(t&&!t[e])},e.$inject=["scope","element",r.b],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.template=l,this.scope={listId:"@?",users:"=",userType:"&?",noAvatar:"&",view:"&",groupUsersTitle:"&?",listHeader:"&?",getUserCourseAvailabilities:"&?userCourseAvailabilities",selectedUser:"=?",selectedText:"@?",courseName:"@?"},this.link=function(e,n,o){e.multiUserUsercard=t.$injector.instantiate(p,{scope:e,element:n,attrs:o})}}return e.$inject=["$injector"],e}();o.module(u,[c.Q,s.a,r.a,d.a]).directive("bbMultiUserUsercard",["$injector",function(e){return e.instantiate(h)}])},Oy15:function(e,t){e.exports='<span class="due-date" ng-switch on="bodyContent().localizedDueDate != null">\n  <bb-translate ng-switch-when="true" translate-values="{ datetime: \'{{bodyContent().localizedDueDate}}\' }">base.stream.entryBody.duedatedContent.dueDate</bb-translate>\n  <bb-translate ng-switch-when="false">base.stream.entryBody.duedatedContent.noDueDate</bb-translate>\n</span>\n\n'},P2DR:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-one-drive",use:"icon-small-one-drive-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-one-drive"><path d="M4 12s-3 0-3-2.5S3 7 3 7s-.4041-2.5 1.5-3.5C6.4041 2.5 8 4 8 4s2-1.5 4 0 1 4 1 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M13 14H6s-2 0-2-2 2-2 2-2 0-2 1.5-2.5S10 8 10 8s1.5-1.5 3 0 .5 3 .5 3 1.5 0 1.5 1.5-2 1.5-2 1.5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},Poqp:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.kloudless.modal.authorizationRequiredTitle"\n          analytics-id-tag-prefix="components.directives.kloudless.authorizationRequired">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.kloudless.modal.authorizationRequiredMessage</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="global.close">\n    <bb-translate>global.close</bb-translate>\n  </button>\n</bb-modal>\n'},Q3wm:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-attendance",use:"icon-medium-attendance-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-attendance"><path d="M14 3h7v20H3V3h7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="12" cy="3" r="2" stroke-width="2" /><path d="M7 16l3 3M7 19l3-3M7 12l1 1 2-2M10 3C6 3 6 8 6 8h12s0-5-4-5M13 12h5M13 17h5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},QIw5:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return p}));var o=n("D57K"),i=n("wHJ2"),s=n("nbDY"),r=n.n(s),a=n("pjml"),c=n("TnpK"),l=n("Si89"),d="ultra.components.services.routing",u="routing",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Already=new t("Already"),t.Failure=new t("Failure"),t.Unavailable=new t("Unavailable"),t}(r.a),h=function(){function e(e,t,n){this.CourseModel=e,this.ultraState=t,this.landingPage=n}return e.prototype.goToPostRegistrationPage=function(e){var t=this;"succeeded"!==e.enrollStatusCode&&"alreadyEnrolledInCourse"!==e.enrollStatusCode||!e.courseId?e.courseId&&"invalidInput"===e.enrollStatusCode?this.ultraState.go("base.courses",{enrollmentMessage:p.Failure}):this.landingPage.navigateToLandingPage():this.CourseModel.$find(e.courseId,{fields:"isAvailable"}).$then((function(n){n.isAvailable?"succeeded"===e.enrollStatusCode?t.ultraState.goPeekState("course.outline",{courseId:e.courseId}):"alreadyEnrolledInCourse"===e.enrollStatusCode&&t.ultraState.goPeekState("course.outline",{courseId:e.courseId,enrollmentMessage:p.Already}):t.ultraState.go("base.courses",{enrollmentMessage:p.Unavailable})}))},e.$inject=[a.o.serviceName,c.d,l.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(h);i.module(d,[c.b,l.a]).service(u,h)},Qc1G:function(e,t,n){},Qile:function(e,t,n){"use strict";n.r(t);n("cCP0"),n("vNjs"),n("lGua"),n("AYCo"),n("CM4G"),n("KXuk"),n("0Y4C"),n("A4FN"),n("3mIl"),n("Ybms"),n("Ao2D"),n("6BRP"),n("xwlO"),n("SHbF"),n("Q3wm"),n("uHYt"),n("JbSi"),n("wdQf"),n("DUMb"),n("FFRk"),n("Ycix"),n("haDg"),n("3YxC"),n("67oV"),n("pNbS"),n("b8rY"),n("pPNb"),n("4ICS"),n("IfWz"),n("6s5h");var o=n("wHJ2"),i=n("kxl5"),s=n("D57K"),r=n("/C4M"),a=n.n(r),c=n("nmzr"),l=n("0JpG"),d=n("TnpK"),u=n("Qbdf"),p=n("X455"),h=n("OaxLs"),m=n("go4a"),b=n("yC9S"),f="ultra.course.announcement-slide",g=angular.module(f,[d.b]),v=(function(){function e(e,t,n,o,i,s,r,a){var l=this;this.$element=e,this.$ngRedux=t,this.$scope=n,this._bbLocalize=o,this.contextCourse=i,this.contextCourseMembership=s,this.streamEntryLoader=r,this.ultraState=a,this.onOpenAllAnnouncements=function(){l.ultraState.goPeekState(c.AnnouncementRoutes.ANNOUNCEMENTS_LIST)},this.openAnnouncementDetail=function(e){l.ultraState.goPeekState(c.AnnouncementRoutes.ANNOUNCEMENT_DETAIL,{courseId:l.contextCourse.courseId,announcementId:e,mode:"view"})},this.fetchAnnouncementSlides=function(){var e=l.contextCourse.courseId;return l.streamEntryLoader.getAllEntries().then((function(t){var n=[];return t.forEach((function(t){e===t.courseId&&"announcement"===t.icon&&t.title&&t.title.trim().length>0&&n.push({id:t.body.content.sourceId,title:t.title,body:{rawText:t.body.content.fullText},isDraft:!1,startDateRestriction:t.notificationCreationDate.toISOString(),courseId:e,sourceEntry:t})})),n}))},this.dismissAnnouncementItem=function(e){return e.remove().then((function(){l.streamEntryLoader.deleteEntries([e.id]),l.streamEntryLoader.refreshEntries(!0)}))},this.$scope.announcementSlide=this}e.prototype.$postLink=function(){a.a.renderAnnouncementSlide(this.$element[0],this.$ngRedux,this._bbLocalize.getLocale(this.$scope),this._bbLocalize.intl,this._bbLocalize.frmt,m.a(this.contextCourseMembership.courseMembership),this.fetchAnnouncementSlides,this.onOpenAllAnnouncements,this.openAnnouncementDetail,this.dismissAnnouncementItem)},e.prototype.$onDestroy=function(){a.a.destroyAnnouncementSlide(this.$element[0])},e.$inject=["$element","$ngRedux","$scope",l.serviceName,u.e,p.d,h.d,d.d],e=Object(s.__decorate)([Object(b.a)({module:g,componentName:"announcementSlide",template:'<div class="announcement-slide"></div>'})],e)}(),n("TB6y")),y=n("Sgjf"),C=n("Vsv2"),S=n("Dt14"),w=n("IiJs"),I=n("e7Kn"),k=n("Fvsw"),T=n("ZzN+"),E=n("m+3A"),D=n("AI52"),x=n("kkIh"),O=n("tcaZ"),P=n("0+Qs"),A=n("NDLj"),$=n("pjml"),M=n("07uq"),L=n("Op6L"),_=(n("3Yz5"),n("JbZT"),n("12mu")),B=n("wgY5"),R=n("nYZ0"),N=n("nbDY"),j=n.n(N),F=n("KtUo"),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.assignmentDue=new t("AS:DUE"),t.assignmentOverdue=new t("AS:OVERDUE"),t.ultraAssignmentDue=new t("UA:DUE"),t.ultraAssignmentOverdue=new t("UA:OVERDUE"),t}(j.a);var U=function(e,t,n){return e.filter((function(e){if(t)return G.assignmentOverdue.isEqualTo(e.type)||G.ultraAssignmentOverdue.isEqualTo(e.type);var o=e.contextualDate||e.notificationCreationDate;return o&&0===F.a(o,n)&&(G.assignmentDue.isEqualTo(e.type)||G.ultraAssignmentDue.isEqualTo(e.type))}))},z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.testDue=new t("TE:DUE"),t.testOverdue=new t("TE:OVERDUE"),t}(j.a);var H=function(e,t,n){return e.filter((function(e){if(t)return z.testOverdue.isEqualTo(e.type);var o=e.contextualDate||e.notificationCreationDate;return o&&0===F.a(o,n)&&z.testDue.isEqualTo(e.type)}))},V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.calendar=new t("bb_calendar"),t}(j.a);var q=function(e,t){return e.filter((function(e){return V.calendar.isEqualTo(e.type)&&e.body&&e.body.content&&e.body.content.eventStartDate>=t}))},K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.couseAnnouncement=new t("AN:AN_AVAIL"),t}(j.a);var W=function(e){return e.filter((function(e){return e.isNew&&K.couseAnnouncement.isEqualTo(e.type)}))},J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t.message=new t("bb_message"),t}(j.a);var Y=function(e,t,n){var o=B(t).subtract(14,"day").toDate();return e.filter((function(e){var t=F.c(e);return t>o&&t>n&&J.message.isEqualTo(e.type)&&e.isImportant}))},Q=function(){function e(e,t,n){this.context=e,this.streamEntryLoader=t,this.content=n,this.noticeEntries=[]}return e.prototype.clearNoticeEntries=function(){this.noticeEntries=[]},e.prototype.loadNoticeEntries=function(e,t){var n=this;return this.clearNoticeEntries(),this.streamEntryLoader.getAllEntries().then((function(o){return n.noticeEntriesHandler(o,e,t)}))},e.prototype._filterEntries=function(e,t,n,o){switch(t){case 0:return W(e);case 1:return U(e,!0);case 2:return H(e,!0);case 3:return U(e,!1,n);case 4:return H(e,!1,n);case 5:return q(e,n);case 6:return Y(e,n,o);default:return[]}},e.prototype.noticeEntriesHandler=function(t,n,o){var i=this,s=t.filter((function(e){return n===e.courseId}));if(s.length>0){for(var r=this.context.getServerTime(),a=new Array(e.MAX_TYPES+1),c=e.NOTICE_SHOW_MAX_LENGTH,l=0;l<=e.MAX_TYPES&&c>0;l++)a[l]=this._filterEntries(s,l,r,o),a[l].length>0&&(c-=1,a[l].length>1&&a[l].sort((function(e,t){return(e.contextualDate||e.notificationCreationDate)-(t.contextualDate||t.notificationCreationDate)})));a[0].length>1&&(a[0]=a[0].reverse());for(var d=0;d<l;d++)a[d].length>0&&this.noticeEntries.push(a[d][0]);c=e.NOTICE_SHOW_MAX_LENGTH-this.noticeEntries.length;for(d=0;d<l&&c>0;d++)for(var u=1;u<a[d].length&&c>0;u++)this.noticeEntries.push(a[d][u]),c-=1;return this.noticeEntries.forEach((function(e){return e.title=i.content.truncateDescription(e.title)})),this.noticeEntries}},e.NOTICE_SHOW_MAX_LENGTH=3,e.MAX_TYPES=6,e.$inject=[k.b,h.d,R.f],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(s.__extends)(t,e)}(Q);o.module("ultra.service.notice.loader",[k.a,h.c,R.d]).service("noticeEntryLoader",Q);var Z=n("lHMO"),X=n("mCEN"),ee=n("E2HD"),te=n("sBez"),ne=n("Z2hW"),oe=n("hBzJ"),ie="components.directives.notice.",se="lastShow.date",re=function(){function e(e,t,n,o){var i=this;this.scope=e,this.$modal=t,this.noticeService=n,this.bbContext=o,this.modalDismiss=function(){i.modalInstance.dismiss()},this.today=B(o.getServerTime()),this.bbContext.getPreference(ie+se+e.courseId.replace(/\_/g,"."),null).then((function(t){t.value&&!B(t.value).isBefore(i.today,"days")||i.noticeService.loadNoticeEntries(e.courseId,t.value&&B(t.value).toDate()).then((function(t){t&&t.length>0&&i.bbContext.setPreference(ie+se+e.courseId.replace(/\_/g,"."),o.getServerTime().toISOString()).then((function(){i.modalInstance=i.$modal.open({template:oe,scope:i.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/notice")}]}})}))}))}))}return e.prototype.getNotices=function(){return this.noticeService.noticeEntries},e.$inject=["scope","$modal","noticeEntryLoader",k.b],e}(),ae=function(){function e(e,t,n,o){var i=this;this.$injector=e,this.$q=t,this.$modal=n,this.bbLocalize=o,this.restrict="E",this.scope={courseId:"@",bbNoticeClass:"@?"},this.link=function(e){i.bbLocalize.loadBundle("features/base/stream/base-stream"),e.notice=i.$injector.instantiate(re,{$q:i.$q,scope:e,$modal:i.$modal})}}return e.$inject=["$injector","$q",_.b,l.serviceName],e}();o.module("ultra.directives.notice",[l.moduleName,_.a,Z.a,"ultra.service.notice.loader",X.a,ee.a,te.a,ne.a]).directive("bbNotice",["$injector",function(e){return e.instantiate(ae)}]);var ce=n("JNtI"),le=n("3FFP"),de=n("zByx"),ue=n("+e2k"),pe=n("lEL+"),he=n("hkqm"),me=n("1zDl"),be=n("+brj"),fe=n("ZzYr"),ge=n("cs5G"),ve=n("rKkA"),ye=n("1ZbL"),Ce={Class:n("5LAh").f,bindingNames:["selector","portalType","portals"],renderLocalized:!0};o.module("ultra.react.integration.registrationPortalHost",[]).component("bbRegistrationPortalHost",Object(ye.a)(Ce)),n.d(t,"moduleName",(function(){return Se})),n.d(t,"controllerName",(function(){return we})),n.d(t,"template",(function(){return ve}));var Se="ultra.course.contents",we=x.b;o.module(Se,[i.a,f,y.a,C.b,S.a,w.a,k.a,T.a,D.a,E.moduleName,I.a,O.a,P.a,A.a,$.Q,M.a,L.a,"ultra.directives.notice",ce.b,le.b,de.a,ue.a,pe.a,he.a,d.b,v.a,me.a,be.b,fe.a,ge.a,"ultra.react.integration.registrationPortalHost"]).controller(x.b,x.a)},RPq7:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var o=n("D57K"),i=n("wHJ2"),s=n("nbDY"),r=n.n(s),a=n("lEL+"),c="ultra.directives.contentItemMouseover",l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Top=new t("TOP"),t.Bottom=new t("BOTTOM"),t.Default=new t("DEFAULT"),t}(r.a),d=function(){function e(e,t,n){var o=this;this.scope=e,this.element=t,this.timeout=n,this.lastPosition=l.Default,this.lastTime=0,t.mouseover((function(){o.recalculatePosition()})),t.mousemove((function(e){Date.now()-o.lastTime>1e3?(o.timeout.cancel(o.lastMousemoveTimeout),o.handleMousemove(e)):(o.timeout.cancel(o.lastMousemoveTimeout),o.lastMousemoveTimeout=o.timeout((function(){o.handleMousemove(e)}),o.scope,100,!1))})),t.mouseleave((function(){o.timeout.cancel(o.lastMousemoveTimeout),o.lastPosition=l.Default})),e.$on("content-outline-hover-end",(function(){o.timeout.cancel(o.lastMousemoveTimeout),o.lastPosition=l.Default}))}return e.prototype.handleMousemove=function(e){null!=this.elementOffset&&null!=this.elementHeight||this.recalculatePosition(),this.lastTime=Date.now(),e.pageY-this.elementOffset>this.elementHeight/2?(this.lastPosition.isEqualTo(l.Bottom)||this.broadcastPosition(l.Bottom),this.lastPosition=l.Bottom):(this.lastPosition.isEqualTo(l.Top)||this.broadcastPosition(l.Top),this.lastPosition=l.Top)},e.prototype.broadcastPosition=function(e){this.scope.$emit("content-item-mouseover",{element:this.element,relativeMousePosition:e})},e.prototype.recalculatePosition=function(){this.elementHeight=this.element.outerHeight(),this.elementOffset=this.element.offset().top},e.$inject=["scope","element",a.b],e}(),u=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.scope={canCreate:"&"},this.link=function(e,n){e.canCreate&&e.canCreate()&&(e.contentItemMouseover=t.$injector.instantiate(d,{scope:e,element:n}))}}return e.$inject=["$injector"],e}();i.module(c,[a.a]).directive("bbContentItemMouseover",["$injector",function(e){return e.instantiate(u)}])},S1rJ:function(e,t){e.exports='<bb-modal class="js-course-status-modal-{{currentCourseStatus.toString()}} notification" modal-title-key="{{currentCourseStatus.getModalTitle()}}"\n          modal-dismiss-key="{{currentCourseStatus.getModalDismissText()}}"\n          analytics-id-tag-prefix="{{currentAnalyticsId}}">\n  <div name="modal-contents">\n    <p bb-translate="{{currentCourseStatus.getModalText()}}"></p>\n  </div>\n  <span name="modal-footer-button-primary">\n    <button ng-if="currentCourseStatus.getPrimaryButtonText()" \n            ng-click="$parent.$close(currentCourseStatus.getPrimaryButtonStatus())" \n            class="button js-primary-button js-course-status-{{currentCourseStatus.getPrimaryButtonStatus()}}"\n            analytics-id="{{currentAnalyticsId}}.primaryButton.button">\n      <span bb-translate="{{currentCourseStatus.getPrimaryButtonText()}}"></span>\n    </button>\n  </span>\n  <span name="modal-footer-button-secondary">\n    <button ng-click="$parent.$close(currentCourseStatus.getSecondaryButtonStatus())" \n            class="button button--secondary js-secondary-button js-course-status-{{currentCourseStatus.getSecondaryButtonStatus()}}"\n            analytics-id="{{currentAnalyticsId}}.close.button">\n      <span bb-translate="{{currentCourseStatus.getSecondaryButtonText()}}"></span>\n    </button>\n  </span>\n</bb-modal>'},S6sW:function(e,t){e.exports='<ng-switch on="displayGrade.shouldShowPointsPossible()">\n  <span ng-switch-when="true" ng-bind-html="displayGrade.fullDisplayGrade"></span>\n  <span ng-switch-default><strong>{{displayGrade.fullDisplayGrade}}</strong></span>\n</ng-switch>'},SE1T:function(e,t){e.exports='<button class="button-add-content js-show-add-options"\n        data-show-add-options\n        ng-click="addContentButton.addGroup()"\n        ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n        aria-label="{{addContentButton.addButtonAriaLabel}}"\n        ng-focus="addContentButton.showButton()"\n        ng-blur="addContentButton.hideButton()"\n        analytics-id="components.directives.add-content-button.course-group.button">\n</button>\n'},SHbF:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-attention",use:"icon-medium-attention-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-attention"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M12.75 18.5a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" /><path d="M12 15l-.5-10h1L12 15z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},Sf7l:function(e,t){e.exports='<bb-modal class="notification"\n          role="alertdialog"\n          bb-translate-attrs="{\'aria-label\': \'course.outline.previewCourse.alert.modalTitle\'}"\n          modal-title-key="course.outline.previewCourse.alert.modalTitle"\n          analytics-id-tag-prefix="course.outline.previewCourse.alert">\n  <div name="modal-contents">\n    <p bb-translate="course.outline.previewCourse.alert.modalText"></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          ng-click="$parent.$close()" \n          class="js-dismiss-modal button button--secondary js-secondary-button"\n          analytics-id="course.outline.previewCourse.alert.modalConfirm.button">\n    <span bb-translate="course.outline.previewCourse.alert.modalConfirm"></span>\n  </button>\n</bb-modal>'},Sgjf:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("D57K"),i=(n("Zeij"),n("ptBS"),n("SSV0"),n("5iHu")),s=n("wHJ2"),r=n("jciN"),a=n("0JpG"),c=n("fYJU"),l=n("pjml"),d=n("+4Px"),u=n("OvxF"),p=n("lUN/"),h=n("TnpK"),m=n("qeC2"),b=n("aHpC"),f=n("nmzr"),g="ultra.components.directives.usercard",v=function(){function e(e,t,n,o,i,s,r,a,c,l){this.$modal=e,this.$q=t,this.scope=n,this.element=o,this.attrs=i,this.bbLocalize=s,this.CourseModel=r,this.contextUser=a,this.$userModelService=c,this.ultraState=l,this.current=this.contextUser.userModel,null==this.scope.autoUpdate&&(this.scope.autoUpdate=!0),this.scope.showcard=!1,p.a(),this.$userModelService.$mixHook("after-save",(function(){this.id===n.user.id&&(n.userNames={givenName:this.givenName,familyName:this.familyName})}),n)}return e.prototype.canSendMessage=function(){var e=this.scope.canSendMessage;return!e||e()},e.prototype.hasDueDateException=function(){var e=this.scope.hasDueDateException;return!!e&&e()},e.prototype.canEditDueDateException=function(){var e=this.scope.canEditDueDateException;return!!e&&e()},e.prototype.sendMessage=function(){this.ultraState.goPeekState(this.getMessagePeekState(),{courseId:this.scope.courseId,recipientIds:this.scope.user.id})},e.prototype.getMessagePeekState=function(){return this.scope.messagePeekState||f.CourseRoutes.COURSE_MESSAGE},e.prototype.getUserNameLabel=function(){return this.userName=this.scope.userNames,this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.usercard.ariaButtonLabel",params:{user:this.userName},noWrap:!0,noEscape:!0})},e.prototype.keyDown=function(e){if(e.keyCode===d.t&&e.preventDefault(),this.scope.showcard){var t=!1;if(e.keyCode===d.g)t=!0;else if(e.keyCode===d.u){var n=i(".usercard").find(":tabbable");t=n.length<1||(!(!e.shiftKey||!i(".usercard-clickable").is(":focus"))||(e.shiftKey?document.activeElement===n[0]:document.activeElement===n[n.length-1]))}t&&(e.stopImmediatePropagation(),this.hide())}},e.prototype.hide=function(){this.scope.showcard&&(this.scope.showcard=!1,this.toggleFloatingContainer(),this.element.find(".usercard-trigger").focus())},e.prototype.show=function(){this.scope.showcard=!!this.canShow(),this.toggleFloatingContainer()},e.prototype.toggleFloatingContainer=function(){i(".floating-column-container").css("overflow",this.scope.showcard?"visible":"hidden")},e.prototype.canShow=function(){return!!this.scope.user&&!!this.scope.user.id&&!this.isSameUser()},e.prototype.isSameUser=function(){return!(!this.current||!this.scope.user)&&this.scope.user.id===this.current.id},e.prototype.getCourseRoleLocalizeId=function(){return this.scope.inactive&&this.scope.inactive()?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.usercard.unavailable"}):this.scope.courseRole()},e.prototype.sendMessageViaSpaceBar=function(e){this.scope.showcard&&e.keyCode===d.t&&(e.stopPropagation(),this.sendMessage())},e.$inject=["$modal","$q","scope","element","attrs",a.serviceName,l.o.serviceName,c.b,l.Pb.serviceName,h.d],Object(o.__decorate)([Object(b.d)("locale","userNames")],e.prototype,"getUserNameLabel",null),e}(),y=function(){function e(e,t,n){var o=this;this.$injector=e,this.bbLocalize=t,this.ultraState=n,this.restrict="E",this.template=m,this.scope={user:"=",panel:"@?",courseId:"@",messagePeekState:"@?",courseRole:"&",usercardShow:"@",recipientIds:"=",canSendMessage:"&?",hasDueDateException:"&?",canEditDueDateException:"&?",membershipId:"=?",inactive:"&?",autoUpdate:"=?"},this.link=function(e,t,n){e.attr=n,e.bbUsercard=o.$injector.instantiate(v,{scope:e,element:t,attrs:n}),e.user&&(e.userName=o.bbLocalize.formatUsernameSync(e.user,a.ILocaleUsernameFormat.Short,e,{noWrap:!0}),e.userNames=e.user)}}return e.$inject=["$injector",a.serviceName],e}();s.module(g,[r.a,a.moduleName,l.Q,c.a,u.a,h.b]).directive("bbUsercard",["$injector",function(e){return e.instantiate(y)}])},Siqh:function(e,t,n){},Sq3Z:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-activity-indicator",use:"icon-small-activity-indicator-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-activity-indicator"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="2" stroke-width="4" /></symbol>'});i.add(s);e.exports=s},SxMs:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("ERkP"),i=n("12Zt"),s=Object(i.a)(o.createElement(o.Fragment,null,o.createElement("path",{fill:"var(--icon-fill-color)",stroke:"transparent",fillRule:"evenodd",d:"M34.0799 3.3514c-1.0485-2.2532-3.7252-3.2299-5.9784-2.1813l-25.25 11.75a4.5 4.5 0 00-.8077 7.6752l11.625 8.7501c1.9857 1.4946 4.807 1.0965 6.3016-.8892 1.4946-1.9856 1.0965-4.8069-.8892-6.3015l-5.6323-4.2394 18.4497-8.5854c2.2532-1.0486 3.2298-3.7252 2.1813-5.9785z",clipRule:"evenodd"}),o.createElement("path",{fill:"currentColor",stroke:"transparent",d:"M37 1l.9231.3846a.9999.9999 0 00-1.3703-1.279L37 1zM1 19l-.4472-.8944a.9999.9999 0 00-.2036 1.6537L1 19zm21 18l-.6508.7593a1.0003 1.0003 0 001.5739-.3747L22 37zM36.5528.1056l-36 18 .8944 1.7888 36-18-.8944-1.7888zm-13.6297 37.279l15-36-1.8462-.7692-15 36 1.8462.7692zM6.3492 24.9021l15 12.8572 1.3016-1.5186-15-12.8571-1.3016 1.5185zm-6-5.1428l4 3.4285 1.3016-1.5185-4-3.4286-1.3016 1.5186z"}),o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M37 1L11 27v7l3-3"})),"large")},TOu5:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-question-analysis",use:"icon-small-question-analysis-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-question-analysis"><path d="M11 1H5l1 2v4l-5 8h14l-5-8V3l1-2zM4.125 10h7.75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},Tn43:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));n("367g"),n("Aw+3"),n("8+lX"),n("aAQ7"),n("UyCM");var o=n("wHJ2"),i=n("nsO7"),s=n("en1n"),r=n("0JpG"),a=n("suMx"),c=n("jciN"),l=n("JNtI"),d=n("+e2k"),u=n("+g6d"),p=n("TnpK"),h=n("g7Mf"),m=n("r6lH"),b=n("ELoy"),f=n("pjml"),g=n("f4B+"),v=n("nmzr"),y=n("yC9S"),C=n("Wqh6"),S="ultra.components.directives.discussion",w=function(){function t(e,t,n,o,s,r,a,c,l,d){var u=this;this.$window=e,this.$sce=t,this.scope=n,this.element=o,this.$stateParams=s,this.bbLocalize=r,this.telemetry=a,this.discussion=c,this.ultraState=l,this.courseModel=d,n.isLoaded=!1,n.courseId=n.content().courseId,n.contentId=n.content().id,n.isGroupDiscussion=n.content().isGroupContent,this.createDfiReport(n.courseId,n.contentId),y.b.OnWindow("resize",i.debounce((function(){(u.scope.displayNonParticipants||u.scope.displayNonParticipantGroup)&&(u.updateNonParticipantView(),u.scope.$apply())}),150),n)}return t.prototype.createDfiReport=function(e,t,n){var o=this;(n?this.telemetry.loadDiscussionActivityData(e,t,n):this.telemetry.loadDiscussionActivityData(e,t)).then((function(e){o.scope.discussionData=e,o.scope.header=o.bbLocalize.translateSync({locale:o.bbLocalize.getLocale(o.scope),key:"components.directives.discussion.insights.header",params:{title:o.scope.content().title},noEscape:!0,noWrap:!0}),o.scope.course=o.courseModel.$find(o.scope.courseId),o.scope.isSingleGroup=!!n,o.scope.groups=o.scope.discussionData.groups,o.scope.isGradable=!!o.scope.discussionData.gradeColumnId,o.scope.gradingColumn=o.scope.discussionData.gradeColumnId,o.scope.viewedOnlyCount=o.scope.discussionData.viewedOnlyCount,o.scope.avgCommentsPerStudent=o.scope.discussionData.avgCommentsPerStudent?o.scope.discussionData.avgCommentsPerStudent:0,o.scope.avgWordCountPerComment=o.scope.discussionData.avgWordCountPerComment?o.scope.discussionData.avgWordCountPerComment:0,o.scope.avgGradeOfDiscussion=o.scope.discussionData.avgGrade?o.scope.discussionData.avgGrade/100:0,o.scope.numberOfCommentsToDisplay=1,o.scope.topComments=[],o.scope.displayTopComments=!1,o.scope.topParticipants=[],o.scope.displayTopParticipants=!1,o.scope.nonParticipants=[],o.scope.showNonparticipant=[],o.scope.showLargeNonparticipantPanel=!0,o.scope.minHeightForTopBoxes="auto",o.scope.nonParticipants=o.getNonParticipants(),o.scope.displayNonParticipants=!!o.scope.nonParticipants.length&&!o.scope.isGroupDiscussion,o.scope.displayNonParticipantGroups=!!o.scope.nonParticipants.length&&o.scope.isGroupDiscussion&&!o.scope.isSingleGroup,o.scope.displayNonParticipantGroup=!!o.scope.nonParticipants.length&&o.scope.isGroupDiscussion&&o.scope.isSingleGroup,o.scope.nonParticipantGroups=o.scope.displayNonParticipantGroups?o.getNonParticipantGroups():[],o.scope.totalNonParticipants=o.scope.nonParticipants.length,o.scope.totalParticipants=o.scope.discussionData.totalParticipants+o.scope.totalNonParticipants,o.scope.displayedNonParticipants=24,o.scope.additionalNonParticipants=o.scope.totalNonParticipants,o.scope.currentPanelWidth=0,o.scope.lastPanelWidth=-1,o.scope.isLoaded=!0;for(var t=0;t<o.scope.displayedNonParticipants;t++)o.scope.showNonparticipant[t]=!0;o.getTopComments(),o.getTopParticipants(),o.getParticipantBarChart(),o.updateNonParticipantView(),o.scope.overflowItems=o.getOverflowMenu(),o.scope.statisticsConfig=o.getSummaryInsightNumbers(),o.scope.topCommentsColumns=o.scope.displayTopComments&&o.scope.displayTopParticipants?"small-12 medium-8 large-9":"small-12",o.scope.topParticipantColumns=o.scope.displayTopComments&&o.scope.displayTopParticipants?"small-12 medium-4 large-3":"small-12"}))},t.prototype.getSummaryInsightNumbers=function(){var e=this.bbLocalize.getLocale(this.scope),t=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.numParticipants"}),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.formattedParticipation",params:{count:this.scope.totalParticipants-this.scope.totalNonParticipants,total:this.scope.totalParticipants},noWrap:!0}),o=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgComments"}),i=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgCount"}),s=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgGrade"}),r=this.scope.isGradable&&this.scope.avgGradeOfDiscussion>0?this.bbLocalize.formatPercentageSync(this.scope.avgGradeOfDiscussion,this.scope):this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.na"}),a=[];return a.push({title:t,data:n}),a.push({title:o,data:this.bbLocalize.formatNumberSync(this.scope.avgCommentsPerStudent,this.scope).toString()}),this.scope.avgWordCountPerComment&&this.scope.avgWordCountPerComment>0&&a.push({title:i,data:this.bbLocalize.formatNumberSync(this.scope.avgWordCountPerComment,this.scope).toString()}),this.scope.isGradable&&a.push({title:s,data:r}),a},t.prototype.getParticipantBarChart=function(){var t=0,n=0,o=100,i=this.scope.totalParticipants-this.scope.totalNonParticipants;this.scope.totalParticipants>0?o=100-((t=Math.floor((this.scope.totalParticipants-this.scope.totalNonParticipants)/this.scope.totalParticipants*100))+(n=Math.floor(this.scope.viewedOnlyCount/this.scope.totalParticipants*100))):(t=0,n=0,o=100),e(".bar-chart .participated").attr("style","width: "+t+"%"),e(".bar-chart .opened").attr("style","width: "+n+"%"),e(".bar-chart .unopened").attr("style","width: "+o+"%");var s=this.scope.totalNonParticipants-this.scope.viewedOnlyCount;this.scope.barchartNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartNonParticipants",params:{count:s},noWrap:!0}),this.scope.barchartOpenedNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartOpenedNonParticipants",params:{count:this.scope.viewedOnlyCount},noWrap:!0}),this.scope.barchartParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartParticipants",params:{count:i},noWrap:!0}),this.scope.percentParticipatedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentParticipated",params:{percent:this.bbLocalize.formatPercentageSync(t/100,this.scope)},noWrap:!0}),this.scope.percentOpenedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentOpened",params:{percent:this.bbLocalize.formatPercentageSync((n+t)/100,this.scope)},noWrap:!0})},t.prototype.getNonParticipantGroups=function(){var e=this,t=[];return this.scope.nonParticipants.length>0&&o.forEach(this.scope.groups,(function(n){var i={id:n.id,name:n.name,nonParticipants:[],total:0,hidden:0};o.forEach(e.scope.nonParticipants,(function(t){t.group.id===n.id&&(t.localizedName=e.bbLocalize.formatUsernameSync(t,r.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),i.nonParticipants.push(t),i.total++)})),i.hidden=i.total>4?i.total-4:0,i.total>0&&t.push(i)})),t},t.prototype.getTopComments=function(){var e=this;this.scope.numberOfCommentsToDisplay=s.h()?3:5,this.scope.discussionData.topComments.forEach((function(t){var n={user:t.user,message:g.a.text(t.message),messageId:t.messageId,numReplies:t.numReplies};n.user.localizedName=e.bbLocalize.formatUsernameSync(t.user,r.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),n.user.avatarData=t.user,e.scope.topComments.push(n),e.scope.displayTopComments=!0}))},t.prototype.getTopParticipants=function(){var e=this;this.scope.discussionData.topParticipants.forEach((function(t){var n={user:t.user,numComments:t.numComments,numReplies:t.numReplies};n.user.localizedName=e.bbLocalize.formatUsernameSync(t.user,r.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),n.user.avatarData=t.user,e.scope.topParticipants.push(n),e.scope.displayTopParticipants=!0}))},t.prototype.getNonParticipants=function(){var e=this,t=[];return this.scope.discussionData.nonParticipants.forEach((function(n){n.avatarData=n,n.localizedName=e.bbLocalize.formatUsernameSync(n,r.ILocaleUsernameFormat.Short,null,{noWrap:!1,noEscape:!0}),n.localizedNameWithoutWrap=e.bbLocalize.formatUsernameSync(n,r.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.push(n)})),t},t.prototype.toggleIndividualNonParticipantDisplay=function(){var e=this;i.defer((function(){var t=o.element("#discussion-insights").find(".non-participant-box").innerWidth()-30;t=t<1118?t:1118;var n=2*Math.ceil((t+20)/126);e.scope.displayedNonParticipants=0;for(var i=0;i<18;i++)i<n&&i<e.scope.totalNonParticipants?(e.scope.showNonparticipant[i]=!0,e.scope.displayedNonParticipants++):e.scope.showNonparticipant[i]=!1;e.scope.additionalNonParticipants=e.scope.totalNonParticipants>e.scope.displayedNonParticipants?e.scope.totalNonParticipants-e.scope.displayedNonParticipants:0,e.scope.nonParticipationSummary=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.discussion.insights.nonParticipationSummary",params:{count:e.scope.displayedNonParticipants,total:e.scope.totalNonParticipants},noWrap:!0}),e.setNonParticipantMargin(t)}))},t.prototype.setNonParticipantMargin=function(t){var n=e("li.non-participant"),o=Math.floor(t/126),i=126*o+106,s=o-1>0?20+(t-i-2)/o:20+t-i;e(n).css("margin-right",s),e(n[o]).css("margin-right","2px"),2*o+1<=n.length&&e(n[2*o+1]).css("margin-right","2px")},t.prototype.updateNonParticipantView=function(){var e=this.bbLocalize.getLocale(this.scope);this.scope.nonParticipantsOptions=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.nonparticipantsOptions"}),this.scope.numberOfCommentsToDisplay=s.h()?3:5,this.scope.currentPanelWidth=o.element("#discussion-insights").find(".non-participant-box").innerWidth(),this.scope.currentPanelWidth!==this.scope.lastPanelWidth&&(s.h()?this.scope.showLargeNonparticipantPanel=!1:(this.scope.showLargeNonparticipantPanel=!0,this.toggleIndividualNonParticipantDisplay())),this.scope.lastPanelWidth=this.scope.currentPanelWidth},t.prototype.getSafeHtml=function(e){return this.$sce.trustAsHtml(e)},t.prototype.hasNavScrollbar=function(){var e=o.element(".group-selector")[0];return!!(e&&e.scrollWidth>e.clientWidth)},t.prototype.goToDiscussion=function(e){e?(this.discussion.groupId=e,this.ultraState.goPeekState("discussion.view.with-grading",{contentId:this.scope.contentId,disGroupId:e,courseId:this.scope.courseId})):this.ultraState.goPeekState("discussion.view.with-grading",{contentId:this.scope.contentId,courseId:this.scope.courseId})},t.prototype.goToGrade=function(e){this.scope.isGradable&&!this.scope.isGroupDiscussion&&this.ultraState.goPeekState("submission-list",{columnId:this.scope.gradingColumn,participantId:e,contentId:this.scope.contentId})},t.prototype.goToMessage=function(e){this.ultraState.goPeekState(v.CourseRoutes.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e})},t.prototype.isFocusedNonparticipant=function(t){return e(document.activeElement).is(o.element(e("a#non-participant-link-"+t)))},t.prototype.sortNamesAlphabetically=function(e){var t="";return e.sort((function(e,t){return e.givenName+e.familyName<t.givenName+t.familyName?-1:1})).forEach((function(e){t+=e.id+","})),t.slice(0,-1)},t.prototype.goToMessageAll=function(){var e=this.sortNamesAlphabetically(this.scope.nonParticipants);this.ultraState.goPeekState(v.CourseRoutes.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e,conversationPerRecipient:!0})},t.prototype.updateDfiPanel=function(t,n,o){e(".group-selector .selected").removeClass("selected"),e(t.target).addClass("selected"),n?(this.discussion.groupId=n,this.scope.currentGroupId=n,this.scope.currentGroupName=o,this.createDfiReport(this.scope.courseId,this.scope.contentId,n),this.updateNonParticipantView()):(this.discussion.groupId=void 0,this.scope.currentGroupId=void 0,this.scope.currentGroupName=void 0,this.createDfiReport(this.scope.courseId,this.scope.contentId))},t.prototype.updateMessagesCount=function(){o.element("bb-overflow-menu.ddm-nonparticipant-options:visible").find("#ddm-nonparticipant-options_messages span").text(this.scope.overflowItems[0].labelKey).attr("analytics-id",this.scope.overflowItems[0].labelKey)},t.prototype.getOverflowMenu=function(){var e=this;return[{icon:"messages",labelKey:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.messageNonParticipants",params:{count:this.scope.totalNonParticipants},noWrap:!0}),onClick:function(){e.goToMessageAll()}}]},t.$inject=["$window","$sce","scope","element","$stateParams",r.serviceName,m.b,h.c,p.d,f.o.serviceName],t}(),I=function(){function e(e){var t=this;this.$injector=e,this.restrict="EA",this.template=C,this.scope={content:"&"},this.link=function(e,n,o){e.discussionInsights=t.$injector.instantiate(w,{scope:e,element:n,attrs:o})}}return e.$inject=["$injector"],e}();o.module(S,[a.a,c.a,l.b,d.a,u.a,m.a,b.a,p.b]).directive("bbDiscussionInsights",["$injector",function(e){return e.instantiate(I)}])}).call(this,n("5iHu"))},TuNX:function(e,t){e.exports='<bb-modal class="notification proctoring-modal" analytics-id-tag-prefix="components.services.proctoring">\n  <div name="modal-contents">\n    <p bb-translate>{{::requirementsText}}</p>\n    <p ng-bind-html="::downloadText"></p>\n    <p bb-translate>{{::browserText}}</p>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          role="button"\n          class="button js-primary-button proctoring-modal-button"\n          ng-click="$parent.$dismiss()"\n          bb-translate-attrs="{\'aria-label\':\'components.services.proctoring.modal.continue\'}"\n          analytics-id="components.services.proctoring.modal.continue.button"\n  >\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n    <bb-translate>components.services.proctoring.modal.continue</bb-translate>\n  </button>\n</bb-modal>\n'},U2yl:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.kloudless.modal.errorTitle"\n          analytics-id-tag-prefix="components.directives.kloudless">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.kloudless.modal.errorFull</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.kloudless.modal.cancelUploadText">\n    <bb-translate>components.directives.kloudless.modal.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},UGfE:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("wHJ2"),i=n("pjml"),s=n("/BCe"),r="ultra.directives.courseLinkItem",a=function(){function e(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"="},this.template=s,this.link=function(e,t){var n=e.$watch("targetContent.contentHandler",(function(t){null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())}));!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then((function(){e.content.description=e.targetContent.description}))),e.ariaDescribedBy="content-item-icon-"+e.content.id,e.content.ui.hasIndicator&&(e.ariaDescribedBy+=" activity-indicator-"+e.content.id)}}return e.$inject=[i.o.serviceName],e}();o.module(r,[]).directive("bbCourseLinkItem",["$injector",function(e){return e.instantiate(a)}])},UODz:function(e,t){e.exports='<div class="submission-card" ng-class="{\'is-late\': isLate, \'inline\': inline}" bb-load-bundle="components/directives/submission-card">\n  <div class="panel" ng-class="{\'clickable-panel\': clickable}">\n    <i ng-if="!inline" class="{{iconClass}}"></i>\n    <div class="info" ng-class="{\'completed\': submissionCard.attempt.isCompleted(), \'rubric-icon-spacing\': submissionCard.shouldExpandForRubricIcon()}">\n      <span class="name ellipsis" bb-translate ng-if="!inline">{{title}}</span>\n      <span class="detail">\n        <span class="test-status ellipsis" ng-show="!!status">\n          <span class="inline-status" ng-if="inline && !hasAttempt && showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.late\n          </span>\n          <span class="inline-status" ng-if="inline && !hasAttempt && !showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.new\n          </span>\n          <span ng-if="inline && !hasAttempt"> - </span>\n          <span bb-translate class="status">{{status}}</span>\n          <ng-switch on="submissionCard.attempt.status" ng-if="submissionCard.attempt">\n            <bb-datetime class="date" format="Short" ng-switch-when="COMPLETED" value="::submissionCard.attempt.attemptLastGradedDate"></bb-datetime>\n            <bb-datetime class="date" format="Short" ng-switch-default value="::submissionCard.attempt.attemptDate"></bb-datetime>\n          </ng-switch>\n          <bb-datetime class="date" format="Short" ng-if="!submissionCard.attempt && gradingColumn.dueDate" value="::gradingColumn.dueDate"></bb-datetime>\n        </span>\n      </span>\n    </div>\n    <div class="grade-container">\n      <ng-switch on="gradeDetail.isPosted()">\n        <bb-display-grade ng-switch-when="true"\n                          grade-detail="gradeDetail"\n                          column="gradingColumn"\n                          display-type="GradeColor"\n                          show-rubric-button="showRubricButton()"\n                          show-rubric-div="showRubricDiv()"></bb-display-grade>\n        <bb-display-grade ng-switch-default\n                          attempt="submissionCard.attempt"\n                          display-type="AttemptStatus"></bb-display-grade>\n      </ng-switch>\n    </div>\n  </div>\n</div>\n'},UeHE:function(e,t){e.exports='<div ng-if="::addContentButton.isCloudServiceAvailable">\n  <bb-file-upload\n    allow-multiple="true"\n    monitor-leave="true"\n    target-div="{{\'#\' + fileListViewId}}"\n    hide-transclude-during-upload="false"\n    click-enabled="false"\n    primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n    skip-zip-file-check="true"\n    disable-drag="true"\n    is-third-party-upload="true"\n    third-party-download-handler="addContentButton.downloadFile"\n    ignored-states="::ignoredStates()">\n    <button ng-click="addContentButton.assignPosition()"\n            class="doc-add-media clear ng-scope"\n            bb-kloudless\n            primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n            attach-handler="addContentButton.cloudUploadAttachHandler"\n            web-location="{{webLocation}}"\n            file-location="{{fileLocation}}"\n            allow-multiple="true"\n            on-files-selected="addContentButton.onFilesSelectedHandler"\n            analytics-id="components.directives.add-content-button.cloud-upload.button">\n      <div class="import-action-header">\n        <i class="icon-cloud add-content-cloud-upload-icon"></i>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n        <div class="action-details" bb-translate="components.directives.add-content-button.importContentFromCloudStorage.description"></div>\n      </div>\n    </button>\n  </bb-file-upload>\n</div>'},UyCM:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-messages",use:"icon-small-messages-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-messages"><path d="M1 3h14v10H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 3l7 7 7-7M1 13l5-5M15 13l-5-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},VCKY:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-add",use:"icon-small-add-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM11 8H5M8 5v6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},VTbC:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("36Bh"),s="ultra.components.directives.bbUiIcon.Link";Object(o.a)(i.Link,s,"bbUiIconLink")},"VV+j":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("MTZf"),s="ultra.components.directives.bbUiIcon.Scormengine";Object(o.a)(i.Scormengine,s,"bbUiIconScormengine")},WXD6:function(e,t,n){},Wqh6:function(e,t){e.exports='<div class="panel-wrap telemetry-panel">\n  <bb-telemetry-panel-header title="{{header}}"\n                           course="course"\n                           panel-data-loaded="true">\n  </bb-telemetry-panel-header>\n\n  <nav class="group-selector" ng-class="{\'horizontal-scroll\': discussionInsights.hasNavScrollbar()}" ng-if="isGroupDiscussion">\n    <ul class="group-list">\n      <li class="group-item child-is-invokable"\n          bb-click-to-invoke-child="a.overall-link"\n          tabindex="0">\n        <a href="javascript:void(0);"\n           class="overall-link selected"\n           ng-click="discussionInsights.updateDfiPanel($event)"\n           bb-translate="components.directives.discussion.insights.overall"\n           analytics-id="components.directives.discussion.insights.overall">\n        </a>\n      </li>\n      <li class="group-item child-is-invokable"\n          bb-click-to-invoke-child="a.group-menu-link"\n          tabindex="0"\n          ng-repeat="group in ::groups">\n        <a href="javascript:void(0);"\n           class="group-menu-link"\n           ng-click="discussionInsights.updateDfiPanel($event, group.id, group.name)"\n           analytics-id="components.directives.discussion.insights.group.link">\n          {{group.name}}\n        </a>\n      </li>\n    </ul>\n  </nav>\n\n  <section id="discussion-insights" class="panel-content discussion-insights" bb-foundation-defer>\n    <div class="insights">\n      <div class="insight-summary row collapse summary-box">\n        <div class="column small-12">\n          <bb-statistics\n            config="statisticsConfig"\n            ng-if="isLoaded"\n            small-per-row="1"\n            large-per-row="4"></bb-statistics>\n        </div>\n      </div>\n\n      <div class="participation-chart-container">\n        <div class="bar-chart">\n          <span class="participated"\n                aria-label="{{barchartParticipants}}"\n                title="{{barchartParticipants}}"></span>\n          <span class="opened"\n                aria-label="{{barchartOpenedNonParticipants}}"\n                title="{{barchartOpenedNonParticipants}}"></span>\n          <span class="unopened"\n                aria-label="{{barchartNonParticipants}}"\n                title="{{barchartNonParticipants}}"></span>\n        </div>\n        <div class="legend">\n          <div class="participatedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentParticipatedCaption)"></div>\n          <div class="openedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentOpenedCaption)"></div>\n        </div>\n      </div>\n\n      <div class="non-participant-groups row" ng-if="displayNonParticipantGroups">\n        <div class="column small-12 non-participant-box clearfix" bb-foundation-defer>\n          <h3 class="stat-title"\n              bb-translate="components.directives.discussion.insights.groupNonParticipants"\n              translate-values="{count: totalNonParticipants}"></h3>\n          <div class="float-right">\n            <bb-overflow-menu class="ddm-nonparticipant-options"\n                              element-id="ddm-nonparticipant-options"\n                              element-name={{nonParticipantsOptions}}\n                              on-menu-toggle="discussionInsights.updateMessagesCount()"\n                              menu-items="discussionInsights.getOverflowMenu()"\n                              analytics-id-tag-prefix="components.directives.discussion.insights.nonParticipantsGroups.overflowMenu">\n            </bb-overflow-menu>\n          </div>\n\n          <div class="group-nonparticipants" ng-repeat="nonParticipantGroup in nonParticipantGroups track by nonParticipantGroup.id">\n            <div class="group-heading child-is-invokable" bb-click-to-invoke-child="a.group-link">\n              <a class="group-link"\n                 href="javascript:void(0);"\n                 ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 analytics-id="components.directives.discussion.insights.nonParticipantGroup.link">\n                {{nonParticipantGroup.name}}\n              </a>\n            </div>\n            <div class="nonparticipant-in-group-container"\n                 ng-class="nonParticipantGroup.total > 3 ? \'space-evenly\' : \'set-margin\' ">\n              <div class="nonparticipant-in-group child-is-invokable"\n                   bb-click-to-invoke-child="a.group-non-participant-link"\n                   ng-repeat="nonParticipant in nonParticipantGroup.nonParticipants | limitTo: 4 track by nonParticipant.id">\n                <bb-avatar user="nonParticipant"></bb-avatar>\n                <a class="group-non-participant-link"\n                   href="javascript:void(0);"\n                   aria-label="{{nonParticipant.localizedName}}"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipant.link">\n                  {{nonParticipant.localizedName}}\n                </a>\n              </div>\n            </div>\n            <div class="count-link">\n              <a ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 ng-show="nonParticipantGroup.hidden > 0"\n                 href="javascript:void(0);"\n                 bb-translate="components.directives.discussion.insights.moreLink"\n                 translate-values="{count: nonParticipantGroup.hidden}"\n                 analytics-id="components.directives.discussion.insights.moreLink">\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="non-participants row" ng-show="(displayNonParticipants || displayNonParticipantGroup)">\n        <div class="column small-12 non-participant-box clearfix" ng-if="showLargeNonparticipantPanel" bb-foundation-defer>\n          <h3 class="stat-title" bb-translate="components.directives.discussion.insights.nonParticipants"></h3>\n          <div class="float-right">\n            <bb-overflow-menu class="ddm-nonparticipant-options"\n                              element-id="ddm-nonparticipant-options"\n                              element-name={{nonParticipantsOptions}}\n                              on-menu-toggle="discussionInsights.updateMessagesCount()"\n                              menu-items="discussionInsights.getOverflowMenu()"\n                              analytics-id-tag-prefix="components.directives.discussion.insights.nonParticipants.overflowMenu">\n            </bb-overflow-menu>\n          </div>\n          <ul class="non-participant-list clearfix">\n            <li class="non-participant child-is-invokable"\n                bb-click-to-invoke-child="a.non-participant-link"\n                tabindex="-1"\n                ng-show="showNonparticipant[$index]"\n                ng-repeat="nonParticipant in nonParticipants | limitTo: 18 track by nonParticipant.id">\n              <div class="non-participant-cell"\n                   ng-class="{\'show-focus-outline\': discussionInsights.isFocusedNonparticipant(nonParticipant.id)}">\n                <a class="non-participant-link hide-focus-outline"\n                   bb-translate-attrs="{\'aria-label\':\'{{nonParticipant.localizedNameWithoutWrap}}\'}"\n                   id="non-participant-link-{{nonParticipant.id}}"\n                   tabindex="0"\n                   href="javascript:void(0);"\n                   ng-focus="true"\n                   ng-blur="true"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipantLink.link">\n                  <bb-avatar class="non-participant-avatar" user="nonParticipant.avatarData"></bb-avatar>\n                </a>\n                <span class="byline stacked" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.localizedName)"></span>\n              </div>\n            </li>\n          </ul>\n          <label class="summary-line">{{nonParticipationSummary}}</label>\n        </div>\n        <div class="column small-12 non-participant-box clearfix" ng-if="!showLargeNonparticipantPanel">\n          <h3 class="stat-title subheader">{{barchartNonParticipants}}</h3>\n          <button class="messageAllButton button"\n                  bb-translate="components.directives.discussion.insights.messageAll"\n                  bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageAll\'}"\n                  ng-click="discussionInsights.goToMessageAll()"\n                  analytics-id="components.directives.discussion.insights.messageAll">\n            </button>\n        </div>\n      </div>\n\n      <div class="row equal-height" ng-if="displayTopComments || displayTopParticipants">\n        <div class="top-comments column {{topCommentsColumns}} student-list-box" ng-if="displayTopComments">\n          <h3 class="stat-title subheader"\n              id="most-replies-heading"\n              bb-translate="components.directives.discussion.insights.mostReplies"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-comment-row child-is-invokable"\n                 bb-click-to-invoke-child="a.discussion-link"\n                 ng-class="{\'last\':$last}"\n                 ng-repeat="comment in topComments | limitTo: numberOfCommentsToDisplay | orderBy: \'-numReplies\'">\n              <a href="javascript:void(0);"\n                 class="discussion-link"\n                 ng-click="discussionInsights.goToDiscussion(comment.user.group.id)"\n                 aria-labelledby="comment-user-{{comment.user.id}} most-replies-heading"\n                 aria-describedby="comment-message-{{comment.user.id}}\n                 comment-replies-{{comment.user.id}}"\n                 analytics-id="components.directives.discussion.insights.goToDiscussion.link">\n                <bb-avatar class="top-participant-avatar" user="comment.user.avatarData"></bb-avatar>\n                <div class="comment-info">\n                  <div class="comment-message ellipsis" id="comment-message-{{comment.user.id}}">{{comment.message}}</div>\n                  <div class="byline ellipsis">\n                    <span id="comment-user-{{comment.user.id}}">\n                      <bb-translate>components.directives.discussion.insights.by</bb-translate> {{comment.user.localizedName}}\n                      <span ng-show="isGroupDiscussion"><bb-translate>components.directives.discussion.insights.inGroup</bb-translate> {{comment.user.group.name}}</span>\n                    </span> |\n                    <span id="comment-replies-{{comment.user.id}}"> {{comment.numReplies}} <bb-translate>components.directives.discussion.insights.replies</bb-translate></span>\n                  </div>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n        <div class="top-participants column {{topParticipantColumns}} student-list-box" ng-if="displayTopParticipants">\n          <h3 id="top-heading" class="stat-title subheader" bb-translate="components.directives.discussion.insights.topParticipants"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-participants-row child-is-invokable"\n                 bb-click-to-invoke-child="a.grading-panel-link"\n                 ng-class="{\'last\':$last, \'not-graded\': (!isGradable || isGroupDiscussion), \'group-row\':isGroupDiscussion}"\n                 ng-repeat="participant in topParticipants | limitTo: numberOfCommentsToDisplay | orderBy: \'-numComments\'">\n              <a href="javascript:void(0);"\n                 class="grading-panel-link"\n                 aria-labelledby="user-{{participant.user.id}} top-heading"\n                 aria-describedby="span-replies-{{participant.user.id}} span-feedback-{{participant.user.id}}"\n                 ng-class="{\'not-graded\': (!isGradable || isGroupDiscussion)}"\n                 ng-click="discussionInsights.goToGrade(participant.user.id)"\n                 analytics-id="components.directives.discussion.insights.goToGrade.link">\n                <bb-avatar class="comment-avatar" user="participant.user.avatarData"></bb-avatar>\n                <div class="top-participant-info ellipsis" ng-class="{\'not-graded\': !isGradable}">\n                  <span class="discussion-insights-heading" id="user-{{participant.user.id}}">{{participant.user.localizedName}}</span><br>\n                  <span class="ellipsis" ng-show="isGroupDiscussion">{{participant.user.group.name}}</span><br ng-show="isGroupDiscussion">\n                  <span class="byline" id="span-feedback-{{participant.user.id}}">\n                    <bb-svg-icon class="top-participant-icon" size="small" icon="feedback" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.feedback\'}"></bb-svg-icon>\n                    {{participant.numComments}}\n                  </span>\n                  <span class="byline" id="span-replies-{{participant.user.id}}">\n                  <bb-svg-icon class="top-participant-icon" size="small" icon="replies" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.replies\'}"></bb-svg-icon>\n                    {{participant.numReplies}}\n                  </span>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ui-view="telemetry-discussion-forum-insights-base@"></div>\n  </section>\n</div>\n'},"X+qL":function(e,t,n){},Xc1Q:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-arrow-down",use:"icon-small-arrow-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-arrow-down"><path d="M1 4l7 7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},YHbk:function(e,t,n){},YHe3:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var o=n("D57K"),i=n("wHJ2"),s=n("pjml"),r=n("TnpK"),a=n("Q/M7"),c=n("12mu"),l=n("0JpG"),d=n("nYZ0"),u=n("Qbdf"),p=n("OMme"),h=n("TuNX"),m="ultra.components.services.proctoring",b="proctoring",f={Respondus:"respondus"},g=function(){function t(e,t,n,o,i,s,r,a,c,l,d,u){this.$q=e,this.$rootScope=t,this.$sce=n,this.$window=o,this.CourseModel=i,this.CourseContentModel=s,this.ProctoringServicesModel=r,this.modal=a,this.contentService=c,this.contextCourse=l,this.localize=d,this.ultraState=u}return t.prototype.getBooksAndToolsDescription=function(e){return"components.services.proctoring.booksAndTools."+f[e.vendor]+".description"},t.prototype.getProctoringServices=function(){var e=this.$q.defer();return this.ProctoringServicesModel.$search({"availability.available":"Yes"}).$allow(["400-599"]).$asPromise().then((function(t){t.$response&&t.$response.status>=400?e.resolve([]):e.resolve(t)}),(function(){return e.resolve([])})),e.promise},t.prototype.getProctoringOutlineSummaryText=function(e,t){var n="components.services.proctoring.outline.";if(e.getProctoringServiceHandle()){if(e.isSecureBrowserRequiredToTake()){var o=t?".instructor":".student";return e.isWebcamRequired()?n+f[e.getProctoringServiceVendor()]+o+".secureBrowserAndWebcamRequired":n+f[e.getProctoringServiceVendor()]+o+".secureBrowserRequired"}return null}return null},t.prototype.getProctoringAssessmentSettingsText=function(e){return"components.services.proctoring.settings."+f[e]+".toolLink"},t.prototype.getProctoringAssessmentSettingsRequirementsText=function(e){var t="components.services.proctoring.settings.";return e.getProctoringServiceHandle()&&e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?t+f[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":t+f[e.getProctoringServiceVendor()]+".secureBrowserRequired":null},t.prototype.getProctoringOverviewBrowserText=function(e){return e.isSecureBrowserRequiredToTake()?"components.services.proctoring.overview."+f[e.getProctoringServiceVendor()]+".browser":null},t.prototype.getProctoringOverviewRequirementsText=function(e){var t="components.services.proctoring.overview.";return e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?t+f[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":t+f[e.getProctoringServiceVendor()]+".secureBrowserRequired":null},t.prototype.getProctoringOverviewDownloadText=function(e){return e.getProctoringDownloadUrl()?"components.services.proctoring.overview."+f[e.getProctoringServiceVendor()]+".downloadBrowser":null},t.prototype.openProctoringLTITool=function(e,t){var n="/webapps/assessment/controller/proctoring/launchProctoringSettings?proctoring_svc_id="+e.id+"&course_id="+this.contextCourse.courseId;t&&(n+="&content_id="+t.id);var o={toolHref:a.c(n)};t&&t.title&&t.title.length>0&&(o.toolSubtitle=t.title),this.ultraState.goPeekState("proctoring-lti-tool",o)},t.prototype.getProctoringReviewButtonText=function(e){return"components.services.proctoring.delivery.review."+f[e]+".reviewResults"},t.prototype.getProctoringReviewDownloadText=function(e){return"components.services.proctoring.delivery.review."+f[e]+".download"},t.prototype.getProctoringModalRequirementsText=function(e){return"components.services.proctoring.modal."+f[e]+".requirements"},t.prototype.getProctoringModalDownloadText=function(e){return"components.services.proctoring.modal."+f[e]+".download"},t.prototype.getProctoringModalBrowserText=function(e){return"components.services.proctoring.modal."+f[e]+".browser"},t.prototype.openProctoringModal=function(e,t){var n=this,o=this.ultraState.getCurrentUrlParams();setTimeout((function(){var i=n.$rootScope.$new(!0);n.proctoringModal=n.modal.open({scope:i,template:h,backdrop:"static"});var s=n.ultraState.prev.name.lastIndexOf("peek.");n.peekState=s?n.ultraState.prev.name.substr(s+5):n.ultraState.prev.name,n.proctoringModal.dismiss=n.openOverviewPeekPanel.bind(n),n.courseId=o.courseId,n.contentId=o.contentId,i.requirementsText=n.getProctoringModalRequirementsText(e.getProctoringServiceVendor()),i.downloadText=n.$sce.trustAsHtml(n.localize.translateSync({key:n.getProctoringModalDownloadText(e.getProctoringServiceVendor()),params:{downloadUrl:e.getProctoringDownloadUrl()},locale:t,noWrap:!0,noEscape:!0})),i.browserText=n.getProctoringModalBrowserText(e.getProctoringServiceVendor())}),3e3)},t.prototype.openOverviewPeekPanel=function(){this.ultraState.goPeekState(this.peekState,this.ultraState.prevParams),this.proctoringModal.close()},t.prototype.getSecureBbEditorOptions=function(e){return this.ultraState.current.name===p.a&&(e.attachment=!1,e.image=!1,e.youtubeVideo=!1,e.video=!1,e.contentMarket=!1),e},t.prototype.handleProctoredAssessmentClose=function(e){"Respondus"===e.getProctoringServiceVendor()?a.p(a.c("/ultra/proctoring/close?rldbsm=1&rldbxb=1")):this.$window.close()},t.prototype.openRespondusProctoringLaunchLink=function(t){if(e("#respondus-iframe").remove(),t.startsWith("data:text/plain,")){var n='<iframe src="data://text/plain,'+t.substring("data:text/plain,".length)+'" id="respondus-iframe" style="display:none"></iframe>';this.createRespondusIFrameAndSetLocation(n)}else this.setRespondusWindowLocation(t)},t.prototype.createRespondusIFrameAndSetLocation=function(t){document.body.appendChild(e(t)[0])},t.prototype.setRespondusWindowLocation=function(e){this.$window.location.assign(e)},t.$inject=["$q","$rootScope","$sce","$window",s.o.serviceName,s.r.serviceName,s.nb.serviceName,c.b,d.f,u.e,l.serviceName,r.d],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(g);i.module(m,["ngSanitize",d.d,l.moduleName,c.a,r.b,u.b]).service(b,g)}).call(this,n("5iHu"))},Ybms:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-duplicate",use:"icon-small-duplicate-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-duplicate"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 4h11v11H1z" /><path d="M12 12h3V1H4v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},Ylhg:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("13AT"),s="ultra.components.directives.bbUiIcon.Lti";Object(o.a)(i.Lti,s,"bbUiIconLti")},Youf:function(e,t){e.exports='<a class="content-title" \n   aria-describedby="{{contentItemBase.getAriaDescribedBy()}}" \n   ng-click="contentItemLtiLaunch.ltiLaunch()" \n   href="javascript:void(0);"\n   analytics-id="content.item.ltilaunch.link"><span>{{ content.title }}</span></a>\n<span class="broken-lti-link" ng-if="contentItemBase.isUnlaunchableLtiLink() && !contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()"\n      bb-translate>components.directives.content-item-base.broken-link</span>\n<span class="broken-lti-link" ng-if="contentItemBase.isUnlaunchableLtiLink() && contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()"\n      bb-translate>components.directives.content-item-base.approval-required</span>'},Z2hW:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("SxMs"),s="ultra.components.directives.bbUiIcon.Post";Object(o.a)(i.a,s,"bbUiIconPost")},ZNC7:function(e,t,n){"use strict";var o=n("D57K"),i=n("nbDY"),s=function(e){function t(t,n){var o=e.call(this,t)||this;return o.cssClassObj=n,o}return Object(o.__extends)(t,e),t.prototype.getCSSClass=function(){return this.cssClassObj.cssClass},t.prototype.getFirstCSSClass=function(){return this.cssClassObj.firstCssClass},t.BoxNotification=new t("BOX_NOTIFICATION",{cssClass:"notification-box",firstCssClass:"first-of-box"}),t.DefaultNotification=new t("DEFAULT_NOTIFICATION",{cssClass:"notification-default"}),t}(n.n(i).a);t.a=s},Zahr:function(e,t,n){},Zeij:function(e,t,n){},ZkU4:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var o=n("D57K"),i=(n("FwJ5"),n("nsO7")),s=n("dCrD"),r=n("Oyr+"),a="show-cloud-upload-progress",c=function(e){function t(t,n,o){var i=e.call(this,t,n,o)||this;if(i.uploadFile=function(){i.saveLocationForFileUpload(),i.element.find(".file-upload").click()},i.uploadCloudFile=function(){i.saveLocationForFileUpload(),i.scope.isButtonLocationChangable&&i.scope.$emit(a,i.positionForFiles.positionAfter),i.element.find(".doc-add-media").click()},i.openContentMarket=function(){var e=i.scope.rootContent(),t=i.getInsertLocationData();i.contentSvc.getParentFolder(t.parentId,i.contextCourse.courseId,e).$then((function(e){if(e.children){var n=""+e.children.getInsertionIndex(t.positionBefore,t.positionAfter,!0,e.hasMoreChildren);i.ultraState.goPeekState("content-market",{position:n,parentId:t.parentId,positionBefore:t.positionBefore,positionAfter:t.positionAfter,depth:t.depth})}}))},i.initContextMenuItems(),n.$on("always-show-time-expires",(function(){i.turnOffAlwaysShow()})),n.isButtonLocationChangable&&n.$on("change-add-content-button-position",(function(e,t){t.reopen&&!i.isMenuVisible&&i.toggleOverflowMenu()})),n.$on(r.e,(function(e,t,o){if(o===r.c.OutlineAddContentButtonFileSelected&&t===n.fileListViewLocalId){var s=i.positionForFiles||i.getInsertLocationData();i.closeMenu(),n.$emit(r.e,s.parentId,s.positionBefore,s.positionAfter,s.depth,t,n.content,r.c.AssignDropTarget),i.assignPosition()}})),i.scope.isRenderByDefault&&i.scope.isRenderByDefault())var s=i.scope.$watch("addContentButton.isMenuVisible",(function(e){e&&(i.scope.addContentButton.removeDefaultRenderClass=!0,s())}));return i.scope.$watch("parentId()",(function(e,t){e!==t&&i.initContextMenuItems()})),i}return Object(o.__extends)(t,e),t.prototype.toggleOverflowMenu=function(){var e=this;this.initContextMenuItems().then((function(){e.toggleMenu()})).catch((function(){}))},t.prototype.initContextMenuItems=function(){var e=this,t=this.element.closest("[data-base-state-name]").data("baseStateName"),n=this.getInsertLocationData();return this.$q.all({isCloudServiceAvailable:this.isCloudServiceAvailablePromise,createHref:this.ultraState.peekHref("content-manage.create",n,t),copyHref:this.ultraState.peekHref("content-manage.copy",n,t),contentCollectionHref:this.ultraState.peekHref("content-collection",n,t)}).then((function(t){var n=e.bbLocalize.getLocale(e.scope);e.items=[{key:"create",className:"js-create",href:t.createHref,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.create"}),iconProps:{iconName:"add",iconSize:"small"}},{key:"copy",className:"js-copy",href:t.copyHref,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.copy"}),iconProps:{iconName:"duplicate",iconSize:"small"}},{key:"upload-file",className:"js-upload-file",onClick:e.uploadFile,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.upload"}),iconProps:{iconName:"upload",iconSize:"small"}},{key:"content-market",className:"js-content-market",onClick:e.openContentMarket,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.contentMarket"}),iconProps:{iconName:"content-market",iconSize:"small"}},{key:"upload-cloud-file",className:"js-upload-cloud-file",onClick:e.uploadCloudFile,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.importContentFromCloudStorage.title"}),iconProps:{iconName:"upload-cloud",iconSize:"small"}},{key:"content-collection",className:"js-content-collection",href:t.contentCollectionHref,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.contentCollection"}),iconProps:{iconName:"content-collection",iconSize:"small"}}],e.isCloudServiceAvailable||Object(i.remove)(e.items,(function(e){return"upload-cloud-file"===e.key})),e.currentCourse.canCopy()||Object(i.remove)(e.items,(function(e){return"copy"===e.key}))}))},t.prototype.saveLocationForFileUpload=function(){this.scope.isButtonLocationChangable&&(this.positionForFiles=this.getInsertLocationData())},t.$inject=["$injector","scope","element"],t}(s.a)},a8oS:function(e,t){e.exports='<div class="content-outline" bb-load-bundle="components/directives/content/content-outline">\n  <bb-add-content-button ng-if="!hideAddMenuOverride && canCreate"\n                         can-create-all-contents="canCreateAllContents"\n                         is-render-by-default="contentOutline.parentFolder.depth === 0"\n                         show-menu-override="contentOutline.shouldShowMenuOverride()"\n                         parent-id="contentOutline.parentFolder.id" root-content="contentOutline.parentFolder"\n                         position-before="\'start\'" item-name="contents[0].title"\n                         depth="(contentOutline.parentFolder.depth + 1)"\n                         always-show="contentOutline.shouldShowAddButton()" context-area="contentOutline.contextArea"\n                         can-copy-import="canCopyImport">\n  </bb-add-content-button>\n  <div class="add-element" ng-if="hideAddMenuOverride && !canCreate"> </div>\n  <div ng-if="contents">\n    <div class="content-outline-scroll-container"\n         bb-infinite-scroll="contentOutline.loadMoreChildren(contentOutline.parentFolder)"\n         infinite-scroll-immediate-check="true" infinite-scroll-disabled="contentOutline.isAllContentsLoaded()"\n         infinite-scroll-container="contentOutline.getScrollContainerSelector()"\n         infinite-scroll-listen-for-event="content-outline-infinite-scroll-check"\n         infinite-scroll-current-count="contents.length" infinite-scroll-total-count="contents.paging.count"\n         infinite-scroll-load-limit="contents.paging.limit"\n         infinite-scroll-tray-id="content-outline-{{::contentOutline.parentFolder.id}}"\n         infinite-scroll-focusable-children-selector=".content-title"\n         infinite-scroll-localization-keys-prefix="components.directives.content.content-outline.infiniteScroll.{{::contentOutline.contextArea === \'discussions\' ? \'discussions\' : \'content\'}}"\n         infinite-scroll-force-show-ancestor-selector="{{::contentOutline.getScrollForceShowSelector()}}"\n         sortable-parent>\n      <div class="content-outline-scroll-list" data-parent-id="{{::contentOutline.parentFolder.id}}">\n        <div class="js-content-div drag-element"\n             ng-class="{\'is-restricted\': content.canViewAsInstructor() && content.isHiddenFromStudents(), \'last\': $last, \'has-conversation-indicator\': content.ui.hasIndicator}"\n             ng-repeat="content in contents track by contentOutline.getContentTrackingId(content)" data-content-id="{{content.id}}"\n             ng-mouseenter="contentOutline.placeAddButton(content)">\n\n          <ng-switch on="(content.isFolder() && !content.isBbPage()) || content.isLearningModule()">\n            <div ng-switch-when="true">\n              <bb-folder root-content="contentOutline.parentFolder"\n                         on-file-drop-handler="contentOutline.onFileDropHandler"\n                         on-move-handler="contentOutline.onMoveHandler"\n                         on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler" contents="contents"\n                         content="content" next-content-id="contents[$index + 1].id"\n                         previous-content-id="contents[$index - 1].id"\n                         load-more-children="contentOutline.loadMoreChildren" can-create="canCreate"\n                         can-move="contentOutline.canMove" context-area="contentOutline.contextArea"\n                         can-copy-import="canCopyImport"></bb-folder>\n            </div>\n            <div ng-switch-when="false" bb-drag drag-item="::content.id" can-move="contentOutline.canMove">\n              <div ng-if="!content.isGroupContent || content.assignedGroups.length >= 0 || contentOutline.canMove">\n                <div bb-drop-handler on-file-drop-handler="contentOutline.onFileDropHandler"\n                     on-move-handler="contentOutline.onMoveHandler"\n                     on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler" content="content"\n                     root-content="contentOutline.parentFolder" next-content-id="contents[$index + 1].id"\n                     previous-content-id="contents[$index - 1].id">\n                  <div class="row collapse element-list-row js-course-skip-link-target" can-create="canCreate"\n                       can-move="contentOutline.canMove" bb-content-item-mouseover>\n                    <bb-content-item-base contents="contents" content="content" context-area="contentOutline.contextArea"\n                                          can-move="contentOutline.canMove"></bb-content-item-base>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </ng-switch>\n          <div id="add-button-placeholder{{content.id}}"\n               class="add-element-container"\n               ng-if="::canCreate">\n            <div ng-if="contentOutline.isAddContentButtonUnattached(content.id)"\n                 id="add-button-line{{content.id}}" class="add-element" tabindex="0" role="button"\n                 ng-class="{\'mobile-center-content-button\': contentOutline.isMobileDevice()}"\n                 aria-label="{{::contentOutline.getAddButtonLineLabel(content.title)}}"\n                 ng-focus="contentOutline.placeAddButton(content, true)">\n              <bb-svg-icon size="small" icon="add" class="mobile-add-content-icon" ng-if="contentOutline.isMobileDevice()"></bb-svg-icon>\n            </div>\n          </div>\n          <bb-progress\n              ng-if="contentOutline.cloudUploadInProgress[content.id]"\n              target-div="#progress{{content.id}}"\n              primary-key="\'progress\' + content.id"\n              display-results="false"\n          >\n          </bb-progress>\n        </div>\n        <div class="drag-element">\n          <div drag-item-id="{{contentOutline.placeholderContent.id}}"></div>\n          <div class="drop-placeholder" bb-drop-handler content="contentOutline.placeholderContent"\n               on-move-handler="contentOutline.onMoveHandler"\n               on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- LRN-123904: For file upload content items `positionAfter` is set to `content.id` in course-outline.html. But when file upload is\n  in progress, `content.id` stays undefined. As a result `positionAfter` receives undefined.\n  `positionAfter` value is not used when `content.id` is not available. i.e.: When upload-in-progress file is very first item - `positionAfter` value is not\n  available, therefore `positionBefore` is used instead. --\x3e\n  <bb-add-content-button\n    class="movable-add-content-button movable-add-content-button-folder{{::contentOutline.parentFolder.id}}"\n    ng-hide="!contentOutline.addContentButtonLocation"\n    ng-if="::canCreate && !content.ui.importPlaceholder"\n    can-create-all-contents="canCreateAllContents"\n    content="contentOutline.addContentButtonLocation"\n    root-content="contentOutline.parentFolder"\n    is-button-location-changable="true"\n    parent-id="contentOutline.parentFolder.id"\n    position-after="contentOutline.addContentButtonLocation.id || contentOutline.addContentButtonLocation.positionAfter"\n    position-before="(contentOutline.addContentButtonLocation.id || contentOutline.addContentButtonLocation.positionAfter) ? null : contentOutline.addContentButtonLocation.positionBefore"\n    item-name="contentOutline.addContentButtonLocation.title"\n    depth="contentOutline.addContentButtonLocation.depth"\n    context-area="contentOutline.contextArea"\n    can-copy-import="canCopyImport">\n  </bb-add-content-button>\n</div>\n'},aTRN:function(e,t,n){"use strict";var o=n("D57K"),i=n("pjml"),s=n("aHpC"),r=n("nbDY"),a=n.n(r),c=n("4GL6"),l=n("0JpG"),d=n("oi1r"),u=n("TnpK"),p=n("Qbdf"),h=n("X455"),m=n("nsO7"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Multiple=new t("multiple-conditions"),t.Performance=new t("performance"),t.ForcedSequence=new t("forced-sequence"),t.Date=new t("date"),t.None=new t("none"),t}(a.a),f=function(){function e(e,t,n,o,i,s,r){var a=this;this.localizeService=e,this.schemaService=t,this.courseModel=n,this.contextCourse=o,this.contextCourseMembership=i,this.scope=r,this.isPerformanceConditionInvalid=!1,this.role=m.memoize((function(){return a.contextCourseMembership.courseMembership&&a.contextCourseMembership.courseMembership.isActAsInstructorMembership()?"instructor":"student"})),this.courseId=o.courseId?o.courseId:s.params.courseId}return e.prototype.getConditions=function(e,t,n){this.content=e;var o=e.adaptiveReleaseRules&&e.adaptiveReleaseRules.rules;if(o&&o.length||e.isForcedSequenceModule())if(this.getConditionType(o),this.getPerformanceCriteria()?this.getPerformanceCondition(t,n):this.performanceToolTips=null,this.getDateCriteria()?this.getDateCondition():this.dateToolTips=null,e.isForcedSequenceModule()&&this.contextCourseMembership.courseMembership.isActAsInstructorMembership()||e.isForcedSequenceItem()){var i=e.isForcedSequenceModule()?"module":"item";e.isForcedSequenceItem()&&0===e.position&&(i="first-"+i),this.forcedSequenceTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.content-item-base.conditionalRelease."+this.role()+"-forced-sequence-"+i+"-tooltip",noWrap:!0,noEscape:!0}),this.updatetooltipScope()}else this.forcedSequenceTips=null},e.prototype.getConditionType=function(e){e&&e[0]&&e[0].criteria&&(this.allCriteria=e[0].criteria);var t=this.getPerformanceCriteria(),n=this.getDateCriteria(),o=this.content&&(this.content.isForcedSequenceModule()||this.content.isForcedSequenceItem()),i=[t,n,o].filter((function(e){return!!e})).length;this.conditionType=i>=2?b.Multiple.toString():t?b.Performance.toString():n?b.Date.toString():o?b.ForcedSequence.toString():b.None.toString()},e.prototype.getPerformanceCriteria=function(){return this.getCriteriaByType("Grade_Range")||this.getCriteriaByType("Grade_Range_Percentage")},e.prototype.getDateCriteria=function(){return this.getCriteriaByType("Date_Range")},e.prototype.getCriteriaByType=function(e){return this.allCriteria&&this.allCriteria.find((function(t){return t.type===e}))},e.prototype.getPerformanceCondition=function(e,t){var n=this;this.gradeCriteria=this.getPerformanceCriteria();var o=this.gradeCriteria&&this.gradeCriteria.minScore,s=this.gradeCriteria&&this.gradeCriteria.maxScore,r=this.gradeCriteria&&this.gradeCriteria.gradeColumnId,a="",c="";if(!r||t){var l="components.directives.content-item-base.conditionalRelease."+this.role()+"-missing-column-error";return this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:l,noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!0,void this.updatetooltipScope()}this.courseModel.$new(this.courseId||this.content.courseId).gradebook.columns.$find(r).$allow([403]).$then((function(t){if(t.$response&&403===t.$response.status)return n.performanceToolTips=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),key:"components.directives.content-item-base.conditionalRelease.student-missing-column-error",noWrap:!0,noEscape:!0}),n.isPerformanceConditionInvalid=!0,void n.updatetooltipScope();var r="components.directives.content-item-base.conditionalRelease."+n.role()+"-lock-tooltip";r+=void 0===s?"-common":o===s?"-equal":"-custom";var l=e||t&&t.columnName;n.schemaService.loadSchemas(n.courseId).then((function(e){var d=e&&e.find((function(e){return e.id===t.gradingSchemaId}))||{};n.gradeCriteria&&"Grade_Range"===n.gradeCriteria.type&&(void 0!==s||i.I.ScaleType.Score.isEqualTo(d.scaleType)||i.I.ScaleType.Complete.isEqualTo(d.scaleType))&&(a=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:o||0},key:"components.directives.content-item-base.conditionalRelease.point.plural",noWrap:!0,noEscape:!0}),c=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:s||t.possible},key:"components.directives.content-item-base.conditionalRelease.point.plural",noWrap:!0,noEscape:!0})),n.gradeCriteria&&"Grade_Range_Percentage"===n.gradeCriteria.type&&(void 0!==s||i.I.ScaleType.Percent.isEqualTo(d.scaleType)?(a=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:o||0},key:"components.directives.content-item-base.conditionalRelease.percentage",noWrap:!0,noEscape:!0}),c=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:s||t.possible},key:"components.directives.content-item-base.conditionalRelease.percentage",noWrap:!0,noEscape:!0})):i.I.ScaleType.Tabular.isEqualTo(d.scaleType)&&(d.symbols.sort((function(e,t){return e.absoluteTranslation-t.absoluteTranslation})),d.symbols.forEach((function(e){e.absoluteTranslation>=o&&(o=e.symbol,a=o)})))),n.getPerformanceToolTips(r,a,c,l)}))}))},e.prototype.getDateCondition=function(){if(this.dateCriteria=this.getDateCriteria(),this.dateCriteria){var e=null;this.dateCriteria.start&&this.dateCriteria.end?e="both":this.dateCriteria.start?e="showon":this.dateCriteria.end&&(e="hideafter");var t="components.directives.content-item-base.conditionalRelease."+this.role()+"-"+e+"-date-tooltip";this.dateToolTips=e&&this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:t,params:{showon:new Date(this.dateCriteria.start),hideafter:new Date(this.dateCriteria.end)},noWrap:!0,noEscape:!0}),this.updatetooltipScope()}},e.prototype.getPerformanceToolTips=function(e,t,n,o,i){void 0===i&&(i=""),this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:e,params:{minScore:t,maxScore:n,title:o},noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!1,this.updatetooltipScope()},e.prototype.updatetooltipScope=function(){angular.isUndefined(this.tooltipScope)&&(this.tooltipScope=this.scope.$new(!0)),this.tooltipScope.items=[],this.performanceToolTips&&(this.tooltipScope.items.push(this.performanceToolTips),this.isPerformanceConditionInvalid)?this.tooltips=this.performanceToolTips:(this.dateToolTips&&this.tooltipScope.items.push(this.dateToolTips),this.forcedSequenceTips&&this.tooltipScope.items.push(this.forcedSequenceTips),this.tooltips=this.tooltipScope.items.join(" "))},e.prototype.getConditionalReleaseComplexTooltipTemplate=function(){return c.a("conditional-release-tooltip")},e=Object(o.__decorate)([Object(o.__param)(0,Object(s.b)(l.serviceName)),Object(o.__param)(1,Object(s.b)(d.b)),Object(o.__param)(2,Object(s.b)(i.o.serviceName)),Object(o.__param)(3,Object(s.b)(p.e)),Object(o.__param)(4,Object(s.b)(h.d)),Object(o.__param)(5,Object(s.b)(u.d)),Object(o.__param)(6,Object(s.b)("scope"))],e)}();t.a=f},ahTn:function(e,t){e.exports='<bb-modal id="notification-modal"\n          class="notification"\n          modal-title-key="{{courseOutline.exportModalTitleKey}}"\n          analytics-id-tag-prefix="course.export.modal.startArchive">\n  <div name="modal-contents">\n    <p bb-translate="course.export.modal.modalText" course-org-token-resolver></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="close-modal-export js-export-without-student-data button js-primary-button" \n          ng-click="courseOutline.triggerCourseExport(false)"\n          analytics-id="course.export.modal.startExport.button">\n    <span bb-translate="course.export.modal.startExport"></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          class="close-modal-export js-export-with-student-data button button--secondary js-secondary-button" \n          ng-click="courseOutline.triggerCourseExport(true)"\n          analytics-id="course.export.modal.startArchive.button">\n    <span bb-translate="course.export.modal.startArchive"></span>\n  </button>\n</bb-modal>'},asT1:function(e,t){e.exports='<div id="panel-export" bb-load-bundle="features/course/exports/course-export" bb-cache-compilation="course-exports">\n  <div class="panel-wrap">\n    <header class="panel-header simple-header">\n      <div class="panel-titles-container">\n        \x3c!-- sub-title should be according to course --\x3e\n        <div class="panel-sub-title">({{::course.model.displayId + \' \\u2022 \' + course.model.displayName}})</div>\n        <div class="black-header-contents">\n          <button class="left-off-canvas-toggle menu-toggle standard-button dark-background"\n                  analytics-id="course.export.exportPanel.base.menu.button">\n            <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n            <span class="sr-only" bb-translate>base.menu</span>\n          </button>\n          <h1 class="panel-title" bb-translate="course.export.exportPanel.head"></h1>\n        </div>\n      </div>\n    </header>\n    <div class="panel-content">\n      <div class="com-export-package">\n        <header>\n          <span class="title" bb-translate="course.export.exportPanel.title"></span>\n          <button id="add-export-package"\n                  class="anchor btn-export"\n                  ng-if="courseExport.scheduledTasks.length === 0"\n                  ng-click="courseExport.openExportModal()"\n                  bb-translate-attrs="{\'aria-label\':\'course.export.aria-label.add-export-package\'}"\n                  analytics-id="course.export.exportPanel.openExportModal.button">\n            <bb-svg-icon size="medium" icon="export"></bb-svg-icon>\n          </button>\n        </header>\n\n        <ul class="list-export-tasks">\n          <li class="in-progress" task-id="{{exportTask.taskId}}" ng-repeat="exportTask in courseExport.scheduledTasks">\n            <div class="export-progress">\n              <span class="description">\n                <span bb-translate="course.export.exportPanel.inProgress"></span>\n                <span class="progress-status" ng-if="exportTask.startDate != null">\n                  <span bb-translate="course.export.exportPanel.started"></span>\n                  <bb-date format="Short">exportTask.startDate</bb-date>\n                </span>\n                <span class="progress-status" ng-if="exportTask.startDate == null">\n                  <span bb-translate="course.export.exportPanel.justStarted"></span>\n                </span>\n              </span>\n              <button class="anchor cancel-export"\n                      ng-if="exportTask.permissions.delete && false"\n                      ng-click="courseExport.deleteExportTask(exportTask)"\n                      bb-translate-attrs="{\'aria-label\':\'course.export.aria-label.delete-in-progress\'}"\n                      analytics-id="course.export.exportPanel.cancelExport.button">\n                <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n              </button>\n            </div>\n          </li>\n        </ul>\n\n        <ul class="list-archive-export">\n          <li class="completed" ng-repeat="completeTask in courseExport.courseExports">\n            <a class="file-link"\n               ng-href="{{courseExport.getAbsoluteUrl(completeTask.openUrl)}}"\n               analytics-id="course.export.exportPanel.completedTask.url.link">\n              <bb-ui-icon-zip color="primary"></bb-ui-icon-zip>\n              <span class="description">\n                <span class="file-name">{{::completeTask.cxFileId}}.zip</span>\n                <span class="date-created">\n                  <span bb-translate="course.export.exportPanel.created"></span> - <bb-date format="Short">completeTask.createDate</bb-date>\n                </span>\n              </span>\n            </a>\n            <a href="javascript:void(0);"\n               class="file-delete js-delete-archive"\n               bb-confirmation-needed="resource/x-bb-course-archive"\n               show-type="always"\n               ng-click="courseExport.deleteCourseExport(completeTask)"\n               role="button"\n               confirmation-course-org-token-resolver\n               bb-translate-attrs="{\'aria-label\':\'course.export.aria-label.delete-completed\'}"\n               translate-attrs-values="{\'fileName\': completeTask.cxFileId + \'.zip\'}"\n               analytics-id="course.export.exportPanel.deleteCourseExport.link">\n              <bb-svg-icon size="small" icon="trash"></bb-svg-icon>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n    \x3c!-- End: com-export-package --\x3e\n  </div>\n</div>\n'},av75:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("D57K"),i=n("nbDY"),s=n.n(i),r=n("u2fd"),a=n("Oy15"),c=n("gFY1"),l=n("sbY4"),d=n("8iPc"),u=function(e){function t(t,n){var o=e.call(this,t)||this;return o.templateObj=n,o}return Object(o.__extends)(t,e),t.prototype.getTemplateHtml=function(){return this.templateObj.template},t.SimpleText=new t("SIMPLE_TEXT",{template:r}),t.DueDatedContent=new t("DUE_DATED_CONTENT",{template:a}),t.Calendar=new t("CALENDAR",{template:c}),t.Grades=new t("GRADES",{template:l}),t.Telemetry=new t("TELEMETRY",{template:d}),t}(s.a)},b8rY:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-default-conversion-exceptions",use:"icon-medium-default-conversion-exceptions-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-default-conversion-exceptions"><path d="M12.75 18.5a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 15l-.5-10h1L12 15zM12 23C5.9249 23 1 18.0751 1 12c0-2.923 1.1402-5.5799 3-7.5499M12 1c6.0751 0 11 4.9249 11 11 0 2.8985-1.121 5.5351-2.9532 7.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 5l3-1v3M23 19l-3 1v-3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},bhWV:function(e,t,n){"use strict";n("Sq3Z"),n("1NX5"),n("uAJz");var o=n("wHJ2"),i=n("wy9x"),s=n("ga7A"),r=n("Is+C"),a=n("yV5t"),c="ultra.components.directives.content.contentItem.contentItemType.contentItemScormlaunch",l=function(){function e(e,t){this.scope=e,this.scormService=t}return e.prototype.scormLaunch=function(){if(!this.scope.content.isScorm())throw new Error("Attempted to launch a non-SCORM content item. "+this.scope.content.contentHandler.toString());this.scormService.scormLaunch({courseId:this.scope.content.courseId,contentId:this.scope.content.id,content:this.scope.content,showPreLaunchPanel:!0})},e.$inject=["scope",r.c],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=a,this.scope=!1,this.link=function(e,n,o){e.contentItemScormLaunch=t.$injector.instantiate(l,{scope:e,element:n,attrs:o})}}return e.$inject=["$injector"],e}();o.module(c,[r.b]).directive("bbContentItemScormlaunch",["$injector",function(e){return e.instantiate(d)}]);var u=n("z+6U"),p=n("jhBu"),h=n("YHe3"),m=n("TnpK"),b=n("pjml"),f=n("/R3n"),g=n("Sa5G");n.d(t,"a",(function(){return v}));var v="ultra.components.directives.content.contentItem.contentItemCourseOutline",y=function(){function e(e,t,n,o){var i=this;this.scope=e,this.entitlementService=t,this.proctoringService=n,this.ultraState=o,this.customCategory="",this.entitlementService.hasCourseEntitlement(g.f.ModifyContent,this.scope.content.courseId).then((function(e){i.entitledToModifyContent=e}))}return Object.defineProperty(e.prototype,"canOpenConditionalRelease",{get:function(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)},enumerable:!0,configurable:!0}),e.prototype.shouldAlignMiddle=function(){var e=this.scope.content;return!e.canViewAsInstructor()&&(!e.description&&(!e.isVisible()||!e.adaptiveReleaseRules))},e.prototype.openConditionalRelease=function(){if(!this.isCourseCompletedAndInInstructorView()){var e=this.scope.content.id;this.scope.content&&this.scope.content.contentHandler&&this.scope.content.contentDetail&&b.r.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.getLinkContentSource().$then((function(t){e=t.id})),this.ultraState.goPeekState("conditional-release",{id:e})}},e.prototype.isCourseCompletedAndInInstructorView=function(){return!this.scope.content.canEdit()&&this.scope.content.canViewAsInstructor()},e.prototype.getExtraRequirementsSummary=function(){return this.proctoringService.getProctoringOutlineSummaryText(this.scope.content,this.entitledToModifyContent)},e.$inject=["scope",p.b,h.b,m.d],e}(),C=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=f,this.scope=!1,this.link=function(e){if(e.contentItemCourseOutline=t.$injector.instantiate(y,{scope:e}),e.content.getAssociatedGradingColumn()){var n=e.content.getAssociatedGradingColumn().gradebookCategory;n&&!n.isUserDefined?(e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description."+n.title,e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title."+n.title):(e.contentItemCourseOutline.customCategory=n&&n.title,e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description.custom",e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title.custom")}else e.contentItemBase.courseLinkContentHandler.isEqualTo(e.content.contentHandler)&&(e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description."+b.E.GradeCategoryTitleEnum.Discussion,e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title."+b.E.GradeCategoryTitleEnum.Discussion)}}return e.$inject=["$injector"],e}();o.module(v,[i.a,s.a,u.a,c,h.a,m.b]).directive("bbContentItemCourseOutline",["$injector",function(e){return e.instantiate(C)}])},c2Z8:function(e,t){e.exports='<div class="bb-statistics">\n  <ul class="statistics-list total-items-{{::statistics.total}} small-per-row-{{::statistics.smallPerRow}} large-per-row-{{::statistics.largePerRow}}">\n    <li ng-repeat="item in statistics.config">\n      <div class="statistics-item-container" ng-class="{\'no-default-padding\': item.noDefaultPadding, \'full-height\': !item.complexScope}">\n        <div class="stat-title" ng-attr-title="{{ item.hover ? item.hover : undefined }}" bb-translate>{{::item.title}}</div>\n        <div ng-if="::!item.complexScope" bb-simple-statistic item="::item"></div>\n        <div ng-if="::item.complexScope" bb-complex-statistic item="::item"></div>\n      </div>\n    </li>\n  </ul>\n</div>'},"c7N/":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("D57K"),i=n("Fvsw"),s=n("jhBu"),r=n("aHpC"),a=n("Sa5G"),c="ultra.components.services.unsafe-html",l="unsafe-html",d=function(){function e(e,t){this.contextService=e,this.entitlementService=t}return e.prototype.hasEditUnsafeHtmlPermission=function(){return this.entitlementService.hasCourseEntitlement(a.H.Modify)},e.prototype.isAlternateDomainConfigured=function(){return this.contextService.getSystemInfo().alternateDomainConfigured},e.prototype.canEditUnsafeHtml=function(){var e=this;return this.hasEditUnsafeHtmlPermission().then((function(t){return t&&e.isAlternateDomainConfigured()}))},e=Object(o.__decorate)([Object(o.__param)(0,Object(r.b)(i.b)),Object(o.__param)(1,Object(r.b)(s.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(d);angular.module(c,[i.a,s.a]).service(l,d)},cCP0:function(e,t,n){},"cH+F":function(e,t){e.exports='<div class="grade-callout-wrapper">\n  <div class="grade-callout readonly {{displayGrade.colorClass || \'na\'}} overall-grade"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target"\n       ng-class="{\'defaultCursor\': displayGrade.cursorDefault}">\n    <span ng-if="!displayGrade.noGradeToDisplay()" class="sr-only" bb-translate>{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}</span>\n    <span ng-if="!overallGradePeekSref" class="value">{{displayGrade.fullDisplayGrade}}</span>\n    <a class="overall-grade value" \n       ng-if="overallGradePeekSref" \n       bb-peek-sref="{{overallGradePeekSref}}"\n       analytics-id="components.directives.grade.display-grade.overallGrade.link">\n      {{displayGrade.fullDisplayGrade}}\n    </a>  \n  </div>\n</div>\n'},cMgu:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("3yh1"),s="ultra.components.directives.bbUiIcon.LearningModule";Object(o.a)(i.LearningModule,s,"bbUiIconLearningModule")},dCrD:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var o=n("D57K"),i=n("nbDY"),s=n.n(i),r=n("Oyr+"),a=n("0JpG"),c=n("RPq7"),l=n("Qbdf"),d=n("nYZ0"),u=n("Vsv2"),p=n("A+IJ"),h=n("+4Px"),m=n("pjml"),b=n("3Jgm"),f=n("e6jQ"),g=n("lEL+"),v=n("TnpK"),y=n("PoQW"),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Unzip=new t("Unzip"),t.Website=new t("Website"),t.Default=new t("Default"),t}(s.a),S=function(){function e(e,t,n){var o=this;this.scope=t,this.element=n,this.alwaysShow=!1,this.isButtonVisible=!1,this.isMobile=!1,this.isUploadMultipleFiles=!1,this.removeDefaultRenderClass=!1,this.uuid=Object(f.b)(),this.downloadFile=function(e){o.scope.$broadcast("downloadFile",e,o.positionForFiles)},this.defaultAttachHandler=function(e,t,n,i,s){var r=i||o.$q.defer(),a={parentId:void 0,positionBefore:"start",positionAfter:void 0,depth:0};return o.isUploadMultipleFiles=n,o.insertLocation=s||o.getInsertLocationData(),a=t.ui&&t.ui.parentId?{parentId:t.ui.parentId,positionBefore:t.ui.positionBefore,positionAfter:t.ui.positionAfter,depth:t.ui.depth}:o.insertLocation,"folder"===t.type?(o.closeMenu(),!t.ui||t.ui.depth<=p.l?o._addFolderToCourseOutline(t,a).then((function(e){t.ui={parentId:e.id,positionBefore:"start",depth:1+Number(e.depth)},r.resolve(t)}),(function(e){r.reject(e)})):r.resolve()):o._addContentToCourseOutline(t,e,a).then((function(e){var n=null==s?void 0:s.positionAfter;o.scope.$root.$broadcast("uploadComplete",t,n),e.$save().$then((function(n){t.ui&&t.ui.needUnzip&&(e=n),r.resolve()}))})),r.promise},this.toggleAddContentMenu=function(){o.isEmptyFolder()?o.scope.$emit("toggle-folder-by-id",o.scope.content.id):o.isMenuVisible=!o.isMenuVisible,o.timeout((function(){o.scope.$apply()}),o.scope)},this.hideAddContentMenu=function(e){null===e.target.closest("#"+o.getButtonWrapperId())&&(o.isMenuVisible=!1,o.timeout((function(){o.scope.$apply()}),o.scope))},this.$q=e.get("$q"),this.$rootScope=e.get("$rootScope"),this.bbLocalize=e.get(a.serviceName),this.cloudDriveService=e.get(u.c),this.timeout=e.get(g.b),this.contentSvc=e.get(d.f),this.CourseModel=e.get(m.o.serviceName),this.PartnerService=e.get(b.b),this.ultraState=e.get(v.d),this.contextCourse=e.get(l.e),this.scope.addMenuId=f.a(),this.showMenuOverride=this.scope.showMenuOverride,this.alwaysShow=this.scope.alwaysShow,this.currentCourse=this.contextCourse.course,this.isMobile=!this.cloudDriveService.isShowOneDrive,this.isCloudServiceAvailablePromise=this.cloudDriveService.isCloudServiceAvailable(u.a.KLOUDLESS).then((function(e){return o.isCloudServiceAvailable=e})),this.bbLocalize.loadBundle("components/directives/add-content-button").then((function(){var e="content";o.scope.itemIndex&&null!=o.scope.itemIndex()?e="item-index":"grades"===o.scope.contextArea?e="grades":"course-group"===o.scope.contextArea?e="group":"bbml-editor-single-file"===o.scope.contextArea&&(o.scope.addContentButton.isMenuVisible=!0),o.isMenuVisible=!1,o.addButtonAriaLabel=o.bbLocalize.translateSync({locale:o.bbLocalize.getLocale(o.scope),key:"components.directives.add-content-button.aria-label."+e+".add-button-label"});var t="components.directives.add-content-button.aria-label.content."+(o.isMobile?"yourDevice":"yourComputer");if(o.uploadAriaLabel=o.bbLocalize.translateSync({locale:o.bbLocalize.getLocale(o.scope),key:t}),o.scope.itemName||o.scope.itemType){o.scope.$watchGroup(["itemName()","itemType()","itemIndex()"],(function(t){var n=t[0],i=t[1],s=t[2];if(n||i){var r=i?i+"-":"",a=o.scope.positionAfter?"after":"before";o.addButtonAriaLabel=o.bbLocalize.translateSync({locale:o.bbLocalize.getLocale(o.scope),key:"components.directives.add-content-button.aria-label."+e+".add-button-label-item-name-"+r+a,params:{itemName:n,itemIndex:s},noWrap:!0,noEscape:!0})}}))}})),n.mouseover((function(){o.$rootScope.$broadcast("mouseover-add-content-button"),o.scope.$apply((function(){o.scope.addContentButton.showButton()}))})),this.scope.$on("close-all-add-menus",(function(){o.showMenuOverride?o.isEmptyFolder()&&o.scope.content.ui.isOpen&&(o.scope.addContentButton.isMenuVisible=!0):o.scope.addContentButton.isMenuVisible=!1})),this.scope.showBothButtons&&this.scope.showBothButtons()||this.scope.$on("mouseover-add-content-button",(function(){o.scope.addContentButton.hideButton()})),this.scope.$on("content-item-hover",(function(e,t){o.scope.addContentButton.hideButton();var i=function(){var e;return(e=n.closest(".folder-contents").find("bb-add-content-button").first().is(n)?n.closest(".folder-contents").find(".js-content-div .element-list-row").first():n.closest(".js-content-div").next(".js-content-div").find(".element-list-row").first()).hasClass("element-list-row")||(e=n.next().find(".js-content-div").first().find(".element-list-row")),!!e.is(t.element)&&o.scope.addContentButton.showButton()},s=function(){var e=!1;n.closest(".js-content-div").find(".element-list-row").first().is(t.element)&&(e=!0),n.closest(".folder").is(t.element.parent(".folder"))&&(e=!1),t.element.hasClass("js-parent")&&t.element.hasClass("open")&&(e=!1),o.scope.addContentButton.isButtonVisible!==e&&(o.scope.addContentButton.isButtonVisible=e)};o.scope.showBothButtons&&o.scope.showBothButtons()?i()||s():t.relativeMousePosition.isEqualTo(c.a.Top)?i():s()})),this.scope.$on("content-outline-hover-end",(function(){o.scope.addContentButton.hideButton()})),this.scope.$watch("alwaysShow",(function(e){o.alwaysShow=e})),n.on("drop",(function(e){o.closeMenu(),o.scope.$emit(r.e,o.scope.parentId(),o.scope.positionBefore&&o.scope.positionBefore(),o.scope.positionAfter&&o.scope.positionAfter(),o.scope.depth(),void 0,o.scope.content,r.c.AssignDropTarget)})),this.scope.$on("$stateChangeStart",(function(){o.ultraState.includes("**.content-manage.import.**")?o.isMenuVisible=o.isEmptyFolder():o.isEmptyFolder()?o.isMenuVisible=!0:o.isMenuVisible=!1,o.timeout((function(){o.scope.$apply()}),o.scope)})),this.scope.$on(r.b,(function(){o.closeMenu()})),this.isMenuVisible=this.scope.showMenuOverride,null!=this.scope.showMenuOverride&&this.scope.$watch((function(){return o.scope.showMenuOverride}),(function(e){o.scope.addContentButton.isMenuVisible=e,o.showMenuOverride=e})),this.getInsertLocationData()}return e.prototype.onKeydown=function(e){e.keyCode===h.g&&this.isMenuVisible&&(this.closeMenu(),this.element.find("a.js-show-add-options").focus(),e.stopPropagation(),e.preventDefault())},e.prototype.showButton=function(){this.isButtonVisible=!0},e.prototype.hideButton=function(){this.isButtonVisible=!1},e.prototype.turnOffAlwaysShow=function(){this.alwaysShow=!1},e.prototype.toggleMenu=function(){var e=this;if(this.showMenuOverride)this.showMenuOverride&&this.isEmptyFolder()&&this.scope.$emit("toggle-folder-by-id",this.scope.content.id);else{var t=this.isMenuVisible;t||this.$rootScope.$broadcast("close-all-add-menus"),this.isMenuVisible||this.timeout((function(){e.element.scrollintoview({duration:250})}),this.scope,0,!1),this.isMenuVisible=!t}},e.prototype.isForceShowAddButton=function(){return this.scope.forceShowAddButton},e.prototype.closeMenu=function(){this.isMenuVisible&&this.toggleMenu()},e.prototype.getInsertLocationData=function(){return this.insertLocation={parentId:this.scope.parentId(),positionBefore:this.scope.positionBefore&&this.scope.positionBefore(),positionAfter:this.scope.positionAfter&&this.scope.positionAfter(),depth:this.scope.depth(),contentId:"create"}},e.prototype.assignPosition=function(){this.closeMenu(),this.scope.$emit("bb-bbml-editor-assign-position",this.getInsertLocationData())},e.prototype._addFolderToCourseOutline=function(e,t){var n=this;return this.contentSvc.makeContentInContentTree(this.scope.rootContent&&this.scope.rootContent(),this.contextCourse.courseId,t.parentId,t.positionBefore,t.positionAfter,!0).then((function(o){var i=o.content;return i.parentId=t.parentId,i.positionBefore=t.positionBefore,i.positionAfter=t.positionAfter,i.isAvailable=!1,i.depth=t.depth,i.description="",i.title=e.name,i.contentDetail={"resource/x-bb-folder":{isFolder:!0}},i.courseId=n.contextCourse.courseId,i.contentHandler=m.r.ContentHandler.Folder,i.$save().$asPromise()}))},e.prototype._addContentToCourseOutline=function(e,t,n){var o=this;return this.contentSvc.makeContentInContentTree(this.scope.rootContent&&this.scope.rootContent(),this.contextCourse.courseId,n.parentId,n.positionBefore,n.positionAfter,!0).then((function(e){return e.content})).then((function(i){return i.parentId=n.parentId,i.positionBefore=n.positionBefore,i.positionAfter=n.positionAfter,i.isAvailable=!1,i.depth=n.depth,i.description="",i.title=t.fileName,i.contentHandler=m.r.ContentHandler.File,i.contentDetail={"resource/x-bb-file":{file:{fileName:t.fileName,fileLocation:t.fileLocation}}},e.ui&&e.ui.needUnzip&&(i.contentDetail["resource/x-bb-file"].action=C.Unzip.toString()),i.courseId=o.contextCourse.courseId,i.$asPromise()}))},e.prototype.getTargetId=function(){return"addContentButton-"+this.uuid},e.prototype.getButtonWrapperId=function(){return"addContentButtonWrapper-"+this.uuid},e.prototype.getDirectionalHint=function(){return y.DirectionalHint.bottomCenter},e.prototype.isEmptyFolder=function(){var e=this.scope,t=e.content,n=e.folderNestedButton;return!!(t&&t.isFolder()&&t.children&&0===t.children.length&&n&&n())},e}()},dJ97:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var o=n("D57K"),i=(n("pGPW"),n("w0/N"),n("wHJ2")),s=n("nbDY"),r=n.n(s),a=n("Fvsw"),c=n("yMoE"),l=n("X/qj"),d=n("oi1r"),u=n("o5Lu"),p=n("0JpG"),h=n("pjml"),m=n("fYJU"),b=n("O3Pz"),f=n("cH+F"),g=n("6TNA"),v=n("S6sW"),y=n("pHHL"),C="ultra.grade.display",S=function(e){function t(t,n){var o=e.call(this,t)||this;return o.template=n,o}return Object(o.__extends)(t,e),t.prototype.getTemplateHtml=function(){return this.template.template},t.AttemptStatus=new t("AttemptStatus",{template:b}),t.FinalBase=new t("FinalBase",{template:f}),t.Column=new t("Column",{template:g}),t.Course=new t("Course",{template:v}),t.GradeColor=new t("GradeColor",{template:y}),t}(r.a),w=function(){function e(t,n,o,s,r,a,l,d,u,p){var h=this;this.scope=t,this.attrs=n,this.$q=o,this.$injector=s,this.gradebookPermissionService=a,this.localize=l,this.context=d,this.schemaService=u,this.contextUser=p,this.fullDisplayGrade=e.NO_GRADE_DISPLAY,this.bundlePromise=l.loadBundle("components/directives/grade/display-grade"),this.courseColorClass=t.courseColorClass,this.cursorPointer=t.cursorPointer&&t.cursorPointer(),this.cursorDefault=t.cursorDefault&&t.cursorDefault(),this.isStudent=p.userModel.isStudent(),this.isStudent||a.canViewGrades(this.scope.course&&this.scope.course().id)?(this.scope.$watch("::column",(function(e){if(e){var t=function(e){var t,n=h.scope.$watch("gradeDetail",(function(o){o&&(h.schemaGrade=r.getGradeToDisplay(o.displayGrade,h.scope,h.schema.scaleType),h.setFullDisplayGrade(),(S.GradeColor.isEqualTo(h.scope.gradeType)||S.FinalBase.isEqualTo(h.scope.gradeType))&&(h.gradeDisplayItem=s.instantiate(c.a,{gradeDetail:o,scope:h.scope}),h.scope.$watch("::column",(function(t){t&&h.gradeDisplayItem.init(t,e).then((function(){h.gradeDisplayItem.displayGrade=h.scope.showNotGraded&&h.scope.showNotGraded()?null:o.displayGrade,h.gradeDisplayItem.displayValue&&(h.colorClass=h.gradeDisplayItem.getGradeColor())}))}))),n(),t())}));t=h.scope.$watch("summary",(function(e){h.colorClass="na",e&&(h.schemaGrade=e.averageGradeForStudentsSchemaValue,h.setFullDisplayGrade(),S.FinalBase.isEqualTo(h.scope.gradeType)&&!i.isUndefined(e.averageGradeForStudents)&&(h.colorClass=r.getPercentileColor(e.averageGradeForStudents)),n())}),!0)};h.scope.schema?(h.schema=h.scope.schema,t(h.scope.schema)):u.loadGradeSchema(e).then((function(e){h.schema=e,t()}))}})),S.AttemptStatus.isEqualTo(this.scope.displayType)&&(this.courseColorClass="na",this.attempt?this.attempt.isNeedsGrading()?this.attemptStatus="components.directives.grade.display-grade.pending-grade":this.attempt.isInProgress()&&(this.attemptStatus="components.directives.grade.display-grade.NA"):this.attemptStatus="components.directives.grade.display-grade.NA")):(this.fullDisplayGrade=this.attemptStatus=e.NO_GRADE_DISPLAY,this.colorClass="na")}return e.prototype.setFullDisplayGrade=function(){var t,n=this;if(this.schema&&this.schema.scaleType&&(h.I.ScaleType.Tabular.isEqualTo(this.schema.scaleType)||h.I.ScaleType.Text.isEqualTo(this.schema.scaleType)||h.I.ScaleType.Complete.isEqualTo(this.schema.scaleType)))this.fullDisplayGrade=this.scope.showNotGraded&&this.scope.showNotGraded()?e.NO_GRADE_DISPLAY:this.schemaGrade||e.NO_GRADE_DISPLAY;else if(t=this.scope.showNotGraded&&this.scope.showNotGraded()?e.NO_GRADE_DISPLAY:this.getSchemaGrade(),this.shouldShowPointsPossible()){var o="components.directives.grade.display-grade.";o+=S.Course.isEqualTo(this.scope.gradeType)?"course-score":"score",this.bundlePromise.then((function(){n.fullDisplayGrade=n.localize.translateSync({locale:n.localize.getLocale(n.scope),key:o,params:{grade:t,possible:n.scope.gradeDetail&&n.scope.gradeDetail.pointsPossible||n.scope.column.possible},noWrap:!0})}))}else this.schema&&h.I.ScaleType.Percent.isEqualTo(this.schema.scaleType)&&t!==e.NO_GRADE_DISPLAY?this.bundlePromise.then((function(){n.fullDisplayGrade=n.localize.translateSync({locale:n.localize.getLocale(n.scope),key:"components.directives.grade.display-grade.percent",params:{grade:t},noWrap:!0})})):this.fullDisplayGrade=t},Object.defineProperty(e.prototype,"attempt",{get:function(){return this.scope.attempt&&this.scope.attempt()||this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)},enumerable:!0,configurable:!0}),e.prototype.getSchemaGrade=function(){var t;try{var n=this.schemaGrade.replace(/[^0-9.,]/g,"");t=this.localize.parseNumberSync(n)}catch(e){t=null}return null!=t&&this.localize.formatNumberSync(t,this.scope,{maximumFractionDigits:u.d.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL})||e.NO_GRADE_DISPLAY},e.prototype.shouldShowPointsPossible=function(){return this.schema&&this.schema.scaleType&&h.I.ScaleType.Score.isEqualTo(this.schema.scaleType)&&(h.F.CalculationType.NonCalculated.isEqualTo(this.scope.column.calculationType)||this.scope.gradeDetail&&this.scope.gradeDetail.pointsPossible>0)},e.prototype.getCourseColorClass=function(){return this.courseColorClass},e.prototype.noGradeToDisplay=function(){return this.fullDisplayGrade===e.NO_GRADE_DISPLAY},e.prototype.getNoGradeDisplay=function(){return e.NO_GRADE_DISPLAY},e.prototype.shouldShowRubricButton=function(){return this.scope.showRubricButton&&this.scope.showRubricButton()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()},e.prototype.shouldShowRubricDiv=function(){return this.scope.showRubricDiv&&this.scope.showRubricDiv()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()},e.prototype.shouldShowRubricEvaluation=function(){return this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()&&null!=this.attempt&&this.attempt.isCompleted()&&!this.scope.gradeDetail.isOverrideGrade()},e.NO_GRADE_DISPLAY="--",e.$inject=["scope","attrs","$q","$injector",u.h,l.b,p.serviceName,a.b,d.b,m.b],e}(),I=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="E",this.scope={attempt:"&?",gradeDetail:"=",summary:"=",column:"=",schema:"=?",displayType:"@",finalGrade:"&?",translateKey:"@",courseColorClass:"=",isGroupGradeMultiple:"&?",showNotGraded:"&?",overallGradePeekSref:"@?",showRubricButton:"&?",showRubricDiv:"&?",cursorPointer:"&?",cursorDefault:"&?",course:"&?"},this.link=function(e,t,o){e.displayGrade=n.$injector.instantiate(w,{scope:e,attrs:o}),e.gradeType=S.parse(e.displayType)||S.Column,t.append(n.$compile(e.gradeType.getTemplateHtml())(e))}}return e.$inject=["$injector","$compile"],e}();i.module(C,[u.g,l.a]).directive("bbDisplayGrade",["$injector",function(e){return e.instantiate(I)}])},"dL5/":function(e,t){e.exports='<span class="group-count-directive" bb-load-bundle="components/directives/group/group-count">\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="!$ctrl.isSelfEnrollment()">components.directives.group-count.groups.plural</bb-translate>\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="$ctrl.isSelfEnrollment()">components.directives.group-count.groups.selfEnroll.plural</bb-translate>\n</span>\n'},e7Kn:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var o=n("D57K"),i=(n("1/hr"),n("wHJ2")),s=n("lx16"),r=n("0JpG"),a=n("kC07"),c=n("RPq7"),l=n("nYZ0"),d=n("LdA1"),u=n("sLTT"),p=n("D8d/"),h=n("L+81"),m=n("lr7J"),b=n("aHpC"),f=n("pjml"),g=n("rtZE"),v=n("ZkU4"),y=n("lEL+"),C=n("gkef"),S=n("5MwF"),w=n("oQrK"),I=n("EcEN"),k=n("a8oS"),T=n("W6wm"),E="ultra.directives.contentOutline",D=function(){function t(t,n,o,i,s,r,a,c){var l=this;this.scope=t,this.element=n,this.attrs=o,this.ContentService=i,this.CourseContentModel=s,this.timeout=r,this.windowService=a,this.localizeService=c,this.cloudUploadInProgress={},this.showContentImportProgress=!1,this.LARGE_CONTAINER_SELECTOR=".bb-offcanvas-panel-wrap .panel-wrap",this.SMALL_CONTAINER_SELECTOR=".bb-offcanvas-panel-wrap .panel-wrap .panel-content",this.getContentTrackingId=function(e){return null!=e.id?e.id:(e.ui.tempId||(e.ui.tempId=l.getTempId()),e.ui.tempId)},this.contextArea=t.contextArea,this.addContentButtonLocation=null,this.loadMoreChildren=t.loadMoreChildren,this.parentFolder=t.parentFolder,this.onFileDropHandler=t.onFileDropHandler,this.onMoveHandler=t.onMoveHandler,this.onMoveIntoFolderHandler=t.onMoveIntoFolderHandler,this.canMove=t.canMove&&(!t.contents.permissions||t.contents.permissions.move),this.showMenuOverride=!1,null!=t.contents&&"function"==typeof t.contents.$asPromise&&t.contents.$asPromise().then((function(){l.showMenuOverride=0===t.contents.length})),this.placeholderContent=this.CourseContentModel.$buildRaw({id:this.parentFolder&&this.parentFolder.id&&this.parentFolder.id+"_placeholder",parentId:this.parentFolder&&this.parentFolder.id,contentHandler:f.r.ContentHandler.Unknown.toString(),depth:this.parentFolder&&this.parentFolder.depth&&this.parentFolder.depth+1}),t.$watch("contents.length",(function(o,i){l.showMenuOverride=0===o,l.placeholderContent.id=l.parentFolder&&l.parentFolder.id&&l.parentFolder.id+"_placeholder",l.placeholderContent.parentId=l.parentFolder&&l.parentFolder.id,l.resetMovableAddContentButton(n),o<i&&(t.$emit("content-outline-infinite-scroll-check"),e("#add-button"+l.scope.parentFolder.id).appendTo(e("#add-button-container"+l.scope.parentFolder.id)))})),t.$eval(o.showContentImportProgress)&&this.addImportPlaceholder(),t.$on("bb-drag-start",(function(){l.resetMovableAddContentButton(n)})),t.$on("keyboard-drag-start",(function(){l.resetMovableAddContentButton(n)})),t.$on("showContentImportProgress",(function(e,t,n){"-1"!==n&&l.parentFolder.id!==n||l.addImportPlaceholder()})),t.$on(v.b,(function(e,t){l.cloudUploadInProgress[t]||(l.cloudUploadInProgress[t]=!0)}))}return t.prototype.resetMovableAddContentButton=function(e){this.addContentButtonLocation=null,e.append(this.getMovableAddContentButton())},t.prototype.addImportPlaceholder=function(){var t=this;this.ContentService.getOrMakeContentInContentTree(this.parentFolder,this.parentFolder.courseId,void 0,this.parentFolder.id,"start").then((function(n){n.content.ui.importPlaceholder=!0,t.timeout((function(){e(".placeholder-container").closest(".js-content-div").scrollintoview({duration:300})}),t.scope,0,!1)}))},t.prototype.getScrollContainerSelector=function(){return this.windowService.isLargeBreakpoint()?this.LARGE_CONTAINER_SELECTOR:this.SMALL_CONTAINER_SELECTOR},t.prototype.getScrollForceShowSelector=function(){return"."+a.a},t.prototype.isAllContentsLoaded=function(){return!!(this.scope.contents&&this.scope.contents.paging&&this.scope.contents.paging.count)&&this.scope.contents.length>=this.scope.contents.paging.count},t.prototype.isAddContentButtonUnattached=function(e){return!this.addContentButtonLocation||e!==this.addContentButtonLocation.id},t.prototype.placeAddButton=function(t,n){void 0===n&&(n=!1);var o=this.parentFolder?".movable-add-content-button-folder"+this.parentFolder.id:"";if(this.isAddContentButtonUnattached(t.id)&&this.contextArea!==T.a.Discussions&&void 0!==t.id){var i=!!document.querySelector(".ms-ContextualMenu-list.is-open");!n&&i||(this.getMovableAddContentButton().appendTo(e("#add-button-placeholder"+t.id)),this.addContentButtonLocation=t,this.scope.$broadcast("change-add-content-button-position",{reopen:i}),n&&this.element.find(".movable-add-content-button.movable-add-content-button"+o+" .button-add-content.js-show-add-options").focus())}},t.prototype.getMovableAddContentButton=function(){var e=this.parentFolder?".movable-add-content-button-folder"+this.parentFolder.id:"";return this.element.find(".movable-add-content-button"+e)},t.prototype.getAddButtonLineLabel=function(e){return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.add-content-button.aria-label.content.add-button-label-item-name-after",params:{itemName:e},noWrap:!0,noEscape:!0})},t.prototype.isMobileDevice=function(){return w.a.detect().mobile()},t.prototype.shouldShowMenuOverride=function(){return this.parentFolder&&0===this.parentFolder.depth?!S.a.features.learningModule&&this.showMenuOverride:this.showMenuOverride},t.prototype.shouldShowAddButton=function(){return this.scope.isFirst||this.scope.contents&&0===this.scope.contents.length},t.prototype.hasId=function(e){return this.scope.contents.some((function(t){return t.ui.tempId===e||t.id===e}))},t.prototype.getTempId=function(){for(var e,t=!1;!t;)e=Object(I.v4)(),t=!this.hasId(e);return e},t=Object(o.__decorate)([Object(o.__param)(0,Object(b.b)("scope")),Object(o.__param)(1,Object(b.b)("element")),Object(o.__param)(2,Object(b.b)("attrs")),Object(o.__param)(3,Object(b.b)(l.f)),Object(o.__param)(4,Object(b.b)(f.r.serviceName)),Object(o.__param)(5,Object(b.b)(y.b)),Object(o.__param)(6,Object(b.b)(C.b)),Object(o.__param)(7,Object(b.b)(r.serviceName))],t)}(),x=function(){function e(e,t){var n=this;this.link=e,this.recursionHelper=t,this.replace=!0,this.restrict="E",this.scope={canCreate:"=",contents:"=",contextArea:"=",loadMoreChildren:"=",isFirst:"=",parentFolder:"=",onFileDropHandler:"=?",onMoveHandler:"=",onMoveIntoFolderHandler:"=?",canMove:"=",canCreateAllContents:"=?",canCopyImport:"=?",hideAddMenuOverride:"=?"},this.compile=function(e){return n.recursionHelper.compile("content-outline-directive",e,n.link)},this.template=k}return e.$inject=["link",g.b],e}();i.module(E,[s.a,a.b,u.a,d.a,c.b,l.d,p.a,h.a,m.b,g.a,C.a]).directive("bbContentOutline",["$injector",l.f,function(e,t){return e.instantiate(x,{link:function(t,n,o){t.contentOutline=e.instantiate(D,{scope:t,element:n,attrs:o})}})}])}).call(this,n("5iHu"))},eWdw:function(e,t,n){},gFY1:function(e,t){e.exports='<p class="summary">{{bodyContent().eventDescription}}</p>\n<bb-translate ng-if="!(bodyContent().isAllDayEvent)" translate-values="{ datetime: \'{{bodyContent().localizedEventDate}}\' }">base.stream.entryBody.calendar.eventDate</bb-translate>\n<bb-translate ng-if="bodyContent().isAllDayEvent" translate-values="{ date: \'{{bodyContent().localizedEventDate}}\' }">base.stream.entryBody.calendar.allDayEventDate</bb-translate>\n'},gORw:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-move-item-up-down",use:"icon-small-move-item-up-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-move-item-up-down"><path d="M5 11V3M7 4L5 2 3 4M11 5v8M9 12l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"gW+2":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-documents",use:"icon-small-documents-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-documents"><path d="M1 4h7.0084L11 7v8H1V4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8.0005 4v3h3.0015M4 8h1M4 11h3.9722" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 1h11v12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},ga7A:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("wHJ2"),i=n("pjml"),s=n("vhkR"),r=n("X455"),a=n("Youf"),c="ultra.components.directives.content.contentItem.contentItemType.contentItemLtilaunch",l=function(){function e(e,t,n){this.scope=e,this.ltiService=t,this.contextCourseMembership=n}return e.prototype.ltiLaunch=function(){var e=this;if(!this.scope.content.getContentDisplay().isLtiLink())throw new Error("Attempted to LTI launch a non-LTI content item. "+this.scope.content.contentHandler.toString());this.ltiService.ltiLaunch({courseId:this.scope.content.courseId,contentId:this.scope.content.id,content:this.scope.content,showPreLaunchPanel:!0}).then((function(){return e.markStart()}))},e.prototype.ltiLinkNeedsApproval=function(){var e=this.ltiService.getDomainConfigStatusType(this.scope.content);return i.N.LTIStatusType.NeedsApproval.isEqualTo(e)},e.prototype.markStart=function(){this.contextCourseMembership.isActAsInstructorMembership()||this.scope.content.state===i.r.StateType.Started||this.scope.content.updateState(i.r.StateType.Started,!0)},e.$inject=["scope",s.c,r.d],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=a,this.scope=!1,this.link=function(e,n,o){e.contentItemLtiLaunch=t.$injector.instantiate(l,{scope:e,element:n,attrs:o})}}return e.$inject=["$injector"],e}();o.module(c,[s.b,r.a]).directive("bbContentItemLtilaunch",["$injector",function(e){return e.instantiate(d)}])},hBzJ:function(e,t){e.exports='<bb-modal class="notice notification {{bbNoticeClass}}"\n          modal-title-key="components.directives.notice.modalTitle"\n          analytics-id-tag-prefix="components.directives.notice">\n  <div name="modal-contents">\n    <ul class="notifications" ng-repeat="item in notice.getNotices()">\n      <li class="element-card">\n        <bb-avatar ng-if="!!(item.entrySpecificData && item.entrySpecificData.streamUser)"\n                   user="item.entrySpecificData.streamUser" auto-update="true"></bb-avatar>\n        <div ng-switch="item.icon" ng-if="!(item.entrySpecificData && item.entrySpecificData.streamUser)" class="element-image">\n          <bb-ui-icon-grades ng-switch-when="grades" color="primary"></bb-ui-icon-grades>\n          <bb-ui-icon-message ng-switch-when="message" color="primary"></bb-ui-icon-message>\n          <bb-ui-icon-post ng-switch-when="post" color="primary"></bb-ui-icon-post>\n          <bb-ui-content-icon ng-switch-default icon="item.icon" color="primary"></bb-ui-content-icon>\n        </div>\n\n        <div class="element-details" >\n          <div class="context"></div>\n          <div class="name">\n            <ng-switch on="(item.body.stateRef && \'linkToPeekState\') ||\n                     (item.body.externalRef && \'linkToExternalUrl\') || \'doNotLink\'">\n              <a ng-switch-when="linkToPeekState"\n                 ng-click="notice.modalDismiss()"\n                 bb-peek-sref="{{item.body.stateRef}}"\n                 ng-bind-html="item.title"\n                 analytics-id="components.directives.notice.peek.state.link"></a>\n              <a ng-switch-when="linkToExternalUrl" ng-click="notice.modalDismiss()"\n                 target="{{item.body.externalRef.target ? item.body.externalRef.target : _self}}"\n                 ng-bind-html="item.title"\n                 ng-href="{{item.body.externalRef.href}}"\n                 analytics-id="components.directives.notice.external.url.link"></a>\n              <span ng-switch-when="doNotLink" ng-bind-html="item.title"></span>\n            </ng-switch>\n          </div>\n          <div class="content">\n            <bb-stream-entry-body type="item.body.type" content="item.body.content"></bb-stream-entry-body>\n          </div>\n        </div>\n      </li>\n    </ul>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button dismiss-message js-primary-button"\n          ng-click="notice.modalDismiss()"\n          analytics-id="components.directives.notice.dismiss">\n    <bb-translate>components.directives.notice.dismiss</bb-translate>\n  </button>\n</bb-modal>\n'},haDg:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-announcements",use:"icon-medium-announcements-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-announcements"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M5 5h12v9H5z" /><path stroke-width="2" stroke-linejoin="round" d="M1 5h4v9H1z" /><path d="M8 14l3 8h4l-3-8M17 14l6 4V1l-6 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},hpcp:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("5ikY"),s="ultra.components.directives.bbUiIcon.Blog";Object(o.a)(i.a,s,"bbUiIconBlog")},iG2q:function(e,t,n){"use strict";var o=n("D57K"),i=n("nsO7"),s=n("wHJ2"),r=n("nbDY"),a=n.n(r),c=n("7C3+"),l=n("/C4M"),d=n("Fvsw"),u=n("pjml"),p=n("0JpG"),h=n("g66W"),m=n("av75"),b="announcementStreamEntryTransformer",f=function(e){function t(n,o,i,s){var r=e.call(this,t.SUPPORTED_EVENT_TYPES)||this;return r.bbLocalize=n,r.context=o,r.CourseModel=i,r.remove=function(){var e=this;return s.all(this.notificationIds.map((function(t){return i.$new(e.courseId).notifications.$new(t).$destroy().$allow([404]).$asPromise()})))},r}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t);return n.icon="announcement",n.isGroupable=!1,n.isImportant=!1,n.remove=this.remove,this.processDetails(n,t),n},t.prototype.processDetails=function(e,t){var n=this,o=t.itemSpecificData.notificationDetails,i="SYSTEM"===o.announcementType;i&&this.context.getBrand().$then((function(t){e.header=n.bbLocalize.translateSync({locale:null,key:"base.stream.institution",params:{brand:t.bannerText}})})),e.title=o.announcementTitle,e.body={type:m.a.SimpleText,content:{bodyText:h.c(o.contentExtract),fullText:h.d(o.announcementBody)}},i?e.body.stateRef='announcement({streamEntryId:"'+e.id+'"})':t.ui&&t.ui.streamCourse&&t.ui.streamCourse.isUltra()?(e.body.stateRef="announcement-detail("+s.toJson({courseId:o.courseId,announcementId:o.sourceId,mode:l.PanelModeEnum.VIEW,courseName:e.header})+")",e.notificationIds=o.notificationIds,e.body.content.sourceId=o.sourceId):this.setLegacyCourseUrlRefToBody(t,e)},t.SUPPORTED_EVENT_TYPES=["AN:AN_AVAIL","AN_AVAIL"],t.$inject=[p.serviceName,d.b,u.o.serviceName,"$q"],t}(c.a);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(f);s.module(c.g).service(b,f);var g=function(e){function t(n){var o=e.call(this,t.SUPPORTED_PROVIDERS)||this;return o.bbLocalize=n,o}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t);return n.icon="calendar",this.processDetails(n,t.itemSpecificData.calendarDetails),n},t.prototype.processDetails=function(e,t){switch(u.h.KnownCalendar.parse(t.calendarId)){case u.h.KnownCalendar.INSTITUTION:e.header=this.bbLocalize.translateSync({locale:null,key:"base.stream.calendar.institution"});break;case u.h.KnownCalendar.PERSONAL:e.header=this.bbLocalize.translateSync({locale:null,key:"base.stream.calendar.personal"})}e.title=this._getTitle(t.title);var n=new Date(t.startDate),o=!1;if(t.endDate){var i=new Date(t.endDate);o=0===n.getHours()&&0===n.getMinutes()&&23===i.getHours()&&59===i.getMinutes()}e.contextualDate=n;var s={eventDescription:t.description,localizedEventDate:o?this.bbLocalize.formatDateSync(n,p.ILocaleDateFormat.Short):this.bbLocalize.formatDatetimeSync(n,p.ILocaleDatetimeFormat.Short),eventStartDate:n,isAllDayEvent:o};e.body={type:m.a.Calendar,content:s};var r=t.canEdit?"event-edit":"event-view";e.body.stateRef=[r,"({",'calendarId: "',t.calendarId,'",','itemSourceType: "',t.itemSourceType,'",','itemSourceId: "',t.itemSourceId,'"',"})"].join("")},t.prototype._getTitle=function(e){return this.bbLocalize.translateSync({locale:null,key:"base.stream.entryTitle.calendar.event",params:{entryTitle:e},noWrap:!0,noEscape:!0})},t.SUPPORTED_PROVIDERS=["bb_calendar"],t.$inject=[p.serviceName],t}(c.a);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(g);angular.module(c.g).service("calendarStreamEntryTransformer",g);var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.Blog=new t("blog"),t.Journal=new t("journal"),t.Wiki=new t("wiki"),t}(a.a),y=function(e){function t(t,n){var o=e.call(this,t)||this;return o.learnEntryType=t,o.resourceKey=n,o}return Object(o.__extends)(t,e),t.EntryPosted=new t("EP","entryPosted"),t.EntryEdited=new t("EE","entryEdited"),t.EntryDeleted=new t("ED","entryDeleted"),t.CommentPosted=new t("CP","commentPosted"),t.CommentDeleted=new t("CD","commentDeleted"),t}(a.a),C=function(e){function t(n){return e.call(this,n,t.SUPPORTED_PROVIDERS)||this}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t);n.isGroupable=!0,n.hasParticipated=t.se_participated,n.collabAuthorUser=t.ui.streamUser;var o=t.itemSpecificData.blogDetails,i=t.itemSpecificData.wikiDetails,s=o||i;o?(n.collabType=o.isJournal?v.Journal:v.Blog,n.collabId=o.coreIdContainer,n.collabTitle=o.blogName,o.isJournal?n.eventType="JR_".concat(n.eventType):n.eventType="BL_".concat(n.eventType)):i&&(n.collabType=v.Wiki,n.collabId=i.coreIdContainer,n.collabTitle=i.wikiName),this.processDetails(n,s),this.setLegacyCourseUrlRefToBody(t,n);var r=s.others;if(r&&r.length>0){var a=n;return n.collabAuthorUser?a.authorIds=r.concat([n.collabAuthorUser.id]):a.authorIds=r,a.groupedEntryIds=[n.id],this._setGroupedEntryTitle(a,n,a.authorIds.length),a}return this._setEntryTitle(n),n},t.prototype.processDetails=function(e,t){e.collabEventType=y.parse(t.eventType),e.collabEntryId=t.coreId,e.collabEntryTitle=t.title,e.icon=e.collabType.toString(),e.body={type:m.a.SimpleText,content:{bodyText:this._getBodyText(t)}}},t.prototype._setEntryTitle=function(e){var t=this,n=e.collabEventType.resourceKey;n||(e.title=e.collabEntryTitle);var o=this.getTitle(e),i=["base.stream.entryTitle",e.collabType,n];e.collabAuthorUser?this.getUserDisplayName(e.collabAuthorUser).then((function(n){i.push("withName"),e.title=t.bbLocalize.translateSync({locale:null,key:i.join("."),params:{entryTitle:o,userName:n}})})):(i.push("noName"),e.title=this.bbLocalize.translateSync({locale:null,key:i.join("."),params:{entryTitle:o,userName:null}}))},t.prototype.getTitle=function(e){return this._isCommentEventType(e.collabEventType)?e.collabEntryTitle:e.collabTitle},t.prototype._getBodyText=function(e){return this._isCommentEventType(e.eventType)?e.contentExtract:e.contentExtract?this.bbLocalize.translateSync({locale:null,key:"base.stream.entryBody.withHeader",noEscape:!0,params:{header:e.title,body:e.contentExtract}}):e.title},t.prototype._isCommentEventType=function(e){return y.CommentPosted.isEqualTo(e)||y.CommentDeleted.isEqualTo(e)},t.prototype.group=function(e){var n=this,o=c.f;if(!o.validateEntriesForGrouping(e,t.SUPPORTED_PROVIDERS))throw new c.e({message:"Could not group stream entries"});var i=[],s={};return e.forEach((function(e){var o=n._isCommentEventType(e.collabEventType),r=o?e.collabEntryId:e.collabId;if(!r&&o&&v.Wiki.isEqualTo(e.collabType)&&(r=e.collabEntryTitle),r){var a=[e.collabType,e.collabEventType,r].join(t.ENTRY_GROUPING_KEY_DELIMITER);(s[a]=s[a]||[]).push(e)}else i.push(e)})),Object.keys(s).forEach((function(e){var t=s[e];if(t.length>1){var r=o.getMostRecentEntry(t),a=n.distinctAuthorIds(t),c=r.courseId,l=o.getGroupedEntryIds(t),d={id:n.generateGroupedEntryId(c,e),groupedEntryIds:l,collabType:r.collabType,collabEventType:r.collabEventType,collabId:r.collabId,collabEntryId:r.collabEntryId,collabTitle:r.collabTitle,collabEntryTitle:r.collabEntryTitle,collabAuthorUser:r.collabAuthorUser,authorIds:a,entrySpecificData:r.entrySpecificData,type:r.type,providerId:r.providerId,eventType:r.eventType,notificationCreationDate:r.notificationCreationDate,icon:r.icon,isNew:o.hasNewEntry(t),isImportant:!1,isGroupable:!0,hasParticipated:t.some((function(e){return e.hasParticipated})),courseId:c,isOrg:r.isOrg,header:r.header,headerSubtitle:r.headerSubtitle,title:null,body:r.body};n._setGroupedEntryTitle(d,r,a.length),i.push(d)}else i=i.concat(t)})),i},t.prototype._setGroupedEntryTitle=function(e,t,n){var o=this,s=this.getTitle(t),r=["base.stream.groupedEntries",t.collabType,t.collabEventType.resourceKey];if(t.collabAuthorUser)this.getUserDisplayName(t.collabAuthorUser).then((function(t){var a=n-1,c=a>0?"plural":"";r.push("withName",c),e.title=o.bbLocalize.translateSync({locale:null,key:i.compact(r).join("."),params:{entryTitle:s,userName:t,numUsers:a}})}));else{var a=n,c=a>0?"plural":"";r.push("noName",c),e.title=this.bbLocalize.translateSync({locale:null,key:i.compact(r).join("."),params:{entryTitle:s,userName:null,numUsers:a}})}},t.prototype.generateGroupedEntryId=function(e,n){return["collabGroupEntry",e,n].join(t.ENTRY_GROUPING_KEY_DELIMITER)},t.prototype.distinctAuthorIds=function(e){return c.f.getDistinctAuthorIds(e,(function(e){var t=e;return t.collabAuthorUser&&t.collabAuthorUser.id||"unknown"}))},t.SUPPORTED_PROVIDERS=["bb_blog","bb_Wiki"],t.ENTRY_GROUPING_KEY_DELIMITER="##",t.$inject=[p.serviceName],t}(c.d);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(C);s.module(c.g).service("collabStreamEntryTransformer",C);var S=n("vhkR"),w=n("Is+C"),I=n("4nF1"),k=n("TnpK"),T=n("tdYh"),E=n("Q/M7"),D=n("f4B+"),x=n("3Bw1"),O=n("SeO5"),P=function(e){function t(n,o,i,s,r,a,c,l){var d=e.call(this,{CO:[t.TYPE]},l)||this;return d.bbLocalize=n,d.CourseModel=o,d.ltiService=i,d.scormService=s,d.ultraState=r,d.$modal=a,d.$rootScope=c,d._GROUPED_ENTRY_TITLE="base.stream.groupedEntries.courseContent.title",d.SUPPORTED_GROUP_PEEK_TYPES=[u.r.ContentHandler.ExternalLink,u.r.ContentHandler.File,u.r.ContentHandler.LtiPlacement,u.r.ContentHandler.LtiLink,u.r.ContentHandler.PartnerCloud],d}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t);return n.isGroupable=!0,n.icon="",n.streamCourse=t.ui.streamCourse,this.processDetails(n,t.itemSpecificData),this.setLegacyCourseUrlRefToBody(t,n),n},t.prototype.processDetails=function(e,t){var n=this,o=t.notificationDetails,i=t.contentDetails;e.title=this.bbLocalize.translateSync({locale:null,key:"base.stream.entryTitle.avail",params:{entryTitle:o.title},noWrap:!0,noEscape:!0}),e.body={type:m.a.SimpleText,content:{bodyText:e.streamCourse.isUltra()?D.a.HTML(o.contentExtract||""):o.contentExtract}};var s,r=I.a.normalize(i&&i.contentHandler);switch(s=u.r.ContentHandler.parse(r),e.entrySpecificData={contentItem:{id:o.courseContentId,courseId:e.courseId,contentHandler:s,title:o.title}},s){case u.r.ContentHandler.Discussion:e.body.stateRef=c.f.getDiscussionPanelStateRef(o.courseContentId,e.courseId);break;case u.r.ContentHandler.ExternalLink:var a=i.contentSpecificExtraData;a&&(a=T.a.test(a)?a:"http://"+a,e.body.externalRef={target:"_blank",href:a});break;case u.r.ContentHandler.LtiPlacement:case u.r.ContentHandler.LtiLink:case u.r.ContentHandler.PartnerCloud:e.body.clickHandler=function(){n.ltiService.ltiLaunch({courseId:e.courseId,contentId:o.courseContentId,showPreLaunchPanel:!0})};break;case u.r.ContentHandler.RusticiScorm:e.body.clickHandler=function(){n.scormService.scormLaunch({courseId:e.courseId,contentId:o.courseContentId,showPreLaunchPanel:!0})};break;case u.r.ContentHandler.File:var l=i.contentSpecificExtraData;l&&(e.entrySpecificData.contentItem.contentDetail={},e.entrySpecificData.contentItem.contentDetail[u.r.ContentHandler.File.toString()]={file:{mimeType:l}});var d=i.contentSpecificFileData;d&&(e.body.externalRef={target:"_blank",href:E.c(d)});break;case u.r.ContentHandler.Folder:e.entrySpecificData.contentItem.contentDetail={};var p=t.contentDetails&&t.contentDetails.isBbPage;e.entrySpecificData.contentItem.contentDetail[u.r.ContentHandler.Folder.toString()]={isBbPage:p,isFolder:t.contentDetails&&t.contentDetails.isFolder},p&&this.setStreamEntryClickToGoToDestination(e,o,(function(){n.ultraState.goPeekState(I.b.EDIT_STATE_SREF,{id:o.courseContentId,courseId:e.courseId})}));break;case u.r.ContentHandler.Journal:e.body.stateRef=c.f.getJournalPanelStateRef(o.courseContentId,e.courseId)}e.body.externalRef||e.body.stateRef||e.body.clickHandler||this.setCourseUrlRefToBody(e)},t.prototype.setStreamEntryClickToGoToDestination=function(e,t,n){var o=this;e.body.clickHandler=function(){o.CourseModel.$new(t.courseId).contents.$find(t.courseContentId).$allow(["404","403"]).$then((function(t){if(t.$response){var i=t.$response.status;404===i?o.$modal.open({template:x,scope:null}).result.then((function(){o.$rootScope.$emit("stream-entry-parent-item-not-found",e)})):403===i?o.$modal.open({template:O,scope:null}).result.then((function(){o.$rootScope.$emit("stream-entry-parent-item-not-found",e)})):n()}}))}},t.prototype.group=function(e){var n=c.f,o=t.TYPE;if(n.validateEntriesForGrouping(e,[o])){var i=n.getMostRecentEntry(e),s=i.courseId,r=this.generateGroupedEntryId(s),a={id:r,groupedEntryIds:n.getGroupedEntryIds(e),type:o,providerId:i.providerId,notificationCreationDate:i.notificationCreationDate,icon:"document-multiple",isNew:n.hasNewEntry(e),isImportant:!1,isGroupable:!0,courseId:s,isOrg:i.isOrg,streamCourse:i.streamCourse,header:i.header,title:this.bbLocalize.translateSync({locale:null,key:this._GROUPED_ENTRY_TITLE}),entryContents:this.getGroupedEntryContents(e)};return a.streamCourse.isUltra()&&this.areAllSupportedGroupPeekEntries(a.entryContents)?a.body={stateRef:'content-group({streamEntryId:"'+r+'"})'}:this.setCourseUrlRefToBody(a),[a]}throw new c.e({message:"Could not group stream entries"})},t.prototype.getGroupedEntryContents=function(e){var t=[];return e&&Array.isArray(e)&&e.forEach((function(e){var n=e.entryContents;n?t=t.concat(n):t.push(e)})),t},t.prototype.generateGroupedEntryId=function(e){return["courseContentGroupEntry",t.TYPE,e].join("-")},t.prototype.setCourseUrlRefToBody=function(e){e.body=e.body||{},null!==e.streamCourse&&(e.body.stateRef=c.f.getCoursePanelStateRef(e.streamCourse.id))},t.prototype.areAllSupportedGroupPeekEntries=function(e){var t=this;return e.every((function(e){return I.a.matchesHandlers(e.entrySpecificData.contentItem.contentHandler.toString(),t.SUPPORTED_GROUP_PEEK_TYPES)}))},t.TYPE="CO:CO_AVAIL",t.$inject=[p.serviceName,u.o.serviceName,S.c,w.c,k.d,"$modal","$rootScope","$q"],t}(c.c);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(P);s.module(c.g).service("courseContentStreamEntryTransformer",P);var A=n("KBr+"),$=function(e){function t(n,o){var i=e.call(this,t.SUPPORTED_PROVIDERS)||this;return i.bbLocalize=n,i.CourseBatchLoader=o,i}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t);return n.icon="survey",this.processDetails(n,t.itemSpecificData.learnDeploymentDetails),n},t.prototype.processDetails=function(e,t){t.courseId?this.CourseBatchLoader.load(t.courseId).then((function(t){e.courseId=t.id,e.header=t.name})):e.header=this.bbLocalize.translateSync({locale:null,key:"base.stream.institution"}),e.title=this.bbLocalize.translateSync({locale:null,key:"base.stream.entryTitle.outcomes.bb_deployment",params:{entryTitle:t.instrumentName},noWrap:!0,noEscape:!0}),e.body={type:m.a.SimpleText,content:{bodyText:this.bbLocalize.translateSync({locale:null,key:"base.stream.entryBody.bb_deployment"})}},t.deploymentUrl&&(e.body.externalRef={target:"new",href:t.deploymentUrl})},t.SUPPORTED_PROVIDERS=["bb_deployment"],t.$inject=[p.serviceName,A.b],t}(c.a);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}($);s.module(c.g).service("deploymentStreamEntryTransformer",$);var M=function(e){function t(t,n,o,i,s){var r=e.call(this,t)||this;return r.learnEntryType=t,r.resourceKey=n,r.entryTitlePropertyName=o,r.entryTitleContainsUsersName=i,r.groupingIdPropertyName=s,r}return Object(o.__extends)(t,e),t.prototype.isGroupable=function(){return null!=this.groupingIdPropertyName},t.prototype.getGroupingId=function(e){return e[this.groupingIdPropertyName]},t.prototype.getEntryTitle=function(e){return e[this.entryTitlePropertyName]},t.prototype.isThreadEventType=function(){return t.ThreadPosted.isEqualTo(this)||t.ThreadSubscribed.isEqualTo(this)||t.ThreadUnsubscribed.isEqualTo(this)},t.ForumCreated=new t("FC","forumCreated","forumName",!1,null),t.ForumSubscribed=new t("FS","forumSubscribed","forumName",!0,"forumId"),t.ForumUnsubscribed=new t("FU","forumUnsubscribed","forumName",!0,"forumId"),t.PostRated=new t("PR","postRated","msgTitle",!0,"msgId"),t.ReplyPosted=new t("RP","replyPosted","threadTitle",!0,"threadId"),t.ThreadPosted=new t("TP","threadPosted","threadTitle",!0,null),t.ThreadSubscribed=new t("TS","threadSubscribed","threadTitle",!0,"threadId"),t.ThreadUnsubscribed=new t("TU","threadUnsubscribed","threadTitle",!0,"threadId"),t}(a.a),L=function(e){function t(n){return e.call(this,n,t.SUPPORTED_PROVIDERS)||this}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=t.itemSpecificData.discussionboardDetails;if(n.isIndirect)return null;var o=e.prototype.convert.call(this,t);return o.hasParticipated=t.se_participated,this.processDetails(o,n),this.setLegacyCourseUrlRefToBody(t,o),o},t.prototype.processDetails=function(e,n){var o=M.parse(n.eventType),i=o.isThreadEventType();e.icon=t.ICON,e.isGroupable=!0,e.forumId=n.coreIdContainer,e.forumName=n.forumName,e.threadId=i?n.coreId:n.threadId,e.threadTitle=i?n.title:n.threadName,e.msgEventType=o,e.msgId=n.coreId,e.msgTitle=n.title,e.body={type:m.a.SimpleText,content:{bodyText:n.contentExtract},stateRef:c.f.getDiscussionPanelStateRef(n.courseContentId,e.courseId)},this._setTitle(e)},t.prototype._setTitle=function(e){var t=this,n=["base.stream.entryTitle.disc",e.msgEventType.resourceKey],o=e.msgEventType.entryTitleContainsUsersName,i=e.msgEventType.getEntryTitle(e);o&&e.entrySpecificData&&e.entrySpecificData.streamUser?this.getUserDisplayName(e.entrySpecificData.streamUser).then((function(o){n.push("withName"),e.title=t.bbLocalize.translateSync({locale:null,key:n.join("."),params:{userName:o,entryTitle:i}})})):(o&&n.push("noName"),e.title=this.bbLocalize.translateSync({locale:null,key:n.join("."),params:{userName:null,entryTitle:i}}))},t.prototype.group=function(e){var n=this,o=c.f;if(!o.validateEntriesForGrouping(e,t.SUPPORTED_PROVIDERS))throw new c.e({message:"Could not group stream entries"});var i=[],s={};return e.forEach((function(e){var n=!1;if(e.msgEventType.isGroupable()){var o=e.msgEventType.getGroupingId(e);if(o){n=!0;var r=[o,e.msgEventType].join(t.ENTRY_GROUPING_KEY_DELIMITER);(s[r]=s[r]||[]).push(e)}}n||i.push(e)})),Object.keys(s).forEach((function(e){var r=e.split(t.ENTRY_GROUPING_KEY_DELIMITER),a=r[0],c=r[1],l=s[e];if(l.length>1){var d=o.getMostRecentEntry(l),u=d.courseId,p=o.getGroupedEntryIds(l),h=n.distinctAuthorIds(l),m={id:n.generateGroupedEntryId(u,c,a),forumId:d.forumId,forumName:d.forumName,threadId:d.threadId,threadTitle:d.threadTitle,entrySpecificData:d.entrySpecificData,msgId:d.msgId,msgTitle:d.msgTitle,msgEventType:d.msgEventType,groupedEntryIds:p,authorIds:h,type:d.type,providerId:d.providerId,notificationCreationDate:d.notificationCreationDate,icon:t.ICON,isNew:o.hasNewEntry(l),isImportant:!1,isGroupable:!0,hasParticipated:l.some((function(e){return e.hasParticipated})),courseId:u,isOrg:d.isOrg,header:d.header,headerSubtitle:d.headerSubtitle,title:null,body:d.body};n._setGroupedEntryTitle(m,h.length,d.msgEventType.getEntryTitle(d)),i.push(m)}else i=i.concat(l)})),i},t.prototype._setGroupedEntryTitle=function(e,t,n){var o=this,s=["base.stream.groupedEntries.disc",e.msgEventType.resourceKey];if(e.entrySpecificData&&e.entrySpecificData.streamUser)this.getUserDisplayName(e.entrySpecificData.streamUser).then((function(r){var a=t-1,c=a>0?"plural":"";s.push("withName",c),e.title=o.bbLocalize.translateSync({locale:null,key:i.compact(s).join("."),params:{userName:r,numUsers:a,entryTitle:n}})}));else{var r=t,a=r>0?"plural":"";s.push("noName",a),e.title=this.bbLocalize.translateSync({locale:null,key:i.compact(s).join("."),params:{userName:null,numUsers:r,entryTitle:n}})}},t.prototype.generateGroupedEntryId=function(e,t,n){return["discBoardGroupEntry",e,t,n].join("-")},t.prototype.distinctAuthorIds=function(e){return c.f.getDistinctAuthorIds(e,(function(e){return e.entrySpecificData&&e.entrySpecificData.streamUser&&e.entrySpecificData.streamUser.id||"unknown"}))},t.SUPPORTED_PROVIDERS=["bb_disc"],t.ICON="discussion",t.ENTRY_GROUPING_KEY_DELIMITER="##",t.$inject=[p.serviceName],t}(c.d),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(L);s.module(c.g).service("discussionBoardStreamEntryTransformer",L);var B=n("Sa5G"),R=n("P2dS"),N=n("8jzW"),j=n("KtUo"),F=n("A0nf"),G=n("+O05"),U=function(e){function t(n,o,i,s,r,a,c,l,d){var u=e.call(this,t.SUPPORTED_EVENT_TYPES,d)||this;return u.bbLocalize=n,u.CourseModel=i,u.ColumnModel=s,u.scoreProviderHelper=r,u.gradeColumnCategoryService=a,u.$modal=c,u.$rootScope=l,u.serverTime=o.getServerTime(),u.remove=function(){var e=this;return d.all(this.notificationIds.map((function(t){return i.$new(e.courseId).notifications.$new(t).$destroy().$allow([404]).$asPromise()})))},u}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t),o=this._getEvent(n.type),i=t.itemSpecificData.notificationDetails,s=t.itemSpecificData.contentDetails;return"OVERDUE"===o&&u.sb.NotificationRecipientType.Sender.isEqualTo(i.recipientType)?null:(n.isImportant="OVERDUE"===o,n.isImportant&&(n.remove=this.remove),n.isGroupable=!1,this.processDetails(n,i,s),this.setLegacyCourseUrlRefToBody(t,n),n)},t.prototype.processDetails=function(e,t,n){this._setDueDateDependentProperties(e,t,n),this._setGradebookColumn(e,t)},t.prototype._getEvent=function(e){var t=e.substr(e.indexOf(":")+1);return t.indexOf("_AVAIL")>0?"AVAIL":t},t.prototype._getTitle=function(e,t,n){var o="DUE"===e&&t&&0===j.a(t,this.serverTime)?"dueToday":e.toLowerCase();return this.bbLocalize.translateSync({locale:null,key:"base.stream.entryTitle."+o,params:{entryTitle:n},noWrap:!0,noEscape:!0})},t.prototype._setDueDateDependentProperties=function(e,t,n){var o=t.dueDate&&new Date(t.dueDate),i=this._getEvent(e.type);e.contextualDate="AVAIL"===i?null:o,e.title=this._getTitle(i,e.contextualDate,t.title),e.body={type:m.a.DueDatedContent},o&&this.bbLocalize.formatDatetime(o,c.f.DUE_DATE_FORMAT).then((function(t){e.body.content={localizedDueDate:t}})),this._setClickHandler(e,t,n)},t.prototype._setClickHandler=function(e,t,n){var o=this,i=B.g.parse(n&&n.contentHandler);i&&t.courseId&&t.courseContentId&&(this.scoreProviderHelper.openStateRef(i,{contentId:t.courseContentId,courseId:t.courseId})&&(e.body.clickHandler=function(){o.CourseModel.$new(t.courseId).contents.$find(t.courseContentId).$allow(["404","403"]).$then((function(n){if(n.$response){var s=n.$response.status;404===s?o.$modal.open({template:x,scope:null}).result.then((function(){o.$rootScope.$emit("stream-entry-parent-item-not-found",e)})):403===s?o.$modal.open({template:O,scope:null}).result.then((function(){o.$rootScope.$emit("stream-entry-parent-item-not-found",e)})):o.scoreProviderHelper.openStateRef(i,{contentId:t.courseContentId,courseId:t.courseId,isCollectExternalSubmissions:G.a.isExternalSubmissionsAssessment(n)},N.a.GoToState)}}))}))},t.prototype._setGradebookColumn=function(e,t){if(t.secondarySourceType){var n=z.SOURCETYPE_TO_PROVIDER_MAP[t.secondarySourceType],o=u.F.CalculationType.parse(t.calculationType);n&&(e.entrySpecificData={gradebookColumn:this.ColumnModel.$build({scoreProviderHandle:n,calculationType:o})})}if(!s.isUndefined(t.gradebookCategoryName)&&!s.isUndefined(t.isGradebookCategoryUserDefined)){var i=this.gradeColumnCategoryService.getIconByGradebookCategory(t.gradebookCategoryName,t.isGradebookCategoryUserDefined);i&&(e.icon=i)}},t.SUPPORTED_EVENT_TYPES={AS:["AS:DUE","AS:OVERDUE","AS:AS_AVAIL","AS:AS_GA_AVAIL","AS:AS_AVAIL_RESEND","AS:AS_GA_AVAIL_RESEND"],GB:["GB:DUE","GB:OVERDUE"],SU:["SU:DUE","SU:OVERDUE","SU:SU_AVAIL"],SC:["SC:DUE","SC:OVERDUE","SC:SC_AVAIL","SC:SC_AVAIL_RESEND"],TE:["TE:DUE","TE:OVERDUE","TE:TE_AVAIL","TE:TE_AVAIL_RESEND"],UA:["UA:DUE","UA:OVERDUE","UA:UA_AVAIL","UA:UA_AVAIL_RESEND"]},t.SOURCETYPE_TO_PROVIDER_MAP={BL:F.a.Blog,JN:F.a.Blog,DF:F.a.Discussion,DT:F.a.Discussion,SC:F.a.Scorm,UA:F.a.UltraAssignment,WK:F.a.Wiki},t.$inject=[p.serviceName,d.b,u.o.serviceName,u.F.serviceName,N.c,R.b,"$modal","$rootScope","$q"],t}(c.c),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(U);s.module(c.g).service("duedatedContentStreamEntryTransformer",U);var H=function(e){function t(n){var o=e.call(this,t.SUPPORTED_PROVIDERS)||this;return o.bbLocalize=n,o}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t);return n.icon=c.b.DEFAULT_ICON,n.header=this.bbLocalize.translateSync({locale:null,key:"base.stream.goalsAndAssessment"}),this.processDetails(n,t.itemSpecificData.evidenceDetails),n},t.prototype.processDetails=function(e,t){e.title=this.bbLocalize.translateSync({locale:null,key:"base.stream.entryTitle.outcomes.bb-evidence-collection",params:{entryTitle:t.title},noWrap:!0,noEscape:!0}),t.sessionDate&&(e.notificationCreationDate=new Date(t.sessionDate)),t.dueDate&&(e.contextualDate=new Date(t.dueDate),e.body={type:m.a.DueDatedContent},this.bbLocalize.formatDatetime(e.contextualDate,c.f.DUE_DATE_FORMAT).then((function(t){e.body.content={localizedDueDate:t}}))),t.evidenceUrl&&(e.body||(e.body={type:m.a.SimpleText}),e.body.externalRef={target:"new",href:E.c(t.evidenceUrl)})},t.SUPPORTED_PROVIDERS=["bb-evidence-collection"],t.$inject=[p.serviceName],t}(c.a);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(H);s.module(c.g).service("evidenceCollectionStreamEntryTransformer",H);var V=function(e){function t(n){var o=e.call(this,t.SUPPORTED_PROVIDERS)||this;return o.bbLocalize=n,o}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=t.itemSpecificData.gradeDetails;if(!this._isGraded(n))return null;var o=e.prototype.convert.call(this,t);return o.icon="grades",o.isImportant=!1,o.isGroupable=!1,this.processDetails(o,n),this.setStateRef(o,t.ui&&t.ui.streamCourse),o},t.prototype.processDetails=function(e,t){e.title=this._getTitle(t),e.body={type:m.a.Grades,content:{isInteractive:!0,grade:this._getGrade(t),attemptsRemaining:null,feedback:D.a.text(t.instructorFeedback.displayText),pointsPossible:t.pointsPossible,displayGrade:{grade:t.displayGradeGrade,score:t.displayGradeScore},schema:{scaleType:t.scaleType},column:{possible:t.pointsPossible,calculationType:t.calculationType}}},t.lastGradedDate&&(e.notificationCreationDate=new Date(t.lastGradedDate))},t.prototype.setStateRef=function(e,t){if(t)if(t.isClassic()){var n="/webapps/gradebook/do/student/viewGrades?course_id="+t.id+"&callback=course";e.body.stateRef=c.f.getCoursePanelStateRef(t.id,n)}else e.body.stateRef="course.grades("+s.toJson({courseId:t.id})+")"},t.prototype._getGrade=function(e){return u.sb.GradeIconType.Completed.isEqualTo(e.gradeIcon)?this.bbLocalize.translateSync({locale:null,key:"base.stream.entryBody.grades.completedScore"}):e.grade},t.prototype._getTitle=function(e){return this.bbLocalize.translateSync({locale:null,key:"base.stream.entryTitle.grade.posted",params:{entryTitle:e.title},noWrap:!0,noEscape:!0})},t.prototype._isGraded=function(e){return e.grade&&"-"!==e.grade||u.sb.GradeIconType.Completed.isEqualTo(e.gradeIcon)},t.SUPPORTED_PROVIDERS=["bb_mygrades"],t.$inject=[p.serviceName],t}(c.a),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(V);s.module(c.g).service("gradesStreamEntryTransformer",V);var K=function(e){function t(n){return e.call(this,n,t.SUPPORTED_PROVIDERS)||this}return Object(o.__extends)(t,e),t.prototype.convert=function(n){var o=e.prototype.convert.call(this,n);return o.icon=t.ICON,o.isGroupable=!0,this.processDetails(o,n.itemSpecificData.messageDetails),o},t.prototype.processDetails=function(e,t){e.conversationId=t.conversationId,e.isImportant=this.isUltraMessage(t)&&!t.canBeRepliedTo,e.body={type:m.a.SimpleText,content:{bodyText:t.contentExtract},stateRef:this.getBodyStateRef(e,t)},this.setTitle(e)},t.prototype.setTitle=function(e){var t=this;e.entrySpecificData&&e.entrySpecificData.streamUser?this.getUserDisplayName(e.entrySpecificData.streamUser).then((function(n){e.title=t.bbLocalize.translateSync({locale:null,key:"base.stream.entryTitle.newMessage",params:{authorName:n}})})):e.title=this.bbLocalize.translateSync({locale:null,key:"base.stream.entryTitle.newMessage",params:{authorName:null}})},t.prototype.isUltraMessage=function(e){return!!e.conversationId},t.prototype.getBodyStateRef=function(e,t){return this.isUltraMessage(t)?'stream-message({ courseId: "'+e.courseId+'", conversationId: "'+t.conversationId+'" })':'course.outline({ courseId: "'+e.courseId+'", legacyUrl: "'+E.f("/webapps/blackboard/messaging/course","messageDetail.jsp",{nav:"messages",course_id:e.courseId,folder:"inbox",course_message_id:t.messageId})+'" })'},t.prototype.group=function(e){var n=this,o=c.f;if(!o.validateEntriesForGrouping(e,t.SUPPORTED_PROVIDERS))throw new c.e({message:"Could not group stream entries"});var i=[],s=[],r={};return e.forEach((function(e){e.conversationId?(r[e.conversationId]=r[e.conversationId]||[]).push(e):s.push(e)})),Object.keys(r).forEach((function(e){var s=r[e];if(s.length>1){var a=o.getMostRecentEntry(s),c=a.courseId,l=o.getGroupedEntryIds(s),d=n.distinctAuthorNames(s),u={id:n.generateGroupedEntryId(c,e),groupedEntryIds:l,type:a.type,providerId:a.providerId,notificationCreationDate:a.notificationCreationDate,icon:t.ICON,isNew:o.hasNewEntry(s),isImportant:!1,isGroupable:!0,courseId:c,isOrg:a.isOrg,header:a.header,title:null,hasParticipated:s.some((function(e){return e.hasParticipated})),entrySpecificData:a.entrySpecificData,conversationId:e,body:a.body};n.setGroupedEntryTitle(u,s.length,d),i.push(u)}else i=i.concat(s)})),s.length>0&&(i=i.concat(s)),i},t.prototype.setGroupedEntryTitle=function(e,t,n){e.title=this.bbLocalize.translateSync({locale:null,key:i.compact(["base.stream.groupedEntries.message.title.messageNum.plural"]).join("."),params:{numUnreadMessages:t}}),this.bbLocalize.formatItems(n,2,null,!0,null).then((function(t){e.title+=t}))},t.prototype.generateGroupedEntryId=function(e,t){return["messageBoardGroupEntry",e,t].join("-")},t.prototype.distinctAuthorNames=function(e){var t=this;return c.f.getDistinctAuthorIds(e,(function(e){var n;return e.entrySpecificData&&e.entrySpecificData.streamUser&&(n=t.bbLocalize.formatUsernameSync(e.entrySpecificData.streamUser,p.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0})),n||"unknown"}))},t.SUPPORTED_PROVIDERS=["bb_message"],t.ICON="message",t.$inject=[p.serviceName],t}(c.d),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(K);s.module(c.g).service("messageStreamEntryTransformer",K);var J=function(e){function t(n,o,i){var s=e.call(this,t.SUPPORTED_EVENT_TYPES,i)||this;return s.bbLocalize=n,s.scoreProviderHelper=o,s}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t);n.isImportant=!1,n.isGroupable=!1,n.title=this._getTitle(n.notificationIds,t.itemSpecificData.notificationDetails.title);var o=t.itemSpecificData.notificationDetails,i=B.g.parse(t.itemSpecificData.contentDetails&&t.itemSpecificData.contentDetails.contentHandler);n.icon=this._getNeedsGradingIcon(i);var s=t.ui.streamCourse&&t.ui.streamCourse.isUltra();return this._setStateRef(n,o,i,s),s||this.setLegacyCourseUrlRefToBody(t,n),n},t.prototype._getNeedsGradingIcon=function(e){var t=this.scoreProviderHelper.getNeedsGradingIconByContentHandler(e);return t||(t="grades"),t},t.prototype._getTitle=function(e,t){var n=e.length>1?"base.stream.entryTitle.newSubmission.multipleNoCount":"base.stream.entryTitle.newSubmission.single";return this.bbLocalize.translateSync({locale:null,key:n,params:{entryTitle:t},noWrap:!0,noEscape:!0})},t.prototype._setStateRef=function(e,t,n,o){var i=t.courseId,s=t.courseContentId;if(o&&i&&s&&n){if(("TE:TE_GT_SUBMIT"===e.type||"TE:TE_GT_SUBMIT_LATE"===e.type||"UA:UA_GA_SUBMIT"===e.type||"UA:UA_GA_SUBMIT_LATE"===e.type)&&u.sb.NotificationRecipientType.Sender.isEqualTo(t.recipientType))return;var r=this.scoreProviderHelper.getSubmissionListStateRefByContentHandler(n,{contentId:s,courseId:i});r&&(e.body={stateRef:r})}},t.SUPPORTED_EVENT_TYPES={AS:["AS:AS_ATTEMPT","AS:AS_LATE_ATTEMPT","AS:AS_GA_ATTEMPT","AS:AS_GA_LATE_ATTEMPT"],BL:["BL:BL_ATTEMPT","BL:BL_GR_ATTEMPT"],DF:["DF:DF_ATTEMPT","DF:DF_GR_ATTEMPT"],DT:["DT:DT_ATTEMPT","DT:DT_GR_ATTEMPT"],JN:["JN:JN_ATTEMPT","JN:JN_GR_ATTEMPT"],SC:["SC:SC_SUBMIT","SC:SC_SUBMIT_LATE"],TE:["TE:TE_SUBMIT","TE:TE_SUBMIT_LATE","TE:TE_GT_SUBMIT","TE:TE_GT_SUBMIT_LATE"],UA:["UA:UA_SUBMIT","UA:UA_SUBMIT_LATE","UA:UA_GA_SUBMIT","UA:UA_GA_SUBMIT_LATE"],WK:["WK:WK_ATTEMPT","WK:WK_GR_ATTEMPT"]},t.$inject=[p.serviceName,N.c,"$q"],t}(c.c),Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(J);s.module(c.g).service("needsGradingStreamEntryTransformer",J);var Q=n("aHpC"),Z=function(e){function t(n,o,i){var s=e.call(this,t.SUPPORTED_EVENT_TYPES,i)||this;return s.bbLocalize=n,s.scoreProviderHelper=o,s}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t);n.isImportant=!1,n.isGroupable=!1;var o=t.itemSpecificData.notificationDetails,i=B.g.parse(t.itemSpecificData.contentDetails&&t.itemSpecificData.contentDetails.contentHandler);n.icon=this._getNeedReconcilingIcon(i),n.title=this._getTitle(n.type,t.ui.streamCourse,o.title);var s=t.ui.streamCourse&&t.ui.streamCourse.isUltra();return this._setStateRef(n,o,i,s),s||this.setLegacyCourseUrlRefToBody(t,n),n},t.prototype._getNeedReconcilingIcon=function(e){var t=this.scoreProviderHelper.getNeedsReconcilingIconByContentHandler(e);return t||(t="grades"),t},t.prototype._getTitle=function(e,t,n){var o=e.substr(e.indexOf(":")+1);return this.bbLocalize.translateSync({locale:null,key:"base.stream.entryTitle.simple."+o,params:{entryTitle:n},noWrap:!0,noEscape:!0})},t.prototype._setStateRef=function(e,t,n,o){var i=t.courseId,s=t.courseContentId;if(o&&i&&s&&n){var r=this.scoreProviderHelper.getSubmissionListStateRefByContentHandler(n,{contentId:s,courseId:i});r&&(e.body={stateRef:r})}},t.SUPPORTED_EVENT_TYPES={GB:["GB:GB_NEEDS_RECON"]},t=Object(o.__decorate)([Object(o.__param)(0,Object(Q.b)(p.serviceName)),Object(o.__param)(1,Object(Q.b)(N.c)),Object(o.__param)(2,Object(Q.b)("$q"))],t)}(c.c);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(Z);s.module(c.g).service("needsReconcilingtreamEntryTransformer",Z);var X=function(e){function t(n,o){var i=e.call(this,t.SUPPORTED_EVENT_TYPES,o)||this;return i.bbLocalize=n,i}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=t.itemSpecificData.notificationDetails;if(n&&"CM"===n.sourceType)return null;var o=e.prototype.convert.call(this,t);return o.isImportant=!1,o.isGroupable=!1,o.title=this._getTitle(o.type,t.ui.streamCourse,n.title),this.setLegacyCourseUrlRefToBody(t,o),o},t.prototype._getTitle=function(e,t,n){var o=e.substr(e.indexOf(":")+1);return"CR_AVAIL"===o&&t&&t.isOrganization&&(o="ORG_AVAIL"),this.bbLocalize.translateSync({locale:null,key:"base.stream.entryTitle.simple."+o,params:{entryTitle:n},noWrap:!0,noEscape:!0})},t.SUPPORTED_EVENT_TYPES={CR:["CR:CR_AVAIL"],SU:["SU:SU_SUBMIT"],QU:["QU:QU_AVAIL"],CM:["CM:CM_RCVD"]},t.$inject=[p.serviceName,u.o.serviceName,"$q"],t}(c.c),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(X);s.module(c.g).service("simpleLegacyStreamEntryTransformer",X);var te=n("ZNC7"),ne=n("r6lH"),oe=n("zyQz"),ie=n("EtRF"),se=n("nmzr"),re=function(e){function t(n,o,i){var s=e.call(this,t.SUPPORTED_EVENT_TYPES)||this;return s.bbLocalize=n,s.telemetry=o,s.remove=function(){var e=this.body.content.notificationId;return null==e&&(e="_"+this.body.content.sequenceId+"_1"),i.$new(e).$destroy().$asPromise()},s.analyticsContext=function(e){return e.notificationType=this.body.content.notificationType.toString(),this.body.content.phraseVariant&&(e.phraseVariant=this.body.content.phraseVariant),e},s}return Object(o.__extends)(t,e),t.prototype.convert=function(t){var n=e.prototype.convert.call(this,t),o=oe.a.parse(t.extraAttribs.notificationType),i=t.extraAttribs.notificationId,s=o&&o.getInitialView(),r=o?o.getPhraseVariant(t):void 0,a=o?o.getIcon().toString():ie.a.DEFAULT.toString(),l=c.f.getSequenceId(t),d=o&&o.getAction(null);return n.icon=a,n.isGroupable=!1,n.title=this._getTitle(o,t),n.isImportant="true"===t.extraAttribs.important,n.telemetryNotificationType=o&&o.toString(),(t.extraAttribs.inTroubleCount||t.extraAttribs.inTroubleAbsent||t.extraAttribs.inTroubleFailing)&&(n.studentsInTrouble={studentsInTrouble:t.extraAttribs.inTroubleCount,studentsInTroubleAbsent:t.extraAttribs.inTroubleAbsent,studentsInTroubleFailing:t.extraAttribs.inTroubleFailing}),n.notificationShapeType={shape:this._getNotificationShapeType(o)},n.body={type:this._getBodyType(d),content:{bodyText:this._getBody(o,t),sequenceId:l,notificationType:o,notificationId:i,phraseVariant:r}},n.remove=this.remove,n.analyticsContext=this.analyticsContext,null==i&&(i="_"+l+"_1"),this._setBodyStateRef(d,n,i,s),n},t.prototype._getBodyType=function(e){return e?m.a.Telemetry:m.a.SimpleText},t.prototype._getTitle=function(e,t){return e?this.bbLocalize.translateSync(e.getTitle(t,null)):this.bbLocalize.translateSync({locale:null,key:"base.stream.telemetry.unknownType",params:{type:t.extraAttribs.notificationType}})},t.prototype._getBody=function(e,t){if(e){var n=e.getBody(t,null);if(n.key)return this.bbLocalize.translateSync(n)}return""},t.prototype._setBodyStateRef=function(e,t,n,o){var i=this;if(o)switch(o){case se.TelemetryViewType.DIRECT_TO_COURSE:var s=c.f.getCoursePanelStateRef(t.courseId);this._setStateRefProps(e,t,s,!0);break;case se.TelemetryViewType.INSTRUCTOR_DYNAMIC:this.telemetry.determinePanelSref(t.courseId,n).then((function(n){i._setStateRefProps(e,t,n)}));break;default:var r=this.telemetry.createPanelSref(o,t.courseId,n);this._setStateRefProps(e,t,r)}},t.prototype._setStateRefProps=function(e,t,n,o){void 0===o&&(o=!1),e?(t.body.content.actionText=this.bbLocalize.translateSync(e),t.body.content.actionSref=n,t.body.content.isComponentActionSref=o):t.body.stateRef=n},t.prototype._getNotificationShapeType=function(e){var t;switch(e){case oe.a.SufficientActivityData:case oe.a.SufficientGradeData:case oe.a.StudentsInTrouble:t=te.a.DefaultNotification;break;default:t=te.a.BoxNotification}return t},t.SUPPORTED_EVENT_TYPES=["bb_tel","bb_tel:ins_grade","bb_tel:stu_activity","bb_tel:stu_grade"],t.$inject=[p.serviceName,ne.b,u.Hb.serviceName],t}(c.a);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(re);s.module(c.g).service("telemetryStreamEntryTransformer",re),n.d(t,"b",(function(){return ae})),n.d(t,"c",(function(){return ce})),n.d(t,"a",(function(){return le}));var ae="ultra.service.stream.transformer",ce="streamEntryTransformer",le=function(e){function t(t,n){var o=e.call(this,t)||this;return o.supportedTypes=n,o}return Object(o.__extends)(t,e),t.prototype.getSupportedTypes=function(){return this.supportedTypes},t.AssignmentsAndTests=new t("AssignmentsAndTests",i.union(z.SUPPORTED_EVENT_TYPES.AS,z.SUPPORTED_EVENT_TYPES.TE,z.SUPPORTED_EVENT_TYPES.UA)),t.GradesAndFeedback=new t("GradesAndFeedback",i.union(j.b(Y.SUPPORTED_EVENT_TYPES),q.SUPPORTED_PROVIDERS,ee.SUPPORTED_EVENT_TYPES.GB)),t.Discussions=new t("Discussions",_.SUPPORTED_PROVIDERS),t.Messages=new t("Messages",W.SUPPORTED_PROVIDERS),t}(a.a),de=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._baseDataTransformer=e,this.typeToTransformer=Object.create(null),this._dataTransformers=t||[]}return Object.defineProperty(e.prototype,"dataTransformers",{get:function(){return this._dataTransformers},set:function(e){this._dataTransformers=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseDataTransformer",{get:function(){return this._baseDataTransformer},set:function(e){this._baseDataTransformer=e},enumerable:!0,configurable:!0}),e.prototype.getDataTransformerByType=function(e){return this.typeToTransformer[e]=this.typeToTransformer[e]||this._lookupDataTransformerByType(e)},e.prototype._lookupDataTransformerByType=function(e){var t=this.dataTransformers.filter((function(t){return t.canHandleType(e)}));return t&&t[0]||this.baseDataTransformer},e.REGISTERED_DATA_TRANSFORMERS=[b,"calendarStreamEntryTransformer","collabStreamEntryTransformer","courseContentStreamEntryTransformer","deploymentStreamEntryTransformer","discussionBoardStreamEntryTransformer","duedatedContentStreamEntryTransformer","evidenceCollectionStreamEntryTransformer","gradesStreamEntryTransformer","messageStreamEntryTransformer","needsGradingStreamEntryTransformer","simpleLegacyStreamEntryTransformer","telemetryStreamEntryTransformer","needsReconcilingtreamEntryTransformer"],e.$inject=[c.h].concat(e.REGISTERED_DATA_TRANSFORMERS),e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(de);s.module(ae,[c.g]).service(ce,de)},iYZE:function(e,t,n){(function(n){var o,i,s;!function(n,r){"use strict";"object"==typeof e.exports?e.exports=r():(i=[],void 0===(s="function"==typeof(o=r)?o.apply(t,i):o)||(e.exports=s))}(0,(function(){"use strict";var e="function"==typeof n?function(e){return new n(JSON.stringify(e))}:function(e){return JSON.stringify(e)};function t(e,t){t!==e.head&&(e.end?e.end===t&&(e.end=t.n):e.end=t,o(t.n,t.p),o(t,e.head),e.head=t,e.head.n=null)}function o(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}function i(e){if(!(this instanceof i))return new i(e);this.capacity=e>0?e:Number.MAX_VALUE,this.removeAll()}var s=i.prototype;return s.get=function(e){var n=this.hash[e];if(n)return t(this.linkedList,n),JSON.parse(this.data[e].toString())},s.set=function(n,o){var i=this.hash[n];return void 0===o?this:(i||(this.hash[n]={key:n},this.linkedList.length+=1,i=this.hash[n]),t(this.linkedList,i),this.data[n]=e(o),this.linkedList.length>this.capacity&&this.remove(this.linkedList.end.key),this)},s.update=function(e,t){if(this.has(e)){var n=this.get(e);this.set(e,t(n))}return this},s.remove=function(e){var t=this.hash[e];return t?(t===this.linkedList.head&&(this.linkedList.head=t.p),t===this.linkedList.end&&(this.linkedList.end=t.n),o(t.n,t.p),delete this.hash[e],delete this.data[e],this.linkedList.length-=1,this):this},s.removeAll=function(){return this.data={},this.hash={},this.linkedList={length:0,head:null,end:null},this},s.info=function(){return{capacity:this.capacity,length:this.linkedList.length}},s.keys=function(){for(var e=[],t=this.linkedList.head;t;)e.push(t.key),t=t.p;return e},s.has=function(e){return!!this.hash[e]},i}))}).call(this,n("GmLw").Buffer)},jOWO:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("SBxA"),s="ultra.components.directives.bbUiIcon.Survey";Object(o.a)(i.a,s,"bbUiIconSurvey")},jlIo:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-code",use:"icon-small-code-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-code"><path d="M4 3L1 8l3 5M12 3l3 5-3 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"k+3c":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("ZQey"),i=function(e,t,n,o,i,s,r,a,c){this.modalTitle=e,this.modalText=t,this.secondaryButtonText=n,this.primaryButtonText=o,this.modalDismissText=i,this.secondaryButtonStatus=s,this.primaryButtonStatus=r,this.courseStatusName=a,this.courseDescription=c},s=function(){function e(){}return e.Open=new i(".openCourse.modalTitle",".openCourse.modalText",".openCourse.makePrivate",".openCourse.makeComplete","global.cancelTakeMeBack","PRIVATE","COMPLETE",".openCourse.courseStatus",".openCourse.courseDescription"),e.Complete=new i(".completeCourse.modalTitle",".completeCourse.modalText",".completeCourse.makeOpen",".completeCourse.makePrivate","global.cancelTakeMeBack","OPEN","PRIVATE",".completeCourse.courseStatus",".completeCourse.courseDescription"),e.Private=new i(".privateCourse.modalTitle",".privateCourse.modalText","global.cancel",".privateCourse.makeOpen","","","OPEN",".privateCourse.courseStatus",".privateCourse.courseDescription"),e.OpenTermClassic=new i(".openTermClassicCourse.modalTitle",".openTermClassicCourse.modalText","global.cancel","","","","OPEN",".openTermClassicCourse.courseStatus",".openTermClassicCourse.courseDescription"),e.PrivateTermClassic=new i(".privateTermClassicCourse.modalTitle",".privateTermClassicCourse.modalText","global.cancel","","","","PRIVATE",".privateTermClassicCourse.courseStatus",".privateTermClassicCourse.courseDescription"),e.TermOpen=new i(".openTermCourse.modalTitle",".openTermCourse.modalText","global.cancel",".openTermCourse.makeComplete","","","COMPLETE",".openTermCourse.courseStatus",".openTermCourse.courseDescription"),e.TermComplete=new i(".completeTermCourse.modalTitle",".completeTermCourse.modalText","global.cancel",".completeTermCourse.makeOpen","","","OPEN",".completeTermCourse.courseStatus",".completeTermCourse.courseDescription"),e.TermPrivate=new i(".privateTermCourse.modalTitle",".privateTermCourse.modalText","global.cancel","","","","OPEN",".privateTermCourse.courseStatus",".privateTermCourse.courseDescription"),e.OpenClassic=new i(".openClassicCourse.modalTitle",".openClassicCourse.modalText","global.cancel",".openClassicCourse.makePrivate","","","PRIVATE",".openClassicCourse.courseStatus",".openClassicCourse.courseDescription"),e}(),r=function(){function e(e,t){switch(this.course=e,this.status=t,t){case o.a.Open:this.optionsForCurrentStatus=s.Open;break;case o.a.Complete:this.optionsForCurrentStatus=s.Complete;break;case o.a.Private:this.optionsForCurrentStatus=s.Private;break;case o.a.OpenTermClassic:this.optionsForCurrentStatus=s.OpenTermClassic;break;case o.a.PrivateTermClassic:this.optionsForCurrentStatus=s.PrivateTermClassic;break;case o.a.TermOpen:this.optionsForCurrentStatus=s.TermOpen;break;case o.a.TermComplete:this.optionsForCurrentStatus=s.TermComplete;break;case o.a.TermPrivate:this.optionsForCurrentStatus=s.TermPrivate;break;case o.a.OpenClassic:this.optionsForCurrentStatus=s.OpenClassic;break;default:throw new Error("Unknown CourseStatus")}}return e.prototype.getLocalizationKey=function(e){var t=this.course.isOrganization?"organization.outline":"course.outline";return(e||"").startsWith(".")?t+e:e},e.prototype.getStatus=function(){return this.status},e.prototype.getModalTitle=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.modalTitle)},e.prototype.getModalDismissText=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.modalDismissText)},e.prototype.getModalText=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.modalText)},e.prototype.getSecondaryButtonText=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.secondaryButtonText)},e.prototype.getPrimaryButtonText=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.primaryButtonText)},e.prototype.getSecondaryButtonStatus=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.secondaryButtonStatus)},e.prototype.getPrimaryButtonStatus=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.primaryButtonStatus)},e.prototype.getCourseStatusName=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.courseStatusName)},e.prototype.getCourseDescription=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.courseDescription)},e}()},kC07:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return Y})),n.d(t,"a",(function(){return Q}));var o=n("D57K"),i=(n("DXZ4"),n("vgq2"),n("v0wN"),n("LC/l"),n("rElr"),n("lwNT"),n("ZKRZ"),n("yCl+"),n("gW+2"),n("/oLk"),n("8sWK"),n("gORw"),n("TOu5"),n("nsO7")),s=n("wHJ2"),r=n("yC9S"),a=n("+O05"),c=n("FpRh"),l=n("laCM"),d=n("cs5G"),u=n("nYZ0"),p=n("bhWV"),h=n("xAaQ"),m=n("ga7A"),b=n("z+6U"),f=n("Fvsw"),g=n("Et3n"),v=n("5Tom"),y=n("Qbdf"),C=n("X455"),S=n("bF8R"),w=n("UioO"),I=n("jhBu"),k=n("Oyr+"),T=n("ujI6"),E=n("0JpG"),D=n("vhkR"),x=n("w9Zy"),O=n("r6lH"),P=n("lEL+"),A=n("Tn43"),$=n("lmMM"),M=n("4nF1"),L=n("IWgv"),_=n("LecS"),B=n("UGfE"),R=n("VdDF"),N=n("Ocaa"),j=n("Sa5G"),F=n("oi1r"),G=n("pjml"),U=n("JNtI"),z=n("0rzL"),H=n("nmzr"),V=n("TnpK"),q=n("r/An"),K=n("aTRN"),W=n("+4Px"),J=n("BLb8"),Y="ultra.directives.contentItemBase",Q="base-content-item",Z=function(){function t(e,t,n,o,s,a,c,l,d,u,p,h,m,b,f,g,v,y,C,S){var w=this;this.$q=e,this.$rootScope=t,this.element=n,this.scope=o,this.CourseModel=s,this.schemaService=a,this.contentService=c,this.contextService=l,this.contextCourse=d,this.contextCourseMembership=u,this.courseContentService=p,this.entitlementService=h,this.localizeService=m,this.ltiService=b,this.offcanvasService=f,this.telemetryService=g,this.timeoutService=v,this.ultraState=y,this.allyService=C,this.courseLinkContentHandler=G.r.ContentHandler.CourseLink,this.disableRestricted=!1,this.displayTelemetryUserActivity=!1,this.displayTelemetryDiscussionActivity=!1,this.entitledToDesignAssessment=!1,this.isModifyPermissionLoaded=!1,this.isGettingConfirmationOptions=!1,this.displayGradeInfo=!1,this.isLate=!1,this.scope.shouldShowContent=!0,this.canViewGroups=this.entitlementService.isEntitled(j.v.ViewGroups),this.hasViewGroupsAsAdmin=this.entitlementService.isEntitled(j.v.ViewGroupsAsAdmin),this.courseId=d.courseId?d.courseId:this.ultraState.params.courseId,this.conditionalRelease=S.instantiate(K.a,{scope:o}),this.scope.content.$then((function(e){w.entitlementService.hasAnyCourseEntitlement([j.j.ModifyAssessment,j.j.ViewAssessment],e.courseId).then((function(t){if(w.entitledToDesignAssessment=t,w.isModifyPermissionLoaded=!0,e.canHaveAttempts()&&!w.entitledToDesignAssessment&&e.contentDetail){var n=e.getAssociatedGradingColumn(),o=s.$new(e.courseId).gradebook.columns.$buildRaw(n);w.scope.gradingColumn=o;(w.displayGradeInfo?w.courseContentService.loadContentAndGrades({course:w.CourseModel.$buildRaw({id:e.courseId}),content:e,column:o}):w.$q.when({courseContent:e,gradingColumn:o})).then((function(e){w.displayGradeInfo&&w.scope.gradingColumn.isLate()&&(!e.gradeDetail||e.gradeDetail.ui.attempt.isInProgress())&&(w.isLate=!0),w.isGradeLoaded=!0,e.gradeDetail&&e.gradeDetail.column.id===o.id&&(w.scope.gradeDetail=e.gradeDetail)}))}else w.isLate=!1,w.isGradeLoaded=!0})),w.entitlementService.hasAnyCourseEntitlement([j.u.ViewGrades],e.courseId).then((function(e){w.canViewQuestionAnalysis=e})),w.contextService.getSystemInfo().$asPromise().then((function(e){e.telemetryEnabled&&(w.telemetryService.determineContentSupportsActivityData(w.scope.content).then((function(e){w.displayTelemetryUserActivity=e&&!w.contextCourseMembership.isStudentMembership()})),w.displayTelemetryDiscussionActivity=w.shouldShowDiscussionAnalytics()&&!w.contextCourseMembership.isStudentMembership())})),w.allyService.isAvailable().then((function(e){e&&w.allyService.isAllySupportedContentItem(w.scope.content)?(w.canShowAlly=!0,w.updateAlly()):w.canShowAlly=!1})),o.content.title||G.r.ContentHandler.UltraAssignment.isEqualTo(w.scope.content.contentHandler)||G.r.ContentHandler.TestLink.isEqualTo(w.scope.content.contentHandler)||w.localizeService.loadBundle("features/course/content/course-content").then((function(){o.content.title=w.localizeService.translateSync({locale:w.localizeService.getLocale(w.scope),key:"course.content.contentTitlePlaceholder"})}));var t=function(e){e.getLinkContentSource().$then((function(e){w.targetContent=e,w.contentHandler=e.contentHandler&&e.contentHandler.toString()}),(function(t){403===t.$response.status&&i.remove(w.scope.contents,(function(t){return t.$pk===e.$pk}))}))};w.scope.$watch("::content.id",(function(){if(G.r.ContentHandler.CourseLink.isEqualTo(w.scope.content.contentHandler))if(w.scope.content.contentDetail)t(w.scope.content);else var e=w.scope.$watch("content.isConditionalReleaseUnlocked()",(function(n){n&&(t(w.scope.content),e())}))})),Object(J.c)(w.scope,(function(e,t){w.scope.content.isConditionalReleaseLocked()&&w.scope.content.containsCriteriaWithGradeColumnId(t)&&Object(J.d)(w.scope,t)})),Object(J.b)(w.scope,(function(e){w.scope.content.isConditionalReleaseLocked()&&Object(J.d)(w.scope)})),r.b.OnRootScope(w.scope,"grade-attempt",(function(e,t,n){w.scope.content.id===t&&(w.scope.gradeDetail=n)})),o.content.contentHandler?o.content.isBbPage()?w.contentHandler=G.r.ContentHandler.Document.toString():w.contentHandler=o.content.contentHandler.toString():w.contentHandler=G.r.ContentHandler.Document.toString(),w.disableRestricted=G.r.ContentHandler.PartnerCloud.isEqualTo(w.contentHandler),w.conditionalRelease.getConditions(w.scope.content)})),this.scope.$on("refresh-conditional-release-rules",(function(e,t){w.scope.content.id===t.id&&w.conditionalRelease.getConditions(t)})),this.scope.$on("content-update",(function(e,t){w.scope.content.id!==t.id||w.scope.content.ui.linkSource||(w.scope.content=t),w.scope.content.ui.linkSource&&w.scope.content.ui.linkSource.id===t.id&&(w.scope.content.ui.linkSource=t);var n=w.scope.content.getDueDate();w.scope.dueDate=n&&new Date(n)})),this.scope.$on("bb-update-CR-tooltip",(function(e,t,n,o){t&&(w.conditionalRelease.gradeCriteria&&w.conditionalRelease.gradeCriteria.gradeColumnId)===t.id&&w.conditionalRelease.getConditions(w.scope.content,n,o)})),this.scope.$on("show-override-message",(function(e,t,n){w.scope.content&&w.scope.content.id===n&&(t?(w.scope.shouldShowContent=!1,w.overrideMessage=t):w.scope.shouldShowContent=!0)}));var I=i.once((function(){w.scope.$watch((function(){return w.scope.content.getDueDate()}),(function(e){w.scope.dueDate=e&&new Date(e)}))}));this.scope.$watch("content.contentHandler",(function(){o.content.ui.importPlaceholder||I()})),this.scope.$on("discussion-group-content-update",(function(e,t){w.scope.content&&G.r.ContentHandler.CourseLink.isEqualTo(w.scope.content.contentHandler)&&w.scope.content.contentDetail&&w.scope.content.getLinkContentSource().$then((function(e){e.id===t.id&&w.scope.content.applyGroupSettings(t)}))}))}return t.prototype.isEngagementOutline=function(){return"discussions"===this.scope.contextArea},t.prototype.getDescription=function(){return this.scope.content.systemGeneratedLocalizableDescription?this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:this.scope.content.systemGeneratedLocalizableDescription.languageKey}):this.scope.content.description},t.prototype.getAriaDescribedBy=function(){var e="content-item-icon-"+this.scope.content.id;return this.scope.content.ui.hasIndicator&&(e+=" activity-indicator-"+this.scope.content.id),e},Object.defineProperty(t.prototype,"peerReviews",{get:function(){return this.scope.content.contentDetail&&this.scope.content.getDeployedAssessment().peerSettings&&this.scope.content.getDeployedAssessment().peerSettings.peerReviewsPerStudent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"peerDueDate",{get:function(){return this.scope.content.contentDetail&&this.scope.content.getDeployedAssessment().peerSettings&&R.a.parseStringToDate(this.scope.content.getDeployedAssessment().peerSettings.peerReviewDueDate)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPeerGrading",{get:function(){return this.scope.content.contentDetail&&this.scope.content.getDeployedAssessment()&&this.scope.content.getDeployedAssessment().gradingColumn.peerGrading},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPeerGradingConfigured",{get:function(){return this.isPeerGrading&&null!=this.peerDueDate&&null!=this.peerReviews},enumerable:!0,configurable:!0}),t.prototype.getDeleteConfirmationKeyAndShowType=function(){var e=this;return this.contentService.generateDeleteConfirmationKey(this.scope.content,this.scope.contextArea).then((function(t){return{confirmationKey:e.scope.content.ui.deleteConfirmationKey,showType:e.scope.content.ui.modalShowType}}))},t.prototype.deleteContent=function(){var e=this;G.r.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)?this.scope.content.getLinkContentSource().$then((function(t){e._deleteContent(t)})):(this._deleteContent(this.scope.content),this.$rootScope.$broadcast("bb-update-CR-tooltip",this.scope.content.getAssociatedGradingColumn(),"",!0))},t.prototype._deleteContent=function(t){var n=this;G.r.ContentHandler.Discussion.isEqualTo(t.contentHandler)?t.getSoftLinks().$asPromise().then((function(e){e.length?n.$q.all(e.map((function(e){return n.CourseModel.$new(t.courseId).contents.$new(e.courseContent).$fetch().$asPromise().then((function(e){n.$rootScope.$broadcast("deleteContent",e,!1)}))}))).then((function(){n.$rootScope.$broadcast("deleteContent",t)})):n.$rootScope.$broadcast("deleteContent",t)})):this.$rootScope.$broadcast("deleteContent",t);var o=this.element.closest(".js-content-div"),i=o.next(".js-content-div");if(i.length>0)i.find(".js-content-item-base").first().find(".content-title").focus();else{var s=o.prev(".js-content-div");if(s.length>0)s.find(".js-content-item-base").first().find(".content-title").focus();else{var r=o.closest(".folder");r.length>0?r.find(".js-content-item-base").first().find(".content-title").focus():this.timeoutService((function(){e(".js-create").focus()}),this.scope.$root,0,!1)}}},t.prototype.hasSupportedConversation=function(){return!!this.scope.content.hasConversation()&&M.a.create(this.scope.content).supportsConversations()},t.prototype.shouldShowAlertIcon=function(){return this.isLate||this.scope.content.canViewAsInstructor()&&this.isUnlaunchableLtiLink()},t.prototype.shouldShowDiscussionAnalytics=function(){return this.scope.content.contentHandler&&j.g.Discussion.isEqualTo(M.a.create(this.scope.content).viewHandler())},t.prototype.shouldShowScormAnalysisReport=function(){return this.scope.content&&this.entitlementService.isEntitled("course.gradebook.MODIFY",this.scope.content.courseId||this.courseId)&&this.scope.content.isScorm()&&this.scope.content.hasReport()},t.prototype.isUnlaunchableLtiLink=function(){return this.scope.content.id&&this.scope.content.getContentDisplay().isLtiLink()&&!this.scope.content.getContentDisplay().isXplorLtiLink()&&!this.ltiService.getLaunchLinkFromContent(this.scope.content)},t.prototype.showVisibility=function(){return!this.isUnlaunchableLtiLink()},t.prototype.usesEditButton=function(){var e=this.scope.content.getContentDisplay();return e.usesEditButton()&&e.canUseEditButton()},t.prototype.openEditContentPanel=function(){this.ultraState.goPeekState(this.scope.content.getContentDisplay().getEditState(),this.scope.content.getContentDisplay().getEditStateParams())},t.prototype.updateContentVisibility=function(){this.targetContent&&this.scope.content?(this.targetContent.applyAvailabilitySettings(this.scope.content),this._updateVisibility(this.targetContent),this._updateVisibility(this.scope.content)):this.scope.content&&this._updateVisibility(this.scope.content)},t.prototype._updateVisibility=function(e){var t=this;e.visibility=this.contentService.determineVisibility(e.isAvailable);var n=["isAvailable","isPartiallyVisible","adaptiveReleaseRules"],o=e.getAssociatedGradingColumn();o&&(o.visible=e.isAvailable,n.push("contentDetail")),e.withParams({fields:"id"}).$save(n).$asPromise().then((function(){t.$rootScope.$broadcast("content-update",e)}))},t.prototype.updateAlly=function(){this.canShowAlly&&this.allyService.update(this.scope,this.scope.content.id,this.allyService.getXythosIdFromContentItem(this.scope.content))},t.prototype.getOverflowMenu=function(){var e=this;return[{icon:"draw",labelKey:"global.edit",show:function(){var t=e.isGettingConfirmationOptions?e.lastIsEditButtonShow:e.usesEditButton();return e.lastIsEditButtonShow=t,t},onClick:this.openEditContentPanel.bind(this)},{icon:"conversation",labelKey:"components.directives.content-item-base.overflow-menu.open-conversation",show:this.hasSupportedConversation.bind(this),onClick:function(){e.ultraState.goPeekState("conversations",{courseId:e.scope.content.courseId,contentId:e.scope.content.id})}},{icon:"beast-analytics",labelKey:"components.directives.content-item-base.overflow-menu.student-activity",show:function(){return e.displayTelemetryUserActivity&&!e.isAnonymouslyGraded()},onClick:function(){e.ultraState.goPeekState(H.TelemetryRoutes.CONTENT_ACTIVITY_IN_DETAIL,{contentId:e.scope.content.id})}},{icon:"beast-analytics",uniqueId:"scorm-analytics-report",labelKey:"components.directives.content-item-base.overflow-menu.view-analytics",show:function(){return e.shouldShowScormAnalysisReport()&&!e.contextCourseMembership.isStudentMembership()},onClick:function(){e.ultraState.goPeekState("scorm-analytics-report",{courseId:e.scope.content.courseId,contentId:e.scope.content.id})}},{icon:"beast-analytics",uniqueId:"discussion-insights",labelKey:"components.directives.content-item-base.overflow-menu.view-analytics",show:function(){return e.displayTelemetryDiscussionActivity},onClick:function(){var t=e.scope.content.contentDetail["resource/x-bb-courselink"]?e.scope.content.contentDetail["resource/x-bb-courselink"].linkSourceId:e.scope.content.id;e.ultraState.goPeekState(H.TelemetryRoutes.DISCUSSION_FORUM_INSIGHTS,{contentId:t,forumContentId:e.scope.content.id})}},{icon:"question-analysis",labelKey:"components.directives.content-item-base.overflow-menu.question-analysis",show:function(){return e.canViewQuestionAnalysis&&e.scope.content.isQuestionAnalysisAvailable()},onClick:function(){e.ultraState.goPeekState("question-analysis.report",{qaContentId:e.scope.content.id})}},{icon:"trash",labelKey:"global.delete",show:function(){return e.scope.content.canDelete()},disable:function(){return e.scope.content.isInForcedSequenceModule()},disableInfo:this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"course.content.deleteDisabledDueToFS"}),onClick:this.deleteContent.bind(this),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){return e.isGettingConfirmationOptions=!0,e.getDeleteConfirmationKeyAndShowType().then((function(t){var n=t.confirmationKey.replace(/^resource\//,"");return e.isGettingConfirmationOptions=!1,e.$q.when(U.a(n))}))}}},{icon:"download",labelKey:"ally.context_menu.download_original_file",show:function(){return e.canShowAlly},onClick:function(){window.open(e.scope.content.getContentDisplay().contentUrl(),"_blank")}},{labelKey:"ally.context_menu.view_accessibility_score",icon:"ally-indicator-unscored",show:function(){return e.canShowAlly},onClick:function(){},additionalAttributes:{"data-ally-show":"instructorfeedback","data-ally-content-ref":this.scope.content.id,"data-ally-invoke":"instructorfeedback",style:"display:none;",onkeydown:"(function(e) {\n              if (e.keyCode === "+W.f+" || e.keyCode === "+W.t+') {\n                $(e.target).closest("li").click();\n              }\n              })(event)'}},{icon:"ally-alt-formats",labelKey:"ally.context_menu.download_alternative_formats",show:function(){return e.canShowAlly},onClick:function(){},additionalAttributes:{"data-ally-show":"alternativeformats","data-ally-content-ref":this.scope.content.id,"data-ally-invoke":"alternativeformats",style:"display:none;",onkeydown:"(function(e) {\n                if (e.keyCode === "+W.f+" || e.keyCode === "+W.t+') {\n                 $(e.target).closest("li").click();\n                }\n              })(event)'}}]},Object.defineProperty(t.prototype,"deployedAssessment",{get:function(){return this.scope.content&&this.scope.content.getDeployedAssessment()},enumerable:!0,configurable:!0}),t.prototype.isAnonymouslyGraded=function(){var e=this.scope.content.getAssociatedGradingColumn();return e&&e.anonymousGrading},t.prototype.editGroups=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var e,t,n;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return t=this.scope.content.id,this.scope.content.isAssignment()||this.scope.content.isTest()?(e=this.deployedAssessment.gradingColumn.id,[3,3]):[3,1];case 1:return e=this.scope.gradeColumn&&this.scope.gradeColumn.id,G.r.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.contentDetail?[4,this.scope.content.getLinkContentSource().$asPromise()]:[3,3];case 2:n=o.sent(),t=n.id,o.label=3;case 3:return this.ultraState.goPeekState("course-group",{groupCourseId:this.scope.content.courseId||this.ultraState.params.courseId,groupContentId:t,groupColumnId:e}),[2]}}))}))},t.prototype.showOverflowMenu=function(){var e=this.scope.content;return e.canDelete()||e.canViewAsInstructor()||this.usesEditButton()||e.hasConversation()||this.canShowAlly&&!e.isConditionalReleaseLocked()},t.prototype.openAssessmentItem=function(){a.a.isExternalSubmissionsAssessment(this.scope.content)?this.ultraState.goPeekState("assessment.external-overview",{contentId:this.scope.content.id}):this.ultraState.goPeekState("assessment.overview",{contentId:this.scope.content.id})},t.prototype.markCompleted=function(){this.contextCourseMembership.isActAsInstructorMembership()||this.scope.content.state===G.r.StateType.Completed||this.scope.content.updateState(G.r.StateType.Completed,!0)},t.prototype.getRootClassName=function(){return Q},t.$inject=["$q","$rootScope","element","scope",G.o.serviceName,F.b,u.f,f.b,y.e,C.d,S.b,I.b,E.serviceName,D.c,x.e,O.b,P.b,V.d,d.b,"$injector"],t}(),X=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.scope={content:"=",contents:"=",contextArea:"=",canMove:"="},this.template=q,this.link=function(e,n){e.contentItemBase=t.$injector.instantiate(Z,{scope:e,element:n}),e.$on(k.e,(function(t,o,i,s){s===k.c.FileDrop&&e.content===i.content&&(i.targetElement=n.find(".bb-progress"),e.$root.$broadcast(k.e,o,i,e.content.ui.fileUploadId,i.targetElement,k.c.LinkProgress))}))}}return e.$inject=["$injector"],e}();s.module(Y,[p.a,h.a,m.a,b.a,w.a,g.a,v.b,D.b,x.d,$.d,L.a,B.a,_.a,N.a,T.c,E.moduleName,u.d,S.a,F.a,U.b,z.a,A.a,c.a,l.a]).directive("bbContentItemBase",["$injector",function(e){return e.instantiate(X)}])}).call(this,n("5iHu"))},kkIh:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return J})),n.d(t,"a",(function(){return ee}));var o=n("D57K"),i=n("nsO7"),s=n("5MwF"),r=n("/C4M"),a=n("9zo4"),c=n("kxl5"),l=n("gkef"),d=n("Vsv2"),u=n("Dt14"),p=n("IiJs"),h=n("n0mJ"),m=n("nYZ0"),b=n("Fvsw"),f=n("Qbdf"),g=n("ZzN+"),v=n("go4a"),y=n("AI52"),C=n("Sa5G"),S=n("5KgE"),w=n("0+Qs"),I=n("NDLj"),k=n("0JpG"),T=n("pjml"),E=n("w9Zy"),D=n("QIw5"),x=n("lEL+"),O=n("hkqm"),P=n("TnpK"),A=n("1zDl"),$=n("JfV0"),M=n("12mu"),L=n("qSNv"),_=n("jhBu"),B=n("fYJU"),R=n("k+3c"),N=n("ZQey"),j=n("W6wm"),F=n("Sf7l"),G=n("t3at"),U=n("s7x+"),z=n("S1rJ"),H=n("ahTn"),V=n("8nBA"),q=n("cs5G"),K=n("nmzr"),W=n("7n5u"),J="ultra.course.outline.controller",Y=function(e){return Z(T.rb.QueueTaskStatus.Complete,e)},Q=function(e){return Z(T.rb.QueueTaskStatus.CompleteErrors,e)},Z=function(e,t){return"string"==typeof t?t===e.toString():e.isEqualTo(t)},X="course",ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(function(t){function n(e,n,o,i,r,a,c,l,d,u,p,h,b,f,g,y,S,w,I,k,x,O,P,A,$,M,L,_,B,R,F,G,U){var z=t.call(this,e,o,i,R,S,T.r.ContentRootNode.ROOT,j.a.CourseOutline,G,y,f,b,A,L,I)||this;z.$scope=e,z.$rootScope=n,z.CourseModel=o,z.CourseContentModel=i,z.collab=r,z.collabUltra=a,z.CourseMembershipModel=c,z.context=l,z.cloudDrive=d,z.kloudService=u,z.firstTimeHelper=p,z.$modal=h,z.ultraState=b,z.interval=f,z.timeout=g,z.bbLocalize=y,z.contentService=S,z.$log=w,z.$q=I,z.exportService=k,z.toast=x,z.ScheduledTaskModel=O,z.ConversionService=P,z.accessibility=A,z.windowSizeService=$,z.copyContent=M,z.$ngRedux=L,z.entitlementService=_,z.announcementPermissionsService=B,z.contextCourse=R,z.modalService=F,z.allyService=G,z.oneDriveBizLink=U,z.collabUltraEnabled=!1,z.runningSessionFlag=!1,z.attendanceEnabled=!1,z.isSidebarLoaded=!1,z.showVirtualClassroom=!1,z.isCollabConfigLoaded=!1,z.isAnnouncementsEnabled=!1,z.canViewGroups=!1,z.isGroupToolEnabled=!1,z.studentAccessGuidanceKey="student.access",z.navigationGuidanceKey="course.nav",z.alertCourseGuidanceKey="course.alert",z.questionBanksNavGuidanceKey="question.banks.nav.key",z.addContentGuidanceKey="course.addContent",z.canExport=!1,z.canArchive=!1,z.canAccessBatchEdit=!1,z.showContentImportProgress=!1,z.showImportCopyStatusBar=!1,z.showPreviewButton=!1,z.multiContentImportProgress=new Map,z.hasCheckedForImports=!1,z.isLoading=!0,z.refreshingFolderIds={},z.isLearningModuleEnabled=s.a.features.learningModule||!1,z.announcementsPostedCount=-1,z.announcementsTotalCount=-1,z.groupSetCount=-1,z.detailPortalType=W.a,z.detailPortals=[],z.trayLocalizationKeysPrefix="course.outline.content.copy",z.trayId="granular-content-import-tray",z.COPY_TASK_TYPE="C",z.granularContentImportQueue=[],z.handleOutlineMenuToggle=function(e){z.$scope.isOutlineMenuOpen=e,z.shouldShowCopyDetailsOverflowGuidance=z.hasCurrentCopyDetailsErrors&&e},z.openCopyDetailsPanel=function(){z.copyDetailsNotificationDismissed(),z.goPeekState.call(z,"content-manage.copy-details",{})},z.copyDetailsNotificationDismissed=function(){z.shouldShowCopyDetailsNotification=!1,z.copyContent.resetCopyDetailsNotificationCount()},e.courseOutline=z,z.shouldShowOutlineGuidance=!1,z.canViewGroupsAsAdmin=z.entitlementService.isEntitled(C.v.ViewGroupsAsAdmin),z.showPreviewButton=z.entitlementService.isEntitled(C.j.ViewPreviewStudent),e.course&&(e.course.headerKey="course.outline.headerLabel"),z.courseId=R.courseId,z.currentCourse=z.$scope.course.model,z.courseColorClass=v.a(z.$scope.course.membership),z.outlineLocalePrefix=z.currentCourse.isOrganization?"organization.outline":"course.outline",z.exportModalTitleKey=z.currentCourse.isOrganization?"organization.export.modal.modalTitle":"course.export.modal.modalTitle",z.$scope.previewModalTitleKey=z.currentCourse.isOrganization?"organization.outline.previewCourse.modalTitle":"course.outline.previewCourse.modalTitle",z.announcementPermissions=z.announcementPermissionsService.getCourseAnnouncementsPermissions();var H=W.b.onIntegrationAdded((function(){z.updateDetailsIntegration()}));z.updateDetailsIntegration(),z.currentCourse&&(z.canMove=!z.currentCourse.isComplete(),z.setCourseStatus(),z.currentCourse.schedule.$refresh({sort:"location(desc)"}).$allow([403]),z.updateBatchEditStatus()),z._setInstructors(),z.contentService.fetchIndicators(z.courseId,!0).then((function(e){z.updateIndicators(e)})),z.indicatorRefreshInterval=z.interval((function(){z.contentService.fetchIndicators(z.courseId,!0).then((function(e){z.updateIndicators(e)}),(function(){z.interval.cancel(z.indicatorRefreshInterval)}))}),e,m.b,0,!1),z.courseOutlineRefreshDeregister=e.$on("course-outline.refresh-folder",(function(e,t,n){z.courseOutlineRefreshFolder(t,n)})),e.$on("collab-exit",(function(){z.initCollabSession()})),e.$on("bb-announcement-panel-close",(function(){z.getAnnouncementsCount()})),e.$on("content-update",(function(e,t){z.getGroupAndSetCount(t.courseId)})),e.$watch("courseOutline.rootNode.children.length",(function(e,t){e!==t&&z.recalculateEmptyState()}));var V=z.contentService.indicatorCacheService.$onClassConversationIndicatorRemoved((function(e,t,n,o){t===z.$scope.course.model.id&&(o||z.dismissContentIndicators(n))})),q=z.contentService.indicatorCacheService.$onGroupConversationIndicatorRemoved((function(e,t,n,o){t===z.$scope.course.model.id&&(o||z.dismissContentIndicators(n))}));return e.$on("$destroy",(function(){V(),q(),H()})),z.currentCourse&&z.currentCourse.canEdit()&&z.currentCourse.isOpen()&&(T.o.CourseDuration.DateRange.isEqualTo(z.currentCourse.durationType)?z._openAlertModal():z.currentCourse.term&&T.o.CourseDuration.UseTerm.isEqualTo(z.currentCourse.durationType)&&z.currentCourse.term.$fetch().$asPromise().then((function(e){T.Mb.TermDuration.DateRange.isEqualTo(e.durationType)&&z._openAlertModal()}))),z.currentCourse.getStatus().isEqualTo(N.a.Private)?(z.showVirtualClassroom=!1,z.isCollabConfigLoaded=!1):s.a.features.collab||z.loadCollabConfig(),z.connectToRedux(),z.rootNode.children.$asPromise().then((function(){p.hasBeenShown(z.studentAccessGuidanceKey).then((function(e){z.shouldShowAccessGuidanceOpenToStudent=!e&&z.rootNode.children.canCreate()&&!z.$scope.course.model.isAvailable,z.shouldShowAccessGuidanceOpenToStudent?z.shouldShowNavigationGuidance=!1:p.hasBeenShown(z.navigationGuidanceKey).then((function(e){z.shouldShowNavigationGuidance=!e}))})),p.hasBeenShown(z.questionBanksNavGuidanceKey).then((function(e){z.shouldShowQuestionBanksGuidance=!e})),z.$q.all([z.checkIfCollabUltraIsAvailable(),z.getAnnouncementsCount(),z.checkIfAttendanceIsAvailable(),z.getCourseGroupSetCount()]).finally((function(){z.isSidebarLoaded=!0})),z.shouldShowOutlineGuidance=z.rootNode.children.canCreate(),z.rootNode.children.length>1&&p.fadeAddContentButton(z.$scope,z.addContentGuidanceKey,X),u.getInstitutionAccount().then((function(e){z.instAccount=e,u.getKloudlessAccounts().then((function(t){z.connectedInstAccount=u.getConnectedInstitutionAccount(e,t),"onedrivebiz"===z.instAccount.type&&z.connectedInstAccount&&u.getOneDriveLink(z.connectedInstAccount).then((function(e){z.oneDriveBizLink=e})).catch((function(e){console.error(e)}))}))})),z.timeout((function(){z.isLoading=!1}),e)})),z.$scope.$on(E.b,(function(e,t){p.hasBeenShown(z.studentAccessGuidanceKey).then((function(e){z.shouldShowAccessGuidanceOpenToStudent=!e&&z.rootNode.children.canCreate()&&!z.$scope.course.model.isAvailable})),p.hasBeenShown(z.navigationGuidanceKey).then((function(e){z.shouldShowNavigationGuidance=!e})),p.hasBeenShown(z.questionBanksNavGuidanceKey).then((function(e){z.shouldShowQuestionBanksGuidance=!e})),z.rootNode.children.length>1&&p.fadeAddContentButton(z.$scope,z.addContentGuidanceKey,X)})),z.showTooltip=!1,z.isExportSuccess=!1,z.canExport=z.currentCourse.canExport(),z.canArchive=z.currentCourse.canArchive(),(z.canExport||z.canArchive)&&(z.exportService.getExportsAndScheduledTasks(z.courseId,z.currentCourse.courseId,!0,z.canExport,z.canArchive).then((function(e){e.scheduledTasks&&e.scheduledTasks.length>0&&z._setExportTaskStatusCheckInterval()})),e.$on("start-task-status-check",(function(){z._setExportTaskStatusCheckInterval()}))),D.a.Already.isEqualTo(b.params.enrollmentMessage)&&x.show({messageKey:z.outlineLocalePrefix+".alreadyEnrolled"}),e.$on("$destroy",(function(){z.courseOutlineRefreshDeregister(),z.indicatorRefreshInterval&&(z.interval.cancel(z.indicatorRefreshInterval),z.indicatorRefreshInterval=null),(z.canExport||z.canArchive)&&z._cancelExportTaskStatusCheckInterval(),z._cancelCheckImportCopyInterval(),e.course.isEditingCourseName&&(e.course.model.name?e.course.updateCourseName():(e.course.model.name=e.course.previousCourseName,e.course.isEditingCourseName=!1)),(z.currentCourse.canCopy()||z.currentCourse.canImport())&&z.cancelImportWatchers()})),z.currentCourse.canCopy()&&(z._handleInProgressCopyTasks(),z.updateCopyDetailsAlerts(),z.hasCheckedForImports=!0),z.currentCourse.canImport()&&z._checkInProgressImportTask(),e.$on("showContentImportProgress",(function(e,t,n){z.showImportCopyStatusBar&&(z.showImportCopyStatusBar=!1),z.workingImportCopyTaskId=t,z.showContentImportProgress=!0,z._setCheckImportCopyInterval(t)})),e.$on("addImportTaskWatchers",(function(e,t){z._queueLoadingMessagesForTasks(t)})),z.ConversionService.isPreview(z.currentCourse)&&z.ConversionService.showPreviewAlert&&$.isSmallBreakpoint()&&(z.openPreviewAlertModal(),z.ConversionService.showPreviewAlert=!1),e.$on("add-outline-schedule",(function(e,t){z.currentCourse.schedule.push(t)})),e.$on("calendar-refresh",(function(e,t){if(t){var n=z.currentCourse.schedule.findIndex((function(e){return e.itemSourceId===t.itemSourceId}));-1!==n&&(z.currentCourse.schedule[n]=t)}})),e.$on("delete-outline-schedule",(function(e,t){var n;z.currentCourse.schedule.forEach((function(e,o){e.itemSourceId===t.itemSourceId&&(n=o)})),z.currentCourse.schedule.$remove(z.currentCourse.schedule[n])})),e.$on("membership.update",(function(e,t,n,o,i,s,r,a){o||i||s||n?(z.updateCourseRole(),z.fetchCourseAndSetInstructor()):z.updateUserInMemberships(z.$scope.course.model.instructorsMembership,r)})),e.$on("deleteMembership",(function(e,t,n,o){n&&z.fetchCourseAndSetInstructor()})),e.$on("roster-enroll-saved-success",(function(e,t,n){n&&z.fetchCourseAndSetInstructor()})),z}return Object(o.__extends)(n,t),n.prototype.updateDetailsIntegration=function(){var e=this;this.detailPortals=W.b.getRegisteredRecords(),this.detailPortals.forEach((function(t){t&&(t.selectorData={courseId:e.courseId})}))},n.prototype.courseOutlineRefreshFolder=function(e,t){var n=this,o=e?this.rootNode.findInTreeById(e):this.rootNode;this.refreshingFolderIds["node-"+o.id]||(this.refreshingFolderIds["node-"+o.id]=!0,o.hasMoreChildren=!0,o.children.filter((function(e){return(e.isFolder()||e.isLearningModule())&&e.ui.isOpen})).forEach((function(e){n.$scope.$broadcast("close-folder-immediately-by-id",e.id)})),o.children=null,this.loadMoreChildren(o,t).$then((function(){delete n.refreshingFolderIds["node-"+o.id],o.ui.isOpen=!0,n.$scope.$broadcast("close-all-add-menus",o.id)})))},n.prototype._queueLoadingMessagesForTasks=function(e){var t=this;i.forEach(e,(function(e){var n=t.$q((function(n,o){t._waitForTaskToComplete(e,n,o)}));t.cancelLoading=t.toast.showLoading({trayId:t.trayId,trayLocalizationKeysPrefix:t.trayLocalizationKeysPrefix,promise:n})}))},n.prototype.updateCourseRole=function(){var e=this;this.CourseModel.$find(this.$scope.course.model.id).memberships.$find(this.$scope.course.membership.id,{fields:"id,courseRole"}).$then((function(t){e.$scope.course.membership.courseRole=t.courseRole}))},n.prototype.fetchCourseAndSetInstructor=function(){var e=this;this.CourseModel.$find(this.$scope.course.model.id,{fields:"instructorsMembership.*"}).$then((function(t){e.$scope.course.model.instructorsMembership=t.instructorsMembership,e._setInstructors()}))},n.prototype.updateUserInMemberships=function(e,t){if(t){for(var n=e.length,o=0;o<n;o++)if(e[o].user.id===t.id){e[o].user=t;break}this._setInstructors()}},n.prototype.hideExportMoment=function(){this.showTooltip&&(this.showTooltip=!1,e(document)[0].removeEventListener("click",this.hideExportMoment,!0))},n.prototype.showExportMoment=function(){this.showTooltip=!0,e(document)[0].addEventListener("click",this.hideExportMoment.bind(this),!0)},n.prototype.loadCollabConfig=function(){var e=this;return this.isCollabConfigLoaded=!0,this.collab.getCollabSessions(this.courseId).then((function(t){T.p.CollabAccessType.APOLLO.isEqualTo(t.collabAccessType)?(e.showVirtualClassroom=!0,e.collabSessionId=t.sessionId):e.showVirtualClassroom=!1}),(function(t){e.showVirtualClassroom=!1,t.$response.status=null}))},n.prototype.openPreviewAlertModal=function(){this.modalInstance=this.$modal.open({template:F,scope:this.$scope,resolve:{translations:[k.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}})},n.prototype._openAlertModal=function(){var e=this;this.currentCourse.endDate&&this.currentCourse.endDate<this.context.getServerTime()&&this.$modal.open({template:G,scope:this.$scope,resolve:{translations:[k.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}).result.then((function(){e.updateCourseStatus(N.a.Complete)}),(function(){e.firstTimeHelper.hasBeenShown(e.alertCourseGuidanceKey).then((function(t){e.shouldShowAccessGuidanceReadOnly=!t}))}))},n.prototype.checkIfCollabUltraIsAvailable=function(){var e=this;if(s.a.features.collab)return this.collabUltra.getCollabB2Info().then((function(t){var n=t.$response;if(403===n.status||404===n.status)e.$log.debug("[Collab-ultra] getCollabB2Info() returned status: "+n.status);else if(200===n.status)return e.initCollabSession()}),(function(t){e.$log.error("[Collab-ultra]: Error in getCourseCollab(): "+t),t.$response.status=null}))},n.prototype.initCollabSession=function(){var t=this;return this.collabUltraEnabled=!1,this.runningSessionFlag=!1,this.courseRoomSession=null,this.courseSessionList=[],this.runningSessionList=[],this.$q.all([this.collabUltra.getCourseCollab(this.courseId).then((function(n){var o=n.filter((function(e){return e.sessionInstances&&e.sessionInstances.length>0}));t.runningSessionList=t.runningSessionList.concat(o),t.collabPermissions=e.extend({},n.permissions),Array.isArray(n)&&n.length>0?(t.courseRoomSession=n[0],e.extend(t.collabPermissions,t.courseRoomSession.permissions)):t.$log.debug("[Collab-ultra]: Course room does not exist!"),t.collabUltraEnabled=!0}),(function(e){t.$log.error("[Collab-ultra]: Error in getCourseCollab(): "+e),e.$response.status=null})),this.collabUltra.getAllCollabSessions(this.courseId).then((function(e){t.courseSessionList=e.filter((function(e){var t;return e.occurrenceType===C.C.SingleOccurrence?e.active:null===(t=e.occurrences)||void 0===t?void 0:t.some((function(e){return e.active}))}));var n=t.courseSessionList.filter((function(e){return e.sessionInstances&&e.sessionInstances.length>0}));t.runningSessionList=t.runningSessionList.concat(n),t.collabUltraEnabled=!0}),(function(e){t.$log.error("[Collab-ultra]: Error in getAllCollabSessions(): "+e),e.$response.status=null}))]).then((function(){t.runningSessionFlag=t.runningSessionList.length>0}))},n.prototype.joinSession=function(e){e||(this.courseRoomSession&&this.courseRoomSession.courseRoomEnabled?e=this.courseRoomSession.id:this.courseSessionList&&this.courseSessionList.length>0&&(e=this.courseSessionList[0].id));var t=window.open();this.collabUltra.getLaunchUrl(this.courseId,e).then((function(e){t.location.href=e}),(function(){t.close()}))},n.prototype.canCreateGroups=function(){return this.entitlementService.isEntitled(C.v.CreateGroups)},n.prototype.courseRoomExists=function(){return!!this.courseRoomSession},n.prototype.isCourseRoomEnabled=function(){return!(!this.courseRoomSession||!this.courseRoomSession.courseRoomEnabled)},n.prototype.isCollabSettingsDropDownAvailable=function(){if(this.collabPermissions)for(var e=0,t=Object.keys(this.collabPermissions);e<t.length;e++){var n=t[e];if(!0===this.collabPermissions[n]&&"joinSession"!==n)return!0}return!1},n.prototype.activeSessionCount=function(){var e=0;return this.courseRoomSession&&this.courseRoomSession.courseRoomEnabled&&e++,this.courseSessionList&&(e+=this.courseSessionList.length),e},n.prototype.enableCourseRoom=function(){var e=this;this.collabUltra.enableCourseRoom(this.courseId,this.courseRoomSession.id).then((function(t){e.courseRoomSession.courseRoomEnabled=t.courseRoomEnabled}))},n.prototype.disableCourseRoom=function(){var e=this;this.collabUltra.disableCourseRoom(this.courseId,this.courseRoomSession.id).then((function(t){e.courseRoomSession.courseRoomEnabled=t.courseRoomEnabled}))},n.prototype.checkIfAttendanceIsAvailable=function(){var e=this;return this.currentCourse.isToolAvailable("bb-attendance").then((function(t){e.attendanceEnabled=t}))},n.prototype.getAnnouncementsCount=function(){var e=this;return this.currentCourse.isToolAvailable("announcements").then((function(t){if(e.isAnnouncementsEnabled=t,e.isAnnouncementsEnabled)return e.currentCourse.getAnnouncementsCount().then((function(t){t&&(e.announcementsPostedCount=t.postedCount,e.announcementsTotalCount=t.postedCount||0,e.announcementPermissions.viewUnposted&&(e.announcementsTotalCount+=(t.draftCount||0)+(t.scheduledCount||0)))})).catch((function(e){e.$response.status=null}))}))},n.prototype.getCourseGroupSetCount=function(){var e=this;return this.currentCourse.isToolAvailable("groups").then((function(t){if(e.isGroupToolEnabled=t,e.isGroupToolEnabled)return e.entitlementService.areAnyEntitled([C.v.CreateGroups,C.v.ViewGroups,C.v.ViewGroupsAsAdmin,C.v.ModifyGroups,C.v.DeleteGroups])?e.getGroupAndSetCount(e.currentCourse.id).then((function(t){e.canViewGroups=e.entitlementService.areAnyEntitled([C.v.ViewGroups,C.v.ViewGroupsAsAdmin])})).catch((function(t){e.canViewGroups=!1})):void 0}))},n.prototype.getCourseStatus=function(){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:this.$scope.currentCourseStatus.getCourseStatusName()})},n.prototype.getCourseDescription=function(){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:this.$scope.currentCourseStatus.getCourseDescription()})},n.prototype.setCourseStatus=function(){this.currentCourse.isOpen()?this.$scope.currentCourseStatus=new R.a(this.currentCourse,N.a.Open):this.currentCourse.isPrivate()?this.$scope.currentCourseStatus=new R.a(this.currentCourse,N.a.Private):this.$scope.currentCourseStatus=new R.a(this.currentCourse,N.a.Complete)},n.prototype.hasConversionReport=function(){return this.context.getUltraConversionReportId()&&this.currentCourse.canConvert()},n.prototype.openModal=function(){var e=this;this.setCourseStatus(),this.ConversionService.isPreview(this.currentCourse)?(this.modalInstance=this.$modal.open({template:U,scope:this.$scope,resolve:{translations:[k.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}),this.modalInstance.result.then((function(t){t&&(e.updateCourseStatus(t),e.$rootScope.$broadcast("confirmNewExperience"))}))):(this.$scope.currentAnalyticsId="course.outline.updateStatusModal",this.modalInstance=this.$modal.open({template:z,scope:this.$scope,resolve:{translations:[k.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}),this.modalInstance.result.then((function(t){e.updateCourseStatus(t)})))},n.prototype.shouldShowVirtualClassroomLink=function(){var e=this.$scope.currentCourseStatus.getStatus()===N.a.Open;return this.showVirtualClassroom&&e&&!window.Modernizr.touch},n.prototype.updateCourseStatus=function(e){var t=this;if(e){var n=this.currentCourse.getStatus();return this.currentCourse.setStatus(e),this.$scope.currentCourseStatus=new R.a(this.currentCourse,this.currentCourse.ui.status),this.currentCourse.$patch().$then((function(){t.$scope.course.membership.course=t.currentCourse;var o=t.currentCourse.getStatus();return t.$scope.$emit("update-course-status",t.currentCourse.id,o),o.isEqualTo(e)||(t.currentCourse.setStatus(o.toString()),t.$scope.currentCourseStatus=new R.a(t.currentCourse,o)),(Y(n)||Y(e))&&(t.rootNode.children=t.rootNode.getChildren({limit:t.rootNode.children.length}),t.canMove=!t.currentCourse.isComplete()),s.a.features.collab?t.checkIfCollabUltraIsAvailable():t.isCollabConfigLoaded||s.a.features.collab?void 0:t.loadCollabConfig()}))}},n.prototype._setInstructors=function(){this.mainInstructor=null;var e=this.$scope.course.model.instructorsMembership.filter((function(e){return e.isAvailable}));this.instructors=e.map((function(e){return e.user})),null==e||0===e.length?this.mainInstructor=this.CourseMembershipModel.$build({user:{givenName:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:this.outlineLocalePrefix+".noInstructor"}),familyName:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:""})}}):e[0]?(this.mainInstructor=e[0],this.mainInstructor.courseRole.localizedRoleName=this.getLocalizedRoleNameByCourseRole(this.mainInstructor.courseRole)):this.mainInstructor=void 0},n.prototype.getLocalizedRoleNameByCourseRole=function(e){if(e.identifier.toString()in T.y.toBeLocalizedRoleLabels){var t=T.y.toBeLocalizedRoleLabels[e.identifier.toString()];return this.contextCourse.course.isOrganization&&(t=t.replace("global.course","global.organization")),this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:t})}return this.contextCourse.course.isOrganization?e.orgName.rawValue:e.courseName.rawValue},n.prototype.openExportModal=function(){var e=this;this.exportService.getExportsAndScheduledTasks(this.courseId,this.currentCourse.courseId,!1,this.canExport,this.canArchive).then((function(t){if(0===t.courseExports.length&&0===t.scheduledTasks.length||e.ultraState.includes("**.exports")){if(e.canExport&&!e.canArchive)return void e.exportService.createExportTask(!1,e.courseId).then((function(){e._setExportTaskStatusCheckInterval(),e._openExportPeekPanel()}));if(e.canArchive&&!e.canExport)return void e.exportService.createExportTask(!0,e.courseId).then((function(){e._setExportTaskStatusCheckInterval(),e._openExportPeekPanel()}));e.modalInstance=e.$modal.open({template:H,scope:e.$scope,resolve:{translations:[k.serviceName,function(e){return e.loadBundle("features/course/exports/course-export")}]}})}else e._openExportPeekPanel()}))},n.prototype.triggerCourseExport=function(e){var t=this;this.modalInstance.dismiss(),this.exportService.createExportTask(e,this.courseId).then((function(){t._setExportTaskStatusCheckInterval(),t._openExportPeekPanel()}))},n.prototype._setExportTaskStatusCheckInterval=function(){var e=this,t=s.a.production?6e4:5e3;this.checkExportStatusInterval=this.interval((function(){e._checkExportStatus()}),this.$scope,t)},n.prototype._cancelExportTaskStatusCheckInterval=function(){this.checkExportStatusInterval&&(this.interval.cancel(this.checkExportStatusInterval),this.checkExportStatusInterval=null)},n.prototype._checkExportStatus=function(){var e=this;this.exportService.getExportsAndScheduledTasks(this.courseId,this.currentCourse.courseId,!1,this.canExport,this.canArchive).then((function(t){t.scheduledTasks.forEach((function(t){var n=t.taskStatus;t.$fetch().$then((function(t){Y(n)||(Y(t.taskStatus)||Q(t.taskStatus))&&(e.exportService.getExportsAndScheduledTasks(e.courseId,e.currentCourse.courseId,!0,e.canExport,e.canArchive).then((function(t){t.scheduledTasks&&0!==t.scheduledTasks.length||e._cancelExportTaskStatusCheckInterval(),e.$scope.$broadcast("update-course-exports")})),"exports"!==e.ultraState.current.name.split(".").slice(-1)[0]&&(e.showExportMoment(),e.isExportSuccess=Y(t.taskStatus)))}))}))}))},n.prototype._openExportPeekPanel=function(){this.ultraState.goPeekState("exports")},n.prototype._checkInProgressImportTask=function(){var e=this,t="courseImport"+this.currentCourse.id.replace(/_/g,".");this.context.getPreference(t,"false").then((function(t){if("true"===t.value){var n=e.currentCourse.courseId;e._getCourseImportTasks(n).then((function(t){e.hasCheckedForImports=!0;var n=e.getLatestTaskForCourse(t);n&&(Y(n.taskStatus)||Q(n.taskStatus)?(e.showImportCopyStatusBar=!0,e.importCopyTaskId=n.taskId):(e.$rootScope.$broadcast("showContentImportProgress",n.taskId,e.rootNode&&e.rootNode.id?e.rootNode.id:"-1"),e.showContentImportProgress=!0,e._setCheckImportCopyInterval(n.taskId)))}))}else e.hasCheckedForImports=!0}))},n.prototype._handleInProgressCopyTasks=function(){var e=this,t=this.currentCourse.courseId;this.$q.all([this._getCourseCopyTasks(t),this._getCourseCopyTasksWithWaitingStatus(t)]).then((function(t){var n=i.filter(t[0],(function(e){return e.taskStatus!==T.rb.QueueTaskStatus.Waiting.toString()})),o=i.filter(n.concat(t[1]),(function(e){return!Y(e.taskStatus)&&!Q(e.taskStatus)&&(t=e.taskStatus,!Z(T.rb.QueueTaskStatus.Incomplete,t));var t}));e._queueLoadingMessagesForTasks(i.map(o,(function(e){return e.taskId})))}))},n.prototype.getLatestTaskForCourse=function(e){var t,n=null;return e.length>0?(t=0,e.forEach((function(e){if(e.startDate){var o=e.startDate.getTime();o>t&&(t=o,n=e)}else n=e,t=Number.MAX_VALUE}))):n=e.pop(),n},n.prototype.getTasks=function(e){return this.ScheduledTaskModel.$collection().$refresh(e).$asPromise()},n.prototype._getCourseCopyTasks=function(e){if(this.currentCourse.canCopy()){var t={courseId:e,filterBy:"courseCopyTasks",sort:"startDate(DESC)"};return this.getTasks(t)}return this.$q.when([])},n.prototype._getCourseCopyTasksWithWaitingStatus=function(e){if(this.currentCourse.canCopy()){var t={courseId:e,filterBy:"courseCopyTasks",status:"WAITING"};return this.getTasks(t)}return this.$q.when([])},n.prototype._getCourseImportTasks=function(e){if(this.currentCourse.canImport()){var t={courseId:e,operation:"IMPORT",filterBy:"cxTasks"};return this.getTasks(t)}return this.$q.when([])},n.prototype._setCheckImportCopyInterval=function(e){var t=this;this._cancelCheckImportCopyInterval();var n=s.a.production?6e4:6e3;this.checkContentImportProgress=this.interval((function(){t._checkImportCopy(e)}),this.$scope,n)},n.prototype._cancelCheckImportCopyInterval=function(){this.checkContentImportProgress&&(this.interval.cancel(this.checkContentImportProgress),this.checkContentImportProgress=null)},n.prototype._checkImportCopy=function(e){var t=this;this.ScheduledTaskModel.$new(e).$fetch().$then((function(n){(Y(n.taskStatus)||Q(n.taskStatus))&&(t.rootNode.children.$refresh({expand:"assignedGroups,selfEnrollmentGroups.group"}).$then((function(){t.importCopyTaskId=e,t.showContentImportProgress=!1,t.showImportCopyStatusBar=!0})),t._cancelCheckImportCopyInterval(),t.getAnnouncementsCount())}))},n.prototype._waitForTaskToComplete=function(e,t,n){var o=this,i=s.a.production?6e4:6e3,r=this.interval((function(){o._checkTaskCompletion(e)}),this.$scope,i);this.multiContentImportProgress.set(e,{promise:r,complete:t,reject:n})},n.prototype._checkTaskCompletion=function(e){var t=this,n=this.multiContentImportProgress.get(e);n&&this.ScheduledTaskModel.$new(e).$fetch().$then((function(o){(Y(o.taskStatus)||Q(o.taskStatus))&&(o.type===t.COPY_TASK_TYPE&&t.copyContent.appendToCurrentCopyTasks([o.taskId]).then((function(e){return t.updateCopyDetailsAlerts()})),n.complete(),t.rootNode.children.$refresh({expand:"assignedGroups,selfEnrollmentGroups.group"}).$then((function(e){e.forEach((function(e){e.depth=t.rootNode.depth+1}))})),t.multiContentImportProgress.delete(e),t.interval.cancel(n.promise),t.getAnnouncementsCount())}))},n.prototype.cancelImportWatchers=function(){var e=this;this.multiContentImportProgress.forEach((function(t){e.interval.cancel(t.promise),t.reject&&t.reject({$status:"canceled"})})),this.cancelLoading&&this.cancelLoading()},n.prototype.updateCopyDetailsAlerts=function(){var e=this;this.copyContent.getCurrentCopyTaskErrorSummaries(this.currentCourse).then((function(t){e.copyContent.copyDetailsNotificationCount(t).then((function(t){e.copyDetailsErrorCount=t,e.shouldShowCopyDetailsNotification=t>0})),e.hasCurrentCopyDetailsErrors=!!i.keys(t).length}))},n.prototype.canCopyOrImport=function(){return(this.currentCourse.canCopy()||this.currentCourse.canImport())&&!this.showImportCopyStatusBar&&!this.ConversionService.isPreview(this.currentCourse)&&!this.showContentImportProgress&&this.hasCheckedForImports&&!this.currentCourse.isComplete()},n.prototype.joinVirtualClassroom=function(){s.a.features.collab||this.collab.joinVirtualClassroom(this.courseId,this.collabSessionId)},n.prototype.isStudentMembership=function(){return this.$scope.course.membership.isStudentMembership()},n.prototype.isActAsInstructorMembership=function(){return this.$scope.course.membership.isActAsInstructorMembership()},n.prototype.openAnnouncementsPanel=function(){this.announcementsTotalCount>0?this.ultraState.goPeekState(K.Routes.Announcement.ANNOUNCEMENTS_LIST):0===this.announcementsTotalCount&&this.announcementPermissions.create&&this.ultraState.goPeekState("announcement-list.peek.announcement-detail",{courseId:this.courseId,mode:r.PanelModeEnum.CREATE,courseName:this.currentCourse.displayName})},n.prototype.shouldShowCreateGroupsLink=function(){return 0===this.groupSetCount&&this.canCreateGroups()&&this.canViewGroupsAsAdmin},n.prototype.shouldShowViewGroupsLink=function(){return this.groupSetCount>0||0===this.groupSetCount&&!this.canCreateGroups()},n.prototype.groupsLinkIsDisabled=function(){return!this.canViewGroupsAsAdmin||0===this.groupSetCount&&(!this.canCreateGroups()||this.currentCourse.isComplete())},n.prototype.openGroupWorkspacePanel=function(){this.groupsLinkIsDisabled()||(0===this.groupSetCount&&!this.currentCourse.isComplete()&&this.canCreateGroups()?this.ultraState.goPeekState("group-set-list.peek.group-set-detail",{courseId:this.courseId,mode:r.PanelModeEnum.CREATE}):this.ultraState.goPeekState("group-set-list"))},n.prototype.disableAnnouncementsClickForStudent=function(){return!this.announcementPermissions.create&&0===this.announcementsTotalCount},n.prototype.getOverflowMenuItems=function(){var e=this;return[{icon:"link",labelKey:this.outlineLocalePrefix+".collab.ultraCollabMenu.guestItem",show:function(){return e.collabPermissions&&e.collabPermissions.inviteGuestsInLti&&e.courseRoomExists()},onClick:this.goPeekState.bind(this,"collab",{launchType:"launchRoomSettings"})},{icon:"settings",labelKey:this.outlineLocalePrefix+".collab.ultraCollabMenu.editItem",show:function(){return e.collabPermissions&&e.collabPermissions.editSettingsInLti&&e.courseRoomExists()},onClick:this.goPeekState.bind(this,"collab",{launchType:"launchRoomSettings"})},{icon:"reports",labelKey:"course.outline.collab.ultraCollabMenu.viewReportItem",show:function(){return e.collabPermissions&&e.collabPermissions.viewReportInLti&&e.courseRoomExists()},onClick:this.goPeekState.bind(this,"collab",{launchType:"launchReports"})},{icon:"collab",labelKey:"course.outline.collab.ultraCollabMenu.viewSessionsItem",show:function(){return e.collabPermissions&&e.collabPermissions.viewAllSessionsInLti},onClick:this.goPeekState.bind(this,"collab",{launchType:"launchSessions"})},{icon:"video",labelKey:"course.outline.collab.ultraCollabMenu.viewRecordingsItem",show:function(){return e.collabPermissions&&e.collabPermissions.viewAllRecordingsInLti},onClick:this.goPeekState.bind(this,"collab",{launchType:"launchRecordings"})},{icon:"disable",labelKey:this.outlineLocalePrefix+".collab.ultraCollabMenu.disableRoomItem",show:function(){return e.collabPermissions&&e.collabPermissions.changeAvailability&&e.isCourseRoomEnabled()},onClick:this.disableCourseRoom.bind(this)},{icon:"complete",labelKey:this.outlineLocalePrefix+".collab.ultraCollabMenu.enableRoomItem",show:function(){return e.collabPermissions&&e.collabPermissions.changeAvailability&&!e.isCourseRoomEnabled()&&e.courseRoomExists()},onClick:this.enableCourseRoom.bind(this)}]},n.prototype.getCourseOperationOverflowMenuItems=function(){var e=this;return[{key:"bulkEditItemKey",icon:"bulk-edit",labelKey:"course.outline.bulkEditLink",show:function(){return!e.currentCourse.isComplete()&&e.canAccessBatchEdit},onClick:function(){return e.goPeekState.call(e,"bulk-edit-content")}},{key:"importItemKey",icon:"import",labelKey:"course.outline.operation.importContent",show:this.currentCourse.canImport.bind(this.currentCourse),onClick:function(){return e.goPeekState.call(e,"content-manage.import",{parentId:e.rootNode.id})}},{key:"copyContentItemKey",icon:"duplicate",labelKey:"course.outline.operation.copyContent",show:this.currentCourse.canCopy.bind(this.currentCourse),onClick:this.goPeekState.bind(this,"content-manage.copy",{positionAfter:"end",depth:"1"})},{key:"exportItemKey",icon:"export",labelKey:this.outlineLocalePrefix+".operation.export",show:function(){return e.canArchive||e.canExport},onClick:this.openExportModal.bind(this)},{key:"copyDetailsItemKey",icon:"attention",status:"alert",labelKey:"course.outline.operation.copyDetails",show:function(){return e.currentCourse.canCopy()&&e.hasCurrentCopyDetailsErrors},onClick:this.openCopyDetailsPanel}]},n.prototype.goPeekState=function(e,t){this.ultraState.goPeekState(e,t)},n.prototype.getLocalizedTextByKey=function(e){var t={locale:this.bbLocalize.getLocale(this.$scope),key:e,noWrap:!0};return this.bbLocalize.translateSync(t)},n.prototype.moveError=function(e){this.$scope.moveErrorTitleKey=e+".title",this.$scope.moveErrorTextKey=e+".text",this.$modal.open({template:V,scope:this.$scope})},n.prototype.connectToRedux=function(){var e=this,t=this.$ngRedux.connect((function(e){return{groupSetCount:$.select.groupWorkspace&&$.select.groupWorkspace.getTotalGroupSetCount(e)||0}}),(function(e){return{getGroupAndSetCount:function(t){return e($.actions.groupWorkspace.getGroupAndSetCount(t))},resetGroupWorkspace:function(){return e($.actions.groupWorkspace.reset())}}}))(this);this.$scope.$on("$destroy",(function(){e.resetGroupWorkspace(),t()}))},n.prototype.updateBatchEditStatus=function(){var e=this.entitlementService.isEntitled(C.f.ModifyContent),t=this.entitlementService.isEntitled(C.f.ModifyContentAvailability),n=this.entitlementService.isEntitled(C.j.DeleteAdaptiveRelease),o=this.entitlementService.isEntitled(C.j.ModifyAdaptiveRelease),i=this.entitlementService.isEntitled(C.j.ViewAdaptiveRelease),s=this.entitlementService.isEntitled(C.j.ModifyAdaptiveReleaseDates),r=this.entitlementService.isEntitled(C.u.ModifyItemDueDate),a=this.entitlementService.isEntitled(C.f.DeleteContent),c=this.entitlementService.isEntitled(C.j.DeleteAssessment),l=this.entitlementService.isEntitled(C.f.DeployAssessment),d=(t||e)&&n,u=(o||s&&i)&&r,p=a&&e&&c&&l;this.canAccessBatchEdit=d||u||p},n.prototype.showFirstTimeConfirmationModal=function(){var t=this,n=this.$rootScope.$new();n.localizationTokenPrefix=this.contextCourse.course.isOrganization?"organization":"course";var o=this.modalService.open({scope:n,template:L});n.startPreview=function(){o.dismiss(),t.timeout((function(){t.startStudentPreview()}),t.$scope,0)},e(window.document).find("body").addClass("dialog-pop-up-in-preview-mode")},n.prototype.startStudentPreview=function(){var t=this;this.CourseModel.$new(this.courseId).studentPreview.$save().$then((function(){t.$rootScope.$broadcast("TOGGLE-PREVIEW",!0),e(window.document).find("body").addClass("in-preview-mode-parent")}))},n.prototype.launchInstitutionAccount=function(){var e=this;this.kloudService.launchInstitutionAccount(this.instAccount,this.oneDriveBizLink).then((function(){e.kloudService.getKloudlessAccounts().then((function(t){e.connectedInstAccount=e.kloudService.getConnectedInstitutionAccount(e.instAccount,t)}))}))},n.prototype.getCloudStorageIcon=function(){return this.instAccount?this.kloudService.getCloudStorageIcon(this.instAccount.type):""},n.prototype.getInstConnectString=function(){return this.connectedInstAccount?this.connectedInstAccount.name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"base.tools.connectAccount"})},n.prototype.hasInstitutionAccount=function(){return this.instAccount&&this.instAccount.type&&"disabled"!==this.instAccount.type},n.prototype.shouldShowSelfEnrollmentLink=function(){return this.isGroupToolEnabled&&this.isStudentMembership()},n.$inject=["$scope","$rootScope",T.o.serviceName,T.r.serviceName,u.b,p.b,T.v.serviceName,b.b,d.c,I.b,S.b,"$modal",P.d,w.b,x.b,k.serviceName,m.f,"$log","$q",y.b,O.b,T.rb.serviceName,g.b,a.c,l.b,A.b,"$ngRedux",_.b,c.b,f.e,M.b,q.b,B.b],n}(h.a))}).call(this,n("5iHu"))},kxl5:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var o=n("D57K"),i=n("wHJ2"),s=n("pjml"),r=n("Sa5G"),a=n("Qbdf"),c=n("jhBu"),l=n("aHpC"),d="ultra.service.announcements.permissions",u="announcementPermissions",p=function(){function e(e,t){this.currentCourse=e,this.entitlements=t}return e.prototype.isCurrentCourseCompleted=function(){return this.currentCourse.course&&this.currentCourse.course.isComplete()},e.prototype.getCourseAnnouncementsPermissions=function(){return{create:!this.isCurrentCourseCompleted()&&this.entitlements.isEntitled(r.a.CreateCourseAnnouncement),modify:!this.isCurrentCourseCompleted()&&this.entitlements.isEntitled(r.a.ModifyCourseAnnouncement),delete:!this.isCurrentCourseCompleted()&&this.entitlements.isEntitled(r.a.DeleteCourseAnnouncement),viewPosted:this.entitlements.isEntitled(r.a.ViewPostedCourseAnnouncement),viewUnposted:this.entitlements.isEntitled(r.a.ViewUnpostedCourseAnnouncement)}},e.prototype.getSystemAnnouncementsPermissions=function(){return{create:this.entitlements.isEntitled(r.a.CreateSystemAnnouncement),modify:this.entitlements.isEntitled(r.a.ModifySystemAnnouncement),delete:this.entitlements.isEntitled(r.a.DeleteSystemAnnouncement),viewPosted:this.entitlements.isEntitled(r.a.ViewPostedSystemAnnouncement),viewUnposted:this.entitlements.isEntitled(r.a.ViewUnpostedSystemAnnouncement)}},e=Object(o.__decorate)([Object(o.__param)(0,Object(l.b)(a.e)),Object(o.__param)(1,Object(l.b)(c.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(p);i.module(d,[s.Q]).service(u,p)},lGua:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-settings",use:"icon-small-settings-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-settings"><path d="M7.5977 1.5453c.1998-.2709.6048-.2709.8046 0l.9644 1.307a.5.5 0 00.5534.1798l1.5484-.4906c.3209-.1016.6485.1364.651.473l.0119 1.6242a.5001.5001 0 00.342.4707l1.5411.5133c.3193.1064.4445.4916.2486.7653l-.945 1.321a.5002.5002 0 000 .582l.945 1.321c.1959.2737.0707.6589-.2486.7653l-1.5411.5133a.5.5 0 00-.342.4706l-.0119 1.6243c-.0025.3366-.3301.5746-.651.473L9.92 12.9679a.5.5 0 00-.5533.1798l-.9644 1.307c-.1998.2709-.6048.2709-.8046 0l-.9644-1.307a.5.5 0 00-.5534-.1798l-1.5484.4906c-.3209.1016-.6485-.1364-.651-.473l-.012-1.6243a.4999.4999 0 00-.342-.4706l-1.541-.5133c-.3193-.1064-.4445-.4916-.2486-.7653l.945-1.321a.5.5 0 000-.582l-.945-1.321c-.1959-.2737-.0707-.6589.2486-.7653l1.541-.5133a.5.5 0 00.342-.4707l.012-1.6242c.0025-.3366.3301-.5746.651-.473l1.5484.4906a.5.5 0 00.5534-.1798l.9644-1.307z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 8c0 1.1046-.8954 2-2 2s-2-.8954-2-2 .8954-2 2-2 2 .8954 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},lHMO:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));n("1wt3"),n("GbCx");var o=n("5iHu"),i=n("wHJ2"),s=n("Y88D"),r=n("dJ97"),a=n("av75"),c="ultra.directives.stream.entryBody.streamEntryBody";!function(e){e.fn.truncate=function(n){var o=n.length,i=void 0===o?100:o,s=e.extend({},t,{length:i});return this.each((function(){var t=e(this),n=t.text().length-s.length;n<0||!n&&!s.truncated||e.each(t.contents().get().reverse(),(function(t,o){var i=e(o),r=i.text().length;return r<=n?(s.truncated=!0,n-=r,void i.remove()):3===o.nodeType?(e(o.splitText(r-n-1)).replaceWith(s.ellipsis),!1):(i.truncate(e.extend(s,{length:r-n})),!1)}))}))};var t={length:1/0,ellipsis:""}}(e);var l=function(){function e(e,t){this.id=e,this.content=t,this.showContent=!1}return e.prototype.showTheContent=function(){this.showContent=!0},e.prototype.hideTheContent=function(){this.showContent=!1},e}(),d=function(){function e(e,t){var n=this;this.$compile=e,this.$sce=t,this.replace=!0,this.restrict="E",this.link=function(e,t){var i=e.bodyType()||a.a.SimpleText;if(e.bodyContent()&&e.bodyContent().isInteractive&&(e.interactiveBodyContent=new l(e.$id,e.bodyContent())),e.bodyContent()&&e.bodyType()===a.a.SimpleText){var s=e.bodyContent();if("string"==typeof s.fullText){var r=o("<div></div>").append(s.fullText).truncate({length:100}).html();e.bodyContent().bodyText=r}}t.replaceWith(n.$compile(i.getTemplateHtml())(e))},this.scope={bodyType:"&type",bodyContent:"&content"}}return e.$inject=["$compile","$sce"],e}();i.module(c,["ngSanitize",s.a,r.a]).directive("bbStreamEntryBody",["$injector",function(e){return e.instantiate(d)}])}).call(this,n("5iHu"))},lLJW:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("4iFr"),s="ultra.components.directives.bbUiIcon.Discussion";Object(o.a)(i.Discussion,s,"bbUiIconDiscussion")},lx16:function(e,t,n){"use strict";n("zhNR"),n("JzsJ"),n("KmIE"),n("VCKY"),n("BiyI"),n("jlIo"),n("qzMN"),n("2i58"),n("Ybms"),n("P2DR"),n("wKTs"),n("vgq2");var o=n("wHJ2"),i=n("D57K"),s=n("dCrD"),r=function(e){function t(t,n,o){return e.call(this,t,n,o)||this}return Object(i.__extends)(t,e),t.$inject=["$injector","scope","element"],t}(s.a),a=function(e){function t(t,n,o){return e.call(this,t,n,o)||this}return Object(i.__extends)(t,e),t.$inject=["$injector","scope","element"],t}(s.a),c=n("Sa5G"),l=n("aHpC"),d=n("c7N/"),u=function(e){function t(t,n,o){var i=e.call(this,t,n,o)||this;return i.canEditUnsafeHtml=!1,i.isCloudServiceAvailable=!1,i.initializeItems=function(){i.items=[{key:"addText",className:"js-add-content",name:i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.add-content-button.addContent"}),iconProps:{iconName:"notes",iconSize:"small"},onClick:i.addTextBlock}],i.canEditUnsafeHtml&&i.items.push({key:"addHtml",className:"js-add-html",name:i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.add-content-button.addHtml"}),iconProps:{iconName:"code",iconSize:"small"},onClick:i.addHtmlBlock}),i.items.push({key:"addLocalFile",className:"js-add-local-file",name:i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.add-content-button."+(i.isMobile?"uploadFromDevice":"uploadFromComputer")}),iconProps:{iconName:"upload-file",iconSize:"small"},onClick:i.uploadLocalFile}),i.isCloudServiceAvailable&&i.items.push({key:"addCloudFile",className:"js-add-cloud-file",name:i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.add-content-button.uploadFromCloudStorage"}),iconProps:{iconName:"upload-cloud",iconSize:"small"},onClick:i.uploadCloudFile})},i.addTextBlock=function(){i.scope.$emit("bb-bbml-editor-add-block",c.d.Text,i.getInsertLocationData())},i.addHtmlBlock=function(){i.scope.$emit("bb-bbml-editor-add-block",c.d.Html,i.getInsertLocationData())},i.uploadLocalFile=function(){i.element.find(".file-upload-button").click()},i.uploadCloudFile=function(){i.element.find(".js-upload-from-kloudless").click()},i.focusAddButton=function(){i.element.find("button").focus()},i.$q=t.get("$q"),i.unsafeHtmlService=t.get(d.b),i.initialize(),i}return Object(i.__extends)(t,e),t.prototype.initialize=function(){var e=this;return this.$q.all({canEditUnsafeHtml:this.unsafeHtmlService.canEditUnsafeHtml(),isCloudServiceAvailable:this.isCloudServiceAvailablePromise}).then((function(t){var n=t.canEditUnsafeHtml,o=t.isCloudServiceAvailable;e.canEditUnsafeHtml=n,e.isCloudServiceAvailable=o})).finally(this.initializeItems)},t=Object(i.__decorate)([Object(i.__param)(0,Object(l.b)("$injector")),Object(i.__param)(1,Object(l.b)("scope")),Object(i.__param)(2,Object(l.b)("element"))],t)}(s.a),p=n("HjsN"),h=function(e){function t(t,n,o){return e.call(this,t,n,o)||this}return Object(i.__extends)(t,e),t.prototype.addGroup=function(){this.toggleMenu();var e=this.scope.positionBefore?this.scope.positionBefore():this.scope.positionAfter()+1;this.scope.createFunction(e),this.closeMenu()},t.$inject=["$injector","scope","element"],t}(s.a),m=n("ZkU4"),b=function(e){function t(t,n,o){var i=e.call(this,t,n,o)||this,s=o.closest("[data-base-state-name]").data("baseStateName");return i.$q.all([i.ultraState.peekHref("grade-item.create",i.getInsertLocationData(),s),i.ultraState.peekHref("gradebook-item.calculation",i.getInsertLocationData(),s),i.ultraState.peekHref("attendance",null,s)]).then((function(e){i.attendanceHref=e[2],i.items=[{key:"addGradebookItem",href:e[0],className:"doc-add-grade",name:i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.grade.grader-column.actions.addItem"}),iconProps:{iconName:"add",iconSize:"small"}},{key:"addCalculation",href:e[1],className:"doc-add-calc",name:i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.grade.grader-column.actions.addCalculation"}),iconProps:{iconName:"calculation",iconSize:"small"}}],i.addOrRemoveAddAttendanceMenuItem()})),n.$on("always-show-time-expires",(function(){n.addContentButton.alwaysShow=!1})),n.$on("update-content-menu",(function(){i.items&&i.addOrRemoveAddAttendanceMenuItem()})),i}return Object(i.__extends)(t,e),t.prototype.addOrRemoveAddAttendanceMenuItem=function(){var e=null==this.scope.showAddAttendance||!this.scope.showAddAttendance(),t=this.doesMenuItemExistByKey("addAttendance");e?this.removeMenuItemByKey("addAttendance"):t||this.addAttendanceMenuItem()},t.prototype.doesMenuItemExistByKey=function(e){return this.items.some((function(t){return t.key===e}))},t.prototype.removeMenuItemByKey=function(e){this.items=this.items.filter((function(t){return t.key!==e}))},t.prototype.addAttendanceMenuItem=function(){this.items.push({key:"addAttendance",href:this.attendanceHref,className:"doc-add-attendance",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addAttendance"}),iconProps:{iconName:"attendance",iconSize:"small"}})},t.$inject=["$injector","scope","element"],t}(s.a),f=n("J8YL"),g=n("tTiy"),v=n("1Niw"),y=n("UeHE"),C=n("9hp7"),S=n("SE1T"),w=n("6xt4"),I=n("07HN"),k=function(){function e(e){this.$injector=e,this.handlersAndTemplateTexts={assignment:{handler:r,templateText:f},attempts:{handler:a,templateText:g},"bbml-editor":{handler:u,templateText:v},"cloud-upload":{handler:p.b,templateText:y},"course-group":{handler:h,templateText:S},"course-outline":{handler:m.a,templateText:w},grades:{handler:b,templateText:I}}}return e.prototype.getTemplateText=function(e){if(null==e||!(e in this.handlersAndTemplateTexts))throw new Error("valid contextArea must be provided");if(null==this.handlersAndTemplateTexts[e].templateText)throw new Error("No template for context area: "+e);return C.replace("<template></template>",this.handlersAndTemplateTexts[e].templateText)},e.prototype.getHandler=function(e,t,n){if(null==e||!(e in this.handlersAndTemplateTexts))throw new Error("valid contextArea must be provided");return this.$injector.instantiate(this.handlersAndTemplateTexts[e].handler,{scope:t,element:n})},e.$inject=["$injector"],e}(),T=n("2E9T"),E=n("+e2k"),D="ultra.components.directives.content.buttonAddContent",x=function(){function e(){this.restrict="C",this.template=T}return e.$inject=["$injector"],e}();o.module(D,[E.a]).directive("buttonAddContent",["$injector",function(e){return e.instantiate(x)}]);var O=n("0JpG"),P=n("qgBt"),A=n("IR+Z"),$=n("H/mg"),M=n("nYZ0"),L=n("3Jgm"),_=n("TnpK");n.d(t,"a",(function(){return B}));var B="ultra.directives.addContentButton",R=function(){function e(e,t,n){var o=this;this.$injector=e,this.$rootScope=t,this.ultraState=n,this.compiled=Object.create(null),this.restrict="E",this.scope={attachHandler:"=?",disableDrag:"&?",content:"=",createFunction:"=?",hideDividerLines:"&?",rootContent:"&?",contextArea:"=",alwaysShow:"=",showAddAttendance:"&?",showBothButtons:"&?",showMenuOverride:"=",positionBefore:"&?",positionAfter:"&?",parentId:"&",depth:"&",canCreateAllContents:"=?",canCopyImport:"=?",folderNestedButton:"&?",fileLocation:"@?",webLocation:"@?",initialUpload:"&?",primaryKey:"&?",ignoredStates:"&?",itemName:"&?",itemType:"&?",itemIndex:"&?",isButtonLocationChangable:"<?",isRenderByDefault:"&?"},this.compile=function(){return function(e,t){var n;n=e.contextArea?e.contextArea:e.$parent.contextArea?e.$parent.contextArea:"course-outline";var i=o.$injector.instantiate(k,{});null==o.compiled[n]&&(o.compiled[n]=o.$injector.get("$compile")(i.getTemplateText(n))),e.addContentButton=i.getHandler(n,e,t),e.fileListViewId="fileListView-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.fileListViewLocalId=e.fileListViewId+"Local",o.compiled[n](e,(function(e,n){t.append(e)})),o.$rootScope.$broadcast("add-content-button-ready")}}}return e.$inject=["$injector","$rootScope",_.d,M.f],e}();o.module(B,["ngAnimate",D,A.a,O.moduleName,P.a,$.a,M.d,L.a,_.b,d.a]).directive("bbAddContentButton",["$injector",function(e){return e.instantiate(R)}])},"m+3A":function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return m})),n.d(t,"controllerName",(function(){return b}));n("JzsJ"),n("y95c"),n("VCKY"),n("GkCm"),n("dV61"),n("EACR");var o=n("wHJ2"),i=n("TB6y"),s=n("Fvsw"),r=n("8VoP"),a=n("AI52"),c=n("ZzYr"),l=n("CPVT"),d=n("HiQ9"),u=n("pjml"),p=n("yXB1"),h=n("asT1");n.d(t,"template",(function(){return h}));var m="ultra.course.exports",b=r.b;o.module(m,[i.a,a.a,s.a,c.a,l.a,"mm.foundation.modal",u.Q,p.a,d.a]).controller(r.b,r.a)},mCEN:function(e,t,n){"use strict";var o=n("D57K"),i=n("yC9S"),s=n("aHpC"),r=n("0JpG"),a=n("7u+5"),c=n("zYa8"),l=n("me+T"),d="ultra.components.directives.bbUiIcon.Attendance";Object(c.a)(l.a,d,"bbUiIconAttendance");var u=n("FvSu");Object(c.a)(u.Audio,"ultra.components.directives.bbUiIcon.Audio","bbUiIconAudio");var p=n("hpcp"),h=n("cXGx");Object(c.a)(h.a,"ultra.components.directives.bbUiIcon.Calculation","bbUiIconCalculation");var m=n("lLJW"),b=n("MlM1");Object(c.a)(b.DocumentBlank,"ultra.components.directives.bbUiIcon.DocumentBlank","bbUiIconDocumentBlank");var f=n("HCOL"),g=n("00V8"),v=n("K16Q");Object(c.a)(v.Homework,"ultra.components.directives.bbUiIcon.Homework","bbUiIconHomework");var y=n("KKAh"),C=n("cMgu"),S=n("VTbC"),w=n("Ylhg"),I=n("y8aX");Object(c.a)(I.a,"ultra.components.directives.bbUiIcon.OverallGrade","bbUiIconOverallGrade");var k=n("i+uu");Object(c.a)(k.Pdf,"ultra.components.directives.bbUiIcon.Pdf","bbUiIconPdf");var T=n("r7jL");Object(c.a)(T.Photo,"ultra.components.directives.bbUiIcon.Photo","bbUiIconPhoto");var E=n("k6dK");Object(c.a)(E.Presentation,"ultra.components.directives.bbUiIcon.Presentation","bbUiIconPresentation");var D=n("VV+j"),x=n("HGKz"),O=n("sOA/"),P=n("5L1M"),A=n("Uw7Y");Object(c.a)(A.Video,"ultra.components.directives.bbUiIcon.Video","bbUiIconVideo");var $=n("HiQ9"),M=n("jOWO"),L=n("FH9J");n.d(t,"a",(function(){return _}));var _="ultra.components.directives.bbUiContentIcon";!function(){function e(e,t){this.$scope=e,this.localize=t}e.prototype.$onChanges=function(){this.setTitleAccess()},e.prototype.setTitleAccess=function(){this.notDecorative&&this.icon&&(this.titleAccess=this.localize.translateSync({key:"components.directives.element-image.element-image-accessibility.img-icon-"+this.icon,locale:this.localize.getLocale(this.$scope)}))},e=Object(o.__decorate)([Object(i.a)({moduleName:_,componentName:"bbUiContentIcon",bindings:{icon:"<",color:"@?",notDecorative:"<?"},template:L,requireModules:[r.moduleName,m.a,a.a,d,"ultra.components.directives.bbUiIcon.Audio",p.a,"ultra.components.directives.bbUiIcon.Calculation",m.a,"ultra.components.directives.bbUiIcon.DocumentBlank",f.a,g.a,"ultra.components.directives.bbUiIcon.Homework",y.a,C.a,S.a,w.a,"ultra.components.directives.bbUiIcon.OverallGrade","ultra.components.directives.bbUiIcon.Pdf","ultra.components.directives.bbUiIcon.Photo","ultra.components.directives.bbUiIcon.Presentation",D.a,x.a,O.a,P.a,"ultra.components.directives.bbUiIcon.Video",$.a,M.a]}),Object(o.__param)(0,Object(s.b)("$scope")),Object(o.__param)(1,Object(s.b)(r.serviceName))],e)}()},n0mJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var o=n("D57K"),i=n("wHJ2"),s=n("9zo4"),r=n("cs5G"),a=n("Oyr+"),c=n("0JpG"),l=n("nYZ0"),d=n("A+IJ"),u=n("lr7J"),p=n("0+Qs"),h=n("pjml"),m=n("TnpK"),b=n("JfV0"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(function(){function e(e,t,n,o,i,s,r,c,d,u,p,m,b,f){var g=this;this.$scope=e,this.CourseModel=t,this.CourseContentModel=n,this.contextCourse=o,this.contentService=i,this.rootNodeType=s,this.contextAreaName=r,this.allyService=c,this.bbLocalize=d,this.interval=u,this.ultraState=p,this.accessibility=m,this.$ngRedux=b,this.$q=f,this.CONTENT_LOADING_LIMIT=10,this.contentLoadInProgress=!1,this.canMove=!1,this.dropTargetAssignedFromButton=!1,this.syllabusKey="syllabusKey",this.loadMoreChildren=function(e,t){return void 0===t&&(t=!0),g._loadMoreChildren(e,t)},this.moveItemIntoFolder=function(e){var t=g._findNodeByIdFromParentNode(g.rootNode,e.dragContentId),n=g._findNodeByIdFromParentNode(g.rootNode,e.targetFolderId);if(n.isForcedSequenceModule()||n.isInForcedSequenceModule())return g.moveError("course.outline.addForbidden");e.originalElement.hide();var o=g.loadMoreChildren(n);if(h.r.ContentHandler.LearningModule.isEqualTo(t.contentHandler)&&(h.r.ContentHandler.Folder.isEqualTo(n.contentHandler)||h.r.ContentHandler.LearningModule.isEqualTo(n.contentHandler)))return g.moveError("course.outline.lmMoveError"),o.$then((function(){e.originalElement.show()}));if(h.r.ContentHandler.Folder.isEqualTo(t.contentHandler)&&h.r.ContentHandler.LearningModule.isEqualTo(n.contentHandler)){if(!t.children)return t.getChildren({limit:0}).$asPromise().then((function(i){return i.some((function(e){return e.isUiFolder()}))?(g.moveError("course.outline.lmMoveFolderError"),o.$then((function(){e.originalElement.show()}))):o.$then((function(){g.doMoveItemFolder(t,n,e)}))})),o;if(t.children.some((function(e){return e.isUiFolder()})))return g.moveError("course.outline.lmMoveFolderError"),o.$then((function(){e.originalElement.show()}))}return o.$then((function(){g.doMoveItemFolder(t,n,e)}))},this.moveItem=function(e){var t=g._findNodeByIdFromParentNode(g.rootNode,e.dragContentId),n=g._findNodeByIdFromParentNode(g.rootNode,e.parentFolderId);if(t.isLearningModule()&&0!==n.depth)return g.moveError("course.outline.lmMoveError");if(n.isForcedSequenceModule()||n.isInForcedSequenceModule())return g.moveError("course.outline.addForbidden");if(h.r.ContentHandler.Folder.isEqualTo(t.contentHandler)&&h.r.ContentHandler.LearningModule.isEqualTo(n.contentHandler)){if(!t.children)return void t.getChildren({limit:0}).$asPromise().then((function(o){if(o.some((function(e){return e.isUiFolder()})))return g.moveError("course.outline.lmMoveFolderError");g.doMoveItem(t,n,e)}));if(t.children.some((function(e){return e.isUiFolder()})))return g.moveError("course.outline.lmMoveFolderError")}g.doMoveItem(t,n,e)},this.onFileDropHandler=function(e,t){g.folders=[],t||(t=g.rootNode),g.dropTarget=t,g.dropTargetAssignedFromButton=!1,g.dropTargetInsertLocation=null},this.contextArea=r,"SKIP_LOAD_MORE_CHILDREN"!==this.contextArea&&(this.$scope.course&&(this.$scope.course.membership&&this.$scope.course.membership.isActAsInstructorMembership()&&(this.canMove=!0),this.setRootNodeFromService(!1)),this._loadMoreChildren(this.rootNode)),this.setDeleteContentEventResponder(),Object(l.e)(this.$scope,(function(e,t,n){t===g.contextCourse.courseId&&g.rootNodeType===n&&g.setRootNodeFromService(!0)})),e.$on("content-item-mouseover",(function(t,n){e.$apply((function(){e.$broadcast("content-item-hover",n)}))})),e.$on("content-outline-mouse-leave",(function(){e.$broadcast("content-outline-hover-end")})),e.$on("scorm-content-canceled",(function(e,t){g.cachedNode=g.rootNode.findInTreeById(t.parentId,g.cachedNode),g.deleteNode(t,g.cachedNode,!1)})),e.$on(a.e,(function(e,t,n,o){o===a.c.Folder&&g.folderUpload(t,n)})),e.$on(a.e,(function(e,t,n,o){if(o===a.c.File)if(n.path)var i=g.interval((function(){var e=g.findFolder(n.path,g.folders,n.path.split("/").length-1);null!=e&&e.id&&(g.createFileContent(e,n,t,!0),g.interval.cancel(i))}),g.$scope,1e3,10);else g.createFileContent(g.dropTarget,n,t,!1)})),e.$on(a.e,(function(e,t,n,o,i,s,r,c){c===a.c.AssignDropTarget&&g.assignDropTarget(t,n,o,i,s,r)})),e.$on(a.e,(function(e,t,n){n===a.c.AssignDropTarget&&t===g.syllabusKey&&g.assignDropTarget(g.rootNode.id,"start",void 0,1,t,void 0)})),e.$on(a.e,(function(e,t,n){n===a.c.DeleteContent&&g.$scope.$root.$broadcast("deleteContent",t)})),e.$on(a.e,(function(t,n,o,i,s){(i===a.c.Error||i===a.c.Cancel)&&o&&o.content&&e.$root.$broadcast("deleteContent",o.content)})),e.$on(a.e,(function(e,t,n,o,i,s,r){i===a.c.Uploaded&&g.populateContentFileDetails(o,n).then((function(e){e.$pk?(n.ui.isUploading=!1,n.isAvailable=!1):e.$save().$then((function(e){e.ui.isUploading=!1,e.isAvailable=!1}))}))})),e.$on(a.e,(function(e,t){})),this.subscribeToRedux()}return e.prototype.subscribeToRedux=function(){var e=this.$ngRedux.connect(null,(function(e){return{deleteContentInStore:function(t){return e(b.actions.content.deleteContentInStore(t))},moveContentInStore:function(t,n,o){return e(b.actions.content.moveContentInStore(t,n,o))}}}))(this);this.$scope.$on("$destroy",e)},e.prototype.setRootNodeFromService=function(e){var t=e?this.rootNode.children:null;this.rootNode=this.contentService.findRootNode(this.$scope.course.model,this.rootNodeType),this.rootNode.depth=0,this.rootNode.title=this.rootNodeType.toString(),this.rootNode.contentHandler=h.r.ContentHandler.Folder,this.rootNode.hasMoreChildren=!0,this.rootNode.children=t},e.prototype._loadMoreChildren=function(e,t){var n=this;void 0===t&&(t=!0);var o=this._loadMoreChildrenImp(e);return this.$scope.$root&&o.$promise&&t&&this.$scope.$root.$broadcast(u.a,"content-outline-"+e.id,o.$promise),o.$then((function(){e===n.rootNode&&n.recalculateEmptyState(),n.contentService.fetchIndicators(n.contextCourse.courseId).then((function(t){n.updateIndicators(t,e)}))})),o},e.prototype.updateIndicators=function(e,t){t||(t=this.rootNode),e&&e.forEach((function(e){t.children.forEach((function(t){h.r.ContentHandler.Discussion.isEqualTo(t.contentHandler)?t.assignedGroups&&e.groupIds&&-1!==e.groupIds.indexOf(t.assignedGroups[0].groupId)?t.ui.hasIndicator=e.newData:t.contentDetail[h.r.ContentHandler.Discussion.toString()].id===e.forumId&&(t.ui.hasIndicator=e.newData):t.id===e.contentId&&(t.ui.hasIndicator=e.newData)}))}))},e.prototype.dismissContentIndicators=function(e,t){var n=this.rootNode.findInTreeById(e);if(n)n.ui.hasIndicator=!1;else{var o=this.rootNode.findInTreeById(t);o&&(o.ui.hasIndicator=!1)}},e.prototype.recalculateEmptyState=function(){this.isEmpty=null==this.rootNode.children||0===this.rootNode.children.length},e.prototype.populateContentFileDetails=function(e,t){return t.title=decodeURIComponent(e.fileName),t.contentHandler=h.r.ContentHandler.File,t.contentDetail={"resource/x-bb-file":{file:{fileName:e.fileName,fileLocation:e.fileLocation}}},t.$asPromise()},e.prototype.setDeleteContentEventResponder=function(){var e=this;this.$scope.$on("deleteContent",(function(t,n,o){void 0===o&&(o=!0),e.rootNode&&e.rootNode.children?e.rootNode.children.$then((function(){e.cachedNode=e.rootNode.findInTreeById(n.parentId,e.cachedNode),e.deleteNode(n,e.cachedNode,o)})):e.deleteNode(n,null,o)}))},e.prototype.deleteNode=function(e,t,n){var o=this;if(void 0===n&&(n=!0),!e.ui.isDeleted){var i=this.$q.when();n&&(i=this.deleteContent(e).then((function(){o.deleteContentInStore(e.id)}))),i.then((function(){o.removeNodeFromOutline(e,t)}))}},e.prototype.removeNodeFromOutline=function(e,t){if(t&&t.children){var n=void 0;if(null==e.id&&h.r.ContentHandler.File.isEqualTo(e.contentHandler)&&e.ui.isUploading){var o=t.children.filter((function(t){return t.ui.fileUploadId===e.ui.fileUploadId}))[0];n=t.children.indexOf(o)}else n=t.children.indexOfItemById(e.id);n>=0&&(t.children.splice(n,1),t.children.paging&&t.children.paging.count--,this.updateDeleteFocus(n,t))}},e.prototype.updateDeleteFocus=function(e,t){if(t.children&&t.children.length){var n=t.children[e===t.children.length?e-1:e].id;this.accessibility.setFocusOverrideOnPanel("[data-content-id="+n+"] .content-title",".js-content-outline, .js-engagement-outline")}else t.parentId?this.accessibility.setFocusOverrideOnPanel("[data-content-id="+t.id+"] .content-title",".js-content-outline, .js-engagement-outline"):this.accessibility.setFocusOverrideOnPanel(".bb-close",".bb-offcanvas-panel-wrap")},e.prototype.deleteContent=function(e){return this.contentService.deleteContent(e)},e.prototype._findNodeByIdFromParentNode=function(e,t){return e.findLoadedNodeById(t,3)},e.prototype._loadMoreChildrenImp=function(e){var t,n=this;if(null==e.hasMoreChildren&&(e.hasMoreChildren=!0),e.ui.isUploading&&(e.hasMoreChildren=!1),!e.hasMoreChildren)return this.CourseContentModel.$collection();if(this.contentLoadInProgress)return null!=e.children?e.children:this.CourseContentModel.$collection();this.contentLoadInProgress=!0;var o=null==e.children?0:e.children.length;return null==e.children?(t=e.children=e.getChildren({limit:this.CONTENT_LOADING_LIMIT,resolveLinks:!0,expand:"assignedGroups,selfEnrollmentGroups.group"}),e.children.$then((function(){n._determineHasMoreChildren(e,o),n.contentLoadInProgress=!1}))):t=e.getChildren({offset:e.children.length,limit:this.CONTENT_LOADING_LIMIT,resolveLinks:!0,expand:"assignedGroups,selfEnrollmentGroups.group"}).$then((function(t){t.forEach((function(t){t.$scope=e.children,e.children.push(t)})),n._determineHasMoreChildren(e,o),n.contentLoadInProgress=!1})),t},e.prototype._determineHasMoreChildren=function(e,t){e.children.length-t<this.CONTENT_LOADING_LIMIT&&(e.hasMoreChildren=!1)},e.prototype.folderUpload=function(e,t){var n,o,s=this,r=!0,a={parentId:"",positionBefore:void 0,positionAfter:void 0,depth:0},c=!t.path||t.name===t.path,l=this.interval((function(){c?s.dropTargetInsertLocation?a=s.calculateAddContentButtonInsertLocation():(o=h.r.ContentHandler.Folder.isEqualTo(s.dropTarget.contentHandler))?s.dropTarget.depth<d.l?(a.depth=s.dropTarget.depth+1,a.parentId=s.dropTarget.id):(a.depth=d.l,a.parentId=s.dropTarget.parentId):(a.parentId=s.dropTarget.parentId,a.depth=s.dropTarget.depth):(n=s.findFolder(t.path,s.folders,t.path.split("/").length-1))&&(n.depth<d.l?(a.depth=n.depth+1,a.parentId=n.$pk):(a.depth=d.l,a.parentId=n.parentId));var e=s.rootNode.findInTreeById(a.parentId);if(""!==a.parentId&&e){if(r=!0,i.isUndefined(n)){var u=void 0;if(!s.dropTarget&&s.dropTargetInsertLocation){var p=s.$scope.course.model.contents.$new(s.addContentButtonContentId);o=h.r.ContentHandler.Folder.isEqualTo(p.contentHandler),u=s.finalizeMultiLevelFolderInsertLocation(p,a,o,r),a=u.insertLocation,r=u.keepGoing}else u=s.finalizeMultiLevelFolderInsertLocation(s.dropTarget,a,o,r),a=u.insertLocation,r=u.keepGoing}else if(i.isUndefined(n.children))a.positionAfter="end";else{var m=n.children[n.children.length-1];m.id?a.positionAfter=m.id:r=!1}r&&(s.completeFolderUpload(a,e,t),s.interval.cancel(l))}}),this.$scope,1e3,10)},e.prototype.finalizeMultiLevelFolderInsertLocation=function(e,t,n,o){var s={insertLocation:t,keepGoing:o};if(n)if(i.isUndefined(e.children))s.insertLocation.positionBefore="start";else if(e.children.length>0){var r=e.children[this.dropTarget.children.length-1];r.id?s.insertLocation.positionAfter=r.id:s.keepGoing=!1}else s.insertLocation.positionBefore="start";else null==t.positionBefore&&(s.insertLocation.positionAfter=e.id||e.$pk);return s},e.prototype.completeFolderUpload=function(e,t,n){var o=this;this.allyService.fileUploadEvent();var i=this.interval((function(){if(t.children)return o.interval.cancel(i),o.contentService.makeContentInContentTree(t,o.contextCourse.courseId,e.parentId,e.positionBefore,e.positionAfter,!0).then((function(t){var i=t.content;i.title=n.name,o.folders.push(i),o.fillInDetailsForUploadedContent(i,e),i.contentDetail={"resource/x-bb-folder":{isFolder:!0}},i.contentHandler=h.r.ContentHandler.Folder,i.$save().$then((function(e){e.ui.isUploading=!1}))}))}),this.$scope,100,10)},e.prototype.fillInDetailsForUploadedContent=function(e,t){e.parentId=t.parentId,e.positionBefore=t.positionBefore,e.positionAfter=t.positionAfter,e.isAvailable=!1,e.depth=t.depth,e.description="",e.courseId=this.contextCourse.courseId,e.ui.isUploading=!0},e.prototype.doMoveItemFolder=function(e,t,n){var o=this,i=this._findNodeByIdFromParentNode(this.rootNode,e.parentId);e.moveTo(t,"start",null),e.$patch().$then((function(){i.children.paging.count--,t.children.paging.count++,o.moveContentInStore(n.dragContentId,n.targetFolderId,e.position)})),n.originalElement.show()},e.prototype.moveError=function(e){},e.prototype.doMoveItem=function(e,t,n){var o=this,i=this._findNodeByIdFromParentNode(this.rootNode,e.parentId);t!==i&&(t.children.paging.count++,i.children.paging.count--),e.moveTo(t,n.positionBeforeId,n.positionAfterId),e.$patch().$then((function(){o.moveContentInStore(n.dragContentId,n.parentFolderId,e.position)}))},e.prototype.assignDropTarget=function(e,t,n,o,i,s){this.dropTargetInsertLocation={parentId:e,positionBefore:t,positionAfter:n,depth:o},this.dropTargetAssignedFromButton=!0,this.addContentButtonContentId=s?s.id:"ROOT",this.folders=[]},e.prototype.createFileContent=function(e,t,n,o){var i,s=this,r=h.r.ContentHandler,c=r.Folder,l=r.LearningModule,d=e&&(c.isEqualTo(e.contentHandler)||l.isEqualTo(e.contentHandler)),u=this.calculateFileInsertLocation(e,d,o);if(null!=u)return this.allyService.fileUploadEvent(),this.contentService.makeContentInContentTree(this.rootNode,this.contextCourse.courseId,u.parentId,u.positionBefore,u.positionAfter,!0).then((function(o){i=o.content,s.fillInDetailsForUploadedContent(i,u),i.ui.fileUploadId="fileUpload-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),i.contentHandler=h.r.ContentHandler.File,null!=t&&(i.ui.file=t),d&&!e.ui.isOpen&&i.parentId===e.id&&s.toggleFolder(e),s.$scope.$root.$broadcast(a.e,n,i,a.c.ContentCreated)}))},e.prototype.canCreateDiscussion=function(){return this.canCreateAllContent()||this.canOnlyCreateDiscussion()},e.prototype.canOnlyCreateDiscussion=function(){return this.contentService.canOnlyCreateDiscussion(this.rootNode)},e.prototype.canCreateAllContent=function(){return this.contentService.canCreateAllContent(this.rootNode)},e.prototype.calculateAddContentButtonInsertLocation=function(){var e={parentId:"",positionBefore:void 0,positionAfter:void 0,depth:0};return e.parentId=this.dropTargetInsertLocation.parentId,e.positionBefore=this.dropTargetInsertLocation.positionBefore,e.positionAfter=this.dropTargetInsertLocation.positionAfter,e.depth=this.dropTargetInsertLocation.depth,e},e.prototype.getIdOfLastPersistedChild=function(e){if(null==e.children||0===e.children.length)return null;for(var t=e.children.length-1,n=e.children[t].id;null==n&&t>=0;)n=e.children[t].id,t--;return n},e.prototype.calculateFileDNDInsertLocation=function(e,t,n){if(n){e.parentId=t.id,e.depth=t.depth+1;var o=this.getIdOfLastPersistedChild(t);o?e.positionAfter=o:e.positionBefore="start"}else e.parentId=t.parentId,e.depth=t.depth,e.positionAfter=t.id;return e},e.prototype.calculateFileInsertLocation=function(e,t,n){var o={parentId:"",positionBefore:void 0,positionAfter:void 0,depth:0};return this.dropTargetInsertLocation&&!n?this.calculateAddContentButtonInsertLocation():this.calculateFileDNDInsertLocation(o,e,t)},e.prototype.findFolder=function(e,t,n){if(--n>=0){var o=e.split("/")[n],i=t.filter((function(e){return e.title===o}));if(1===i.length)return i[0];if(i.length>0)return this.findFolder(e,i,n)}},e.prototype.toggleFolder=function(e){this.$scope.$root.$broadcast("toggle-folder",e)},e.$inject=[r.b,c.serviceName,p.b,m.d,s.c,"$ngRedux","$q"],e}())},pGPW:function(e,t,n){},pHHL:function(e,t){e.exports='<div class="grade-color">\n  <div ng-if="!displayGrade.shouldShowRubricButton() && !displayGrade.shouldShowRubricDiv()">\n    <div ng-if="!(isGroupGradeMultiple() && !showNotGraded())"\n         ng-class="{ \'show-total\': displayGrade.gradeDisplayItem.shouldShowTotalPoints(),\n                     \'final-grade\': finalGrade(),\n                     \'na\': displayGrade.gradeDisplayItem.displayValue == null,\n                     \'cursor-pointer\': displayGrade.cursorPointer,\n                     \'defaultCursor\': displayGrade.cursorDefault}"\n         class="wrapping-input-style {{displayGrade.colorClass}}"\n         ready="{{::displayGrade.fullDisplayGrade && !displayGrade.noGradeToDisplay() || undefined}}">\n      <ng-switch on="displayGrade.schema.scaleType">\n        <span ng-switch-default>\n          <span ng-if="displayGrade.fullDisplayGrade != null && !overallGradePeekSref" class="grade-input-display ready" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{displayGrade.fullDisplayGrade}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade != null && overallGradePeekSref" \n             class="grade-input-display ready" \n             bb-peek-sref="{{overallGradePeekSref}}" \n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.fullDisplayGrade.link">\n            {{displayGrade.fullDisplayGrade}}\n          </a>\n          <span ng-if="displayGrade.fullDisplayGrade == null && !overallGradePeekSref" class="grade-input-display" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade == null && overallGradePeekSref" \n             class="grade-input-display" \n             bb-peek-sref="{{overallGradePeekSref}}" \n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n        </span>\n        <span ng-switch-when="SCORE">\n          \x3c!-- Accommodate for hiding of points possible in small format --\x3e\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue != null && !overallGradePeekSref" class="grade-input-display ready">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue != null && overallGradePeekSref" \n             class="grade-input-display ready" \n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.fullDisplayGrade.link">\n            {{displayGrade.gradeDisplayItem.displayValue}}\n          </a>\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue == null && !overallGradePeekSref" class="grade-input-display">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue == null && overallGradePeekSref" \n             class="grade-input-display" \n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n          <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n        </span>\n      </ng-switch>\n    </div>\n    <div ng-if="isGroupGradeMultiple() && !showNotGraded()" class="wrapping-input-style is-multiple">\n      <div ng-if="overallGradePeekSref" class="group-multiple" bb-peek-sref="{{overallGradePeekSref}}" bb-translate>components.directives.grade.display-grade.multiple</div>\n      <div ng-if="!overallGradePeekSref" class="group-multiple" bb-translate>components.directives.grade.display-grade.multiple</div>\n    </div>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricButton()">\n    <a ng-if="!displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-view"\n       class="js-rubric-view wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubric.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n    <a ng-if="displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-evaluation({groupId: displayGrade.attempt.groupId})"\n       class="js-rubric-evaluation wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubricEvaluation.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}&nbsp</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricDiv() && displayGrade.shouldShowRubricEvaluation()"\n       class="wrapping-input-style clear"\n       ng-class="displayGrade.colorClass">\n    <span>\n      <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n      <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n    </span>\n  </div>\n</div>'},pNbS:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-upload-cloud",use:"icon-small-upload-cloud-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-upload-cloud"><path d="M1 10c0 3 2 4 4 4h7c2 0 3-1.3431 3-3 0-2-2-3-2-3s1-6-5-6C3 2 3 7 3 7s-2 .5-2 3zM8 6v4M10 8H6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},pPNb:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-edit-tool",use:"icon-medium-edit-tool-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-edit-tool"><path d="M22.4282 4.0556c.366.7363.5717 1.5663.5717 2.4444 0 4.0963-3.02 6.4691-7 5.5l-10 10s-2 2-4 0 0-4 0-4L12 8c-.9691-3.98 1.4038-7 5.5-7 .8781 0 1.7081.2058 2.4445.5717l-3.0556 3.095S15.6666 5.8889 15.6666 6.5c0 1.0125.8208 1.8333 1.8333 1.8333.6112 0 1.8334-1.2222 1.8334-1.2222l3.0949-3.0555z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},ptBS:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-messages",use:"icon-medium-messages-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-messages"><path d="M1 4v16h22V4H1z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 4l8.4419 7.6744L12 14l2.5581-2.3256L23 4M23 20c-3.3676-3.5207-5.5754-5.3288-8.4418-8.3256M1 20l8.4419-8.3256" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},px9Z:function(e,t,n){},qSNv:function(e,t){e.exports='<bb-modal id="student-preview-modal" role="alertdialog" class="notification" bb-translate-attrs="{\'aria-label\': \'course.outline.studentPreview.modalTitleKey\'}"\n          modal-title-key="{{::localizationTokenPrefix}}.outline.studentPreview.modalTitleKey" aria-describedby="first-time-confimation"\n          analytics-id-tag-prefix="course.outline.studentPreview.firstTimeConfirmation">\n  <div name="modal-contents">\n    <bb-svg-icon size="custom" icon="preview-user-avatar"></bb-svg-icon>\n    <p id="first-time-info" bb-translate course-org-token-resolver>\n      course.outline.studentPreview.firstTimeConfirmation\n    </p>\n  </div>\n  <button name="modal-footer-button-primary"\n          type="button"\n          class="button js-discard-changes js-primary-button"\n          ng-click="startPreview()"\n          analytics-id="course.outline.studentPreview.firstTimeConfirmation.startPreview.button">\n    <span bb-translate="course.outline.studentPreview.startPreview"></span>\n  </button>\n  <button name="modal-footer-button-secondary" type="button" class="button button--secondary js-cancel-discard js-secondary-button" ng-click="$dismiss()"\n          analytics-id="course.outline.studentPreview.cancel.button">\n    <span bb-translate="course.outline.studentPreview.cancel"></span>\n  </button>\n</bb-modal>'},qeC2:function(e,t){e.exports='<div bb-load-bundle="components/directives/usercard" bb-cache-compilation="user-card" title="{{::userName}}">\n\n    <div ng-if="user.ui.anonymousStudent" class="anonymous-student-avatar">\n      <bb-avatar user="user" role="presentation" auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n    </div>\n\n    <div ng-if="!user.ui.anonymousStudent"\n         ng-click="bbUsercard.show()"\n         ng-keydown="bbUsercard.keyDown($event)"\n         ng-mouseleave="bbUsercard.hide()"\n         tabindex="{{::bbUsercard.canShow() ? 0 : -1}}"\n         class="usercard-trigger"\n         ng-class="::{\'usercard-clickable\': bbUsercard.canShow(), \'usercard-not-clickable\': !bbUsercard.canShow()}"\n         role="button"\n         aria-haspopup="true"\n         aria-expanded="{{showcard}}"\n         aria-label="{{bbUsercard.getUserNameLabel()}}"\n         analytics-id="components.directives.usercard.showCard"\n    >\n        <div ng-switch="usercardShow" tabindex="-1">\n            <span ng-switch-when="username" class="usercard-button">\n                <bb-username class="name-title" user="user" ng-attr-format="{{attr.format}}" auto-update="{{autoUpdate}}"\n                             ng-class="{ inactive: inactive() }"></bb-username>\n            </span>\n            <span ng-switch-when="avatar" class="usercard-button">\n                <bb-avatar user="user" role="presentation" auto-update="::autoUpdate"\n                  inactive="inactive()"></bb-avatar>\n            </span>\n            <span ng-switch-when="combined" class="usercard-button">\n              <bb-avatar user="user" role="presentation" auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n              <bb-username user="user" format="short" auto-update="::autoUpdate" ng-class="{ inactive: inactive() }"></bb-username>\n            </span>\n            <span ng-switch-when="outline" class="usercard-button">\n                <bb-avatar user="user" role="presentation" auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n                <div class="element-details">\n                  <div class="name ellipsis">\n                      <bb-username user="user" format="short" auto-update="::autoUpdate" ng-class="{ inactive: inactive() }"></bb-username>\n                  </div>\n                  <div class="content ellipsis">\n                    <p class="user-name js-course-role" bb-translate>{{bbUsercard.getCourseRoleLocalizeId()}}</p>\n                  </div>\n                </div>\n            </span>\n        </div>\n        <div ng-if="showcard" bb-click-outside="bbUsercard.hide()" is-active="showcard"\n             class="element-card usercard usercard-not-clickable" ng-class="{\'showcard\': showcard }" bb-focus>\n            <div class="header">\n                <bb-avatar user="user" ng-attr-auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n                <div class="element-details">\n                    <div class="name">\n                        <bb-username class="name-title" user="user" ng-class="{ inactive: inactive() }"\n                                     ng-attr-format="{{attr.format}}" ng-attr-auto-update="{{::autoUpdate}}"></bb-username>\n                    </div>\n                  <div class="userId ellipse" ng-if="user.userName && !user.studentId" title="{{user.userName}}">{{user.userName}}</div>\n                  <div class="userId ellipse" ng-if="!user.userName && user.studentId" bb-translate translate-values="{ studentId: user.studentId }">components.directives.usercard.studentId</div>\n                  <div class="userId ellipse" ng-if="user.userName && user.studentId" bb-translate translate-values="{ username: user.userName, studentId: user.studentId }">components.directives.usercard.usernameAndId</div>\n                  <div class="profile ellipsis" bb-translate>{{bbUsercard.getCourseRoleLocalizeId()}}</div>\n                    <div class="profile exception-link" ng-if="bbUsercard.hasDueDateException()">\n                      <div class="clickable ellipsis" ng-if="bbUsercard.canEditDueDateException()" bb-translate bb-peek-sref="accommodation({membershipId: membershipId})">\n                        components.directives.usercard.studentExceptions\n                      </div>\n                      <span ng-if="!bbUsercard.canEditDueDateException()" bb-translate>\n                        components.directives.usercard.studentExceptions\n                      </span>\n                    </div>\n                </div>\n            </div>\n            <div class="buttons">\n              \x3c!-- I don\'t use one time binding, as user can open a peek panel to config this attribute. This configuration has to take effect immediately--\x3e\n              <button aria-hidden="{{!showcard}}" ng-if="bbUsercard.canSendMessage()"\n                      type="button"\n                      ng-click="bbUsercard.sendMessage()"\n                      class="button large clear mail-button"\n                      title="{{user.mail}}"\n                      bb-translate-attrs="{\'aria-label\': \'components.directives.usercard.sendMessage\'}"\n                      tabindex="{{showcard ? 0 : -1}}"\n                      ng-keydown="bbUsercard.sendMessageViaSpaceBar($event)"\n                      analytics-id="components.directives.usercard.sendMessage.button"\n              >\n                <bb-svg-icon size="medium" icon="messages"></bb-svg-icon>\n              </button>\n            </div>\n        </div>\n    </div>\n\n</div>\n'},qgBt:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("wHJ2"),i="ultra.directives.bbOneDrive",s=function(){this.scope={attachHandler:"=",isFlatten:"=?",primaryKey:"&?",primaryKeyValue:"@?",fileLocation:"@?",webLocation:"@?",disableClick:"&?",allowMultiple:"=?"},this.restrict="A",this.link=function(e,t){e.isInitialized=!1,t.is("a")&&t.attr("tabindex",-1),t.attr("disabled","disabled")}};o.module(i,[]).directive("bbOneDrive",["$injector",function(e){return e.instantiate(s)}])},qzMN:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-content-collection",use:"icon-small-content-collection-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-collection"><path d="M14 15H2V9h3v1h6V9h3v6zM13 9V4H3v5M4 4V1h8v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"r/An":function(e,t){e.exports='<div bb-load-bundle="components/directives/content-item-base" ng-class="::contentItemBase.getRootClassName()" bb-cache-compilation="content-item-base">\n  <div class="content-item-base-container guidance-overflow-fix js-content-item-base" bb-click-to-invoke-child=".content-title">\n    <div ng-switch on="content.ui.importPlaceholder">\n      <div ng-switch-when="true" class="placeholder-container" bb-focus>\n        <div class="placeholder-text" bb-translate>components.directives.content-item-base.copy-placeholder</div>\n        <div class="sr-only" bb-translate>components.directives.content-item-base.please-wait</div>\n      </div>\n      <div ng-switch-default class="row drag-element-row" ng-class="{\n        \'is-restricted\': content.canViewAsInstructor() && content.isHiddenFromStudents(),\n        \'hidden-from-student-cr\': content.canViewAsInstructor() && content.isConditionalReleaseWithHiddenFromStudent(),\n        \'isNotClickable\': content.isConditionalReleaseLocked() || content.isRestricted() && !content.canViewAsInstructor()}">\n        <div class="content-item-row">\n          <div class="content-item-details" ng-class="{\'is-uploading\':content.ui.isUploading}">\n            <div class="element-card outline-item">\n              <ng-switch on="content.ui.isUploading">\n                <div ng-switch-when="true" class="upload-file">\n                  <bb-progress displayResults="false" id="{{content.ui.fileUploadId}}" class="bb-progress"></bb-progress>\n                </div>\n\n                <div class="outline-item-inner" ng-switch-default>\n                  <div class="element-image" ng-if="contentItemBase.isGradeLoaded" bb-content-item-icon="content" show-alert-icon="contentItemBase.shouldShowAlertIcon()">\n                  </div>\n                  <div class="element-details">\n                    <div ng-if="shouldShowContent">\n                      <bb-content-item-course-outline ng-if="!contentItemBase.isEngagementOutline()"></bb-content-item-course-outline>\n                      <bb-content-item-engagement-outline ng-if="contentItemBase.isEngagementOutline()"></bb-content-item-engagement-outline>\n                    </div>\n                    <div ng-if="!contentItemBase.shouldShowContent">\n                      {{contentItemBase.overrideMessage}}\n                    </div>\n                  </div>\n                </div>\n              </ng-switch>\n            </div>\n          </div>\n          <div ng-if="content.id" class="item-controls">\n            \x3c!-- Show this if the user has edit permissions on the content and it is movable //--\x3e\n            <button bb-drag-handle\n                    drag-item-id="{{content.id}}"\n                    drag-item-name="{{content.title}}"\n                    drag-item-type="{{contentItemBase.contentHandler}}"\n                    drag-item-context="{{contextArea}}"\n                    class="super-clear small button icon js-drag-handle"\n                    ng-if="canMove && content.canEdit() && !content.isInForcedSequenceModule()"\n                    translate-attrs-values="{contentTitle: content.title}"\n                    bb-translate-attrs="{\'title\': \'components.directives.content-item-base.move\', \'aria-label\': \'components.directives.content-item-base.aria-label.move\'}"\n                    analytics-id="content.item.base.move.button"\n                    >\n\n              <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n            </button>\n            <bb-ally-content-ref\n                ng-if="contentItemBase.canShowAlly"\n                content-id="{{content.id}}"\n                file-id="{{::contentItemBase.allyService.getXythosIdFromContentItem(content)}}"\n                file-preview-url="{{::content.getContentDisplay().contentUrl()}}"\n            ></bb-ally-content-ref>\n            <bb-ally-show\n              ng-if="contentItemBase.canShowAlly"\n              content-id="{{content.id}}"\n              show-view-score-link="true"\n              show-icon="true"\n              class="ally-icon"\n            ></bb-ally-show>\n            <bb-ally-show\n              ng-if="contentItemBase.canShowAlly"\n              content-id="{{content.id}}"\n              show-alternative-formats-link="true"\n              show-icon="true"\n              class="ally-icon"\n            ></bb-ally-show>\n            \x3c!-- Show this if the user has edit or delete permissions //--\x3e\n            <div class="right" bb-foundation-defer>\n              <bb-overflow-menu ng-show="contentItemBase.showOverflowMenu()"\n                                element-id="{{content.id}}"\n                                element-name="{{content.title}}"\n                                menu-items="contentItemBase.getOverflowMenu()"\n                                on-menu-toggle="contentItemBase.updateAlly()"\n                                analytics-id-tag-prefix="components.directives.content-item-base.overflowMenu">\n              </bb-overflow-menu>\n            </div>\n          </div>\n        </div>\n        <div ng-if="contentItemBase.getDescription()" class="content-item-description">\n          <p class="js-description" ng-bind="contentItemBase.getDescription()"></p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},rElr:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-chat",use:"icon-small-chat-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-chat"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},rKkA:function(e,t){e.exports='<div ng-cloak bb-cache-compilation="course-outline">\n  <div class="guidance-wrapper guidance-navbar">\n    <bb-guidance ng-if="courseOutline.shouldShowNavigationGuidance" class="guidance-element-overlay" ng-class="{\'push-right\': courseOutline.windowSizeService.isLargeBreakpoint()}"\n                 component-key="{{courseOutline.navigationGuidanceKey}}" page-container-selector=".course-outline">\n      <bb-translate course-org-token-resolver>course.outline.courseNavigation</bb-translate>\n    </bb-guidance>\n  </div>\n\n  <div class="course-outline webkit-render-issue-fix"\n       ng-class="{\'is-empty-page\': courseOutline.isEmpty, \'no-create\': !courseOutline.canCreateAllContent(), \'learning-module-enabled\': courseOutline.isLearningModuleEnabled}"\n       ng-attr-ready="{{::!courseOutline.isLoading || undefined}}">\n\n    <div ui-view="content-create-base"></div>\n\n    <div class="course-outline-row row collapse">\n\n      <aside role="complementary" class="outline-details {{::courseOutline.courseColorClass}}">\n\n        <div class="element-card main-instructor">\n          <bb-usercard class="js-single-instructor" usercard-show="outline" ng-show="courseOutline.instructors.length <= 1"\n            course-id="{{courseOutline.courseId}}" user="courseOutline.mainInstructor.user"\n            can-send-message="(!courseOutline.currentCourse.isPrivate() && !courseOutline.currentCourse.isComplete()) && courseOutline.mainInstructor.isAvailable"\n            course-role="courseOutline.mainInstructor.courseRole.localizedRoleName">\n          </bb-usercard>\n          <bb-multi-user-usercard ng-show="courseOutline.instructors.length > 1"\n            users="courseOutline.instructors" user-type="courseOutline.currentCourse.isOrganization ? \'leader\' : \'instructor\'" view="\'multiple-instructors\'">\n          </bb-multi-user-usercard>\n        </div>\n        <bb-schedule-outline schedule-outline-collection="courseOutline.currentCourse.schedule" week-day-format="long"></bb-schedule-outline>\n      </aside>\n\n    </div>\n    <div class="course-outline-row row">\n      <aside ng-show="courseOutline.isSidebarLoaded" role="complementary" class="column medium-12 large-3 outline-actions">\n        <div class="outline-header">\n          <h2 class="js-course-skip-link-target js-details-header" bb-translate="course.outline.detailsActionsLabel"></h2>\n        </div>\n\n        <div class="small-12 medium-4 large-12" id="course-outline-roster-link">\n          <a href="javascript:void(0);"\n             class="element-card js-roster"\n             bb-peek-sref="roster"\n             analytics-id="course.outline.roster.link">\n            <div class="element-image icon" data-status="offline">\n              <bb-svg-icon size="medium" icon="people"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.roster.name</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" bb-translate course-org-token-resolver>course.outline.roster.content</p>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div class="small-12 medium-4 large-12" id="course-outline-description-link" ng-show="courseOutline.currentCourse.description">\n          <a href="javascript:void(0);"\n             class="element-card"\n             bb-peek-sref="description"\n             analytics-id="course.outline.description.link">\n            <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="information"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate course-org-token-resolver>course.outline.courseDescription.name</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" bb-translate course-org-token-resolver>course.outline.courseDescription.content</p>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div class="small-12 medium-4 large-12 course-groups" id="groups-link" ng-if="courseOutline.canViewGroups">\n          <a href="javascript:void(0);"\n            class="element-card js-course-groups-list"\n            ng-class="{ \'disabled\': courseOutline.groupsLinkIsDisabled() }"\n            ng-click="courseOutline.openGroupWorkspacePanel()"\n            tabindex="{courseOutline.groupsLinkIsDisabled() ? \'-1\' : \'0\'}"\n            analytics-id="course.outline.groupWorkspaces.link">\n            <div class="element-image icon" data-status="offline">\n              <bb-svg-icon size="medium" icon="groups"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate course-org-token-resolver>course.outline.groupWorkspace.title</span>\n              </div>\n              <div class="content">\n                <span class="blue-link"\n                  ng-if="courseOutline.shouldShowViewGroupsLink()"\n                  bb-translate\n                >\n                  course.outline.groupWorkspace.instructor.content.plural\n                </span>\n                <span ng-if="courseOutline.shouldShowCreateGroupsLink()" bb-translate class="create-new blue-link">course.outline.groupWorkspace.instructor.createNew</span>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div class="card-private-complete small-12 medium-4 large-12" id="course-outline-status-button" ng-show="courseOutline.isActAsInstructorMembership() && courseOutline.currentCourse.isChild === false ">\n          <button class="course-status js-change-course-status"\n                  ng-click="courseOutline.openModal()"\n                  ng-class="{ \'js-course-open\': courseOutline.currentCourse.isOpen(),\n                             \'js-course-closed\': courseOutline.currentCourse.isPrivate(),\n                             \'js-course-complete\': courseOutline.currentCourse.isComplete() }"\n                  analytics-id="course.outline.courseStatus.edit.button">\n            <div class="element-card">\n              <div class="element-image icon">\n                <bb-svg-icon size="medium" icon="unlock" ng-if="courseOutline.currentCourse.isOpen()"></bb-svg-icon>\n                <bb-svg-icon size="medium" icon="lock" ng-if="courseOutline.currentCourse.isPrivate()"></bb-svg-icon>\n                <bb-svg-icon size="medium" icon="course-complete" ng-if="courseOutline.currentCourse.isComplete()"></bb-svg-icon>\n              </div>\n              <div class="element-details">\n                <div class="name">\n                  <span>{{courseOutline.getCourseStatus()}}</span>\n                </div>\n                <div class="content">\n                  <p class="blue-link">{{courseOutline.getCourseDescription()}}</p>\n                </div>\n              </div>\n            </div>\n          </button>\n          <div class="guidance-wrapper">\n            <div class="guidance-anchor" ng-if="courseOutline.shouldShowAccessGuidanceOpenToStudent"\n                 bb-guidance-target component-key="{{courseOutline.studentAccessGuidanceKey}}">\n            </div>\n            <div class="guidance-anchor" ng-if="courseOutline.shouldShowAccessGuidanceReadOnly"\n                 bb-guidance-target component-key="{{courseOutline.alertCourseGuidanceKey}}">\n            </div>\n            \x3c!--guidance suggesting the instructor open the course to students--\x3e\n            <bb-guidance ng-if="courseOutline.shouldShowAccessGuidanceOpenToStudent"\n                         class="guidance-element-overlay push-left"\n                         component-key="{{courseOutline.studentAccessGuidanceKey}}">\n              <bb-translate course-org-token-resolver>course.outline.unaccessableCourse</bb-translate>\n            </bb-guidance>\n            \x3c!--guidance suggesting the instructor make the ended course read-only to students--\x3e\n            <bb-guidance ng-if="courseOutline.shouldShowAccessGuidanceReadOnly"\n                         class="guidance-element-overlay push-left"\n                         component-key="{{courseOutline.alertCourseGuidanceKey}}">\n              <bb-translate>course.outline.completeCourseNote</bb-translate>\n            </bb-guidance>\n          </div>\n        </div>\n\n        <div class="small-12 medium-4 large-12" ng-show="courseOutline.shouldShowVirtualClassroomLink()">\n          <a href="javascript:void(0);"\n             class="element-card"\n             ng-click="courseOutline.joinVirtualClassroom()"\n             bb-feature-toggle="!collab"\n             analytics-id="course.outline.collab.link">\n            <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="collab"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate course-org-token-resolver>course.outline.collab.title</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" bb-translate course-org-token-resolver>course.outline.collab.content</p>\n              </div>\n            </div>\n          </a>\n        </div>\n        <div class="element-card ultra-collab small-12 medium-4 large-12"\n             ng-show="courseOutline.collabUltraEnabled" bb-feature-toggle="collab" ng-class="{\'is-collab-enabled\': courseOutline.courseRoomSession.courseRoomEnabled}">\n          <div class="element-image icon">\n            <bb-collab-session-icon id="collab-icon-outline" running-session-flag="courseOutline.runningSessionFlag"></bb-collab-session-icon>\n          </div>\n          <div class="element-details">\n            <div class="name">\n              <span bb-translate class="large-12 medium-12 small-12">course.outline.collab.ultraCollabTitle</span>\n            </div>\n            <div class="content">\n              <div class="select-wrapper">\n                <div ng-show="courseOutline.activeSessionCount() >= 1" bb-foundation-defer>\n                  <button id="sessions-list-dropdown"\n                          aria-describedby="collab-icon-outline"\n                          class="select-value join-session button-anchor"\n                          data-dropdown="sessions-list"\n                          aria-haspopup="true"\n                          aria-controls="sessions-list"\n                          bb-click-focus="#sessions-list li:first > a"\n                          analytics-id="course.outline.collab.sessionList.dropdown.button">\n                    <span class="blue-link" bb-translate="course.outline.collab.ultraCollabContent.roomEnabled"></span>\n                  </button>\n                  <ul role="menu" id="sessions-list" data-dropdown-content class="f-dropdown collab-scroll-container">\n                    <li ng-if="courseOutline.isCourseRoomEnabled()" role="presentation">\n                      <a href="javascript:void(0);"\n                         role="menuitem"\n                         ng-click="courseOutline.joinSession(courseOutline.courseRoomSession.id)"\n                         analytics-id="course.outline.collab.sessionList.courseRoom.link">\n                        <span bb-translate="course.outline.collab.ultraCollabMenu.courseRoom" course-org-token-resolver></span>\n                      </a>\n                    </li>\n\n                    <li ng-repeat="collabSession in courseOutline.courseSessionList" role="presentation">\n                      <a href="javascript:void(0);"\n                         role="menuitem"\n                         ng-click="courseOutline.joinSession(collabSession.id)"\n                         analytics-id="course.outline.collabSession.link">\n                        <span>{{collabSession.name}}</span>\n                      </a>\n                    </li>\n                  </ul>\n                </div>\n                <div ng-if="courseOutline.activeSessionCount() < 1">\n                  <p ng-if="!(courseOutline.collabPermissions && courseOutline.collabPermissions.viewAllSessionsInLti)" bb-translate="course.outline.collab.ultraCollabContent.studentRoomDisabled"></p>\n                  <p ng-if="courseOutline.collabPermissions && courseOutline.collabPermissions.viewAllSessionsInLti" bb-translate="course.outline.collab.ultraCollabContent.instructorRoomDisabled"></p>\n                </div>\n              </div>\n            </div>\n          </div>\n          <bb-overflow-menu bb-foundation-defer ng-show="courseOutline.collabUltraEnabled && courseOutline.isCollabSettingsDropDownAvailable()"\n                            element-id="collab-dropdown"\n                            element-name="{{courseOutline.getLocalizedTextByKey(\'course.outline.collaborate\')}}"\n                            menu-items="courseOutline.getOverflowMenuItems()"\n                            analytics-id-tag-prefix="course.outline.collab.overflowMenu">\n          </bb-overflow-menu>\n        </div>\n        <div class="small-12 medium-4 large-12" ng-if="courseOutline.attendanceEnabled">\n          <a href="javascript:void(0);"\n             class="element-card js-open-attendance"\n             bb-peek-sref="{{course.canModifyAttendance ? \'attendance\' : \'attendance-student-view\'}}"\n             analytics-id="course.outline.attendance.link">\n            <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="attendance"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.attendance.title</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" ng-if="course.canModifyAttendance" bb-translate>course.outline.attendance.markAttendance</p>\n                <p class="blue-link" ng-if="!course.canModifyAttendance" bb-translate>course.outline.attendance.viewRecords</p>\n              </div>\n            </div>\n          </a>\n        </div>\n        <div class="small-12 medium-4 large-12"\n             ng-if="courseOutline.shouldShowSelfEnrollmentLink()"\n             id="course-groups-link">\n          <a href="javascript:void(0);"\n             class="element-card js-open-self-enroll-courses"\n             bb-peek-sref="course-group-enroll"\n             analytics-id="course.outline.groups.openEnroll.link">\n            <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="groups"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.groups.title</span>\n                <span class="is-new-label" bb-translate>\n                  course.outline.groupWorkspace.student.new\n                </span>\n              </div>\n              <div class="content">\n                <span class="blue-link" bb-translate>\n                  course.outline.groupWorkspace.student.content.plural\n                </span>\n              </div>\n            </div>\n          </a>\n        </div>\n        <div class="small-12 medium-4 large-12 announcements" id="announcements-link" ng-if="courseOutline.isAnnouncementsEnabled">\n          <a href="javascript:void(0);"\n             class="element-card js-announcement-list"\n             ng-click="courseOutline.openAnnouncementsPanel()"\n             ng-class="{\'isNotClickable\': courseOutline.disableAnnouncementsClickForStudent()}"\n             aria-disabled="{{courseOutline.disableAnnouncementsClickForStudent()}}"\n             tabindex="{{courseOutline.disableAnnouncementsClickForStudent() ? -1 : 0}}"\n             analytics-id="course.outline.announcements.link">\n            <div class="element-image icon" data-status="offline">\n              <bb-svg-icon size="medium" icon="announcements"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.announcements.title</span>\n              </div>\n              <div ng-if="courseOutline.announcementsTotalCount > -1" class="content">\n                <span ng-if="courseOutline.announcementPermissions.viewUnposted && courseOutline.announcementsTotalCount > 0" class="blue-link" bb-translate translate-values="{ postedCount: courseOutline.announcementsPostedCount, totalCount: courseOutline.announcementsTotalCount }">course.outline.announcements.instructor.content</span>\n                <span ng-if="courseOutline.announcementPermissions.create && courseOutline.announcementsTotalCount === 0" class="js-create-announcement create-new blue-link" bb-translate>course.outline.announcements.instructor.createNew</span>\n                <span ng-if="!courseOutline.announcementPermissions.viewUnposted && courseOutline.announcementsTotalCount > 0" class="js-view-archive blue-link" bb-translate translate-values="{ totalCount: courseOutline.announcementsTotalCount }">course.outline.announcements.student.content</span>\n                <span ng-if="!courseOutline.announcementPermissions.create && courseOutline.announcementsTotalCount === 0" bb-translate class="js-announcement-link disable">course.outline.announcements.student.noContent</span>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div class="small-12 medium-4 large-12"\n             id="books-and-tools-link">\n          <a class="element-card"\n             bb-peek-sref="books-and-tools({ parentId: courseOutline.rootNode.id })"\n             analytics-id="course.outline.booksAndTools.link">\n             <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="edit-tool"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.booksAndTools.name</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" bb-translate course-org-token-resolver>course.outline.booksAndTools.content</p>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div>\n          <div class="card-question-banks small-12 medium-4 large-12"\n               id="question-banks-link"\n               bb-course-entitlement="course.pool.MODIFY" course-id="courseOutline.courseId" entitlement-action="show">\n            <a href="javascript:void(0);"\n               class="element-card js-question-banks"\n               bb-peek-sref="question-banks"\n               analytics-id="course.outline.questionBanks.link">\n              <div class="element-image icon" data-status="offline">\n                <bb-svg-icon size="medium" icon="question-bank"></bb-svg-icon>\n              </div>\n              <div class="element-details">\n                <div class="name">\n                  <span bb-translate>course.outline.questionBanks.name</span>\n                </div>\n                <div class="content">\n                  <p class="blue-link" bb-translate>course.outline.questionBanks.content</p>\n                </div>\n              </div>\n            </a>\n            <div class="guidance-wrapper">\n              <div bb-guidance-target\n                   ng-if="courseOutline.shouldShowQuestionBanksGuidance"\n                   class="guidance-anchor"\n                   component-key="{{::courseOutline.questionBanksNavGuidanceKey}}">\n              </div>\n              <bb-guidance class="guidance-element-overlay push-left"\n                           ng-if="courseOutline.shouldShowQuestionBanksGuidance"\n                           component-key="{{::courseOutline.questionBanksNavGuidanceKey}}">\n                <bb-translate course-org-token-resolver>course.outline.questionBanks.guidance</bb-translate>\n              </bb-guidance>\n            </div>\n          </div>\n        </div>\n\n        <div class="small-12 medium-4 large-12"\n             id="course-outline-conversion-link"\n             ng-if="courseOutline.hasConversionReport()">\n          <a href="javascript:void(0);"\n             class="element-card"\n             bb-peek-sref="conversion-risk-analysis"\n             analytics-id="course.outline.conversionReport.link">\n            <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="default-conversion-exceptions"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.conversionException.name</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" bb-translate course-org-token-resolver>course.outline.conversionException.content</p>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        \x3c!-- Institution cloud storage if exists --\x3e\n        <div class="small-12 medium-4 large-12 js-inst-cloud-storage" id="cloud-storage-link" remove-from-dom="true"\n             ng-if="courseOutline.hasInstitutionAccount()">\n          <a href="javascript:void(0);"\n             class="element-card"\n             ng-click="courseOutline.launchInstitutionAccount()"\n             analytics-id="course.outline.institutionAccount.link">\n            <div class="element-image icon" data-status="offline">\n              <bb-svg-icon size="medium" icon="{{courseOutline.getCloudStorageIcon()}}"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate="base.tools.{{::courseOutline.instAccount.type}}"></span>\n              </div>\n              <div class="content">\n                <span class="blue-link">{{courseOutline.getInstConnectString()}}</span>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div class="small-12 medium-4 large-12 course-details-extension">\n          <bb-registration-portal-host\n            selector="courseOutline.detailPortalType"\n            portals="courseOutline.detailPortals"\n            portal-type="courseOutline.detailPortalType"\n          />\n        </div>\n\n        \x3c!--Student Preview--\x3e\n        <div class="small-12 medium-4 large-12 student-preview" id="student-preview-link" bb-feature-toggle="studentPreview" remove-from-dom="true"\n           ng-if="courseOutline.showPreviewButton && !courseOutline.currentCourse.isComplete()">\n          <a href="javascript:void(0);"\n             class="element-card js-student-preview-list"\n             ng-click="courseOutline.showFirstTimeConfirmationModal()"\n             bb-guidance-target\n             component-key="course.outline.studentPreview.ftue.startPreview.tooltipHeader"\n             analytics-id="course.outline.studentPreview.link">\n            <div class="element-image icon" data-status="offline">\n              <bb-svg-icon size="medium" icon="visible"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate course-org-token-resolver>course.outline.studentPreview.name</span>\n              </div>\n              <div class="content enter-preview-mode">\n                <span class="blue-link" bb-translate course-org-token-resolver>course.outline.studentPreview.content</span>\n              </div>\n            </div>\n          </a>\n          <bb-guidance\n            component-key="course.outline.studentPreview.ftue.startPreview.tooltipHeader"\n            class="guidance-element-overlay">\n            <h3 bb-translate course-org-token-resolver>course.outline.studentPreview.ftue.startPreview.tooltipHeader</h3>\n            <p bb-translate course-org-token-resolver>course.outline.studentPreview.ftue.startPreview.tooltipContent</p>\n          </bb-guidance>\n        </div>\n\n      </aside>\n\n      <div class="columns medium-12 large-9 outline-column dropzoneTarget">\n        <div ng-if="courseOutline.isAnnouncementsEnabled">\n          <announcement-slide></announcement-slide>\n        </div>\n        <div class="outline-header inventory-header">\n          <h2 class="js-course-skip-link-target content-header" bb-translate="course.outline.contentHeaderLabel" course-org-token-resolver></h2>\n          <div id="copy-details-ftue" bb-foundation-defer>\n            <bb-guidance ng-if="courseOutline.shouldShowCopyDetailsOverflowGuidance"\n                class="guidance-element-overlay"\n                component-key="course.copyError"\n                page-container-selector=".course-outline">\n              <bb-translate course-org-token-resolver>course.outline.viewCopyDetails</bb-translate>\n            </bb-guidance>\n            <bb-overflow-menu ng-show="courseOutline.canCopyOrImport() || courseOutline.canArchive || courseOutline.canExport || courseOutline.canAccessBatchEdit"\n                              element-id="ddm-course-operation"\n                              element-name="{{courseOutline.getLocalizedTextByKey(courseOutline.outlineLocalePrefix + \'.courseContent\')}}"\n                              on-menu-toggle="courseOutline.handleOutlineMenuToggle(isOpen)"\n                              menu-items="courseOutline.getCourseOperationOverflowMenuItems()"\n                              analytics-id-tag-prefix="course.outline.copyDetails.overflowMenu">\n            </bb-overflow-menu>\n          </div>\n        </div>\n\n        <div class="spinner bb-secondary-color-2" ng-if="courseOutline.isLoading || !$root.bbOffcanvasOpened" aria-hidden="true"></div>\n        <div class="element-card-list inventory js-content-outline" bb-mouse-leave-enter="content-outline">\n          <div ng-show="courseOutline.isEmpty">\n            <div ng-if="!courseOutline.canCreateAllContent()" class="js-student-view-empty">\n              <div class="is-empty-wrapper js-course-skip-link-target">\n                <div class="is-empty-explanation">\n                  <img src="./static/images/ftue/course-outline-zero-state-illustration.png" alt="" bb-translate-attrs="{title: \'course.outline.student.emptyCourse.illustrationAlt\'}" />\n                  <h1 class="is-empty-heading">\n                    <span ng-if="courseOutline.currentCourse.isComplete()" bb-translate="course.outline.student.emptyCourse.complete.header" course-org-token-resolver></span>\n                    <span ng-if="!courseOutline.currentCourse.isComplete()" bb-translate="course.outline.student.emptyCourse.header" course-org-token-resolver></span>\n                  </h1>\n                  <span ng-if="!courseOutline.currentCourse.isComplete()" bb-translate="course.outline.student.emptyCourse.message" course-org-token-resolver></span>\n                </div>\n              </div>\n            </div>\n            <div ng-if="courseOutline.canCreateAllContent()" bb-feature-toggle="!learningModule" remove-from-dom="true">\n              <div class="ready-for-content">\n                <div class="is-empty-wrapper">\n                  <div class="is-empty-explanation">\n                    <img src="./static/images/ftue/course-outline-zero-state-illustration.png" alt="" bb-translate-attrs="{alt: \'course.outline.emptyCourse.illustrationAlt\'}" />\n                    <h1 class="is-empty-heading" bb-translate="course.outline.emptyCourse.header" course-org-token-resolver></h1>\n                    <span bb-translate="course.outline.emptyCourse.message" course-org-token-resolver></span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="guidance-wrapper guidance-wrapper-add-control">\n            <bb-guidance ng-if="courseOutline.shouldShowOutlineGuidance && !courseOutline.isEmpty" class="guidance-element push-top"\n                        component-key="{{courseOutline.addContentGuidanceKey}}" page-container-selector=".course-outline">\n              <bb-translate>course.outline.addContent</bb-translate>\n            </bb-guidance>\n            <div bb-guidance-target component-key="{{courseOutline.addContentGuidanceKey}}" keep-guidance-when-focusout="true" class="guidance-click-through"></div>\n          </div>\n          <div id="copy-details-notification-ftue">\n            <bb-guidance ng-if="courseOutline.shouldShowCopyDetailsNotification && courseOutline.hasCurrentCopyDetailsErrors" class="guidance-element-overlay"\n              component-key="course.copyErrorNotification" page-container-selector=".course-outline">\n              <bb-translate>course.outline.copyErrorsNotification</bb-translate>\n            </bb-guidance>\n          </div>\n          <div id="copy-errors-notification" ng-if="courseOutline.shouldShowCopyDetailsNotification && courseOutline.hasCurrentCopyDetailsErrors"\n            role="alert" aria-live="assertive" aria-labelledby="copy-errors-notification-content-title copy-errors-notification-content-message">\n            <bb-svg-icon size="medium" icon="attention" status="alert"></bb-svg-icon>\n            <div id="copy-errors-notification-content">\n              <div id="copy-errors-notification-content-title" bb-translate>course.outline.notificationCopyDetails.title</div>\n              <div>\n                <span id="copy-errors-notification-content-message" bb-translate translate-values="{count: courseOutline.copyDetailsErrorCount}">\n                  course.outline.notificationCopyDetails.message.plural\n                </span>\n                <a href="javascript:void(0);"\n                   bb-translate\n                   ng-click="courseOutline.openCopyDetailsPanel()"\n                   analytics-id="course.outline.notificationCopyDetails.viewDetails">\n                  course.outline.notificationCopyDetails.viewDetails\n                </a>\n              </div>\n            </div>\n            <bb-svg-icon size="small" icon="close" tabindex="0" ng-click="courseOutline.copyDetailsNotificationDismissed()"\n                         analytics-id="course.outline.copyDetailsNotificationDismis.button"></bb-svg-icon>\n          </div>\n          <div ng-if="courseOutline.isEmpty && courseOutline.rootNode.canEdit() && courseOutline.canMove" class="js-student-view-empty" >\n            <div class="is-empty-page">\n              <div class="is-empty-wrapper">\n                <div class="is-empty-explanation">\n                  <img src="./static/images/ftue/ftuMMicon_BuildContent_assessment.svg" alt="" aria-hidden="true" />\n                  <h3 course-org-token-resolver class="is-empty-heading" bb-translate>course.outline.emptyCourse.zeroStateHeader</h3>\n                  <span bb-translate>course.outline.emptyCourse.zeroStateDesc</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div ng-switch="courseOutline.canCreateAllContent()">\n            <div ng-switch-when="true">\n              <bb-file-upload url="/v1/files" data="{}" allow-multiple="true" is-content="true" click-enabled="false" hide-transclude-during-upload="false"\n                              use-default-success-method="false" skip-zip-file-check="true">\n                <bb-content-outline\n                  ng-if="::$root.bbOffcanvasOpened || undefined"\n                  show-content-import-progress="{{::courseOutline.showContentImportProgress}}"\n                  context-area="courseOutline.contextArea"\n                  is-first="true"\n                  contents="courseOutline.rootNode.children"\n                  load-more-children="courseOutline.loadMoreChildren"\n                  parent-folder="courseOutline.rootNode"\n                  on-file-drop-handler="courseOutline.onFileDropHandler"\n                  on-move-handler="courseOutline.moveItem"\n                  on-move-into-folder-handler="courseOutline.moveItemIntoFolder"\n                  can-move="courseOutline.canMove"\n                  can-create="courseOutline.rootNode.children.canCreate()"\n                  can-copy-import="courseOutline.canCopyOrImport()"\n                  bb-key-hide-ftue="{{courseOutline.addContentGuidanceKey}}">\n                </bb-content-outline>\n              </bb-file-upload>\n            </div>\n            <div ng-switch-when="false">\n              <bb-content-outline\n                ng-if="::$root.bbOffcanvasOpened || undefined"\n                show-content-import-progress="{{::courseOutline.showContentImportProgress}}"\n                context-area="courseOutline.contextArea"\n                is-first="true"\n                contents="courseOutline.rootNode.children"\n                load-more-children="courseOutline.loadMoreChildren"\n                parent-folder="courseOutline.rootNode"\n                on-move-handler="courseOutline.moveItem"\n                on-move-into-folder-handler="courseOutline.moveItemIntoFolder"\n                can-move="courseOutline.canMove"\n                can-create="courseOutline.rootNode.children.canCreate()"\n                can-copy-import="courseOutline.canCopyOrImport()"\n                bb-key-hide-ftue="{{courseOutline.addContentGuidanceKey}}">\n              </bb-content-outline>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div id="roster-content">\n    <div ui-view></div>\n  </div>\n  <div ng-if="courseOutline.isStudentMembership()" bb-feature-toggle="courseNotice" remove-from-dom="true">\n    <bb-notice course-id="{{courseOutline.courseId}}" bb-notice-class="{{::courseOutline.courseColorClass}}"/>\n  </div>\n\n  <bb-content-import-status-bar display="courseOutline.showImportCopyStatusBar"\n                                task-id="courseOutline.importCopyTaskId"\n                                ng-attr-import-task-id="{{::courseOutline.workingImportCopyTaskId}}"\n                                course-id="courseOutline.currentCourse.id"></bb-content-import-status-bar>\n</div>\n'},rtZE:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var o=n("D57K"),i=n("nsO7"),s=n("wHJ2"),r="ultra.service.RecursionHelper",a="recursionHelper",c=function(){function e(e){this.$compile=e,this.compileContents=i.memoize(this.compileContents)}return e.prototype.compileContents=function(e,t){return this.$compile(t)},e.prototype.compile=function(e,t,n){var i=this;s.isFunction(n)&&(n={post:n});var r=t.contents();return t.empty(),{pre:n&&n.pre?n.pre:null,post:function(t,s){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];var l=i.compileContents(e,r);l(t,(function(e){s.append(e)})),n&&n.post&&n.post.apply(null,Object(o.__spreadArrays)([t,s],a))}}},e.$inject=["$compile"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(c);s.module(r,[]).service(a,c)},"s7x+":function(e,t){e.exports='<bb-modal class="js-course-status-modal-PREVIEW notification" modal-title-key="{{previewModalTitleKey}}"\n          modal-dismiss-key=""\n          analytics-id-tag-prefix="course.outline.previewCourse">\n  <div name="modal-contents">\n    <p bb-translate="course.outline.previewCourse.modalText" course-org-token-resolver></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          ng-click="$parent.$close(\'OPEN\')" \n          class="button js-course-status-OPEN js-primary-button"\n          analytics-id="course.outline.previewCourse.open.button">\n    <span bb-translate="course.outline.previewCourse.makeOpen" course-org-token-resolver></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          ng-click="$parent.$close()" \n          class="button button--secondary js-course-status- js-secondary-button"\n          analytics-id="course.outline.previewCourse.close.button">\n    <span bb-translate="global.cancel"></span>\n  </button>\n</bb-modal>'},sB2Z:function(e,t){e.exports='<div class="content-wrapper name" ng-class="{\'nocontent\': !content.canViewAsInstructor()}">\n  <ng-switch on="content.getContentDisplay().viewHandler()" ng-class="{\'has-indicator\': content.ui.hasIndicator}">\n    <div ng-switch-when="resource/x-bb-folder" class="engagement-folder">\n      <bb-content-item-folder></bb-content-item-folder>\n    </div>\n    <a ng-switch-when="resource/x-bb-forumlink"\n       bb-peek-sref="discussion.view.with-grading({contentId:content.id})"\n       bb-prevent-click-if="content.isConditionalReleaseLocked()"\n       ng-attr-tabindex="{{ content.isConditionalReleaseLocked() ? -1 : 0 }}"\n       class="content-title"\n       analytics-id="content.item.engagement.outline.forumLink.link"\n       aria-describedby="activity-indicator-{{::content.id}}"\n    >\n      <span>{{ content.title }}</span>\n    </a>\n    <div ng-switch-default class="content-title">{{ content.title }}</div>\n    <bb-svg-icon role="img" aria-hidden="false" bb-translate-attrs="::{\'aria-label\':\'components.directives.content-item-base.aria-label.indicator\'}" ng-if="content.ui.hasIndicator" id="activity-indicator-{{::content.id}}" class="indicator" size="small" icon="activity-indicator" status="active"></bb-svg-icon>\n  </ng-switch>\n  <div ng-if="content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date">\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-if="!dueDate" class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-if="dueDate && !gradeDetail" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-if="dueDate && !gradeDetail" class="content-due-date"></bb-datetime>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date"\n       ng-class="{\'is-late\': contentItemBase.isLate}" ng-switch="dueDate != null">\n    \x3c!-- submission card --\x3e\n    \x3c!--  TODO: submissionCard is disabled until LRN-101279 is fixed --\x3e\n    \x3c!-- <bb-submission-card ng-if="gradeDetail"  grade-detail="gradeDetail" inline="true"></bb-submission-card>\n    <bb-submission-card ng-if="!gradeDetail" grading-column="gradingColumn" inline="true"></bb-submission-card> --\x3e\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-switch-default class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-switch-when="true" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-switch-when="true" class="content-due-date"></bb-datetime>\n  </div>\n  <div ng-if="contentItemBase.isModifyPermissionLoaded && content.canHaveAttempts() && content.isGroupContent" class="group-info">\n    <div class="group-name">\n      <span><bb-svg-icon size="small" icon="groups"></bb-svg-icon></span>\n      <a href="javascript:void(0);"\n         ng-if="contentItemBase.hasViewGroupsAsAdmin"\n         ng-click="contentItemBase.editGroups()"\n         analytics-id="content.item.engagement.outline.contentItemBase.editGroups.link"\n      >\n        <bb-group-count content="content"></bb-group-count>\n      </a>\n      <span ng-if="contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin">\n        <bb-group-count content="content"></bb-group-count>\n      </span>\n      <div ng-if="!contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin" class="title">\n        <bb-group-student-enrollment content="content"></bb-group-student-enrollment>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.isConditionalReleaseLocked()"\n    role="tooltip"\n    class="lock-info"\n    tabindex="0"\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    tooltip-position="bottom"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n    tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n    <span bb-translate="components.directives.content-item-base.conditionalRelease.lock-info"></span>\n    <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n  </div>\n  <div class="student-created-info" ng-if="::contentItemEngagementOutline.isDiscussionCreatedByStudent()">\n    <span bb-translate="components.directives.content-item-base.content.discussionAuthorship.student"></span>\n  </div>\n  <div class="name-controls stop-click-propagation"\n    ng-class="{\n      \'name-conditional-release\': !content.canViewAsInstructor() && content.isConditionalReleaseLocked(),\n      \'selector-disabled\': content.isInForcedSequenceModule()\n    }"\n    ng-if="contentItemBase.showVisibility()">\n    <bb-content-visibility-selector content="content"\n                                    link-content="contentItemBase.targetContent"\n                                    onchange-func="contentItemBase.updateContentVisibility()"\n                                    disable-restricted="contentItemBase.disableRestricted"\n                                    open-panel-on-restricted="true"\n                                    verbose-restricted-label="true"></bb-content-visibility-selector>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.isConditionalRelease()" class="conditional-release-control">\n    <div class="rules">\n      <a href="javascript:void(0);"\n        ng-click="contentItemEngagementOutline.openConditionalRelease()"\n        bb-complex-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n        tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n        tooltip-auto-update="true"\n        tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n        tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n        analytics-id="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}.link">\n        <span bb-translate="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}"></span>\n        <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},sBez:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("GY9d"),s="ultra.components.directives.bbUiIcon.Message";Object(o.a)(i.a,s,"bbUiIconMessage")},"sOA/":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("zYa8"),i=n("RrOo"),s="ultra.components.directives.bbUiIcon.Test";Object(o.a)(i.Test,s,"bbUiIconTest")},sa5q:function(e,t){e.exports='<div ng-switch on="content.canViewAsInstructor() || !content.shouldRestrict()">\n  \x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n  <a class="content-title"\n     bb-peek-sref="content-manage.edit.document({id:content.id})"\n     ng-switch-when="true"\n     ng-class="{\'name-middle\': contentItemBase.shouldAlignMiddle()}"\n     aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n     analytics-id="content.item.page.edit.document.link"><span>{{ content.title }}</span></a>\n  <span class="content-title"\n        ng-switch-default\n        ng-class="{\'name-middle\': contentItemBase.shouldAlignMiddle()}">{{ content.title }}</span>\n</div>'},sbY4:function(e,t){e.exports='<p class="summary js-feedback" ng-if="::interactiveBodyContent.content.feedback" ng-bind-html="::interactiveBodyContent.content.feedback"></p>\n<span ng-if="::interactiveBodyContent.content">\n  <span class="stream-grade-controls">\n\n    <button id="streamEntryBodyViewGradeButton{{::interactiveBodyContent.id}}"\n            class="button button--secondary round small"\n            ng-click="interactiveBodyContent.showTheContent()"\n            bb-click-focus="#grade-value{{::interactiveBodyContent.id}} .wrapping-input-style"\n            ng-hide="interactiveBodyContent.showContent"\n            bb-translate bb-translate-attrs="{ \'aria-label\': \'base.stream.entryBody.grades.viewGrade\' }"\n            analytics-id="base.stream.entryBody.grades.viewGrade">\n      base.stream.entryBody.grades.viewGrade\n    </button>\n    \x3c!--removing aria-hidden as it is redundant ng-show is enough as it hides the content\n    cleaning this up to prevent potential bugs--\x3e\n    <div class="js-grade stream-grade"\n         ng-show="interactiveBodyContent.showContent">\n      <bb-display-grade id="grade-value{{::interactiveBodyContent.id}}" class="grade-value"\n                        column="interactiveBodyContent.content.column" grade-detail="interactiveBodyContent.content"\n                        schema="interactiveBodyContent.content.schema" display-type="GradeColor" aria-live="assertive"></bb-display-grade>\n      <button class="anchor" id="streamEntryBodyHideGradeLink{{::interactiveBodyContent.id}}"\n         ng-click="interactiveBodyContent.hideTheContent()"\n         bb-click-focus="#streamEntryBodyViewGradeButton{{::interactiveBodyContent.id}}"\n         bb-translate\n         analytics-id="base.stream.entryBody.grades.hideGrade">\n        base.stream.entryBody.grades.hideGrade\n      </button>\n    </div>\n\n  </span>\n  <div class="row js-attemptsRemaining"\n       ng-if="::interactiveBodyContent.content.attemptsRemaining"\n       bb-translate translate-values="{ numberOfAttemptsLeft: {{::interactiveBodyContent.content.attemptsRemaining}} }">\n    base.stream.entryBody.grades.attemptsLeft.plural\n  </div>\n</span>\n'},suMx:function(e,t,n){"use strict";n("WXD6"),n("q1bP");var o=n("wHJ2"),i=n("Nyb7"),s="ultra.components.directives.statistics.complexStatistic",r=function(){function e(e,t,n){this.scope=e,this.element=t,this.$compile=n;var o=this.$compile(this.scope.item().complexTemplate)(this.scope.item().complexScope);t.append(o)}return e.$inject=["scope","element","$compile"],e}(),a=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="A",this.template=i,this.scope={item:"&"},this.link=function(e,n){e.complexStatistic=t.$injector.instantiate(r,{scope:e,element:n})}}return e.$inject=["$injector"],e}();o.module(s,[]).directive("bbComplexStatistic",["$injector",function(e){return e.instantiate(a)}]);var c=n("zphb"),l=function(){function e(e,t){this.scope=e,this.$sce=t,this.scope.item().trusted=t.trustAsHtml(this.scope.item().data)}return e.$inject=["scope","$sce"],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="A",this.template=c,this.scope={item:"&"},this.link=function(e){e.simpleStatistic=t.$injector.instantiate(l,{scope:e})}}return e.$inject=["$injector"],e}();o.module("ultra.components.directives.statistics.simpleStatistic",[]).directive("bbSimpleStatistic",["$injector",function(e){return e.instantiate(d)}]);var u=n("c2Z8");n.d(t,"a",(function(){return p}));var p="ultra.components.directives.statistics",h=function(){function e(e){var t=this;this.scope=e,this.smallPerRow=e.smallPerRow()||1,this.largePerRow=e.largePerRow()||4,this.scope.$watch("config()",(function(e){e&&(t.config=e.length>10?e.slice(0,10):e,t.total=t.config.length)}))}return e.$inject=["scope"],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="AE",this.template=u,this.scope={config:"&",smallPerRow:"&",largePerRow:"&"},this.link=function(e){e.statistics=t.$injector.instantiate(h,{scope:e})}}return e.$inject=["$injector"],e}();o.module(p,["dibari.angular-ellipsis",s,"ultra.components.directives.statistics.simpleStatistic"]).directive("bbStatistics",["$injector",function(e){return e.instantiate(m)}])},t3at:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.outline.alertCourseCompletion.modalTitle"\n          analytics-id-tag-prefix="course.outline.alertCourseCompletion">\n  <div name="modal-contents">\n    <p bb-translate="course.outline.alertCourseCompletion.modalText"></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          id="complete-course" \n          ng-click="$parent.$close()" \n          class="button js-primary-button"\n          analytics-id="course.outline.alertCourseCompletion.makeComplete.button">\n    <span bb-translate="course.outline.alertCourseCompletion.makeComplete"></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          ng-click="$parent.$dismiss()" \n          class="button button--secondary js-secondary-button"\n          analytics-id="course.outline.alertCourseCompletion.back.button">\n    <span bb-translate="global.cancelTakeMeBack"></span>\n  </button>\n</bb-modal>'},tTiy:function(e,t){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options"\n          data-show-add-options ng-click="addContentButton.toggleMenu()"\n          ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n          aria-expanded="{{addContentButton.isMenuVisible}}"\n          aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n          aria-label="{{addContentButton.addButtonAriaLabel}}"\n          ng-focus="addContentButton.showButton()"\n          ng-blur="addContentButton.hideButton()"\n          analytics-id="components.directives.add-content-button.attempts.button">\n  </button>\n  \x3c!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        monitor-leave="true"\n        allow-multiple="true"\n        target-div="{{\'#\' + fileListViewId}}"\n        disable-drag="disableDrag && disableDrag()"\n        hide-transclude-during-upload="false"  is-third-party-upload="false"\n        third-party-download-handler="addContentButton.downloadFile"\n        skip-zip-file-check="true">\n        <div class="columns medium-12" ng-class="{\'medium-center\': attempt.isMobile}">\n          <a href="javascript:void(0);"\n             role="menuitem"\n             bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n             ng-click="addContentButton.toggleMenu()"\n             analytics-id="components.directives.add-content-button.attempts.fileUpload.link">\n            <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n            <span bb-translate>course.content.fileUpload.addFiles</span>\n          </a>\n        </div>\n      </bb-file-upload>\n    </li>\n    <li ng-if="::!addContentButton.isMobile">\n      \x3c!-- Skip zip file check, assignment does not support unzip file(LRN-101238) --\x3e\n      <bb-file-upload allow-multiple="true" monitor-leave="true" is-third-party-upload="true"  hide-transclude-during-upload="false" skip-zip-file-check="true"\n                      click-enabled="false" primary-key="fileListViewId" disable-drag="disableDrag && disableDrag()"\n                      third-party-download-handler="addContentButton.downloadFile" target-div="{{\'#\' + fileListViewId}}">\n        <div class="columns medium-12">\n          <a href="javascript:void(0);"\n             role="menuitem"\n             bb-one-drive\n             is-flatten="false"\n             primary-key="fileListViewId"\n             attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n             bb-translate-attrs="{\'aria-label\':\'components.directives.add-content-button.aria-label.content.oneDrive\'}"\n             ng-click="addContentButton.toggleMenu(\'OneDriveUpload\')"\n             analytics-id="components.directives.add-content-button.attempts.oneDrive.link">\n            <div>\n              <i class="icon-cloud"></i><span bb-translate>components.directives.add-content-button.oneDrive</span>\n            </div>\n          </a>\n        </div>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},tdYh:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=/^\w+\:{1}/},tecA:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return p}));var o=n("wHJ2"),i=n("+4Px"),s=n("g66W"),r="down",a="text-editor-update-original-value",c="text-editor-reset-to-original-value",l="text-editor-viewValue-initialized",d="text-editor-set-pristine",u="text-editor-empty",p=function(){function e(e,t,n,o,i){var s=this;this.scope=e,this.element=t,this.ctrl=n,this.bbLocalize=o,this.bbUltraState=i,this.focusOnAuthorControls=!1,this.isTextTouched=!1,this.myDirection=r,this.preventBlur=!1,this.currentStateName=i.current.name,e.disableInlineEditing=null!=e.disableInlineEditing&&e.disableInlineEditing,this.scope.$stopDigestPropagation=!0,this.originalNgModel=this.scope.ngModel,e.direction&&null!=e.direction()&&(this.myDirection=e.direction());var p=!(this.scope.ngModel&&this.scope.ngModel.length);e.$emit(u,{textEditor:this,isEmpty:p}),e.$root.$on("bb-bbml-editor-bbml-pre-redraw",(function(){s.updateOriginalValues()})),e.$on(d,(function(){s.isTextTouched=!1})),e.$on(l,(function(){s.truncatedViewValue=s.ctrl.$viewValue})),e.$on(c,(function(){s.isDirty()&&s.updateOriginalValues(),s.resetEditor(!1)})),e.$on(a,(function(){s.updateOriginalValues(),s.isTextTouched=!1})),e.$on("$destroy",(function(){s.isTextTouched=!1}))}return e.prototype.isEditorDirty=function(){return this.isTextTouched},e.prototype.getContentLabel=function(){var e=this.getPlaceholderKey();return this.truncatedViewValue||e},e.prototype.getPlaceholderKey=function(){return this.scope.placeholderAttrsValues===this.originalPlaceholderAttrValues&&null!=this.placeholderText||(this.placeholderText=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.scope.placeholderKey,params:this.scope.$eval(this.scope.placeholderAttrsValues)}),this.originalPlaceholderAttrValues=this.scope.placeholderAttrsValues),this.placeholderText},Object.defineProperty(e.prototype,"truncatedViewValue",{get:function(){return this._truncatedViewValue},set:function(e){var t=this.element.find(".editor-element"),n=t.length?t.text():void 0;this._truncatedViewValue=s.h(n,100)},enumerable:!0,configurable:!0}),e.prototype.onChange=function(e){e&&e.keyCode===i.u||this.scope.hasFocus&&(this.isTextTouched=!0,this.scope.onchangeFunc&&this.scope.onchangeFunc({event:e}))},e.prototype.onKeydown=function(e){},e.prototype.isUploadProgressModalOpen=function(){var e=o.element(".progress-indicator-modal");return e&&e.length>0},e.prototype.isAddContentSelectorOpened=function(){return this.bbUltraState.current.name.length>this.currentStateName.length&&s.k(this.bbUltraState.current.name,this.currentStateName)},e.prototype.onBeforeBlur=function(){return!this.preventBlur&&!this.scope.disableInlineEditing},e.prototype.onBlur=function(){return this.scope.hasFocus=!1,this.ctrl.$focused=!1,this.scope.onblurFunc&&this.scope.onblurFunc(),!0},e.prototype.onFocus=function(){this.focusOnAuthorControls=!1,this.scope.readonly()||this.scope.hasFocus||(this.scope.hasFocus=!0,this.ctrl.$focused=!0,this.scope.onFocusFunc&&this.scope.onFocusFunc(),this.scope.$emit("entering-edit-state"))},e.prototype.isDirty=function(){return!(this.originalText||this.isTextTouched)},e.prototype.updateOriginalValues=function(){this.scope.ngModel===this.originalNgModel&&(this.originalText=this.scope.ngModel,this.originalPlainText=this.scope.plainText)},e.prototype.restoreFromOriginalValues=function(){this.originalText||(this.originalText="",this.originalPlainText=""),this.scope.ngModel=this.originalText,this.scope.plainText=this.originalPlainText},e.prototype.resetEditor=function(e){this.restoreFromOriginalValues()},e.prototype.isValidInputLength=function(){var e=null;if(null!=this.scope.getInputMaxLength&&(e=this.scope.getInputMaxLength()),null==e)return!0;if(e){var t=this.scope.plainText;return!!t&&t.trim().length<=e}return!0},e}()},tqR7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("wHJ2"),i=n("lEL+"),s="ultra.components.directives.clickOutside",r=function(){function e(e,t,n,o,i){var s=this;this.scope=e,this.element=t,this.attrs=n,this.$document=o,this.timeout=i;var r=function(e){return s.applyExpression(e)},a=this.getContainer()||o;this.scope.$watch(this.attrs.isActive,(function(e,t){e?s.timeout((function(){a.on("click",r)}),s.scope,0,!1):a.off("click",r)})),this.scope.$on("$destroy",(function(){a.off("click",r)}))}return e.prototype.applyExpression=function(e){var t=this.element.is(e.target),n=this.element.has(e.target).length>0;t||n||this.scope.$apply(this.attrs.bbClickOutside)},e.prototype.getContainer=function(){if("currentPanelOnly"in this.attrs)for(var e=this.element;e.parent().length;)if((e=e.parent()).is(".bb-offcanvas-panel,#main-content-inner"))return e},e.$inject=["scope","element","attrs","$document",i.b],e}(),a=function(){function e(e){var t=this;this.$injector=e,this.priority=100,this.restrict="A",this.compile=function(e,n){return{pre:function(e,n,o){return t.$injector.instantiate(r,{scope:e,element:n,attrs:o})}}}}return e.$inject=["$injector"],e}();o.module(s,[]).directive("bbClickOutside",["$injector",function(e){return e.instantiate(a)}])},u2fd:function(e,t){e.exports='<p class="summary" ng-if="bodyContent().bodyText" ng-bind-html="bodyContent().bodyText"></p>'},uAJz:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-peer-review",use:"icon-small-peer-review-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-peer-review"><path d="M6.5 10C7.8807 10 9 8.8807 9 7.5S7.8807 5 6.5 5 4 6.1193 4 7.5 5.1193 10 6.5 10zM6.5 10C3.2288 10 1 12.5 1 15M11.5 6C12.8807 6 14 4.8807 14 3.5S12.8807 1 11.5 1 9 2.1193 9 3.5 10.1193 6 11.5 6zM12 6c.7226 0 1.4451.464 2 1.0569M10 13l2 2 3-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},uHYt:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-collab",use:"icon-medium-collab-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-collab"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 5h17v4l5-3.9583V19l-5-4v4H1V5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M18 8v8M6 8l2 4-2 4M11 8l2 4-2 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},ufNb:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-away",use:"icon-medium-away-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-away"><path d="M23 12c0 6.0751-4.9249 11-11 11S1 18.0751 1 12 5.9249 1 12 1s11 4.9249 11 11z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 5v7l4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},ujI6:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));n("RB+a"),n("Qc1G");var o=n("wHJ2"),i=n("5iHu"),s=n("tqR7"),r=n("H8CZ"),a=n("lEL+"),c=n("+4Px"),l=n("ytQ2"),d="ultra.components.directives.foundationOffcanvas",u="OFFCANVASE-TOGGLE-CLOSE",p="OFFCANVAS-TOGGLE-OPEN",h=function(){function e(e,t,n,o,s,r,a){var l=this;this.scope=e,this.element=t,this.attrs=n,this.$compile=o,this.$parse=s,this.$q=r,this.timeout=a,this.overrideButtonClass=!1,this.isPanelOpen=!1,this.justOpenedPanel=!1,this.isFromKeyBoard=!1,this.wiredup=!1,this.position="right",this.dialogModel=!1,this.initialProperties(),a((function(){if(l.openButtonElement=i("#"+l.attrs.bbFoundationOffcanvasOpenButton),0===l.openButtonElement.length)throw new Error('The bbFoundationOffcanvas directive couldn\'t find an "Open Menu" button with an ID of '+l.attrs.bbFoundationOffcanvasOpenButton);l.openButtonElement.on("click.bbFoundationOffcanvas",(function(){l.scope.$apply((function(){l.togglePanel()}))})),l.openButtonElement.on("keydown.bbFoundationOffcanvas",(function(e){e.keyCode===c.f&&(l.isFromKeyBoard=!0)}))}),e,0,!1)}return e.prototype.initialProperties=function(){var e=this;this.attrs.bbFoundationOffcanvasPosition&&(this.position=this.attrs.bbFoundationOffcanvasPosition),this.attrs.bbFoundationOffcanvasEventDelegate&&(this.scope.$on(p,(function(){e.openPanel()})),this.scope.$on(u,(function(){e.closePanel()}))),this.attrs.bbFoundationOffcanvasDialogModel&&(this.dialogModel=this.attrs.bbFoundationOffcanvasDialogModel)},e.prototype.wireup=function(){var e=this;return this.wiredup=!0,this.timeout((function(){if(e.closeButtonElement=i("#"+e.attrs.bbFoundationOffcanvasCloseButton),0===e.closeButtonElement.length)throw new Error('The bbFoundationOffcanvas directive couldn\'t find a "Close Menu" button with an ID of '+e.attrs.bbFoundationOffcanvasCloseButton);if(e.wrapperElement=e.element,e.offcanvasPanelElement=e.element.children().children(),1!==e.offcanvasPanelElement.length)throw new Error("bbFoundationOffcanvas directive must have exactly one child element. Fix the usage in the html template.");if(e.offcanvasPanelElement.addClass(e.position+"-off-canvas-menu"),e.attrs.bbFoundationOffcanvasOverrideButtonClass&&(e.overrideButtonClass=e.$parse(e.attrs.bbFoundationOffcanvasOverrideButtonClass)(e.scope)),e.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),e.closeButtonElement.addClass("exit-off-canvas-overlay").on("click.bbFoundationOffcanvas",(function(){e.scope.$apply((function(){e.closePanel()}))})),e.offcanvasPanelElement.find("a, button").last().on("keydown.bbFoundationOffcanvas",(function(t){t.keyCode!==c.u||t.shiftKey||(t.preventDefault(),e.scope.$apply((function(){e.closePanel()})))})),e.offcanvasPanelElement.find("a, button").first().on("keydown.bbFoundationOffcanvas",(function(t){t.keyCode===c.u&&t.shiftKey&&(t.preventDefault(),e.scope.$apply((function(){e.closePanel()})))})),e.scope.$on("foundation-offcanvas-close-panel",(function(){e.closePanel()})),null!=e.attrs.bbFoundationOffcanvasCommonParent){if(e.commonParent=i("#"+e.attrs.bbFoundationOffcanvasCommonParent),0===e.commonParent.length)throw new Error("The bbFoundationOffcanvas directive couldn't find a common parent element with an ID of "+e.attrs.bbFoundationOffcanvasCommonParent)}else e.commonParent=i(e.wrapperElement).parents().has(e.closeButtonElement).first();if(e.commonParent.hasClass("group-list")||e.commonParent.addClass("off-canvas-wrap off-canvas-overlay"),!e.overrideButtonClass){var t=e.offcanvasPanelElement.find("li").not(".ng-hide").length;e.commonParent.addClass("buttons-"+t)}r.b(e.commonParent,(function(t){return e.isPanelOpen&&(t.data.noTransitions||"right"===t.originalEvent.propertyName)&&(e.isFromKeyBoard?e.offcanvasPanelElement.find("a, button").first().focus():(e.offcanvasPanelElement.parent().attr("tabindex",0),e.offcanvasPanelElement.parent().focus())),!1})),e.element.foundation(),e.scope.$on("$destroy",(function(){e.element.off("click.bbFoundationOffcanvas"),e.closeButtonElement.off("click.bbFoundationOffcanvas"),e.offcanvasPanelElement.find("a, button").last().off("keydown.bbFoundationOffcanvas"),e.offcanvasPanelElement.find("a, button").first().off("keydown.bbFoundationOffcanvas"),e.commonParent.removeClass("off-canvas-wrap off-canvas-overlay")}))}),this.scope,0,!1)},e.prototype.getPosition=function(){switch(this.position){case"right":return"left";case"top":return"bottom";case"bottom":return"top";case"left":default:return"right"}},e.prototype._openPanel=function(){var e=this;this.offcanvasPanelElement.css("display","block"),this.justOpenedPanel=!0,this.timeout((function(){e.offcanvasPanelElement.foundation("offcanvas","show","move-"+e.getPosition()),e.isPanelOpen=!0,e.offcanvasPanelElement.find("a, button").attr("tabindex","0"),e.justOpenedPanel=!1}),this.scope,0,!1)},e.prototype.openPanel=function(){var e=this;if(this.wiredup)this._openPanel();else{var t=this.$q.defer();this.scope.$watch("::foundationOffcanvas.wiredup",(function(e){e&&t.resolve()})),this.$q.all([this.wireup(),t.promise]).then((function(){e._openPanel()}))}},e.prototype.closePanel=function(){var e=this;this.offcanvasPanelElement.foundation("offcanvas","hide","move-"+this.getPosition()),this.isPanelOpen=!1,this.isFromKeyBoard=!1,this.offcanvasPanelElement.parent().removeAttr("tabindex"),this.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),this.openButtonElement.focus(),this.timeout((function(){e.isPanelOpen||e.offcanvasPanelElement.css("display","none")}),this.scope,300,!1)},e.prototype.handleClickOutside=function(){this.dialogModel||i("body").hasClass("modal-open")||this.justOpenedPanel||this.closePanel()},e.prototype.togglePanel=function(){this.isPanelOpen?this.closePanel():this.openPanel()},e.$inject=["scope","element","attrs","$compile","$parse","$q",a.b],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.transclude=!0,this.restrict="E",this.link=function(e,n,o){if(null==o.bbFoundationOffcanvasOpenButton||null==o.bbFoundationOffcanvasCloseButton)throw new Error('Please provide jQuery selectors for both the "Open Menu" and "Close Menu" buttons');var i=o.$observe("bbFoundationOffcanvasCloseButton",(function(s){s&&(e.foundationOffcanvas=t.$injector.instantiate(h,{scope:e,element:n,attrs:o}),i())}))},this.template=l}return e.$inject=["$injector"],e}();o.module(d,[s.a,a.a]).directive("bbFoundationOffcanvas",["$injector",function(e){return e.instantiate(m)}])},vNjs:function(e,t,n){},vcLy:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-started",use:"icon-small-started-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-started"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 8H4s0 4 4 4 4-4 4-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10.8247 9a3.594 3.594 0 01-.2191.5528c-.1907.3814-.461.7323-.8478.9901C9.3773 10.7966 8.825 11 8 11c-.825 0-1.3773-.2034-1.7578-.4571-.3868-.2578-.657-.6087-.8478-.9901A3.5857 3.5857 0 015.1754 9h5.6493z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},"w0/N":function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-rubric",use:"icon-small-rubric-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-rubric"><path d="M11 12h4v3h-4v-3zM4 12h4v3H4v-3zM1 12v3M1 5v3M11 5h4v3h-4V5zM4 5h4v3H4V5zM8 1H4M15 1h-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},wKTs:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-upload",use:"icon-small-upload-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-upload"><path d="M14 5h1v9H1V5h1M6 4l2-2 2 2M8 10V2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},wdQf:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-medium-course-complete",use:"icon-medium-course-complete-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-course-complete"><path d="M19 1v4" stroke-width="2" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 11h5v3h-5zM8 5v18" /><path d="M21 1H3v22h9M3.5 5H21v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 19l4 4 7-8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},wnWX:function(e,t,n){},wy9x:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("wHJ2"),i=n("Jwnl"),s="ultra.components.directives.content.contentItem.contentItemType.contentItemFolder",r=function(){function e(e,t,n){this.scope=e,this.element=t,this.attrs=n}return e.prototype.toggleFolder=function(){this.scope.$emit("toggle-folder",this.scope.content)},e.prototype.shouldAlignMiddle=function(){var e=this.scope.content;return!e.canViewAsInstructor()&&(!e.description&&(!e.isVisible()||!e.adaptiveReleaseRules))},e.$inject=["scope","element","attrs"],e}(),a=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=i,this.scope=!1,this.link=function(e,n,o){e.contentItemFolder=t.$injector.instantiate(r,{scope:e,element:n,attrs:o})}}return e.$inject=["$injector"],e}();o.module(s,[]).directive("bbContentItemFolder",["$injector",function(e){return e.instantiate(a)}])},xAaQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("wHJ2"),i=n("wy9x"),s=n("jhBu"),r=n("Sa5G"),a=n("TnpK"),c=n("sB2Z"),l="ultra.components.directives.content.contentItem.contentItemEngagementOutline",d=function(){function e(e,t,n){var o=this;this.scope=e,this.entitlementService=t,this.ultraState=n,this.entitlementService.hasCourseEntitlement(r.f.ModifyContent,this.scope.content.courseId).then((function(e){o.entitledToModifyContent=e}))}return Object.defineProperty(e.prototype,"canOpenConditionalRelease",{get:function(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)},enumerable:!0,configurable:!0}),e.prototype.openConditionalRelease=function(){this.isCourseCompletedAndInInstructorView()||this.ultraState.goPeekState("conditional-release",{id:this.scope.content.id})},e.prototype.isCourseCompletedAndInInstructorView=function(){return!this.scope.content.canEdit()&&this.scope.content.canViewAsInstructor()},e.prototype.isDiscussionCreatedByStudent=function(){var e,t=!1,n=null===(e=this.scope.content.contentDetail)||void 0===e?void 0:e["resource/x-bb-forumlink"];return n&&(t=n.isDiscussionCreatedByStudent),!!t},e.$inject=["scope",s.b,a.d],e}(),u=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=c,this.scope=!1,this.link=function(e){e.contentItemEngagementOutline=t.$injector.instantiate(d,{scope:e})}}return e.$inject=["$injector"],e}();o.module(l,[i.a,a.b]).directive("bbContentItemEngagementOutline",["$injector",function(e){return e.instantiate(u)}])},xS64:function(e,t,n){},xpqL:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var o=n("D57K"),i=n("wHJ2"),s=n("nsO7"),r=n("7C3+"),a=n("0JpG"),c=n("pjml"),l=n("iG2q"),d=n("yC9S"),u=n("adx1"),p=n("MOka"),h=n("z6Q5"),m=n("aHpC"),b="ultra.service.stream.manager",f="streamEntryManager",g=["GB:GB_ATT_UPDATED","GB:GB_GRA_UPDATED","GB:GB_GRA_CLEARED"],v=function(e){function t(t,n,o,i,s,r,a,c,l,u){var p=e.call(this)||this;return p.$log=t,p.$q=n,p.$rootScope=o,p.$timeout=i,p.BatchApiService=s,p.bbLocalize=r,p.streamSettingsService=a,p.CourseModel=c,p.StreamContentModel=l,p.transformer=u,p.providers={},p.entries=[],p.deletedIds=[],p.userCache={},p.courseCache={},p.userCourseAvailabilities={},p.hasMoreData=!0,d.b.OnRootScope(p.$rootScope,"membership.update",(function(e,t,n,o,i,s,r,a){p.userCourseAvailabilities[a]&&(p.userCourseAvailabilities[a][r.id]=t.isAvailable)})),p}return Object(o.__extends)(t,e),t.prototype.loadBundle=function(){return this.bbLocalize.loadBundle("features/base/stream/base-stream")},t.prototype.loadAllStreamEntries=function(e,t){var n=this;return this.$q.all([this.getEntries(t),this.loadBundle()]).then((function(t){return n.hasMoreData&&n.getMoreEntries().then((function(t){e&&e(n.processStreamData(t))})),n.processStreamData(t[0])}),(function(){return{entries:[],deletedIds:[]}}))},t.prototype.removeStreamEntryFromServer=function(e){if(e&&e.isImportant&&e.remove)return e.remove();var t=this.$q.defer();return t.reject("Can only remove important notifications with remove method"),t.promise},t.prototype.processStreamEntries=function(e){var t=this;return(e||[]).map((function(e){return e&&t.processStreamEntry(e)})).filter((function(e){return e&&g.indexOf(e.type)<0}))},t.prototype.processStreamEntry=function(e){var t=r.f.getEntryType(e);return this.transformer.getDataTransformerByType(t).convert(e)},t.prototype.processGroupStreamEntry=function(e,t){var n=this.transformer.getDataTransformerByType(t);if(n.group)try{return n.group(e)}catch(e){this.$log.log(e)}else this.$log.log("Method for grouping stream entries does not exist for data transformer used for processing entries with type of "+t);return e},t.prototype.processStreamData=function(e,n){var o=this;void 0===n&&(n=[]);var i={entries:this.processStreamEntries(e.entries),deletedIds:e.deletedIds},r=new Set;return i.entries.filter((function(e){var t=e.courseId,n=e.entrySpecificData;return t&&s.at(n||{},"streamUser.avatar.permanentUrl")[0]})).filter((function(e){var n=e.courseId;return(new Date).getTime()-(o.userCourseAvailabilities[n]||{_lastUpdatedAt:0})._lastUpdatedAt>t.MIN_INTERNAL_COURSE_MEMBERSHIP_FETCH_IN_MS})).forEach((function(e){var t=e.courseId;r.add(t)})),n.push(this.BatchApiService.performBatch((function(){r.forEach((function(e){o.CourseModel.$new(e).memberships.$fetch({limit:1e4}).$asPromise().then((function(t){var n=o.userCourseAvailabilities[e]||(o.userCourseAvailabilities[e]={});n._lastUpdatedAt=(new Date).getTime(),t.forEach((function(e){n[e.userId]=e.isAvailable}))}))}))}))),i},t.prototype._reset=function(){this.startTime=Date.now(),this.lastCall=null,this.entries=[],this.deletedIds=[]},t.prototype.getEntries=function(e){return this._reset(),this._getRawEntries(!1,e)},t.prototype.getMoreEntries=function(){var e=this.$q.when({entries:[],deletedIds:[]});return this.hasMoreData?this.getEntries(!1):e},t.prototype._shouldKeepLoading=function(){return Date.now()-this.startTime<this.gracePeriod&&this.hasMoreData},t.prototype._collectEntries=function(e){return this.entries=this.entries.concat(e.sv_streamEntries),this.deletedIds=this.deletedIds.concat(e.sv_deletedIds),this.$emitEvent("STREAM_CONTENT_PULLED",{entries:this.processStreamEntries(e.sv_streamEntries),deletedIds:e.sv_deletedIds}),this._shouldKeepLoading()?this._getRawEntries(!0,!1):this.$q.when({entries:this.entries,deletedIds:this.deletedIds})},t.prototype._getRawEntries=function(e,n){var o=this,i=this.lastCall?Math.max(0,t.GET_ENTRIES_CALL_INTERVAL-(Date.now()-this.lastCall)):0;return this.$timeout((function(){o.lastCall=Date.now();var i=o._generatePayload(e,n);return o.StreamContentModel.$new(t.ULTRA_STREAM_ID).$fetch(i).$asPromise().then((function(e){return o._processProviders(e.sv_providers),o._cacheCourses(e.sv_extras.sx_courses),o._cacheUsers(e.sv_extras.sx_users),o.gracePeriod=1e3*e.sv_autoDisplayGracePeriodSeconds,o.hasMoreData=e.sv_moreData,o._populateExtras(e.sv_streamEntries),o._collectEntries(e)})).catch((function(e){return o.hasMoreData=!1,o.$rootScope.$emit(t.STREAMS_LOADING_ERROR_EVENT),o.$q.reject(e)}))}),i)},t.prototype._processProviders=function(e){var t=this;e&&e.forEach((function(e){t.providers[e.sp_provider]={sp_provider:e.sp_provider,sp_newest:e.sp_newest,sp_oldest:e.sp_oldest,sp_refreshDate:e.sp_refreshDate}}))},t.prototype._cacheCourses=function(e){var t=this;(e||[]).forEach((function(e){t.courseCache[e.id]=t.CourseModel.$build(e)}))},t.prototype._cacheUsers=function(e){var t=this;e.filter((function(e){return null!=e.sx_user})).forEach((function(e){t.userCache[e.sx_id]=e.sx_user}))},t.prototype._populateExtras=function(e){var n=this,o=Object.keys(this.userCache).length>0,i=Object.keys(this.courseCache).length>0;e.forEach((function(e){if(e.ui={},o&&(e.ui.streamUser=e.se_userId&&n.userCache[e.se_userId]||null),i){var a=r.f.getCourseId(e);e.ui.streamCourse=a&&n.courseCache[a]||null}e.itemSpecificData=s.omitBy(e.itemSpecificData,s.isNull);var c=t.DETAIL_NAMES[e.providerId];if(c){var l=e.itemSpecificData[c];s.defaults(l,s.omit(e.itemSpecificData,c))}}))},t.prototype._generatePayload=function(e,t){var n=!!i.isDefined(t)&&t;return{providers:this.providers,forOverview:!1,retrieveOnly:e,flushCache:n}},t.prototype.$onStreamPulled=function(t){return e.prototype.$onEvent.call(this,"STREAM_CONTENT_PULLED",t)},t.STREAMS_LOADING_ERROR_EVENT="streams-fetching-error",t.MIN_INTERNAL_COURSE_MEMBERSHIP_FETCH_IN_MS=3e4,t.GET_ENTRIES_CALL_INTERVAL=1e3,t.ULTRA_STREAM_ID="ultra",t.DETAIL_NAMES={"bb-announcement":"notificationDetails",bb_blog:"blogDetails",bb_calendar:"calendarDetails",bb_disc:"discussionboardDetails","bb-evidence-collection":"evidenceDetails",bb_mygrades:"gradeDetails",bb_deployment:"learnDeploymentDetails",bb_message:"messageDetails","bb-nautilus":"notificationDetails",bb_Wiki:"wikiDetails"},t=Object(o.__decorate)([Object(o.__param)(0,Object(m.b)("$log")),Object(o.__param)(1,Object(m.b)("$q")),Object(o.__param)(2,Object(m.b)("$rootScope")),Object(o.__param)(3,Object(m.b)("$timeout")),Object(o.__param)(4,Object(m.b)(h.b)),Object(o.__param)(5,Object(m.b)(a.serviceName)),Object(o.__param)(6,Object(m.b)(p.b)),Object(o.__param)(7,Object(m.b)(c.o.serviceName)),Object(o.__param)(8,Object(m.b)(c.sb.serviceName)),Object(o.__param)(9,Object(m.b)(l.c))],t)}(u.a);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(o.__extends)(t,e)}(v);i.module(b,[c.Q,h.a,l.b,p.a]).service(f,v)},xwJZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("ERkP"),i=n("12Zt"),s=Object(i.a)(o.createElement(o.Fragment,null,o.createElement("path",{fill:"var(--icon-fill-color)",stroke:"transparent",fillRule:"evenodd",d:"M10.5 1C12.9853 1 15 3.0147 15 5.5V27h2.5l1 5 8-5h5c2.4853 0 4.5 2.0147 4.5 4.5S33.9853 36 31.5 36h-21C8.0147 36 6 33.9853 6 31.5v-26C6 3.0147 8.0147 1 10.5 1z",clipRule:"evenodd"}),o.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"M4 9H1V4c0-2 1-3 2.5-3m0 0h30.1552C34.9448 1 36 2.08 36 3.4V10M3.5 1C5 1 6 2 6 4v33h30V22"}),o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M22.8859 30.9856l13.2322-13.2322c.9763-.9763.9763-2.5593 0-3.5356l-.4645-.4644c-.9763-.9763-2.5592-.9763-3.5355 0L18.8859 26.9856l4 4zM33.8859 19.9856l-4-4M22.8859 30.9856l-6 2 2-6 4 4z"}),o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",d:"M11 9h19M11 13h15M11 17h11M11 21h8"})),"large")},xwlO:function(e,t,n){var o=n("ziER"),i=n("5JeM"),s=new o({id:"icon-small-bulk-edit",use:"icon-small-bulk-edit-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-bulk-edit"><path d="M7 15H1V4h11v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M15 5V1H4v3M15 8l-2-1-3 6v2l2-1 3-6z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(s);e.exports=s},y95c:function(e,t,n){},yGpi:function(e,t){e.exports='<div bb-load-bundle="components/directives/folder" class="folder" ng-class="{\'is-empty-folder\': content.children.length === 0 && folder.showEmptyMenu, \'learning-module\': content.isLearningModule()}" bb-cache-compilation="content-folder">\n  <div bb-drop-handler on-move-handler="onMoveHandler" on-move-into-folder-handler="onMoveIntoFolderHandler" on-file-drop-handler="onFileDropHandler" content="content" is-folder-open="folder.isOpen" next-content-id="nextContentId" previous-content-id="previousContentId">\n    <div ng-if="::(!content.isLearningModule())" class="row collapse element-list-row folder-row-container js-parent js-course-skip-link-target" can-create="canCreate" bb-content-item-mouseover ng-class="{open: folder.isOpen, \'is-conditional-release\': content.isConditionalReleaseLocked()}" bb-click-to-invoke-child="button.content-title">\n      <bb-content-item-base contents="contents" content="content" context-area="folder.contextArea" can-move="canMove"></bb-content-item-base>\n      <div class="list-tree-toggle" ng-if="folder.canToggle()">\n        <button class="button super-clear"\n                ng-click="folder.toggleFolder()"\n                aria-controls="{{::\'folder-contents-\' + content.id}}"\n                aria-expanded="{{folder.isOpen}}"\n                bb-translate-attrs="{\'aria-label\':\'components.directives.folder.aria-label.toggle-folder\'}"\n                translate-attrs-values="{folderName: content.title}"\n                analytics-id="course.content.folder.toggle.button">\n          <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n        </button>\n      </div>\n    </div>\n\n    <div ng-if="::(content.isLearningModule())" ng-class="{open: folder.isOpen}">\n      <bb-learning-module-base-item content="content" contents="contents" context-area="folder.contextArea" can-toggle="::folder.canToggle()"\n        toggle-func="folder.toggleFolder()" can-move="canMove" is-open="folder.isOpen">\n      </bb-learning-module-base-item>\n    </div>\n  </div>\n  <div ng-attr-id="{{::(content.isLearningModule() ? \'learning-module-contents-\' : \'folder-contents-\') + content.id}}" class="folder-contents" aria-expanded="{{folder.isOpen}}" ng-class="{\'not-empty\': content.children && content.children.length > 0}">\n    <div ng-if="(content.children.length > 0 || folder.showOutlineOverride) && folder.isOpen">\n      <bb-content-outline hide-add-menu-override="folder.showOutlineOverride" on-file-drop-handler="onFileDropHandler" on-move-handler="onMoveHandler"\n                          on-move-into-folder-handler="onMoveIntoFolderHandler" load-more-children="loadMoreChildren" parent-folder="folder.content"\n                          contents="folder.content.children" can-create="canCreate" can-move="canMove" context-area="folder.contextArea"\n                          can-copy-import="canCopyImport"></bb-content-outline>\n    </div>\n    <div class=\'drag-element\'>\n      <div bb-drop-handler\n        ng-show="content.children.length === 0"\n        on-move-handler="onMoveHandler"\n        on-move-into-folder-handler="onMoveIntoFolderHandler"\n        on-file-drop-handler="onFileDropHandler"\n        content="{id: content.id + \'blank\', parentId: content.id, depth: content.depth + 1}"\n        empty-target\n      >\n        <span class="empty-message" ng-if="content.children.length === 0  && folder.showEmptyMenu"\n          ng-class="{\'foder-in-force-sequence-empty-message\': content.isForcedSequenceItem()}"\n          bb-translate="{{\n            content.isForcedSequenceItem() && canCreate? \'components.directives.folder.emptyInSequence\':\n              (content.isLearningModule() ? \'components.directives.learning-module.empty\' : \'components.directives.folder.empty\')\n          }}">\n        </span>\n        \x3c!-- (|| false) keep showMenuOverride in watch status in add-content-button directive --\x3e\n        \x3c!-- use ng-show instead of ng-if to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n        <ng-switch on="::content.isLearningModule()">\n          <bb-add-content-button ng-switch-when="false" show-menu-override="folder.showMenuOverride || false" depth="(content.depth + 1)" content="content"\n                                 root-content="rootContent()" parent-id="content.id" position-before="\'start\'"\n                                 ng-show="canCreate && folder.showEmptyMenu && !content.isForcedSequenceItem()" context-area="folder.contextArea"\n                                 can-copy-import="canCopyImport" folder-nested-button="true"></bb-add-content-button>\n          <bb-add-content-button ng-switch-when="true" show-menu-override="false" depth="(content.depth + 1)" content="content"\n                                 root-content="content" parent-id="content.id" position-before="\'start\'"\n                                 is-render-by-default="true"\n                                 class="empty-lm-add-content-btn"\n                                 ng-show="canCreate && folder.showEmptyMenu && !content.isForcedSequenceItem()" context-area="folder.contextArea"\n                                 can-copy-import="canCopyImport" folder-nested-button="true"></bb-add-content-button>\n        </ng-switch>\n      </div>\n    </div>\n  </div>\n</div>\n'},yMoE:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("D57K"),i=n("pjml"),s=n("oi1r"),r=n("o5Lu"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(i.I.ScaleType),c=function(){function e(e,t,n,o,i){this.grade=e,this.$q=t,this.gradeDetail=n,this.scope=o,this.schemaService=i,this.wasValueErased=!1}return e.prototype.init=function(e,t){var n=this;this.column=e;var o=function(e){n.schema=e,n.scaleType=null==e?void 0:e.scaleType};return t?this.$q.when(o(t)):this.schemaService.loadGradeSchema(e).then((function(e){o(e)}))},e.prototype.shouldShowTotalPoints=function(){return null!=this._displayValue&&(this.schema&&this.schema.scaleType&&i.I.ScaleType.Score.isEqualTo(this.schema.scaleType)&&!this.isDisplayValueTooLargeForTotalPoints())},e.prototype.isDisplayValueTooLargeForTotalPoints=function(){return this._displayValue&&this._displayValue.toString().length>r.f.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL},Object.defineProperty(e.prototype,"displayGrade",{set:function(e){var t,n;if(e)switch(this._nonFormattedScore=e.score,this._perfCode=e.perfCode,this._perfCode?this.perfCodeDesc=this._perfCode.description:this.perfCodeDesc="",this.displayValue=this.grade.getGradeToDisplay(e,this.scope,null===(t=this.schema)||void 0===t?void 0:t.scaleType),null===(n=this.schema)||void 0===n?void 0:n.scaleType){case i.I.ScaleType.Tabular.toString():var s=null;if(this._perfCode)s={perfCode:this._perfCode};else if(this.column.externalGrade&&this.gradeDetail&&this.gradeDetail.isOverrideGrade()){var r=this.gradeDetail.pointsPossible||this.column.possible||100;s={score:a=this._nonFormattedScore&&this._nonFormattedScore*r/100}}else s={score:this._nonFormattedScore};this._parsedValue=this.grade.getGradeToDisplay(s,this.scope,i.I.ScaleType.Score.toString());break;case i.I.ScaleType.Percent.toString():var a=this._nonFormattedScore&&this._nonFormattedScore/100*this.column.possible;this._parsedValue=this.grade.getGradeToDisplay({score:a},this.scope,i.I.ScaleType.Score.toString());break;case i.I.ScaleType.Score.toString():this._parsedValue=this.displayValue;break;case i.I.ScaleType.Complete.toString():this._parsedValue=this.grade.getGradeToDisplay(Object(o.__assign)(Object(o.__assign)({},e),{grade:null}),this.scope,this.schema.scaleType);break;case i.I.ScaleType.Text.toString():this._parsedValue=e.grade}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayValue",{get:function(){return this._displayValue},set:function(e){this.wasValueErased=this.grade.wasGradeCleared(this.displayValue,e),this._displayValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parsedValue",{get:function(){return this._parsedValue},set:function(e){this._parsedValue=e},enumerable:!0,configurable:!0}),e.prototype.hasPerfCode=function(){return!!this._perfCode},e.prototype.getGradeColor=function(){var e,t;return(null===(t=null===(e=this.gradeDetail)||void 0===e?void 0:e.displayGrade)||void 0===t?void 0:t.isOverride)&&this.column.externalGrade||a.Text.isEqualTo(this.scaleType)?"gray":this.displayValue?a.Percent.isEqualTo(this.scaleType)?this.grade.getPercentileColor(this._nonFormattedScore):this.getGradeColorScoreSchema():void 0},e.prototype.getGradeColorScoreSchema=function(){var e=this.gradeDetail?this.gradeDetail.pointsPossible:this.column.possible;if(e>0){var t=this._nonFormattedScore/e*100;return this.grade.getPercentileColor(t)}return"na"},e.$inject=[r.h,"$q","gradeDetail","scope",s.b],e}()},yV5t:function(e,t){e.exports='<a class="content-title" \n   ng-click="contentItemScormLaunch.scormLaunch()" \n   href="javascript:void(0);"\n   aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n   analytics-id="content.item.scormlaunch.link">\n  <span>{{ content.title }}</span>\n</a>'},ytQ2:function(e,t){e.exports='<div ng-if="::foundationOffcanvas.wiredup || undefined"\n      class="bb-foundation-offcanvas"\n      ng-transclude\n      bb-click-outside="foundationOffcanvas.handleClickOutside()"\n      is-active="foundationOffcanvas.isPanelOpen"\n      aria-hidden="{{!foundationOffcanvas.isPanelOpen}}"\n      current-panel-only>\n</div>'},"z+6U":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("wHJ2"),i=n("sa5q"),s="ultra.components.directives.content.contentItem.contentItemType.contentItemPage",r=function(){function e(e){this.scope=e}return e.prototype.shouldAlignMiddle=function(){return!this.scope.content.canViewAsInstructor()},e.$inject=["scope"],e}(),a=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=i,this.scope=!1,this.link=function(e,n,o){e.contentItemPage=t.$injector.instantiate(r,{scope:e,element:n,attrs:o})}}return e.$inject=["$injector"],e}();o.module(s,[]).directive("bbContentItemPage",["$injector",function(e){return e.instantiate(a)}])},zByx:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("X+qL"),n("ufNb"),n("82Nl");var o=n("wHJ2"),i=n("0JpG"),s=n("J4qU"),r=n("4qUd"),a="ultra.components.directives.calendar.scheduleOutline",c=function(){function e(e,t,n){this.scope=e,this.scheduleService=t,this.localize=n,this.nextEventDates=Object.create(null),this.showMore=!1}return e.prototype.getSchedules=function(){var e=this.scope.scheduleOutlineCollection();return this.orderScheduleByRecentDate(e),e.length>2?(this.showMore=!0,e=this.scope.scheduleOutlineCollection().slice(0,2),this.orderScheduleByRecentDate(e)):this.showMore=!1,e},e.prototype.orderScheduleByRecentDate=function(e){var t=this;return e.sort((function(e,n){var o=t.getNextDateToSort(e),i=t.getNextDateToSort(n),s=0;return o<i?s=-1:o>i&&(s=1),s}))},e.prototype.getNextDateToSort=function(e){switch(e.recurRules.freq){case"DAILY":return this.getNextDailyEventDate(e);case"MONTHLY":return this.getNextEventDate(e);default:return e.startDate}},e.prototype.getWeeklyRepeatLabel=function(e){return this.scheduleService.getWeeklyRepeatLabel(e,"scheduleOutline.weekdayDelimiter",this.scope.weekDayFormat,this.localize.getLocale(this.scope))},e.prototype.getNextEventDate=function(e){return this.scheduleService.getNextMonthlyEventDate(e,this.nextEventDates)},e.prototype.getNextDailyEventDate=function(e){return this.scheduleService.getNextDailyEventDate(e,this.nextEventDates)},e.prototype.areAnyLocationsSet=function(){return this.scope.scheduleOutlineCollection().some((function(e){return!!e.location}))},e.$inject=["scope",s.b,i.serviceName],e}(),l=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=r,this.scope={scheduleOutlineCollection:"&",compact:"&",weekDayFormat:"@?"},this.link=function(e){e.scheduleOutline=t.$injector.instantiate(c,{scope:e}),e.TRUNCATION_LOCATION_COURSE_CARD=20,e.TRUNCATION_LOCATION_OUTLINE=35}}return e.$inject=["$injector"],e}();o.module(a,[s.a]).directive("bbScheduleOutline",["$injector",function(e){return e.instantiate(l)}])},zphb:function(e,t){e.exports='<div class="simple-statistic-contents" ng-class="::item().cssClass">\n  <div bb-tooltip enhanced-tooltip="true" data-tooltip-on-overflow-only="true" title="{{ ::item().data }}">\n    <div class="stat-data"\n         ng-attr-aria-label="{{ item().aria ? item().aria : undefined }}"\n         data-ng-bind-html="::item().trusted"\n         data-ellipsis></div>\n  </div>\n  <div ng-if="::item().subtext" class="stat-sub-text" bb-translate>{{ ::item().subtext }}</div>\n  <div ng-if="::!item().subtext && item().reserveSubtextSpace" class="stat-sub-text" aria-hidden="true">&nbsp;</div>\n</div>'}}]);