(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"/C4M":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("ERkP"),r=n("7nmT"),o=n("K2uC"),s=n("MEdB"),i=n("LStL"),c=n("uDfI"),l=n("8unJ"),u=n("ACGm");t.PanelModeEnum=u.default;var m=n("tN4z"),d=function(e,t,n,o,s){var i=n;null==n&&"undefined"!=typeof window&&window.location.search.match("setLang=")&&(i=window.location.search.match(/setLang=([^$&]+)/)[1]),r.render(a.createElement(m.AnalyticsJssThemeProvider,{theme:"light"},a.createElement(l.Locale,{locale:i,babelfishInstance:o,babelfishFormatInstance:s,bundlesToLoad:["announcements/locales/[locale]/announcements.json"]},a.createElement("div",null,e))),t)};t.renderAnnouncementListPanel=function(e,t,n,r,s,i,l,u){d(a.createElement(c.Provider,{store:t},a.createElement(o.default,{courseId:i,permissions:l,root:e,openAnnouncementDetailPanel:u})),e,n,r,s)},t.renderAnnouncementDetailPanel=function(e,t,n,r,o,i,l,u,m,p,h){d(a.createElement(c.Provider,{store:t},a.createElement(s.default,{courseId:i,announcementId:l,permissions:u,mode:m,closePanel:p,pluginConfig:h})),e,n,r,o)},t.renderAnnouncementSlide=function(e,t,n,r,o,s,l,u,m,p){d(a.createElement(c.Provider,{store:t},a.createElement(i.default,{courseColorClass:s,fetchAnnouncementSlides:l,dismissAnnouncementItem:p,onOpenAllAnnouncements:u,openAnnouncementDetail:m})),e,n,r,o)};var p={renderAnnouncementListPanel:t.renderAnnouncementListPanel,destroyAnnouncementListPanel:function(e){r.unmountComponentAtNode(e)},renderAnnouncementDetailPanel:t.renderAnnouncementDetailPanel,destroyAnnouncementDetailPanel:function(e){r.unmountComponentAtNode(e)},renderAnnouncementSlide:t.renderAnnouncementSlide,destroyAnnouncementSlide:function(e){r.unmountComponentAtNode(e)}};t.default=p},"504r":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("D57K"),r=n("ERkP"),o=n("MC1S"),s=n("n7/H"),i=n("myse");n("wzET"),t.getDatePickerDefaultStrings=function(e){return{months:[e.translate("course.announcements.datePicker.months.january"),e.translate("course.announcements.datePicker.months.february"),e.translate("course.announcements.datePicker.months.march"),e.translate("course.announcements.datePicker.months.april"),e.translate("course.announcements.datePicker.months.may"),e.translate("course.announcements.datePicker.months.june"),e.translate("course.announcements.datePicker.months.july"),e.translate("course.announcements.datePicker.months.august"),e.translate("course.announcements.datePicker.months.september"),e.translate("course.announcements.datePicker.months.october"),e.translate("course.announcements.datePicker.months.november"),e.translate("course.announcements.datePicker.months.december")],shortMonths:[e.translate("course.announcements.datePicker.shortMonths.january"),e.translate("course.announcements.datePicker.shortMonths.february"),e.translate("course.announcements.datePicker.shortMonths.march"),e.translate("course.announcements.datePicker.shortMonths.april"),e.translate("course.announcements.datePicker.shortMonths.may"),e.translate("course.announcements.datePicker.shortMonths.june"),e.translate("course.announcements.datePicker.shortMonths.july"),e.translate("course.announcements.datePicker.shortMonths.august"),e.translate("course.announcements.datePicker.shortMonths.september"),e.translate("course.announcements.datePicker.shortMonths.october"),e.translate("course.announcements.datePicker.shortMonths.november"),e.translate("course.announcements.datePicker.shortMonths.december")],days:[e.translate("course.announcements.datePicker.days.sunday"),e.translate("course.announcements.datePicker.days.monday"),e.translate("course.announcements.datePicker.days.tuesday"),e.translate("course.announcements.datePicker.days.wednesday"),e.translate("course.announcements.datePicker.days.thursday"),e.translate("course.announcements.datePicker.days.friday"),e.translate("course.announcements.datePicker.days.saturday")],shortDays:[e.translate("course.announcements.datePicker.shortDays.sunday"),e.translate("course.announcements.datePicker.shortDays.monday"),e.translate("course.announcements.datePicker.shortDays.tuesday"),e.translate("course.announcements.datePicker.shortDays.wednesday"),e.translate("course.announcements.datePicker.shortDays.thursday"),e.translate("course.announcements.datePicker.shortDays.friday"),e.translate("course.announcements.datePicker.shortDays.saturday")],goToToday:e.translate("course.announcements.datePicker.goToToday"),prevMonthAriaLabel:e.translate("course.announcements.datePicker.prevMonthAriaLabel"),nextMonthAriaLabel:e.translate("course.announcements.datePicker.nextMonthAriaLabel"),prevYearAriaLabel:e.translate("course.announcements.datePicker.prevYearAriaLabel"),nextYearAriaLabel:e.translate("course.announcements.datePicker.nextYearAriaLabel")}};var c=function(e){function n(t){var n=e.call(this,t)||this;return n.timeoutPromiseWrapper=function(e,t,a){return new Promise((function(r){e.apply(n,t),setTimeout((function(){var n=e.apply(a,t);r(n)}))}))},n.errorMessage=function(){var e=n.props,t=e.isValueValid,a=e.errorEmptyMessage,s=e.errorFormatMessage;if(!t){var i=s;return n.state.uiDateStr||(i=a),r.createElement("span",{className:"error-message"},r.createElement(o.SvgIcon,{iconSize:"small",iconName:"attention"}),i)}return null},n.toggleCalendar=function(){n.setState((function(e){return{isDisplayCalendar:!e.isDisplayCalendar}}),(function(){n.state.isDisplayCalendar&&setTimeout((function(){n.calRef.focus()}),100)}))},n.onSelectDate=function(e){var t=n.props,a=t.localize,r=t.onChangeValue;n.timeoutPromiseWrapper(a.formatDate,[e,s.ILocaleDateFormat.Short],a).then((function(t){r(e),n.setState({uiDateStr:t}),n.toggleCalendar()}))},n.onTypeDate=function(e){n.setState({uiDateStr:e.target.value})},n.onHandleBlur=function(){var e=n.state.uiDateStr,t=n.props,a=t.onChangeValue,r=t.localize;setTimeout((function(){n.datePickerRef.contains(document.activeElement)||n.setState({isDisplayCalendar:!1})})),n.timeoutPromiseWrapper(r.parseDate,[e,s.ILocaleDateFormat.Short],r).then((function(e){e&&a(e)}))},n.state={isDisplayCalendar:!1,uiDateStr:""},n}return a.__extends(n,e),n.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.value,a=t.onChangeValue,r=t.localize;n&&this.timeoutPromiseWrapper(r.formatDate,[n,s.ILocaleDateFormat.Short],r).then((function(t){a(n),e.setState({uiDateStr:t})}))},n.prototype.componentDidUpdate=function(e,t){var n=this,a=this.state.uiDateStr,r=this.props,o=r.value,i=r.onValidateCallback,c=r.disabled,l=r.localize;o&&o!==e.value&&this.timeoutPromiseWrapper(l.formatDate,[o,s.ILocaleDateFormat.Short],l).then((function(e){n.setState({uiDateStr:e}),i(!0)})),o||o===e.value||(this.setState({uiDateStr:""}),i(!0)),this.state.uiDateStr===t.uiDateStr||c||this.timeoutPromiseWrapper(l.parseDate,[a,s.ILocaleDateFormat.Short],l).then((function(e){i(!!e)}))},n.prototype.render=function(){var e=this,n=this.state,a=n.isDisplayCalendar,s=n.uiDateStr,c=this.props,l=c.value,u=c.disabled,m=c.localize,d=c.analyticsId,p=(0,c.analyticsEventAugmentor)(i.AnalyticsEventTypes.CLICK_EVENT,(function(){}),d+".input.text");return r.createElement("div",{ref:function(t){return e.datePickerRef=t},className:"date-picker"},r.createElement("div",{className:"calendar-input-container","data-analytics-id":d+".input.text"},r.createElement("input",{className:"date-input",ref:function(t){return e.dateInputRef=t},type:"text",value:s,onChange:this.onTypeDate,disabled:u,onClick:p,onBlur:this.onHandleBlur}),r.createElement(o.IconButton,{ariaLabel:m.translate("course.announcements.datePicker.dueDate"),className:"btn-date open-datepicker",disabled:u,iconProps:{iconName:"calendar",iconSize:"small"},onClick:this.toggleCalendar,title:m.translate("course.announcements.datePicker.dueDate"),analyticsId:d+".open.button"}),this.errorMessage()),a&&r.createElement(o.Callout,{target:this.dateInputRef,doNotLayer:!0,directionalHint:5,isBeakVisible:!1,gapSpace:0,setInitialFocus:!1},r.createElement(o.Calendar,{componentRef:function(t){return e.calRef=t},className:"date-picker-dropdown",value:l,strings:t.getDatePickerDefaultStrings(m),isMonthPickerVisible:!1,showGoToToday:!1,onSelectDate:this.onSelectDate,analyticsId:d+".calendar"})))},n}(r.PureComponent);t.DatePicker=c,t.default=i.withAnalytics(c)},ACGm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("D57K"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.VIEW=new t("view"),t.CREATE=new t("create"),t.EDIT=new t("edit"),t.DUPLICATE=new t("duplicate"),t.DELETE=new t("delete"),t}(n("nbDY").default);t.default=r},B1ff:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("D57K"),r=n("ERkP"),o=n("wgY5"),s=n("MC1S"),i=n("caKH"),c=n("ACGm"),l=n("KBkc");n("q3fC");var u=n("myse"),m=n("Pam5"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.timerHandler=null,n.onClickActionMenu=function(e){n.setState({target:e.currentTarget})},n.onOpenDeleteConfirmDialog=function(){n.setState({hideDialog:!1})},n.onCloseDeleteConfirmDialog=function(){n.setState({hideDialog:!0})},n.onOpenAnnouncement=function(){var e=n.props,t=e.courseId,a=e.announcement,r=e.permissions;n.props.openAnnouncementDetailPanel(t,a.id,r)},n.onPostAnnouncement=function(){n.setState({disablePostButton:!0});var e=n.props,t=e.saveAnnouncement,r=e.courseId,s=e.announcement;t(r,a.__assign(a.__assign({},s),{isDraft:!1,startDateRestriction:o().toISOString(),endDateRestriction:""})).catch((function(){return n.setState({disablePostButton:!1})}))},n.onEditAnnouncement=function(){n.setState({disablePostButton:!1});var e=n.props,t=e.courseId,a=e.announcement,r=e.permissions;n.props.openAnnouncementDetailPanel(t,a.id,r,c.default.EDIT)},n.onDuplicateAnnouncement=function(){var e=n.props,t=e.courseId,a=e.announcement,r=e.permissions;n.props.openAnnouncementDetailPanel(t,a.id,r,c.default.DUPLICATE)},n.onDeleteAnnouncement=function(){var e=n.props,t=e.removeAnnouncement,a=e.announcement,r=e.loadAnnouncements,o=e.courseId;t(a.courseId,a.id).then((function(){n.onCloseDeleteConfirmDialog(),r(o,{})}))},n.isPostedAnnouncement=function(e){return!(e.isDraft||e.startDateRestriction&&o(e.startDateRestriction).isAfter(o()))},n.getActionOptions=function(e){var t=n.props,a=t.permissions,r=t.analyticsId,o=t.analyticsEventAugmentor,s={items:[]},i=o(u.AnalyticsEventTypes.CLICK_EVENT,n.onEditAnnouncement,r+".listItem.edit.button"),l=o(u.AnalyticsEventTypes.CLICK_EVENT,n.onDuplicateAnnouncement,r+".listItem.duplicate.button"),m=o(u.AnalyticsEventTypes.CLICK_EVENT,n.onOpenDeleteConfirmDialog,r+".listItem.delete.button");return a&&a.modify&&s.items.push({key:c.default.EDIT,name:e.translate("course.announcements.button.edit"),iconProps:{iconName:"draw",iconSize:"small"},onClick:i}),a&&a.create&&s.items.push({key:c.default.DUPLICATE,name:e.translate("course.announcements.button.duplicate"),iconProps:{iconName:"duplicate",iconSize:"small"},onClick:l}),a&&a.delete&&s.items.push({key:c.default.DELETE,name:e.translate("course.announcements.button.delete"),iconProps:{iconName:"trash",iconSize:"small"},onClick:m}),s},n.renderItemStatus=function(){var e=n.props,t=e.announcement,a=e.localize,o=e.permissions,i=e.analyticsId,c=e.isCourseAvailable,u=e.isCompact,m="course.announcements.status."+(n.isPostedAnnouncement(t)?"posted":"inSchedule")+"."+(u?"uppercase":"capitalize");return t.isDraft&&(m="course.announcements.status.draft"),r.createElement("div",{className:"item-status-info"},t.isDraft&&o.modify?r.createElement(s.DefaultButton,{"data-automation-id":"test",text:a.translate("course.announcements.button.postNow"),onClick:n.onPostAnnouncement,disabled:!o.viewUnposted||!c||n.state.disablePostButton,analyticsId:i+".listItem.postNow"}):r.createElement("div",null,r.createElement("span",{className:"list-item-status"},o.viewUnposted&&a.translate(m)),r.createElement("span",{className:"list-item-date-sent"},t.startDateRestriction&&!t.isDraft&&l.displayDateTime(t.startDateRestriction,a))))},n.registerTimeoutEvent=function(){var e=n.props,t=e.debounceTime,a=e.onExpire,r=e.announcement;n.timerHandler=setTimeout((function(){a(r.id)}),t)},n.renderDialog=function(){var e=n.props,t=e.localize,a=e.analyticsId;return r.createElement(i.UltraModalDialog,{onDismiss:function(){n.setState({hideDialog:!0})},showAsCallout:!n.state.hideDialog,target:n.state.target,dialogContentProps:{type:s.DialogType.actionConfirmation,title:t.translate("course.announcements.dialogText.deleteAnnouncement"),subText:t.translate("course.announcements.dialogText.confirmDeleteAnnouncement"),showCloseButton:!1},analyticsId:a+".listItem.deleteDialog"},r.createElement(s.DialogFooter,null,r.createElement(s.DefaultButton,{onClick:n.onCloseDeleteConfirmDialog,text:t.translate("course.announcements.button.cancel"),analyticsId:a+".listItem.deleteDialog.cancel.button"}),r.createElement(s.PrimaryButton,{onClick:n.onDeleteAnnouncement,text:t.translate("course.announcements.button.delete"),className:"deleteConfirmBtn",analyticsId:a+".listItem.deleteDialog.confirm.button"})))},n.state={hideDialog:!0,target:null,disablePostButton:!1},n}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.isNewlyCreated&&this.registerTimeoutEvent()},t.prototype.componentDidUpdate=function(e){!e.isNewlyCreated&&this.props.isNewlyCreated&&this.registerTimeoutEvent()},t.prototype.componentWillUnmount=function(){this.timerHandler&&clearTimeout(this.timerHandler)},t.prototype.render=function(){var e=this.props,t=e.announcement,n=e.localize,a=e.permissions,o=e.isNewlyCreated,i=e.analyticsId,c=e.analyticsEventAugmentor,d=e.isCompact,p=this.getActionOptions(n),h=c(u.AnalyticsEventTypes.CLICK_EVENT,this.onOpenAnnouncement,i+".listItem.open.link");return r.createElement("tr",{className:"announcement-item-row "+(o?"is-new":""),role:"row"},r.createElement("td",{className:"announcement-header-column "+(a.viewUnposted?"small-1-2":"large-1"),role:"gridcell"},r.createElement("div",{className:"announcement-header"},r.createElement("div",{className:"small-1-1 announcement-icon"+(t.isDraft?" is-restricted":"")},r.createElement("div",{className:"element-image"},r.createElement(m.Announcement,{color:"primary"}))),r.createElement("div",{className:"click-message-detail"},r.createElement("div",{className:"announcement-title-detail"},r.createElement("a",{className:"list-item-title "+(a.viewUnposted?"entitled":"")+" ",href:"#","data-analytics-id":i+".listItem.open.link",onClick:h},l.decodeHtmlEntities(t.title)),t.isDraft&&r.createElement("span",{className:"draft-status one-line"},n.translate("course.announcements.status.draft"))),r.createElement("a",{className:"list-item-body "+(a.viewUnposted?"one-line":"three-lines multiple-line-ellipsis"),href:"#",onClick:this.onOpenAnnouncement},t.body&&l.decodeHtmlBodyText(t.body.rawText))),d&&this.renderItemStatus())),!d&&r.createElement("td",{className:"announcement-status-column",role:"gridcell"}," ",this.renderItemStatus()," "),a.viewUnposted&&r.createElement("td",{className:"announcement-viewers-column",role:"gridcell"},r.createElement("div",{className:"announcement-viewers",onClick:this.onClickActionMenu},r.createElement("span",{className:"list-item-view-count"},t.readCount||0," / ",t.totalParticipants),p&&p.items&&p.items.length>0&&r.createElement(s.ActionMenu,{ariaLabel:""+n.translate("course.announcements.moreOptions",{announcementTitle:t.title}),className:"announcement-item-action-menu",disabled:!this.state.hideDialog,menuProps:p,maintainExpandedProperties:!this.state.hideDialog,analyticsId:i+".listItem.actionMenu"}),this.renderDialog())))},t}(r.Component);t.BaseAnnouncementListItem=d,t.default=u.withAnalytics(d)},EfSB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("D57K"),r=n("ERkP"),o=n("nsO7"),s=n("MC1S"),i=n("myse");n("GrH5");var c=function(e){function t(t){var n=e.call(this,t)||this;return n.debouncedSearch=o.debounce((function(){var e=n.props,t=e.courseId,a=(e.notifyStateChange,e.searchAnnouncements);n.setState({shouldNotify:!0}),n.state.isValidSearch&&a(t,{searchText:encodeURIComponent(n.state.text.trim())})}),n.props.debounceTime),n.focusElement=function(e){e.focus()},n.shouldStartSearching=function(e){return!e.trim().length||e.trim().length>=n.props.minCharToStartSearching},n.showCharacterInsufficient=function(e){return!!e.trim()&&e.trim().length<n.props.minCharToStartSearching},n.handleSearchTextChange=function(e){var t=e.target.value;n.setState({text:t,isValidSearch:n.shouldStartSearching(t),shouldNotify:!1}),n.debouncedSearch()},n.handleEnterToSearch=function(e){var t=n.props,a=t.searchAnnouncements,r=t.courseId,o=t.notifyStateChange;"Enter"===e.key&&(n.setState((function(e){return{isValidSearch:e.text.trim().length>0}})),n.state.isValidSearch&&(o(n.state.text,n.state.isCollapsed,n.state.isValidSearch),a(r,{searchText:encodeURIComponent(n.state.text.trim())})))},n.closeSearchInput=function(){n.setState({text:"",isCollapsed:!0,isValidSearch:!1})},n.state={text:"",isCollapsed:!1,isValidSearch:!1,shouldNotify:!0},n}return a.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.isCollapsed&&!e.searchText.trim().length&&this.debouncedSearch.cancel(),this.setState({text:e.searchText,isCollapsed:e.isCollapsed})},t.prototype.componentDidUpdate=function(e,t){var n=this.props,a=n.isCollapsed,r=n.notifyStateChange;!0===e.isCollapsed&&a!==e.isCollapsed&&this.focusElement(this.searchInput),this.showCharacterInsufficient(this.state.text)?this.searchInput.addEventListener("keyup",this.handleEnterToSearch):this.searchInput.removeEventListener("keyup",this.handleEnterToSearch),this.state.shouldNotify&&r(this.state.text,this.state.isCollapsed,this.state.isValidSearch)},t.prototype.render=function(){var e=this,t=this.props,n=t.localize,a=t.analyticsId,o=(0,t.analyticsEventAugmentor)(i.AnalyticsEventTypes.CLICK_EVENT,(function(){}),a);return r.createElement("div",{className:"search-input-wrap","data-analytics-id":a},r.createElement(s.SvgIcon,{className:"search-icon",iconSize:"small",iconName:"search"}),r.createElement("label",{className:"sr-only",htmlFor:"search-input"},this.props.placeHolder),r.createElement("input",{className:"left",id:"search-input",onChange:this.handleSearchTextChange,placeholder:this.props.placeHolder,ref:function(t){e.searchInput=t},type:"text",value:this.state.text,onClick:o}),r.createElement(s.IconButton,{ariaLabel:n.translate("course.announcements.button.closeSearch"),className:"search-controls button super-clear",iconProps:{iconName:"clear",iconSize:"small"},onClick:this.closeSearchInput,title:n.translate("course.announcements.button.closeSearch"),analyticsId:"course.announcements.listPanel.closeSearch.button"}))},t}(r.PureComponent);t.SearchInput=c,t.default=i.withAnalytics(c)},GrH5:function(e,t,n){},H5dd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("D57K"),r=n("ERkP"),o=n("nsO7"),s=n("kBJj"),i=n("8unJ"),c=n("JfV0"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getEditorElement=function(){return document.querySelector(".bb-editor")},t.prepareEditorPlugins=function(){var e=t.props,n=e.babelfishFormatInstance,r=e.babelfishInstance,o=e.currentLocale,i=e.editor,l=a.__assign(a.__assign({},i.pluginConfig),{babelfishFormatInstance:n,babelfishInstance:r,apiBasePath:c.config.apiBasePath,locale:o,xsrfToken:c.config.xsrf}),u=[s.link(),s.image(),s.video(),s.insertLocalFile(l),s.videoEverywhere(l)];return l.openKloudlessModal&&u.push(s.insertKloudlessFile(a.__assign({openKloudlessModal:l.openKloudlessModal},l))),l.getEmbedSrc&&u.push(s.insertYoutubeVideo(a.__assign({getEmbedSrc:l.getEmbedSrc},l))),u},t.focusEditor=function(){var e=t.getEditorElement();e&&e.focus()},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.editor.isReadOnly||this.focusEditor()},t.prototype.shouldComponentUpdate=function(e){return o.differenceWith([e.editor],[this.props.editor],o.isEqual).length>0},t.prototype.componentDidUpdate=function(){this.props.editor.isReadOnly||this.focusEditor()},t.prototype.render=function(){var e=this.props,t=e.currentLocale,n=e.editor,o=this.prepareEditorPlugins();return r.createElement(s.BbEditor,a.__assign({},n,{locale:t,plugins:o}))},t}(r.Component);t.BaseBbEditorWrapper=l,t.BbEditorWrapper=i.localizedComponentWrapper(l)},K2uC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("D57K"),r=n("ERkP"),o=n("uDfI"),s=n("x6OE"),i=n("O94r"),c=n("MC1S"),l=n("8unJ"),u=n("B1ff"),m=n("EfSB"),d=n("aoM1"),p=n("ACGm"),h=n("KBkc"),f=n("E1pj");n("yVEt");var S=n("JfV0"),v=n("9OUN"),g=2;t.ANNOUNCEMENT_LIMIT=10;var E=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.renderAnnouncementItem=function(e){var t=n.props,a=t.courseId,o=(t.getAnnouncementsCounts,t.courseContext),s=t.localize,i=t.openAnnouncementDetailPanel,c=t.permissions,l=t.removeAnnouncement,m=t.saveAnnouncement,d=t.recentUpdatedAnnouncementIds,p=t.removeFromRecentUpdated,h=t.UltraWindowSize,f=Object.values(n.props.announcements)[e];return r.createElement(u.default,{announcement:f,courseId:a,debounceTime:2e3,isCompact:null==h?void 0:h.isSmallBreakpoint(),isCourseAvailable:o.isAvailable,isNewlyCreated:d&&d.indexOf(f.id)>-1,localize:s,key:f.id,onExpire:p,openAnnouncementDetailPanel:i,permissions:c,removeAnnouncement:l,saveAnnouncement:m,loadAnnouncements:n.loadAnnByCurrentSettings,analyticsId:"course.announcements.listPanel"})},n.onScroll=function(){if(n.list){var e=n.props,t=e.announcements,a=e.paging,r=e.loadAnnouncements,o=e.courseId,s=e.searchInputState,i=e.sortCriteria,c=s.searchText,l=Object.keys(t).length;n.list.getVisibleRange()[1]>=l-1&&l<a.count&&r(o,{offset:l,searchText:c,sort:i},!0)}},n.searchInputStateChange=function(e,t,a){var r=n.props,o=r.searchInputState,s=r.changeSearchInputState;t&&t!==o.isCollapsed?n.onToggleSearchInput():e===o.searchText&&t===o.isCollapsed&&a===o.isValidSearch||s({searchText:e,isCollapsed:t,isValidSearch:a})},n.onToggleSearchInput=function(){var e=n.props,t=e.courseId,a=e.searchInputState,r=e.changeSearchInputState,o=!a.isCollapsed,s=o?"":a.searchText;r({searchText:s,isCollapsed:o}),o&&a.searchText.trim().length>0&&n.loadAnnByCurrentSettings(t,{searchText:s})},n.onSwitchSortCriteria=function(e){var t=n.props,a=t.courseId;(0,t.switchSortCriteria)(e),n.loadAnnByCurrentSettings(a,{sort:e})},n.onCreateAnnouncement=function(){n.props.openAnnouncementDetailPanel(n.props.courseId,null,n.props.permissions,p.default.CREATE)},n.loadAnnByCurrentSettings=function(e,a){var r=n.props,o=r.announcements,s=r.searchInputState,i=r.loadAnnouncements,c=r.sortCriteria,l=a||{},u=null!=l.searchText?l.searchText:!s.isCollapsed&&s.searchText.trim()||"",m=l.sort||c,d=o&&Object.keys(o).length||0;i(e,{searchText:u,limit:l.limit||Math.max(d,t.ANNOUNCEMENT_LIMIT),offset:l.offset||0,sort:m})},n.renderNoResultString=function(e){var t=n.props,a=t.searchInputState,o=t.localize,s=t.isLoading,i=t.paging,c=t.isSearchingSuccessful,l=t.courseContext;return a.searchText?e?r.createElement("p",{className:"search-insufficient","aria-live":"assertive"},o.translate("course.announcements.characterInsufficient")):c&&r.createElement("p",{className:"search-no-results ng-scope","aria-live":"assertive"},o.translate("course.announcements.noSearchResult")):!s&&0===i.count&&a.isCollapsed&&r.createElement("p",{className:"search-no-results ng-scope"},o.translate(h.resolveCourseOrgToken("announcements.noResult",l)))},n.renderAnnouncementListView=function(e){var t=n.props,a=t.localize,o=t.searchInputState,c=t.sortCriteria,l=t.isSearchingSuccessful,u=t.permissions,m=t.courseContext,p=t.UltraWindowSize,f=o.searchText.trim(),v=!o.isCollapsed&&f.length&&f.length<g&&!o.isValidSearch;return e>0&&!v?r.createElement("div",{className:i.default("tabular-list-container",{"-with-seach-bar":!o.isCollapsed})},r.createElement("div",{className:"tabular-list"},r.createElement("table",{className:"table-content sortable-table",role:"grid","aria-readonly":!0,"aria-labelledby":"announcement-table-caption"},r.createElement("caption",{id:"announcement-table-caption",className:"sr-only"},a.translate(h.resolveCourseOrgToken("announcements.pageTitle",m))),r.createElement("thead",{className:"list-item-columns announcement-sort-header"},r.createElement("tr",{className:"list-item-row announcement-sort-row",role:"row"},r.createElement("th",{className:"column-title sort",role:"columnheader",id:"title"},r.createElement(d.default,{courseId:n.props.courseId,currentSort:c,localize:a,onSwitchSortCriteria:n.onSwitchSortCriteria,sortCriteria:[S.SortCriteriaEnum.TITLE_ASC,S.SortCriteriaEnum.TITLE_DESC],viewText:"title",analyticsId:"course.announcements.listPanel.sortByTitle.button"})),!p.isSmallBreakpoint()&&r.createElement("th",{className:"column-"+(u.viewUnposted?"status":"date")+" sort",role:"columnheader",id:u.viewUnposted?"status":"date"},r.createElement(d.default,{courseId:n.props.courseId,currentSort:c,localize:a,onSwitchSortCriteria:n.onSwitchSortCriteria,sortCriteria:u.viewUnposted?[S.SortCriteriaEnum.STATUS_ASC,S.SortCriteriaEnum.STATUS_DESC]:[S.SortCriteriaEnum.DATE_ASC,S.SortCriteriaEnum.DATE_DESC],viewText:n.props.localize.translate(u.viewUnposted?"status":"date"),analyticsId:"course.announcements.listPanel.sortByDate.button"})),u.viewUnposted&&r.createElement("th",{className:"column-viewers sort",role:"columnheader",id:"viewers"},r.createElement(d.default,{courseId:n.props.courseId,currentSort:c,localize:a,onSwitchSortCriteria:n.onSwitchSortCriteria,sortCriteria:[S.SortCriteriaEnum.VIEWS_ASC,S.SortCriteriaEnum.VIEWS_DESC],viewText:"viewers",analyticsId:"course.announcements.listPanel.sortByViews.button"})))),r.createElement(s,{itemsRenderer:function(e,t){return r.createElement("tbody",{ref:t},e)},length:Object.values(n.props.announcements).length,itemRenderer:n.renderAnnouncementItem,ref:function(e){return n.list=e}}),o.isValidSearch&&l&&r.createElement("div",{"aria-live":"polite","aria-hidden":!1,className:"sr-only",role:"status"},a.translate("course.announcements.searchResults"))))):r.createElement("div",{className:"columns small-12 no-result-section"},r.createElement("div",{className:"row"},r.createElement("div",{className:"columns small-12 small-centered text-center ftue-container"},n.renderNoResultString(v))))},n}return a.__extends(n,e),n.prototype.componentDidMount=function(){var e=this.props,t=e.courseId,n=e.courseContext,a=e.getAnnouncementsCounts,r=e.getCourseContext,o=e.permissions,s=e.root,i=e.switchSortCriteria,c=o.viewUnposted?S.SortCriteriaEnum.MODIFIED_DATE_DESC:S.SortCriteriaEnum.DATE_DESC;i(c),this.loadAnnByCurrentSettings(t,{sort:c}),a(t),n&&n.courseId===t||r(t),(s&&s.querySelector(".panel-wrap")||window).addEventListener("scroll",this.onScroll),(s&&s.querySelector(".panel-wrap")||window).addEventListener("touchmove",this.onScroll)},n.prototype.componentDidUpdate=function(e){this.props.listener.refreshAnnouncementsCounts&&!e.listener.refreshAnnouncementsCounts&&this.props.getAnnouncementsCounts(this.props.courseId),this.props.listener.resetSortSetting&&!e.listener.resetSortSetting&&this.props.switchSortCriteria(S.SortCriteriaEnum.MODIFIED_DATE_DESC),this.props.listener.resetSearchSetting&&!e.listener.resetSearchSetting&&this.props.changeSearchInputState({searchText:"",isCollapsed:!0}),this.props.listener.refreshAnnouncements&&!e.listener.refreshAnnouncements&&this.props.loadAnnouncements(this.props.courseId,{searchText:this.props.searchInputState.searchText})},n.prototype.componentWillUnmount=function(){var e=this.props,t=e.root,n=e.clearAnnouncements;(t&&t.querySelector(".panel-wrap")||window).removeEventListener("scroll",this.onScroll),(t&&t.querySelector(".panel-wrap")||window).removeEventListener("touchmove",this.onScroll),n()},n.prototype.render=function(){var e=this.props,t=e.announcements,n=e.paging,a=e.permissions,o=e.searchInputState,s=e.courseId,i=e.courseContext,l=e.localize,u=e.announcementsCounts,d=e.UltraWindowSize,p=t&&Object.keys(t).length||0,f=(null==d?void 0:d.isMediumBreakpoint())||(null==d?void 0:d.isSmallBreakpoint());return r.createElement("div",{className:"page-announcement course-announcement-layer"},r.createElement("div",{className:"panel-wrap"},r.createElement("header",{className:"panel-header simple-header"},r.createElement("div",{className:"panel-titles-container"},r.createElement("span",{className:"panel-sub-title"},i&&i.displayName||""),r.createElement("div",{className:"editable-title-container black-header-contents"},r.createElement(c.IconButton,{ariaLabel:l.translate("base.menu"),className:"left-off-canvas-toggle menu-toggle  standard-button dark-background",iconProps:{iconName:"main-menu"},title:l.translate("base.menu"),analyticsId:"course.announcements.listPanel.menu.button"}),r.createElement("h1",{className:"panel-title"},l.translate(h.resolveCourseOrgToken("announcements.pageTitle",i))))),r.createElement("div",{className:"header-actions-menu__item active no-select"},r.createElement("div",{className:"active no-select"},r.createElement(c.IconButton,{ariaLabel:l.translate("course.announcements.search.placeHolder"),className:"anchor-button",iconProps:{iconName:"search",iconSize:f?"small":"medium"},id:"search-button",onClick:this.onToggleSearchInput,title:l.translate("course.announcements.search.placeHolder"),analyticsId:"course.announcements.listPanel.search.button"})))),r.createElement("div",{className:"guidance-wrapper "+(o.isCollapsed?"":"hide")},u&&n.count>=0&&r.createElement("span",null,a.viewUnposted?l.translate("course.announcements.guidance.instructor",{postedCount:u.postedCount||0,scheduledCount:u.scheduledCount||0})+l.translate("course.announcements.guidance.draftCount.plural",{draftCount:u.draftCount||0}):l.translate("course.announcements.guidance.student",{totalCount:n.count||0})),a.create&&r.createElement(c.IconButton,{ariaLabel:l.translate("course.announcements.createAnnouncement"),className:"create-announcement",iconProps:{iconName:f?"add":"add-circle",iconSize:f?"small":"medium"},onClick:this.onCreateAnnouncement,title:l.translate("course.announcements.createAnnouncement"),analyticsId:"course.announcements.listPanel.create.button"})),r.createElement("div",{className:"panel-content"},r.createElement("div",{className:"row collapse "+(o.isCollapsed?"hide":""),id:"announcement-search"},r.createElement(m.default,{courseId:s,debounceTime:1500,isCollapsed:o.isCollapsed,localize:l,minCharToStartSearching:g,notifyStateChange:this.searchInputStateChange,placeHolder:l.translate("course.announcements.search.placeHolder"),searchAnnouncements:this.loadAnnByCurrentSettings,searchText:o.searchText,analyticsId:"course.announcements.listPanel.search.input.text"})),r.createElement("div",{className:"row collapse"},this.renderAnnouncementListView(p),this.props.isLoading?r.createElement("div",{className:"spinner bb-secondary-color-2"}):""))))},n}(r.PureComponent);t.AnnouncementListPanel=E,t.default=o.connect((function(e){return{announcements:e.announcement.announcements,isLoading:e.announcement.isLoading,isSearchingSuccessful:e.announcement.isSearchingSuccessful,searchInputState:e.announcement.searchInputState,paging:e.announcement.paging,announcementsCounts:e.announcement.announcementsCounts,courseContext:e.announcement.courseContext,sortCriteria:e.announcement.sortCriteria,listener:e.announcement.listener,recentUpdatedAnnouncementIds:e.announcement.recentUpdatedAnnouncementIds}}),(function(e){return v.bindActionCreators({loadAnnouncements:S.actions.announcement.loadAnnouncements,removeAnnouncement:S.actions.announcement.removeAnnouncement,saveAnnouncement:S.actions.announcement.saveAnnouncement,changeSearchInputState:S.actions.announcement.changeSearchInputState,getAnnouncementsCounts:S.actions.announcement.getAnnouncementsCounts,getCourseContext:S.actions.announcement.getCourseContext,switchSortCriteria:S.actions.announcement.switchSortCriteria,clearAnnouncements:S.actions.announcement.clearAnnouncements,removeFromRecentUpdated:S.actions.announcement.removeFromRecentUpdated},e)}))(f.windowResizingResponsiveComponentWrapper(l.localizedComponentWrapper(E)))},K81p:function(e,t,n){},KBkc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("wgY5"),r=n("n7/H"),o=864e5,s="components.directives.duration.agoText";t.displayDateTime=function(e,t){var n="";if(e&&a(e).isValid()){var i=a(e).toDate();if(function(e,t,n){return e>=t&&e<n}((new Date).getTime()-i.getTime(),0,o)){var c=t.formatDuration(i,{},r.ILocaleDateFormat.Short);n=t.translate(s,{durationDate:c.date||"",durationTime:c.time||""})}else n=t.formatDatetime(i,r.ILocaleDatetimeFormat.Short)}return n};var i=document.createElement("textarea");t.decodeHtmlEntities=function(e){return i.innerHTML=e,i.value},t.decodeHtmlBodyText=function(e){e=e.replace(/"{"/g,"'{\"").replace(/"}"/g,"\"}'");var t=(new DOMParser).parseFromString(e,"text/html");return Array.from(t.getElementsByTagName("a")).forEach((function(e){var t=JSON.parse(e.getAttribute("data-bbfile"));(null==t?void 0:t.alternativeText)?e.text="["+t.alternativeText+"]":(null==t?void 0:t.alt)?e.text="["+t.alt+"]":e.text="["+e.text+"]"})),t.body.innerHTML=t.body.innerHTML.replace(/</g," <"),(t.body.innerText||t.body.innerHTML).trim()},t.decodeOnlyAngleBracketHtmlEntities=function(e){return null==e?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<")},t.encodeHtmlEntities=function(e){return null==e?e:e.replace(/[\u00A0-\u9999<>\&]/gim,(function(e){return"&#"+e.charCodeAt(0)+";"}))},t.buildDateTimeMoment=function(e,t){var n=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());return a(n)},t.resolveCourseOrgToken=function(e,t){return(t&&t.isOrganization?"organization.":"course.")+e}},KJxd:function(e,t,n){},LStL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("D57K"),r=n("ERkP"),o=n("uDfI"),s=n("8unJ"),i=n("MC1S"),c=n("gh1U"),l=n("Pam5"),u=n("JfV0"),m=n("KBkc");n("K81p");var d=n("9OUN"),p=function(e){function t(t){var n=e.call(this,t)||this;return n.onOpenAllAnnouncements=function(){(0,n.props.onOpenAllAnnouncements)(),n.onDismissAll()},n.openAnnouncementDetail=function(e){(0,n.props.openAnnouncementDetail)(e),n.onDismissAll()},n.onDismissAll=function(){n.announcementSlides.forEach((function(e){return n.props.dismissAnnouncementItem(e.sourceEntry)})),n.onCloseSlideModal()},n.updateContext=function(){var e=n.state,t=e.currentViewingIndex,a=e.currentAnnouncement,r=n.props,o=r.courseContext,s=r.getCourseContext;a&&a.courseId&&t>=0&&(o&&o.courseId===a.courseId||s(a.courseId))},n.onCloseSlideModal=function(){n.setState({showModal:!1})},n.state={currentAnnouncement:null,currentViewingIndex:-1,showModal:!1},n}return a.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.fetchAnnouncementSlides().then((function(t){t.sort((function(e,t){return e.startDateRestriction&&t.startDateRestriction?e.startDateRestriction.localeCompare(t.startDateRestriction):0})),e.announcementSlides=t.slice(),e.announcementSlides.length>0&&e.setState({currentViewingIndex:0,currentAnnouncement:a.__assign({},e.announcementSlides[0]),showModal:!0},e.updateContext),e.elementCards=e.announcementSlides.map((function(t){return r.createElement("li",{className:"element-card",key:t.id},r.createElement("div",{className:"element-image"},r.createElement(l.Announcement,{color:"primary"})),r.createElement("div",{className:"element-details"},r.createElement("div",{className:"name"},r.createElement("a",{className:"rows-block header-title",onClick:function(){e.openAnnouncementDetail(t.id)},href:"#"},m.decodeHtmlEntities(t.title)),r.createElement("span",{className:"rows-block header-sent-date"},m.displayDateTime(t.startDateRestriction,e.props.localize))),r.createElement("br",null),r.createElement("div",{className:"rows-block body-text message-entries"},r.createElement("p",null,m.decodeHtmlBodyText(t.body.rawText)))))}))}))},t.prototype.render=function(){var e=this.props,t=e.localize,n=e.courseContext;return r.createElement(c.Modal,{isOpen:this.state.showModal,containerClassName:"ms-modalExample-container container-inherit"},r.createElement("div",{className:"notice notification "+this.props.courseColorClass+" reveal-modal course-announcements-slide open in"},r.createElement("div",{className:"title-container"},r.createElement("h1",{className:"title-modal"},t.translate(m.resolveCourseOrgToken("announcements.newCourseAnnouncements",n))),r.createElement(i.IconButton,{"aria-label":t.translate("course.announcements.closeModal"),className:"close-modal-button",iconProps:{iconName:"close",iconSize:"small"},onClick:this.onDismissAll,analyticsId:"course.announcements.modal.close.button"})),r.createElement("div",{className:"modal-contents"},r.createElement("ul",{className:"modal-notifications"},this.elementCards)),r.createElement("div",{className:"announcement-modal-footer"},r.createElement(i.PrimaryButton,{onClick:this.onOpenAllAnnouncements,className:"view-all-announcements-button",text:t.translate("course.announcements.button.viewAll"),analyticsId:"course.announcements.slide.view.all.button"}))))},t}(r.Component);t.AnnouncementSlide=p,t.default=o.connect((function(e){return{courseContext:e.announcement.courseContext}}),(function(e){return d.bindActionCreators({getCourseContext:u.actions.announcement.getCourseContext},e)}))(s.localizedComponentWrapper(p))},MEdB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("D57K"),r=n("ERkP"),o=n("uDfI"),s=n("wgY5"),i=n("O94r"),c=n("8unJ"),l=n("MC1S"),u=n("ACGm"),m=n("KBkc"),d=n("504r"),p=n("ZF81"),h=n("H5dd"),f=n("JfV0"),S=n("KBkc"),v=n("9OUN");n("KJxd"),t.TITLE_CHARACTER_LENGTH=256;var g=function(e){function n(n){var r=e.call(this,n)||this;return r.mappingAnnouncementToState=function(e){var t=r.props,n=t.courseId,a=t.courseContext,o=t.getCourseContext;if(e){var i=e.title,c=void 0===i?"":i,l=e.startDateRestriction,m=e.endDateRestriction,d=e.isDraft,p=e.pushNotify,h=e.body&&e.body.rawText||"";r.setState({currentBbml:h,currentAnnouncement:e,title:c,isValid:!!c.trim()&&!!h.trim(),isDraft:d,isSendEmailChecked:p}),d||(p?m&&r.setState({isEndChecked:!0,endDate:s(m).toDate(),endTime:s(m).toDate()}):(r.setState({isShowOnChecked:!0,startDate:s(l).toDate(),startTime:s(l).toDate()}),m&&r.setState({isEndChecked:!0,endDate:s(m).toDate(),endTime:s(m).toDate()})))}a&&a.courseId===n||o(n);var f=r.getMode();r.titleTextField&&r.isEditableMode(f)&&r.titleTextField.focus(),r.updateAnnouncementPanelState(u.default.DUPLICATE.isEqualTo(f),!1)},r.getMode=function(){return r.props.mode||u.default.VIEW},r.isEditableMode=function(e){return u.default.EDIT.isEqualTo(e)||u.default.DUPLICATE.isEqualTo(e)||u.default.CREATE.isEqualTo(e)},r.onTitleChange=function(e){r.setState((function(n){return{title:e,isTitleInputPristine:!1,isValid:!!e.trim()&&e.trim().length<=t.TITLE_CHARACTER_LENGTH&&!!n.currentBbml.trim()}})),r.updateAnnouncementPanelState(!!e.trim())},r.onMessageChange=function(e){var n=r.state,a=n.currentAnnouncement,o=n.isMessageEditorPristine,s=e.toBbML();r.setState((function(e){return{currentBbml:s,isMessageEditorPristine:!1,isValid:!!s.trim()&&!!e.title.trim()&&e.title.trim().length<=t.TITLE_CHARACTER_LENGTH}})),a&&!o?r.updateAnnouncementPanelState(a.body.rawText!==s):a||r.updateAnnouncementPanelState(!!s)},r.onTitleErrorMessage=function(e){var n=r.state.isTitleInputPristine,a="";return n||e.trim().length?!n&&e.trim().length>t.TITLE_CHARACTER_LENGTH&&(a=r.props.localize.translate("course.announcements.errors.messages.titleMaxlength",{maxLength:t.TITLE_CHARACTER_LENGTH})):a=r.props.localize.translate("course.announcements.errors.messages.titleRequired"),a},r.onSave=function(){if(!r.state.isSaving){r.setState({isSaving:!0});var e=r.getMode(),t=r.state.currentAnnouncement,n=r.state,o=n.currentBbml,s=n.title,i=n.isSendEmailChecked,c=n.isScheduleChecked,l=n.isShowOnChecked,m=n.isEndChecked,d=n.startDate,p=n.startTime,h=n.endDate,f=n.endTime,v=r.props,g=v.courseId,E=v.saveAnnouncement,C=v.closePanel;if(d&&p&&d.setHours(p.getHours(),p.getMinutes(),p.getSeconds()),h&&f&&h.setHours(f.getHours(),f.getMinutes(),f.getSeconds()),!t&&u.default.CREATE.isEqualTo(e))(t={}).isDraft=!0,t.title=s,t.body={rawText:o},t.pushNotify=i,c&&(t.isDraft=!1,l&&(t.startDateRestriction=S.buildDateTimeMoment(d,p).toISOString()),t.endDateRestriction=m?S.buildDateTimeMoment(h,f).toISOString():"");else{if(!u.default.DUPLICATE.isEqualTo(e)&&!u.default.EDIT.isEqualTo(e))return console.error("Failed to save announcement!"),void r.setState({isSaving:!1});var y=a.__assign(a.__assign({},t.body),{rawText:o});t=a.__assign(a.__assign({},t),{title:s,body:y}),u.default.DUPLICATE.isEqualTo(e)&&(t=a.__assign(a.__assign({},t),{isDraft:!0,id:null})),t.pushNotify=i,c?(t.isDraft=!1,l&&(t.startDateRestriction=S.buildDateTimeMoment(d,p).toISOString()),t.endDateRestriction=m?S.buildDateTimeMoment(h,f).toISOString():""):(t.isDraft=!0,t.startDateRestriction="",t.endDateRestriction="")}E(g,t).then((function(){r.updateAnnouncementPanelState(!1,!0),C()}))}},r.onCancel=function(){r.props.closePanel()},r.validateInputs=function(){return!!r.state.title.trim()&&!!r.state.currentBbml.trim()&&r.state.title.trim().length<=t.TITLE_CHARACTER_LENGTH},r.validateSchedule=function(){var e=r.state,t=e.isScheduleChecked,n=e.isShowOnChecked,a=e.isEndChecked,o=e.isStartDateValid,s=e.isStartTimeValid,i=e.isEndDateValid,c=e.isEndTimeValid;if(t){if(n&&(!o||!s))return!1;if(a&&(!i||!c))return!1}return!0},r.onSendEmailChange=function(){r.updateAnnouncementPanelState(!0),r.setState((function(e){return{isSendEmailChecked:!e.isSendEmailChecked}}))},r.onScheduleChange=function(){r.updateAnnouncementPanelState(!0),r.setState((function(e){return{isScheduleChecked:!e.isScheduleChecked,isShowOnChecked:!e.isScheduleChecked&&!e.isSendEmailChecked}}))},r.onShowOnChange=function(){r.setState((function(e){return{isShowOnChecked:!e.isShowOnChecked}})),r.updateAnnouncementPanelState(!0)},r.onHideOnChange=function(){r.setState((function(e){return{isEndChecked:!e.isEndChecked}})),r.updateAnnouncementPanelState(!0)},r.isEndLaterThanStart=function(){var e=r.state,t=e.isScheduleChecked,n=e.isEndChecked,a=e.isStartDateValid,o=e.isStartTimeValid,s=e.isEndDateValid,i=e.isEndTimeValid,c=e.startDate,l=e.startTime,u=e.endDate,m=e.endTime;return!(t&&n&&a&&o&&s&&i&&c&&l&&u&&m)||S.buildDateTimeMoment(u,m).diff(S.buildDateTimeMoment(c,l))>0},r.state={currentBbml:"",currentAnnouncement:null,title:"",isMessageEditorPristine:!0,isTitleInputPristine:!0,isSaving:!1,isValid:!1,isDraft:!1,isSendEmailChecked:!1,isScheduleChecked:!1,isShowOnChecked:!1,isEndChecked:!1,startDate:null,startTime:null,endDate:null,endTime:null,isStartDateValid:!0,isStartTimeValid:!0,isEndDateValid:!0,isEndTimeValid:!0},r}return a.__extends(n,e),n.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.courseId,a=t.announcementId,r=t.announcements,o=t.announcement,s=t.getAnnouncement,i=t.permissions;u.default.CREATE.isEqualTo(this.getMode())?i.create?this.mappingAnnouncementToState(null):console.error("User is not authorized to create announcement!"):r&&r[a]?this.mappingAnnouncementToState(r[a]):o&&o.id===a?this.mappingAnnouncementToState(o):a?s(n,a).then((function(){e.mappingAnnouncementToState(e.props.announcement)})):console.error("Unexpected behavior!")},n.prototype.componentDidUpdate=function(e,t){var n=this.state,a=n.isScheduleChecked,r=n.isShowOnChecked,o=n.isSendEmailChecked;if((t.isScheduleChecked!==a&&a||t.isShowOnChecked!==r&&r)&&!o&&(this.state.startDate&&this.state.startTime||this.setState({startDate:s().toDate(),startTime:s().toDate()})),t.isSendEmailChecked!==o&&o&&(this.state.startDate||this.state.startTime)&&this.setState({startDate:null,startTime:null}),this.state.isEndChecked!==t.isEndChecked&&this.state.isEndChecked&&(!this.state.endDate||!this.state.endTime)){var i=this.state,c=i.startDate,l=i.startTime;if(c&&l)this.setState({endDate:s(c).add(1,"days").toDate(),endTime:s(l).add(1,"days").toDate()});else{var u=s().toDate();this.setState({endDate:s(u).add(1,"days").toDate(),endTime:s(u).add(1,"days").toDate()})}}},n.prototype.updateAnnouncementPanelState=function(e,t){void 0===t&&(t=!1),this.props.changeAnnouncementPanelState({isDirty:e,isSaved:t})},Object.defineProperty(n.prototype,"isEditorInputValid",{get:function(){var e=this.state,t=e.currentBbml;return e.isMessageEditorPristine||t.length>0},enumerable:!0,configurable:!0}),n.prototype.renderBbEditorErrorMessage=function(){return this.isEditorInputValid?null:r.createElement("div",{className:"error-message",role:"alert"},r.createElement(l.SvgIcon,{iconName:"attention",iconSize:"small",iconStatus:"alert"}),r.createElement("span",null,this.props.localize.translate("course.announcements.errors.messages.messageRequired")))},n.prototype.render=function(){var e=this,t=this.getMode(),n=this.props,a=n.permissions,o=n.courseContext,s=n.localize,c=n.pluginConfig,f=this.state,S=f.currentAnnouncement,v=f.isSaving,g=f.isValid,E=f.isSendEmailChecked,C=f.isScheduleChecked,y=f.isShowOnChecked,b=f.isEndChecked,D=f.startDate,P=f.startTime,T=f.endDate,I=f.endTime,k=f.isStartDateValid,w=f.isStartTimeValid,A=f.isEndDateValid,N=f.isEndTimeValid,x=S,M=x&&m.decodeHtmlEntities(x.title)||"";u.default.CREATE.isEqualTo(t)?M=s.translate("course.announcements.newAnnouncement"):u.default.EDIT.isEqualTo(t)?M=s.translate("course.announcements.editAnnouncement",{announcement:M}):u.default.DUPLICATE.isEqualTo(t)&&(M=s.translate("course.announcements.copyAnnouncement",{announcement:M}));var O=(null==S?void 0:S.body.rawText)||"";return(a.viewUnposted||u.default.VIEW.isEqualTo(t))&&r.createElement("div",{className:"announcement-detail-panel"},u.default.VIEW.isEqualTo(t)&&r.createElement("div",{className:"panel-wrap"},r.createElement("header",{className:"panel-header simple-header"},r.createElement("div",{className:"panel-titles-container"},r.createElement("span",{className:"panel-sub-title"},s.translate(m.resolveCourseOrgToken("announcements.pageTitle",o))),r.createElement("div",{className:"editable-title-container black-header-contents"},r.createElement(l.IconButton,{className:"left-off-canvas-toggle menu-toggle  standard-button dark-background",iconProps:{iconName:"main-menu"},title:s.translate("base.menu"),ariaLabel:s.translate("base.menu"),analyticsId:"course.announcements.detailPanel.menu.button"}),r.createElement("h1",{className:"panel-title",title:M},M)))),r.createElement("section",{className:"panel-container panel-content"},r.createElement("div",{className:"body-text"},r.createElement(h.BbEditorWrapper,{editor:{bbml:O,isReadOnly:!0,isToolbarHidden:!0,showWordCount:!1,onChange:this.onMessageChange,placeholder:s.translate("course.announcements.detail.messageDesc")}})))),this.isEditableMode(t)&&r.createElement("div",{className:"peek-panel-with-footer"},r.createElement("div",{className:"panel-wrap"},r.createElement("header",{className:"panel-header simple-header"},r.createElement("div",{className:"panel-titles-container"},r.createElement("span",{className:"panel-sub-title"},o&&o.displayName||""),r.createElement("div",{className:"editable-title-container black-header-contents"},r.createElement(l.IconButton,{className:"left-off-canvas-toggle menu-toggle standard-button dark-background",iconProps:{iconName:"main-menu"},title:s.translate("base.menu"),ariaLabel:s.translate("base.menu"),analyticsId:"course.announcements.detailPanel.menu.button"}),r.createElement("h1",{className:"panel-title",title:M},M)))),r.createElement("section",{className:"panel-container panel-content -has-footer"},r.createElement(l.TextField,{className:"label-decorator",label:s.translate("course.announcements.detail.title"),value:m.decodeHtmlEntities(this.state.title),onChanged:this.onTitleChange,placeholder:s.translate("course.announcements.detail.titleDesc"),ref:function(t){e.titleTextField=t},onGetErrorMessage:this.onTitleErrorMessage,required:!0,analyticsId:"course.announcements.detailPanel.title.input.text"}),r.createElement(l.Dropdown,{label:s.translate("course.announcements.detail.recipients"),defaultSelectedKey:"all",required:!0,options:[{key:"all",text:s.translate(m.resolveCourseOrgToken("announcements.detail.allRecipients",o),{studentCount:o&&o.membershipCount||0})}],analyticsId:"course.announcements.detailPanel.recipients.dropdown"}),r.createElement("div",{className:"panel-content__field"},r.createElement(l.Label,{className:"panel-content__field__label",id:"announcement-bb-editor-label",required:!0},s.translate("course.announcements.detail.message")),r.createElement("div",{className:i.default("panel-content__message",{"-invalid":!this.isEditorInputValid})},r.createElement(h.BbEditorWrapper,{editor:{bbml:O,pluginConfig:c,ariaLabelledBy:"announcement-bb-editor-label",ariaRequired:!0,isReadOnly:!1,isToolbarHidden:!1,onChange:this.onMessageChange,placeholder:s.translate("course.announcements.detail.messageDesc"),showWordCount:!0}})),this.renderBbEditorErrorMessage()),r.createElement("div",null,r.createElement(l.Checkbox,{label:s.translate("course.announcements.button.email"),checked:E,disabled:C,onChange:this.onSendEmailChange,ariaDescribedBy:"email-checkbox-desc",analyticsId:"course.announcements.detailPanel.sendEmail.input.checkbox"}),r.createElement("p",{className:"information-message",id:"email-checkbox-desc"},s.translate("course.announcements.detail.emailDesc")),r.createElement("p",{className:"information-message",id:"email-checkbox-desc"},s.translate("course.announcements.detail.emailRestriction"))),r.createElement("div",null,r.createElement(l.Checkbox,{label:s.translate("course.announcements.button.schedule"),checked:C,onChange:this.onScheduleChange,analyticsId:"course.announcements.detailPanel.scheduleAnnouncement.input.checkbox",disabled:E}),r.createElement("p",{className:"information-message",id:"email-checkbox-desc"},s.translate("course.announcements.detail.scheduleEmailInfo")),C&&!E&&r.createElement("div",null,r.createElement("div",null,r.createElement(l.Checkbox,{label:s.translate("course.announcements.dateTimePicker.showOn"),checked:y,disabled:E,onChange:this.onShowOnChange,analyticsId:"course.announcements.detailPanel.showOn.input.checkbox"}),r.createElement("div",{className:"row collapse date-time-inputs"},r.createElement("div",{className:"columns small-6"},r.createElement(d.default,{value:D,disabled:E,onChangeValue:function(t){e.setState({startDate:t})},onValidateCallback:function(t){e.setState({isStartDateValid:t})},isValueValid:k||!y||E,errorFormatMessage:s.translate("components.directives.validation.messages.errors.date"),errorEmptyMessage:s.translate("components.directives.content-visibility.startDateError"),localize:s,analyticsId:"course.announcements.detailPanel.showOn.datePicker"})),r.createElement("div",{className:"columns small-6"},r.createElement(p.default,{value:P,disabled:E,onChangeValue:function(t){e.setState({startTime:t})},onValidateCallback:function(t){e.setState({isStartTimeValid:t})},isValueValid:w||!y||E,localize:s,errorFormatMessage:s.translate("components.directives.validation.messages.errors.time"),errorEmptyMessage:s.translate("components.directives.content-visibility.startTimeError"),analyticsId:"course.announcements.detailPanel.showOn.timePicker"})))),r.createElement("div",null,r.createElement(l.Checkbox,{label:s.translate("course.announcements.dateTimePicker.hideOn"),checked:b,onChange:this.onHideOnChange,analyticsId:"course.announcements.detailPanel.hideOn.input.checkbox"}),r.createElement("div",{className:"row collapse date-time-inputs"},r.createElement("div",{className:"columns small-6"},r.createElement(d.default,{value:T,onChangeValue:function(t){e.setState({endDate:t})},onValidateCallback:function(t){e.setState({isEndDateValid:t})},isValueValid:A||!b,disabled:!b,errorFormatMessage:s.translate("components.directives.validation.messages.errors.date"),errorEmptyMessage:s.translate("components.directives.content-visibility.endDateError"),localize:s,analyticsId:"course.announcements.detailPanel.hideOn.datePicker"})),r.createElement("div",{className:"columns small-6"},r.createElement(p.default,{value:I,onChangeValue:function(t){e.setState({endTime:t})},onValidateCallback:function(t){e.setState({isEndTimeValid:t})},isValueValid:N||!b,localize:s,disabled:!b,errorFormatMessage:s.translate("components.directives.validation.messages.errors.time"),errorEmptyMessage:s.translate("components.directives.content-visibility.endTimeError"),analyticsId:"course.announcements.detailPanel.hideOn.timePicker"})))),!this.isEndLaterThanStart()&&r.createElement("span",{className:"error-message"},r.createElement(l.SvgIcon,{iconSize:"small",iconName:"attention"}),s.translate("course.announcements.errors.messages.hideOnShouldLaterThanShowOn")))))),r.createElement("footer",{className:"panel-footer"},r.createElement("span",{className:"place-holder"}),r.createElement(l.DefaultButton,{className:"button-cancel",onClick:this.onCancel,text:s.translate("course.announcements.button.cancel"),analyticsId:"course.announcements.detailPanel.cancel.button"}),r.createElement(l.PrimaryButton,{className:"button-save",disabled:!(g&&this.validateSchedule()&&this.isEndLaterThanStart()),onClick:this.onSave,text:s.translate("course.announcements.button.save"),analyticsId:"course.announcements.detailPanel.save.button"}))),v?r.createElement("div",{className:"spinner bb-secondary-color-2"}):"")},n}(r.Component);t.AnnouncementDetailPanel=g,t.default=o.connect((function(e){return{announcements:e.announcement.announcements,courseContext:e.announcement.courseContext,announcement:e.announcement.announcement,detailPanelState:e.announcement.detailPanelState}}),(function(e){return v.bindActionCreators({saveAnnouncement:f.actions.announcement.saveAnnouncement,getCourseContext:f.actions.announcement.getCourseContext,getAnnouncement:f.actions.announcement.getAnnouncement,changeAnnouncementPanelState:f.actions.announcement.changeAnnouncementPanelState},e)}))(c.localizedComponentWrapper(g))},PBFe:function(e,t,n){},Pam5:function(e,t,n){"use strict";n.r(t),n.d(t,"Announcement",(function(){return o}));var a=n("ERkP"),r=n("12Zt"),o=Object(r.a)(a.createElement(a.Fragment,null,a.createElement("path",{fill:"var(--icon-fill-color)",stroke:"transparent",fillRule:"evenodd",d:"M18.1639 3.5552c2.1791 1.195 2.9769 3.9303 1.7819 6.1094L13.1506 22.056l2.8766 2.6151c1.839 1.6718 1.9745 4.5178.3027 6.3568-1.6718 1.8389-4.5178 1.9745-6.3567.3027l-5.5-5c-1.5389-1.3989-1.9186-3.6701-.9187-5.4935l8.5-15.5c1.195-2.1791 3.9303-2.977 6.1094-1.782z",clipRule:"evenodd"}),a.createElement("path",{fill:"currentColor",stroke:"transparent",d:"M5 25l.7071.7071c.063-.063.1173-.1341.1614-.2114L5 25zm-4 4l-.7071-.7071a1 1 0 000 1.4142L1 29zm8 8l-.7071.7071c.3905.3905 1.0237.3905 1.4142 0L9 37zm4-4l-.4961-.8682a.9964.9964 0 00-.211.1611L13 33zm21.4961-11.1318c.4796-.274.6462-.8848.3721-1.3643-.274-.4796-.8848-.6462-1.3643-.3721l.9922 1.7364zM9.9815 14.2543l-5.85 10.25 1.737.9914 5.85-10.25-1.737-.9914zM4.2929 24.2929l-4 4 1.4142 1.4142 4-4-1.4142-1.4142zm-4 5.4142l8 8 1.4142-1.4142-8-8L.293 29.7071zm9.4142 8l4-4-1.4142-1.4142-4 4 1.4142 1.4142zm3.789-3.8389l21-12-.9922-1.7364-21 12 .9922 1.7364z"}),a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 2l21 21"}),a.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M12 33l-7-7"}),a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 31l2 4.5L30 29l-3-4"}),a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"M29 9l6-6.0618"}),a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M37 10l-6 2M28 1l-2 6"}),a.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M17 4l-5.15 9"})),"large")},ZF81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("D57K"),r=n("ERkP"),o=n("wgY5"),s=n("MC1S"),i=n("n7/H"),c=n("myse");n("PBFe");var l={pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,esc:27,enter:13};t.timePickerUtilities={getLocale:function(e){return e.context.localizationConfig.opts.locale}};var u=function(e){function n(n){var a=e.call(this,n)||this;return a.timeoutPromiseWrapper=function(e,t,n){return new Promise((function(r){e.apply(a,t),setTimeout((function(){var a=e.apply(n,t);r(a)}))}))},a.errorMessage=function(){var e=a.props,t=e.isValueValid,n=e.errorEmptyMessage,o=e.errorFormatMessage;if(!t){var i=o;return a.state.timeStr||(i=n),r.createElement("span",{className:"error-message"},r.createElement(s.SvgIcon,{iconSize:"small",iconName:"attention"}),i)}return null},a.updateSpinnerInputs=function(e){a.timeoutPromiseWrapper(a.getTimeObject,[e,i.ILocaleTimeFormat.Short],a).then((function(e){a.setState({hour:e.hour,minute:e.minute,amPm:e.amPm?e.amPm.toUpperCase():""})}))},a.updateTimeInput=function(e){var t=a.props,n=t.localize,r=t.onValidateCallback;a.timeoutPromiseWrapper(n.formatTime,[e,i.ILocaleTimeFormat.Short],n).then((function(e){a.setState({timeStr:e}),r(!0)}))},a.adjustTime=function(e,t,n,a){var r=parseInt(e,10);return Number.isNaN(r)?t:r>=n&&r<=a?e:r<n?n.toString():a.toString()},a.closeSpinner=function(){a.setState({isDisplaySpinner:!1})},a.stopEvents=function(e){e.stopPropagation();var t=e.which;t!==l.up&&t!==l.down&&t!==l.home&&t!==l.end&&t!==l.left&&t!==l.right&&t!==l.pageup&&t!==l.pagedown||e.preventDefault()},a.isValidDate=function(e){return e instanceof Date&&!Number.isNaN(e.valueOf())},a.onToggleSpinner=function(){a.setState((function(e){return{isDisplaySpinner:!e.isDisplaySpinner}}))},a.onChangeTimeInput=function(e){var t=e.target.value;a.setState({timeStr:t}),e.persist();var n=a.props,r=n.onValidateCallback,o=n.localize;a.timeoutPromiseWrapper(o.parseTime,[t,i.ILocaleTimeFormat.Short],o).then((function(e){e?(r(!0),a.tempDate=new Date(e),a.updateSpinnerInputs(a.tempDate)):r(!1)}))},a.onHourInputChange=function(e){var t=a.state.amPm?1:0,n=a.state.amPm?12:23,r=e.target.value;r.length<=2&&a.setState({hour:r},(function(){r=a.adjustTime(r,a.state.hour,t,n);var e=new Date(a.props.value);e.setHours(parseInt(r,10)),a.isValidDate(e)&&(a.tempDate=e,a.updateTimeInput(e))}))},a.onMinuteInputChange=function(e){var t=e.target.value;t.length<=2&&a.setState({minute:t},(function(){t=a.adjustTime(t,a.state.minute,0,59);var e=new Date(a.props.value);e.setMinutes(parseInt(t,10)),a.isValidDate(e)&&(a.tempDate=e,a.updateTimeInput(e))}))},a.onChangeAmPmInput=function(e){var t=e.target.value.toUpperCase();t.length<=2&&(e.persist(),a.setState({amPm:t},(function(){var e=a.props.localize,n=a.state.timeStr.split(" ")[0]+" "+t;a.timeoutPromiseWrapper(e.parseTime,[n,i.ILocaleTimeFormat.Short],e).then((function(e){e&&(a.tempDate=new Date(e),a.updateTimeInput(a.tempDate))}))})))},a.onHandlerBlur=function(){a.props.isValueValid&&a.props.onChangeValue(a.tempDate),a.tempDate.getTime()===a.props.value.getTime()&&a.updateSpinnerInputs(a.tempDate),setTimeout((function(){a.timePickerRef.contains(document.activeElement)||a.closeSpinner()}))},a.onClickChangeButton=function(e,t){a.tempDate=o(a.props.value).add(t,e).toDate(),a.props.onChangeValue(a.tempDate)},a.onKeyupInInput=function(e,t){var n=a.props.onChangeValue;switch(a.stopEvents(e),e.which){case l.esc:a.closeSpinner();break;case l.right:case l.up:n(o(a.tempDate).add(1,t).toDate());break;case l.left:case l.down:n(o(a.tempDate).add(-1,t).toDate());break;case l.pageup:"h"===t?n(o(a.tempDate).add(3,t).toDate()):"m"===t&&n(o(a.tempDate).add(10,t).toDate());break;case l.pagedown:"h"===t?n(o(a.tempDate).add(-3,t).toDate()):"m"===t&&n(o(a.tempDate).add(-10,t).toDate());break;case l.home:"h"===t?n(o(a.tempDate).hour(a.state.amPm?12:23).toDate()):"m"===t&&n(o(a.tempDate).minute(59).toDate());break;case l.end:"h"===t?n(o(a.tempDate).hour(a.state.amPm?1:0).toDate()):"m"===t&&n(o(a.tempDate).minute(0).toDate())}},a.onKeyupInAmPmInput=function(e){a.stopEvents(e);var t=e.which;t===l.esc?a.closeSpinner():t!==l.up&&t!==l.down&&t!==l.home&&t!==l.end&&t!==l.left&&t!==l.right&&t!==l.pageup&&t!==l.pagedown||a.props.onChangeValue(o(a.tempDate).add(12,"h").toDate())},a.onKeyupInChangeButton=function(e){a.stopEvents(e),e.which===l.esc&&a.closeSpinner()},a.onStopDefaultEvent=function(e){a.stopEvents(e)},a.onTimeInputKeyPress=function(e){e.which===l.enter&&a.closeSpinner()},a.onFocusInput=function(e){e.target.select()},a.state={timeStr:"",hour:"",minute:"",amPm:"",isDisplaySpinner:!1,tzShort:""},a.isLocaleArabic="ar-sa"===t.timePickerUtilities.getLocale(n.localize),a}return a.__extends(n,e),n.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.localize,a=t.value,r=t.onValidateCallback,o=new Date;if(this.timeoutPromiseWrapper(n.formatTimezone,[o,i.ILocaleTimezoneFormat.Short],n).then((function(t){e.setState({tzShort:t})})),a&&!this.state.timeStr){this.tempDate=a;var s=this.timeoutPromiseWrapper(n.formatTime,[a,i.ILocaleTimeFormat.Short],n),c=this.timeoutPromiseWrapper(this.getTimeObject,[a,i.ILocaleTimeFormat.Short],this);Promise.all([s,c]).then((function(t){var n=t[0],a=t[1];e.setState({timeStr:n,hour:a.hour,minute:a.minute,amPm:a.amPm?a.amPm.toUpperCase():""}),r(!0)}))}},n.prototype.componentDidUpdate=function(e,t){var n=this,a=this.props,r=a.localize,o=a.value,s=a.onValidateCallback;if(o&&(o&&o.getTime())!==(e.value&&e.value.getTime())){this.tempDate=o;var c=this.timeoutPromiseWrapper(r.formatTime,[o,i.ILocaleTimeFormat.Short],r),l=this.timeoutPromiseWrapper(this.getTimeObject,[o,i.ILocaleTimeFormat.Short],this);Promise.all([c,l]).then((function(e){var t=e[0],a=e[1];n.setState({timeStr:t,hour:a.hour,minute:a.minute,amPm:a.amPm?a.amPm.toUpperCase():""}),s(!0)}))}o||o===e.value||(this.setState({timeStr:"",hour:"",minute:"",amPm:""}),s(!0));var u=this.state.isDisplaySpinner;t.isDisplaySpinner!==u&&u&&this.hourInputRef.focus()},n.prototype.convert12HourTimeTo24HourTime=function(e){var t=e.hour,n="PM"===e.amPm.toUpperCase();return"12"===e.hour?t=n?"12":"0":n&&(t=""+(parseInt(e.hour,10)+12)),a.__assign(a.__assign({},e),{amPm:"",hour:t})},n.prototype.getTimeObject=function(e,t){var n=this.props.localize.getTimeObject(e,t);return this.isLocaleArabic?this.convert12HourTimeTo24HourTime(n):n},n.prototype.render=function(){var e=this,t=this.state,n=t.timeStr,a=t.hour,o=t.minute,i=t.isDisplaySpinner,l=t.tzShort,u=t.amPm,m=this.props,d=m.disabled,p=m.localize,h=m.analyticsId,f=m.analyticsEventAugmentor,S="spinner-control "+(u?"":"no-am-pm"),v=f(c.AnalyticsEventTypes.CLICK_EVENT,(function(){}),h+".input.text"),g=f(c.AnalyticsEventTypes.CLICK_EVENT,(function(){}),h+".hour.input.text"),E=f(c.AnalyticsEventTypes.CLICK_EVENT,(function(){}),h+".minute.input.text"),C=f(c.AnalyticsEventTypes.CLICK_EVENT,(function(){}),h+".amPm.input.text");return r.createElement("div",{className:"time-picker",ref:function(t){return e.timePickerRef=t},onBlur:this.onHandlerBlur,"data-analytics-id":h},r.createElement("div",{className:"calendar-input-container"},r.createElement("input",{type:"text",className:"time-input",value:n,onChange:this.onChangeTimeInput,ref:function(t){return e.timeInputRef=t},disabled:d,onKeyPress:this.onTimeInputKeyPress,onClick:v,"data-analytics-id":h+".input.text"}),r.createElement(s.IconButton,{ariaLabel:p.translate("course.announcements.timePicker.dueDate"),className:"btn-date open-datepicker toggle-btn",disabled:d,iconProps:{iconName:"away",iconSize:"small"},onClick:this.onToggleSpinner,title:p.translate("course.announcements.timePicker.dueDate"),analyticsId:h+".open.button"}),this.errorMessage()),i&&r.createElement(s.Callout,{target:this.timeInputRef,doNotLayer:!0,directionalHint:5},r.createElement("div",{className:S,"aria-hidden":!i,role:"region","aria-label":"Due Date Time",tabIndex:-1},r.createElement("div",{className:"spinner-hour"},r.createElement(s.IconButton,{ariaLabel:p.translate("course.announcements.timePicker.increaseHour"),className:"button-hour add-hour-btn",iconProps:{iconName:"arrow-up",iconSize:"small"},onKeyUp:this.onKeyupInChangeButton,onClick:function(){e.onClickChangeButton("h",1)},onKeyDown:this.onStopDefaultEvent,title:p.translate("course.announcements.timePicker.increaseHour"),analyticsId:h+".increaseHour.button"}),r.createElement("input",{type:"text",className:"spinner-input hour-input",ref:function(t){return e.hourInputRef=t},"aria-label":p.translate("course.announcements.timePicker.hour"),value:a,role:"spinbutton","aria-valuenow":parseInt(a,10),"aria-valuemax":u?12:23,"aria-valuemin":u?1:0,onChange:this.onHourInputChange,onFocus:this.onFocusInput,onKeyUp:function(t){return e.onKeyupInInput(t,"h")},onKeyDown:this.onStopDefaultEvent,onKeyPress:this.onTimeInputKeyPress,onClick:g,"data-analytics-id":h+".hour.input.text"}),r.createElement(s.IconButton,{ariaLabel:p.translate("course.announcements.timePicker.decreaseHour"),className:"button-hour sub-hour-btn",iconProps:{iconName:"arrow-down",iconSize:"small"},onClick:function(){e.onClickChangeButton("h",-1)},onKeyUp:this.onKeyupInChangeButton,onKeyDown:this.onStopDefaultEvent,title:p.translate("course.announcements.timePicker.decreaseHour"),analyticsId:h+".decreaseHour.button"})),r.createElement("div",{className:"colon"},":"),r.createElement("div",{className:"spinner-min"},r.createElement(s.IconButton,{ariaLabel:p.translate("course.announcements.timePicker.increaseMinute"),className:"button-minute add-min-btn",iconProps:{iconName:"arrow-up",iconSize:"small"},onClick:function(){e.onClickChangeButton("m",1)},onKeyUp:this.onKeyupInChangeButton,onKeyDown:this.onStopDefaultEvent,title:p.translate("course.announcements.timePicker.increaseMinute"),analyticsId:h+".increaseMinute.button"}),r.createElement("input",{type:"text",className:"spinner-input min-input","aria-label":p.translate("course.announcements.timePicker.minute"),value:o,role:"spinbutton","aria-valuenow":parseInt(o,10),"aria-valuemax":59,"aria-valuemin":0,onChange:this.onMinuteInputChange,onFocus:this.onFocusInput,onKeyUp:function(t){return e.onKeyupInInput(t,"m")},onKeyDown:this.onStopDefaultEvent,onKeyPress:this.onTimeInputKeyPress,onClick:E,"data-analytics-id":h+".minute.input.text"}),r.createElement(s.IconButton,{ariaLabel:p.translate("course.announcements.timePicker.decreaseMinute"),className:"button-minute sub-min-btn",iconProps:{iconName:"arrow-down",iconSize:"small"},onClick:function(){e.onClickChangeButton("m",-1)},onKeyUp:this.onKeyupInChangeButton,onKeyDown:this.onStopDefaultEvent,title:p.translate("course.announcements.timePicker.decreaseMinute"),analyticsId:h+".decreaseMinute.button"})),r.createElement("div",null,r.createElement("div",{className:"spinner-ampm"},r.createElement(s.IconButton,{ariaLabel:p.translate("course.announcements.timePicker.changeToAmPm"),className:"button-change-ampm add-am-pm-btn",iconProps:{iconName:"arrow-up",iconSize:"small"},onClick:function(){e.onClickChangeButton("h",12)},onKeyUp:this.onKeyupInChangeButton,onKeyDown:this.onStopDefaultEvent,title:p.translate("course.announcements.timePicker.changeToAmPm"),analyticsId:h+".changeAmPm.button"}),r.createElement("input",{type:"text",className:"spinner-input am-pm-input","aria-label":p.translate("course.announcements.timePicker.amPm"),value:u,role:"spinbutton",onChange:this.onChangeAmPmInput,onFocus:this.onFocusInput,onKeyUp:this.onKeyupInAmPmInput,onKeyDown:this.onStopDefaultEvent,onKeyPress:this.onTimeInputKeyPress,onClick:C,"data-analytics-id":h+".amPm.input.text"}),r.createElement(s.IconButton,{ariaLabel:p.translate("course.announcements.timePicker.changeToAmPm"),className:"button-change-ampm sub-am-pm-btn",iconProps:{iconName:"arrow-down",iconSize:"small"},onClick:function(){e.onClickChangeButton("h",12)},onKeyUp:this.onKeyupInChangeButton,onKeyDown:this.onStopDefaultEvent,title:p.translate("course.announcements.timePicker.changeToAmPm"),analyticsId:h+".changeAmPm.button"})))),r.createElement("hr",null),r.createElement("div",{className:"tz-offset"},r.createElement("span",null,l))))},n}(r.PureComponent);t.TimePicker=u,t.default=c.withAnalytics(u)},aoM1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("D57K"),r=n("ERkP"),o=n("JfV0"),s=n("myse");n("sGTL"),t.ICON_CHEVRON_UP="arrow-up",t.ICON_CHEVRON_DOWN="arrow-down";var i=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.getArrowDirection=function(){var e=n.props,a=e.currentSort,r=e.sortCriteria;return r&&r.includes(a)?(n.localSort=a,n.isDescendingSort(a)?t.ICON_CHEVRON_DOWN:t.ICON_CHEVRON_UP):""},n.updateSortCriteria=function(){var e=n.props,t=e.sortCriteria,a=e.onSwitchSortCriteria;n.localSort?n.localSort=t[0===t.indexOf(n.localSort)?t.length-1:0]:n.localSort=t[0],a(n.localSort)},n.isDescendingSort=function(e){return e===o.SortCriteriaEnum.DATE_DESC||e===o.SortCriteriaEnum.STATUS_DESC||e===o.SortCriteriaEnum.VIEWS_DESC||e===o.SortCriteriaEnum.TITLE_DESC},n}return a.__extends(n,e),n.prototype.render=function(){var e=this,n=this.props,a=n.localize,o=n.sortCriteria,i=n.viewText,c=n.analyticsId,l=(0,n.analyticsEventAugmentor)(s.AnalyticsEventTypes.CLICK_EVENT,this.updateSortCriteria,c),u="";if(this.getArrowDirection()){var m=this.getArrowDirection()===t.ICON_CHEVRON_UP?"asc":"desc";u=a.translate("course.announcements.sort."+i+"."+m)}return r.createElement(r.Fragment,null,r.createElement("button",{id:"sort-by-"+i+"-button",className:"active clear","aria-describedby":"sort-by-"+i,onClick:l,"data-analytics-id":c},r.createElement("span",{className:"sort-description"},a.translate("course.announcements.sort."+i+".description")),r.createElement("div",{className:"sort-list-arrows "+this.getArrowDirection(),role:"presentation"},o&&o.length>0&&o.map((function(t,n){return r.createElement("div",{className:e.isDescendingSort(t)?"sort-list-arrow-down":"sort-list-arrow-up",key:n})})))),r.createElement("span",{id:"sort-by-"+i,className:"sr-only","aria-live":"assertive"},u))},n}(r.PureComponent);t.SortControl=i,t.default=s.withAnalytics(i)},q3fC:function(e,t,n){},sGTL:function(e,t,n){},wzET:function(e,t,n){},x6OE:function(e,t,n){var a,r,o;r=[n("ERkP"),n("aWzz")],void 0===(o="function"==typeof(a=function(t,n){"use strict";var a,r,o;function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}return n.default=e,t&&t.set(e,n),n}(t),n=(o=n)&&o.__esModule?o:{default:o};var f={x:"clientWidth",y:"clientHeight"},S={x:"clientTop",y:"clientLeft"},v={x:"innerWidth",y:"innerHeight"},g={x:"offsetWidth",y:"offsetHeight"},E={x:"offsetLeft",y:"offsetTop"},C={x:"overflowX",y:"overflowY"},y={x:"scrollWidth",y:"scrollHeight"},b={x:"scrollLeft",y:"scrollTop"},D={x:"width",y:"height"},P=function(){},T=!!function(){if("undefined"==typeof window)return!1;var e=!1;try{document.createElement("div").addEventListener("test",P,{get passive(){return e=!0,!1}})}catch(e){}return e}()&&{passive:!0},I=function(e,t){var n=e.length,a=e.minSize,r=e.type,o=t.from,s=t.size,i=t.itemsPerRow,c=(s=Math.max(s,a))%i;return c&&(s+=i-c),s>n&&(s=n),(c=(o="simple"!==r&&o?Math.max(Math.min(o,n-s),0):0)%i)&&(o-=c,s+=c),o===t.from&&s==t.size?t:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{from:o,size:s})};e.exports=(r=a=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=c(this,l(n).call(this,e))).state=I(e,{itemsPerRow:1,from:e.initialIndex,size:0}),t.cache={},t.cachedScrollPosition=null,t.prevPrevState={},t.unstable=!1,t.updateCounter=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,e),m(n,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=I(e,t);return n===t?null:n}}]),m(n,[{key:"componentDidMount",value:function(){this.updateFrameAndClearCache=this.updateFrameAndClearCache.bind(this),window.addEventListener("resize",this.updateFrameAndClearCache),this.updateFrame(this.scrollTo.bind(this,this.props.initialIndex))}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.axis!==e.axis&&this.clearSizeCache(),!this.unstable){if(++this.updateCounter>50)return this.unstable=!0,console.error("ReactList failed to reach a stable state.");this.updateCounterTimeoutId||(this.updateCounterTimeoutId=setTimeout((function(){t.updateCounter=0,delete t.updateCounterTimeoutId}),0)),this.updateFrame()}}},{key:"maybeSetState",value:function(e,t){if(function(e,t){for(var n in t)if(e[n]!==t[n])return!1;return!0}(this.state,e))return t();this.setState(e,t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateFrameAndClearCache),this.scrollParent.removeEventListener("scroll",this.updateFrameAndClearCache,T),this.scrollParent.removeEventListener("mousewheel",P,T)}},{key:"getOffset",value:function(e){var t=this.props.axis,n=e[S[t]]||0,a=E[t];do{n+=e[a]||0}while(e=e.offsetParent);return n}},{key:"getEl",value:function(){return this.el||this.items}},{key:"getScrollPosition",value:function(){if("number"==typeof this.cachedScrollPosition)return this.cachedScrollPosition;var e=this.scrollParent,t=this.props.axis,n=b[t],a=e===window?document.body[n]||document.documentElement[n]:e[n],r=this.getScrollSize()-this.props.scrollParentViewportSizeGetter(this),o=Math.max(0,Math.min(a,r)),s=this.getEl();return this.cachedScrollPosition=this.getOffset(e)+o-this.getOffset(s),this.cachedScrollPosition}},{key:"setScroll",value:function(e){var t=this.scrollParent,n=this.props.axis;if(e+=this.getOffset(this.getEl()),t===window)return window.scrollTo(0,e);e-=this.getOffset(this.scrollParent),t[b[n]]=e}},{key:"getScrollSize",value:function(){var e=this.scrollParent,t=document,n=t.body,a=t.documentElement,r=y[this.props.axis];return e===window?Math.max(n[r],a[r]):e[r]}},{key:"hasDeterminateSize",value:function(){var e=this.props,t=e.itemSizeGetter;return"uniform"===e.type||t}},{key:"getStartAndEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.threshold,t=this.getScrollPosition(),n=Math.max(0,t-e),a=t+this.props.scrollParentViewportSizeGetter(this)+e;return this.hasDeterminateSize()&&(a=Math.min(a,this.getSpaceBefore(this.props.length))),{start:n,end:a}}},{key:"getItemSizeAndItemsPerRow",value:function(){var e=this.props,t=e.axis,n=e.useStaticSize,a=this.state,r=a.itemSize,o=a.itemsPerRow;if(n&&r&&o)return{itemSize:r,itemsPerRow:o};var s=this.items.children;if(!s.length)return{};var i=s[0],c=i[g[t]],l=Math.abs(c-r);if((isNaN(l)||l>=1)&&(r=c),!r)return{};for(var u=E[t],m=i[u],d=s[o=1];d&&d[u]===m;d=s[o])++o;return{itemSize:r,itemsPerRow:o}}},{key:"clearSizeCache",value:function(){this.cachedScrollPosition=null}},{key:"updateFrameAndClearCache",value:function(e){return this.clearSizeCache(),this.updateFrame(e)}},{key:"updateFrame",value:function(e){switch(this.updateScrollParent(),"function"!=typeof e&&(e=P),this.props.type){case"simple":return this.updateSimpleFrame(e);case"variable":return this.updateVariableFrame(e);case"uniform":return this.updateUniformFrame(e)}}},{key:"updateScrollParent",value:function(){var e=this.scrollParent;this.scrollParent=this.props.scrollParentGetter(this),e!==this.scrollParent&&(e&&(e.removeEventListener("scroll",this.updateFrameAndClearCache),e.removeEventListener("mousewheel",P)),this.clearSizeCache(),this.scrollParent.addEventListener("scroll",this.updateFrameAndClearCache,T),this.scrollParent.addEventListener("mousewheel",P,T))}},{key:"updateSimpleFrame",value:function(e){var t=this.getStartAndEnd().end,n=this.items.children,a=0;if(n.length){var r=this.props.axis,o=n[0],s=n[n.length-1];a=this.getOffset(s)+s[g[r]]-this.getOffset(o)}if(a>t)return e();var i=this.props,c=i.pageSize,l=i.length,u=Math.min(this.state.size+c,l);this.maybeSetState({size:u},e)}},{key:"updateVariableFrame",value:function(e){this.props.itemSizeGetter||this.cacheSizes();for(var t=this.getStartAndEnd(),n=t.start,a=t.end,r=this.props,o=r.length,s=r.pageSize,i=0,c=0,l=0,u=o-1;c<u;){var m=this.getSizeOfItem(c);if(null==m||i+m>n)break;i+=m,++c}for(var d=o-c;l<d&&i<a;){var p=this.getSizeOfItem(c+l);if(null==p){l=Math.min(l+s,d);break}i+=p,++l}this.maybeSetState({from:c,size:l},e)}},{key:"updateUniformFrame",value:function(e){var t=this.getItemSizeAndItemsPerRow(),n=t.itemSize,a=t.itemsPerRow;if(!n||!a)return e();var r=this.getStartAndEnd(),o=r.start,s=r.end,i=I(this.props,{from:Math.floor(o/n)*a,size:(Math.ceil((s-o)/n)+1)*a,itemsPerRow:a}),c=i.from,l=i.size;return this.maybeSetState({itemsPerRow:a,from:c,itemSize:n,size:l},e)}},{key:"getSpaceBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t[e])return t[e];var n=this.state,a=n.itemSize,r=n.itemsPerRow;if(a)return t[e]=Math.floor(e/r)*a;for(var o=e;o>0&&null==t[--o];);for(var s=t[o]||0,i=o;i<e;++i){t[i]=s;var c=this.getSizeOfItem(i);if(null==c)break;s+=c}return t[e]=s}},{key:"cacheSizes",value:function(){for(var e=this.cache,t=this.state.from,n=this.items.children,a=g[this.props.axis],r=0,o=n.length;r<o;++r)e[t+r]=n[r][a]}},{key:"getSizeOfItem",value:function(e){var t=this.cache,n=this.items,a=this.props,r=a.axis,o=a.itemSizeGetter,s=a.itemSizeEstimator,i=a.type,c=this.state,l=c.from,u=c.itemSize,m=c.size;if(u)return u;if(o)return o(e);if(e in t)return t[e];if("simple"===i&&e>=l&&e<l+m&&n){var d=n.children[e-l];if(d)return d[g[r]]}return s?s(e,t):void 0}},{key:"scrollTo",value:function(e){null!=e&&this.setScroll(this.getSpaceBefore(e))}},{key:"scrollAround",value:function(e){var t=this.getScrollPosition(),n=this.getSpaceBefore(e),a=n-this.props.scrollParentViewportSizeGetter(this)+this.getSizeOfItem(e),r=Math.min(a,n),o=Math.max(a,n);return t<=r?this.setScroll(r):t>o?this.setScroll(o):void 0}},{key:"getVisibleRange",value:function(){for(var e,t,n=this.state,a=n.from,r=n.size,o=this.getStartAndEnd(0),s=o.start,i=o.end,c={},l=a;l<a+r;++l){var u=this.getSpaceBefore(l,c),m=u+this.getSizeOfItem(l);null==e&&m>s&&(e=l),null!=e&&u<i&&(t=l)}return[e,t]}},{key:"renderItems",value:function(){for(var e=this,t=this.props,n=t.itemRenderer,a=t.itemsRenderer,r=this.state,o=r.from,s=r.size,i=[],c=0;c<s;++c)i.push(n(o+c,c));return a(i,(function(t){return e.items=t}))}},{key:"render",value:function(){var e=this,n=this.props,a=n.axis,r=n.length,o=n.type,s=n.useTranslate3d,i=this.state,c=i.from,l=i.itemsPerRow,u=this.renderItems();if("simple"===o)return u;var m={position:"relative"},d={},p=Math.ceil(r/l)*l,h=this.getSpaceBefore(p,d);h&&(m[D[a]]=h,"x"===a&&(m.overflowX="hidden"));var f=this.getSpaceBefore(c,d),S="x"===a?f:0,v="y"===a?f:0,g=s?"translate3d(".concat(S,"px, ").concat(v,"px, 0)"):"translate(".concat(S,"px, ").concat(v,"px)"),E={msTransform:g,WebkitTransform:g,transform:g};return t.default.createElement("div",{style:m,ref:function(t){return e.el=t}},t.default.createElement("div",{style:E},u))}}]),n}(t.Component),h(a,"displayName","ReactList"),h(a,"propTypes",{axis:n.default.oneOf(["x","y"]),initialIndex:n.default.number,itemRenderer:n.default.func,itemSizeEstimator:n.default.func,itemSizeGetter:n.default.func,itemsRenderer:n.default.func,length:n.default.number,minSize:n.default.number,pageSize:n.default.number,scrollParentGetter:n.default.func,scrollParentViewportSizeGetter:n.default.func,threshold:n.default.number,type:n.default.oneOf(["simple","variable","uniform"]),useStaticSize:n.default.bool,useTranslate3d:n.default.bool}),h(a,"defaultProps",{axis:"y",itemRenderer:function(e,n){return t.default.createElement("div",{key:n},e)},itemsRenderer:function(e,n){return t.default.createElement("div",{ref:n},e)},length:0,minSize:1,pageSize:10,scrollParentGetter:function(e){for(var t=e.props.axis,n=e.getEl(),a=C[t];n=n.parentElement;)switch(window.getComputedStyle(n)[a]){case"auto":case"scroll":case"overlay":return n}return window},scrollParentViewportSizeGetter:function(e){var t=e.props.axis,n=e.scrollParent;return n===window?window[v[t]]:n[f[t]]},threshold:100,type:"simple",useStaticSize:!1,useTranslate3d:!1}),r)})?a.apply(t,r):a)||(e.exports=o)},yVEt:function(e,t,n){}}]);