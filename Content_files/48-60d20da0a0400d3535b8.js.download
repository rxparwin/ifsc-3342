(window.webpackJsonp=window.webpackJsonp||[]).push([[48,143],{"/3bX":function(e,t,i){var s=i("ziER"),o=i("5JeM"),n=new s({id:"icon-medium-box",use:"icon-medium-box-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-box"><path stroke-width="1.95" d="M17.186 17.398l5.936-7.287M17.225 10.134l5.896 7.235" /><ellipse stroke-width="1.1" ry=".387" rx=".456" cy="10.249" cx="23.016" /><ellipse stroke-width="1.1" ry=".387" rx=".456" cy="17.273" cx="17.304" /><ellipse stroke-width="1.1" ry=".387" rx=".456" cy="17.273" cx="23.029" /><ellipse stroke-width="1.1" ry=".387" rx=".456" cy="10.249" cx="17.304" /><ellipse stroke-width="1.9" ry="3.618" rx="3.606" cy="13.755" cx="12.38" /><ellipse stroke-width="1.9" ry="3.618" rx="3.606" cy="13.755" cx="4.481" /><ellipse stroke-width="1.1" ry=".387" rx=".4" cy="6.399" cx=".898" /><path stroke-width="1.6" d="M.806 7.04h.219v5.871H.806z" /></symbol>'});o.add(n);e.exports=n},"4WO5":function(e,t,i){"use strict";var s=i("D57K"),o=(i("l+9M"),i("68Mn"),i("dV61"),i("6s5h"),i("IfWz"),i("/3bX"),i("MOE3"),i("imEv"),i("nsO7")),n=i("lut3"),r=i("0JpG"),a=i("fYJU"),c=i("Vsv2"),l=i("12mu"),u=i("pjml"),d=i("gbHk"),h=i("emI2"),p=i("lEL+"),f=i("Q/M7"),m=i("tkGi");function v(e){var t=e;return/^\+?\d+$/.test(e)||(t=e.replace(/[^\+\d]/g,"")),t}var w=i("c+ks"),b=i("NDLj");i.d(t,"c",(function(){return g})),i.d(t,"b",(function(){return P})),i.d(t,"a",(function(){return k}));var g="ultra.base.profile.controller",y=2e3,P=n.a,k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t}(function(){function e(e,t,i,s,o,n,r,a,l,u,h,p,f,v,w,b){var g=this;this.$http=e,this.$timeout=t,this.$scope=i,this.userConfiguration=s,this.isMobileDistributorActive=o,this.contextUser=n,this.cloudDriveService=r,this.UserModel=a,this.modal=l,this.prefService=u,this.timeout=h,this.LanguagesModel=p,this.bbLocalize=f,this.NotificationGeneralSettings=v,this.PrivacyPolicyModel=w,this.kloudService=b,this.personalKloudlessAccounts=[],this.isCloudServiceAvailable=!1,i.baseProfile=this,this.UserModel.$find("me").$asPromise().then((function(e){g.loadCurrentUser(e)})),this.cloudDriveService.isCloudServiceAvailable(c.a.KLOUDLESS).then((function(e){g.isCloudServiceAvailable=e})),v.$build().$fetch().$then((function(e){i.isSmsOn="A"===e.settings.sms_setting.attributeValue})),this.initializeKloudless(),this.$scope.$on(P,(function(e,t){g.loadCurrentUser(t),n._setUserModel(t)})),this.$scope.$on(d.b,(function(e){g.msgModal=g.showChangePasswordSuccessMessage(),g.closeChangePasswordSuccessMessage(g.msgModal,y)})),this.$scope.$on(m.a,(function(e,t){g.setUpLanguages(t)})),this.PrivacyPolicyModel.getPrivacyPolicy().then((function(e){g.privacyPolicy=e}))}return e.prototype.showChangePasswordSuccessMessage=function(){return this.modal.open({scope:this.$scope,template:w,resolve:{translations:[r.serviceName,function(e){return e.loadBundle("features/base/profile/base-profile")}]}})},e.prototype.closeChangePasswordSuccessMessage=function(e,t){e&&this.timeout((function(){e.dismiss()}),this.$scope,t)},e.prototype.loadCurrentUser=function(e){var t=this;this.user=e,this.LanguagesModel.$collection().$fetch({limit:1e4}).$then((function(e){t.languages=e,t.setUpLanguages(t.user.locale)})),this.user.permissions.fieldPermissions||(this.user.permissions.fieldPermissions={},o.values(this.userConfiguration).forEach((function(e){o.set(t.user.permissions.fieldPermissions,e.fieldName,t.user.permissions.editAccountInfo&&e.isEditable)}))),this.user.mobilePhone&&(this.user.mobilePhone=v(this.user.mobilePhone)),this.user.homePhone1&&(this.user.homePhone1=v(this.user.homePhone1)),this.user.businessPhone1&&(this.user.businessPhone1=v(this.user.businessPhone1))},e.prototype.userHasPhoneNumber=function(){return this.user&&(this.user.businessPhone1||this.user.homePhone1||this.user.mobilePhone)},e.prototype.userCanEditPhoneNumber=function(){return this.user&&this.user.permissions.fieldPermissions&&(this.user.permissions.fieldPermissions.businessPhone1||this.user.permissions.fieldPermissions.homePhone1||this.user.permissions.fieldPermissions.mobilePhone)},e.prototype.userHasMailingAddress=function(){return this.user&&(this.user.street1||this.user.street2||this.user.city||this.user.state||this.user.zipCode||this.user.country)},e.prototype.userCanEditMailingAddress=function(){return this.user&&this.user.permissions.fieldPermissions&&(this.user.permissions.fieldPermissions.street1||this.user.permissions.fieldPermissions.street2||this.user.permissions.fieldPermissions.city||this.user.permissions.fieldPermissions.state||this.user.permissions.fieldPermissions.zipCode||this.user.permissions.fieldPermissions.country)},e.prototype.showAdditionalInformation=function(){return this.user&&this.user.permissions.fieldPermissions&&(this.user.permissions.fieldPermissions.gender||this.user.gender&&!u.Pb.Gender.Unknown.isEqualTo(this.user.gender)||this.user.permissions.fieldPermissions.otherName||this.user.otherName||this.user.permissions.fieldPermissions.birthDate||this.user.birthDate||this.user.permissions.fieldPermissions.educationLevel||this.user.educationLevel&&!u.Pb.EducationLevel.Unknown.isEqualTo(this.user.educationLevel)||this.user.permissions.fieldPermissions.webPage||this.user.webPage)},e.prototype.showContactInformation=function(){return this.user&&this.user.permissions.fieldPermissions&&(this.userCanEditMailingAddress()||this.userHasMailingAddress()||this.userHasPhoneNumber()||this.userCanEditPhoneNumber()||this.user.permissions.fieldPermissions.businessFax||this.user.businessFax)},e.prototype.showJobInformation=function(){return this.user&&this.user.permissions.fieldPermissions&&(this.user.permissions.fieldPermissions.company||this.user.company||this.user.permissions.fieldPermissions.jobTitle||this.user.jobTitle||this.user.permissions.fieldPermissions.department||this.user.department)},e.prototype.openUserWebPage=function(){f.o(this.user.webPage)},e.prototype.setUpLanguages=function(e){this.userLanguage=o.find(this.languages,(function(t){return t.locale===e})),this.systemDefaultLanguage=o.find(this.languages,"isDefault"),this.translatedSystemDefaultLanguageLabel=this.bbLocalize.translateSync({key:"base.profile.language.systemDefault",params:{systemDefaultLanguage:this.systemDefaultLanguage.name},noEscape:!0,noWrap:!0,locale:this.systemDefaultLanguage.locale})},e.prototype.getUserPrivacyAriaKey=function(){var e=this.contextUser.userModel.visibilityScope.toString().toLowerCase();return"base.profile.privacySettings.edit."+(this.contextUser.userModel.isInstructor()?"instructors":"others")+"."+e},e.prototype.initializeKloudless=function(){var e=this;return this.kloudService.getInstitutionAccount().then((function(t){e.instAccountInfo=t})).then((function(){return e.initializeKloudlessAccounts()}))},e.prototype.initializeKloudlessAccounts=function(){var e=this;this.kloudService.getKloudlessAccounts().then((function(t){e.instKloudlessAccount=void 0,e.personalKloudlessAccounts=[],t.forEach((function(t){t.service===e.instAccountInfo.type&&t.name.endsWith("@"+e.instAccountInfo.domain)?e.instKloudlessAccount=t:e.personalKloudlessAccounts.push(t)}))}))},e.prototype.getCloudStorageName=function(e){return this.kloudService.getCloudStorageIcon(e)},e.prototype.connectInstitutionKloudless=function(){var e=this;this.kloudService.launchInstitutionAccount(this.instAccountInfo).then((function(){e.initializeKloudlessAccounts()}))},e.prototype.connectPersonalKloudless=function(){var e=this;this.kloudService.connectPersonalAccount().then((function(){e.initializeKloudlessAccounts()}))},e.prototype.deleteKloudlessAccount=function(e){var t=this;this.kloudService.deleteKloudlessAccount(e).then((function(){t.initializeKloudlessAccounts()}))},e.prototype.hasInstAccountInfo=function(){return this.instAccountInfo&&this.instAccountInfo.type&&this.instAccountInfo.domain&&("onedrivebiz"===this.instAccountInfo.type||"gdrive"===this.instAccountInfo.type)},e.$inject=["$http","$timeout","$scope","userConfiguration","isMobileDistributorActive",a.b,c.c,u.Pb.serviceName,l.b,h.c,p.b,u.M.serviceName,r.serviceName,u.S.serviceName,u.mb.serviceName,b.b],e}())},"68Mn":function(e,t,i){var s=i("ziER"),o=i("5JeM"),n=new s({id:"icon-small-stop-action",use:"icon-small-stop-action-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-stop-action"><path fill="none" stroke-miterlimit="10" d="M7.955.456c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5 7.5-3.358 7.5-7.5-3.357-7.5-7.5-7.5h0z" /><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M5.673 5.673h4.565v4.565H5.673z" /><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M6.325 6.325h3.261v3.261H6.325z" /><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M6.162 6.162h3.587v3.587H6.162z" /><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M6.977 6.977h1.957v1.957H6.977z" /><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M6.814 6.814h2.283v2.283H6.814z" /><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.629 7.629h.652v.652h-.652z" /><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M7.466 7.466h.978v.978h-.978z" /></symbol>'});o.add(n);e.exports=n},"6s5h":function(e,t,i){var s=i("ziER"),o=i("5JeM"),n=new s({id:"icon-medium-onedrivebiz",use:"icon-medium-onedrivebiz-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-onedrivebiz"><path stroke-width="2.2" d="M8.8 18.6c-1.1 0-2-.9-2-2s.9-2 2-2h1l.1-1c.2-1.6 1.6-2.8 3.2-2.8 1 0 1.9.4 2.5 1.2l.6.8.8-.4c.4-.2.7-.3 1.1-.3 1.4 0 2.5 1.1 2.5 2.5v1l1 .1c.4 0 .8.2 1 .5.2.2.2.4.2.7v.2c0 .9-.6 1.5-1.5 1.5H8.8z" /><path stroke-width="2.2" d="M8.8 17.2c-.3 0-.6-.3-.6-.6s.3-.6.6-.6h2.3l.3-2.3c.1-.8.9-1.5 1.8-1.5.6 0 1.1.2 1.4.6l1.3 1.7 1.9-1c.1-.1.3-.1.5-.1.6 0 1.1.5 1.1 1.1v2.3l2.0833.2-.0833.1H8.8v.1z" /><path stroke-width="2.2" d="M16.4 15.8l1.4-.7v.7h-1.4zm-3.9 0l.2-1.9c0-.1.2-.3.3-.3.1 0 .2 0 .2.1l1.6 2.1h-2.3z" /><path stroke-width="1.1" d="M3.3 17.8c-1.4 0-2.7-1.3-2.7-2.7 0-1.3 1-2.4 2.4-2.6l.8-.1-.3-.7c-.1-.1-.1-.3-.1-.5 0-1.9 1.5-3.5 3.5-3.5.7 0 1.4.2 1.9.5l.5.2.2-.5c.7-1.4 2.2-2.3 3.9-2.3 2.2 0 4 1.5 4.4 3.4-.3 0-.5.1-.7.2-1.1-.9-2.4-1.3-3.8-1.3-2.5 0-4.8 1.6-5.7 4-2.2.5-3.6 2.5-3.6 4.7 0 .4 0 .8.1 1.2h-.8z" /><path stroke-width="2" d="M3.1 16.9c-.9-.1-1.7-.9-1.7-1.9 0-.9.7-1.6 1.7-1.8l1.1-.2c-.7 1-1.1 2.2-1.1 3.4v.5zM4.2 11.3c-.1-.3 0-.5.1-.9.1-.3.2-.5.3-.7.3-.4.7-.8 1.2-1 .3-.1.6-.2 1-.2.5.1 1.2.3 1.6.5-.6.6-1.2 1.3-1.5 2.2-.8.3-1.5.8-2.1 1.4 0-.1-.2-.4-.2-.4-.2-.4-.3-.6-.4-.9z" /><path d="M16.1 7.6c-.9-.4-1.8-.6-2.9-.6-.8 0-1.6.2-2.4.4.6-.6 1.5-1 2.5-1 1.1 0 2.2.5 2.8 1.2zM16.1 7.6l1 .9" /><path stroke-width="2" d="M6.6 9.5l-1.4 1.4M12.7 15.7h5.1" /><path stroke-width=".5" d="M9.742 7.983h.633v.55h-.633z" /></symbol>'});o.add(n);e.exports=n},IfWz:function(e,t,i){var s=i("ziER"),o=i("5JeM"),n=new s({id:"icon-medium-gdrive",use:"icon-medium-gdrive-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-gdrive"><path stroke-width="4" d="M7.481 7.4388l1.189 2.081-2.329 4.0338-1.189-2.081 2.329-4.0338z" /><path stroke-width="4" d="M5.3476 11.1388l1.189 2.081-2.329 4.0338-1.189-2.081 2.329-4.0338zM13.6147 19.5662l1.2334-2.1144h4.7574l-1.2334 2.1144h-4.7574z" /><path stroke-width="4" d="M9.364 19.5662l1.2333-2.1144h4.7574l-1.2334 2.1144H9.364zM17.1374 8.4873l-2.3708-.0106-2.304-3.9905 2.371.0107 2.3038 3.9904h0z" /><path stroke-width="4" d="M19.3393 12.2794l-2.3709-.0106-2.304-3.9905 2.371.0106 2.3039 3.9905z" /></symbol>'});o.add(n);e.exports=n},MOE3:function(e,t,i){var s=i("ziER"),o=i("5JeM"),n=new s({id:"icon-medium-dropbox",use:"icon-medium-dropbox-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-dropbox"><path stroke-width="3.5" d="M9.1 18.6l2.9-1.9 2.8 1.9-2.8 1.8z" /><path stroke-width="3.4" d="M3.2 13.5L6 11.6l2.9 1.9L6 15.3zM15.1 13.5l2.9-1.9 2.8 1.9-2.8 1.8zM3.2 5.8L6 4l2.9 1.8L6 7.6zM15.1 5.8L18 4l2.8 1.8L18 7.6z" /></symbol>'});o.add(n);e.exports=n},NDLj:function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return p}));var s=i("D57K"),o=i("wHJ2"),n=i("z6Q5"),r=i("0JpG"),a=i("Vsv2"),c=i("pjml"),l=i("emI2"),u=i("OBf2"),d=i("aHpC"),h="ultra.service.kloudless",p="kloudless",f=function(){function e(e,t,i,s,o,n,r){this.$q=e,this.$timeout=t,this.batchService=i,this.bbLocalize=s,this.cloudDrive=o,this.SystemPreferenceModel=n,this.preferences=r,this.initializeRequired=!0}return e.prototype.getInstitutionAccount=function(){var e=this,t=new u.a;return t.type="disabled",this.batchService.performBatch((function(){return e.$q.all([e.SystemPreferenceModel.$find("institution_cloud_storage_provider_type").$allow([404]).$asPromise(),e.SystemPreferenceModel.$find("institution_cloud_storage_domain").$allow([404]).$asPromise()]).then((function(i){return i&&(t.type=e.getPreferenceValueByKey(i,"institution_cloud_storage_provider_type"),t.domain=e.getPreferenceValueByKey(i,"institution_cloud_storage_domain")),t}))}))},e.prototype.getKloudlessAccounts=function(){var e=[];return this.preferences.getPreference(u.c,"[]").then((function(t){return t&&t.value&&(e=JSON.parse(t.value)),e}))},e.prototype.getConnectedInstitutionAccount=function(e,t){var i=null;return t&&t.forEach((function(t){t.service===e.type&&t.name.endsWith(e.domain)&&(i=t)})),i},e.prototype.getCloudStorageIcon=function(e){switch(e){case"gdrive":return"gdrive";case"onedrivebiz":return"onedrivebiz";case"box":return"box";case"dropbox":return"dropbox";case"skydrive":return"skydrive";default:return""}},e.prototype.authenticateCallBack=function(e){var t=this;if(e.error)throw new Error("Unable to authenticate account: "+e.error);var i={id:e.account.id,name:e.account.account,service:e.account.service,bearer_token:{key:e.access_token}};this.preferences.getPreference(u.c).then((function(e){var s=JSON.parse(e.value).filter((function(e){return e.id!==i.id}));s.push(i),t.preferences.setPreference(u.c,JSON.stringify(s)),t.accountsInitialized.resolve()})).catch((function(){var e=[];e.push(i),t.preferences.setPreference(u.c,JSON.stringify(e)),t.accountsInitialized.resolve()}))},e.prototype.launchAuthenticator=function(e,t){var i=this;this.cloudDrive.isCloudServiceAvailable(a.a.KLOUDLESS).then((function(){var s=i.cloudDrive.cloudDriveStorage[a.a.KLOUDLESS.toString()],o=i.getKloudlessInfo(),n=i.authenticateCallBack.bind(i);if(s.authenticator){var r="";r=e?t:"gdrive onedrivebiz box dropbox skydrive",s.authenticator(null,{client_id:o.client_id,base_url:o.base_url,scope:r},n).launch()}else console.error("Authenticator is not available")}))},e.prototype.initAuthenticationDeferred=function(){return!this.initializeRequired&&this.accountsInitialized||(this.accountsInitialized=this.$q.defer(),this.initializeRequired=!1),this.accountsInitialized},e.prototype.launchInstitutionAccount=function(e,t){var i=this;return this.initializeRequired=!0,this.initAuthenticationDeferred(),this.getKloudlessAccounts().then((function(s){var o=i.getConnectedInstitutionAccount(e,s);null===o?i.launchAuthenticator(!0,e.type):i.launchToService(o,t)})),this.accountsInitialized.promise},e.prototype.connectPersonalAccount=function(){return this.initializeRequired=!0,this.initAuthenticationDeferred(),this.launchAuthenticator(!1,void 0),this.accountsInitialized.promise},e.prototype.getPreferenceValueByKey=function(e,t){var i=e.find((function(e){return e.key===t}));return i?i.value:null},e.prototype.deleteKloudlessAccount=function(e){var t=this;return this.getKloudlessAccounts().then((function(i){var s=i.filter((function(t){return t.id!==e}));return t.preferences.setPreference(u.c,JSON.stringify(s)),s}))},e.prototype.getOneDriveLink=function(e){var t=this.$q.defer(),i=this.getKloudlessInfo().base_url+"/v1/accounts/"+e.id+"?retrieve_tokens=true";return fetch(i,{method:"GET",headers:{Authorization:"Bearer "+e.bearer_token.key}}).then((function(e){e.json().then((function(e){try{var i=JSON.parse(e.token).oauth.split("."),s=JSON.parse(window.atob(i[1]));t.resolve(s.aud)}catch(e){t.reject(e.message)}}))})).catch((function(e){t.reject(e.message)})),t.promise},e.prototype.launchToService=function(e,t){switch(this.initAuthenticationDeferred(),e.service){case"gdrive":this.getInstitutionAccount().then((function(t){if("gdrive"===t.type&&e.name.endsWith(t.domain)){var i=e.name.substring(e.name.indexOf("@")+1);window.open("https://drive.google.com/a/"+i,"_blank")}else window.open("https://drive.google.com/drive/u/0/","_blank")}));break;case"onedrivebiz":t?window.open(t,"_blank"):this.getOneDriveLink(e).then((function(e){window.open(e,"_blank")})).catch((function(e){console.error(e)}));break;case"skydrive":window.open("https://onedrive.live.com","_blank");break;case"dropbox":window.open("https://www.dropbox.com/h","_blank");break;case"box":window.open("https://www.box.com","_blank")}},e.prototype.getKloudlessInfo=function(){return this.cloudDrive.cloudDriveStorage[a.a.KLOUDLESS.toString()].getKloudlessInfo()},e=Object(s.__decorate)([Object(s.__param)(0,Object(d.b)("$q")),Object(s.__param)(1,Object(d.b)("$timeout")),Object(s.__param)(2,Object(d.b)(n.b)),Object(s.__param)(3,Object(d.b)(r.serviceName)),Object(s.__param)(4,Object(d.b)(a.c)),Object(s.__param)(5,Object(d.b)(c.vb.serviceName)),Object(s.__param)(6,Object(d.b)(l.c))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(s.__extends)(t,e)}(f);o.module(h,[c.Q,l.b,n.a]).service(p,f)},"c+ks":function(e,t){e.exports='<bb-modal class="notification change-password"\n          modal-title-key="base.profile.update-password.successModal.title"\n          analytics-id-tag-prefix="base.profile.update.password.closeSuccessModal">\n  <div name="modal-contents">\n    <p bb-translate>base.profile.update-password.successModal.description</p>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          class="button"\n          ng-click="$parent.$close()"\n          bb-translate\n          analytics-id="features.base.profile.update.password.closeSuccessModal.button">global.ok</button>\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n</bb-modal>'},dV61:function(e,t,i){var s=i("ziER"),o=i("5JeM"),n=new s({id:"icon-small-trash",use:"icon-small-trash-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-trash"><path d="M4 4l2-3h4l2 3M2 5l1 10h10l1-10M1 4h14M8 7v5M11 7l-.5 5M5 7l.5 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(n);e.exports=n},gbHk:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return l}));var s=i("D57K"),o=(i("GkCm"),i("fYJU")),n=i("pjml"),r=i("TnpK"),a="profile.update-password.controller",c="password-changed",l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t}(function(){function e(e,t,i,s,o,n,r){this.$rootScope=e,this.$scope=t,this.$modal=i,this.$q=s,this.UserModel=o,this.ultraStateService=n,this.contextUser=r,this.userHasOldPassword=!0,this.isSaving=!1,this.oldPwdIsValid=!1,this.newPwdIsValid=!1,this.newConfirmedPwdIsValid=!1,t.updatePassword=this,this.loadCurrentUser()}return e.prototype.loadCurrentUser=function(){var e=this;this.UserModel.$find(this.contextUser.userId).$asPromise().then((function(t){e.user=t}))},e.prototype.persist=function(){var t,i=this;if(this.isSaving)return this.$q.when();this.isSaving=!0;var s=this.getTrimmedNewPassword();return s&&(this.oldPassword&&(this.user.inputOldPassword=this.oldPassword),this.user.password=s,t=this.user.$patch().$asPromise().then((function(e){i.ultraStateService.leavePeekState(i.ultraStateService.current.name).then((function(){i.$rootScope.$broadcast(c)}))})).catch((function(t){i.$scope.updatePasswordForm.$setPristine(),400===t.$response.status&&(i.setValidity("old-password",e.INVALID_OLD_PASSWORD,!1),t.$response.status=null)})).finally((function(){i.isSaving=!1}))),t||this.$q.when()},e.prototype.getTrimmedNewPassword=function(){return this.newPassword?this.newPassword.trim():""},e.prototype.setValidity=function(e,t,i){var s=this.$scope.updatePasswordForm[e];s&&t&&s.$setValidity(t,i)},e.prototype.validate=function(e){var t=this.getTrimmedNewPassword();this.oldPwdIsValid=!this.userHasOldPassword||!!this.oldPassword,this.newPwdIsValid=!!t,this.newConfirmedPwdIsValid=this.newPassword===this.confirmNewPassword,e||(this.setValidity("old-password","required",!!this.oldPassword),this.setValidity("new-password","required",!!this.newPassword),this.setValidity("new-password","cannotBeWhiteSpace",!!t),this.setValidity("confirm-new-password","required",!!this.confirmNewPassword),this.setValidity("confirm-new-password","differentWithNewPassword",this.newConfirmedPwdIsValid))},e.prototype.clearValidationForOldPwd=function(){this.setValidity("old-password","required",!0);var t=this.$scope.updatePasswordForm["old-password"];t&&!t.$valid&&t.$setValidity(e.INVALID_OLD_PASSWORD,!0)},e.prototype.clearValidationForNewPwd=function(){this.setValidity("new-password","required",!0),this.setValidity("new-password","cannotBeWhiteSpace",!0)},e.prototype.clearValidationForConfirmedNewPwd=function(){this.setValidity("confirm-new-password","required",!0),this.setValidity("confirm-new-password","differentWithNewPassword",!0)},e.prototype.isPasswordAllValid=function(){return this.oldPwdIsValid&&this.newPwdIsValid&&this.newConfirmedPwdIsValid},e.INVALID_OLD_PASSWORD="invalidOldPassword",e.$inject=["$rootScope","$scope","$modal","$q",n.Pb.serviceName,r.d,o.b],e}())},imEv:function(e,t,i){var s=i("ziER"),o=i("5JeM"),n=new s({id:"icon-medium-skydrive",use:"icon-medium-skydrive-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-skydrive"><path stroke-width="2.2" d="M8.8 18.6c-1.1 0-2-.9-2-2s.9-2 2-2h1l.1-1c.2-1.6 1.6-2.8 3.2-2.8 1 0 1.9.4 2.5 1.2l.6.8.8-.4c.4-.2.7-.3 1.1-.3 1.4 0 2.5 1.1 2.5 2.5v1l1 .1c.4 0 .8.2 1 .5.2.2.2.4.2.7v.2c0 .9-.6 1.5-1.5 1.5H8.8z" /><path stroke-width="2.2" d="M8.8 17.2c-.3 0-.6-.3-.6-.6s.3-.6.6-.6h2.3l.3-2.3c.1-.8.9-1.5 1.8-1.5.6 0 1.1.2 1.4.6l1.3 1.7 1.9-1c.1-.1.3-.1.5-.1.6 0 1.1.5 1.1 1.1v2.3l2.0833.2-.0833.1H8.8v.1z" /><path stroke-width="2.2" d="M16.4 15.8l1.4-.7v.7h-1.4zm-3.9 0l.2-1.9c0-.1.2-.3.3-.3.1 0 .2 0 .2.1l1.6 2.1h-2.3z" /><path stroke-width="1.1" d="M3.3 17.8c-1.4 0-2.7-1.3-2.7-2.7 0-1.3 1-2.4 2.4-2.6l.8-.1-.3-.7c-.1-.1-.1-.3-.1-.5 0-1.9 1.5-3.5 3.5-3.5.7 0 1.4.2 1.9.5l.5.2.2-.5c.7-1.4 2.2-2.3 3.9-2.3 2.2 0 4 1.5 4.4 3.4-.3 0-.5.1-.7.2-1.1-.9-2.4-1.3-3.8-1.3-2.5 0-4.8 1.6-5.7 4-2.2.5-3.6 2.5-3.6 4.7 0 .4 0 .8.1 1.2h-.8z" /><path stroke-width="2" d="M3.1 16.9c-.9-.1-1.7-.9-1.7-1.9 0-.9.7-1.6 1.7-1.8l1.1-.2c-.7 1-1.1 2.2-1.1 3.4v.5zM4.2 11.3c-.1-.3 0-.5.1-.9.1-.3.2-.5.3-.7.3-.4.7-.8 1.2-1 .3-.1.6-.2 1-.2.5.1 1.2.3 1.6.5-.6.6-1.2 1.3-1.5 2.2-.8.3-1.5.8-2.1 1.4 0-.1-.2-.4-.2-.4-.2-.4-.3-.6-.4-.9z" /><path d="M16.1 7.6c-.9-.4-1.8-.6-2.9-.6-.8 0-1.6.2-2.4.4.6-.6 1.5-1 2.5-1 1.1 0 2.2.5 2.8 1.2zM16.1 7.6l1 .9" /><path stroke-width="2" d="M6.6 9.5l-1.4 1.4M12.7 15.7h5.1" /><path stroke-width=".5" d="M9.742 7.983h.633v.55h-.633z" /></symbol>'});o.add(n);e.exports=n},"l+9M":function(e,t,i){var s=i("ziER"),o=i("5JeM"),n=new s({id:"icon-small-draw",use:"icon-small-draw-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-draw"><path d="M15 4l-3-3L2 11l-1 4 4-1L15 4zM12 6l-2-2M6 12l-2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(n);e.exports=n},tkGi:function(e,t,i){"use strict";i.d(t,"c",(function(){return l})),i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return d}));var s=i("D57K"),o=(i("GkCm"),i("nsO7")),n=i("0JpG"),r=i("TnpK"),a=i("pjml"),c=i("fYJU"),l="ultra.features.base.profile.update.userLanguage.controller",u="language-changed",d=function(){function e(e,t,i,s,n,r,a){var c=this;this.$scope=e,this.$rootScope=t,this.$http=i,this.contextUser=s,this.bbLocalize=n,this.LanguagesModel=r,this.ultraState=a,this.isSaving=!1,e.userLanguage=this,this.user=s.userModel,this.originalUserLocale=this.user.locale,r.$collection().$fetch({limit:1e4}).$then((function(e){c.languages=o.filter(e,"isUserEnabled"),c.systemDefaultLanguage=o.find(e,"isDefault"),c.systemDefaultLanguageOptionName=c.bbLocalize.translateSync({key:"base.profile.language.systemDefault",params:{systemDefaultLanguage:c.systemDefaultLanguage.name},noEscape:!0,noWrap:!0,locale:c.user.locale}),o.some(c.languages,(function(e){return e.locale===c.user.locale}))||(c.user.locale=null)}))}return e.prototype.persist=function(){var e=this;return this.isSaving=!0,""===this.user.locale&&(this.user.locale=null),this.user.$patch().$asPromise().then((function(){e.isSaving=!1;var t=e.bbLocalize.isRTL(e.$rootScope);e.bbLocalize.setUserLocale(e.user.locale);var i=e.user.locale||e.bbLocalize.getAppLocale();return e.bbLocalize.setLocale(e.$rootScope,i).then((function(){e.$rootScope.$broadcast(u,i),t!==e.bbLocalize.isRTL(e.$rootScope)?document.location.href=e.ultraState.href("base.profile"):e.ultraState.go("base.profile")})),e.user}))},e.prototype.validate=function(){return!0},e.prototype.cancelClicked=function(){this.user.locale=this.originalUserLocale,this.persist(),this.ultraState.go("base.profile")},e.$inject=["$scope","$rootScope","$http",c.b,n.serviceName,a.M.serviceName,r.d],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(s.__extends)(t,e)}(d)}}]);